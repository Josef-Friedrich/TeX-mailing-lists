From taco at elvenkind.com  Mon Jan 21 12:51:26 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 21 Jan 2008 12:51:26 +0100
Subject: [dev-context] [NTG-context] amsmath features (redirected)
In-Reply-To: <alpine.DEB.0.9999.0801210630120.6139@nqv-yncgbc>
References: <b11f605c0801200914j78ae5804j1befa2bbba17d76d@mail.gmail.com>
	<alpine.DEB.0.9999.0801210630120.6139@nqv-yncgbc>
Message-ID: <4794873E.3070101@elvenkind.com>

Aditya Mahajan wrote:
> 
> Hans: I am not sure which is the right way to interface this. Should we 
> add \setupmathematics (there could be other options in the future)?

It is for sure that there will be other options, for example:

    \setupmathematics[method=tex|opentype] % for otf MATH feature


Best wishes,
Taco

From pragma at wxs.nl  Mon Jan 21 13:02:17 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 21 Jan 2008 13:02:17 +0100
Subject: [dev-context] [NTG-context] amsmath features (redirected)
In-Reply-To: <4794873E.3070101@elvenkind.com>
References: <b11f605c0801200914j78ae5804j1befa2bbba17d76d@mail.gmail.com>	<alpine.DEB.0.9999.0801210630120.6139@nqv-yncgbc>
	<4794873E.3070101@elvenkind.com>
Message-ID: <479489C9.3040606@wxs.nl>

Taco Hoekwater wrote:
> Aditya Mahajan wrote:
>> Hans: I am not sure which is the right way to interface this. Should we 
>> add \setupmathematics (there could be other options in the future)?
> 
> It is for sure that there will be other options, for example:
> 
>     \setupmathematics[method=tex|opentype] % for otf MATH feature

indeed

btw, there is setupformulas, isn't there?

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Mon Jan 21 13:08:10 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 21 Jan 2008 13:08:10 +0100
Subject: [dev-context] [NTG-context] amsmath features (redirected)
In-Reply-To: <479489C9.3040606@wxs.nl>
References: <b11f605c0801200914j78ae5804j1befa2bbba17d76d@mail.gmail.com>	<alpine.DEB.0.9999.0801210630120.6139@nqv-yncgbc>
	<4794873E.3070101@elvenkind.com> <479489C9.3040606@wxs.nl>
Message-ID: <47948B2A.5030603@elvenkind.com>

Hans Hagen wrote:
> Taco Hoekwater wrote:
>> Aditya Mahajan wrote:
>>> Hans: I am not sure which is the right way to interface this. Should 
>>> we add \setupmathematics (there could be other options in the future)?
>>
>> It is for sure that there will be other options, for example:
>>
>>     \setupmathematics[method=tex|opentype] % for otf MATH feature
> 
> indeed
> 
> btw, there is setupformulas, isn't there?

yes, but we need something that is true for all math, noit just displays

From taco at elvenkind.com  Mon Jan 21 14:59:38 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 21 Jan 2008 14:59:38 +0100
Subject: [dev-context] [NTG-context] amsmath features (redirected)
In-Reply-To: <alpine.DEB.0.9999.0801210718130.6139@nqv-yncgbc>
References: <b11f605c0801200914j78ae5804j1befa2bbba17d76d@mail.gmail.com>
	<alpine.DEB.0.9999.0801210630120.6139@nqv-yncgbc>
	<4794873E.3070101@elvenkind.com> <479489C9.3040606@wxs.nl>
	<47948B2A.5030603@elvenkind.com>
	<alpine.DEB.0.9999.0801210718130.6139@nqv-yncgbc>
Message-ID: <4794A54A.9010007@elvenkind.com>



Aditya Mahajan wrote:
> 
> I am attaching an update math-tex.tex. I have not yet included the 
> interface. Is the key mo used anywhere? It is defined in mult-sys but it 
> does not seem to be in use.

I am almost certain it was added for my old m-math that is now
dysfunctional, so feel free to reuse 'mo'.

Best wishes,
Taco

From adityam at umich.edu  Mon Jan 21 19:34:27 2008
From: adityam at umich.edu (Aditya Mahajan)
Date: Mon, 21 Jan 2008 13:34:27 -0500 (EST)
Subject: [dev-context] [NTG-context] amsmath features (redirected)
In-Reply-To: <4794A54A.9010007@elvenkind.com>
References: <b11f605c0801200914j78ae5804j1befa2bbba17d76d@mail.gmail.com>
	<alpine.DEB.0.9999.0801210630120.6139@nqv-yncgbc>
	<4794873E.3070101@elvenkind.com> <479489C9.3040606@wxs.nl>
	<47948B2A.5030603@elvenkind.com>
	<alpine.DEB.0.9999.0801210718130.6139@nqv-yncgbc>
	<4794A54A.9010007@elvenkind.com>
Message-ID: <alpine.DEB.0.9999.0801211329110.8357@nqv-yncgbc>

On Mon, 21 Jan 2008, Taco Hoekwater wrote:
>
> Aditya Mahajan wrote:
>> 
>> I am attaching an update math-tex.tex. I have not yet included the 
>> interface. Is the key mo used anywhere? It is defined in mult-sys but it 
>> does not seem to be in use.
>
> I am almost certain it was added for my old m-math that is now
> dysfunctional, so feel free to reuse 'mo'.

Ok, attached is the updated math-tex.tex (taken care of a small bug, and 
attaching the right file this time) with the interface. Right now I have

\setupmathematics
   [integral=nolimits|displaylimits|limits]

Feel free to change the names of the options. I am not as creative as you 
in coming up with good names. I am aslo attaching a small test file.

Aditya
-------------- next part --------------
A non-text attachment was scrubbed...
Name: int-test.tex
Type: text/x-tex
Size: 651 bytes
Desc: 
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20080121/00743782/attachment-0002.bin 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: math-tex.tex
Type: text/x-tex
Size: 28274 bytes
Desc: 
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20080121/00743782/attachment-0003.bin 

From pragma at wxs.nl  Tue Jan 22 00:22:35 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 22 Jan 2008 00:22:35 +0100
Subject: [dev-context] [NTG-context] amsmath features (redirected)
In-Reply-To: <alpine.DEB.0.9999.0801211329110.8357@nqv-yncgbc>
References: <b11f605c0801200914j78ae5804j1befa2bbba17d76d@mail.gmail.com>
	<alpine.DEB.0.9999.0801210630120.6139@nqv-yncgbc>
	<4794873E.3070101@elvenkind.com> <479489C9.3040606@wxs.nl>
	<47948B2A.5030603@elvenkind.com>
	<alpine.DEB.0.9999.0801210718130.6139@nqv-yncgbc>
	<4794A54A.9010007@elvenkind.com>
	<alpine.DEB.0.9999.0801211329110.8357@nqv-yncgbc>
Message-ID: <4795293B.6040507@wxs.nl>

Aditya Mahajan wrote:
> On Mon, 21 Jan 2008, Taco Hoekwater wrote:
>>
>> Aditya Mahajan wrote:
>>>
>>> I am attaching an update math-tex.tex. I have not yet included the 
>>> interface. Is the key mo used anywhere? It is defined in mult-sys but 
>>> it does not seem to be in use.
>>
>> I am almost certain it was added for my old m-math that is now
>> dysfunctional, so feel free to reuse 'mo'.
> 
> Ok, attached is the updated math-tex.tex (taken care of a small bug, and 
> attaching the right file this time) with the interface. Right now I have
> 
> \setupmathematics
>   [integral=nolimits|displaylimits|limits]
> 
> Feel free to change the names of the options. I am not as creative as 
> you in coming up with good names. I am aslo attaching a small test file.


some day we may need processallactionsinset, i.e. integral is rather 
generic and may get more options

btw, why no sum=nolimits|displaylimits|limits

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From adityam at umich.edu  Tue Jan 22 00:29:13 2008
From: adityam at umich.edu (Aditya Mahajan)
Date: Mon, 21 Jan 2008 18:29:13 -0500 (EST)
Subject: [dev-context] [NTG-context] amsmath features (redirected)
In-Reply-To: <4795293B.6040507@wxs.nl>
References: <b11f605c0801200914j78ae5804j1befa2bbba17d76d@mail.gmail.com>
	<alpine.DEB.0.9999.0801210630120.6139@nqv-yncgbc>
	<4794873E.3070101@elvenkind.com> <479489C9.3040606@wxs.nl>
	<47948B2A.5030603@elvenkind.com>
	<alpine.DEB.0.9999.0801210718130.6139@nqv-yncgbc>
	<4794A54A.9010007@elvenkind.com>
	<alpine.DEB.0.9999.0801211329110.8357@nqv-yncgbc>
	<4795293B.6040507@wxs.nl>
Message-ID: <alpine.DEB.0.9999.0801211824350.8357@nqv-yncgbc>

On Tue, 22 Jan 2008, Hans Hagen wrote:

> btw, why no sum=nolimits|displaylimits|limits

Convention. AMS-tex did not provide it as an option, so no one uses it.

Aditya

From adityam at umich.edu  Tue Jan 22 00:40:03 2008
From: adityam at umich.edu (Aditya Mahajan)
Date: Mon, 21 Jan 2008 18:40:03 -0500 (EST)
Subject: [dev-context] [NTG-context] amsmath features (redirected)
In-Reply-To: <alpine.DEB.0.9999.0801211824350.8357@nqv-yncgbc>
References: <b11f605c0801200914j78ae5804j1befa2bbba17d76d@mail.gmail.com>
	<alpine.DEB.0.9999.0801210630120.6139@nqv-yncgbc>
	<4794873E.3070101@elvenkind.com> <479489C9.3040606@wxs.nl>
	<47948B2A.5030603@elvenkind.com>
	<alpine.DEB.0.9999.0801210718130.6139@nqv-yncgbc>
	<4794A54A.9010007@elvenkind.com>
	<alpine.DEB.0.9999.0801211329110.8357@nqv-yncgbc>
	<4795293B.6040507@wxs.nl>
	<alpine.DEB.0.9999.0801211824350.8357@nqv-yncgbc>
Message-ID: <alpine.DEB.0.9999.0801211837220.8357@nqv-yncgbc>

On Mon, 21 Jan 2008, Aditya Mahajan wrote:

> On Tue, 22 Jan 2008, Hans Hagen wrote:
>
>> btw, why no sum=nolimits|displaylimits|limits
>
> Convention. AMS-tex did not provide it as an option, so no one uses it.

Actually, amsmath does provide such an option. I never knew of it. I will 
include this in math-tex.

Aditya

From adityam at umich.edu  Mon Jan 21 13:33:12 2008
From: adityam at umich.edu (Aditya Mahajan)
Date: Mon, 21 Jan 2008 07:33:12 -0500 (EST)
Subject: [dev-context] [NTG-context] amsmath features (redirected)
In-Reply-To: <47948B2A.5030603@elvenkind.com>
References: <b11f605c0801200914j78ae5804j1befa2bbba17d76d@mail.gmail.com>
	<alpine.DEB.0.9999.0801210630120.6139@nqv-yncgbc>
	<4794873E.3070101@elvenkind.com> <479489C9.3040606@wxs.nl>
	<47948B2A.5030603@elvenkind.com>
Message-ID: <alpine.DEB.0.9999.0801210718130.6139@nqv-yncgbc>

On Mon, 21 Jan 2008, Taco Hoekwater wrote:

> Hans Hagen wrote:
>> Taco Hoekwater wrote:
>>> Aditya Mahajan wrote:
>>>> Hans: I am not sure which is the right way to interface this. Should
>>>> we add \setupmathematics (there could be other options in the future)?
>>>
>>> It is for sure that there will be other options, for example:
>>>
>>>     \setupmathematics[method=tex|opentype] % for otf MATH feature
>>
>> indeed
>>
>> btw, there is setupformulas, isn't there?
>
> yes, but we need something that is true for all math, noit just displays

I am attaching an update math-tex.tex. I have not yet included the 
interface. Is the key mo used anywhere? It is defined in mult-sys but it 
does not seem to be in use.

Aditya
-------------- next part --------------
A non-text attachment was scrubbed...
Name: core-mat.tex
Type: text/x-tex
Size: 82382 bytes
Desc: 
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20080121/468ba469/attachment-0001.bin 

From mojca.miklavec.lists at gmail.com  Sat Feb  2 03:57:35 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sat, 2 Feb 2008 03:57:35 +0100
Subject: [dev-context] why my first idea of experimental minimals didn't
	work out :)
Message-ID: <6faad9f00802011857j707bf1ecl5e9e8834e4fee825@mail.gmail.com>

Hello (this is for amusement only - an interesting experience),

if anyone would like to know why the idea with experimental branch of
minimals didn't work out in its current form (I wanted to have a full
tree and a separated tree with fixes only, but it took files from
current and experimental in an arbitrary order).

This is an answer from the mailing list:

------

Duh.  I realize now that it's perfectly reasonable for you to be able to
reproduce the problem while I can't.  Versions 2.6.9 and earlier of
rsync sort the file-list using the C library's quicksort, an unstable
sort, ?so the results in case of duplicate files are highly sensitive to
both the C library implementation and the order of directory entries in
the source (which in turn is sensitive to the filesystem
implementation).  You probably have both a different C library and a
different filesystem than I do.

In any case, since rsync 3.0.0pre1, the default file-list sorting
algorithm is a mergesort, which is stable, so files from earlier source
arguments take priority.  If you upgrade to an rsync 3.0.0pre* version,
your scenario should work consistently.  If it doesn't, that's a bug we
should try to fix.

From preining at logic.at  Thu Feb 21 11:00:50 2008
From: preining at logic.at (Norbert Preining)
Date: Thu, 21 Feb 2008 11:00:50 +0100
Subject: [dev-context] New Debian packages (luatex, context) for Etch
Message-ID: <20080221100050.GC5657@gamma.logic.tuwien.ac.at>

Hi all!

Before leaving againg for 3 weeks in mountainous isolation I have 
updated context and luatex. For luatex there is also an etch version.

Current versions:
	luatex		0.22.0.svn080220-1.np.etch.1
	context		2008.01.28-1

As usual, here is the full list:

texlive and tex-common
 	deb http://people.debian.org/~preining/TeX/ tl2007/
 	deb-src http://people.debian.org/~preining/TeX/ src/

lmodern
	deb http://people.debian.org/~preining/TeX/ lmodern/
	deb-src http://people.debian.org/~preining/TeX/ lmodern/

context
 	deb http://people.debian.org/~preining/TeX/ context/
 	deb-src http://people.debian.org/~preining/TeX/ context/

luatex (for etch)
 	deb http://people.debian.org/~preining/TeX/ luatex/
 	deb-src http://people.debian.org/~preining/TeX/ luatex/

luatex (for sid, but sid users will get it anyway)
 	deb http://people.debian.org/~preining/TeX/ luatex-sid/
 	deb-src http://people.debian.org/~preining/TeX/ luatex-sid/

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
LYDIARD TREGOZE (n.)
The opposite of a mavis enderby (q.v.) An unrequited early love of
your life who still causes terrible pangs though she inexplicably
married a telephone engineer.
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Wed Feb 27 09:48:17 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 27 Feb 2008 09:48:17 +0100
Subject: [dev-context] Luatex beta 0.22.1 released
Message-ID: <47C523D1.6040504@elvenkind.com>


Hi all,

I have just uploaded the archives for luatex 0.22.1, that is
a bugfix release for 0.22.0

Fixes and changes:

* The macnames.c source file for building ttf2afm is restored.
* "make depend" in luatexdir now works again
* luatex sometimes crashed because it attempted to expand an
   already expanded font
* luatex aborted when --progname was given but no format name.
   It now sets the format name to the given progname in that case
* sometimes paragraphs with near-empty lines could cause a crash
* img.supportedtypes() had a bug causing it to crash
* img.supportedtypes() has been renamed to img.types for consistency
* img.boxes() added, returns strings representing bounding boxes
* img.node() added, returns a whatsit node cf. \pdfrefximage
* node.write() now accepts multiple arguments
* the program_name_set switch was not set automatically from C,
   causing errors unless lua code called kpse.set_program_name()
   explicitly
* kpse.set_program_name() can now be called more than once
   in a single run.
* os.spawn{...} and os.exec{...} could cause crashes because of
   a memory allocation error

The archives (source and binaries) can be downloaded from supelec,
as usual:

    http://foundry.supelec.fr/projects/luatex/

Bugs and feature requests can be added to the issue tracker at

    http://tracker.luatex.org

Have fun,
Taco


From mojca.miklavec.lists at gmail.com  Thu Feb 28 19:04:38 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Thu, 28 Feb 2008 19:04:38 +0100
Subject: [dev-context] cyrillic glyphs
Message-ID: <6faad9f00802281004n3f3a80davecf518ee44d77b74@mail.gmail.com>

Hello Hans,

According to AGLFN at
    http://partners.adobe.com/public/developer/en/opentype/aglfn13.txt

consider for example the glyph
    0420;afii10034;CYRILLIC CAPITAL LETTER ER

in char-def.lua you have

 [0x0420]={
  ["adobename"]="afii0x2732",
  ["category"]="lu",
  ["cjkwd"]="a",
  ["contextname"]="cyrillicR",
  ["description"]="CYRILLIC CAPITAL LETTER ER",
  ["lccode"]=0x0440,
  ["linebreak"]="al",
  ["unicodeslot"]=0x0420, -- ?
 },

So:   ["adobename"]="afii0x2732", "instead of" afii10034.

What do you suggest? I guess that adobename might need to have
multiple entries anyway.

Mojca

From arthur.reutenauer at normalesup.org  Thu Feb 28 19:15:54 2008
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Thu, 28 Feb 2008 19:15:54 +0100
Subject: [dev-context] cyrillic glyphs
In-Reply-To: <6faad9f00802281004n3f3a80davecf518ee44d77b74@mail.gmail.com>
References: <6faad9f00802281004n3f3a80davecf518ee44d77b74@mail.gmail.com>
Message-ID: <20080228181553.GF20008@phare.normalesup.org>

> So:   ["adobename"]="afii0x2732", "instead of" afii10034.
> 
> What do you suggest? I guess that adobename might need to have
> multiple entries anyway.

  Obviously, the decimal number 10034 has been abusively transformed
into its hexadecimal equivalent, I guess by table.serialize or something
similar.  It seems to be the case for all the other glyphs with an AFII
name, and I consider this a mistake.  I think it should be reverted back.

	Arthur

From pragma at wxs.nl  Thu Feb 28 19:38:18 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 28 Feb 2008 19:38:18 +0100
Subject: [dev-context] cyrillic glyphs
In-Reply-To: <20080228181553.GF20008@phare.normalesup.org>
References: <6faad9f00802281004n3f3a80davecf518ee44d77b74@mail.gmail.com>
	<20080228181553.GF20008@phare.normalesup.org>
Message-ID: <47C6FF9A.6030305@wxs.nl>

Arthur Reutenauer wrote:
>> So:   ["adobename"]="afii0x2732", "instead of" afii10034.
>>
>> What do you suggest? I guess that adobename might need to have
>> multiple entries anyway.
> 
>   Obviously, the decimal number 10034 has been abusively transformed
> into its hexadecimal equivalent, I guess by table.serialize or something
> similar.  It seems to be the case for all the other glyphs with an AFII
> name, and I consider this a mistake.  I think it should be reverted back.

hm, i wonder if/when i touched them

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Thu Feb 28 22:53:03 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 28 Feb 2008 22:53:03 +0100
Subject: [dev-context] cyrillic glyphs
In-Reply-To: <6faad9f00802281004n3f3a80davecf518ee44d77b74@mail.gmail.com>
References: <6faad9f00802281004n3f3a80davecf518ee44d77b74@mail.gmail.com>
Message-ID: <47C72D3F.4030409@wxs.nl>

ok, new beta ...



-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From arthur.reutenauer at normalesup.org  Thu Feb 28 23:55:49 2008
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Thu, 28 Feb 2008 23:55:49 +0100
Subject: [dev-context] cyrillic glyphs
In-Reply-To: <47C72D3F.4030409@wxs.nl>
References: <6faad9f00802281004n3f3a80davecf518ee44d77b74@mail.gmail.com>
	<47C72D3F.4030409@wxs.nl>
Message-ID: <20080228225549.GI20008@phare.normalesup.org>

  Looks nicer now :-)

  By the way, was there a bug in table.serialize or some other
?public??function?  Something to worry about?

	Arthur

From pragma at wxs.nl  Fri Feb 29 00:29:46 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 29 Feb 2008 00:29:46 +0100
Subject: [dev-context] cyrillic glyphs
In-Reply-To: <20080228225549.GI20008@phare.normalesup.org>
References: <6faad9f00802281004n3f3a80davecf518ee44d77b74@mail.gmail.com>	<47C72D3F.4030409@wxs.nl>
	<20080228225549.GI20008@phare.normalesup.org>
Message-ID: <47C743EA.4060409@wxs.nl>

Arthur Reutenauer wrote:
>   Looks nicer now :-)
> 
>   By the way, was there a bug in table.serialize or some other
> ?public? function?  Something to worry about?

no, it probably went wrong when i merged some extra data in the file 
(and in the process hex'd the numbers); nothing to wory about

(btw, by now table.serialize is pretty stable)

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From arthur.reutenauer at normalesup.org  Fri Feb 29 00:37:24 2008
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Fri, 29 Feb 2008 00:37:24 +0100
Subject: [dev-context] cyrillic glyphs
In-Reply-To: <47C743EA.4060409@wxs.nl>
References: <6faad9f00802281004n3f3a80davecf518ee44d77b74@mail.gmail.com>
	<47C72D3F.4030409@wxs.nl>
	<20080228225549.GI20008@phare.normalesup.org>
	<47C743EA.4060409@wxs.nl>
Message-ID: <20080228233724.GJ20008@phare.normalesup.org>

> no, it probably went wrong when i merged some extra data in the file 
> (and in the process hex'd the numbers); nothing to wory about

  OK, good to know then.

> (btw, by now table.serialize is pretty stable)

  Oh, I didn't mean to despise it; I love it and I use it all the time!

	Arthur

From vit.zyka at seznam.cz  Tue Mar  4 11:39:54 2008
From: vit.zyka at seznam.cz (Vit Zyka)
Date: Tue, 04 Mar 2008 11:39:54 +0100
Subject: [dev-context] includeMPgraphic
Message-ID: <47CD26FA.5020705@seznam.cz>

Hi Hans,

I had a problem to compile an old 'followtokens' code (MKII). It seems 
to me there is a bug in the current supp-mps.tex. Please, can you 
correct it?

Instead of:
   \def\includeMPgraphic#1%
     {\executeifdefined{\@@MPG#1}}
it works:
   \def\includeMPgraphic#1%
     {\executeifdefined{\@@MPG#1}\gobbleoneargument}

Best wishes
Vit


From Jerzy.Ludwichowski at uni.torun.pl  Tue Mar  4 12:51:06 2008
From: Jerzy.Ludwichowski at uni.torun.pl (Jerzy B. Ludwichowski)
Date: Tue, 04 Mar 2008 12:51:06 +0100
Subject: [dev-context] BachoTeX 2008 -- Call for Papers -- reminder
Message-ID: <47CD37AA.7050407@uni.torun.pl>

Dear friends,

The BachoTeX 2008 Program Committee dares to remind you of the quickly
upcoming deadline for submitting paper proposals for the BachoTeX 2008
conference. The Call for Papers and TeX Pearls can be found
http://www.gust.org.pl/BachoTeX/2008/cfp1en.

We trust that the main theme of the conference, ,,TeX contra TeX''
should be of a great interest to the community at large and the
various developers in particular.

You may have noted that the supplementing theme "Aesthetic aspects
of typesetting" is also addressed to those who use other typesetting
software. If you know people active in this area please talk them
into presenting a paper.

Your children or very young TeXies in your vicinity are invited to
contribute in the yet another conference supplementing theme "What
is TeX to me?"

Based on suggestions and experiences from previous years, one day of
the conference will be devoted solely to working meetings of the
various informal interest groups (no presentations):
- fonts,
- TeX engines,
- distributions,
- supporting software,
- typesetting software in general,
- propagating TeX,
- history of TeX
-- you name it. Talk your common interest buddies into coming and/or
propose a paper.

Do not forget submitting your "TeX Pearls" aka "TeX beauties and
oddities"!

And, finally -- registration is open at
http://www.gust.org.pl/BachoTeX/2008/registration-en. Please note
that early registration ending March 31 allows for a significant
saving in the conference fee.

Come and celebrate the XVIth, or $10000_{2}$ or $100_{4}$ or
$20_{8}$ or $10_{16}$ BachoTeX!

Jerzy Ludwichowski
Organizing Committee

From vit.zyka at gmail.com  Sat Mar  8 01:02:56 2008
From: vit.zyka at gmail.com (Vit Zyka)
Date: Sat, 08 Mar 2008 01:02:56 +0100
Subject: [dev-context] bug in processeparatedlist
Message-ID: <47D1D7B0.6030201@seznam.cz>

Hi,

there is a bug in \doprocessseparatedlist (syst-ext.tex). Problem is if 
a list item starts with a single_char followed by a space. See line 5:

----------------------------------------------
\starttext
\def\Do#1{(#1)}
   1\processseparatedlist[{aap noot}]  [ ]\Do \par
   2\processseparatedlist[{aap} {noot}][ ]\Do \par
   3\processseparatedlist[aap {noot}]  [ ]\Do \par
   4\processseparatedlist[aap noot]    [ ]\Do \par
   5\processseparatedlist[aap;noot;a noot;noot a; noot a noot][;]\Do \par
   6\processseparatedlist[][;]\Do \par
   7\processseparatedlist[;][;]\Do \par
\stoptext
-------------------------------------------------

it returns
   (aap noot)
   (aap)(noot)
   (aap)(noot)
   (aap)(noot)
   (aap)(noot)noot(a)(noot a)(noot a noot)
              ^^^^^^^

Solution:
\def\doprocessseparatedlist#1]#2[#3]#4%
   {\def\dodoprocessseparatedlist##1##2#3%
      {\def\tmp{##2}% ------------------------------- new
       \if]##1%
         \let\dodoprocessseparatedlist\relax
       \else\if]##2%
         \let\dodoprocessseparatedlist\relax
       %\else\ifx\blankspace##2%
       \else\ifx\blankspace\tmp % ------------------- new
         #4{##1}%
       \else
         #4{##1##2}%
       \fi\fi\fi
       \dodoprocessseparatedlist}%
    \@EA\dodoprocessseparatedlist\gobbleoneargument#1#3]#3}

Best
Vit


From pragma at wxs.nl  Sun Mar  9 19:33:36 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 09 Mar 2008 19:33:36 +0100
Subject: [dev-context] bug in processeparatedlist
In-Reply-To: <47D1D7B0.6030201@seznam.cz>
References: <47D1D7B0.6030201@seznam.cz>
Message-ID: <47D42D80.8030706@wxs.nl>

Vit Zyka wrote:
> Hi,
> 
> there is a bug in \doprocessseparatedlist (syst-ext.tex). Problem is if 
> a list item starts with a single_char followed by a space. See line 5:
> 
> ----------------------------------------------
> \starttext
> \def\Do#1{(#1)}
>    1\processseparatedlist[{aap noot}]  [ ]\Do \par
>    2\processseparatedlist[{aap} {noot}][ ]\Do \par
>    3\processseparatedlist[aap {noot}]  [ ]\Do \par
>    4\processseparatedlist[aap noot]    [ ]\Do \par
>    5\processseparatedlist[aap;noot;a noot;noot a; noot a noot][;]\Do \par
>    6\processseparatedlist[][;]\Do \par
>    7\processseparatedlist[;][;]\Do \par
> \stoptext
> -------------------------------------------------
> 
> it returns
>    (aap noot)
>    (aap)(noot)
>    (aap)(noot)
>    (aap)(noot)
>    (aap)(noot)noot(a)(noot a)(noot a noot)
>               ^^^^^^^
> 
> Solution:
> \def\doprocessseparatedlist#1]#2[#3]#4%
>    {\def\dodoprocessseparatedlist##1##2#3%
>       {\def\tmp{##2}% ------------------------------- new
>        \if]##1%
>          \let\dodoprocessseparatedlist\relax
>        \else\if]##2%
>          \let\dodoprocessseparatedlist\relax
>        %\else\ifx\blankspace##2%
>        \else\ifx\blankspace\tmp % ------------------- new
>          #4{##1}%
>        \else
>          #4{##1##2}%
>        \fi\fi\fi
>        \dodoprocessseparatedlist}%
>     \@EA\dodoprocessseparatedlist\gobbleoneargument#1#3]#3}
> 

then maybe also better test for the space first

\def\doprocessseparatedlist#1]#2[#3]#4%
    {\def\dodoprocessseparatedlist##1##2#3%
       {\def\!!stringa{##2}% suggested by VZ
        \if]##1%
          \let\dodoprocessseparatedlist\relax
        \else\ifx\blankspace\!!stringa
          #4{##1}%
        \else\if]##2%
          \let\dodoprocessseparatedlist\relax
        \else
          #4{##1##2}%
        \fi\fi\fi
        \dodoprocessseparatedlist}%
     \@EA\dodoprocessseparatedlist\gobbleoneargument#1#3]#3}


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From adityam at umich.edu  Mon Mar 10 15:57:38 2008
From: adityam at umich.edu (Aditya Mahajan)
Date: Mon, 10 Mar 2008 10:57:38 -0400 (EDT)
Subject: [dev-context] Assertion failure with latest luatex
Message-ID: <alpine.DEB.1.00.0803101054360.12972@nqv-yncgbc>

Hi,

I am using LuaTeX, Version snapshot-0.23.0-2008030822 and context 
2008.03.04. In a long article, I get an error:

luatex: ../../../../src/texk/web2c/luatexdir/tex/linebreak.c:215: 
find_protchar_right: Assertion 
`varmem[(varmem[((r)+1)].hh.v.RH)].hh.v.RH==r' failed.

Is this a known bug? If not, I can try to create a minimal example.

Aditya

From pragma at wxs.nl  Mon Mar 10 22:05:19 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 10 Mar 2008 22:05:19 +0100
Subject: [dev-context] includeMPgraphic
In-Reply-To: <47CD26FA.5020705@seznam.cz>
References: <47CD26FA.5020705@seznam.cz>
Message-ID: <47D5A28F.9000706@wxs.nl>

Vit Zyka wrote:
> Hi Hans,
> 
> I had a problem to compile an old 'followtokens' code (MKII). It seems 
> to me there is a bug in the current supp-mps.tex. Please, can you 
> correct it?
> 
> Instead of:
>    \def\includeMPgraphic#1%
>      {\executeifdefined{\@@MPG#1}}
> it works:
>    \def\includeMPgraphic#1%
>      {\executeifdefined{\@@MPG#1}\gobbleoneargument}

hm, gobble? can you test

    \def\includeMPgraphic#1%
      {\executeifdefined{\@@MPG#1}\empty}


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Tue Mar 11 10:54:30 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 11 Mar 2008 10:54:30 +0100
Subject: [dev-context] Assertion failure with latest luatex
In-Reply-To: <alpine.DEB.1.00.0803101054360.12972@nqv-yncgbc>
References: <alpine.DEB.1.00.0803101054360.12972@nqv-yncgbc>
Message-ID: <47D656D6.8040803@elvenkind.com>



Aditya Mahajan wrote:
> Hi,
> 
> I am using LuaTeX, Version snapshot-0.23.0-2008030822 and context 
> 2008.03.04. In a long article, I get an error:
> 
> luatex: ../../../../src/texk/web2c/luatexdir/tex/linebreak.c:215: 
> find_protchar_right: Assertion 
> `varmem[(varmem[((r)+1)].hh.v.RH)].hh.v.RH==r' failed.
> 
> Is this a known bug? If not, I can try to create a minimal example.

This was a bug, and is now fixed in the repository trunk. The
problem was that the interals of the boxes resulting from math
superscripts were not initialized correctly.

Best wishes,
Taco

From adityam at umich.edu  Tue Mar 11 15:25:30 2008
From: adityam at umich.edu (Aditya Mahajan)
Date: Tue, 11 Mar 2008 10:25:30 -0400 (EDT)
Subject: [dev-context] Assertion failure with latest luatex
In-Reply-To: <47D656D6.8040803@elvenkind.com>
References: <alpine.DEB.1.00.0803101054360.12972@nqv-yncgbc>
	<47D656D6.8040803@elvenkind.com>
Message-ID: <alpine.DEB.1.00.0803111025090.11341@nqv-yncgbc>

On Tue, 11 Mar 2008, Taco Hoekwater wrote:

>
>
> Aditya Mahajan wrote:
>> Hi,
>> 
>> I am using LuaTeX, Version snapshot-0.23.0-2008030822 and context 
>> 2008.03.04. In a long article, I get an error:
>> 
>> luatex: ../../../../src/texk/web2c/luatexdir/tex/linebreak.c:215: 
>> find_protchar_right: Assertion 
>> `varmem[(varmem[((r)+1)].hh.v.RH)].hh.v.RH==r' failed.
>> 
>> Is this a known bug? If not, I can try to create a minimal example.
>
> This was a bug, and is now fixed in the repository trunk. The
> problem was that the interals of the boxes resulting from math
> superscripts were not initialized correctly.

Thank you for the quick fix.

Aditya

From adityam at umich.edu  Tue Mar 11 16:16:18 2008
From: adityam at umich.edu (Aditya Mahajan)
Date: Tue, 11 Mar 2008 11:16:18 -0400 (EDT)
Subject: [dev-context] mkiv and metapost
Message-ID: <alpine.DEB.1.00.0803111101230.11341@nqv-yncgbc>

Hi,

Something is broken in the interaction between metapost and mkiv. The 
minimal example here gives me an empty pdf.

\starttext \startMPcode
draw fullcircle scaled 1cm;
\stopMPcode \stoptext

The metapost figure is created, but for some reason not is not being 
included. Doing an explicit \externalgraphics[filename-mpgraph.1] gives

mp-test-mpgraph.1
!luaTeX error: internal error: unknown image type
  ==> Fatal error occurred, no output PDF file produced!

I am using luatex snapshot-0.23.0-2008031110 and ConTeXt 2008.03.04

Aditya


From schuster.wolfgang at googlemail.com  Tue Mar 11 16:29:37 2008
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Tue, 11 Mar 2008 16:29:37 +0100
Subject: [dev-context] mkiv and metapost
In-Reply-To: <alpine.DEB.1.00.0803111101230.11341@nqv-yncgbc>
References: <alpine.DEB.1.00.0803111101230.11341@nqv-yncgbc>
Message-ID: <20080311162937.9511ca4a.schuster.wolfgang@googlemail.com>

On Tue, 11 Mar 2008 11:16:18 -0400 (EDT)
Aditya Mahajan <adityam at umich.edu> wrote:

> Hi,
> 
> Something is broken in the interaction between metapost and mkiv. The 
> minimal example here gives me an empty pdf.
> 
> \starttext \startMPcode
> draw fullcircle scaled 1cm;
> \stopMPcode \stoptext
> 
> The metapost figure is created, but for some reason not is not being 
> included. Doing an explicit \externalgraphics[filename-mpgraph.1] gives
> 
> mp-test-mpgraph.1
> !luaTeX error: internal error: unknown image type
>   ==> Fatal error occurred, no output PDF file produced!
> 
> I am using luatex snapshot-0.23.0-2008031110 and ConTeXt 2008.03.04

Works here without problems.

ConTeXt  ver: 2008.03.11 14:48 MKIV  fmt: 2008.3.11  int: english/english

This is LuaTeX, Version snapshot-0.23.0-2008030910

Wolfgang

From adityam at umich.edu  Tue Mar 11 16:48:03 2008
From: adityam at umich.edu (Aditya Mahajan)
Date: Tue, 11 Mar 2008 11:48:03 -0400 (EDT)
Subject: [dev-context] mkiv and metapost
In-Reply-To: <20080311162937.9511ca4a.schuster.wolfgang@googlemail.com>
References: <alpine.DEB.1.00.0803111101230.11341@nqv-yncgbc>
	<20080311162937.9511ca4a.schuster.wolfgang@googlemail.com>
Message-ID: <alpine.DEB.1.00.0803111143310.11341@nqv-yncgbc>

On Tue, 11 Mar 2008, Wolfgang Schuster wrote:

> On Tue, 11 Mar 2008 11:16:18 -0400 (EDT)
> Aditya Mahajan <adityam at umich.edu> wrote:
>
>> Hi,
>>
>> Something is broken in the interaction between metapost and mkiv. The
>> minimal example here gives me an empty pdf.
>>
>> \starttext \startMPcode
>> draw fullcircle scaled 1cm;
>> \stopMPcode \stoptext
>>
>> The metapost figure is created, but for some reason not is not being
>> included. Doing an explicit \externalgraphics[filename-mpgraph.1] gives
>>
>> mp-test-mpgraph.1
>> !luaTeX error: internal error: unknown image type
>>   ==> Fatal error occurred, no output PDF file produced!
>>
>> I am using luatex snapshot-0.23.0-2008031110 and ConTeXt 2008.03.04
>
> Works here without problems.
>
> ConTeXt  ver: 2008.03.11 14:48 MKIV  fmt: 2008.3.11  int: english/english
>
> This is LuaTeX, Version snapshot-0.23.0-2008030910

Thanks for checking. Must be something wrong in my setup. I tried 
2008.03.11 but I can't get get the latest luatex to run with mkiv (?:0 
attempt to index global 'tex' (a nil value)) :(

Aditya

From taco at elvenkind.com  Tue Mar 11 16:58:06 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 11 Mar 2008 16:58:06 +0100
Subject: [dev-context] [Dev-luatex] Luatex beta 0.25.0 released
Message-ID: <47D6AC0E.2050406@elvenkind.com>


Hi all,

I have just uploaded the archives for luatex 0.25.0

New:

* mplib library:
   This version features an embedded MP interpreter whose output
   can be directly accessed from lua code (mplib), without calls
   to an external "mpost" command. Of course it has bugs and
   limitations (makempx does not work, for example) but keep in
   mind that it is only an initial attempt.
   See the manual for more details.
* img library:
   ** img.immediatewrite() is added
   ** images now accept a 'transform' key
   ** widths etc. can now be given as width="100mm"

Fixed:

* \parshape handling was completely broken since 0.20.0+
* when \pdfprotrudechars was in effect, an assertion failure
   could happen when embedded \hboxes in the paragraph appeared
   at the end of a line.
* import of otf fonts with contextual lookups has been debugged,
   thanks to a patch by GW himself.
* compiling with gcc 4.2.3 is now supported
* if you want to build from source, you need a pre-installed ctangle.

The archives (source and binaries) can be downloaded from supelec,
as usual:

     http://foundry.supelec.fr/projects/luatex/

Bugs and feature requests can be added to the issue tracker at

     http://tracker.luatex.org

Have fun,
Taco

_______________________________________________
dev-luatex mailing list
dev-luatex at ntg.nl
http://www.ntg.nl/mailman/listinfo/dev-luatex

From schuster.wolfgang at googlemail.com  Sun Mar 16 17:12:23 2008
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Sun, 16 Mar 2008 17:12:23 +0100
Subject: [dev-context] New imposition styles
Message-ID: <20080316171223.4b554fce.schuster.wolfgang@googlemail.com>

Hi,

I wrote two new imposition formats with chngeable size.

The first format could be used to create flashcards with content on
both sides of the paper. The number of cards on the page could be
changed with the "nx" and "ny" keys for \setuppaper.

\unprotect

\installpagearrangement FLASHCARD
  {\dosetuparrangement\@@ppnx\@@ppny{\numexpr\@@ppxy*2\relax}{\numexpr
\@@ppnx+\plusone\relax}{\numexpr\@@ppny+\plusone\relax}%
\pusharrangedpageFLASHCARD\poparrangedpagesAB\relax}

\newcounter\arrangedpageshiftX
\newcounter\arrangedpageshiftY

\def\dopusharrangedpageFLASHCARD#1%
  {\ifnum\arrangedpageshiftX<\arrangedpageX
     \ifodd\arrangedpageN
       \handlearrangedpageXandY{#1}0\arrangedpageshiftX
\arrangedpageshiftY\arrangedpageA \else
       \handlearrangedpageXandY{#1}0{\numexpr
\@@ppnx-\arrangedpageshiftX-1\relax}\arrangedpageshiftY\arrangedpageB
\doglobal\increment\arrangedpageshiftX \fi
   \fi
   \ifnum\arrangedpageshiftX=\@@ppnx
     \doglobal\newcounter\arrangedpageshiftX
     \doglobal\increment\arrangedpageshiftY
   \fi}

\def\pusharrangedpageFLASHCARD#1%
  {\doglobal\increment\arrangedpageN
   \reportarrangedpage\arrangedpageN
   \ifnum\arrangedpageN=\numexpr\@@ppxy*2\relax
     \dopusharrangedpageFLASHCARD{#1}%
     \doglobal\newcounter\arrangedpageshiftX
     \doglobal\newcounter\arrangedpageshiftY
     \poparrangedpages
   \else
     \dopusharrangedpageFLASHCARD{#1}%
   \fi}

\protect

\setuppapersize[A7][A3,landscape]
\setuppaper    [nx=4,ny=2]
\setuparranging[FLASHCARD]
\setuplayout   [location=middle,marking=on]

\setupbackgrounds[page][frame=on]

\starttext

\dorecurse{20}
  {\startstandardmakeup[align=middle]
   Front side \recurselevel
   \stopstandardmakeup
   \startstandardmakeup[align=middle]
   Back side \recurselevel
   \stopstandardmakeup}

\stoptext


My second imposition definition could be used to create leaflets of any
size, the number of rows is fixed to 1 but the number of column could
be changed with the "nx" key for \setuppaper.

\unprotect

\installpagearrangement LEAFLET
  {\dosetuparrangement\@@ppnx1{\numexpr\@@ppnx*2\relax}{\numexpr\@@ppnx+
\plusone\relax}2% \pusharrangedpageLEAFLET\poparrangedpagesAB\relax}

\def\pusharrangedpageLEAFLET#1%
  {\doglobal\increment\arrangedpageN
   \reportarrangedpage\arrangedpageN
   \ifnum\arrangedpageN=\plusone
     \handlearrangedpageXandY{#1}0{\numexpr\@@ppnx-1\relax}0
\arrangedpageA \else\ifnum\arrangedpageN>\numexpr\@@ppnx+1\relax
     \handlearrangedpageXandY{#1}0{\numexpr\arrangedpageN-\@@ppnx-2
\relax}0\arrangedpageA \else
     \handlearrangedpageXandY{#1}0{\numexpr\arrangedpageN-2\relax}0
\arrangedpageB \fi\fi
   \ifnum\arrangedpageN=\arrangedpageT
     \poparrangedpages
   \fi}

\protect

\setuppapersize[DL][A1,landscape]
\setuppaper    [nx=3]
\setuparranging[LEAFLET]
\setuplayout   [location=middle,marking=on]

\setupbackgrounds[page][frame=on]

\starttext

\dorecurse{6}
  {\startstandardmakeup[align=middle]
   \ssd Page \recurselevel
   \stopstandardmakeup}

\stoptext


I hope both arrangment styles could be integrated in one of the next
releases, the FLASHCARD style is a must have for me because I use it
sometimes and I'm not interested to always define one of these styles
in my document.

Wolfgang

From taco at elvenkind.com  Mon Mar 17 10:19:31 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 17 Mar 2008 10:19:31 +0100
Subject: [dev-context] bug in texexec --mptex
Message-ID: <47DE37A3.6040104@elvenkind.com>

Hi Hans,

There is a small bug in texexec --mptex: it deletes lines starting
with a # character because it believes those are comments. Not true.

Example:

beginfig(1);
numeric #;
  # = 10; % remove leading space to get error
label(btex $x_1$ etex, (#,#));
endfig;
end

(I found this because it happens in the MP manual macros)

Best wishes,
Taco

From pragma at wxs.nl  Mon Mar 17 10:34:50 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 17 Mar 2008 10:34:50 +0100
Subject: [dev-context] bug in texexec --mptex
In-Reply-To: <47DE37A3.6040104@elvenkind.com>
References: <47DE37A3.6040104@elvenkind.com>
Message-ID: <47DE3B3A.9000301@wxs.nl>

Taco Hoekwater wrote:
> Hi Hans,
> 
> There is a small bug in texexec --mptex: it deletes lines starting
> with a # character because it believes those are comments. Not true.
> 
> Example:
> 
> beginfig(1);
> numeric #;
>   # = 10; % remove leading space to get error
> label(btex $x_1$ etex, (#,#));
> endfig;
> end
> 
> (I found this because it happens in the MP manual macros)

ah, should be ... in tex.rb

         if mpdata = File.silentread(mpname) then
             mpdata.gsub!(/^\%.*\n/o,'')



-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Thu Mar 20 09:17:00 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 20 Mar 2008 09:17:00 +0100
Subject: [dev-context] [Fwd: TUG and Google's Summer of Code 2008]
Message-ID: <47E21D7C.9010302@elvenkind.com>



-------- Original Message --------
Subject: TUG and Google's Summer of Code 2008
Date: Wed, 19 Mar 2008 15:37:05 -0700 (PDT)
From: Karl Berry <karl at tug.org>
Organization: http://groups.google.com
Newsgroups: comp.text.tex

TUG has been accepted as a mentoring organization for Google's Summer of
Code 2008, so thanks to Google.
http://google-opensource.blogspot.com/2008/03/meet-your-mentors.html
provides some background and next steps.

If you are a TeX developer and have an idea for your package or program
that could be usefully implemented by a student working full-time over
the summer, and are (hopefully) willing to mentor the project, please
email summer-of-code at tug.org with the details.  See http://tug.org/gsoc/
for the ideas we've posted so far.

You can also offer to mentor a package without specific projects in
mind -- many students submit ideas of their own.  Again, just let us
know.

If you are a student or know a student who might like to participate,
please consider submitting an idea from the list, or one of your own.
Early applications inevitably get more attention than later ones, so
the sooner the better.

Anyone is welcome to subscribe or post to our organizational SoC mailing
list: http://tug.org/mailman/listinfo/summer-of-code.

Thanks,
Karl

From taco at elvenkind.com  Fri Mar 21 14:28:20 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 21 Mar 2008 14:28:20 +0100
Subject: [dev-context] [Dev-luatex] Luatex beta 0.25.0 released
Message-ID: <47E3B7F4.9000708@elvenkind.com>


Hi all,

I have just uploaded the archives for luatex 0.25.1, just a
small intermediate release because I won't be around next week.

* Updated to MPlib 0.30 (that is now becoming usable)
* The build requirement for a pre-installed ctangle is gone
   (thanks to Martin)

The archives (source and binaries) can be downloaded from supelec,
as usual:

     http://foundry.supelec.fr/projects/luatex/

Bugs and feature requests can be added to the issue tracker at

     http://tracker.luatex.org

Have fun,
Taco


From taco at elvenkind.com  Fri Mar 21 14:57:48 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 21 Mar 2008 14:57:48 +0100
Subject: [dev-context] [Dev-luatex]  Luatex beta 0.25.0 released
In-Reply-To: <47E3B7F4.9000708@elvenkind.com>
References: <47E3B7F4.9000708@elvenkind.com>
Message-ID: <47E3BEDC.4000603@elvenkind.com>


Hi,

> Re [Dev-luatex]  Luatex beta 0.25.0 released

That subject should be 0.25.1 of course, sorry.

Best wishes,
Taco

From vit.zyka at gmail.com  Thu Mar 27 12:42:59 2008
From: vit.zyka at gmail.com (Vit Zyka)
Date: Thu, 27 Mar 2008 12:42:59 +0100
Subject: [dev-context] natural table error
Message-ID: <47EB8843.3020100@seznam.cz>

Hi Hans,

I noticed en error compiling following minimal example. Its processing 
is OK with my old ConTeXt ver: 2007.06.06 09:53 MKII fmt: 2007.7.8,
pdfTeXk, Version 3.141592-1.40.3 (Web2C 7.5.6)

Error is caused by both ConTeXt from TeXLive2007 and current ConTeXt 
version:
ConTeXt  ver: 2008.03.24 23:24 MKII  fmt: 2008.3.27  int:english/english
This is pdfTeXk, Version 3.141592-1.40.5 (Web2C 7.5.6)

Vit

----------------------------------
\starttext
   Natural table:
   \bTABLE
   \bTR
     \bTD A\eTD
     \bTD B\eTD
     \bTD C\eTD
     \bTD D\eTD
   \eTR
   \dorecurse{250}{\bTR\bTD a\eTD\eTR}
   \eTABLE
\stoptext
------------------------------------

Error:
! TeX capacity exceeded, sorry [save size=5000].
<to be read again>
                    \relax
\forgetragged ...\!!plus \raggedfillamount \relax
                                                   \let 
\updateraggedskips \r...
<inserted text> ...g \forgottentrue \forgetragged
                                                   \forgetparskip 
\forgetpari...

\forgetall ->\the \everyforgetall

\next ...t \postprocessframebox \relax \forgetall
                                                   \oninterlineskip 
\hsize \!...

\endTBL ...!off ,\c!background =,\c!align =\v!no ]
                                                    {\strut }}\edef 
\minimalc...
...
l.11   \eTABLE

!  ==> Fatal error occurred, no output PDF file produced!
Transcript written on test.log.
TeXExec | runtime: 1.047
--------------------------------


From pragma at wxs.nl  Thu Mar 27 18:48:52 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 27 Mar 2008 18:48:52 +0100
Subject: [dev-context] natural table error
In-Reply-To: <47EB8843.3020100@seznam.cz>
References: <47EB8843.3020100@seznam.cz>
Message-ID: <47EBDE04.5010101@wxs.nl>

Vit Zyka wrote:
> Hi Hans,
> 
> I noticed en error compiling following minimal example. Its processing 
> is OK with my old ConTeXt ver: 2007.06.06 09:53 MKII fmt: 2007.7.8,
> pdfTeXk, Version 3.141592-1.40.3 (Web2C 7.5.6)
> 
> Error is caused by both ConTeXt from TeXLive2007 and current ConTeXt 
> version:
> ConTeXt  ver: 2008.03.24 23:24 MKII  fmt: 2008.3.27  int:english/english
> This is pdfTeXk, Version 3.141592-1.40.5 (Web2C 7.5.6)
> 
> Vit
> 
> ----------------------------------
> \starttext
>    Natural table:
>    \bTABLE
>    \bTR
>      \bTD A\eTD
>      \bTD B\eTD
>      \bTD C\eTD
>      \bTD D\eTD
>    \eTR
>    \dorecurse{250}{\bTR\bTD a\eTD\eTR}
>    \eTABLE
> \stoptext
> ------------------------------------
> 
> Error:
> ! TeX capacity exceeded, sorry [save size=5000].

setting that to 10.000 will help (in texmf.cnf)


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From vit.zyka at gmail.com  Fri Mar 28 10:21:16 2008
From: vit.zyka at gmail.com (Vit Zyka)
Date: Fri, 28 Mar 2008 10:21:16 +0100
Subject: [dev-context] natural table error
In-Reply-To: <115224fb0803280143l505d3627nbd08b70df2b5744f@mail.gmail.com>
References: <47EB8843.3020100@seznam.cz>	
	<115224fb0803270535y60e0377em3bda645ca308041a@mail.gmail.com>	
	<47EB99AE.6030003@seznam.cz>
	<115224fb0803280143l505d3627nbd08b70df2b5744f@mail.gmail.com>
Message-ID: <47ECB88C.8060800@seznam.cz>

Wolfgang Schuster wrote:
> On Thu, Mar 27, 2008 at 1:57 PM, Vit Zyka <vit.zyka at gmail.com> wrote:
>> Wolfgang Schuster wrote:
>>>> Error:
>>>> ! TeX capacity exceeded, sorry [save size=5000].
>>> Hi Vit,
>>>
>>> your TeX run out of memory, you should increase the save size
>>> and the table should work.
>>>
>>> Wolfgang
>> Yuoops! You are right Wolfgang. Thank you.
>>
>> I did not realize that I have a different memory setting in my old and
>> new ConTeXt instalation and I suspected it was caused by macro recurse
>> loops.
> 
> This is also the default value in my installation.
> 
> You should know tables are read into memory first and this will fill
> the save size, this works in plain TeX with pages spanning a few hundred
> pages but every cell in natural tables is also a \framed command and the
> definitions for table cells and framed are long and complicated.
> 
> Wolfgang

Yes Wolfgang, I know about this; I am stupid I did not have this in mind 
detecting the error message.

My ConTeXting is never-ending fight with strange behaviour/version 
dependency/bugs. This fight is a adventurous pleasure on one hand but 
sometimes also time-consuming pain on the other one. I am feeling a bit 
paranoid of that to being view a bug even where there no one is.

Please do not read this as a complain. ConTeXt is too complicated piece 
of software that is why it is understandable. Problem (?) is it is still 
rapidly developed. Before some stabilization might bring nearer another 
reorganization/development (e.g. MKIV) fires :) Perhaps c'est la vie.

Best
Vit

P.S. Thanks also to Hans for his answer.


From mojca.miklavec.lists at gmail.com  Sun Mar 30 17:56:12 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sun, 30 Mar 2008 17:56:12 +0200
Subject: [dev-context] mpost -8bit not working on MikTeX
Message-ID: <6faad9f00803300856p29e71efdta12b428da933b805@mail.gmail.com>

Hello Hans,

in tex.rb you pass the option -8bit to mpost. That option is
(apparently - I have not tested, but see the list at the bottom) not
available on MikTeX 2.7. I have no idea when this switch is needed and
if there is any replacement for it, but it would be nice to fix the
script in one way or another.

Apparently this mechanism is going to change really soon anyway :),
but for MikTeX it means waiting for the next version, so it might make
sense to fix that and upload the fixed version to CTAN. (As far as I
know, MikTeX is the only and the most important "user" of ConTeXt from
CTAN, and it makes sense to keep some compromise of recent vs. stable
version there.)

Thanks,
    Mojca

Here's an email sent to the MikTeX mailing list:

On Sat, Mar 29, 2008 at 11:57 AM,  <olivier.billet at orange-ftgroup.com> wrote:
> Dear all,
>
>  We are using MiKTeX 2.7 and ConTeXt and we are experiencing a bug during
>  the interaction of ConTeXt and metapost.  Namely, the wrapper script
>  texexec ends the run by noting the following error:
>
>   mpost: Invalid command-line option
>
>  Compiling with mpost directly the (on the fly created)
>  jobname-mpgraph.mp file works properly.  This bug seems to have slept
>  into
>  2.7 after the fix of the ConTeXt package some weeks ago...
>
>  Is this a known bug? Below is a minimal sample file with which the bug
>  occurs. Is there an easy fix?
>
>  Thanks for your help,
>  Olivier
>
>
>  %---------------    sample file    --------------------------
>
>  \starttext
>
>  \startreusableMPgraphic{symb-circle-oo}
>    numeric u; u=1.8pt;
>    fill ((0,0)..(0,3u)..(3u,3u)..(3u,0)..cycle);
>  \stopreusableMPgraphic
>  \reuseMPgraphic{symb-circle-oo}
>
>  \stoptext
>
>
>  -------------------------------------------------------------------------

Usage: mpost [OPTION...] [COMMAND...]
  -alias=APP                      Pretend to be APP.  This affects both the
                                  format used and the search path.
  -aux-directory=DIR              Use DIR as the directory to write auxiliary
                                  files to.
  -bistack-size=N                 Set bistack_size to N.
  -buf-size=N                     Set buf_size to N.
  -c-style-errors                 Enable file:line:error style messages.
  -disable-installer              Disable the package installer.  Missing
                                  files will not be installed.
  -disable-pipes                  Disable input (output) from (to) processes.
  -dont-parse-first-line          Do not parse the first line of the input
                                  line to look for a dump name and/or extra
                                  command-line options.
  -enable-installer               Enable the package installer.  Missing files
                                  will be installed.
  -enable-pipes                   Enable input (output) from (to) processes.
  -error-line=N                   Set error_line to N.
  -extra-mem-top=N                Set extra_mem_top to N.
  -font-mem-size=N                Set font_mem_size to N.
  -half-error-line=N              Set half_error_line to N.
  -halt-on-error                  Stop after the first error.
  -help                           Show this help screen and exit.
  -hhelp                          Show the manual page in an HTMLHelp window
                                  and exit when the window is closed.
  -include-directory=DIR          Prefix DIR to the input search path.
  -initialize                     Be the INI variant of the program.
  -interaction=MODE               Set the interaction mode; MODE must be one
                                  of: batchmode, nonstopmode, scrollmode,
                                  errorstopmode.
  -job-name=NAME                  Set the job name and hence the name(s) of
                                  the output file(s).
  -job-time=FILE                  Set the job time.  Take FILE's timestamp as
                                  the reference.
  -lig-table-size=N               Set lig_table_size to N.
  -main-memory=N                  Set main_memory to N.
  -max-print-line=N               Set max_print_line to N.
  -max-strings=N                  Set max_strings to N.
  -no-c-style-errors              Disable file:line:error style messages.
  -output-directory=DIR           Use DIR as the directory to write output
                                  files to.
  -param-size=N                   Set param_size to N.
  -parse-first-line               Parse the first line of the input line to
                                  look for a dump name and/or extra
                                  command-line options.
  -path-size=N                    Set path_size to N.
  -pool-size=N                    Set pool_size to N.
  -quiet                          Suppress all output (except errors).
  -record-package-usages=FILE     Enable the package usage recorder.  Output
                                  is written to FILE.
  -recorder                       Turn on the file name recorder to leave a
                                  trace of the files opened for input and
                                  output in a file with extension .fls.
  -stack-size=N                   Set stack_size to N.
  -string-vacancies=N             Set string_vacancies to N.
  -tcx=TCXNAME                    Use the TCXNAME translation table to set the
                                  mapping of inputcharacters and re-mapping of
                                  output characters.
  -tex=TEXPROGRAM                 Use TEXPROGRAM for text labels.
  -time-statistics                Show processing time statistics.
  -trace=OPTIONS                  Turn tracing on.  OPTIONS must be a
                                  comma-separated list of trace options.   See
                                  the manual, for more information.
  -undump=NAME                    Use NAME instead of program name when
                                  loading internal tables.
  -version                        Print version information and exit.

From vit.zyka at gmail.com  Mon Apr  7 22:15:55 2008
From: vit.zyka at gmail.com (Vit Zyka)
Date: Mon, 07 Apr 2008 22:15:55 +0200
Subject: [dev-context] typo in page-str.tex
Message-ID: <47FA80FB.6010700@seznam.cz>

Hi Hans,

I did start to play with streams. There are two typos in page-str.tex:

\def\setmarknote[#1]#2%
   {\doglobal\incrementvalue{mn:#1:n}%
%  \setgvalue{mn:#1:t:\getvalue{mn:#1:n}}{#1}%
%                                         ^^
    \setgvalue{mn:#1:t:\getvalue{mn:#1:n}}{#2}%
%  \expanded{\marking[#1]{\getvalue{mn:#1:n}}}}
%                     ^^
    \expanded{\marking[mn:#1]{\getvalue{mn:#1:n}}}}

Cheers
Vit


From taco at elvenkind.com  Thu Apr 10 16:49:56 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 10 Apr 2008 16:49:56 +0200
Subject: [dev-context] Luatex beta 0.25.2 released
Message-ID: <47FE2914.7020704@elvenkind.com>


Hi all,

I have just uploaded the archives for luatex 0.25.2.

* Updated to MPlib 0.40
* Bugfixes and cleanup in the lua img table code
* Fix \pdflastximagepages bug from pdftex
* Fix for very large tex.print strings
* Update to Lpeg 0.8.1
* &D Bugfix for Type1 fonts when out-of-range characters
   are marked as 'used'

The archives (source and binaries) can be downloaded from supelec,
as usual:

      http://foundry.supelec.fr/projects/luatex/

Bugs and feature requests can be added to the issue tracker at

      http://tracker.luatex.org

Have fun,
Taco


From pragma at wxs.nl  Fri Apr 11 14:27:10 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 11 Apr 2008 14:27:10 +0200
Subject: [dev-context] typo in page-str.tex
In-Reply-To: <47FA80FB.6010700@seznam.cz>
References: <47FA80FB.6010700@seznam.cz>
Message-ID: <47FF591E.9000401@wxs.nl>

Vit Zyka wrote:
> Hi Hans,
> 
> I did start to play with streams. There are two typos in page-str.tex:
> 
> \def\setmarknote[#1]#2%
>    {\doglobal\incrementvalue{mn:#1:n}%
> %  \setgvalue{mn:#1:t:\getvalue{mn:#1:n}}{#1}%
> %                                         ^^
>     \setgvalue{mn:#1:t:\getvalue{mn:#1:n}}{#2}%
> %  \expanded{\marking[#1]{\getvalue{mn:#1:n}}}}
> %                     ^^
>     \expanded{\marking[mn:#1]{\getvalue{mn:#1:n}}}}

ok, fixed

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From forestm at cyl0n.com  Tue Apr 15 12:23:37 2008
From: forestm at cyl0n.com (Forest - Cylon)
Date: Tue, 15 Apr 2008 06:23:37 -0400
Subject: [dev-context] Question about website rubyland.de
Message-ID: <E1JliK9-0002Ak-5Z@server.0nq.net>

An HTML attachment was scrubbed...
URL: http://www.ntg.nl/mailman/private/dev-context/attachments/20080415/4f36403b/attachment.html 

From preining at logic.at  Tue Apr 15 09:17:08 2008
From: preining at logic.at (Norbert Preining)
Date: Tue, 15 Apr 2008 09:17:08 +0200
Subject: [dev-context] problem with new context and old pdftex
Message-ID: <20080415071708.GW983@gamma.logic.tuwien.ac.at>

Hi all,

I am trying to compile the pdftex manual with context 2008.04.11 and
pdftex 1.40.3 (TeX Live 2007 for Debian), and I am getting these errors:

...
subsection      : 3.2 Compiling
./pdftex-t.tex:867: Missing \endcsname inserted.
<to be read again> 
                   \$
\trackedfilename ->\$
                     HOME/pdftex
\setxvalue #1->\expandafter \xdef \csname #1
                                            \endcsname 
\dodoreadfile ...setxvalue {fn..\trackedfilename }
                                                  {\readfilename \ifcase \pr...

\dohyphenateword ...ile {#3}\donothing \donothing 
                                                  \else #3\fi \else #3\fi }\...

\filename #1->{\tttf \hyphenatedfile {#1}
                                         }
l.867 \filename {\$HOME/pdftex}
                               , on a~\UNIX\ system the following steps are
?



But more interesting some errors from pdftexconfig.tex:
(./pdftex-t-pdftex-t.tmp)
(/etc/texmf/tex/generic/config/pdftexconfig.tex
/etc/texmf/tex/generic/config/pdftexconfig.tex:6: Illegal unit of measure (pt inserted).
<to be read again> 
                   \hskip 
\obeyedspace ->\hskip 
                      \zeropoint \hbox to \onepoint {}\hskip \zeropoint 
l.6 \pdfpagewidth=210 
                      true mm
? 


and the same for pdfpageheight, pdfhorigin, ... etc etc.



After that it is getting really crazy: context tries to load example.tex
(whatever that may be, in my case something in TEXMFLOCAL):
subsection      : 3.7 Testing the installation
(/usr/local/share/texmf/tex/latex/infbrief/example.tex
/usr/local/share/texmf/tex/latex/infbrief/example.tex:1: Undefined control sequence.
l.1 \documentclass
                  [a4paper]{infbrief}
? 



The very same document worked before (context 2008.01.14 or so) without
any problems. 

Am I missing something in the installation?

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
ACLE (n.)
The rouge pin which shirtmakers conceal in the most improbable fold of
a new shirt. Its function is to stab you when you don the garment.
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Tue Apr 15 11:27:54 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 15 Apr 2008 11:27:54 +0200
Subject: [dev-context] problem with new context and old pdftex
In-Reply-To: <20080415071708.GW983@gamma.logic.tuwien.ac.at>
References: <20080415071708.GW983@gamma.logic.tuwien.ac.at>
Message-ID: <4804751A.6050008@elvenkind.com>



Norbert Preining wrote:
> Hi all,
> 
> I am trying to compile the pdftex manual with context 2008.04.11 and
> pdftex 1.40.3 (TeX Live 2007 for Debian), and I am getting these errors:
> 
> ...

I wager just about all of these are manifestations of the same bug
(redefined \hyphenatedfile) that Aditya found.

Best wishes,
Taco


From preining at logic.at  Tue Apr 15 12:31:12 2008
From: preining at logic.at (Norbert Preining)
Date: Tue, 15 Apr 2008 12:31:12 +0200
Subject: [dev-context] problem with new context and old pdftex
In-Reply-To: <4804751A.6050008@elvenkind.com>
References: <20080415071708.GW983@gamma.logic.tuwien.ac.at>
	<4804751A.6050008@elvenkind.com>
Message-ID: <20080415103112.GE1738@gamma.logic.tuwien.ac.at>

On Di, 15 Apr 2008, Taco Hoekwater wrote:
> I wager just about all of these are manifestations of the same bug
> (redefined \hyphenatedfile) that Aditya found.

Do you have a patch I could test?

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
HIGH OFFLEY (n.)
Gossnargh (q.v.) three weeks later.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Tue Apr 15 12:30:39 2008
From: preining at logic.at (Norbert Preining)
Date: Tue, 15 Apr 2008 12:30:39 +0200
Subject: [dev-context] [Dev-luatex] Luatex beta 0.25.2 released
In-Reply-To: <47FE2914.7020704@elvenkind.com>
References: <47FE2914.7020704@elvenkind.com>
Message-ID: <20080415103039.GD1738@gamma.logic.tuwien.ac.at>

On Do, 10 Apr 2008, Taco Hoekwater wrote:
> I have just uploaded the archives for luatex 0.25.2.

Debian packages for sid are coming in, for etch as usual under
	deb(-src) http://people.debian.org/~preining/TeX/ luatex/

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
AINSWORTH (n.)
The length of time it takes to get served in a camera shop. Hence,
also, how long we will have to wait for the abolition of income tax or
the Second Coming.
			--- Douglas Adams, The Meaning of Liff

From adityam at umich.edu  Tue Apr 15 16:45:39 2008
From: adityam at umich.edu (Aditya Mahajan)
Date: Tue, 15 Apr 2008 10:45:39 -0400 (EDT)
Subject: [dev-context] problem with new context and old pdftex
In-Reply-To: <20080415103112.GE1738@gamma.logic.tuwien.ac.at>
References: <20080415071708.GW983@gamma.logic.tuwien.ac.at>
	<4804751A.6050008@elvenkind.com>
	<20080415103112.GE1738@gamma.logic.tuwien.ac.at>
Message-ID: <alpine.DEB.1.00.0804151044580.15273@nqv-yncgbc>

On Tue, 15 Apr 2008, Norbert Preining wrote:

> On Di, 15 Apr 2008, Taco Hoekwater wrote:
>> I wager just about all of these are manifestations of the same bug
>> (redefined \hyphenatedfile) that Aditya found.
>
> Do you have a patch I could test?

Add this to the top of the file:

\unexpanded\def\filename#1{{\tttf\hyphenatedurl{#1}}}

Aditya

From preining at logic.at  Tue Apr 15 16:49:01 2008
From: preining at logic.at (Norbert Preining)
Date: Tue, 15 Apr 2008 16:49:01 +0200
Subject: [dev-context] problem with new context and old pdftex
In-Reply-To: <alpine.DEB.1.00.0804151044580.15273@nqv-yncgbc>
References: <20080415071708.GW983@gamma.logic.tuwien.ac.at>
	<4804751A.6050008@elvenkind.com>
	<20080415103112.GE1738@gamma.logic.tuwien.ac.at>
	<alpine.DEB.1.00.0804151044580.15273@nqv-yncgbc>
Message-ID: <20080415144901.GB28696@gamma.logic.tuwien.ac.at>

Hi Aditya, hi Taco,


On Di, 15 Apr 2008, Aditya Mahajan wrote:
> >>I wager just about all of these are manifestations of the same bug
> >>(redefined \hyphenatedfile) that Aditya found.
...
> \unexpanded\def\filename#1{{\tttf\hyphenatedurl{#1}}}

That fixed the problem. Thanks. Not that I actually will ship context
2008.04.11 with this bug, since I cannot expect people to fix their
documents for a specific version.

So I will wait before making new packages. 

Thanks and all the best

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
GREAT WAKERING (participial vb.)
Panic which sets in when you badly need to go to the lavatory and
cannot make up your mind about what book or magazine to take with you.
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Wed Apr 16 18:01:19 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 16 Apr 2008 18:01:19 +0200
Subject: [dev-context] New context release
In-Reply-To: <fe8d59da0804160221x6df87ac3v6b8a1e49a155c598@mail.gmail.com>
References: <fe8d59da0804160221x6df87ac3v6b8a1e49a155c598@mail.gmail.com>
Message-ID: <480622CF.60303@elvenkind.com>


Hi all,

Hans has been very busy today. Just now, he uploaded the
fourth "current" of today, and we now believe to have fixed
all reported bugs introduced by 2008.04.15.

Of course we cannot be sure, but please have look at

   http://wiki.contextgarden.net/Release_Note

for everything we did change and patch in the past 24 hours.
If nothing bad happens, this release will go to CTAN (and
debian, I presume) sometime tomorrow.

Best wishes,
Taco

From preining at logic.at  Wed Apr 16 18:35:21 2008
From: preining at logic.at (Norbert Preining)
Date: Wed, 16 Apr 2008 18:35:21 +0200
Subject: [dev-context] New context release
In-Reply-To: <480622CF.60303@elvenkind.com>
References: <fe8d59da0804160221x6df87ac3v6b8a1e49a155c598@mail.gmail.com>
	<480622CF.60303@elvenkind.com>
Message-ID: <20080416163521.GE6680@gamma.logic.tuwien.ac.at>

Hi all,

On Mi, 16 Apr 2008, Taco Hoekwater wrote:
>    http://wiki.contextgarden.net/Release_Note
> 
> for everything we did change and patch in the past 24 hours.
> If nothing bad happens, this release will go to CTAN (and
> debian, I presume) sometime tomorrow.


Preliminary packages are available at the usual location
	deb http://people.debian.org/~preining/TeX/ context/
	deb-src http://people.debian.org/~preining/TeX/ context/
Please give it a try.

I made tests and it passed all context/pdftex tests and the simple
context/luatex I am using.


Taco/Hans: Do you require the newest lmodern with the change of font
names in this context version? Debian currently has 1.010x.

This is important because we have to make a concerted action in case the
deps are on the new lmodern.

Thanks and all the best

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
NANTWICH (n.)
A late-night snack, invented by the Earl of Nantwich, which consists
of the dampest thing in the fridge, pressed between two of the driest
things in the fridge. The Earl, who lived in a flat in Clapham,
invented the nantwich to avoid having to go shopping.
			--- Douglas Adams, The Meaning of Liff

From pragma at wxs.nl  Wed Apr 16 18:52:27 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 16 Apr 2008 18:52:27 +0200
Subject: [dev-context] New context release
In-Reply-To: <20080416163521.GE6680@gamma.logic.tuwien.ac.at>
References: <fe8d59da0804160221x6df87ac3v6b8a1e49a155c598@mail.gmail.com>	<480622CF.60303@elvenkind.com>
	<20080416163521.GE6680@gamma.logic.tuwien.ac.at>
Message-ID: <48062ECB.4020402@wxs.nl>

Norbert Preining wrote:
> Hi all,
> 
> On Mi, 16 Apr 2008, Taco Hoekwater wrote:
>>    http://wiki.contextgarden.net/Release_Note
>>
>> for everything we did change and patch in the past 24 hours.
>> If nothing bad happens, this release will go to CTAN (and
>> debian, I presume) sometime tomorrow.
> 
> 
> Preliminary packages are available at the usual location
> 	deb http://people.debian.org/~preining/TeX/ context/
> 	deb-src http://people.debian.org/~preining/TeX/ context/
> Please give it a try.
> 
> I made tests and it passed all context/pdftex tests and the simple
> context/luatex I am using.
> 
> 
> Taco/Hans: Do you require the newest lmodern with the change of font
> names in this context version? Debian currently has 1.010x.
> 
> This is important because we have to make a concerted action in case the
> deps are on the new lmodern.

indeed we need the latest although in the luatex version there is a kind 
of fallback name subsystem,

thanks for your prompt package building

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From preining at logic.at  Wed Apr 16 18:55:59 2008
From: preining at logic.at (Norbert Preining)
Date: Wed, 16 Apr 2008 18:55:59 +0200
Subject: [dev-context] New context release
In-Reply-To: <48062ECB.4020402@wxs.nl>
References: <fe8d59da0804160221x6df87ac3v6b8a1e49a155c598@mail.gmail.com>
	<480622CF.60303@elvenkind.com>
	<20080416163521.GE6680@gamma.logic.tuwien.ac.at>
	<48062ECB.4020402@wxs.nl>
Message-ID: <20080416165559.GJ6680@gamma.logic.tuwien.ac.at>

On Mi, 16 Apr 2008, Hans Hagen wrote:
> indeed we need the latest although in the luatex version there is a kind 
> of fallback name subsystem,

Aehmmmmm.... what does this mean??? So either you need it, or there is a
fallback system ... semantics are sometimes dangerous ;-)

So if we ship the old or the new one there is no problem with the one or
the other?

> thanks for your prompt package building

No problem, there are normally not many things to do but running the
tests.

But I still hope that some Debian ConTeXt user could check that
everything works as expected etc etc.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
FINUGE (vb.)
In any division of foodstuffs equally between several people, to give
yourself the extra slice left over.
			--- Douglas Adams, The Meaning of Liff

From pragma at wxs.nl  Wed Apr 16 19:02:13 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 16 Apr 2008 19:02:13 +0200
Subject: [dev-context] New context release
In-Reply-To: <20080416165559.GJ6680@gamma.logic.tuwien.ac.at>
References: <fe8d59da0804160221x6df87ac3v6b8a1e49a155c598@mail.gmail.com>
	<480622CF.60303@elvenkind.com>
	<20080416163521.GE6680@gamma.logic.tuwien.ac.at>
	<48062ECB.4020402@wxs.nl>
	<20080416165559.GJ6680@gamma.logic.tuwien.ac.at>
Message-ID: <48063115.9000105@wxs.nl>

Norbert Preining wrote:
> On Mi, 16 Apr 2008, Hans Hagen wrote:
>> indeed we need the latest although in the luatex version there is a kind 
>> of fallback name subsystem,
> 
> Aehmmmmm.... what does this mean??? So either you need it, or there is a
> fallback system ... semantics are sometimes dangerous ;-)

well, it may work with the old fonts (depends on how old), in 
font-syn.tex  you will find

fonts.names.new_to_old = {
     ["lmroman10-capsregular"]                = "lmromancaps10-oblique",
     ["lmroman10-capsoblique"]                = "lmromancaps10-regular",
     ["lmroman10-demi"]                       = "lmromandemi10-oblique",
     ["lmroman10-demioblique"]                = "lmromandemi10-regular",
     ["lmroman8-oblique"]                     = "lmromanslant8-regular",
     ["lmroman9-oblique"]                     = "lmromanslant9-regular",
     ["lmroman10-oblique"]                    = "lmromanslant10-regular",
     ["lmroman12-oblique"]                    = "lmromanslant12-regular",

etc. so older fonts are ok for context/luatex; while for xetex new fonts 
are needed.

> So if we ship the old or the new one there is no problem with the one or
> the other?

not for luatex/context

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From preining at logic.at  Wed Apr 16 19:08:15 2008
From: preining at logic.at (Norbert Preining)
Date: Wed, 16 Apr 2008 19:08:15 +0200
Subject: [dev-context] New context release
In-Reply-To: <48063115.9000105@wxs.nl>
References: <fe8d59da0804160221x6df87ac3v6b8a1e49a155c598@mail.gmail.com>
	<480622CF.60303@elvenkind.com>
	<20080416163521.GE6680@gamma.logic.tuwien.ac.at>
	<48062ECB.4020402@wxs.nl>
	<20080416165559.GJ6680@gamma.logic.tuwien.ac.at>
	<48063115.9000105@wxs.nl>
Message-ID: <20080416170815.GM6680@gamma.logic.tuwien.ac.at>

On Mi, 16 Apr 2008, Hans Hagen wrote:
> well, it may work with the old fonts (depends on how old), in 
> font-syn.tex  you will find

Well it is the last release before the renaming of the fonts, as I said
1.01x.

> etc. so older fonts are ok for context/luatex; while for xetex new fonts 
> are needed.
> 
> >So if we ship the old or the new one there is no problem with the one or
> >the other?
> 
> not for luatex/context

Huuu ... above you say

   "so older fonts are ok for context/luatex; while for xetex new fonts
    are needed"

and then

   "not for luatex/context"


So I assume the situation is as follows:

- for context/luatex: ok with old and new ones
- for context/xetex: new ones are necessary

Ok, I will think about updating the lmodern fonts, too, but renaming the
font names is really a pain, you shouldn't do that after a 1.something
release. No idea why they did that.

Thanks for the information

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
AITH (n.)
The single bristle that sticks out sideways on a cheap paintbrush.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Wed Apr 16 19:21:28 2008
From: preining at logic.at (Norbert Preining)
Date: Wed, 16 Apr 2008 19:21:28 +0200
Subject: [dev-context] New context release
In-Reply-To: <20080416170815.GM6680@gamma.logic.tuwien.ac.at>
References: <fe8d59da0804160221x6df87ac3v6b8a1e49a155c598@mail.gmail.com>
	<480622CF.60303@elvenkind.com>
	<20080416163521.GE6680@gamma.logic.tuwien.ac.at>
	<48062ECB.4020402@wxs.nl>
	<20080416165559.GJ6680@gamma.logic.tuwien.ac.at>
	<48063115.9000105@wxs.nl>
	<20080416170815.GM6680@gamma.logic.tuwien.ac.at>
Message-ID: <20080416172128.GO6680@gamma.logic.tuwien.ac.at>

On Mi, 16 Apr 2008, Norbert Preining wrote:
> - for context/luatex: ok with old and new ones
> - for context/xetex: new ones are necessary
> 
> Ok, I will think about updating the lmodern fonts, too, but renaming the

Hmm, according to Ralf updating the lmodern is a no-go because that
would need euenc/fontspec updates, which would need ... devilish.
(See bugs.debian.org/469437)

I guess we have to live with this for lenny. And for the next we will
have TL2008 with new xetex/luatex and can ship new context and fonts.

Or do you have another suggestion???

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
Program aborting:
Close all that you have worked on.
You ask far too much.
                       --- Windows Error Haiku

From mojca.miklavec.lists at gmail.com  Wed Apr 16 19:56:08 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 16 Apr 2008 19:56:08 +0200
Subject: [dev-context] New context release
In-Reply-To: <20080416172128.GO6680@gamma.logic.tuwien.ac.at>
References: <fe8d59da0804160221x6df87ac3v6b8a1e49a155c598@mail.gmail.com>
	<480622CF.60303@elvenkind.com>
	<20080416163521.GE6680@gamma.logic.tuwien.ac.at>
	<48062ECB.4020402@wxs.nl>
	<20080416165559.GJ6680@gamma.logic.tuwien.ac.at>
	<48063115.9000105@wxs.nl>
	<20080416170815.GM6680@gamma.logic.tuwien.ac.at>
	<20080416172128.GO6680@gamma.logic.tuwien.ac.at>
Message-ID: <6faad9f00804161056w4c67f606r8b2b4c50e4bbcfe2@mail.gmail.com>

On Wed, Apr 16, 2008 at 7:21 PM, Norbert Preining wrote:
> On Mi, 16 Apr 2008, Norbert Preining wrote:
>  > - for context/luatex: ok with old and new ones
>  > - for context/xetex: new ones are necessary

True.

>  > Ok, I will think about updating the lmodern fonts, too, but renaming the
>
>  Hmm, according to Ralf updating the lmodern is a no-go because that
>  would need euenc/fontspec updates, which would need ... devilish.
>  (See bugs.debian.org/469437)
>
>  I guess we have to live with this for lenny. And for the next we will
>  have TL2008 with new xetex/luatex and can ship new context and fonts.
>
>  Or do you have another suggestion???

ConTeXt + XeTeX will be broken without the latest LM fonts. ConTeX +
LuaTeX works OK.

For XeLaTeX you indeed need to update fontspec, but if you're
reluctant to upgrade the rest of XeTeX, a fix of fontspec to support
the latest LM fonts is so minor, that it's really not worth having a
broken ConTeXt+XeTeX. fontspec might need only a few name fixes,
that's all.

Maybe Jonathan and Will have something more to say about which version
of XeTeX and fontspec might be best to consider to make its way into
Debian, but a humble request from my side - please do upgrade LM.
(MikTeX has done that already.)

Mojca

From preining at logic.at  Wed Apr 16 20:56:57 2008
From: preining at logic.at (Norbert Preining)
Date: Wed, 16 Apr 2008 20:56:57 +0200
Subject: [dev-context] New context release
In-Reply-To: <6faad9f00804161056w4c67f606r8b2b4c50e4bbcfe2@mail.gmail.com>
References: <fe8d59da0804160221x6df87ac3v6b8a1e49a155c598@mail.gmail.com>
	<480622CF.60303@elvenkind.com>
	<20080416163521.GE6680@gamma.logic.tuwien.ac.at>
	<48062ECB.4020402@wxs.nl>
	<20080416165559.GJ6680@gamma.logic.tuwien.ac.at>
	<48063115.9000105@wxs.nl>
	<20080416170815.GM6680@gamma.logic.tuwien.ac.at>
	<20080416172128.GO6680@gamma.logic.tuwien.ac.at>
	<6faad9f00804161056w4c67f606r8b2b4c50e4bbcfe2@mail.gmail.com>
Message-ID: <20080416185657.GD24108@gamma.logic.tuwien.ac.at>

On Mi, 16 Apr 2008, Mojca Miklavec wrote:
> For XeLaTeX you indeed need to update fontspec, but if you're
> reluctant to upgrade the rest of XeTeX, a fix of fontspec to support
> the latest LM fonts is so minor, that it's really not worth having a
> broken ConTeXt+XeTeX. fontspec might need only a few name fixes,
> that's all.

Give me a patch and I will see whether it is so "minor".

> Debian, but a humble request from my side - please do upgrade LM.

There are people using xetex without context, and I don't want to break
anything for them. context/luatex and context/xetex are more
experimental (or at least I consider them that way).

I need to see the necessary changes before I can discuss that.

Jonathan, Will: It is about TeX Live 2007 in Debian/lenny. There will be
no TL2008 in lenny. But we have recent context and recent luatex.

It is about updating the lmodern fonts, currently we have 1.01x, the
last before the otf and font names were renamed.

What changes would be necessary for fontspec and/or euenc and/or xetex
so that we don't break everything, and have a working:
	xetex
	context/xetex

Thanks for any enlightening comments!!

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
LOW EGGBOROUGH (n.)
A quiet little unregarded man in glasses who is building a new kind of
atomic bomb in his garden shed.
			--- Douglas Adams, The Meaning of Liff

From mojca.miklavec.lists at gmail.com  Thu Apr 17 02:09:04 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Thu, 17 Apr 2008 02:09:04 +0200
Subject: [dev-context] New context release
In-Reply-To: <406FB96B-7678-4EC9-9576-5E39D7E0F50B@sil.org>
References: <fe8d59da0804160221x6df87ac3v6b8a1e49a155c598@mail.gmail.com>
	<20080416163521.GE6680@gamma.logic.tuwien.ac.at>
	<48062ECB.4020402@wxs.nl>
	<20080416165559.GJ6680@gamma.logic.tuwien.ac.at>
	<48063115.9000105@wxs.nl>
	<20080416170815.GM6680@gamma.logic.tuwien.ac.at>
	<20080416172128.GO6680@gamma.logic.tuwien.ac.at>
	<6faad9f00804161056w4c67f606r8b2b4c50e4bbcfe2@mail.gmail.com>
	<20080416185657.GD24108@gamma.logic.tuwien.ac.at>
	<406FB96B-7678-4EC9-9576-5E39D7E0F50B@sil.org>
Message-ID: <6faad9f00804161709m65a4874y4ccdfa24a702f383@mail.gmail.com>

On Thu, Apr 17, 2008 at 1:42 AM, Jonathan Kew wrote:
> On 16 Apr 2008, at 7:56 pm, Norbert Preining wrote:
>
>  Given that there won't be TL2008 in lenny, I think it would be very
> desirable to update xetex to a more recent version than 0.996 as shipped
> with TL2007.

> (I don't know much about the context situation).

ConTeXt would be happy to have the \supressfontnotfounderror fix
available (which means: happy to have a binary version of XeTeX later
than the one in TL 2007), but should work OK with the old one with
some semi-serious time penalty. If one also forgets all the other nice
bug fixes in xetex, old LM fonts are the only issue that would really
break functionality.

Mojca

From preining at logic.at  Thu Apr 17 07:18:49 2008
From: preining at logic.at (Norbert Preining)
Date: Thu, 17 Apr 2008 07:18:49 +0200
Subject: [dev-context] New context release
In-Reply-To: <406FB96B-7678-4EC9-9576-5E39D7E0F50B@sil.org>
References: <480622CF.60303@elvenkind.com>
	<20080416163521.GE6680@gamma.logic.tuwien.ac.at>
	<48062ECB.4020402@wxs.nl>
	<20080416165559.GJ6680@gamma.logic.tuwien.ac.at>
	<48063115.9000105@wxs.nl>
	<20080416170815.GM6680@gamma.logic.tuwien.ac.at>
	<20080416172128.GO6680@gamma.logic.tuwien.ac.at>
	<6faad9f00804161056w4c67f606r8b2b4c50e4bbcfe2@mail.gmail.com>
	<20080416185657.GD24108@gamma.logic.tuwien.ac.at>
	<406FB96B-7678-4EC9-9576-5E39D7E0F50B@sil.org>
Message-ID: <20080417051849.GF9094@gamma.logic.tuwien.ac.at>

On Do, 17 Apr 2008, Jonathan Kew wrote:
> If you're willing to consider this, I can make and tag a branch in  
> our Subversion repository to give you a stable version to use (you'll  

I am considering that, and (but) best would be to have a patch against
the sources in TeX Live 2007 (the bug fix branch I mean).

Is there a chance to get such a patch?

And we should at the same time update the necessary packages (is euenc
and fontspec enough?)

So, yes, I am consider that.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
COTTERSTOCK (n.)
A piece of wood used to stir paint and thereafter stored uselessly in
a shed in perpetuity.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Thu Apr 17 07:38:55 2008
From: preining at logic.at (Norbert Preining)
Date: Thu, 17 Apr 2008 07:38:55 +0200
Subject: [dev-context] New context release
In-Reply-To: <EE29A2FD-FC4E-43D0-B232-5F7F349D2B81@gmail.com>
	<91B15B62-6254-4326-8977-47BDAE759A35@gmail.com>
References: <20080416163521.GE6680@gamma.logic.tuwien.ac.at>
	<48062ECB.4020402@wxs.nl>
	<20080416165559.GJ6680@gamma.logic.tuwien.ac.at>
	<48063115.9000105@wxs.nl>
	<20080416170815.GM6680@gamma.logic.tuwien.ac.at>
	<20080416172128.GO6680@gamma.logic.tuwien.ac.at>
	<6faad9f00804161056w4c67f606r8b2b4c50e4bbcfe2@mail.gmail.com>
	<20080416185657.GD24108@gamma.logic.tuwien.ac.at>
	<6faad9f00804161607g18d006b2j15484afb7612c64a@mail.gmail.com>
	<91B15B62-6254-4326-8977-47BDAE759A35@gmail.com>
Message-ID: <20080417053855.GH9094@gamma.logic.tuwien.ac.at>

Hi Will,

On Do, 17 Apr 2008, Will Robertson wrote:
> All other XeTeX+LaTeX packages are unaffected and you should use the  
> latest versions from the SVN repository. If you need me to upload the  

Umpf, I don't like to package stuff that is in some svn repository for a
stable release, stuff that hasn't seen at least a decent amount of
testing.

Honestly, I fear to open a pandora's box here. We are now at a level
that I would have to:
- patch xetex and probably xdvipdfmx
- patch several tex packages
- update the lmodern fonts

And I am not sure that all this will *not* affect anything else in
TeX Live 2007!?!?

Furthermore, to be honest, I currently have not the time to prepare such
a big thing.

If one wants to step in and make a patch please grab
	http://people.debian.org/~preining/TeX/src/texlive-bin_2007.dfsg.1.orig.tar.gz
and send a patch against it. It contains fontspec, euenc, and xltxtra.

Receiving this patch I can (re)consider the whole thing.

Sorry, but I have my time constraints, final theoretical mountain guide
exam, upstream TeX Live work, and a real life ;-))))


Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
GOLANT (adj.)
Blank, sly and faintly embarrassed. Pertaining to the expression seen
on the face of someone who has clearly forgotten your name.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Thu Apr 17 08:23:30 2008
From: preining at logic.at (Norbert Preining)
Date: Thu, 17 Apr 2008 08:23:30 +0200
Subject: [dev-context] New context release
In-Reply-To: <11DEBFF2-95DA-4A86-9234-A57DA1360636@gmail.com>
References: <20080416165559.GJ6680@gamma.logic.tuwien.ac.at>
	<48063115.9000105@wxs.nl>
	<20080416170815.GM6680@gamma.logic.tuwien.ac.at>
	<20080416172128.GO6680@gamma.logic.tuwien.ac.at>
	<6faad9f00804161056w4c67f606r8b2b4c50e4bbcfe2@mail.gmail.com>
	<20080416185657.GD24108@gamma.logic.tuwien.ac.at>
	<6faad9f00804161607g18d006b2j15484afb7612c64a@mail.gmail.com>
	<91B15B62-6254-4326-8977-47BDAE759A35@gmail.com>
	<20080417053855.GH9094@gamma.logic.tuwien.ac.at>
	<11DEBFF2-95DA-4A86-9234-A57DA1360636@gmail.com>
Message-ID: <20080417062330.GN9094@gamma.logic.tuwien.ac.at>

On Do, 17 Apr 2008, Will Robertson wrote:
> Sorry, I didn't know how you went about actually creating this package.

The packages are created from the actual TeX Live release, or better
from the security branch of the subversion repository, the tag 2007.1 or
how it is called.

> It sounds like it would be easiest to stick with the official releases  
> of TeXLive, despite the long-ish lag-time.

Well yes and no. If the changes are not too invasive we can do it, but
you remember what I said ... ;-)

The problem is when lenny gets stable there will be *no* changes besides
security changes. We will not have the chance to get fixes for stupid
bugs that creeped in into lenny.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
LOW ARDWELL (n.)
Seductive remark made hopefully in the back of a taxi.
			--- Douglas Adams, The Meaning of Liff

From jonathan_kew at sil.org  Thu Apr 17 01:42:54 2008
From: jonathan_kew at sil.org (Jonathan Kew)
Date: Thu, 17 Apr 2008 00:42:54 +0100
Subject: [dev-context] New context release
In-Reply-To: <20080416185657.GD24108@gamma.logic.tuwien.ac.at>
References: <fe8d59da0804160221x6df87ac3v6b8a1e49a155c598@mail.gmail.com>
	<480622CF.60303@elvenkind.com>
	<20080416163521.GE6680@gamma.logic.tuwien.ac.at>
	<48062ECB.4020402@wxs.nl>
	<20080416165559.GJ6680@gamma.logic.tuwien.ac.at>
	<48063115.9000105@wxs.nl>
	<20080416170815.GM6680@gamma.logic.tuwien.ac.at>
	<20080416172128.GO6680@gamma.logic.tuwien.ac.at>
	<6faad9f00804161056w4c67f606r8b2b4c50e4bbcfe2@mail.gmail.com>
	<20080416185657.GD24108@gamma.logic.tuwien.ac.at>
Message-ID: <406FB96B-7678-4EC9-9576-5E39D7E0F50B@sil.org>

On 16 Apr 2008, at 7:56 pm, Norbert Preining wrote:

> Jonathan, Will: It is about TeX Live 2007 in Debian/lenny. There  
> will be
> no TL2008 in lenny. But we have recent context and recent luatex.
>
> It is about updating the lmodern fonts, currently we have 1.01x, the
> last before the otf and font names were renamed.
>
> What changes would be necessary for fontspec and/or euenc and/or xetex
> so that we don't break everything, and have a working:
> 	xetex
> 	context/xetex

Given that there won't be TL2008 in lenny, I think it would be very  
desirable to update xetex to a more recent version than 0.996 as  
shipped with TL2007. This would provide several important bug-fixes  
and improve compatibility with certain latex packages (I don't know  
much about the context situation). If you stay with the TL2007  
release, it will quickly look quite stale compared to other  
distributions that are around, and will frustrate users when features  
that others are using don't work for them.

If you're willing to consider this, I can make and tag a branch in  
our Subversion repository to give you a stable version to use (you'll  
need to use that rather than the TL repository). Let me know if I  
should do that. Don't try to grab the latest code from my TRUNK, as  
that's sometimes a bit too experimental.

JK


From wspr81 at gmail.com  Thu Apr 17 07:26:17 2008
From: wspr81 at gmail.com (Will Robertson)
Date: Thu, 17 Apr 2008 14:56:17 +0930
Subject: [dev-context] New context release
In-Reply-To: <20080417051849.GF9094@gamma.logic.tuwien.ac.at>
References: <480622CF.60303@elvenkind.com>
	<20080416163521.GE6680@gamma.logic.tuwien.ac.at>
	<48062ECB.4020402@wxs.nl>
	<20080416165559.GJ6680@gamma.logic.tuwien.ac.at>
	<48063115.9000105@wxs.nl>
	<20080416170815.GM6680@gamma.logic.tuwien.ac.at>
	<20080416172128.GO6680@gamma.logic.tuwien.ac.at>
	<6faad9f00804161056w4c67f606r8b2b4c50e4bbcfe2@mail.gmail.com>
	<20080416185657.GD24108@gamma.logic.tuwien.ac.at>
	<406FB96B-7678-4EC9-9576-5E39D7E0F50B@sil.org>
	<20080417051849.GF9094@gamma.logic.tuwien.ac.at>
Message-ID: <EE29A2FD-FC4E-43D0-B232-5F7F349D2B81@gmail.com>

On 17/04/2008, at 2:48 PM, Norbert Preining wrote:
> And we should at the same time update the necessary packages (is euenc
> and fontspec enough?)

xltxtra has seen a couple of bug fixes too.
That one -is- in the current repository.

W
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2415 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20080417/b5adafe5/attachment-0001.bin 

From wspr81 at gmail.com  Thu Apr 17 08:19:10 2008
From: wspr81 at gmail.com (Will Robertson)
Date: Thu, 17 Apr 2008 15:49:10 +0930
Subject: [dev-context] New context release
In-Reply-To: <20080417053855.GH9094@gamma.logic.tuwien.ac.at>
References: <20080416163521.GE6680@gamma.logic.tuwien.ac.at>
	<48062ECB.4020402@wxs.nl>
	<20080416165559.GJ6680@gamma.logic.tuwien.ac.at>
	<48063115.9000105@wxs.nl>
	<20080416170815.GM6680@gamma.logic.tuwien.ac.at>
	<20080416172128.GO6680@gamma.logic.tuwien.ac.at>
	<6faad9f00804161056w4c67f606r8b2b4c50e4bbcfe2@mail.gmail.com>
	<20080416185657.GD24108@gamma.logic.tuwien.ac.at>
	<6faad9f00804161607g18d006b2j15484afb7612c64a@mail.gmail.com>
	<91B15B62-6254-4326-8977-47BDAE759A35@gmail.com>
	<20080417053855.GH9094@gamma.logic.tuwien.ac.at>
Message-ID: <11DEBFF2-95DA-4A86-9234-A57DA1360636@gmail.com>

On 17/04/2008, at 3:08 PM, Norbert Preining wrote:
> Honestly, I fear to open a pandora's box here.

Bleah, I can see your concern.
Sorry, I didn't know how you went about actually creating this package.

It sounds like it would be easiest to stick with the official releases  
of TeXLive, despite the long-ish lag-time.

W
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2415 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20080417/cacfcff5/attachment-0001.bin 

From jonathan_kew at sil.org  Thu Apr 17 09:53:52 2008
From: jonathan_kew at sil.org (Jonathan Kew)
Date: Thu, 17 Apr 2008 08:53:52 +0100
Subject: [dev-context] New context release
In-Reply-To: <6faad9f00804161709m65a4874y4ccdfa24a702f383@mail.gmail.com>
References: <fe8d59da0804160221x6df87ac3v6b8a1e49a155c598@mail.gmail.com>
	<20080416163521.GE6680@gamma.logic.tuwien.ac.at>
	<48062ECB.4020402@wxs.nl>
	<20080416165559.GJ6680@gamma.logic.tuwien.ac.at>
	<48063115.9000105@wxs.nl>
	<20080416170815.GM6680@gamma.logic.tuwien.ac.at>
	<20080416172128.GO6680@gamma.logic.tuwien.ac.at>
	<6faad9f00804161056w4c67f606r8b2b4c50e4bbcfe2@mail.gmail.com>
	<20080416185657.GD24108@gamma.logic.tuwien.ac.at>
	<406FB96B-7678-4EC9-9576-5E39D7E0F50B@sil.org>
	<6faad9f00804161709m65a4874y4ccdfa24a702f383@mail.gmail.com>
Message-ID: <7E7F608E-86A5-4C94-B725-F89CA1122058@sil.org>


On 17 Apr 2008, at 1:09 am, Mojca Miklavec wrote:

> On Thu, Apr 17, 2008 at 1:42 AM, Jonathan Kew wrote:
>> On 16 Apr 2008, at 7:56 pm, Norbert Preining wrote:
>>
>>  Given that there won't be TL2008 in lenny, I think it would be very
>> desirable to update xetex to a more recent version than 0.996 as  
>> shipped
>> with TL2007.
>
>> (I don't know much about the context situation).
>
> ConTeXt would be happy to have the \supressfontnotfounderror fix
> available (which means: happy to have a binary version of XeTeX later
> than the one in TL 2007),

OK, but for Debian it'll need to be provided as a source patch, we  
can't simply give them a binary.

JK


From jonathan_kew at sil.org  Thu Apr 17 10:22:55 2008
From: jonathan_kew at sil.org (Jonathan Kew)
Date: Thu, 17 Apr 2008 09:22:55 +0100
Subject: [dev-context] New context release
In-Reply-To: <20080417062330.GN9094@gamma.logic.tuwien.ac.at>
References: <20080416165559.GJ6680@gamma.logic.tuwien.ac.at>
	<48063115.9000105@wxs.nl>
	<20080416170815.GM6680@gamma.logic.tuwien.ac.at>
	<20080416172128.GO6680@gamma.logic.tuwien.ac.at>
	<6faad9f00804161056w4c67f606r8b2b4c50e4bbcfe2@mail.gmail.com>
	<20080416185657.GD24108@gamma.logic.tuwien.ac.at>
	<6faad9f00804161607g18d006b2j15484afb7612c64a@mail.gmail.com>
	<91B15B62-6254-4326-8977-47BDAE759A35@gmail.com>
	<20080417053855.GH9094@gamma.logic.tuwien.ac.at>
	<11DEBFF2-95DA-4A86-9234-A57DA1360636@gmail.com>
	<20080417062330.GN9094@gamma.logic.tuwien.ac.at>
Message-ID: <D1014EEA-41CF-4F52-B27D-DDDAAC3771AC@sil.org>

On 17 Apr 2008, at 7:23 am, Norbert Preining wrote:

> On Do, 17 Apr 2008, Will Robertson wrote:
>> Sorry, I didn't know how you went about actually creating this  
>> package.
>
> The packages are created from the actual TeX Live release, or better
> from the security branch of the subversion repository, the tag  
> 2007.1 or
> how it is called.

There's a tag "2007.0", which matches the actual release DVD, and  
there's a "branch2007" which has had a few bug fixes applied (mostly  
bugfixes in xetex, also apparently some security fixes in dviljk).

What I suggest is that I review xetex bug-fixes since the 2007  
release, and back-port the most important ones to branch2007 in TeX  
Live; we can also include the \suppressfontnotfounderror or whatever  
it's called, for the sake of the new context. But we won't try to  
include any of the major new features (like Graphite font support, or  
the new ICU version, etc), which would make for a massive patch.

This would give you a "xetex 0.996-patch2" in Lenny (what's in  
branch2007 is currently 0.996-patch1), should work for both context  
and non-context users, and should be non-invasive as far as the rest  
of TL is concerned.

If I do this, and create a tag "2007.1" in TL with the updated  
branch2007 version, are you able to use this as the base for your  
package? I presume you don't use the actual binaries from TL Master/ 
bin anyway, so what matters is what we have in the source tree.

JK


From preining at logic.at  Thu Apr 17 11:14:58 2008
From: preining at logic.at (Norbert Preining)
Date: Thu, 17 Apr 2008 11:14:58 +0200
Subject: [dev-context] New context release
In-Reply-To: <D1014EEA-41CF-4F52-B27D-DDDAAC3771AC@sil.org>
References: <20080416170815.GM6680@gamma.logic.tuwien.ac.at>
	<20080416172128.GO6680@gamma.logic.tuwien.ac.at>
	<6faad9f00804161056w4c67f606r8b2b4c50e4bbcfe2@mail.gmail.com>
	<20080416185657.GD24108@gamma.logic.tuwien.ac.at>
	<6faad9f00804161607g18d006b2j15484afb7612c64a@mail.gmail.com>
	<91B15B62-6254-4326-8977-47BDAE759A35@gmail.com>
	<20080417053855.GH9094@gamma.logic.tuwien.ac.at>
	<11DEBFF2-95DA-4A86-9234-A57DA1360636@gmail.com>
	<20080417062330.GN9094@gamma.logic.tuwien.ac.at>
	<D1014EEA-41CF-4F52-B27D-DDDAAC3771AC@sil.org>
Message-ID: <20080417091458.GA1289@gamma.logic.tuwien.ac.at>

On Do, 17 Apr 2008, Jonathan Kew wrote:
> If I do this, and create a tag "2007.1" in TL with the updated
> branch2007 version, are you able to use this as the base for your

Of course, that would be great. And if you want to be nice to me, too,
send me a simple diff (svn diff output) of what you did and I am
settled.

> package? I presume you don't use the actual binaries from TL Master/

No, of course not.

> bin anyway, so what matters is what we have in the source tree.

Right.

Big thanks a lot.

That leaves the changes to euenc, fontspec, xltx..., ??? TO do or not
to?

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
CHIPPING ONGAR (n.)
The disgust and embarrassment (or 'ongar') felt by an observer in the
presence of a person festooned with kirbies (q.v.) when they don't
know them well enough to tell them to wipe them off, invariably this
'ongar' is accompanied by an involuntary staccato twitching of the leg
(or 'chipping')
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Thu Apr 17 15:25:53 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 17 Apr 2008 15:25:53 +0200
Subject: [dev-context] mswincontext.zip
In-Reply-To: <op.t9ra5dntnx1yh1@your-b27fb1c401>
References: <op.t9puj3dsnx1yh1@your-b27fb1c401> <48065119.9090508@wxs.nl>
	<op.t9ra5dntnx1yh1@your-b27fb1c401>
Message-ID: <48074FE1.8050104@elvenkind.com>


(redirected from ntg-context)

Idris Samawi Hamid wrote:
>> i could update it ...
> 
> Please do!

I would vastly prefer a "maximal" "new minimal", the goal
is to get rid of the old zips, no?

Cheers,
Taco

From ishamid at colostate.edu  Thu Apr 17 15:40:37 2008
From: ishamid at colostate.edu (Idris Samawi Hamid)
Date: Thu, 17 Apr 2008 07:40:37 -0600
Subject: [dev-context] mswincontext.zip
In-Reply-To: <48074FE1.8050104@elvenkind.com>
References: <op.t9puj3dsnx1yh1@your-b27fb1c401> <48065119.9090508@wxs.nl>
	<op.t9ra5dntnx1yh1@your-b27fb1c401>
	<48074FE1.8050104@elvenkind.com>
Message-ID: <op.t9rb9zeinx1yh1@your-b27fb1c401>

On Thu, 17 Apr 2008 07:25:53 -0600, Taco Hoekwater <taco at elvenkind.com>
wrote:

>
> (redirected from ntg-context)
>
> Idris Samawi Hamid wrote:
>>> i could update it ...
>>
>> Please do!
>
> I would vastly prefer a "maximal" "new minimal", the goal
> is to get rid of the old zips, no?

The way I see it, mswincontext constitutes -- for practical purposes -- a
complete TeX distribution. Instead of updating MiKTeX, TeXLive, etc. I
just update mswincontext quarterly, biannually, etc., or  if and when
things start to go awry. In between I just update current and beta as
needed (sometimes a few times a day ;-) ). mswincontext is my only TeX
distro.

With all the changes in fonts, metrics, etc. it is much more convenient to
have a single maximal than putting the pieces together, or overwriting
files and then tex gets confused about metrics etc...

Best wishes
Idris

-- 
Professor Idris Samawi Hamid, Editor-in-Chief
International Journal of Shi`i Studies
Department of Philosophy
Colorado State University
Fort Collins, CO 80523

--
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From pragma at wxs.nl  Thu Apr 17 15:54:11 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 17 Apr 2008 15:54:11 +0200
Subject: [dev-context] mswincontext.zip
In-Reply-To: <48074FE1.8050104@elvenkind.com>
References: <op.t9puj3dsnx1yh1@your-b27fb1c401>
	<48065119.9090508@wxs.nl>	<op.t9ra5dntnx1yh1@your-b27fb1c401>
	<48074FE1.8050104@elvenkind.com>
Message-ID: <48075683.6020504@wxs.nl>

Taco Hoekwater wrote:
> (redirected from ntg-context)
> 
> Idris Samawi Hamid wrote:
>>> i could update it ...
>> Please do!
> 
> I would vastly prefer a "maximal" "new minimal", the goal
> is to get rid of the old zips, no?

indeed


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Fri Apr 18 11:54:13 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 18 Apr 2008 11:54:13 +0200
Subject: [dev-context] Luatex beta 0.25.3 released
Message-ID: <48086FC5.5020901@elvenkind.com>


Hi all,

I have just uploaded the archives for luatex 0.25.3, yet
another bugfix release to the 0.25 series.

Bugs fixed:
* Pdftex bug no. 936 (sarovar) regarding vertical
   positioning of embedded PDF files if depth parameter is given.
* Luatex gave bogus lua return values for the tex.wd/hd/dp
   values of void boxes
* A few bugfixes in mplib (square pens caused hangs, elliptical
   pens caused confused output)
* Hyphenation of uppercase words (\uchyph) was broken
* Output image placements corrected for all 8 transform cases
   also when artbox etc. is used
* There were missing maketexstring() calls in error messages
* Math display contents were sometimes prematurely freed during
   the placement of the equation number
* Setting \language=-1 could cause crashes due to an array
   index going out-of-bounds

Other news:
* build.sh.ppc is added to the source distribution. This is a
   script that crosscompiles osx ppc binaries from osx intel
* tex.box[<chardef name>] is now supported (but still experimental)
* a bunch of compiler warnings are removed
* The fontforge library now dump AAT feature tags as and
   "<id,flags>" string
* The new function font.nextid() predicts the next assigned font id
* Some source code changes are backported from texlive

The archives (source and binaries) can be downloaded from supelec,
as usual:

      http://foundry.supelec.fr/projects/luatex/

Bugs and feature requests can be added to the issue tracker at

      http://tracker.luatex.org

Have fun,
Taco



From taco at elvenkind.com  Fri Apr 18 15:21:10 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 18 Apr 2008 15:21:10 +0200
Subject: [dev-context] New context release
Message-ID: <4808A046.3010105@elvenkind.com>

Hi,

Hot on the heels of the luatex 0.25.3 release Hans has released
(yet another) new context current (the sixth or seventh this week).

There are a few bugfixes for the mkiv bugs reported yesterday,
but that's about it. If you are curious anyway:

   http://wiki.contextgarden.net/Release_Notes

Unless there is a massive outcry (unlikely), this release goes to
CTAN in less than an hour.

Have fun,
Taco

From preining at logic.at  Fri Apr 18 17:13:51 2008
From: preining at logic.at (Norbert Preining)
Date: Fri, 18 Apr 2008 17:13:51 +0200
Subject: [dev-context] Debian luatex and context
Message-ID: <20080418151351.GF8732@gamma.logic.tuwien.ac.at>

On Fr, 18 Apr 2008, Taco Hoekwater wrote:
> I have just uploaded the archives for luatex 0.25.3, yet

On Fr, 18 Apr 2008, Taco Hoekwater wrote:
> Hot on the heels of the luatex 0.25.3 release Hans has released
> (yet another) new context current (the sixth or seventh this week).


Debian packages:

context (for sid and etch):
	deb http://people.debian.org/~preining/TeX/ context/
	deb-src http://people.debian.org/~preining/TeX/ context/
	
luatex for sid
	deb http://people.debian.org/~preining/TeX/ luatex-sid/
	deb-src http://people.debian.org/~preining/TeX/ luatex-sid/

luatex for etch
	deb http://people.debian.org/~preining/TeX/ luatex/
	deb-src http://people.debian.org/~preining/TeX/ luatex/

Please give it a test try. After some more tests I will upload the stuff
to sid and sid users will get by normal operation.

I tried this combination with my test cases and context/luatex according
to README.MarkIV in the Debian package.


Next release of TeX Live packages will PROBABLY contain updates to
xetex/xdvipdfmx.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
EWELME (n.)
The smile bestowed on you by an air hostess.
			--- Douglas Adams, The Meaning of Liff

From mojca.miklavec.lists at gmail.com  Fri Apr 18 23:55:24 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 18 Apr 2008 23:55:24 +0200
Subject: [dev-context] context stubs
Message-ID: <6faad9f00804181455g7451abc6n96dbf56622df3a8d@mail.gmail.com>

Hello Norbert,

that's not too important (you may ignore it if you want), but there's
one more thing that came to my mind concerning the packaging of
ConTeXt. There is a rather recent context "stub". See
http://minimals.contextgarden.net/current/context/current/scripts/context/stubs/unix/context
(and other files in the same folder). The content is a bit buggy. It
says

#!/bin/sh
mtxrun --script context $@

but should be

#!/bin/sh
mtxrun --script context "$@"

  context filename.tex
is supposed to do almost the same as texexec, except that it calls
luatex by default instead of pdftex. The contents of
scripts/context/stubs/unix, as well as mtxrun and luatools, are
supposed to be present somewhere in binary path. If you think that
it's worth considering that addition (given the fact that you also
have luatex available now), feel free to add it. If not, it's also OK
without it. It might also be that you have already added that, I don't
know as I don't have debian to try it out.

Mojca

From mojca.miklavec.lists at gmail.com  Sat Apr 19 00:51:37 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sat, 19 Apr 2008 00:51:37 +0200
Subject: [dev-context] spaces in filenames
Message-ID: <6faad9f00804181551u647fb77cxfd4760e68f32169f@mail.gmail.com>

Hello Hans & Taco,

one more little problem. If I "install" ConTeXt to "c:\a b\" then
format generation fails for luatex (but works ok for xetex).

Mojca


TeXExec | tex engine path: c:/a b/context/tex/texmf-mswin/web2c/xetex
TeXExec | mps engine path: c:/a b/context/tex/texmf-mswin/web2c
TeXExec |
TeXExec | tex: 19/04/2008 00:32:25 > c:/a
b/context/tex/texmf-mswin/web2c/xetex/cont-en.fmt (4485827)
TeXExec | tex: 19/04/2008 00:32:22 > c:/a
b/context/tex/texmf-mswin/web2c/xetex/cont-nl.fmt (4525855)
TeXExec | mps: 19/04/2008 00:32:26 > c:/a
b/context/tex/texmf-mswin/web2c/metafun.mem (490504)
TeXExec |
TeXExec | runtime: 6.656
report >> run: texexec --make --all --fast --luatex cont-nl metafun cont-en
TeXExec | using search method 'kpsefast'
TeXExec | using existing database
TeXExec | using tex engine luatex
TeXExec | using tex format path c:/a b/context/tex/texmf-mswin/web2c/luatex

TeXExec | generating tex format cont-nl

LuaTools | creating initialization file cont-nl
LuaTools | using library path : c:/a b/context/tex/texmf-context/tex/contex
t/base
LuaTools | using lua libraries: l-string.lua l-lpeg.lua l-table.lua l-boolean.lu
a l-number.lua l-set.lua l-unicode.lua l-md5.lua l-os.lua l-io.lua l-file.lua l-
url.lua l-dir.lua l-utils.lua l-tex.lua luat-env.lua luat-lib.lua luat-inp.lua l
uat-tmp.lua luat-zip.lua luat-tex.lua
LuaTools | using compiled initialization file cont-nl.luc
LuaTools | using lua initialization file cont-nl.luc
LuaTools | running command: luatex --ini --lua="cont-nl.luc" "c:/a
b/context/tex/texmf-context/tex/context/base/cont-nl.tex" \dump
! I can't find file `c:/a.tex'.
<*> c:/a
              b/context/tex/texmf-context/tex/context/base/cont-nl.tex \dump
(Press Enter to retry, or Control-Z to exit)
Please type another input file name:

From pragma at wxs.nl  Sat Apr 19 01:00:18 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Sat, 19 Apr 2008 01:00:18 +0200
Subject: [dev-context] spaces in filenames
In-Reply-To: <6faad9f00804181551u647fb77cxfd4760e68f32169f@mail.gmail.com>
References: <6faad9f00804181551u647fb77cxfd4760e68f32169f@mail.gmail.com>
Message-ID: <48092802.5040703@wxs.nl>

Mojca Miklavec wrote:
> Hello Hans & Taco,
> 
> one more little problem. If I "install" ConTeXt to "c:\a b\" then
> format generation fails for luatex (but works ok for xetex).

> LuaTools | running command: luatex --ini --lua="cont-nl.luc" "c:/a
> b/context/tex/texmf-context/tex/context/base/cont-nl.tex" \dump
> ! I can't find file `c:/a.tex'.
> <*> c:/a
>               b/context/tex/texmf-context/tex/context/base/cont-nl.tex \dump
> (Press Enter to retry, or Control-Z to exit)

hm, so the name is quoted which looks ok to me

what happens if you give the command directly

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From mojca.miklavec.lists at gmail.com  Sat Apr 19 01:20:59 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sat, 19 Apr 2008 01:20:59 +0200
Subject: [dev-context] spaces in filenames
In-Reply-To: <48092802.5040703@wxs.nl>
References: <6faad9f00804181551u647fb77cxfd4760e68f32169f@mail.gmail.com>
	<48092802.5040703@wxs.nl>
Message-ID: <6faad9f00804181620y3e571cf1o3c141f04f6c97218@mail.gmail.com>

On Sat, Apr 19, 2008 at 1:00 AM, Hans Hagen wrote:
> Mojca Miklavec wrote:
> > Hello Hans & Taco,
> >
> > one more little problem. If I "install" ConTeXt to "c:\a b\" then
> > format generation fails for luatex (but works ok for xetex).
> >
>
>
> > LuaTools | running command: luatex --ini --lua="cont-nl.luc" "c:/a
> > b/context/tex/texmf-context/tex/context/base/cont-nl.tex" \dump
> > ! I can't find file `c:/a.tex'.
> > <*> c:/a
> >              b/context/tex/texmf-context/tex/context/base/cont-nl.tex
> \dump
> > (Press Enter to retry, or Control-Z to exit)
> >
>
> hm, so the name is quoted which looks ok to me
>
> what happens if you give the command directly

C:\a b>luatex --ini --lua="cont-nl.luc" "C:/a
b/context/tex/texmf-context/tex/context/base/cont-nl.tex" \dump
Configuration file cont-nl.luc not found

C:\a b>


Actually, it only fails with first-setup.bat. When running it
directly, the names are quoted somehow.

Microsoft Windows XP [razli?ica 5.1.2600]
(C) Copyright 1985-2001 Microsoft Corp.

c:\a b\context\tex>setuptex .
c:\a b\context\tex>luatools --generate

LuaTools | skipping c:/AB0929~1/context/tex/texmf-local/web2c/texmf.cnf
LuaTools | skipping c:/AB0929~1/context/tex/texmf-context/web2c/texmf.cnf
LuaTools | loading c:/AB0929~1/context/tex/texmf/web2c/texmf.cnf
LuaTools | preparing configuration in c:/AB0929~1/context/tex/texmf-cache/luatex
-cache/context/1d418b4630b5e2ca4cc427d550796864/trees/61eb3e3b709bf2a6ab40a1921f
d8e103.tma
LuaTools | saving configuration in c:/AB0929~1/context/tex/texmf-cache/luatex-ca
che/context/1d418b4630b5e2ca4cc427d550796864/trees/61eb3e3b709bf2a6ab40a1921fd8e
103.tma
LuaTools | compiling configuration to c:/AB0929~1/context/tex/texmf-cache/luatex
-cache/context/1d418b4630b5e2ca4cc427d550796864/trees/61eb3e3b709bf2a6ab40a1921f
d8e103.tmc
LuaTools | locating list of c:/AB0929~1/context/tex/texmf-project
LuaTools | locating list of c:/AB0929~1/context/tex/texmf-fonts
LuaTools | locating list of c:/AB0929~1/context/tex/texmf-local
LuaTools | locating list of c:/AB0929~1/context/tex/texmf-mswin
LuaTools | locating list of c:/AB0929~1/context/tex/texmf-context
LuaTools | locating list of c:/AB0929~1/context/tex/texmf-extra
LuaTools | locating list of c:/AB0929~1/context/tex/texmf
LuaTools | scanning path c:/AB0929~1/context/tex/texmf-mswin
LuaTools | 120 files found on 12 directories with 0 uppercase remappings
LuaTools | scanning path c:/AB0929~1/context/tex/texmf-context
LuaTools | 1342 files found on 125 directories with 0 uppercase remappings
LuaTools | scanning path c:/AB0929~1/context/tex/texmf
LuaTools | 3208 files found on 96 directories with 60 uppercase remappings
LuaTools | preparing files in c:/AB0929~1/context/tex/texmf-cache/luatex-cache/c
ontext/1d418b4630b5e2ca4cc427d550796864/trees/dffce2053784706b0a5c84628c04635c.t
ma
LuaTools | saving files in c:/AB0929~1/context/tex/texmf-cache/luatex-cache/cont
ext/1d418b4630b5e2ca4cc427d550796864/trees/dffce2053784706b0a5c84628c04635c.tma
LuaTools | compiling files to c:/AB0929~1/context/tex/texmf-cache/luatex-cache/c
ontext/1d418b4630b5e2ca4cc427d550796864/trees/dffce2053784706b0a5c84628c04635c.t
mc
LuaTools | preparing files in c:/AB0929~1/context/tex/texmf-cache/luatex-cache/c
ontext/1d418b4630b5e2ca4cc427d550796864/trees/4193af225558309a42fa4f5059474345.t
ma
LuaTools | saving files in c:/AB0929~1/context/tex/texmf-cache/luatex-cache/cont
ext/1d418b4630b5e2ca4cc427d550796864/trees/4193af225558309a42fa4f5059474345.tma
LuaTools | compiling files to c:/AB0929~1/context/tex/texmf-cache/luatex-cache/c
ontext/1d418b4630b5e2ca4cc427d550796864/trees/4193af225558309a42fa4f5059474345.t
mc
LuaTools | preparing files in c:/AB0929~1/context/tex/texmf-cache/luatex-cache/c
ontext/1d418b4630b5e2ca4cc427d550796864/trees/1bc1e3f8f11292531524b49b58666fe1.t
ma
LuaTools | saving files in c:/AB0929~1/context/tex/texmf-cache/luatex-cache/cont
ext/1d418b4630b5e2ca4cc427d550796864/trees/1bc1e3f8f11292531524b49b58666fe1.tma
LuaTools | compiling files to c:/AB0929~1/context/tex/texmf-cache/luatex-cache/c
ontext/1d418b4630b5e2ca4cc427d550796864/trees/1bc1e3f8f11292531524b49b58666fe1.t
mc
LuaTools |
LuaTools | runtime: 0.359 seconds







c:\a b\context\tex>texexec --make --lua --fast en
TeXExec | using search method 'kpsefast'
TeXExec | using existing database
TeXExec | using tex engine luatex
TeXExec | using tex format path c:/AB0929~1/context/tex/texmf-mswin/web2c/luatex

TeXExec | generating tex format cont-en

LuaTools | creating initialization file cont-en
LuaTools | using library path : c:/AB0929~1/context/tex/texmf-context/tex/contex
t/base
LuaTools | using lua libraries: l-string.lua l-lpeg.lua l-table.lua l-boolean.lu
a l-number.lua l-set.lua l-unicode.lua l-md5.lua l-os.lua l-io.lua l-file.lua l-
url.lua l-dir.lua l-utils.lua l-tex.lua luat-env.lua luat-lib.lua luat-inp.lua l
uat-tmp.lua luat-zip.lua luat-tex.lua
LuaTools | using compiled initialization file cont-en.luc
LuaTools | using lua initialization file cont-en.luc
LuaTools | running command: luatex --ini --lua="cont-en.luc" "c:/AB0929~1/contex
t/tex/texmf-context/tex/context/base/cont-en.tex" \dump
(c:/AB0929~1/context/tex/texmf-context/tex/context/base/cont-en.tex (c:/AB0929~1
/context/tex/texmf-context/tex/context/base/context.tex (c:/AB0929~1/context/tex
/texmf-context/tex/context/base/syst-pln.tex) (c:/AB0929~1/context/tex/texmf-con
text/tex/context/base/syst-prm.tex) (c:/AB0929~1/context/tex/texmf-context/tex/c
ontext/base/luat-env.tex) (c:/AB0929~1/context/tex/texmf-context/tex/context/bas
e/luat-lib.tex) (c:/AB0929~1/context/tex/texmf-context/tex/context/base/syst-cat
.tex (c:/AB0929~1/context/tex/texmf-context/tex/context/base/syst-cat.mkiv)) (c:
/AB0929~1/context/tex/texmf-context/tex/context/base/syst-etx.tex) (c:/AB0929~1/
context/tex/texmf-context/tex/context/base/syst-pdt.tex) (c:/AB0929~1/context/te
x/texmf-context/tex/context/base/syst-omg.tex) (c:/AB0929~1/context/tex/texmf-co
ntext/tex/context/base/syst-xtx.tex) (c:/AB0929~1/context/tex/texmf-context/tex/
context/base/syst-mtx.tex) (c:/AB0929~1/context/tex/texmf-context/tex/context/ba
se/syst-gen.tex
loading : Context System Macros / General
)

... etc ...

 (c:/AB0929~1/context/tex/texmf-context/tex/context/base/type-tmf.tex) (c:/AB092
9~1/context/tex/texmf-context/tex/context/base/type-siz.tex
bodyfont       : style mm (mm) defined
) (c:/AB0929~1/context/tex/texmf-context/tex/context/base/type-otf.tex))

ConTeXt  ver: 2008.04.18 14:17 MKIV  fmt: 2008.4.19  int: english/english

lua : used config path - c:/AB0929\CCC:5:126 1/context/tex/texmf-local/web2c/tex
mf.cnf;c:/AB0929\CCC:5:126 1/context/tex/texmf-context/web2c/texmf.cnf;c:/AB0929
\CCC:5:126 1/context/tex/texmf/web2c/texmf.cnf
lua : used cache path - c:/AB0929\CCC:5:126 1/context/tex/texmf-cache/luatex-cac
he/context/1d418b4630b5e2ca4cc427d550796864
 )
Beginning to dump on file cont-en.fmt
 (format=cont-en 2008.4.19)
38262 strings of total length 628696
479229 memory locations dumped; current usage is 178&468155
36622 multiletter control sequences
\font\nullfont=nullfont
0 preloaded fonts
mkiv lua stats : used config path          - c:/AB0929~1/context/tex/texmf-local
/web2c/texmf.cnf;c:/AB0929~1/context/tex/texmf-context/web2c/texmf.cnf;c:/AB0929
~1/context/tex/texmf/web2c/texmf.cnf
mkiv lua stats : used cache path           - c:/AB0929~1/context/tex/texmf-cache
/luatex-cache/context/1d418b4630b5e2ca4cc427d550796864
mkiv lua stats : modules/dumps/instances   - 84/0/1
mkiv lua stats : input load time           - 0.016 seconds
mkiv lua stats : fonts load time           - 0.000 seconds
mkiv lua stats : xml load time             - 0.000 seconds, backreferences: 0, o
uter filtering time: 0.000
mkiv lua stats : mps conversion time       - 0.000 seconds
mkiv lua stats : node processing time      - 0.000 seconds (including kernel)
mkiv lua stats : kernel processing time    - 0.000 seconds
mkiv lua stats : attribute processing time - 0.000 seconds
mkiv lua stats : language load time        - 0.000 seconds, n=1
mkiv lua stats : graphics processing time  - 0.000 seconds, n=0 (including tex)
mkiv lua stats : metapost processing time  - 0.000 seconds, loading: 0.000 secon
ds, execution: 0.000 seconds, n: 0
mkiv lua stats : current memory usage      - 23970725 bytes
mkiv lua stats : cleaned up reserved nodes - 0 nodes, 8 lists of 100
mkiv lua stats : node memory usage         - 13 glue_spec, 1 dir
mkiv lua stats : loaded patterns           - none
mkiv lua stats : loaded fonts              - none
mkiv lua stats : runtime                   - 6.922 seconds, 0 processed pages, 0
 shipped pages, 0.000 pages/second


LuaTools |
LuaTools | runtime: 7.328 secondsTeXExec | no lua compilations needed
TeXExec |
TeXExec | tex engine path: c:/AB0929~1/context/tex/texmf-mswin/web2c/luatex
TeXExec |
TeXExec |
TeXExec | runtime: 7.438

c:\a b\context\tex>

From preining at logic.at  Sat Apr 19 11:00:37 2008
From: preining at logic.at (Norbert Preining)
Date: Sat, 19 Apr 2008 11:00:37 +0200
Subject: [dev-context] context stubs
In-Reply-To: <6faad9f00804181455g7451abc6n96dbf56622df3a8d@mail.gmail.com>
References: <6faad9f00804181455g7451abc6n96dbf56622df3a8d@mail.gmail.com>
Message-ID: <20080419090037.GO5748@gamma.logic.tuwien.ac.at>

HI Mojca,

On Fr, 18 Apr 2008, Mojca Miklavec wrote:
> one more thing that came to my mind concerning the packaging of
> ConTeXt. There is a rather recent context "stub". See

The Debian package installs the all the stubs found in 
	scripts/context/stubs/unix/
i.e.:

context   makempy   pdftools	  rlxtools  texfind  textools  xmltools
ctxtools  mpstools  pdftrimwhite  runtools  texfont  texutil
exatools  mptopdf   pstopdf	  texexec   texshow  tmftools


> #!/bin/sh
> mtxrun --script context $@
> 
> but should be
> 
> #!/bin/sh
> mtxrun --script context "$@"

Ok, I will patch that in, thanks for reminding me.

> luatex by default instead of pdftex. The contents of
> scripts/context/stubs/unix, as well as mtxrun and luatools, are
> supposed to be present somewhere in binary path. If you think that

They are, copied to /usr/bin.

Is there any other change to the stubs necessary?

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
He expanded his chest to make it totally clear that here
was the sort of man you only dared to cross if you had a
team of Sherpas with you.
                 --- Douglas Adams, The Hitchhikers Guide to the Galaxy

From preining at logic.at  Sat Apr 19 11:09:23 2008
From: preining at logic.at (Norbert Preining)
Date: Sat, 19 Apr 2008 11:09:23 +0200
Subject: [dev-context] context stubs
In-Reply-To: <20080419090037.GO5748@gamma.logic.tuwien.ac.at>
References: <6faad9f00804181455g7451abc6n96dbf56622df3a8d@mail.gmail.com>
	<20080419090037.GO5748@gamma.logic.tuwien.ac.at>
Message-ID: <20080419090923.GP5748@gamma.logic.tuwien.ac.at>

On Sa, 19 Apr 2008, Norbert Preining wrote:
> Ok, I will patch that in, thanks for reminding me.

Fixed packages are on the previous location, please reinstall.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
CORFU (n.)
The dullest person you met during the course of your holiday. Also the
only one who failed to understand that the exchanging of addresses at
the end of a holiday is merely a social ritual and is absolutely not
an invitation to phone you up and turn up unannounced on your doorstep
three months later.
			--- Douglas Adams, The Meaning of Liff

From pragma at wxs.nl  Sat Apr 19 15:18:29 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Sat, 19 Apr 2008 15:18:29 +0200
Subject: [dev-context] spaces in filenames
In-Reply-To: <6faad9f00804181620y3e571cf1o3c141f04f6c97218@mail.gmail.com>
References: <6faad9f00804181551u647fb77cxfd4760e68f32169f@mail.gmail.com>	
	<48092802.5040703@wxs.nl>
	<6faad9f00804181620y3e571cf1o3c141f04f6c97218@mail.gmail.com>
Message-ID: <4809F125.9040602@wxs.nl>

Mojca Miklavec wrote:

>> what happens if you give the command directly
> 
> C:\a b>luatex --ini --lua="cont-nl.luc" "C:/a
> b/context/tex/texmf-context/tex/context/base/cont-nl.tex" \dump
> Configuration file cont-nl.luc not found

you need to be on the format path ... such is tex

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From patrick at gundla.ch  Sat Apr 19 20:57:56 2008
From: patrick at gundla.ch (Patrick Gundlach)
Date: Sat, 19 Apr 2008 20:57:56 +0200
Subject: [dev-context] cont-en.xml and alike
Message-ID: <m07ietsmdn.fsf@levana.de>

Hi,

how is cont-en.xml and the related files currently maintained? Is this
file created of some other file or is it updated manually?

What are the current applications that use the xml-files?

Patrick
-- 
ConTeXt wiki and more: http://contextgarden.net

From pragma at wxs.nl  Sat Apr 19 22:27:48 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Sat, 19 Apr 2008 22:27:48 +0200
Subject: [dev-context] cont-en.xml and alike
In-Reply-To: <m07ietsmdn.fsf@levana.de>
References: <m07ietsmdn.fsf@levana.de>
Message-ID: <480A55C4.8080700@wxs.nl>

Patrick Gundlach wrote:
> Hi,
> 
> how is cont-en.xml and the related files currently maintained? Is this
> file created of some other file or is it updated manually?

manual (it would make sense to merge it in the sources but ..)

> What are the current applications that use the xml-files?

reference list, manuals, wiki

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From patrick at gundla.ch  Sat Apr 19 22:44:30 2008
From: patrick at gundla.ch (Patrick Gundlach)
Date: Sat, 19 Apr 2008 22:44:30 +0200
Subject: [dev-context] cont-en.xml and alike
In-Reply-To: <480A55C4.8080700@wxs.nl> (Hans Hagen's message of "Sat\,
	19 Apr 2008 22\:27\:48 +0200")
References: <m07ietsmdn.fsf@levana.de> <480A55C4.8080700@wxs.nl>
Message-ID: <m03aphshg1.fsf@levana.de>

Hello Hans,

> manual (it would make sense to merge it in the sources but ..)

good to know, so any changes can be made to the xml (in xml format...)

>> What are the current applications that use the xml-files?
>
> reference list, manuals, wiki

So you also use the "advanced" feature with the cd:define keys? I
recently came across a problem there, but I can't remember which it
was, I'll try and find out again.

Patrick
-- 
ConTeXt wiki and more: http://contextgarden.net

From pragma at wxs.nl  Sat Apr 19 22:50:43 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Sat, 19 Apr 2008 22:50:43 +0200
Subject: [dev-context] cont-en.xml and alike
In-Reply-To: <m03aphshg1.fsf@levana.de>
References: <m07ietsmdn.fsf@levana.de> <480A55C4.8080700@wxs.nl>
	<m03aphshg1.fsf@levana.de>
Message-ID: <480A5B23.4070605@wxs.nl>

Patrick Gundlach wrote:
> Hello Hans,
> 
>> manual (it would make sense to merge it in the sources but ..)
> 
> good to know, so any changes can be made to the xml (in xml format...)

sure, just always take the latest and i can take the new one

>>> What are the current applications that use the xml-files?
>> reference list, manuals, wiki
> 
> So you also use the "advanced" feature with the cd:define keys? I
> recently came across a problem there, but I can't remember which it
> was, I'll try and find out again.

ok

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Sat Apr 19 23:42:06 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 19 Apr 2008 23:42:06 +0200
Subject: [dev-context] cont-en.xml and alike
In-Reply-To: <m07ietsmdn.fsf@levana.de>
References: <m07ietsmdn.fsf@levana.de>
Message-ID: <480A672E.1020404@elvenkind.com>

Patrick Gundlach wrote:
> Hi,
> 
> how is cont-en.xml and the related files currently maintained? Is this
> file created of some other file or is it updated manually?
> 
> What are the current applications that use the xml-files?

texshow.pl also

From patrick at gundla.ch  Sun Apr 20 09:43:44 2008
From: patrick at gundla.ch (Patrick Gundlach)
Date: Sun, 20 Apr 2008 09:43:44 +0200
Subject: [dev-context] cont-en.xml and alike
In-Reply-To: <480A5B23.4070605@wxs.nl> (Hans Hagen's message of "Sat\,
	19 Apr 2008 22\:50\:43 +0200")
References: <m07ietsmdn.fsf@levana.de> <480A55C4.8080700@wxs.nl>
	<m03aphshg1.fsf@levana.de> <480A5B23.4070605@wxs.nl>
Message-ID: <m0tzhxq8cv.fsf@levana.de>

Hi,

>> So you also use the "advanced" feature with the cd:define keys? I
>> recently came across a problem there, but I can't remember which it
>> was, I'll try and find out again.

symalign references symalign, which is not defined.

     <cd:parameter name="symalign">
        <cd:resolve name="symalign"/>
      </cd:parameter>

in setupitemgroup, line 6072.


How do you handle such cases in the references? In texshow.pl?

Has anybody created a schematron rule for that yet?

Patrick
-- 
ConTeXt wiki and more: http://contextgarden.net

From taco at elvenkind.com  Sun Apr 20 09:53:54 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 20 Apr 2008 09:53:54 +0200
Subject: [dev-context] cont-en.xml and alike
In-Reply-To: <m0tzhxq8cv.fsf@levana.de>
References: <m07ietsmdn.fsf@levana.de>
	<480A55C4.8080700@wxs.nl>	<m03aphshg1.fsf@levana.de>
	<480A5B23.4070605@wxs.nl> <m0tzhxq8cv.fsf@levana.de>
Message-ID: <480AF692.9060803@elvenkind.com>

Patrick Gundlach wrote:
> Hi,
> 
>>> So you also use the "advanced" feature with the cd:define keys? I
>>> recently came across a problem there, but I can't remember which it
>>> was, I'll try and find out again.
> 
> symalign references symalign, which is not defined.
> 
>      <cd:parameter name="symalign">
>         <cd:resolve name="symalign"/>
>       </cd:parameter>
> 
> in setupitemgroup, line 6072.
> 
> 
> How do you handle such cases in the references? In texshow.pl?

In texshow.pl, this generates a display error:

  align=inner|outer|left|right|flushleft|flushright|middle....
  symalign=,
  indentnext=yes|no]


> Has anybody created a schematron rule for that yet?
> 
> Patrick


From patrick at gundla.ch  Sun Apr 20 10:09:01 2008
From: patrick at gundla.ch (Patrick Gundlach)
Date: Sun, 20 Apr 2008 10:09:01 +0200
Subject: [dev-context] cont-en.xml and alike
In-Reply-To: <480AF692.9060803@elvenkind.com> (Taco Hoekwater's message of
	"Sun\, 20 Apr 2008 09\:53\:54 +0200")
References: <m07ietsmdn.fsf@levana.de> <480A55C4.8080700@wxs.nl>
	<m03aphshg1.fsf@levana.de> <480A5B23.4070605@wxs.nl>
	<m0tzhxq8cv.fsf@levana.de> <480AF692.9060803@elvenkind.com>
Message-ID: <m0prslq76q.fsf@levana.de>

Hi,

>> How do you handle such cases in the references? In texshow.pl?
>
> In texshow.pl, this generates a display error:
>
>  align=inner|outer|left|right|flushleft|flushright|middle....
>  symalign=,
>  indentnext=yes|no]

OK, so it's not just me :)

Any suggestions on how to prevent this in advance? I am currently
thinking of an update of texshow-web and I am experimenting a bit on
how to keep the contents (list of commands) updated. If the integrity
of the xml-file is lost, updates are difficult. 

Hans, are you using some kind of validation tool for the cont-??.xml
files?

Patrick

-- 
ConTeXt wiki and more: http://contextgarden.net

From patrick at gundla.ch  Sun Apr 20 21:08:50 2008
From: patrick at gundla.ch (Patrick Gundlach)
Date: Sun, 20 Apr 2008 21:08:50 +0200
Subject: [dev-context] cont-en question
Message-ID: <m0lk38qr7h.fsf@levana.de>

Hi,

I guess I'll start bugging you about cont-en.xml more often now. 

installlanguage has a type attribute in cd:constant

   <cd:keywords>
      <cd:constant type="cd:name"/>
    </cd:keywords>

in resettextcontent there is a name attribute:

    <cd:keywords optional="yes">
      <cd:constant name="lefttext"/>
      <cd:constant name="middletext"/>
      <cd:constant name="righttext"/>
    </cd:keywords>

What is the difference? It could make sense to have 

 * "type" for a class like attribute, eg. a name, that is a string of
   characters that may not contain spaces, funny accents etc
 * "name" for a keyword. 

But the point is, that the "name" attribute is only in
"resettextcontent". Bug or feature?

Patrick

-- 
ConTeXt wiki and more: http://contextgarden.net

From taco at elvenkind.com  Mon Apr 21 15:30:37 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 21 Apr 2008 15:30:37 +0200
Subject: [dev-context] cont-en question
In-Reply-To: <m0lk38qr7h.fsf@levana.de>
References: <m0lk38qr7h.fsf@levana.de>
Message-ID: <480C96FD.2000104@elvenkind.com>



Patrick Gundlach wrote:
> Hi,
> 
> I guess I'll start bugging you about cont-en.xml more often now. 
> 
> installlanguage has a type attribute in cd:constant
> 
>    <cd:keywords>
>       <cd:constant type="cd:name"/>
>     </cd:keywords>

> in resettextcontent there is a name attribute:
> 
>     <cd:keywords optional="yes">
>       <cd:constant name="lefttext"/>
>       <cd:constant name="middletext"/>
>       <cd:constant name="righttext"/>
>     </cd:keywords>
> 
> What is the difference? It could make sense to have 

I think this is a typo or the effect of an incorrect mutation.
cd:constant's have types, and cd:inherit's have names, afaik.



From patrick at gundla.ch  Wed Apr 23 19:11:37 2008
From: patrick at gundla.ch (Patrick Gundlach)
Date: Wed, 23 Apr 2008 19:11:37 +0200
Subject: [dev-context] cont-en.xml and alike
In-Reply-To: <m0tzhxq8cv.fsf@levana.de> (Patrick Gundlach's message of "Sun\,
	20 Apr 2008 09\:43\:44 +0200")
References: <m07ietsmdn.fsf@levana.de> <480A55C4.8080700@wxs.nl>
	<m03aphshg1.fsf@levana.de> <480A5B23.4070605@wxs.nl>
	<m0tzhxq8cv.fsf@levana.de>
Message-ID: <m0abjkqywm.fsf@levana.de>

Hi,

could this:

> symalign references symalign, which is not defined.
>
>      <cd:parameter name="symalign">
>         <cd:resolve name="symalign"/>
>       </cd:parameter>

> in setupitemgroup, line 6072.

and


>    <cd:keywords optional="yes">
>      <cd:constant name="lefttext"/>
>      <cd:constant name="middletext"/>
>      <cd:constant name="righttext"/>
>    </cd:keywords>

(substitute name with type) 

be fixed? Or is this already done?

Thanks

Patrick


-- 
ConTeXt wiki and more: http://contextgarden.net

From pragma at wxs.nl  Wed Apr 23 19:21:38 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 23 Apr 2008 19:21:38 +0200
Subject: [dev-context] cont-en.xml and alike
In-Reply-To: <m0abjkqywm.fsf@levana.de>
References: <m07ietsmdn.fsf@levana.de>
	<480A55C4.8080700@wxs.nl>	<m03aphshg1.fsf@levana.de>
	<480A5B23.4070605@wxs.nl>	<m0tzhxq8cv.fsf@levana.de>
	<m0abjkqywm.fsf@levana.de>
Message-ID: <480F7022.3030603@wxs.nl>

Patrick Gundlach wrote:
> Hi,
> 
> could this:
> 
>> symalign references symalign, which is not defined.
>>
>>      <cd:parameter name="symalign">
>>         <cd:resolve name="symalign"/>
>>       </cd:parameter>
> 
>> in setupitemgroup, line 6072.
> 
> and
> 
> 
>>    <cd:keywords optional="yes">
>>      <cd:constant name="lefttext"/>
>>      <cd:constant name="middletext"/>
>>      <cd:constant name="righttext"/>
>>    </cd:keywords>
> 
> (substitute name with type) 
> 
> be fixed? Or is this already done?

just fix what needs fixing and send me the new file unless you don't 
know what to fix -)


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From mojca.miklavec.lists at gmail.com  Fri May  9 14:16:33 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 9 May 2008 14:16:33 +0200
Subject: [dev-context] texmfstart & MikTeX
In-Reply-To: <6faad9f00805090345r148da82ay5b2684376f1f96d@mail.gmail.com>
References: <6faad9f00805090345r148da82ay5b2684376f1f96d@mail.gmail.com>
Message-ID: <6faad9f00805090516v9fa0f68ufe3779908e4c811@mail.gmail.com>

Hello,

it seems that there's a problem with finding texexec.rb in MikTeX:


c:\temp\mojca\docs>texmfstart --verbose texexec
texmfstart version 2.0.3
expanding 'texexec' to 'texexec.rb'
locating 'texexec.rb' in current path '.'
locating 'texexec.rb' in caller path './../ruby'
kpse     : direct (fallback)
fatal error: undefined method `progname=' for nil:NilClass
texmfstart.rb:678:in `find'
texmfstart.rb:1230:in `execute'
texmfstart.rb:981:in `process'
texmfstart.rb:1224:in `execute'
texmfstart.rb:1249
unable to locate program

execution failed



In contrast:
----------------

c:\temp\mojca\docs>ruby "C:\Program Files\MiKTeX 2.7\scripts\context\ruby\texmfs
tart.rb" --verbose texexec a
texmfstart version 2.0.3
expanding 'texexec' to 'texexec.rb'
locating 'texexec.rb' in current path '.'
locating 'texexec.rb' in caller path 'C:/Program Files/MiKTeX 2.7/scripts/contex
t/ruby'
registering 'texexec' as 'C:/Program Files/MiKTeX 2.7/scripts/context/ruby/texex
ec.rb'
'texexec.rb' located in caller path
registering 'THREAD' as 'C:/PROGRA~1/MIKTEX~1.7/scripts/context/ruby'
starting texexec
using 'system' call: ruby C:/PROGRA~1/MIKTEX~1.7/scripts/context/ruby/texexec.rb
  a
TeXExec | processing document 'a'
TeXExec | no ctx file found
TeXExec | tex processing method: context
TeXExec | TeX run 1
TeXExec | writing option file a.top
TeXExec | using randomseed 1233
TeXExec | tex engine: pdftex
TeXExec | tex format: cont-en
This is pdfTeX, Version 3.141592-1.40.4 (MiKTeX 2.7)
Running pdftex...
This is pdfTeX, Version 3.141592-1.40.4 (MiKTeX 2.7) (INITEX)
entering extended mode


systems         : system commands are disabled
("C:\Program Files\MiKTeX 2.7\tex\context\base\pdfr-def.tex")
systems         : begin file a at line 1
TeXExec | runtime: 20.547

[here, pdfTeX crashes]

execution failed

c:\temp\mojca\docs>

From preining at logic.at  Tue May 13 13:30:27 2008
From: preining at logic.at (Norbert Preining)
Date: Tue, 13 May 2008 13:30:27 +0200
Subject: [dev-context] (fwd) Bug#480725: mptopdf does not work with
	beginfig(-1)
Message-ID: <20080513113027.GC13906@gamma.logic.tuwien.ac.at>

forwarded 480725 dev-context at ntg.nl
thanks

Dear Hans, dear Taco,

on the Debian side we got the attached bug report together with a patch
for mptopdf.pl. Can you comment on it, or consider it for inclusion?

Thanks and all the best

Norbert

Please leave 480725 at bugs.debian.org on the Cc list, thanks

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
DARENTH (n.)
Measure = 0.0000176 mg. Defined as that amount of margarine capable of
covering one hundred slices of bread to the depth of one
molecule. This is the legal maximum allowed in sandwich bars in
Greater London.
			--- Douglas Adams, The Meaning of Liff
-------------- next part --------------
An embedded message was scrubbed...
From: Martin Peylo <debian at izac.de>
Subject: Bug#480725: mptopdf does not work with beginfig(-1)
Date: Sun, 11 May 2008 20:50:01 +0200
Size: 8697
Url: http://www.ntg.nl/mailman/private/dev-context/attachments/20080513/d7d147b7/attachment.mht 

From taco at elvenkind.com  Thu May 15 09:49:06 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 15 May 2008 09:49:06 +0200
Subject: [dev-context] (fwd) Bug#480725: mptopdf does not work
	with	beginfig(-1)
In-Reply-To: <20080513113027.GC13906@gamma.logic.tuwien.ac.at>
References: <20080513113027.GC13906@gamma.logic.tuwien.ac.at>
Message-ID: <482BEAF2.4010707@elvenkind.com>


Hi Norbert,

Norbert Preining wrote:
> forwarded 480725 dev-context at ntg.nl
> thanks
> 
> Dear Hans, dear Taco,
> 
> on the Debian side we got the attached bug report together with a patch
> for mptopdf.pl. Can you comment on it, or consider it for inclusion?

The patch would have to be a bit elaborated on before inclusion
can be considered, I believe. A random file named <whatever>.ps
is highly likely not to be metapost output at all. The extra
functionality would be cool to have, but mptopdf had better check
if the .ps really was created by metapost (by grepping for the
%%Creator comment).

Best wishes,
Taco

From mojca.miklavec.lists at gmail.com  Thu May 15 20:27:10 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Thu, 15 May 2008 20:27:10 +0200
Subject: [dev-context] little "bug" in French hyphenation patterns conversion
Message-ID: <6faad9f00805151127p7a048619m5eb74bfe60e058fb@mail.gmail.com>

Hello Hans,

there is a little bug in conversion of French hyphenation patterns in ctxtools.

I guess that these two patterns
    1c\oe0 % final zero essential to terminate cs
    \n{1c\oeOT} % for \oe in OT1 _and_ T1 font encoding
should result in a single pattern
    1n?
while it results in two weird patterns:
    1n?0
    1n?OT
\oe is converted into ? instead of ? (are there any similar bugs as
well?), 0 can probably be removed, \n{...} should probably be ignored
and \oeOT should be ... well, it's inside of \n anyway, so it doesn't
really matter what you do with it as long as you remove the pattern,
but definitely it should not result in uppercase OT.

Mojca

From arthur.reutenauer at normalesup.org  Thu May 15 21:53:17 2008
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Thu, 15 May 2008 21:53:17 +0200
Subject: [dev-context] little "bug" in French hyphenation
	patterns	conversion
In-Reply-To: <6faad9f00805151127p7a048619m5eb74bfe60e058fb@mail.gmail.com>
References: <6faad9f00805151127p7a048619m5eb74bfe60e058fb@mail.gmail.com>
Message-ID: <20080515195317.GI22194@phare.normalesup.org>

> I guess that these two patterns
>     1c\oe0 % final zero essential to terminate cs
>     \n{1c\oeOT} % for \oe in OT1 _and_ T1 font encoding
> should result in a single pattern
>     1n?

  Yes, indeed; there are quite a few such patterns.  Good spot!

	Arthur

From preining at logic.at  Mon May 19 08:58:21 2008
From: preining at logic.at (Norbert Preining)
Date: Mon, 19 May 2008 08:58:21 +0200
Subject: [dev-context] context program, mtxrun question?
Message-ID: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>

Hi everyone,

aehmmm, looks nice, but

# let us see how the context wrapper looks like:
$ cat /usr/bin/context
#!/bin/sh

mtxrun --script context "$@"

# now see what mtxrun does ...
$ mtxrun --script context  foobar

MtxRun | unknown script: context
$


Well not surprising ... there is NO context script anywhere in the
distribution!

Am I missing something?

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
NOTTAGE (n.)
Nottage is the collective name for things which you find a use for
immediately after you've thrown them away. For instance, your
greenhouse has been cluttered up for years with a huge piece of
cardboard and great fronds of gardening string. You at last decide to
clear all this stuff out, and you burn it. Within twenty-four hours
you will urgently need to wrap a large parcel, and suddenly remember
that luckily in your greenhouse there is some cardb...
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Mon May 19 09:03:51 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 19 May 2008 09:03:51 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>
Message-ID: <48312657.8030206@elvenkind.com>

Norbert Preining wrote:
> 
> Well not surprising ... there is NO context script anywhere in the
> distribution!
> 
> Am I missing something?

The script is:

   scripts/context/lua/mtx-context.lua

If mtxrun cannot find it, something went wrong running

   luatools --generate

Best wishes,
Taco

From mojca.miklavec.lists at gmail.com  Mon May 19 09:50:10 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Mon, 19 May 2008 09:50:10 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48312657.8030206@elvenkind.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>
	<48312657.8030206@elvenkind.com>
Message-ID: <6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>

On Mon, May 19, 2008 at 9:03 AM, Taco Hoekwater wrote:
> Norbert Preining wrote:
>>
>> Well not surprising ... there is NO context script anywhere in the
>> distribution!
>>
>> Am I missing something?
>
> The script is:
>
>   scripts/context/lua/mtx-context.lua
>
> If mtxrun cannot find it, something went wrong running
>
>   luatools --generate

It seems to me that this is actually a yet unanswered FAQ:
- the thread about AucTeX on ntg-context
- Oliver asked me about how to run LuaTeX without having to set any
environmental variables except for PATH adjustment; that would make
the mac installer much easier to cope with - in most TeX
distributions, one simply puts texmf.cnf somewhere above the binary
(selfautoparent trickery), and then everything works out of the box
- similar question raised by Vyatcheslav for Windows
- I often have problems in my editor; if I launch it from terminal
with proper environmental variables set, then it works OK, but if I
want to launch it from menu, then it sometimes works and sometimes not
(some weird interference with the existing distribution, in most cases
it just doesn't find the cont-en.fmt and stops there already)

I just wanted to raise the question as it appears in just every
installation of TeX where one wants to use ConTeXt with LuaTeX.

As long as one runs
    source setuptex
in minimals, or
    source ~/.luatex
in Thomas' instructions of hard-coded paths then LuaTeX runs OK, but
if one would like to run LuaTeX without explicitly setting
environmental variables (problematic within TeX editors), one soon
runs into problems.

Minimals contain texmf.cnf hidden somewhere in the tree. But even if I
put in in the top folder, it doesn't help much. Hans also uses
setuptex.tmf for reading settings with LuaTeX in some way, but again,
it doesn't happen automatically.

Jonathan Kew also told me that it should be enough to have a proper
version of texmf.cnf in the top folder, and then setting PATH to
include binaries should be enough. LuaTeX now works on standalone
ConTeXt installation for more than a year, but it would be nice to
make it work on Debian, TeX Live, MikTeX (that will soon provide it)
... as well.

Any ideas if getting rid of dependency on environmental variables is doable?

Mojca

PS: ping hans at miktex

From taco at elvenkind.com  Mon May 19 10:02:50 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 19 May 2008 10:02:50 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>	
	<48312657.8030206@elvenkind.com>
	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>
Message-ID: <4831342A.4050109@elvenkind.com>



Mojca Miklavec wrote:
> 
> Any ideas if getting rid of dependency on environmental variables is doable?

I agree it would be great if mtxrun could call/do setuptex on itself
if needed.

From preining at logic.at  Mon May 19 10:17:25 2008
From: preining at logic.at (Norbert Preining)
Date: Mon, 19 May 2008 10:17:25 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48312657.8030206@elvenkind.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>
	<48312657.8030206@elvenkind.com>
Message-ID: <20080519081725.GG17709@gamma.logic.tuwien.ac.at>

On Mo, 19 Mai 2008, Taco Hoekwater wrote:
> If mtxrun cannot find it, something went wrong running
> 
>   luatools --generate

Arggg... does that mean that anyone wanting to use simply
	context
as a program as to set up all the luatex/context stuff, with independent
database etc etc?

That is a pain.

Again, you should definitely implement some level of global setup
possibility!!! 

Either you want context in distributions, or we forget about that and
ask people to install context by themselves! It is impossible to setup a
context installation for MkIV in a decent way on a multi-user system. It
is simply *impossible* ATM. 

I already suggested several times that there is a *system*wide*
luatex-cache which can be updated/regenerated everytime a distribution
package installs new files, very similar to mktexlsr.

Currently, every Debian package (and same with SuSE, RedHat, ...)
installing files into any TEXMFTREE afterwards calls mktexlsr so that
the files are available for any user.

Now that is *really* broken on context.

Again, if you want to be a system for strictly *single*user* systems,
please let me know and I will remove context from Debian ...

And probably from TeX Live, too. It cannot work like this.



AHHh, enough of my frustrated flames. Please don't take it personally.
But I have written again and again about that, and it seems nobody seems
to care nor to listen.


Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
`This must be Thursday,' said Arthur to himself, sinking
low over his beer, `I never could get the hang of
Thursdays.'
                 --- Arthur, on what was to be his last Thursday on Earth.
                 --- Douglas Adams, The Hitchhikers Guide to the Galaxy

From preining at logic.at  Mon May 19 10:20:05 2008
From: preining at logic.at (Norbert Preining)
Date: Mon, 19 May 2008 10:20:05 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>
	<48312657.8030206@elvenkind.com>
	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>
Message-ID: <20080519082005.GH17709@gamma.logic.tuwien.ac.at>

On Mo, 19 Mai 2008, Mojca Miklavec wrote:
> Any ideas if getting rid of dependency on environmental variables is doable?

And please also of that *stupid* user-specific luatex-cache. There must
be a way to run-time merge a system-wide luatex-cache with a
luatex-cache only for the user files.

like mktexlsr. Please do NOT reinvent the wheel formed like a
rectangle... see my other email.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
The story goes that I first had the idea for THHGTTG while
lying drunk in a field in Innsbruck (or `Spain' as the BBC
TV publicity department authorititively has it, probably
because it's easier to spell).
                 --- Foreward by DNA.
                 --- Douglas Adams, The Hitchhikers Guide to the Galaxy

From pragma at wxs.nl  Mon May 19 10:24:56 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 19 May 2008 10:24:56 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>	<48312657.8030206@elvenkind.com>
	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>
Message-ID: <48313958.3050601@wxs.nl>

Mojca Miklavec wrote:
> On Mon, May 19, 2008 at 9:03 AM, Taco Hoekwater wrote:
>> Norbert Preining wrote:
>>> Well not surprising ... there is NO context script anywhere in the
>>> distribution!
>>>
>>> Am I missing something?
>> The script is:
>>
>>   scripts/context/lua/mtx-context.lua
>>
>> If mtxrun cannot find it, something went wrong running
>>
>>   luatools --generate
> 
> It seems to me that this is actually a yet unanswered FAQ:
> - the thread about AucTeX on ntg-context

dunno, i never used emacs

> - Oliver asked me about how to run LuaTeX without having to set any
> environmental variables except for PATH adjustment; that would make
> the mac installer much easier to cope with - in most TeX
> distributions, one simply puts texmf.cnf somewhere above the binary
> (selfautoparent trickery), and then everything works out of the box

i've come to hate this autofoo trickery since there is no resl standard 
and whatever one cooks up eventually something else happens

> - similar question raised by Vyatcheslav for Windows

it would ne no problem if we could be sure that the binary lives 
relative to the tree (same for cnf file) but there is no clear policy 
for this (for instance on linux a cnf file can live somewhere under etc 
too)

> - I often have problems in my editor; if I launch it from terminal
> with proper environmental variables set, then it works OK, but if I
> want to launch it from menu, then it sometimes works and sometimes not
> (some weird interference with the existing distribution, in most cases
> it just doesn't find the cont-en.fmt and stops there already)
> 
> I just wanted to raise the question as it appears in just every
> installation of TeX where one wants to use ConTeXt with LuaTeX.
> 
> As long as one runs
>     source setuptex
> in minimals, or
>     source ~/.luatex
> in Thomas' instructions of hard-coded paths then LuaTeX runs OK, but
> if one would like to run LuaTeX without explicitly setting
> environmental variables (problematic within TeX editors), one soon
> runs into problems.

mtxrun --tree=<pathtotree> should work

given that there is a setuptex.tmf file there

> Minimals contain texmf.cnf hidden somewhere in the tree. But even if I
> put in in the top folder, it doesn't help much. Hans also uses
> setuptex.tmf for reading settings with LuaTeX in some way, but again,
> it doesn't happen automatically.

indeed, since there is no robust way to locate it

> Jonathan Kew also told me that it should be enough to have a proper
> version of texmf.cnf in the top folder, and then setting PATH to
> include binaries should be enough. LuaTeX now works on standalone
> ConTeXt installation for more than a year, but it would be nice to
> make it work on Debian, TeX Live, MikTeX (that will soon provide it)
> .... as well.
> 
> Any ideas if getting rid of dependency on environmental variables is doable?

i keep thinking about it but i'm not in the mood to implement a messy 
fuzzy logic solution thet eventually will bite us

for instance, can you cook up a list of locations for each platform that 
is guaranteed correct? (no problem for the minimals probably)


> PS: ping hans at miktex

hm

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Mon May 19 10:27:57 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 19 May 2008 10:27:57 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>
Message-ID: <48313A0D.7090005@wxs.nl>

Norbert Preining wrote:
> Hi everyone,
> 
> aehmmm, looks nice, but
> 
> # let us see how the context wrapper looks like:
> $ cat /usr/bin/context
> #!/bin/sh
> 
> mtxrun --script context "$@"
> 
> # now see what mtxrun does ...
> $ mtxrun --script context  foobar
> 
> MtxRun | unknown script: context
> $
> 
> 
> Well not surprising ... there is NO context script anywhere in the
> distribution!
> 
> Am I missing something?

it's mtx-context.lua

the --script looks for:

   (mtx-)context(s).lua

in the current path or in the file database


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From oliver.buerschaper at mpq.mpg.de  Mon May 19 10:33:33 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Mon, 19 May 2008 10:33:33 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <4831342A.4050109@elvenkind.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>	
	<48312657.8030206@elvenkind.com>
	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>
	<4831342A.4050109@elvenkind.com>
Message-ID: <CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>

>> Any ideas if getting rid of dependency on environmental variables  
>> is doable?
>
> I agree it would be great if mtxrun could call/do setuptex on itself
> if needed.

At the moment for me it would be enough to know where exactly LuaTeX  
looks for configuration information (path & file name) and which files  
take precedence over others in the case of conflicts ... my current  
understanding is:

1. Environment variables
2. setuptex.tmf
3. texmf-context/web2c/context.cnf
4. texmf/web2c/texmf.cnf
5. ...

As a second step, one would have to know what each of the settings in  
the above places is needed for. In particular, I would like to know  
which settings LuaTeX actually uses and which ones it ignores. But  
this can wait until the first question is figured out completely ;-)

Best,
Oliver

From pragma at wxs.nl  Mon May 19 10:34:20 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 19 May 2008 10:34:20 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <20080519082005.GH17709@gamma.logic.tuwien.ac.at>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>	<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>
	<20080519082005.GH17709@gamma.logic.tuwien.ac.at>
Message-ID: <48313B8C.3020902@wxs.nl>

Norbert Preining wrote:
> On Mo, 19 Mai 2008, Mojca Miklavec wrote:
>> Any ideas if getting rid of dependency on environmental variables is doable?
> 
> And please also of that *stupid* user-specific luatex-cache. There must
> be a way to run-time merge a system-wide luatex-cache with a
> luatex-cache only for the user files.

i'll look into that when i have time (keep in mind that mkiv/luate xis 
rather fresh and not finished)

> like mktexlsr. Please do NOT reinvent the wheel formed like a
> rectangle... see my other email.

actually, i *wanted* to get rid of mktexlsr cum suis ... for several reasons

(1) more control
(2) different file daabase models (at some point running from one zip file)
(3) more speed
(4) less platform issues

kind trying to convert a square wheel to an elipse (much in tds/kpse is 
driven by 20 year old file systems and systems, kind of steam engine 
while now we have electricity)

although it will not be noticeable in public distributions i want to 
support flatter file systems too (i.e. all files for a font in one path 
and so) but that should not bother you (hopefully)

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Mon May 19 10:49:09 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 19 May 2008 10:49:09 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>
	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>
Message-ID: <48313F05.2020607@wxs.nl>

Oliver Buerschaper wrote:
>>> Any ideas if getting rid of dependency on environmental variables  
>>> is doable?
>> I agree it would be great if mtxrun could call/do setuptex on itself
>> if needed.
> 
> At the moment for me it would be enough to know where exactly LuaTeX  
> looks for configuration information (path & file name) and which files  
> take precedence over others in the case of conflicts ... my current  
> understanding is:
> 
> 1. Environment variables
> 2. setuptex.tmf

no, this one is only used when you run

mtxrun --tree=....

i use this methos in web driven workflows where we can have multiple 
trees alongside (linux servers) and i never bother to setup my shell for 
that; i just call mtxrun then

> 3. texmf-context/web2c/context.cnf

we ship context.cnfas an example of what is needed (it's the one on my 
machine)

> 4. texmf/web2c/texmf.cnf

that one indeed unless it's in a usual place

> 5. ...

$TEXMF
$TEXMFCACHE (since there is no agreement over where it lives)

so, only two variables

> As a second step, one would have to know what each of the settings in  
> the above places is needed for. In particular, I would like to know  
> which settings LuaTeX actually uses and which ones it ignores. But  
> this can wait until the first question is figured out completely ;-)

$TEXMF is needed in order to locate the configuration file (currently 
still a CNF file but we may as well get rid of it since we use less and 
less info from it; if we would organize the minimals differently i.e. 
more flat that tds we can do without a configuration, especially fonts
are an issue (why no tex/fonts/data/vendor/collection)

$TEXMFCACHE is needed because distributers want control over the place
where those files go; there is some default setup but ...

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Mon May 19 10:54:15 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 19 May 2008 10:54:15 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <20080519081725.GG17709@gamma.logic.tuwien.ac.at>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>	<48312657.8030206@elvenkind.com>
	<20080519081725.GG17709@gamma.logic.tuwien.ac.at>
Message-ID: <48314037.4090403@wxs.nl>

Norbert Preining wrote:

> Arggg... does that mean that anyone wanting to use simply
> 	context
> as a program as to set up all the luatex/context stuff, with independent
> database etc etc?

indeed, mkiv will not use kpse; at some point i want to play with

texmf.zip
texmf-local.zip

technically it's already possible but i need some more time to play with it

> Again, you should definitely implement some level of global setup
> possibility!!! 

you mean shared for users?

> Either you want context in distributions, or we forget about that and
> ask people to install context by themselves! It is impossible to setup a
> context installation for MkIV in a decent way on a multi-user system. It
> is simply *impossible* ATM. 

well, mkiv is still somewhat experimental ... if a day had more hours ...

> I already suggested several times that there is a *system*wide*
> luatex-cache which can be updated/regenerated everytime a distribution
> package installs new files, very similar to mktexlsr.

i know, and its noted somewhere ...

> Now that is *really* broken on context.

should kind of work for pdftex an xetex (in the past texexec even called 
fmtutil on a unix system but when thomas refused to support $engine i 
kicked that out)

> Again, if you want to be a system for strictly *single*user* systems,
> please let me know and I will remove context from Debian ...

keep in mind that i hav eno experience with multi user systems (ok, long 
ago on vms) ... although on my linux boxes i have a user hagen, i'm 
always logged in as root -)

> AHHh, enough of my frustrated flames. Please don't take it personally.
> But I have written again and again about that, and it seems nobody seems
> to care nor to listen.

come on, we do care, but it's a moving train ...

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From preining at logic.at  Mon May 19 11:12:40 2008
From: preining at logic.at (Norbert Preining)
Date: Mon, 19 May 2008 11:12:40 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48314037.4090403@wxs.nl>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>
	<48312657.8030206@elvenkind.com>
	<20080519081725.GG17709@gamma.logic.tuwien.ac.at>
	<48314037.4090403@wxs.nl>
Message-ID: <20080519091240.GC5893@gamma.logic.tuwien.ac.at>

Hi Hans,

On Mo, 19 Mai 2008, Hans Hagen wrote:
> >Again, you should definitely implement some level of global setup
> >possibility!!! 
> 
> you mean shared for users?

Yes. 

> keep in mind that i hav eno experience with multi user systems (ok, long 

What we actually need, and that is the same for TeX Live and for all
distributions (at least inmy imagination), is:

- one (or several) system wide luatex cache thingies
- one per user (if the user wants to)
- a way to update the cache for specific trees only
  (luatools --system-only ...)
- and the adaption of the lua functions that the different caches are
  merged at loading time, the later (user) taking precedence over the
  former.

That would already be some big step forward.

> come on, we do care, but it's a moving train ...

;-) Let me sometimes get rid of some frustration .... ;-))) It does not
happen often anyway.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
PEN-TRE-TAFARN-Y-FEDW (n.)
Welsh word which literally translates as
'leaking-biro-by-the-glass-hole-of-the-clerk-of-the-bank-has-been-
-taken-to-another-place-leaving-only-the-special-inkwell-and-three-
-inches-of-tin-chain'.
			--- Douglas Adams, The Meaning of Liff

From mojca.miklavec.lists at gmail.com  Mon May 19 12:02:13 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Mon, 19 May 2008 12:02:13 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <20080519091240.GC5893@gamma.logic.tuwien.ac.at>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>
	<48312657.8030206@elvenkind.com>
	<20080519081725.GG17709@gamma.logic.tuwien.ac.at>
	<48314037.4090403@wxs.nl>
	<20080519091240.GC5893@gamma.logic.tuwien.ac.at>
Message-ID: <6faad9f00805190302k4a025fc0i25627f68ff2eead5@mail.gmail.com>

> What we actually need, and that is the same for TeX Live and for all
> distributions (at least inmy imagination), is:
>
> - one (or several) system wide luatex cache thingies
> - one per user (if the user wants to)
> - a way to update the cache for specific trees only
>  (luatools --system-only ...)
> - and the adaption of the lua functions that the different caches are
>  merged at loading time, the later (user) taking precedence over the
>  former.
>
> That would already be some big step forward.
>
>> come on, we do care, but it's a moving train ...
>
> ;-) Let me sometimes get rid of some frustration .... ;-))) It does not
> happen often anyway.

I really wonder how (if at all) LuaTeX is going to work on MikTeX ...
:) ConTeXt is broken there already, and ConTeXt is the only tool that
really benefits from LuaTeX (apart from some of your tools on TL). The
new search capabilities are likely to break the MikTeX's auto-install
functionality as well if nobody will push Hans to fix it (or implement
it himself).

Mojca

From mojca.miklavec.lists at gmail.com  Mon May 19 12:07:08 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Mon, 19 May 2008 12:07:08 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <6faad9f00805190302k4a025fc0i25627f68ff2eead5@mail.gmail.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>
	<48312657.8030206@elvenkind.com>
	<20080519081725.GG17709@gamma.logic.tuwien.ac.at>
	<48314037.4090403@wxs.nl>
	<20080519091240.GC5893@gamma.logic.tuwien.ac.at>
	<6faad9f00805190302k4a025fc0i25627f68ff2eead5@mail.gmail.com>
Message-ID: <6faad9f00805190307w443760ds1def3ba2fd38f6b2@mail.gmail.com>

> I really wonder how (if at all) LuaTeX is going to work on MikTeX ...
> :) ConTeXt is broken there already, and ConTeXt is the only tool that
> really benefits from LuaTeX (apart from some of your tools on TL). The
> new search capabilities are likely to break the MikTeX's auto-install
> functionality as well if nobody will push Hans to fix it (or implement
> it himself).

I meant to say: it's really great that you are putting so much effort
to make LuaTeX work on non-ConTeXt-devoted installation. Without you,
we would probably not see it present on TeX Live at least for the next
year :) Thanks a lot for that!

Mojca

From pragma at wxs.nl  Mon May 19 12:38:52 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 19 May 2008 12:38:52 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <6faad9f00805190302k4a025fc0i25627f68ff2eead5@mail.gmail.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>	
	<48312657.8030206@elvenkind.com>	
	<20080519081725.GG17709@gamma.logic.tuwien.ac.at>	
	<48314037.4090403@wxs.nl>	
	<20080519091240.GC5893@gamma.logic.tuwien.ac.at>
	<6faad9f00805190302k4a025fc0i25627f68ff2eead5@mail.gmail.com>
Message-ID: <483158BC.40901@wxs.nl>

Mojca Miklavec wrote:
>> What we actually need, and that is the same for TeX Live and for all
>> distributions (at least inmy imagination), is:
>>
>> - one (or several) system wide luatex cache thingies
>> - one per user (if the user wants to)
>> - a way to update the cache for specific trees only
>>  (luatools --system-only ...)
>> - and the adaption of the lua functions that the different caches are
>>  merged at loading time, the later (user) taking precedence over the
>>  former.
>>
>> That would already be some big step forward.
>>
>>> come on, we do care, but it's a moving train ...
>> ;-) Let me sometimes get rid of some frustration .... ;-))) It does not
>> happen often anyway.
> 
> I really wonder how (if at all) LuaTeX is going to work on MikTeX ...
> :) ConTeXt is broken there already, and ConTeXt is the only tool that
> really benefits from LuaTeX (apart from some of your tools on TL). The
> new search capabilities are likely to break the MikTeX's auto-install
> functionality as well if nobody will push Hans to fix it (or implement
> it himself).

mixtex is another issue mostly because it uses a diferent approach; we 
had it working so at some point it will work again; probably not soon 
for luatex/mkiv but that's experimental anyway

i simply have no capacity to run everything here (e.g. in order to set 
up a proper windows vm for testing i need additional windows licences 
which i don't have

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Mon May 19 13:40:20 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 19 May 2008 13:40:20 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <20080519091240.GC5893@gamma.logic.tuwien.ac.at>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>
	<48312657.8030206@elvenkind.com>
	<20080519081725.GG17709@gamma.logic.tuwien.ac.at>
	<48314037.4090403@wxs.nl>
	<20080519091240.GC5893@gamma.logic.tuwien.ac.at>
Message-ID: <48316724.8070809@wxs.nl>

Norbert Preining wrote:

> - one (or several) system wide luatex cache thingies
> - one per user (if the user wants to)
> - a way to update the cache for specific trees only
>   (luatools --system-only ...)
> - and the adaption of the lua functions that the different caches are
>   merged at loading time, the later (user) taking precedence over the
>   former.
> 
> That would already be some big step forward.

for that to happen we need to define what system is and what is user in 
a pretty consistent and cross platform way (and not in the tetex n*m 
permutations way)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From preining at logic.at  Mon May 19 13:45:54 2008
From: preining at logic.at (Norbert Preining)
Date: Mon, 19 May 2008 13:45:54 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48316724.8070809@wxs.nl>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>
	<48312657.8030206@elvenkind.com>
	<20080519081725.GG17709@gamma.logic.tuwien.ac.at>
	<48314037.4090403@wxs.nl>
	<20080519091240.GC5893@gamma.logic.tuwien.ac.at>
	<48316724.8070809@wxs.nl>
Message-ID: <20080519114554.GM17602@gamma.logic.tuwien.ac.at>

On Mo, 19 Mai 2008, Hans Hagen wrote:
> for that to happen we need to define what system is and what is user in 
> a pretty consistent and cross platform way (and not in the tetex n*m 
> permutations way)

system: TEXMFDIST TEXMFMAIN TEXMFLOCAL TEXMFSYSCONFIG TEXMFSYSVAR

user: TEXMFHOME TEXMFVAR TEXMFCONFIG

THat is how TL2008 will work on *ALL* supported platforms, including
windows.

	TEXMFHOME = ~/texmf
		where ~ -> $HOME on unix
		      ~ -> %USERPROFILE% on win32
etc 

Yes, till TL2007 we didn't have the distinction of SYS <-> non-SYS on
windows. But TL2008 will have exactely the same approach on all
platforms, including the same scripts (updmap-sys vs updmap, ...)

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
MAVIS ENDERBY (n.)
The almost-completely-forgotten girlfriend from your distant past for
whom your wife has a completely irrational jealousy and hatred.
			--- Douglas Adams, The Meaning of Liff

From pragma at wxs.nl  Mon May 19 13:54:28 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 19 May 2008 13:54:28 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <20080519114554.GM17602@gamma.logic.tuwien.ac.at>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>
	<48312657.8030206@elvenkind.com>
	<20080519081725.GG17709@gamma.logic.tuwien.ac.at>
	<48314037.4090403@wxs.nl>
	<20080519091240.GC5893@gamma.logic.tuwien.ac.at>
	<48316724.8070809@wxs.nl>
	<20080519114554.GM17602@gamma.logic.tuwien.ac.at>
Message-ID: <48316A74.5030405@wxs.nl>

Norbert Preining wrote:
> On Mo, 19 Mai 2008, Hans Hagen wrote:
>> for that to happen we need to define what system is and what is user in 
>> a pretty consistent and cross platform way (and not in the tetex n*m 
>> permutations way)
> 
> system: TEXMFDIST TEXMFMAIN TEXMFLOCAL TEXMFSYSCONFIG TEXMFSYSVAR

i suppose that this is the order in $TEXMF in tex live then

(on my machines and in the minimals we have a different order, i.e. 
local before main and so)

just wondering ... how is a system wide update taking place (since local 
comes last) ... is the policy now "wipe out and install anew), if so, 
why still local?

> user: TEXMFHOME TEXMFVAR TEXMFCONFIG
> 
> THat is how TL2008 will work on *ALL* supported platforms, including
> windows.
> 
> 	TEXMFHOME = ~/texmf
> 		where ~ -> $HOME on unix
> 		      ~ -> %USERPROFILE% on win32
> etc 
> 
> Yes, till TL2007 we didn't have the distinction of SYS <-> non-SYS on
> windows. But TL2008 will have exactely the same approach on all
> platforms, including the same scripts (updmap-sys vs updmap, ...)

so eventually the mac is also consistent now

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From preining at logic.at  Mon May 19 14:01:22 2008
From: preining at logic.at (Norbert Preining)
Date: Mon, 19 May 2008 14:01:22 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48316A74.5030405@wxs.nl>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>
	<48312657.8030206@elvenkind.com>
	<20080519081725.GG17709@gamma.logic.tuwien.ac.at>
	<48314037.4090403@wxs.nl>
	<20080519091240.GC5893@gamma.logic.tuwien.ac.at>
	<48316724.8070809@wxs.nl>
	<20080519114554.GM17602@gamma.logic.tuwien.ac.at>
	<48316A74.5030405@wxs.nl>
Message-ID: <20080519120122.GB26386@gamma.logic.tuwien.ac.at>

On Mo, 19 Mai 2008, Hans Hagen wrote:
> >system: TEXMFDIST TEXMFMAIN TEXMFLOCAL TEXMFSYSCONFIG TEXMFSYSVAR
> 
> i suppose that this is the order in $TEXMF in tex live then

No no no, that was the order in which the stuff came to my mind!!!

> just wondering ... how is a system wide update taking place (since local 
> comes last) ... is the policy now "wipe out and install anew), if so, 
> why still local?

update in TeX Live will happen simply by removing a sub-package and
re-adding it, so the files will go normally to TEXMFDIST. But that
depends on what is in the package.

I don't understand with "wipe out and install anew"!? Yes, up to TL2007
every installation was practically a new one.

With 2008 we will have the ability to install updated package and also
other packages over the net into an already present installation.

For you and Taco it might be interesting that if you want you can even
set up some local repository and tell people to do:
	tlmgr -location www.pragme-ade.nl/context-tl update
which will update the context package as shipped with TL to the one
shipped from your server. 

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
`That young girl is one of the least benightedly
unintelligent organic life forms it has been my profound
lack of pleasure not to be able to avoid meeting.'
                 --- Marvin's first ever compliment about anybody.
                 --- Douglas Adams, The Hitchhikers Guide to the Galaxy

From oliver.buerschaper at mpq.mpg.de  Mon May 19 16:03:23 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Mon, 19 May 2008 16:03:23 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48313F05.2020607@wxs.nl>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>
	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>
	<48313F05.2020607@wxs.nl>
Message-ID: <69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>

>> At the moment for me it would be enough to know where exactly  
>> LuaTeX  looks for configuration information (path & file name) and  
>> which files  take precedence over others in the case of  
>> conflicts ... my current  understanding is:
>> 1. Environment variables
>> 2. setuptex.tmf
>
> no, this one is only used when you run
>
> mtxrun --tree=....
>
> i use this methos in web driven workflows where we can have multiple  
> trees alongside (linux servers) and i never bother to setup my shell  
> for that; i just call mtxrun then

OK, just to confirm, the file setuptex.tmf at the top level of a set  
of tex trees is *only* ever evaluated by mtxrun. In turn, if I never  
intend to run mtxrun --tree=... I can safely delete this file.

(A quick grep shows that the file setuptex.tmf also seems to be used  
by runtools.rb and texmfstart.rb for the same purpose but since these  
scripts are obsolete for LuaTeX this can be ignored).


>> 3. texmf-context/web2c/context.cnf
>
> we ship context.cnfas an example of what is needed (it's the one on  
> my machine)

In other words, deleting context.cnf from texmf-context/web2c/ makes  
no difference whatsoever for LuaTeX?


>> 4. texmf/web2c/texmf.cnf
>
> that one indeed unless it's in a usual place

OK, again just to be sure: the file texmf/web2c/texmf.cnf (exactly in  
this location) is the central configuration file for LuaTeX (and  
actually the only one needed after deleting the ones mentioned above).  
However, without the environment variable $TEXMF LuaTeX won't be able  
to find it and will give up.

Now if $TEXMF is set LuaTeX will search all the trees specified there  
in the given order until it finds the file at anytexmf/web2c/ 
texmf.cnf. What if the file texmf.cnf is in a different location  
within $TEXMF? Will LuaTeX still find it?


>> As a second step, one would have to know what each of the settings  
>> in  the above places is needed for. In particular, I would like to  
>> know  which settings LuaTeX actually uses and which ones it  
>> ignores. But  this can wait until the first question is figured out  
>> completely ;-)
>
> $TEXMF is needed in order to locate the configuration file

Why does LuaTeX need an environment variable for that? Both pdftex and  
xetex in the minimal distribution run flawlessly without any variable  
set. Besides TeXLive 2007 doesn't need that either.

Why can't there be a default location where LuaTeX looks for its  
configuration file (be it texmf.cnf or something else)?


> (currently still a CNF file but we may as well get rid of it since  
> we use less and less info from it;

This is what I actually wanted to know in the second step ... which  
info from texmf.cnf is used by LuaTeX and what is ignored? What  
aspects of LuaTeX are configured by each single line? Furthermore,  
which info is mandatory and what is optional?


> if we would organize the minimals differently i.e. more flat that  
> tds we can do without a configuration, especially fonts
> are an issue (why no tex/fonts/data/vendor/collection)

I don't understand.

> $TEXMFCACHE is needed because distributers want control over the place
> where those files go; there is some default setup but ...

Yes, unless $TEXMFCACHE is set, LuaTeX uses $HOME/luatex-cache. Can  
the cache path also be set in the file texmf.cnf?

Best,
Oliver

From taco at elvenkind.com  Mon May 19 17:23:19 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 19 May 2008 17:23:19 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>
	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>
	<48313F05.2020607@wxs.nl>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
Message-ID: <48319B67.5080206@elvenkind.com>


Hi Oliver,

Hans and I are extending context in this area right now, so any
current answer will likely be outdated before much longer.
So, a little bit of extra patience is required still.

All the best,
Taco




From oliver.buerschaper at mpq.mpg.de  Tue May 20 15:26:56 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Tue, 20 May 2008 15:26:56 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48319B67.5080206@elvenkind.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>
	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>
	<48313F05.2020607@wxs.nl>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
Message-ID: <E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>

> Hans and I are extending context in this area right now, so any
> current answer will likely be outdated before much longer.
> So, a little bit of extra patience is required still.

I see. It's just that literally everything about ConTeXt is changing  
on a daily basis and almost every current answer about just any topic  
seems to be outdated within a fortnight.

However, if you want user-friendly ConTeXt distributions to hit the  
main stage at some point you'll have to start somewhere. Refusing to  
explain the details because they're going to change anyway probably  
won't be the best idea ...

On the other hand, if you want ConTeXt distributions to always remain  
almost exact replicas of Hans' machine (like the current minimals  
are), fine. But don't expect them to be widely usable. The average  
user doesn't have the knowhow required to happily juggle with dozens  
of configurations sitting side by side.

Sorry for putting this bluntly but I feel something had to be said  
about this issue. I guess it won't do you any harm if you shared your  
plans about LuaTeX's configuration mechanism with us package  
developers ... thus we wouldn't have to reverse engineer every tiny bit.

Oliver

From dh at capdm.com  Tue May 20 15:32:56 2008
From: dh at capdm.com (Duncan Hothersall)
Date: Tue, 20 May 2008 14:32:56 +0100
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
Message-ID: <4832D308.6000408@capdm.com>

Oliver Buerschaper wrote:
> On the other hand, if you want ConTeXt distributions to always remain  
> almost exact replicas of Hans' machine (like the current minimals  
> are), fine. But don't expect them to be widely usable. The average  
> user doesn't have the knowhow required to happily juggle with dozens  
> of configurations sitting side by side.
>   
In fairness the average user shouldn't be using any luatex/Mk IV stuff 
yet - it is still in alpha/beta. I have whole production environments 
built around ConTeXt minimals and they are extremely usable across 
multiple architectures, mainly because they are still based on Mk II. Mk 
IV is not (meant to be) production level yet.

Just my humble opinion... :-)

Duncan


From taco at elvenkind.com  Tue May 20 15:44:49 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 20 May 2008 15:44:49 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>
	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>
	<48313F05.2020607@wxs.nl>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
Message-ID: <4832D5D1.8070108@elvenkind.com>



Oliver Buerschaper wrote:
>> Hans and I are extending context in this area right now, so any
>> current answer will likely be outdated before much longer.
>> So, a little bit of extra patience is required still.
> 
> I see. It's just that literally everything about ConTeXt is changing on 
> a daily basis and almost every current answer about just any topic seems 
> to be outdated within a fortnight.

Well, what else do you expect from code that is in active development?

Sorry, but this rant does not make a lot of sense. Context MKIV
and Luatex are *not* production systems, and we do not claim they
are. If you are unhappy with code that is in still moving fast,
stick to MKII. MKII has been pretty stable for years now.

I wrote that message yesterday to let you know that we are actively
working to make the situation better. It quite a cold shower to get
flamed for doing exactly that.

Taco

From pragma at wxs.nl  Tue May 20 15:49:03 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 20 May 2008 15:49:03 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <4832D5D1.8070108@elvenkind.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>
	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>
	<48313F05.2020607@wxs.nl>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
Message-ID: <4832D6CF.3040105@wxs.nl>

Taco Hoekwater wrote:

> I wrote that message yesterday to let you know that we are actively
> working to make the situation better. It quite a cold shower to get
> flamed for doing exactly that.

also, keep in mind that taco and i are working nearly full time on it 
and asking for documentation of changing code would force us to skip 
sleeping

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From oliver.buerschaper at mpq.mpg.de  Tue May 20 17:49:16 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Tue, 20 May 2008 17:49:16 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <4832D5D1.8070108@elvenkind.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>
	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>
	<48313F05.2020607@wxs.nl>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
Message-ID: <624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>

Hello Taco,

>> I see. It's just that literally everything about ConTeXt is  
>> changing on a daily basis and almost every current answer about  
>> just any topic seems to be outdated within a fortnight.
>
> Well, what else do you expect from code that is in active development?
>
> Sorry, but this rant does not make a lot of sense. Context MKIV
> and Luatex are *not* production systems, and we do not claim they
> are. If you are unhappy with code that is in still moving fast,
> stick to MKII. MKII has been pretty stable for years now.

I'm perfectly aware of the fact that MKIV isn't ready for prime time  
yet.

Still I remember that from one MKII release to the next bugs kept  
creeping into the code that suddenly broke everything. Wrecked font  
handling in combination with XeTeX around the beginning of last year  
comes to my mind as just one of the topics people were having trouble  
with. From personal experience in the middle of a project at that time  
I also remember a few other problems with MKII ... besides I was  
having the impression that for each new MKII release that didn't solve  
a specific bug you'd have to adapt the original workaround.

So compared to MKIV I certainly agree with you that MKII is pretty  
stable, but in comparison with other projects probably not stable  
enough for many users. In my opinion this is the very reason why that  
discussion about quality assurance and regression testing came up at  
all during the conference in Epen last March. And this is also why I  
made the comment about the ever changing ConTeXt.

Additionally, from the point of view of a package developer I keep  
having the feeling that more often than not the reasons for certain  
changes are left in the dark rather than explained. For example, my  
understanding is that many Perl scripts have been superseded by Ruby  
scripts over time, still they're shipped with current MKII minimals.  
Unfortunately there's no documentation about whether they could  
actually be deleted or whether there are still some (rare) tasks  
they're needed for. And then they seem to access dozens of environment  
variables and configuration files so you have no clue about whether  
those are needed or not. You just have to know. Which I don't.

When I was trying to put together a Mac installer for MKII a couple of  
months ago I kept hearing the same definitely maybes about this  
configuration data issue as the ones I'm facing now -- only at that  
time the game wasn't called LuaTeX. Not having had the time to reverse  
engineer everything I gave up then.

Recently I had the chance to work on the Mac installer again and after  
some progress I got stuck at the very same vital point called  
configuration information and how it's accessed.


> I wrote that message yesterday to let you know that we are actively
> working to make the situation better. It quite a cold shower to get
> flamed for doing exactly that.
>
> Taco

Admittedly, I phrased my comment rather provocatively ... if you feel  
offended personally I apologize. I appreciate very much what both you  
and Hans do. Otherwise I wouldn't use ConTeXt at all and even more  
certainly wouldn't be concerned with a Mac package for it.

Still I find the current situation rather frustrating ... in fairness  
I think this is also quite understandable from the above. Anyway, for  
the moment I'll stay put and wait for the configuration mechanism to  
stabilize. Once that has happened I'd be delighted to get to know the  
details about how it works ... then the Mac installer could also enter  
the stage finally.

Oliver

From oliver.buerschaper at mpq.mpg.de  Tue May 20 18:06:55 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Tue, 20 May 2008 18:06:55 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <4832D308.6000408@capdm.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D308.6000408@capdm.com>
Message-ID: <D24FD6CA-789E-4790-82C4-0BF9FC29AAEC@mpq.mpg.de>

>> On the other hand, if you want ConTeXt distributions to always remain
>> almost exact replicas of Hans' machine (like the current minimals
>> are), fine. But don't expect them to be widely usable. The average
>> user doesn't have the knowhow required to happily juggle with dozens
>> of configurations sitting side by side.
>>
> In fairness the average user shouldn't be using any luatex/Mk IV stuff
> yet - it is still in alpha/beta. I have whole production environments
> built around ConTeXt minimals and they are extremely usable across
> multiple architectures, mainly because they are still based on Mk  
> II. Mk
> IV is not (meant to be) production level yet.
>
> Just my humble opinion... :-)

Fair enough ... if you know bits and pieces about TeX and aren't  
afraid of the shell you'll certainly have the MKII minimals up and  
running at some point ;-)

However, think of someone who has never heard of ConTeXt before but  
has been persuaded by a friend or colleague to give it a try. Perhaps  
they've been given a template document for a thesis to start from. If  
this person has a Mac they'll probably want to download some disk  
image, have ConTeXt deployed on their machine by the Apple installer  
program, fire up TeXShop and start writing their thesis with ConTeXt  
right away. This is what I'd consider the average user. With the  
current minimals this is impossible  ...

Oliver

From pragma at wxs.nl  Wed May 21 00:36:35 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 21 May 2008 00:36:35 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>
	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>
	<48313F05.2020607@wxs.nl>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
Message-ID: <48335273.40400@wxs.nl>

Oliver Buerschaper wrote:

> Still I remember that from one MKII release to the next bugs kept 
> creeping into the code that suddenly broke everything. Wrecked font 
> handling in combination with XeTeX around the beginning of last year 
> comes to my mind as just one of the topics people were having trouble 

xetex is a moveing target too, and i think that in that respect 
latex/xetex users also have to update in sync with binaries; by now the 
xetex interface becomes more stable but it's still version < 1

> with. From personal experience in the middle of a project at that time I 
> also remember a few other problems with MKII ... besides I was having 
> the impression that for each new MKII release that didn't solve a 
> specific bug you'd have to adapt the original workaround.

depends, many parts are pretty stable but if you let a project depend on 
new features ...

> understanding is that many Perl scripts have been superseded by Ruby 
> scripts over time, still they're shipped with current MKII minimals. 

i'm not ure what you mean here; we only keep perl scripts around for 
stuff that is not yet redone in ruby or because soem workflows may 
depend on it; if a user uses "texmfstart somescript" he or she will now 
notice if a perl or ruby script is used; therefore we could make a 
transition

> Unfortunately there's no documentation about whether they could actually 
> be deleted or whether there are still some (rare) tasks they're needed 

depends on what kind of workflows one has; also some scripts are shipped 
that probably are used as pragma but since we use the same zips for 
updating i keep 'm there

> for. And then they seem to access dozens of environment variables and 
> configuration files so you have no clue about whether those are needed 
> or not. You just have to know. Which I don't.

it all depends on your local system ... in the minimals 'setuptex' just 
plays safe ... it sets up all variables that can interfere with an 
existing installation

> When I was trying to put together a Mac installer for MKII a couple of 
> months ago I kept hearing the same definitely maybes about this 
> configuration data issue as the ones I'm facing now -- only at that time 
> the game wasn't called LuaTeX. Not having had the time to reverse 
> engineer everything I gave up then.

hm, platform issues .. each platform has its own demands too and we can 
only adapt

the minimals have been around for ages and not much changed for a long 
time; a few month ago we started thinking of and working on a garden 
based one and in the process of making engine specific variants (even 
more minimals) quite some experimenting is needed; these are not things 
that can be done in a few hours or weeks or months, especially not if 
you consider that tex distributions (and their contents, like fonts) 
change every now and then too

> Recently I had the chance to work on the Mac installer again and after 
> some progress I got stuck at the very same vital point called 
> configuration information and how it's accessed.

i wonder what configuration info you refer too; in a minimals setup 
there is only 'setuptex' and optionally one may want to adapt the 
cont-sys.tex file

>> I wrote that message yesterday to let you know that we are actively
>> working to make the situation better. It quite a cold shower to get
>> flamed for doing exactly that.
>>
>> Taco
> 
> Admittedly, I phrased my comment rather provocatively ... if you feel 
> offended personally I apologize. I appreciate very much what both you 
> and Hans do. Otherwise I wouldn't use ConTeXt at all and even more 
> certainly wouldn't be concerned with a Mac package for it.
> 
> Still I find the current situation rather frustrating ... in fairness I 
> think this is also quite understandable from the above. Anyway, for the 
> moment I'll stay put and wait for the configuration mechanism to 
> stabilize. Once that has happened I'd be delighted to get to know the 
> details about how it works ... then the Mac installer could also enter 
> the stage finally.

as taco mentioned ... mkiv is for the brave ... we will cook up 
something that makes it usable for tex live but even then ... it will 
take a while

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Wed May 21 00:40:24 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 21 May 2008 00:40:24 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <D24FD6CA-789E-4790-82C4-0BF9FC29AAEC@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D308.6000408@capdm.com>
	<D24FD6CA-789E-4790-82C4-0BF9FC29AAEC@mpq.mpg.de>
Message-ID: <48335358.3010305@wxs.nl>

Oliver Buerschaper wrote:

> However, think of someone who has never heard of ConTeXt before but  
> has been persuaded by a friend or colleague to give it a try. Perhaps  
> they've been given a template document for a thesis to start from. If  
> this person has a Mac they'll probably want to download some disk  
> image, have ConTeXt deployed on their machine by the Apple installer  
> program, fire up TeXShop and start writing their thesis with ConTeXt  
> right away. This is what I'd consider the average user. With the  
> current minimals this is impossible  ...

hm, i really had it up and running on the mac pretty fast in texshop but 
since my mac is permantly broken i cannot test it right now

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From oliver.buerschaper at mpq.mpg.de  Wed May 21 11:27:13 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Wed, 21 May 2008 11:27:13 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48335273.40400@wxs.nl>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>
	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>
	<48313F05.2020607@wxs.nl>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<48335273.40400@wxs.nl>
Message-ID: <E71DB91B-35BD-44FF-986C-926BF4FDA192@mpq.mpg.de>

>> From personal experience in the middle of a project at that time I  
>> also remember a few other problems with MKII ... besides I was  
>> having the impression that for each new MKII release that didn't  
>> solve a specific bug you'd have to adapt the original workaround.
>
> depends, many parts are pretty stable but if you let a project  
> depend on new features ...

Well, my feeling is some buggy parts weren't all that new at that  
time ...


>> understanding is that many Perl scripts have been superseded by  
>> Ruby scripts over time, still they're shipped with current MKII  
>> minimals.
>
> i'm not ure what you mean here; we only keep perl scripts around for  
> stuff that is not yet redone in ruby or because soem workflows may  
> depend on it;

What I mean is that there is stuff lurking around in the minimals  
which is obsolete apart from rare (and presumably advanced) usage  
scenarios. However, this stuff makes trying to figure out the  
interdepencies of configuration files and variables quite a daunting  
task to say the least. For a suggestion on how to remedy this  
situation see my lines below.


>> Unfortunately there's no documentation about whether they could  
>> actually be deleted or whether there are still some (rare) tasks  
>> they're needed
>
> depends on what kind of workflows one has; also some scripts are  
> shipped that probably are used as pragma but since we use the same  
> zips for updating i keep 'm there

Don't get me wrong but this is exactly the vague kind of answers I was  
referring to in my initial posting.

As far as workflows are concerned my opinion is that keeping things  
*simple* should be the primary goal for any ConTeXt minimal  
distribution. One should agree on the simplest ConTeXt workflow  
possible and then design the minimals primarily with that idea in mind  
rather than trying to support each and every workflow under the sun  
right *out of the box*. The most common scenario will most probably be  
the average desktop user wanting to typeset a document interactively.

That said, one could collect the legacy stuff you mentioned into a  
separate package for a start and clearly mark it as such. I think this  
should be feasible on all platforms ConTeXt runs on. The benefits of  
this approach abound: less scripts, less interdependencies to worry  
about, less environment variables, sleeker minimal distributions.

Note that neither power nor flexibility would suffer: experienced TeX  
users will be able to tailor their minimals installation to meet the  
needs of an enterprise workflow anyway. If you need legacy stuff for  
old projects you extend the minimals with the appropriate component.  
If you need multiple ConTeXt trees within a web based workflow you put  
in those setuptex.tmf files and anything else that may be required.

I hope this will clarify my point of view.


>> for. And then they seem to access dozens of environment variables  
>> and configuration files so you have no clue about whether those are  
>> needed or not. You just have to know. Which I don't.
>
> it all depends on your local system ... in the minimals 'setuptex'  
> just plays safe ... it sets up all variables that can interfere with  
> an existing installation

If course, it depends on my local system. However, as a rule of thumb  
every installation of TeX (if there are several ones) should be  
responsible for not leaving behind any mess when it's not in use. Just  
my humble opinion how playing safe could be understood. Also, this is  
precisely what happens on a Mac when you have several versions of TeX  
Live, Fink-teTeX, MacPorts-teTeX etc. happily sitting side by side  
with zero effort on the user part ...

Now this is my one and only motivation for getting rid of the shell  
script "setuptex" and the need for all those environment variables.  
There's really nothing more to all my questions about configuration  
files ...


>> Recently I had the chance to work on the Mac installer again and  
>> after some progress I got stuck at the very same vital point called  
>> configuration information and how it's accessed.
>
> i wonder what configuration info you refer too; in a minimals setup  
> there is only 'setuptex' and optionally one may want to adapt the  
> cont-sys.tex file

I was referring to

setuptex.sh
setuptex.tmf
context.cnf
texmf.cnf
environment variables

and how the information contained therein is accessed (if at all) by  
the different engines and scripts.


>> Still I find the current situation rather frustrating ... in  
>> fairness I think this is also quite understandable from the above.  
>> Anyway, for the moment I'll stay put and wait for the configuration  
>> mechanism to stabilize. Once that has happened I'd be delighted to  
>> get to know the details about how it works ... then the Mac  
>> installer could also enter the stage finally.
>
> as taco mentioned ... mkiv is for the brave ... we will cook up  
> something that makes it usable for tex live but even then ... it  
> will take a while

Honestly, to my ears this sounds like a contradiction. If you consider  
MKIV for the brave then why include it in TeX Live at all? Once I read  
that the ConTeXt shipping with TeX Live should be regarded as the  
official stable release ...

Oliver

From oliver.buerschaper at mpq.mpg.de  Wed May 21 11:32:32 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Wed, 21 May 2008 11:32:32 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48335358.3010305@wxs.nl>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D308.6000408@capdm.com>
	<D24FD6CA-789E-4790-82C4-0BF9FC29AAEC@mpq.mpg.de>
	<48335358.3010305@wxs.nl>
Message-ID: <F676D7FE-6A02-4F95-A7CF-0C7056889407@mpq.mpg.de>

>> However, think of someone who has never heard of ConTeXt before but  
>> has been persuaded by a friend or colleague to give it a try.  
>> Perhaps they've been given a template document for a thesis to  
>> start from. If this person has a Mac they'll probably want to  
>> download some disk image, have ConTeXt deployed on their machine by  
>> the Apple installer program, fire up TeXShop and start writing  
>> their thesis with ConTeXt  right away. This is what I'd consider  
>> the average user. With the current minimals this is impossible  ...
>
> hm, i really had it up and running on the mac pretty fast in texshop  
> but since my mac is permantly broken i cannot test it right now

Well, you're an IT pro ... that makes all the difference ;-)

Oliver

From dh at capdm.com  Wed May 21 11:45:06 2008
From: dh at capdm.com (Duncan Hothersall)
Date: Wed, 21 May 2008 10:45:06 +0100
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <E71DB91B-35BD-44FF-986C-926BF4FDA192@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<48335273.40400@wxs.nl>
	<E71DB91B-35BD-44FF-986C-926BF4FDA192@mpq.mpg.de>
Message-ID: <4833EF22.6040204@capdm.com>

Oliver Buerschaper wrote:
> As far as workflows are concerned my opinion is that keeping things  
> *simple* should be the primary goal for any ConTeXt minimal  
> distribution. 
I think you may have misunderstood the purpose of the minimals. 
"Minimal" here generally refers to effort - both on Hans' side and on 
the user's side - rather than any notion of these distributions being 
stripped down. There has been some discussion on the main list of the 
stripped down distribution type that I think you're looking for, but 
it's important to know that the minimals are *not* it. The minimals are 
designed as an "unzip and go" *complete* package - "everything with 
minimal effort", not "the minimum you need to get started".
> Now this is my one and only motivation for getting rid of the shell  
> script "setuptex" and the need for all those environment variables.  
> There's really nothing more to all my questions about configuration  
> files ...
>   
This is also illuminating. The concept of the setuptex script (as I 
understand it) is precisely to allow the minimals to operate completely 
independently of any other installed TeX systems. The point is that you 
only run the setuptex script in the shell in which you want to run 
ConTeXt. These environment variables aren't meant to be set globally 
(again, AFAIK), they are meant to be set for the session. To me this is 
what makes the minimals highly portable and easy to integrate into 
cross-platform scripts and applications.

Your issues appear to me to be rather specific to your own environment, 
which perhaps does not allow you to run in this way.
> One should agree on the simplest ConTeXt workflow  
> possible and then design the minimals primarily with that idea in mind  
> rather than trying to support each and every workflow under the sun  
> right *out of the box*. The most common scenario will most probably be  
> the average desktop user wanting to typeset a document interactively.
>   
The simplest workflow possible is quite a different proposition, and 
should not be being addressed by the minimals. And the "average desktop 
user" is extremely difficult to define for ConTeXt - I suspect they 
don't use a Mac, for a start. :-)

Duncan


From taco at elvenkind.com  Wed May 21 12:01:44 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 21 May 2008 12:01:44 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>
	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>
	<48313F05.2020607@wxs.nl>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
Message-ID: <4833F308.4080408@elvenkind.com>


Hi Oliver,

I was a bit more ticked off yesterday than I really had right to,
in retrospect. The big problem is that tex installations become
more unpredictable the further they are away from Hans' private
machine.  Even my own machine(s) sometimes behaves differently
from his, and mine in fact are extremely closeby. That means we
already spend a lot of effort in packaging, and it is annoying
when whatever we do is still not good enough. Anyway, here's some
thoughts and explanations

Oliver Buerschaper wrote:
> 
> Still I remember that from one MKII release to the next bugs kept 
> creeping into the code that suddenly broke everything. 

Yes, and even if we try really hard to not insert bugs, it simply
cannot be helped. There is no regression test suite at the moment,
and nobody seems motivated to create one. Hans and I certainly do
not have time to set such a thing up.

But even if there was a test suite: it would likely run for days
on end, so we could probably not afford to run it before each
release in any case.

We've been working with separate "production", "beta" and "alpha"
releases for a while, but that did not work either. The "alpha"
release usually went untested outside of the Hans-me circle, so
there was no point in having it. In fact "beta" releases had the
same problem until Hans may ctxtools --update default to fetching
the beta (if there was one newer than production).

To make matters worse, then "beta" was (maybe still is) picked up
automatically by Gerben Wierda's i-installer. So even our "test"
releases suddenly appeared in users' production settings.

The whole situation is why the museum was created: at least you
will always be able to revert back to an older context release if
something suddenly becomes broken in a production project.

> Additionally, from the point of view of a package developer I keep 
> having the feeling that more often than not the reasons for certain 
> changes are left in the dark rather than explained. For example, my 
> understanding is that many Perl scripts have been superseded by Ruby 
> scripts over time, still they're shipped with current MKII minimals. 

The perl scripts you mean? I don't know about that. I know there are
a few that are not (yet) converted to ruby, if there really duplicates
still in minimals, then the perl ones should be removed.

Mojca, can you give some comments on this?

> And then they seem to access dozens of environment variables and
> configuration files so you have no clue about whether those are needed 
> or not. You just have to know. Which I don't.

Over the past two days, we have been working on getting rid of all of
those environment variables. What we have so far only applies to mkiv,
but doing a similar thing to texmfstart (and thereby all of mkii) should
be relatively simple. First. let's talk about mkiv.

Later today (maybe already by the time you read this) there will be a
new beta release in which mkiv (to be exact: luatools.lua, mtxrun.lua
and the format-including luat-inp.lua) should be able to do without any
environment variables, assuming the following condition is met:

  luatex and texlua(c) have to be installed in a TDS compliant directory
  that is inside the search PATH.

The lua code uses an internal form of autoparent discovery to find the
directory where the texmf.cnf resides.

(Btw, This is another one of those things where it worked for Hans in an
  hour, then it took two full days to get it to work for me. It is likely
  that another day or two are needed to make it work on texlive-based
  systems, and Miktex may take even more time. Well, it works for me now,
  so now it is time for other web2c-style people to have a try. We can
  worry about Miktex and /usr/bin/ installations later, ok?)

Now for the details:

For luatools --generate, the key task is to find the configuration file 
directory (or directories), and this is handled by input.identify_cnf in 
luat-inp.lua.

First, if TEXMFCNF is set, It is traversed and all found texmf.cnf
are read in. This is normal behavior for web2c based systems, and is
not changed from last week's logic.

But if TEXMFCNF is not set, MkIV will attempt to find a single default
configuration file, based on the location of the luatex or texlua binary
(and that should be something like /opt/tex/texmf-linux/bin). It 
actually traverses PATH to find the executable with the name that
was in argv[0]. I suspect that absolute path names will also work,
but that is untested (and nonstandard).

So, assuming /opt/tex/texmf-linux/bin, it attempts the following
directories, in this order:

   [/opt/tex/texmf]/web2c                    % two parents up
   [/opt/tex/texmf-linux]/texmf/web2c        % one parent up
   [/opt/tex]/texmf-local/web2c
   [/opt/tex/texmf-linux]/texmf-local/web2c

Searching stops as soon as a texmf.cnf is found: you can not have
multiple texmf.cnfs if TEXMFCNF is not set, and the directory
tests are not all that elaborate. You cannot setup a chained
TEXMFCNF inside of texmf.cnf, either.

Please note this implementation logic is not set in stone yet. We
preferred to start as simple as possible, but extensions may
be needed. (currently we have a "works for me" system). Keep in
mind that if your installation is really outlandish, you can just
set TEXMFCNF in the environment explicitly.

And that is nearly all there is to explain. I have MKIV running
now with nothing changed in my system except an addition to PATH.

------

However, this all applies to luatools.lua in particular, because
luatools parses the texmf.cnf and stores the preprocessed version
inside the luatex-cache tree. But there is a bit of extra functionality
we have had to add: you may not like the luatex-cache to appear in
your $HOME.

It is not possible to set TEXMFCACHE in texmf.cnf because of a 
chicken-and-egg situation, so we came up with something else.
Alongside each texmf.cnf (more exact: in each directory where a
texmf.cnf can exist), there can be a lua file with name texmfcnf.lua.

All such files will be read before any of the texmf.cnfs, and
so they can be used to overrule texmf.cnf values, TEXMFCACHE in
particular. The lua script has to return a table. Mine
(I have only one) looks like this:

   config = {}
   config.TEXMFCACHE = "/tmp"
   return config

-------

Comments and testing are welcome, of course.


Best wishes,
Taco

From taco at elvenkind.com  Wed May 21 12:07:59 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 21 May 2008 12:07:59 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <E71DB91B-35BD-44FF-986C-926BF4FDA192@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>
	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>
	<48313F05.2020607@wxs.nl>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<48335273.40400@wxs.nl>
	<E71DB91B-35BD-44FF-986C-926BF4FDA192@mpq.mpg.de>
Message-ID: <4833F47F.6030502@elvenkind.com>



Oliver Buerschaper wrote:
> 
> Honestly, to my ears this sounds like a contradiction. If you consider 
> MKIV for the brave then why include it in TeX Live at all? Once I read 
> that the ConTeXt shipping with TeX Live should be regarded as the 
> official stable release ...

We have not added mkiv to texlive. If it is included now, then that
is thanks to Norbert's packaging.

Best wishes,
Taco

From pragma at wxs.nl  Wed May 21 12:18:06 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 21 May 2008 12:18:06 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <4833F308.4080408@elvenkind.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>
	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>
	<48313F05.2020607@wxs.nl>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<4833F308.4080408@elvenkind.com>
Message-ID: <4833F6DE.10703@wxs.nl>

Taco Hoekwater wrote:

> Please note this implementation logic is not set in stone yet. We
> preferred to start as simple as possible, but extensions may
> be needed. (currently we have a "works for me" system). Keep in
> mind that if your installation is really outlandish, you can just
> set TEXMFCNF in the environment explicitly.

an additional note:

it is important to keep in mind that when you don't set TEXMFCNF and 
TEXMF, ther eis a potential clash with existing tex installations; the 
main reason for having setuptex in the minimals is that it permits many 
parallel installations (users like taco and me often have many 
'independent' istallations (for projects)

so, if the automatisms fail (i.e. you don't set TEXMF and TEXMFCNF 
yourself and depend on luatools cum suis to figure out where the 
configureations are) there is probably some interference with 
environment variables; i.e. when you for instance install tetex (or when 
the system came with it) you can be pretty sure that some variables are 
set and cf tds/kpse environment variables take precedence); in that case 
there is no way around overriding them at the shell level (as setuptex 
does)

this also means that when you install the minimals allongside an 
existing tex installation, you probably still need to use setuptex

> All such files will be read before any of the texmf.cnfs, and
> so they can be used to overrule texmf.cnf values, TEXMFCACHE in
> particular. The lua script has to return a table. Mine
> (I have only one) looks like this:
> 
>   config = {}
>   config.TEXMFCACHE = "/tmp"
>   return config

there is an example contextcnf.lua file in the distribution that will 
have the variables that we support in addition to the normal ones in 
texmf.cnf (

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Wed May 21 12:20:34 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 21 May 2008 12:20:34 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <4833EF22.6040204@capdm.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<48335273.40400@wxs.nl>	<E71DB91B-35BD-44FF-986C-926BF4FDA192@mpq.mpg.de>
	<4833EF22.6040204@capdm.com>
Message-ID: <4833F772.5090802@wxs.nl>

Duncan Hothersall wrote:

> only run the setuptex script in the shell in which you want to run 
> ConTeXt. These environment variables aren't meant to be set globally 
> (again, AFAIK), they are meant to be set for the session. To me this is 
> what makes the minimals highly portable and easy to integrate into 
> cross-platform scripts and applications.

indeed, and for users who have multiple projects the minimals give them 
isolated installations; this is why there are texmf-fonts (for 
commercial fonts) and texmf-project paths as well: you install a 
minimal, and copy unique stuff to texmf-fonts and texmf-projects

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Wed May 21 12:22:15 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 21 May 2008 12:22:15 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <F676D7FE-6A02-4F95-A7CF-0C7056889407@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D308.6000408@capdm.com>
	<D24FD6CA-789E-4790-82C4-0BF9FC29AAEC@mpq.mpg.de>
	<48335358.3010305@wxs.nl>
	<F676D7FE-6A02-4F95-A7CF-0C7056889407@mpq.mpg.de>
Message-ID: <4833F7D7.4000703@wxs.nl>

Oliver Buerschaper wrote:
>>> However, think of someone who has never heard of ConTeXt before but 
>>> has been persuaded by a friend or colleague to give it a try. Perhaps 
>>> they've been given a template document for a thesis to start from. If 
>>> this person has a Mac they'll probably want to download some disk 
>>> image, have ConTeXt deployed on their machine by the Apple installer 
>>> program, fire up TeXShop and start writing their thesis with ConTeXt  
>>> right away. This is what I'd consider the average user. With the 
>>> current minimals this is impossible  ...
>>
>> hm, i really had it up and running on the mac pretty fast in texshop 
>> but since my mac is permantly broken i cannot test it right now
> 
> Well, you're an IT pro ... that makes all the difference ;-)

i'm a complete mac-dummy so for me it was a matter of:

- unzip a minimal
- make sure that texshop intializes that tree

btw, there will me a cross platform 'texshop' variant (tug funded 
project) and at some point we need to get context support in there

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Wed May 21 12:50:47 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 21 May 2008 12:50:47 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <E71DB91B-35BD-44FF-986C-926BF4FDA192@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>
	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>
	<48313F05.2020607@wxs.nl>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<48335273.40400@wxs.nl>
	<E71DB91B-35BD-44FF-986C-926BF4FDA192@mpq.mpg.de>
Message-ID: <4833FE87.8010902@elvenkind.com>

Oliver Buerschaper wrote:
> 
> I was referring to
> 
> setuptex.sh

All scripts starting with setuptex have the same functionality:
they set up all the needed environment variables

I have seen the following, that only differ per platform:

   setuptex,setuptex.sh       % unix bash shell
   setuptex.csh               % unix csh shell
   setuptex.bat,setuptex.cmd  % windows shell

> setuptex.tmf

This one can be used by texmfstart if you run it with

   texmfstart --tree=

and is only for advanced use.

> context.cnf

this file is not used, ever.

> texmf.cnf

This is read by mkii (in the normal way, via kathsea, as well as via
texmfstart's file searching routines) and in mkiv by luatools  when
--generate is given on the command line (the rest of mkiv uses
preprocessed data from the cache).

As of this morning, we also have

> texmfcnf.lua

that is always read by all of mkiv.


> environment variables

These are set up by setuptex, but I assume you want to know what each
does. Will you still care if they go away anyway?  digging this
information up though all the nooks and crannies of mkii is quite a bit
of work.

> and how the information contained therein is accessed (if at all) by the 
> different engines and scripts.

More or less the same question again. How much of this do you really
need to know? Because generally speaking, there are more sensible
things to do than to document all thoses lines of code in a separate 
implementation manual. If you are curious about a few variables, can
you please post which ones?

Best wishes,
Taco

From taco at elvenkind.com  Wed May 21 12:54:19 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 21 May 2008 12:54:19 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <4833F308.4080408@elvenkind.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<4833F308.4080408@elvenkind.com>
Message-ID: <4833FF5B.1080003@elvenkind.com>

Taco Hoekwater wrote:
> 
> So, assuming /opt/tex/texmf-linux/bin, it attempts the following
> directories, in this order:
> 
>    [/opt/tex]/texmf/web2c                    % two parents up
>    [/opt/tex/texmf-linux]/texmf/web2c        % one parent up
>    [/opt/tex]/texmf-local/web2c
>    [/opt/tex/texmf-linux]/texmf-local/web2c

I forgot to mention that in this case it will also set the texmf.cnf
implicit variable $SELFAUTOPARENT to the single value that is the
found TDS root (e.g. /opt/tex).

For Hans: it makes sense to do this if TEXMFCNF *is* set as well.

Best wishes,
Taco

From pragma at wxs.nl  Wed May 21 13:28:55 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 21 May 2008 13:28:55 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <E71DB91B-35BD-44FF-986C-926BF4FDA192@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>
	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>
	<48313F05.2020607@wxs.nl>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<48335273.40400@wxs.nl>
	<E71DB91B-35BD-44FF-986C-926BF4FDA192@mpq.mpg.de>
Message-ID: <48340777.3020900@wxs.nl>

Oliver Buerschaper wrote:

> Well, my feeling is some buggy parts weren't all that new at that time ...

some stuff is 'experimental' and therefore 'buggy' by definition ... if 
only because there is no one and perfect solution in traditional tex ... 
which is why we started the luatex project

in the transition to mkiv it means that parts of context have to be 
split in kii and mkiv code (a rather tricky thing btw) so if you have a 
workflow wher eyou cannot update regularly, you should stick to the 
museum versions that taco mentioned (which also means, stick to pdftex 
for a while)

we expect to need another two years to get luatex and mkiv in a state 
that most interfaces are stable

> What I mean is that there is stuff lurking around in the minimals which 
> is obsolete apart from rare (and presumably advanced) usage scenarios. 

probably, so best is to ignore anything that does not ring a bell; i 
made the minimal because i needed them in projects and then found out 
that users could benefit from them (after all, there are the regular 
distributions (norbert, akira and gerben took care of that) for those 
who want things out of a box)

> However, this stuff makes trying to figure out the interdepencies of 
> configuration files and variables quite a daunting task to say the 
> least. For a suggestion on how to remedy this situation see my lines below.

well, in the minimals there's only TEXMF (and TEXMFCNF) and TEXMFCACHE 
and all the rest is to prevent interference; all these are discussed in 
the TDS/KPSE documentation

>>> Unfortunately there's no documentation about whether they could 
>>> actually be deleted or whether there are still some (rare) tasks 
>>> they're needed
>>
>> depends on what kind of workflows one has; also some scripts are 
>> shipped that probably are used as pragma but since we use the same 
>> zips for updating i keep 'm there
> 
> Don't get me wrong but this is exactly the vague kind of answers I was 
> referring to in my initial posting.

well, users only need texmfstart and texexec (unless they want to do 
tricky things like generating font metrics or manipulating graphics; 
this is described in docs on the web but not for average users)

> As far as workflows are concerned my opinion is that keeping things 
> *simple* should be the primary goal for any ConTeXt minimal 
> distribution. One should agree on the simplest ConTeXt workflow possible 

as duncan said .. minimal is not the same as small, it's just a subset

> and then design the minimals primarily with that idea in mind rather 
> than trying to support each and every workflow under the sun right *out 
> of the box*. The most common scenario will most probably be the average 
> desktop user wanting to typeset a document interactively.


that would mean that i'd have to cook up additional stuff for myself and 
there is no time for that (unless someone pays me for it); if i cannot 
use the minimals myself, i cannot spend too much time on it

> That said, one could collect the legacy stuff you mentioned into a 
> separate package for a start and clearly mark it as such. I think this 
> should be feasible on all platforms ConTeXt runs on. The benefits of 
> this approach abound: less scripts, less interdependencies to worry 
> about, less environment variables, sleeker minimal distributions.

it would not make a difference, the only legacy stuff is some ruby 
scripts and some styles; it has nothing to do with environment variables

> Note that neither power nor flexibility would suffer: experienced TeX 
> users will be able to tailor their minimals installation to meet the 
> needs of an enterprise workflow anyway. If you need legacy stuff for old 
> projects you extend the minimals with the appropriate component. If you 
> need multiple ConTeXt trees within a web based workflow you put in those 
> setuptex.tmf files and anything else that may be required.

well, as said, having yet another subset would make my live misserable 
bit anyone is free to make yet another minimal-minimal; maybe someone 
only wants latin modern, etc etc

> I hope this will clarify my point of view.

sure, but i just have no time for more variants

>>> for. And then they seem to access dozens of environment variables and 
>>> configuration files so you have no clue about whether those are 
>>> needed or not. You just have to know. Which I don't.
>>
>> it all depends on your local system ... in the minimals 'setuptex' 
>> just plays safe ... it sets up all variables that can interfere with 
>> an existing installation
> 
> If course, it depends on my local system. However, as a rule of thumb 
> every installation of TeX (if there are several ones) should be 
> responsible for not leaving behind any mess when it's not in use. Just 
> my humble opinion how playing safe could be understood. Also, this is 
> precisely what happens on a Mac when you have several versions of TeX 
> Live, Fink-teTeX, MacPorts-teTeX etc. happily sitting side by side with 
> zero effort on the user part ...

you're over optimistic ... i just logged in on one of our servers ...

controller-1:~ # set | grep -i TEX

TEXINPUTS=:/root/.TeX:/usr/share/doc/.TeX:/usr/doc/.TeX
         tex | latex | pdflatex)
             e='!*.+(tex|TEX|texi|latex)'

see what i mean? and i really didn't install anything tex on that machine

(older machines have even more)

> Now this is my one and only motivation for getting rid of the shell 
> script "setuptex" and the need for all those environment variables. 
> There's really nothing more to all my questions about configuration 
> files ...

what is the problem with running just one script to set up the system? 
after all, if you don't call setuptex, you still need to set up the path

(and i never set up the path because i can have multiple tex trees)

>>> Recently I had the chance to work on the Mac installer again and 
>>> after some progress I got stuck at the very same vital point called 
>>> configuration information and how it's accessed.
>>
>> i wonder what configuration info you refer too; in a minimals setup 
>> there is only 'setuptex' and optionally one may want to adapt the 
>> cont-sys.tex file
> 
> I was referring to
> 
> setuptex.sh
> setuptex.tmf

all the same (there's also setuptex.bat) and the tmf file can be used 
when you run from an editor (in which case the --tree=... flag will look 
for that file)

> context.cnf

an example fo what i use here; handy for users who want to know the mem 
values

> texmf.cnf

always needed

> environment variables

which ones? i never set any, since setuptex does it for me

> and how the information contained therein is accessed (if at all) by the 
> different engines and scripts.

ah ... that's another story ... for that you need to consult the tds 
documentation and the kpse/web2c documentation

>>> Still I find the current situation rather frustrating ... in fairness 
>>> I think this is also quite understandable from the above. Anyway, for 
>>> the moment I'll stay put and wait for the configuration mechanism to 
>>> stabilize. Once that has happened I'd be delighted to get to know the 
>>> details about how it works ... then the Mac installer could also 
>>> enter the stage finally.
>>
>> as taco mentioned ... mkiv is for the brave ... we will cook up 
>> something that makes it usable for tex live but even then ... it will 
>> take a while
> 
> Honestly, to my ears this sounds like a contradiction. If you consider 
> MKIV for the brave then why include it in TeX Live at all? Once I read 
> that the ConTeXt shipping with TeX Live should be regarded as the 
> official stable release ...

because there are brave tex live users and because luatex itself will be 
on tex live (used as scripting engine so be prepared for another kick 
out ruby/perl/bash round); we also need to 'proof that it's possible' -)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Wed May 21 13:30:34 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 21 May 2008 13:30:34 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <4833FF5B.1080003@elvenkind.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>
	<4833FF5B.1080003@elvenkind.com>
Message-ID: <483407DA.1060902@wxs.nl>

Taco Hoekwater wrote:
> Taco Hoekwater wrote:
>> So, assuming /opt/tex/texmf-linux/bin, it attempts the following
>> directories, in this order:
>>
>>    [/opt/tex]/texmf/web2c                    % two parents up
>>    [/opt/tex/texmf-linux]/texmf/web2c        % one parent up
>>    [/opt/tex]/texmf-local/web2c
>>    [/opt/tex/texmf-linux]/texmf-local/web2c
> 
> I forgot to mention that in this case it will also set the texmf.cnf
> implicit variable $SELFAUTOPARENT to the single value that is the
> found TDS root (e.g. /opt/tex).
> 
> For Hans: it makes sense to do this if TEXMFCNF *is* set as well.

i think that this happens already,since i donnot test for the non-set case

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Wed May 21 17:19:51 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 21 May 2008 17:19:51 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <4833F308.4080408@elvenkind.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<4833F308.4080408@elvenkind.com>
Message-ID: <48343D97.5020408@elvenkind.com>



Taco Hoekwater wrote:
> 
> Later today (maybe already by the time you read this) there will be a
> new beta release in which mkiv (to be exact: luatools.lua, mtxrun.lua
> and the format-including luat-inp.lua) should be able to do without any
> environment variables, assuming the following condition is met:

This new release is available now. See

   http://wiki.contextgarden.net/Context_2008.05.21

for a few other changes in this release


From arthur.reutenauer at normalesup.org  Wed May 21 19:27:29 2008
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Wed, 21 May 2008 19:27:29 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <4833F308.4080408@elvenkind.com>
References: <6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>
	<4831342A.4050109@elvenkind.com>
	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>
	<48313F05.2020607@wxs.nl>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<4833F308.4080408@elvenkind.com>
Message-ID: <20080521172729.GM21340@phare.normalesup.org>

> So, assuming /opt/tex/texmf-linux/bin, it attempts the following
> directories, in this order:
> 
>    [/opt/tex/texmf]/web2c                    % two parents up
>    [/opt/tex/texmf-linux]/texmf/web2c        % one parent up
>    [/opt/tex]/texmf-local/web2c
>    [/opt/tex/texmf-linux]/texmf-local/web2c

  Thats's great!  It works on my machine without the need to set any
environment variable (I even tried two different arrangments of the
directories).

	Arthur

From pragma at wxs.nl  Wed May 21 19:32:04 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 21 May 2008 19:32:04 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <20080521172729.GM21340@phare.normalesup.org>
References: <6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>
	<20080521172729.GM21340@phare.normalesup.org>
Message-ID: <48345C94.3020604@wxs.nl>

Arthur Reutenauer wrote:
>> So, assuming /opt/tex/texmf-linux/bin, it attempts the following
>> directories, in this order:
>>
>>    [/opt/tex/texmf]/web2c                    % two parents up
>>    [/opt/tex/texmf-linux]/texmf/web2c        % one parent up
>>    [/opt/tex]/texmf-local/web2c
>>    [/opt/tex/texmf-linux]/texmf-local/web2c
> 
>   Thats's great!  It works on my machine without the need to set any
> environment variable (I even tried two different arrangments of the
> directories).

well, you need to set the path i assume -)

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From arthur.reutenauer at normalesup.org  Wed May 21 19:42:59 2008
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Wed, 21 May 2008 19:42:59 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48345C94.3020604@wxs.nl>
References: <CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>
	<48313F05.2020607@wxs.nl>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<4833F308.4080408@elvenkind.com>
	<20080521172729.GM21340@phare.normalesup.org>
	<48345C94.3020604@wxs.nl>
Message-ID: <20080521174259.GN21340@phare.normalesup.org>

> well, you need to set the path i assume -)

  Yes, sure :-)  But it's much easier to control than all the variables
set by setuptex.  Now I can switch between the minimals and TeX Live by
simply changing my PATH.  Great!

  By the way, the rsync minimals have been updated, so it also works
with them now.

	Arthur

From taco at elvenkind.com  Wed May 21 20:01:37 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 21 May 2008 20:01:37 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <20080521174259.GN21340@phare.normalesup.org>
References: <CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<20080521172729.GM21340@phare.normalesup.org>	<48345C94.3020604@wxs.nl>
	<20080521174259.GN21340@phare.normalesup.org>
Message-ID: <48346381.8000307@elvenkind.com>

Arthur Reutenauer wrote:
>> well, you need to set the path i assume -)
> 
>   Yes, sure :-)  But it's much easier to control than all the variables
> set by setuptex.  Now I can switch between the minimals and TeX Live by
> simply changing my PATH.  Great!
> 
>   By the way, the rsync minimals have been updated, so it also works
> with them now.

Be warned that this only affects mkiv for now. Last time I tried,
texexec could not run without 4 or 5 variables (but admittedly that was
quite a while ago, when it was still in perl).

Best wishes,
Taco


From pragma at wxs.nl  Wed May 21 21:43:31 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 21 May 2008 21:43:31 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <20080521174259.GN21340@phare.normalesup.org>
References: <CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<20080521172729.GM21340@phare.normalesup.org>	<48345C94.3020604@wxs.nl>
	<20080521174259.GN21340@phare.normalesup.org>
Message-ID: <48347B63.2040403@wxs.nl>

Arthur Reutenauer wrote:
>> well, you need to set the path i assume -)
> 
>   Yes, sure :-)  But it's much easier to control than all the variables
> set by setuptex.  Now I can switch between the minimals and TeX Live by
> simply changing my PATH.  Great!

hm, but that not much more keying than calling setuptex -)

anyhow. i'm glad that it works

(btw, it would be interesting to know to what extend linux/osx set up 
possible conflicting variables; when i made setuptex i had to take care 
of everything that a sysadm had set up (for instance in a project 
outside our company where the users has to deal with very old tex's 
hanging around and not being updated or lagging two years behind, and 
setuptex is then the only way to keep interference away)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Wed May 21 21:45:59 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 21 May 2008 21:45:59 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48346381.8000307@elvenkind.com>
References: <CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<20080521172729.GM21340@phare.normalesup.org>	<48345C94.3020604@wxs.nl>	<20080521174259.GN21340@phare.normalesup.org>
	<48346381.8000307@elvenkind.com>
Message-ID: <48347BF7.8020304@wxs.nl>

Taco Hoekwater wrote:
> Arthur Reutenauer wrote:
>>> well, you need to set the path i assume -)
>>   Yes, sure :-)  But it's much easier to control than all the variables
>> set by setuptex.  Now I can switch between the minimals and TeX Live by
>> simply changing my PATH.  Great!
>>
>>   By the way, the rsync minimals have been updated, so it also works
>> with them now.
> 
> Be warned that this only affects mkiv for now. Last time I tried,
> texexec could not run without 4 or 5 variables (but admittedly that was
> quite a while ago, when it was still in perl).

it depends a bit on the logic; the previous code in luatools/mtxrun that 
tried to figure out the current location of the cnf file was derived 
from texmfstart which itself was based on older distributions; there 
have been changes in tds, names of trees, etc etc so texmfstart may as 
well be wrong there; 9it's one of those things i cannot test)

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From arthur.reutenauer at normalesup.org  Wed May 21 22:08:50 2008
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Wed, 21 May 2008 22:08:50 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48347B63.2040403@wxs.nl>
References: <69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<4833F308.4080408@elvenkind.com>
	<20080521172729.GM21340@phare.normalesup.org>
	<48345C94.3020604@wxs.nl>
	<20080521174259.GN21340@phare.normalesup.org>
	<48347B63.2040403@wxs.nl>
Message-ID: <20080521200850.GQ21340@phare.normalesup.org>

> hm, but that not much more keying than calling setuptex -)

  No, it's very different, because it's reversible: once you've sourced
setuptex, there's no going back unless you unset dozens of variables.
Up to now I had to use diiferent shells for TeX Live and the Minimals.

>                                                                   and 
> setuptex is then the only way to keep interference away

  Yes, that's definitely true.

	Arthur

From taco at elvenkind.com  Thu May 22 09:52:06 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 22 May 2008 09:52:06 +0200
Subject: [dev-context] env vars in texmfstart
In-Reply-To: <48347BF7.8020304@wxs.nl>
References: <CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<20080521172729.GM21340@phare.normalesup.org>	<48345C94.3020604@wxs.nl>	<20080521174259.GN21340@phare.normalesup.org>
	<48346381.8000307@elvenkind.com> <48347BF7.8020304@wxs.nl>
Message-ID: <48352626.3010306@elvenkind.com>


Hi,

Hans Hagen wrote:
> Taco Hoekwater wrote:
>> Arthur Reutenauer wrote:
>>>> well, you need to set the path i assume -)
>>>   Yes, sure :-)  But it's much easier to control than all the variables
>>> set by setuptex.  Now I can switch between the minimals and TeX Live by
>>> simply changing my PATH.  Great!
>>>
>>>   By the way, the rsync minimals have been updated, so it also works
>>> with them now.
>>
>> Be warned that this only affects mkiv for now. Last time I tried,
>> texexec could not run without 4 or 5 variables (but admittedly that was
>> quite a while ago, when it was still in perl).
> 
> it depends a bit on the logic; the previous code in luatools/mtxrun that 
> tried to figure out the current location of the cnf file was derived 
> from texmfstart which itself was based on older distributions; there 
> have been changes in tds, names of trees, etc etc so texmfstart may as 
> well be wrong there; 9it's one of those things i cannot test)

I just tried texmfstart without any variables (but with adjusted PATH,
of course), and it seems to work just fine here, much better than
expected.

I had to regenerate all my formats because the texmf-linux subtree is
no longer part of the TEXMF searches, but after texexec --make all
now seems to be fine (with the new formats in texmf-project).

To other people: you may want to try this also. Perhaps setuptex has
been obsolete for years without any of use realising it ;-)

Best wishes,
Taco





From pragma at wxs.nl  Thu May 22 10:01:42 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 22 May 2008 10:01:42 +0200
Subject: [dev-context] env vars in texmfstart
In-Reply-To: <48352626.3010306@elvenkind.com>
References: <CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<20080521172729.GM21340@phare.normalesup.org>	<48345C94.3020604@wxs.nl>	<20080521174259.GN21340@phare.normalesup.org>
	<48346381.8000307@elvenkind.com> <48347BF7.8020304@wxs.nl>
	<48352626.3010306@elvenkind.com>
Message-ID: <48352866.9050209@wxs.nl>

Taco Hoekwater wrote:

> To other people: you may want to try this also. Perhaps setuptex has
> been obsolete for years without any of use realising it ;-)

as mentioned before, setuptex is there to isolate trees -)

there are now two methods to be wikified):

(1) setuptex, if you have multiple trees with potential clashes due to 
existing trees (like old ones not using the current tex live structure)

(2) setting the path, which works ok for distributions that are like tex 
live (i wonder what happens with those texmf.cnf files that ended up in 
/etc, but that may have been tetex which is obsolete now anyway)

one of the problems is that although there is tds, the relative position 
of the binaries to the configuration file is not part of the standard 
but i think that we can safely say that we assume the relationship and 
don't support anything else (okay, one can set TEXMF and TEXMFCNF)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From mojca.miklavec.lists at gmail.com  Fri May 23 02:12:14 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 23 May 2008 02:12:14 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <20080521172729.GM21340@phare.normalesup.org>
References: <6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>
	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>
	<48313F05.2020607@wxs.nl>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<4833F308.4080408@elvenkind.com>
	<20080521172729.GM21340@phare.normalesup.org>
Message-ID: <6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>

On Wed, May 21, 2008 at 7:27 PM, Arthur Reutenauer wrote:
>> So, assuming /opt/tex/texmf-linux/bin, it attempts the following
>> directories, in this order:
>>
>>    [/opt/tex/texmf]/web2c                    % two parents up
>>    [/opt/tex/texmf-linux]/texmf/web2c        % one parent up
>>    [/opt/tex]/texmf-local/web2c
>>    [/opt/tex/texmf-linux]/texmf-local/web2c

Mac (gwtex, mactex) also uses texmf.local. (Well, also many others,
but that one is most evident.)

>  Thats's great!  It works on my machine without the need to set any
> environment variable (I even tried two different arrangments of the
> directories).

I have just tested it and it didn't work as expected.

MK II:

>  texexec --make --xtx --all
TeXExec | using search method 'kpsewhich'
TeXExec | updating file database
mktexlsr: Updating /Users/mojca/context/tex/texmf/ls-R...
mktexlsr: Updating /Users/mojca/context/tex/texmf-context/ls-R...
mktexlsr: Updating /Users/mojca/context/tex/texmf-local/ls-R...
mktexlsr: Done.
TeXExec | using tex engine xetex
TeXExec | using tex format path
/Users/mojca/context/tex/texmf-context/web2c/xetex
TeXExec | generating tex format cont-en
This is XeTeX, Version 3.1415926-2.2-0.998.5-dev (Web2C 7.5.6) (INITEX)
 \write18 enabled.
entering extended mode
...
Beginning to dump on file metafun.mem
 (mem=metafun 2008.5.23)
at most 3068 strings of total length 40865
49365 memory locations dumped; current usage is 12822&36400
1788 symbolic tokens
Transcript written on metafun.log.
TeXExec |
TeXExec | tex engine path: /Users/mojca/context/tex/texmf-context/web2c/xetex
TeXExec | mps engine path: /Users/mojca/context/tex/texmf-context/web2c
TeXExec |
TeXExec | tex: 23/05/2008 02:05:17 >
/Users/mojca/context/tex/texmf-context/web2c/xetex/cont-en.fmt
(4503548)
TeXExec | tex: 23/05/2008 02:05:23 >
/Users/mojca/context/tex/texmf-context/web2c/xetex/cont-nl.fmt
(4544450)
TeXExec | tex: 23/05/2008 02:05:25 >
/Users/mojca/context/tex/texmf-context/web2c/xetex/mptopdf.fmt
(1786949)
TeXExec | mps: 23/05/2008 02:05:25 >
/Users/mojca/context/tex/texmf-context/web2c/metafun.mem (491080)
TeXExec |
TeXExec | runtime: 15.745237

(formats have always flied to texmf-osx-intel so far)

But ...

> texexec --xtx a.tex
TeXExec | processing document 'a.tex'
TeXExec | no ctx file found
TeXExec | tex processing method: context
TeXExec | TeX run 1
TeXExec | writing option file a.top
TeXExec | using randomseed 1213
TeXExec | tex engine: xetex
TeXExec | tex format: cont-en
This is XeTeX, Version 3.1415926-2.2-0.998.5-dev (Web2C 7.5.6)
 \write18 enabled.
kpathsea: Running mktexfmt cont-en.fmt
/usr/texbin/mktexfmt: line 336:
/Users/mojca/context/tex/texmf/texconfig/tcfmgr: No such file or
directory
fmtutil: config file `fmtutil.cnf' not found.
I can't find the format file `cont-en.fmt'!


MK IV:

> context a.tex

MtxRun | error unable to locate texmfcnf.lua
MtxRun | loading configuration for
/Users/mojca/context/tex/texmf/web2c from
/Users/mojca/luatex-cache/context/bce2a35a5270714da084d11faf744f76/trees/71a1a190289e8fc90263c427daa9d235
MtxRun | locating list of /Users/mojca/context/tex/texmf-project
MtxRun | locating list of /Users/mojca/context/tex/texmf-fonts
MtxRun | locating list of /Users/mojca/context/tex/texmf-local
MtxRun | locating list of /Users/mojca/context/tex/texmf-context
MtxRun | locating list of /Users/mojca/context/tex/texmf-extra
MtxRun | locating list of /Users/mojca/context/tex/texmf
MtxRun | loading files for /Users/mojca/context/tex/texmf-local from
/Users/mojca/luatex-cache/context/bce2a35a5270714da084d11faf744f76/trees/9cef58cec78e4ef962f7764cc0d0af77
MtxRun | loading files for /Users/mojca/context/tex/texmf-context from
/Users/mojca/luatex-cache/context/bce2a35a5270714da084d11faf744f76/trees/05c539c10b6a70b446df0913d1c04b99
MtxRun | loading files for /Users/mojca/context/tex/texmf from
/Users/mojca/luatex-cache/context/bce2a35a5270714da084d11faf744f76/trees/9cd0d756a20671533c8167942232650c
MtxRun | using script:
/Users/mojca/context/tex/texmf-context/scripts/context/lua/mtx-context.lua
MtxRun | loading configuration for
/Users/mojca/context/tex/texmf/web2c from
/Users/mojca/luatex-cache/context/bce2a35a5270714da084d11faf744f76/trees/71a1a190289e8fc90263c427daa9d235
MtxRun | error no format found with name cont-en
MtxRun | total runtime: 0.011

I definitely need to add texmfcnf.lua, but just a quick overview of
non-working solutions :)

Mojca

From mojca.miklavec.lists at gmail.com  Fri May 23 08:47:19 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 23 May 2008 08:47:19 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <4833F308.4080408@elvenkind.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>
	<4831342A.4050109@elvenkind.com>
	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>
	<48313F05.2020607@wxs.nl>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<4833F308.4080408@elvenkind.com>
Message-ID: <6faad9f00805222347n675fba53o6710b1c6c55efad0@mail.gmail.com>

> So, assuming /opt/tex/texmf-linux/bin, it attempts the following
> directories, in this order:
>
>   [/opt/tex/texmf]/web2c                    % two parents up
>   [/opt/tex/texmf-linux]/texmf/web2c        % one parent up
>   [/opt/tex]/texmf-local/web2c
>   [/opt/tex/texmf-linux]/texmf-local/web2c

Shouldn't local have some precedence over texmf? (Maybe I'm wrong.)

Just a side note:

Here I have the cnf file under
    /usr/local/gwTeX/texmf.cnf

The binaries are under
    /usr/local/gwTeX/bin/i386-apple-darwin8.8.1

but I didn't test it on gwTeX yet.

The main idea - cnf file will be overwritten by every update if it's
only in texmf/web2c. The user needs to be able to put it either to
texmf-local or to the top (at the same level where setuptex is), and
that one needs to have precedence over the one in texmf.

Unrelated - how exactly do I set TEXMFCACHE to be in texmf-cache
alongside other texmf trees?
I have tried (I know that this cannot work):
    TEXMFCACHE = '$TEXROOT/texmf-cache',
but TEXROOT is probably unknown anyway

Maybe it's still respecting the order in
TEXMFCACHE    = $TMP;$TEMP;$TMPDIR;$TEMPDIR;$HOME;$TEXMFVAR;$VARTEXMF;.
from texmf.cnf, and $TMP doesn't exist on mac, so home is the first
existing folder (where I hate to keep the cache - it should at least
have a preceeding dot then).

The only problem with mkii: basically works, but texexec --make puts
formats under texmf-context and the kpathsea doesn't find them for
some reason. If format is put under texmf-engine/web2c, everything
works out of the box afterwards (with only path variable being set).

Mojca

From mojca.miklavec.lists at gmail.com  Fri May 23 08:51:14 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 23 May 2008 08:51:14 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <6faad9f00805222347n675fba53o6710b1c6c55efad0@mail.gmail.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>
	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>
	<48313F05.2020607@wxs.nl>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<4833F308.4080408@elvenkind.com>
	<6faad9f00805222347n675fba53o6710b1c6c55efad0@mail.gmail.com>
Message-ID: <6faad9f00805222351g9472009s71c02bf0b026dbd5@mail.gmail.com>

> Unrelated - how exactly do I set TEXMFCACHE to be in texmf-cache
> alongside other texmf trees?
> I have tried (I know that this cannot work):
>    TEXMFCACHE = '$TEXROOT/texmf-cache',
> but TEXROOT is probably unknown anyway

I forgot to finish the sentence:

with this setting I get

luatools --generate

LuaTools | loading configuration file
/Users/mojca/context/tex/texmf/web2c/texmfcnf.lua
LuaTools | loading
/Users/mojca/context/tex/texmf/web2c/texmf.cnfShould I create the
cache path /texmf-cache? [yes|no] [no]

every time, independent on whether I answer with yes or no. And
everytime cache is generated under $HOME/luatex-cache. I guess that
$TOXROOT is simply empty and /texmf-cache is not writable by me.

Mojca

From taco at elvenkind.com  Fri May 23 09:13:32 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 23 May 2008 09:13:32 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>
References: <6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<20080521172729.GM21340@phare.normalesup.org>
	<6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>
Message-ID: <48366E9C.9060603@elvenkind.com>



Mojca Miklavec wrote:
> On Wed, May 21, 2008 at 7:27 PM, Arthur Reutenauer wrote:
>>> So, assuming /opt/tex/texmf-linux/bin, it attempts the following
>>> directories, in this order:
>>>
>>>    [/opt/tex/texmf]/web2c                    % two parents up
>>>    [/opt/tex/texmf-linux]/texmf/web2c        % one parent up
>>>    [/opt/tex]/texmf-local/web2c
>>>    [/opt/tex/texmf-linux]/texmf-local/web2c
> 
> Mac (gwtex, mactex) also uses texmf.local. (Well, also many others,
> but that one is most evident.)

Try this: if you run

   $ kpsewhich texmf.cnf

when there are *no* variables set, what file does it return?
Extending the lua function is easy, we just need to know how.

Actually, I just tried that on my machine and it seems that
it first tries three things we don't do:

    /opt/tex/texmf-linux/bin/texmf.cnf
and
    /opt/tex/texmf-linux/texmf.cnf
and
    /opt/tex/texmf.cnf

the third of those should capture your file, right?

> I have just tested it and it didn't work as expected.
> 
> MK II:
> 
>>  texexec --make --xtx --all
> 
> (formats have always flied to texmf-osx-intel so far)

This depends on your actual texmf.cnf settings. Likely
they are not quite te same as the ENV variables used to be.

Esp, check TEXFORMATS.

> I can't find the format file `cont-en.fmt'!

Same issue here. To get back to what you used to have,
you probably want these two in texmf.cnf:

   TEXMFOS    = $SELFAUTODIR
   TEXFORMATS = .;$TEXMFOS/web2c/{$engine,}


Best wishes,
Taco

From pragma at wxs.nl  Fri May 23 09:27:45 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 23 May 2008 09:27:45 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>
References: <6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<20080521172729.GM21340@phare.normalesup.org>
	<6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>
Message-ID: <483671F1.7080407@wxs.nl>

Mojca Miklavec wrote:
> On Wed, May 21, 2008 at 7:27 PM, Arthur Reutenauer wrote:
>>> So, assuming /opt/tex/texmf-linux/bin, it attempts the following
>>> directories, in this order:
>>>
>>>    [/opt/tex/texmf]/web2c                    % two parents up
>>>    [/opt/tex/texmf-linux]/texmf/web2c        % one parent up
>>>    [/opt/tex]/texmf-local/web2c
>>>    [/opt/tex/texmf-linux]/texmf-local/web2c
> 
> Mac (gwtex, mactex) also uses texmf.local. (Well, also many others,
> but that one is most evident.)

well, this is the chicken or egg problem .. of course we can go through 
two cycles (locate config, load config, filter only texmf from it, 
relocate again, maybe more cnf files, reload again, maybe even different 
texmf vars, locata another time, load again, ... etc) but for sure 
something else shows up then; the problem is that although there is a 
kind of standard (tds) there is no such standard for distributions ... 
the names of trees keep changing and we deciced to stick to texmf and 
texmf-local

(the problem is that it does not get faster either, in theory setuptex 
is faster than just setting the path and figuring things out then for 
each run ... depends a bit on the system, network or not, etc)

>>  Thats's great!  It works on my machine without the need to set any
>> environment variable (I even tried two different arrangments of the
>> directories).
> 
> I have just tested it and it didn't work as expected.

you probably have a non typical system ... this approach assumes a 
simple tree setup with the main cnf in texmf or texmf-local ...

> TeXExec | tex engine path: /Users/mojca/context/tex/texmf-context/web2c/xetex
> TeXExec | mps engine path: /Users/mojca/context/tex/texmf-context/web2c

that is something we don't want ... there is another autovar we need to 
set (i need to check texmfstart for it); setuptex sets up TEXOS and from 
that derives the path for formats; this makes it possible to use one 
three with different binaries (even different versions) for multiple 
platforms

> (formats have always flied to texmf-osx-intel so far)

welcome to the mess ... kpse/web2c never had a provision for formats, 
i.e. the progs that generate the format need to sort out things, and 
then the env var (or var in texmf.cnf) have to locate it;

in the worst case you end up with multiple fmt files .. you need to 
delete the ones in texmf-context once we get them in texmf-macosx again 
depending on the order (ok, setuptex just sets up *one* path, so that's 
safe but this is not the case with the cnf file)

> MtxRun | error unable to locate texmfcnf.lua

no problem, you don't have one

> I definitely need to add texmfcnf.lua, but just a quick overview of
> non-working solutions :)

hm, not needed, unless you want to set the cache

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Fri May 23 09:31:22 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 23 May 2008 09:31:22 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <6faad9f00805222347n675fba53o6710b1c6c55efad0@mail.gmail.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>
	<6faad9f00805222347n675fba53o6710b1c6c55efad0@mail.gmail.com>
Message-ID: <483672CA.6050902@wxs.nl>

Mojca Miklavec wrote:

> Here I have the cnf file under
>     /usr/local/gwTeX/texmf.cnf

huh, in the root of the tree? is that also true for upcoming versions? 
i'm not sure if we should support all variants of trees and maybe gwtex 
assumes an env var to be set?

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From mojca.miklavec.lists at gmail.com  Fri May 23 09:32:40 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 23 May 2008 09:32:40 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48366E9C.9060603@elvenkind.com>
References: <6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<4833F308.4080408@elvenkind.com>
	<20080521172729.GM21340@phare.normalesup.org>
	<6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>
	<48366E9C.9060603@elvenkind.com>
Message-ID: <6faad9f00805230032t5f8e3bd5k2bf15a6b6077795a@mail.gmail.com>

On Fri, May 23, 2008 at 9:13 AM, Taco Hoekwater <taco at elvenkind.com> wrote:
>
>
> Mojca Miklavec wrote:
>>
>> On Wed, May 21, 2008 at 7:27 PM, Arthur Reutenauer wrote:
>>>>
>>>> So, assuming /opt/tex/texmf-linux/bin, it attempts the following
>>>> directories, in this order:
>>>>
>>>>   [/opt/tex/texmf]/web2c                    % two parents up
>>>>   [/opt/tex/texmf-linux]/texmf/web2c        % one parent up
>>>>   [/opt/tex]/texmf-local/web2c
>>>>   [/opt/tex/texmf-linux]/texmf-local/web2c
>>
>> Mac (gwtex, mactex) also uses texmf.local. (Well, also many others,
>> but that one is most evident.)
>
> Try this: if you run
>
>  $ kpsewhich texmf.cnf
>
> when there are *no* variables set, what file does it return?
> Extending the lua function is easy, we just need to know how.
>
> Actually, I just tried that on my machine and it seems that
> it first tries three things we don't do:
>
>   /opt/tex/texmf-linux/bin/texmf.cnf
> and
>   /opt/tex/texmf-linux/texmf.cnf
> and
>   /opt/tex/texmf.cnf
>
> the third of those should capture your file, right?

Yes, thanks :)
I only need to test this a bit more.

>> I have just tested it and it didn't work as expected.
>>
>> MK II:
>>
>>>  texexec --make --xtx --all
>>
>> (formats have always flied to texmf-osx-intel so far)
>
> This depends on your actual texmf.cnf settings. Likely
> they are not quite te same as the ENV variables used to be.
>
> Esp, check TEXFORMATS.

TEXMF = {!!$TEXMFPROJECT,!!$TEXMFFONTS,!!$TEXMFLOCAL,!!$TEXMFCONTEXT,!!$TEXMFEXTRA,!!$TEXMFMAIN}
TEXFORMATS    = .;$TEXMF/web2c{/$engine,}

>> I can't find the format file `cont-en.fmt'!
>
> Same issue here. To get back to what you used to have,
> you probably want these two in texmf.cnf:
>
>  TEXMFOS    = $SELFAUTODIR
>  TEXFORMATS = .;$TEXMFOS/web2c/{$engine,}

Great, thanks :) This works wonderful :)

mkii is now (almost) setuptex-free? I need to check the rest, but I'm
already fixing this one.

Mojca

From pragma at wxs.nl  Fri May 23 09:34:16 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 23 May 2008 09:34:16 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <6faad9f00805222351g9472009s71c02bf0b026dbd5@mail.gmail.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<6faad9f00805222347n675fba53o6710b1c6c55efad0@mail.gmail.com>
	<6faad9f00805222351g9472009s71c02bf0b026dbd5@mail.gmail.com>
Message-ID: <48367378.3090309@wxs.nl>

Mojca Miklavec wrote:
>> Unrelated - how exactly do I set TEXMFCACHE to be in texmf-cache
>> alongside other texmf trees?
>> I have tried (I know that this cannot work):
>>    TEXMFCACHE = '$TEXROOT/texmf-cache',
>> but TEXROOT is probably unknown anyway
> 
> I forgot to finish the sentence:
> 
> with this setting I get
> 
> luatools --generate
> 
> LuaTools | loading configuration file
> /Users/mojca/context/tex/texmf/web2c/texmfcnf.lua
> LuaTools | loading
> /Users/mojca/context/tex/texmf/web2c/texmf.cnfShould I create the
> cache path /texmf-cache? [yes|no] [no]
> 
> every time, independent on whether I answer with yes or no. And
> everytime cache is generated under $HOME/luatex-cache. I guess that
> $TOXROOT is simply empty and /texmf-cache is not writable by me.

indeed, TEXROOT is an internal setuptex variable; actually, the only 
thing that setuptex sets up is TEXMF, TEXMFCNF, TEXFORMATS and 
TEXMFCACHE; the rest is nilling interfering variables and a few 
intermedia ones that save typing (TEXOS, TEXROOT)

in the path bases variant, you cannot use TEXOS and TEXROOT since they 
don't exist; you can try TEXMFCACHE=/tmp

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Fri May 23 09:38:37 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 23 May 2008 09:38:37 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <6faad9f00805222347n675fba53o6710b1c6c55efad0@mail.gmail.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>	
	<4831342A.4050109@elvenkind.com>	
	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	
	<48313F05.2020607@wxs.nl>	
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	
	<48319B67.5080206@elvenkind.com>	
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	
	<4832D5D1.8070108@elvenkind.com>	
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	
	<4833F308.4080408@elvenkind.com>
	<6faad9f00805222347n675fba53o6710b1c6c55efad0@mail.gmail.com>
Message-ID: <4836747D.3050508@elvenkind.com>


Hi Mojca, (and Hans)

Mojca Miklavec wrote:
> 
> Shouldn't local have some precedence over texmf? (Maybe I'm wrong.)

Yes (see below).

> Unrelated - how exactly do I set TEXMFCACHE to be in texmf-cache
> alongside other texmf trees?
> I have tried (I know that this cannot work):
>     TEXMFCACHE = '$TEXROOT/texmf-cache',
> but TEXROOT is probably unknown anyway

It is not (because texmfcnf.lua is read before everything else).
There is SELFAUTOPARENT; I guess that is the only variable already
defined at that point.

   TEXMFCACHE = '$SELFAUTOPARENT/texmf-cache',

should work.

> Maybe it's still respecting the order in
> TEXMFCACHE    = $TMP;$TEMP;$TMPDIR;$TEMPDIR;$HOME;$TEXMFVAR;$VARTEXMF;.

Not that ordering *exactly* because texmf.cnf is not read yet,
but a compiled-in version of that.

> from texmf.cnf, and $TMP doesn't exist on mac, 

Which is odd, to say the least. Where *do* temporary files go on OSX?

> The only problem with mkii: basically works, but texexec --make puts
> formats under texmf-context and the kpathsea doesn't find them for
> some reason. If format is put under texmf-engine/web2c, everything
> works out of the box afterwards (with only path variable being set).

See above.
Note: You may even have to run mktexlsr after format generation,
because you are now totally at the mercy of the kpathsea library.

-------------------------------------------------------------------

Mostly for Hans and mkiv, here is some more information about these
AUTO-things:

It turns out here are actually three variables, each a well-defined
value, single value. Starting from the actual binary location, they are
the relative paths:

   SELFAUTOLOC=.
   SELFAUTODIR=..
   SELFAUTOPARENT=../..

And kpathsea uses these variables in a compile-time default of TEXMFCNF.
My 'kpsewhich' actually tries for texmf.cnf in the following chain:

   /opt/tex/texmf-linux/bin
   /opt/tex/texmf-linux
   /opt/tex
   /opt/tex/texmf-linux/bin/share/texmf-local/web2c
   /opt/tex/texmf-linux    /share/texmf-local/web2c
   /opt/tex                /share/texmf-local/web2c
   /opt/tex/texmf-linux/bin/texmf-local/web2c
   /opt/tex/texmf-linux    /texmf-local/web2c
   /opt/tex                /texmf-local/web2c
   /opt/tex/texmf-linux/bin/share/texmf/web2c
   /opt/tex/texmf-linux    /share/texmf/web2c
   /opt/tex                /share/texmf/web2c
   /opt/tex/texmf-linux/bin/texmf/web2c
   /opt/tex/texmf-linux    /texmf/web2c
   /opt/tex                /texmf/web2c
   .
   /home/fmorel/Build/source/inst/texmf/web2c
   /home/fmorel/Build/source/inst/texmf/web2c

And that is because my build/texk/kpathsea/texmf.cnf has

TEXMFCNF = 
{$SELFAUTOLOC,$SELFAUTODIR,$SELFAUTOPARENT}{,{/share,}/texmf{-local,}/web2c}


The '.' is also useful methinks, but the two '/home/fmorel' ones
are a bit of a fluke: they are added based on the user that ran
autoconf, which is almost certainly irrelevant.


At first glance, kpsewich seems it indeed finds only the first
texmf.cnf, but that may be because I only have one :-)

Best wishes,
Taco



From mojca.miklavec.lists at gmail.com  Fri May 23 09:45:42 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 23 May 2008 09:45:42 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <6faad9f00805230032t5f8e3bd5k2bf15a6b6077795a@mail.gmail.com>
References: <6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<4833F308.4080408@elvenkind.com>
	<20080521172729.GM21340@phare.normalesup.org>
	<6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>
	<48366E9C.9060603@elvenkind.com>
	<6faad9f00805230032t5f8e3bd5k2bf15a6b6077795a@mail.gmail.com>
Message-ID: <6faad9f00805230045s724a603vbd66d23103cf03f1@mail.gmail.com>

Which variables on this list are still needed? only mpmems?

MFBASES       = .;$TEXFORMATS
MPMEMS        = .;$TEXFORMATS

TEXPOOL       = .;$TEXFORMATS
MFPOOL        = .;$TEXFORMATS
MPPOOL        = .;$TEXFORMATS

>> from texmf.cnf, and $TMP doesn't exist on mac,
> Which is odd, to say the least. Where *do* temporary files go on OSX?

To /tmp, but there is no $TMP or $TEMP defined anywhere.

Mojca

From taco at elvenkind.com  Fri May 23 09:59:18 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 23 May 2008 09:59:18 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <6faad9f00805230045s724a603vbd66d23103cf03f1@mail.gmail.com>
References: <6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	
	<48319B67.5080206@elvenkind.com>	
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	
	<4832D5D1.8070108@elvenkind.com>	
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	
	<4833F308.4080408@elvenkind.com>	
	<20080521172729.GM21340@phare.normalesup.org>	
	<6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>	
	<48366E9C.9060603@elvenkind.com>	
	<6faad9f00805230032t5f8e3bd5k2bf15a6b6077795a@mail.gmail.com>
	<6faad9f00805230045s724a603vbd66d23103cf03f1@mail.gmail.com>
Message-ID: <48367956.7050006@elvenkind.com>



Mojca Miklavec wrote:
> Which variables on this list are still needed? only mpmems?

Perhaps pdftex still needs TEXPOOL?



From mojca.miklavec.lists at gmail.com  Fri May 23 10:05:53 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 23 May 2008 10:05:53 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48367956.7050006@elvenkind.com>
References: <6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<4833F308.4080408@elvenkind.com>
	<20080521172729.GM21340@phare.normalesup.org>
	<6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>
	<48366E9C.9060603@elvenkind.com>
	<6faad9f00805230032t5f8e3bd5k2bf15a6b6077795a@mail.gmail.com>
	<6faad9f00805230045s724a603vbd66d23103cf03f1@mail.gmail.com>
	<48367956.7050006@elvenkind.com>
Message-ID: <6faad9f00805230105j1c1ecdc5xc33ef96c63c50275@mail.gmail.com>

On Fri, May 23, 2008 at 9:59 AM, Taco Hoekwater wrote:
> Mojca Miklavec wrote:
>>
>> Which variables on this list are still needed? only mpmems?
>
> Perhaps pdftex still needs TEXPOOL?

The minimals don't have any pool or mem files any more.
(But I need to compile and uploda the "new" pdfTeX binaries for osx.)

Mojca

From mojca.miklavec.lists at gmail.com  Fri May 23 10:10:16 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 23 May 2008 10:10:16 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48367378.3090309@wxs.nl>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<4833F308.4080408@elvenkind.com>
	<6faad9f00805222347n675fba53o6710b1c6c55efad0@mail.gmail.com>
	<6faad9f00805222351g9472009s71c02bf0b026dbd5@mail.gmail.com>
	<48367378.3090309@wxs.nl>
Message-ID: <6faad9f00805230110p6d31ba13r41bcf23b17eed965@mail.gmail.com>

On Fri, May 23, 2008 at 9:34 AM, Hans Hagen wrote:
> Mojca Miklavec wrote:
>
> in the path bases variant, you cannot use TEXOS and TEXROOT since they don't
> exist; you can try TEXMFCACHE=/tmp

I know, but I do not want the cache to go to /tmp. It's still nice to
be able to reuse it from time to time.

Mojca

From mojca.miklavec.lists at gmail.com  Fri May 23 10:15:18 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 23 May 2008 10:15:18 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <483672CA.6050902@wxs.nl>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>
	<48313F05.2020607@wxs.nl>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<4833F308.4080408@elvenkind.com>
	<6faad9f00805222347n675fba53o6710b1c6c55efad0@mail.gmail.com>
	<483672CA.6050902@wxs.nl>
Message-ID: <6faad9f00805230115l52b41e2ahf064d22d7c47fc97@mail.gmail.com>

On Fri, May 23, 2008 at 9:31 AM, Hans Hagen wrote:
> Mojca Miklavec wrote:
>
>> Here I have the cnf file under
>>    /usr/local/gwTeX/texmf.cnf
>
> huh, in the root of the tree? is that also true for upcoming versions? i'm
> not sure if we should support all variants of trees and maybe gwtex assumes
> an env var to be set?

In gwTeX there is only one variable, namely PATH is set to
/usr/texbin, and that is a symlink to the proper version of binaries
(/usr/local/gwTeX/bin/i386-apple-darwin8.8.1 in my case). Nothing else
is needed, even though Oliver might explain more details if needed.

>From what Taco explained, that configuration should already be OK.

Taco or Norbert: are there any plans to remove that /home/username
from kpathsea search path? (the lowest possible priority though)

Thanks,
    Mojca

From pragma at wxs.nl  Fri May 23 10:34:02 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 23 May 2008 10:34:02 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <6faad9f00805230115l52b41e2ahf064d22d7c47fc97@mail.gmail.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>	
	<48313F05.2020607@wxs.nl>	
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	
	<48319B67.5080206@elvenkind.com>	
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	
	<4832D5D1.8070108@elvenkind.com>	
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	
	<4833F308.4080408@elvenkind.com>	
	<6faad9f00805222347n675fba53o6710b1c6c55efad0@mail.gmail.com>	
	<483672CA.6050902@wxs.nl>
	<6faad9f00805230115l52b41e2ahf064d22d7c47fc97@mail.gmail.com>
Message-ID: <4836817A.3040200@wxs.nl>

Mojca Miklavec wrote:
> On Fri, May 23, 2008 at 9:31 AM, Hans Hagen wrote:
>> Mojca Miklavec wrote:
>>
>>> Here I have the cnf file under
>>>    /usr/local/gwTeX/texmf.cnf
>> huh, in the root of the tree? is that also true for upcoming versions? i'm
>> not sure if we should support all variants of trees and maybe gwtex assumes
>> an env var to be set?
> 
> In gwTeX there is only one variable, namely PATH is set to
> /usr/texbin, and that is a symlink to the proper version of binaries
> (/usr/local/gwTeX/bin/i386-apple-darwin8.8.1 in my case). Nothing else
> is needed, even though Oliver might explain more details if needed.
> 
> From what Taco explained, that configuration should already be OK.

gwtex can have a patched default for TEXMFCNF (i.e the period instead of 
the -)

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From mojca.miklavec.lists at gmail.com  Fri May 23 10:46:02 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 23 May 2008 10:46:02 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48368240.8090708@wxs.nl>
References: <6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<4833F308.4080408@elvenkind.com>
	<20080521172729.GM21340@phare.normalesup.org>
	<6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>
	<48366E9C.9060603@elvenkind.com>
	<6faad9f00805230032t5f8e3bd5k2bf15a6b6077795a@mail.gmail.com>
	<6faad9f00805230045s724a603vbd66d23103cf03f1@mail.gmail.com>
	<48368240.8090708@wxs.nl>
Message-ID: <6faad9f00805230146s295ead94w8d22004e42e4fcff@mail.gmail.com>

On Fri, May 23, 2008 at 10:37 AM, Hans Hagen wrote:
> Mojca Miklavec wrote:
>>
>> Which variables on this list are still needed? only mpmems?
>>
>> MFBASES       = .;$TEXFORMATS
>> MPMEMS        = .;$TEXFORMATS
>>
>> TEXPOOL       = .;$TEXFORMATS
>> MFPOOL        = .;$TEXFORMATS
>> MPPOOL        = .;$TEXFORMATS
>>
>>>> from texmf.cnf, and $TMP doesn't exist on mac,
>>>
>>> Which is odd, to say the least. Where *do* temporary files go on OSX?
>
> i think that only mf still has a pool file (and probably also tex and etex
> and omega and aleph)

As far as I know, Akira got rid of them in W32TeX (but not 100% sure).

>> To /tmp, but there is no $TMP or $TEMP defined anywhere.
>
> weird, maybe they use some apple name, like $WASTEBIN or $THRASH

No. They use /tmp. I guess.

Mojca

From pragma at wxs.nl  Fri May 23 10:37:20 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 23 May 2008 10:37:20 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <6faad9f00805230045s724a603vbd66d23103cf03f1@mail.gmail.com>
References: <6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<20080521172729.GM21340@phare.normalesup.org>	<6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>	<48366E9C.9060603@elvenkind.com>	<6faad9f00805230032t5f8e3bd5k2bf15a6b6077795a@mail.gmail.com>
	<6faad9f00805230045s724a603vbd66d23103cf03f1@mail.gmail.com>
Message-ID: <48368240.8090708@wxs.nl>

Mojca Miklavec wrote:
> Which variables on this list are still needed? only mpmems?
> 
> MFBASES       = .;$TEXFORMATS
> MPMEMS        = .;$TEXFORMATS
> 
> TEXPOOL       = .;$TEXFORMATS
> MFPOOL        = .;$TEXFORMATS
> MPPOOL        = .;$TEXFORMATS
> 
>>> from texmf.cnf, and $TMP doesn't exist on mac,
>> Which is odd, to say the least. Where *do* temporary files go on OSX?

i think that only mf still has a pool file (and probably also tex and 
etex and omega and aleph)

> To /tmp, but there is no $TMP or $TEMP defined anywhere.

weird, maybe they use some apple name, like $WASTEBIN or $THRASH

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From oliver.buerschaper at mpq.mpg.de  Fri May 23 13:38:17 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Fri, 23 May 2008 13:38:17 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <4833EF22.6040204@capdm.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<48335273.40400@wxs.nl>
	<E71DB91B-35BD-44FF-986C-926BF4FDA192@mpq.mpg.de>
	<4833EF22.6040204@capdm.com>
Message-ID: <16A81E92-CB25-4979-868F-21CE4ED3B833@mpq.mpg.de>

> I think you may have misunderstood the purpose of the minimals.
> "Minimal" here generally refers to effort - both on Hans' side and on
> the user's side - rather than any notion of these distributions being
> stripped down. There has been some discussion on the main list of the
> stripped down distribution type that I think you're looking for, but
> it's important to know that the minimals are *not* it. The minimals  
> are
> designed as an "unzip and go" *complete* package - "everything with
> minimal effort", not "the minimum you need to get started".

Indeed, I followed the thread about the ultraminimals on the other  
list. However, I wasn't talking about stripping down Hans' standalone  
distribution to the bare minimum ... this would certainly need  
"maximal" rather than "minimal" effort on Hans' and Taco's side. What  
I was striving for is merely stripping down the complexity of the  
configuration mechanism for now. Most probably this would reduce a  
package developer's effort from "maximal" to "intermediate".

Modularizing the whole distribution into small, cleanly separated  
components is quite another project. Without doubt ConTeXt would  
benefit a great deal from that but this is *not* the issue I was  
addressing in my post.


> This is also illuminating. The concept of the setuptex script (as I
> understand it) is precisely to allow the minimals to operate  
> completely
> independently of any other installed TeX systems. The point is that  
> you
> only run the setuptex script in the shell in which you want to run
> ConTeXt. These environment variables aren't meant to be set globally
> (again, AFAIK), they are meant to be set for the session.

There I think you've exactly pinned down the problem. Each application  
wanting to run ConTeXt must call it from a wrapper script which sets  
these environment variables for the local shell. Keep in mind though  
that (at least on the Mac) this wrapper script is only needed for the  
minimals ... and certainly not for the ConTeXt from TeX Live, for  
example. If you use TeXShop as your frontend you'd then have to have  
different ConTeXt typesetting commands for each and every TeX  
distribution on your machine. Not exactly user-friendly ...

Oliver

From taco at elvenkind.com  Fri May 23 13:45:11 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 23 May 2008 13:45:11 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <16A81E92-CB25-4979-868F-21CE4ED3B833@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<48335273.40400@wxs.nl>	<E71DB91B-35BD-44FF-986C-926BF4FDA192@mpq.mpg.de>	<4833EF22.6040204@capdm.com>
	<16A81E92-CB25-4979-868F-21CE4ED3B833@mpq.mpg.de>
Message-ID: <4836AE47.2040101@elvenkind.com>



Oliver Buerschaper wrote:
> 
> example. If you use TeXShop as your frontend you'd then have to have  
> different ConTeXt typesetting commands for each and every TeX  
> distribution on your machine. Not exactly user-friendly ...

Have you read the other thread here?



From taco at elvenkind.com  Fri May 23 15:12:55 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 23 May 2008 15:12:55 +0200
Subject: [dev-context] Setuptex removal
Message-ID: <4836C2D7.7080504@elvenkind.com>

Hi,

As of about five minutes ago, there is a new beta of context
available from pragma-ade. In that, Hans has improved the
non-setuptex initialization even more, and it is now close
enough to kpathsea that nobody should notice the difference
in practise. Here is how it goes:

* You still need the 'tex binaries' directory in the PATH.

* Based on that, MKIV now always initializes the virtual variables
   $SELFAUTOLOC, $SELFAUTODIR and $SELFAUTOPARENT

* If $TEXMFCNF is not set, the following default is used:

'{$SELFAUTODIR,$SELFAUTOPARENT}{,{/share,}/texmf{-local,.local,}/web2c}'

   This is a tiny little bit different from texlive, but should
   not make a difference in practise. (The addition of .local is
   especially for gwtex, and we dropped $SELFAUTOLOC from this
   path)

* MKIV now also pre-initializes

     $TEXOS  ==  $SELFAUTODIR
   and
     $TEXROOT  ==  $SELFAUTOPARENT

   as an extra service (and to allow you to mask the weird
   SELF... variable names from plain view in texmf.cnf)

As noted already, MKII does not need those env vars anyway.

Best wishes,
Taco


From oliver.buerschaper at mpq.mpg.de  Fri May 23 15:17:21 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Fri, 23 May 2008 15:17:21 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48347B63.2040403@wxs.nl>
References: <CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<20080521172729.GM21340@phare.normalesup.org>	<48345C94.3020604@wxs.nl>
	<20080521174259.GN21340@phare.normalesup.org>
	<48347B63.2040403@wxs.nl>
Message-ID: <D77D75BD-4668-4911-AF9B-02B8A3005BD9@mpq.mpg.de>

> (btw, it would be interesting to know to what extend linux/osx set up
> possible conflicting variables; when i made setuptex i had to take  
> care
> of everything that a sysadm had set up (for instance in a project
> outside our company where the users has to deal with very old tex's
> hanging around and not being updated or lagging two years behind, and
> setuptex is then the only way to keep interference away)

On my machine (Mac OS X 10.5.2) with only the MacTeX distribution (TeX  
Live 2007 for Mac) installed no environment variable whatsoever is set  
that's related to TeX in any way ... I can't comment on older  
distributions though.

Oliver

From taco at elvenkind.com  Fri May 23 15:22:46 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 23 May 2008 15:22:46 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <D77D75BD-4668-4911-AF9B-02B8A3005BD9@mpq.mpg.de>
References: <CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<20080521172729.GM21340@phare.normalesup.org>	<48345C94.3020604@wxs.nl>	<20080521174259.GN21340@phare.normalesup.org>	<48347B63.2040403@wxs.nl>
	<D77D75BD-4668-4911-AF9B-02B8A3005BD9@mpq.mpg.de>
Message-ID: <4836C526.6000507@elvenkind.com>



Oliver Buerschaper wrote:
>> (btw, it would be interesting to know to what extend linux/osx set up
>> possible conflicting variables; when i made setuptex i had to take  
>> care
>> of everything that a sysadm had set up (for instance in a project
>> outside our company where the users has to deal with very old tex's
>> hanging around and not being updated or lagging two years behind, and
>> setuptex is then the only way to keep interference away)
> 
> On my machine (Mac OS X 10.5.2) with only the MacTeX distribution (TeX  
> Live 2007 for Mac) installed no environment variable whatsoever is set  
> that's related to TeX in any way ... 

Same here currently, but I have had many linuxes with TEXINPUTS set,
sometimes without even a tex installed at all, and traditionally tex
on dos/win needed a bunch of environment variables as well.

But never mind that, all should be good now.

Best wishes,
Taco





From oliver.buerschaper at mpq.mpg.de  Fri May 23 14:57:41 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Fri, 23 May 2008 14:57:41 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <4833F308.4080408@elvenkind.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>
	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>
	<48313F05.2020607@wxs.nl>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<4833F308.4080408@elvenkind.com>
Message-ID: <AE89EC4E-5007-4BA0-A5A9-9F57B1B73E3E@mpq.mpg.de>

Hi Taco,

first of all, thanks very much for your long and detailed explanation!  
I appreciate very much what you and Hans have come up with during the  
last days. I'm afraid I haven't had time yet to try out the new  
configuration mechanism but I'm going to do so over the weekend and  
will get back to you afterwards ...

In the meantime, some more thoughts of mine below ...

---

> Yes, and even if we try really hard to not insert bugs, it simply
> cannot be helped. There is no regression test suite at the moment,
> and nobody seems motivated to create one. Hans and I certainly do
> not have time to set such a thing up.
>
> But even if there was a test suite: it would likely run for days
> on end, so we could probably not afford to run it before each
> release in any case.

I agree that the appearance of bugs in complex systems cannot be  
avoided in principle. It's probably safe to accept this as a natural  
law ;-)

On the possible running time of a regression test suite I can't  
comment at all simply because so far I haven't used any actively. From  
what I hear though wellknown open source projects tend to run any new  
code contributions against a test suite before they're actually  
committed to the main repository.

Should this be impossible for every development version of ConTeXt,  
one could perhaps single out a suitable one as a release candidate and  
then run it against torture tests. It would then only be released  
after all bugs revealed by the regression test had been ironed out.  
TeX Live could be the target for such a process, or generally the  
standalone distributions tweaked for each platform.

Given that there is a test suite, of course. Perhaps the easiest route  
to a regression test suite would be to promote the bug tracking system  
more actively among users: after all, with each reported bug comes a  
test file. Most tests would probably still require reduction but if  
flagged appropiately these might be a welcome challenge for the power  
users (they appear to isolate bugs on the mailing list anyway).  
Secondly, one would probably need a clear interface specification for  
ConTeXt in order to be sure what the exact result of a test should be.

Maybe I've touched upon things which have already been tried and  
discarded. Also I might be overly optimistic. Still, comments and  
suggestions most welcome.


> What we have so far only applies to mkiv,
> but doing a similar thing to texmfstart (and thereby all of mkii)  
> should
> be relatively simple.

 From what I've seen the MKII part of the minimals doesn't appear to  
need any environment variables. This applies at least to version  
2008.04.18 which is the release I singled out by chance in order to  
figure out the details of wrapping up a Mac package. This is also  
where my confusion came from and why I started asking you about the  
situation in MKIV ...

Best wishes,
Oliver

From oliver.buerschaper at mpq.mpg.de  Fri May 23 15:40:56 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Fri, 23 May 2008 15:40:56 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <6faad9f00805230045s724a603vbd66d23103cf03f1@mail.gmail.com>
References: <6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<4833F308.4080408@elvenkind.com>
	<20080521172729.GM21340@phare.normalesup.org>
	<6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>
	<48366E9C.9060603@elvenkind.com>
	<6faad9f00805230032t5f8e3bd5k2bf15a6b6077795a@mail.gmail.com>
	<6faad9f00805230045s724a603vbd66d23103cf03f1@mail.gmail.com>
Message-ID: <7406F1B4-704C-4C44-9075-FDF0A91D29E7@mpq.mpg.de>

>> Which is odd, to say the least. Where *do* temporary files go on OSX?
>
> To /tmp, but there is no $TMP or $TEMP defined anywhere.

In Mac OS X 10.5.2 there's a $TMPDIR environment variable if that  
helps ...

Oliver

From oliver.buerschaper at mpq.mpg.de  Fri May 23 16:07:38 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Fri, 23 May 2008 16:07:38 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <6faad9f00805230115l52b41e2ahf064d22d7c47fc97@mail.gmail.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>
	<48313F05.2020607@wxs.nl>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<4833F308.4080408@elvenkind.com>
	<6faad9f00805222347n675fba53o6710b1c6c55efad0@mail.gmail.com>
	<483672CA.6050902@wxs.nl>
	<6faad9f00805230115l52b41e2ahf064d22d7c47fc97@mail.gmail.com>
Message-ID: <2F9E373A-EB1A-4E37-B34C-1CAF748CD2BF@mpq.mpg.de>

> In gwTeX there is only one variable, namely PATH is set to
> /usr/texbin, and that is a symlink to the proper version of binaries
> (/usr/local/gwTeX/bin/i386-apple-darwin8.8.1 in my case). Nothing else
> is needed, even though Oliver might explain more details if needed.

If I'm not mistaken this not only applies to gwTeX but rather to all  
TeX distributions on the Mac once MacTeX is installed. Although MacTeX  
looks like merely a repackaged TeX Live 2007 at first glance, it does  
come with an additional management structure for multiple TeX  
distributions. This additional layer consists both of a GUI part and a  
command line tool and is by itself completely independent of TeX Live.  
Unfortunately it's not yet distributed as an individual package  
(although this might change in the future).

Anyway, as soon as a TeX distribution for the Mac brings along  
suitable information about itself this management layer will be able  
to seamlessly switch from one distribution to the next by adjusting  
only the symbolic link  Mojca mentioned. In case you're wondering, for  
most old distributions that shipped before MacTeX this information is  
provided by the switching layer.

This mechanism is most probably the reason why TeX Live 2007 doesn't  
leave any trail of environment variables behind and also why this  
would be highly undesirable for any TeX distribution on the Mac.

Oliver

From pragma at wxs.nl  Fri May 23 16:23:30 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 23 May 2008 16:23:30 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <7406F1B4-704C-4C44-9075-FDF0A91D29E7@mpq.mpg.de>
References: <6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<20080521172729.GM21340@phare.normalesup.org>	<6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>	<48366E9C.9060603@elvenkind.com>	<6faad9f00805230032t5f8e3bd5k2bf15a6b6077795a@mail.gmail.com>	<6faad9f00805230045s724a603vbd66d23103cf03f1@mail.gmail.com>
	<7406F1B4-704C-4C44-9075-FDF0A91D29E7@mpq.mpg.de>
Message-ID: <4836D362.5070500@wxs.nl>

Oliver Buerschaper wrote:
>>> Which is odd, to say the least. Where *do* temporary files go on OSX?
>> To /tmp, but there is no $TMP or $TEMP defined anywhere.
> 
> In Mac OS X 10.5.2 there's a $TMPDIR environment variable if that  
> helps ...

when discussing the cache Arthur had a preference for HOME, so home is 
tested before TMPDIR

personally i prefer TEMP || TMP || TMPDIR || HOME

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From oliver.buerschaper at mpq.mpg.de  Fri May 23 16:32:56 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Fri, 23 May 2008 16:32:56 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <4836D362.5070500@wxs.nl>
References: <6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<20080521172729.GM21340@phare.normalesup.org>	<6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>	<48366E9C.9060603@elvenkind.com>	<6faad9f00805230032t5f8e3bd5k2bf15a6b6077795a@mail.gmail.com>	<6faad9f00805230045s724a603vbd66d23103cf03f1@mail.gmail.com>
	<7406F1B4-704C-4C44-9075-FDF0A91D29E7@mpq.mpg.de>
	<4836D362.5070500@wxs.nl>
Message-ID: <D044B316-7807-4AF6-921C-5D876E226576@mpq.mpg.de>

> when discussing the cache Arthur had a preference for HOME, so home  
> is tested before TMPDIR

On a Mac the (persistent) user cache should probably go to a  
subdirectoy of $HOME/Library/Caches/ because this is where most  
applications store  their cache data. Will have to check back with the  
Apple file system specification though ...

Oliver


From pragma at wxs.nl  Fri May 23 16:58:49 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 23 May 2008 16:58:49 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <D044B316-7807-4AF6-921C-5D876E226576@mpq.mpg.de>
References: <6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<20080521172729.GM21340@phare.normalesup.org>	<6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>	<48366E9C.9060603@elvenkind.com>	<6faad9f00805230032t5f8e3bd5k2bf15a6b6077795a@mail.gmail.com>	<6faad9f00805230045s724a603vbd66d23103cf03f1@mail.gmail.com>
	<7406F1B4-704C-4C44-9075-FDF0A91D29E7@mpq.mpg.de>
	<4836D362.5070500@wxs.nl>
	<D044B316-7807-4AF6-921C-5D876E226576@mpq.mpg.de>
Message-ID: <4836DBA9.6010001@wxs.nl>

Oliver Buerschaper wrote:
>> when discussing the cache Arthur had a preference for HOME, so home is 
>> tested before TMPDIR
> 
> On a Mac the (persistent) user cache should probably go to a subdirectoy 
> of $HOME/Library/Caches/ because this is where most applications store  
> their cache data. Will have to check back with the Apple file system 
> specification though ...

in that case you need to set it up in texmfcnf.lua

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From arthur.reutenauer at normalesup.org  Fri May 23 17:21:31 2008
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Fri, 23 May 2008 17:21:31 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48368240.8090708@wxs.nl>
References: <E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<4833F308.4080408@elvenkind.com>
	<20080521172729.GM21340@phare.normalesup.org>
	<6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>
	<48366E9C.9060603@elvenkind.com>
	<6faad9f00805230032t5f8e3bd5k2bf15a6b6077795a@mail.gmail.com>
	<6faad9f00805230045s724a603vbd66d23103cf03f1@mail.gmail.com>
	<48368240.8090708@wxs.nl>
Message-ID: <20080523152131.GC21340@phare.normalesup.org>

>> To /tmp, but there is no $TMP or $TEMP defined anywhere.
> 
> weird, maybe they use some apple name, like $WASTEBIN or $THRASH

  We already had that discussion: very few systems actually set TMP or
TEMP (the first public releases of Mark IV used to assume it was set,
and subsequently created luatex-cache in the current directory since it
wasn't).

	Arthur

From pragma at wxs.nl  Fri May 23 17:26:41 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 23 May 2008 17:26:41 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <20080523152131.GC21340@phare.normalesup.org>
References: <E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<20080521172729.GM21340@phare.normalesup.org>	<6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>	<48366E9C.9060603@elvenkind.com>	<6faad9f00805230032t5f8e3bd5k2bf15a6b6077795a@mail.gmail.com>	<6faad9f00805230045s724a603vbd66d23103cf03f1@mail.gmail.com>	<48368240.8090708@wxs.nl>
	<20080523152131.GC21340@phare.normalesup.org>
Message-ID: <4836E231.6030505@wxs.nl>

Arthur Reutenauer wrote:
>>> To /tmp, but there is no $TMP or $TEMP defined anywhere.
>> weird, maybe they use some apple name, like $WASTEBIN or $THRASH
> 
>   We already had that discussion: very few systems actually set TMP or
> TEMP (the first public releases of Mark IV used to assume it was set,

few? afaik all windows and linux systems -)

> and subsequently created luatex-cache in the current directory since it
> wasn't).

anyhow, taco and i decided now to default as follows: if CACHEPATH is 
not set:

         cachepath = os.env["TEXMFCACHE"] or os.env["TMP"] or 
os.env["TEMP"] or os.env["TMPDIR"] or os.get["HOME"] or 
os.env["HOMEPATH"] or nil

in texmfcnf.lua one can set up his/her personal preferences

(both taco and i use $TEMP cq. $TMP)

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From arthur.reutenauer at normalesup.org  Fri May 23 17:33:36 2008
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Fri, 23 May 2008 17:33:36 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <4836D362.5070500@wxs.nl>
References: <4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<4833F308.4080408@elvenkind.com>
	<20080521172729.GM21340@phare.normalesup.org>
	<6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>
	<48366E9C.9060603@elvenkind.com>
	<6faad9f00805230032t5f8e3bd5k2bf15a6b6077795a@mail.gmail.com>
	<6faad9f00805230045s724a603vbd66d23103cf03f1@mail.gmail.com>
	<7406F1B4-704C-4C44-9075-FDF0A91D29E7@mpq.mpg.de>
	<4836D362.5070500@wxs.nl>
Message-ID: <20080523153336.GD21340@phare.normalesup.org>

> when discussing the cache Arthur had a preference for HOME, so home is 
> tested before TMPDIR

  Actually, I insisted that HOME came before system-wide locations like
TEXMFVAR, so that users could override it, and I think that's the most
important.

	Arthur

From arthur.reutenauer at normalesup.org  Fri May 23 17:56:34 2008
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Fri, 23 May 2008 17:56:34 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <4836E231.6030505@wxs.nl>
References: <624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<4833F308.4080408@elvenkind.com>
	<20080521172729.GM21340@phare.normalesup.org>
	<6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>
	<48366E9C.9060603@elvenkind.com>
	<6faad9f00805230032t5f8e3bd5k2bf15a6b6077795a@mail.gmail.com>
	<6faad9f00805230045s724a603vbd66d23103cf03f1@mail.gmail.com>
	<48368240.8090708@wxs.nl>
	<20080523152131.GC21340@phare.normalesup.org>
	<4836E231.6030505@wxs.nl>
Message-ID: <20080523155634.GE21340@phare.normalesup.org>

> few? afaik all windows and linux systems -)

  No :-)  I have to insist like one year ago, *no* Linux machine I have
an account on does set TMP or TEMP (using various distributions).  Maybe
that's a shell problem, I don't know, but on any case you can't rely on it.

> anyhow, taco and i decided now to default as follows: if CACHEPATH is 
> not set:
> 
>          cachepath = os.env["TEXMFCACHE"] or os.env["TMP"] or 
> os.env["TEMP"] or os.env["TMPDIR"] or os.get["HOME"] or 
> os.env["HOMEPATH"] or nil

  Sounds reasonable, but why not test for the existence of the /tmp
directory also?

	Arthur

From pragma at wxs.nl  Fri May 23 18:06:16 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 23 May 2008 18:06:16 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <20080523155634.GE21340@phare.normalesup.org>
References: <624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<20080521172729.GM21340@phare.normalesup.org>	<6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>	<48366E9C.9060603@elvenkind.com>	<6faad9f00805230032t5f8e3bd5k2bf15a6b6077795a@mail.gmail.com>	<6faad9f00805230045s724a603vbd66d23103cf03f1@mail.gmail.com>	<48368240.8090708@wxs.nl>	<20080523152131.GC21340@phare.normalesup.org>	<4836E231.6030505@wxs.nl>
	<20080523155634.GE21340@phare.normalesup.org>
Message-ID: <4836EB78.7010400@wxs.nl>

Arthur Reutenauer wrote:
>> few? afaik all windows and linux systems -)
> 
>   No :-)  I have to insist like one year ago, *no* Linux machine I have
> an account on does set TMP or TEMP (using various distributions).  Maybe
> that's a shell problem, I don't know, but on any case you can't rely on it.

weird because what then is the purpose of that variable (ok, it may be 
that progs then put temp stuff all over the place which eventually will 
force you to buy an new machine so maybe some hidden interests)

>> anyhow, taco and i decided now to default as follows: if CACHEPATH is 
>> not set:
>>
>>          cachepath = os.env["TEXMFCACHE"] or os.env["TMP"] or 
>> os.env["TEMP"] or os.env["TMPDIR"] or os.get["HOME"] or 
>> os.env["HOMEPATH"] or nil
> 
>   Sounds reasonable, but why not test for the existence of the /tmp
> directory also?

i'll consider it ... wold be funny if there is a tem pvar but no path ...

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From arthur.reutenauer at normalesup.org  Fri May 23 18:20:30 2008
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Fri, 23 May 2008 18:20:30 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <4836EB78.7010400@wxs.nl>
References: <20080521172729.GM21340@phare.normalesup.org>
	<6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>
	<48366E9C.9060603@elvenkind.com>
	<6faad9f00805230032t5f8e3bd5k2bf15a6b6077795a@mail.gmail.com>
	<6faad9f00805230045s724a603vbd66d23103cf03f1@mail.gmail.com>
	<48368240.8090708@wxs.nl>
	<20080523152131.GC21340@phare.normalesup.org>
	<4836E231.6030505@wxs.nl>
	<20080523155634.GE21340@phare.normalesup.org>
	<4836EB78.7010400@wxs.nl>
Message-ID: <20080523162030.GF21340@phare.normalesup.org>

> weird because what then is the purpose of that variable

  But if there is no such variable, what's the point of looking for its
purpose?  :-)  I suppose that on Unix, functions like mkstemp have to be
preferred for truly temporary directories.

	Arthur

From pragma at wxs.nl  Fri May 23 18:53:17 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 23 May 2008 18:53:17 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <20080523162030.GF21340@phare.normalesup.org>
References: <20080521172729.GM21340@phare.normalesup.org>	<6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>	<48366E9C.9060603@elvenkind.com>	<6faad9f00805230032t5f8e3bd5k2bf15a6b6077795a@mail.gmail.com>	<6faad9f00805230045s724a603vbd66d23103cf03f1@mail.gmail.com>	<48368240.8090708@wxs.nl>	<20080523152131.GC21340@phare.normalesup.org>	<4836E231.6030505@wxs.nl>	<20080523155634.GE21340@phare.normalesup.org>	<4836EB78.7010400@wxs.nl>
	<20080523162030.GF21340@phare.normalesup.org>
Message-ID: <4836F67D.90709@wxs.nl>

Arthur Reutenauer wrote:
>> weird because what then is the purpose of that variable
> 
>   But if there is no such variable, what's the point of looking for its
> purpose?  :-)  I suppose that on Unix, functions like mkstemp have to be
> preferred for truly temporary directories.

sure, but it depends on tmp being cleaned up too; afaik /tmp and c:/temp 
are only cleaned up periodically e.g. when one runs out of space so it's 
a kind of indication of 'may be cleaned up'

anyhow, it makes even more sense on templess systems to set the 
texmfcache var

(what i actually dislike is all this ~/.crap stuff which apart from not 
being that readable also give a fuzzy indication .. temp? hidden? weird? 
app-only?)


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From preining at logic.at  Fri May 23 19:45:36 2008
From: preining at logic.at (Norbert Preining)
Date: Fri, 23 May 2008 19:45:36 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <4833F47F.6030502@elvenkind.com>
References: <CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>
	<48313F05.2020607@wxs.nl>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<48335273.40400@wxs.nl>
	<E71DB91B-35BD-44FF-986C-926BF4FDA192@mpq.mpg.de>
	<4833F47F.6030502@elvenkind.com>
Message-ID: <20080523174536.GF19105@gamma.logic.tuwien.ac.at>

On Mi, 21 Mai 2008, Taco Hoekwater wrote:
> > that the ConTeXt shipping with TeX Live should be regarded as the 
> > official stable release ...
> 
> We have not added mkiv to texlive. If it is included now, then that
> is thanks to Norbert's packaging.

No I didn't add anything to the TeX Live repository, that I leave to
Taco/Hans/whoever. I would say it is up to them to ship what they
consider fine.

I am trying to package the latest context for Debian.

But AFAIS, the whole context could in fact be omitted. As far as I see
*everyone* using context also uses his home-grown installation etc ;-)

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
WILLIMANTIC (adj.)
Of a person whose hearth is in the wrong place (i.e. between their
legs).
			--- Douglas Adams, The Meaning of Liff

From mojca.miklavec.lists at gmail.com  Fri May 23 20:44:38 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 23 May 2008 20:44:38 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <20080523174536.GF19105@gamma.logic.tuwien.ac.at>
References: <CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>
	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>
	<48319B67.5080206@elvenkind.com>
	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<4832D5D1.8070108@elvenkind.com>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<48335273.40400@wxs.nl>
	<E71DB91B-35BD-44FF-986C-926BF4FDA192@mpq.mpg.de>
	<4833F47F.6030502@elvenkind.com>
	<20080523174536.GF19105@gamma.logic.tuwien.ac.at>
Message-ID: <6faad9f00805231144x43531b4t299d9541503e8752@mail.gmail.com>

On Fri, May 23, 2008 at 7:45 PM, Norbert Preining wrote:
>
> But AFAIS, the whole context could in fact be omitted. As far as I see
> *everyone* using context also uses his home-grown installation etc ;-)

- ConTeXt on MikTeX is completely/absolutely broken
- TeX Live is outdated
- ConTeX/XeTeX on gwTeX is broken
- LuaTeX doesn't work at all, anywhere (except for the Debian)

What else (apart from W32TeX) remains out there?

Let's see how the new packaging in TeX Live is going to work ... :) :) :)

Mojca

From pragma at wxs.nl  Fri May 23 22:09:41 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 23 May 2008 22:09:41 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <20080523155634.GE21340@phare.normalesup.org>
References: <624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<20080521172729.GM21340@phare.normalesup.org>	<6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>	<48366E9C.9060603@elvenkind.com>	<6faad9f00805230032t5f8e3bd5k2bf15a6b6077795a@mail.gmail.com>	<6faad9f00805230045s724a603vbd66d23103cf03f1@mail.gmail.com>	<48368240.8090708@wxs.nl>	<20080523152131.GC21340@phare.normalesup.org>	<4836E231.6030505@wxs.nl>
	<20080523155634.GE21340@phare.normalesup.org>
Message-ID: <48372485.1090503@wxs.nl>

Arthur Reutenauer wrote:

>   Sounds reasonable, but why not test for the existence of the /tmp
> directory also?

ok, to please you, i now stepwise test for existence; will b ein next 
beta upload


Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Fri May 23 22:12:17 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 23 May 2008 22:12:17 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <20080523174536.GF19105@gamma.logic.tuwien.ac.at>
References: <CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<48335273.40400@wxs.nl>	<E71DB91B-35BD-44FF-986C-926BF4FDA192@mpq.mpg.de>	<4833F47F.6030502@elvenkind.com>
	<20080523174536.GF19105@gamma.logic.tuwien.ac.at>
Message-ID: <48372521.60802@wxs.nl>

Norbert Preining wrote:
> On Mi, 21 Mai 2008, Taco Hoekwater wrote:
>>> that the ConTeXt shipping with TeX Live should be regarded as the 
>>> official stable release ...
>> We have not added mkiv to texlive. If it is included now, then that
>> is thanks to Norbert's packaging.
> 
> No I didn't add anything to the TeX Live repository, that I leave to
> Taco/Hans/whoever. I would say it is up to them to ship what they
> consider fine.
> 
> I am trying to package the latest context for Debian.
> 
> But AFAIS, the whole context could in fact be omitted. As far as I see
> *everyone* using context also uses his home-grown installation etc ;-)

not true -)

the so called minimals are based on my personal subset that i use in 
project; one can consider them a kind if reference subset and they can 
be used of course; however, it leave out all the other tex stuff: no 
other macro packages, less binaries, less fonts, etc

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Fri May 23 22:14:41 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 23 May 2008 22:14:41 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <6faad9f00805231144x43531b4t299d9541503e8752@mail.gmail.com>
References: <CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<48335273.40400@wxs.nl>	<E71DB91B-35BD-44FF-986C-926BF4FDA192@mpq.mpg.de>	<4833F47F.6030502@elvenkind.com>	<20080523174536.GF19105@gamma.logic.tuwien.ac.at>
	<6faad9f00805231144x43531b4t299d9541503e8752@mail.gmail.com>
Message-ID: <483725B1.2070902@wxs.nl>

Mojca Miklavec wrote:
> On Fri, May 23, 2008 at 7:45 PM, Norbert Preining wrote:
>> But AFAIS, the whole context could in fact be omitted. As far as I see
>> *everyone* using context also uses his home-grown installation etc ;-)
> 
> - ConTeXt on MikTeX is completely/absolutely broken
> - TeX Live is outdated

sure, but tex live always had a relative stable version of context and 
i'd like to keep that property

> - ConTeX/XeTeX on gwTeX is broken

hm

> - LuaTeX doesn't work at all, anywhere (except for the Debian)

i'm glad that norbert packages luatex/mkiv because it gives us a 
reference outside out own machines

> What else (apart from W32TeX) remains out there?

commercial tex's

> Let's see how the new packaging in TeX Live is going to work ... :) :) :)

don't worry, mkii will be in there anyway and i see no reason not to 
have mkiv in there too

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From martin at oneiros.de  Fri May 23 22:39:37 2008
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 23 May 2008 22:39:37 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <4836F67D.90709@wxs.nl>
References: <20080521172729.GM21340@phare.normalesup.org>
	<6faad9f00805230032t5f8e3bd5k2bf15a6b6077795a@mail.gmail.com>
	<6faad9f00805230045s724a603vbd66d23103cf03f1@mail.gmail.com>
	<48368240.8090708@wxs.nl>
	<20080523152131.GC21340@phare.normalesup.org>
	<4836E231.6030505@wxs.nl>
	<20080523155634.GE21340@phare.normalesup.org>
	<4836EB78.7010400@wxs.nl>
	<20080523162030.GF21340@phare.normalesup.org> <4836F67D.90709@wxs.nl>
Message-ID: <68c491a60805231339i3a26d5fbpe60852582beb68e7@mail.gmail.com>

2008/5/23 Hans Hagen <pragma at wxs.nl>:
> sure, but it depends on tmp being cleaned up too; afaik /tmp and c:/temp
> are only cleaned up periodically e.g. when one runs out of space so it's
> a kind of indication of 'may be cleaned up'

Many Unixes clear /tmp at bootup. Even SUSE can do this. :-)

http://en.wikipedia.org/wiki/Temporary_directory
"In Unix and Linux, the global temporary directories are /tmp and
/var/tmp. Typically, /var/tmp is for more permanent files, and /tmp is
for more temporary files. See Filesystem Hierarchy Standard. In
addition, a user can set his TMPDIR environment variable to point to a
preferred directory (where the creation and modification of files is
allowed)."

Best
   Martin

From martin at oneiros.de  Fri May 23 22:41:45 2008
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 23 May 2008 22:41:45 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <20080523152131.GC21340@phare.normalesup.org>
References: <E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>
	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<4833F308.4080408@elvenkind.com>
	<20080521172729.GM21340@phare.normalesup.org>
	<6faad9f00805221712kff322d2l456ee8f7c890c288@mail.gmail.com>
	<48366E9C.9060603@elvenkind.com>
	<6faad9f00805230032t5f8e3bd5k2bf15a6b6077795a@mail.gmail.com>
	<6faad9f00805230045s724a603vbd66d23103cf03f1@mail.gmail.com>
	<48368240.8090708@wxs.nl>
	<20080523152131.GC21340@phare.normalesup.org>
Message-ID: <68c491a60805231341s1f6cab7dq4ddce0f3daf853d6@mail.gmail.com>

2008/5/23 Arthur Reutenauer <arthur.reutenauer at normalesup.org>:
>>> To /tmp, but there is no $TMP or $TEMP defined anywhere.
>>
>> weird, maybe they use some apple name, like $WASTEBIN or $THRASH
>
>  We already had that discussion: very few systems actually set TMP or
> TEMP (the first public releases of Mark IV used to assume it was set,
> and subsequently created luatex-cache in the current directory since it
> wasn't).

http://en.wikipedia.org/wiki/Temporary_directory
http://en.wikipedia.org/wiki/TMPDIR
"TMPDIR is the canonical Unix environment variable which points to
user scratch space. Most Unix utilities will honor the setting of this
variable and use its value to denote the scratch area for temporary
files instead of the common default of /tmp.

Other forms sometimes accepted are TEMP, TEMPDIR, and TMP but these
are used more commonly by non-POSIX Operating systems."

Best
   Martin

From pragma at wxs.nl  Sat May 24 09:16:26 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Sat, 24 May 2008 09:16:26 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <68c491a60805231339i3a26d5fbpe60852582beb68e7@mail.gmail.com>
References: <20080521172729.GM21340@phare.normalesup.org>	<6faad9f00805230032t5f8e3bd5k2bf15a6b6077795a@mail.gmail.com>	<6faad9f00805230045s724a603vbd66d23103cf03f1@mail.gmail.com>	<48368240.8090708@wxs.nl>	<20080523152131.GC21340@phare.normalesup.org>	<4836E231.6030505@wxs.nl>	<20080523155634.GE21340@phare.normalesup.org>	<4836EB78.7010400@wxs.nl>	<20080523162030.GF21340@phare.normalesup.org>
	<4836F67D.90709@wxs.nl>
	<68c491a60805231339i3a26d5fbpe60852582beb68e7@mail.gmail.com>
Message-ID: <4837C0CA.2040600@wxs.nl>

Martin Schr?der wrote:
> 2008/5/23 Hans Hagen <pragma at wxs.nl>:
>> sure, but it depends on tmp being cleaned up too; afaik /tmp and c:/temp
>> are only cleaned up periodically e.g. when one runs out of space so it's
>> a kind of indication of 'may be cleaned up'
> 
> Many Unixes clear /tmp at bootup. Even SUSE can do this. :-)
> 
> http://en.wikipedia.org/wiki/Temporary_directory
> "In Unix and Linux, the global temporary directories are /tmp and
> /var/tmp. Typically, /var/tmp is for more permanent files, and /tmp is
> for more temporary files. See Filesystem Hierarchy Standard. In
> addition, a user can set his TMPDIR environment variable to point to a
> preferred directory (where the creation and modification of files is
> allowed)."

so then checking for TMPDIR should precece TMP

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From luigi.scarso at gmail.com  Sat May 24 11:10:09 2008
From: luigi.scarso at gmail.com (luigi scarso)
Date: Sat, 24 May 2008 11:10:09 +0200
Subject: [dev-context] modules at supelec
Message-ID: <fe8d59da0805240210x31e0119ej725b71f1f1018aeb@mail.gmail.com>

Hi all
I start modules project at
http://foundry.supelec.fr/projects/modules

Suggestions are welcome , of course.

Thank you all

-- 
luigi

From mojca.miklavec.lists at gmail.com  Sat May 24 11:18:01 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sat, 24 May 2008 11:18:01 +0200
Subject: [dev-context] modules at supelec
In-Reply-To: <fe8d59da0805240210x31e0119ej725b71f1f1018aeb@mail.gmail.com>
References: <fe8d59da0805240210x31e0119ej725b71f1f1018aeb@mail.gmail.com>
Message-ID: <6faad9f00805240218k60dc154eif6b625a635b6ee30@mail.gmail.com>

On Sat, May 24, 2008 at 11:10 AM, luigi scarso <luigi.scarso at gmail.com> wrote:
> Hi all
> I start modules project at
> http://foundry.supelec.fr/projects/modules
>
> Suggestions are welcome , of course.

Fabrice is expecting suggestions about some new hierarchy on supelec,
to be able to find TeX-related projects more easily.

Mojca

From luigi.scarso at gmail.com  Sat May 24 11:31:05 2008
From: luigi.scarso at gmail.com (luigi scarso)
Date: Sat, 24 May 2008 11:31:05 +0200
Subject: [dev-context] modules at supelec
In-Reply-To: <6faad9f00805240218k60dc154eif6b625a635b6ee30@mail.gmail.com>
References: <fe8d59da0805240210x31e0119ej725b71f1f1018aeb@mail.gmail.com>
	<6faad9f00805240218k60dc154eif6b625a635b6ee30@mail.gmail.com>
Message-ID: <fe8d59da0805240231q3cdecfccp3ced09586419f7ea@mail.gmail.com>

> Fabrice is expecting suggestions about some new hierarchy on supelec,
> to be able to find TeX-related projects more easily.
I need to know gforge a bit more than now.

Maybe a (sub)Topic
'typesetting'
in Trove
http://foundry.supelec.fr/softwaremap/trove_list.php

-- 
luigi

From oliver.buerschaper at mpq.mpg.de  Sat May 24 17:33:08 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Sat, 24 May 2008 17:33:08 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48343D97.5020408@elvenkind.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>
	<4833F308.4080408@elvenkind.com> <48343D97.5020408@elvenkind.com>
Message-ID: <101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>

Hi Taco,

> This new release is available now.

I've just had the chance to test this new release and got mixed  
results ... the 2008.05.21 minimal distribution (LuaTeX only) now sits  
in

/usr/local/context/2008-05-21

and there's a symbolic link

/usr/texbin -> /usr/local/context/2008-05-21/texmf-osx-intel/bin

to the binaries. This link is given by the distribution switching  
mechanism on the Mac (see my earlier post in this thread) and is  
appended to $PATH, too. Furthermore, *no* TEXMFCNF environment  
variable is set.

Now there's a problem of finding the texmf.cnf file:

---

$>/usr/texbin/luatools --generate --verbose

LuaTools | version 1.2.0 - 2006+ - PRAGMA ADE / CONTEXT

LuaTools | variable SELFAUTOLOC set to /usr/texbin
LuaTools | variable SELFAUTODIR set to /usr/texbin/..
LuaTools | variable SELFAUTOPARENT set to /usr/texbin/../..
LuaTools | variable TEXMFCNF set to {$SELFAUTODIR,$SELFAUTOPARENT}{,{/ 
share,}/texmf{-local,.local,}/web2c}
LuaTools | no cnf files found (TEXMFCNF may not be set/known)
LuaTools |
LuaTools | runtime: 0.004 seconds

---

The problem persists when I call the binary directly:

---

$> /usr/local/context/2008-05-21/texmf-osx-intel/bin/luatools -- 
generate --verbose

LuaTools | version 1.2.0 - 2006+ - PRAGMA ADE / CONTEXT

LuaTools | variable SELFAUTOLOC set to /usr/texbin
LuaTools | variable SELFAUTODIR set to /usr/texbin/..
LuaTools | variable SELFAUTOPARENT set to /usr/texbin/../..
LuaTools | variable TEXMFCNF set to {$SELFAUTODIR,$SELFAUTOPARENT}{,{/ 
share,}/texmf{-local,.local,}/web2c}
LuaTools | no cnf files found (TEXMFCNF may not be set/known)
LuaTools |
LuaTools | runtime: 0.007 seconds

---

Obviously, the problem is the symbolic link because LuaTeX tries and  
finds argv[0] in $PATH but doesn't resolve /usr/texbin to its actual  
location on disk. It's clear that in this situation there can't be any  
difference between the distribution-independent syntax of calling  
luatex and the direct invocation.

Do you think LuaTeX's path discovery mechanism could be adapted to  
handle symbolic links?

All the best,
Oliver

From pragma at wxs.nl  Sat May 24 19:01:41 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Sat, 24 May 2008 19:01:41 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>
	<48343D97.5020408@elvenkind.com>
	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>
Message-ID: <483849F5.1000208@wxs.nl>

Oliver Buerschaper wrote:

> Obviously, the problem is the symbolic link because LuaTeX tries and  
> finds argv[0] in $PATH but doesn't resolve /usr/texbin to its actual  
> location on disk. It's clear that in this situation there can't be any  
> difference between the distribution-independent syntax of calling  
> luatex and the direct invocation.
> 
> Do you think LuaTeX's path discovery mechanism could be adapted to  
> handle symbolic links?

there is lfs.symlinkattributes but i'm somewhat reluctant to usinmg 
platform specific things; if i have time i'll see if this function 
returns something useful

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Sat May 24 19:11:28 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 24 May 2008 19:11:28 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <483849F5.1000208@wxs.nl>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>
	<48343D97.5020408@elvenkind.com>
	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>
	<483849F5.1000208@wxs.nl>
Message-ID: <48384C40.8070702@elvenkind.com>

Hans Hagen wrote:
> Oliver Buerschaper wrote:
> 
>> Obviously, the problem is the symbolic link because LuaTeX tries and  
>> finds argv[0] in $PATH but doesn't resolve /usr/texbin to its actual  
>> location on disk. It's clear that in this situation there can't be 
>> any  difference between the distribution-independent syntax of 
>> calling  luatex and the direct invocation.
>>
>> Do you think LuaTeX's path discovery mechanism could be adapted to  
>> handle symbolic links?
> 
> there is lfs.symlinkattributes but i'm somewhat reluctant to usinmg 
> platform specific things; if i have time i'll see if this function 
> returns something useful

No need, here is function that works and is portable to all platforms:

function input.getownpath()
    local olddir = lfs.currentdir()
     if not input.ownpath then
        for p in 
string.gmatch(os.getenv("PATH"),"[^"..io.pathseparator.."]+") do
	    lfs.chdir(p)
             p = lfs.currentdir()
             local b = file.join(p,input.ownbin)
             if lfs.isfile(b..".exe") or lfs.isfile(b) then
                 input.ownpath = p
                 break
             end
         end
         if not input.ownpath then input.ownpath = '.' end
     end
     lfs.chdir(olddir)
     return input.ownpath
end

Oliver, I have emailed you a patched version of luatools.lua. Can
you try to make sure that it works for you as well? (It should, but ...)

Best wishes,
Taco



From taco at elvenkind.com  Sat May 24 20:14:54 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 24 May 2008 20:14:54 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48384C40.8070702@elvenkind.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>
	<48384C40.8070702@elvenkind.com>
Message-ID: <48385B1E.1060303@elvenkind.com>


Hi again,

(replying to myself)

Taco Hoekwater wrote:
> Oliver, I have emailed you a patched version of luatools.lua. Can
> you try to make sure that it works for you as well? (It should, but ...)

Hans is just finished uploading a new beta that has two fixes in
this area:

* there was a bug in the TEXMFCACHE defaulting, making it ask
   strange questions if TEXMFCACHE was not set in texmfcnf.lua.

* it comes with a variation of the symlink-discovering code I
   posted earlier.
   There is an extra report line if a symlink is followed while
   discovering the full executable path. e.g.:

   LuaTools | following symlink /home/taco/mybin to /usr/local/bin

   The chosen method has a few small flaws in bordercases that will
   be corrected eventually (in a new luatex release) but it seems
   to work well enough for now

Best wishes,
Taco



From taco at elvenkind.com  Sat May 24 20:29:42 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 24 May 2008 20:29:42 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48385B1E.1060303@elvenkind.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>
	<48384C40.8070702@elvenkind.com> <48385B1E.1060303@elvenkind.com>
Message-ID: <48385E96.1070703@elvenkind.com>

Taco Hoekwater wrote:
> 
>   The chosen method has a few small flaws in bordercases that will
>   be corrected eventually (in a new luatex release) but it seems
>   to work well enough for now

Before Oliver tells me I am being vague again: ;-)

What I mean is this: in the full path "/usr/texbin/luatex", "texbin"
can be a symlink to a different directory and that will be followed,
but if "luatex" itself is a symlink to a file in a different directory,
that will not be noticed.

Solving that in pure lua is pretty hard, so I will add a predefined
"full executable path" variable in the next luatex beta.

Best wishes,
Taco

From luigi.scarso at gmail.com  Sun May 25 12:51:07 2008
From: luigi.scarso at gmail.com (luigi scarso)
Date: Sun, 25 May 2008 12:51:07 +0200
Subject: [dev-context] last modules frozen acrobat 8
Message-ID: <fe8d59da0805250351x5a787b96h2aa374bac7420d87@mail.gmail.com>

It was reported that last modules freeze acrobat 8 .
I have no problem with xpdf 3.02,
GNOME evince 2.22.1.1
and gs 8.62

I will try to fix  with next release.

-- 
luigi

From oliver.buerschaper at mpq.mpg.de  Sun May 25 18:59:07 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Sun, 25 May 2008 18:59:07 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48385E96.1070703@elvenkind.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>
	<48384C40.8070702@elvenkind.com> <48385B1E.1060303@elvenkind.com>
	<48385E96.1070703@elvenkind.com>
Message-ID: <26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>

Hi Taco and Hans,

> Before Oliver tells me I am being vague again: ;-)

Never mind :-)

> What I mean is this: in the full path "/usr/texbin/luatex", "texbin"
> can be a symlink to a different directory and that will be followed,
> but if "luatex" itself is a symlink to a file in a different  
> directory,
> that will not be noticed.

I think this should be just fine for the moment ...

I've come across an interesting side effect of this new code though:  
I've just downloaded the new setup files for the minimals into a  
directory which happens to be outside a valid TDS tree. More  
precisely, I now have mtx-update.lua, mtxrun and texlua in /usr/local/ 
context/bin whereas the previous ConTeXt minimal resides in /usr/local/ 
context/2008-04-21. The symbolic link /usr/texbin points to the  
binaries directory in that distribution, i.e. ConTeXt-2008-04-21 is my  
currently active TeX distribution.

Now when I issue the update command (or fetch command, that is) mtxrun  
wrongly believes it's located inside the /usr/local/context/2008-04-21  
tree. For me (and the package building process) this doesn't seem to  
be relevant, but I have no idea whether there might be situations when  
this behaviour will turn out harmful. Isn't there a way of discovering  
the launch path (symbolic links already resolved) of an executable  
without resorting to $PATH?

Another question: what part of the LuaTeX chain is responsible for  
locating the configuration files? Is it the scripts mtxrun.lua and  
luatools.lua or the binary texlua itself? You mentioned something  
about luatools only but now that Hans uploaded the entire beta ...

Best,
Oliver

From pragma at wxs.nl  Sun May 25 19:11:32 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 25 May 2008 19:11:32 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>	<48384C40.8070702@elvenkind.com>
	<48385B1E.1060303@elvenkind.com>	<48385E96.1070703@elvenkind.com>
	<26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>
Message-ID: <48399DC4.9090406@wxs.nl>

Oliver Buerschaper wrote:

> Another question: what part of the LuaTeX chain is responsible for  
> locating the configuration files? Is it the scripts mtxrun.lua and  
> luatools.lua or the binary texlua itself? You mentioned something  
> about luatools only but now that Hans uploaded the entire beta ...

this is done in the lua code and taco and i spent quit esome time 
experimenting with this; our filosophy is to hard code as less as 
possible and let lud du the work unless this is not possible; here we 
have a border case with these symlinks; an option would to add functions 
that provide info about the symlink, but then, we don;t wan tto add too 
many functions to the core; hoever in this case it may be that we need 
to let the binary provide info about the path where the binary resides 
(also because it may be a bit playform depedent)

(btw, the lua code is in luat-inp but merged into mtxrun and luatools so 
that these scripts can operate independent of libraries, because 
otherwise we can have another chicken or egg problem)

at some point part of the interface in luat-inp will be public i.e. 
users can use it themselves, but first i need to clean up that code

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From oliver.buerschaper at mpq.mpg.de  Sun May 25 19:22:13 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Sun, 25 May 2008 19:22:13 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48399DC4.9090406@wxs.nl>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>	<48384C40.8070702@elvenkind.com>
	<48385B1E.1060303@elvenkind.com>	<48385E96.1070703@elvenkind.com>
	<26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>
	<48399DC4.9090406@wxs.nl>
Message-ID: <15F42DEA-B3DC-4584-9C1A-97D17783D766@mpq.mpg.de>

>> Another question: what part of the LuaTeX chain is responsible for   
>> locating the configuration files? Is it the scripts mtxrun.lua and   
>> luatools.lua or the binary texlua itself? You mentioned something   
>> about luatools only but now that Hans uploaded the entire beta ...
>
> this is done in the lua code and taco and i spent quit esome time  
> experimenting with this; our filosophy is to hard code as less as  
> possible and let lud du the work unless this is not possible; here  
> we have a border case with these symlinks; an option would to add  
> functions that provide info about the symlink, but then, we don;t  
> wan tto add too many functions to the core; hoever in this case it  
> may be that we need to let the binary provide info about the path  
> where the binary resides (also because it may be a bit playform  
> depedent)

Who's "lud"?

> (btw, the lua code is in luat-inp but merged into mtxrun and  
> luatools so that these scripts can operate independent of libraries,  
> because otherwise we can have another chicken or egg problem)

Good to know ...

> at some point part of the interface in luat-inp will be public i.e.  
> users can use it themselves, but first i need to clean up that code

Sure :-)

Oliver


From oliver.buerschaper at mpq.mpg.de  Sun May 25 19:35:52 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Sun, 25 May 2008 19:35:52 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>
	<48384C40.8070702@elvenkind.com> <48385B1E.1060303@elvenkind.com>
	<48385E96.1070703@elvenkind.com>
	<26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>
Message-ID: <8EBFD07B-8DB2-4F42-A399-767253060D41@mpq.mpg.de>

>> What I mean is this: in the full path "/usr/texbin/luatex", "texbin"
>> can be a symlink to a different directory and that will be followed,
>> but if "luatex" itself is a symlink to a file in a different
>> directory,
>> that will not be noticed.
>
> I think this should be just fine for the moment ...

Extended report ... in short, format compilation fails because of file  
location problems. Apparently generating the LuaTeX cache succeeds  
though. See below.

---

bash# luatools --generate --verbose

LuaTools | version 1.2.0 - 2006+ - PRAGMA ADE / CONTEXT

LuaTools | following symlink /usr/texbin to /usr/local/context/ 
2008-05-24-beta/texmf-osx-intel/bin
LuaTools | variable SELFAUTOLOC set to /usr/local/context/2008-05-24- 
beta/texmf-osx-intel/bin
LuaTools | variable SELFAUTODIR set to /usr/local/context/2008-05-24- 
beta/texmf-osx-intel/bin/..
LuaTools | variable SELFAUTOPARENT set to /usr/local/context/ 
2008-05-24-beta/texmf-osx-intel/bin/../..
LuaTools | variable TEXMFCNF set to {$SELFAUTODIR,$SELFAUTOPARENT}{,{/ 
share,}/texmf{-local,.local,}/web2c}
LuaTools | loading configuration file /usr/local/context/2008-05-24- 
beta/texmf/web2c/texmfcnf.lua
LuaTools | loading /usr/local/context/2008-05-24-beta/texmf/web2c/ 
texmf.cnf
LuaTools | preparing configuration for /usr/local/context/2008-05-24- 
beta/texmf/web2c
LuaTools | saving configuration in /usr/local/context/2008-05-24-beta/ 
texmf-cache/luatex-cache/context/e09ab1c5fd12ff1663572f339200d7b9/ 
trees/01087b0ca69d21f3ef3ffa1e45445465.tma
LuaTools | compiling configuration to /usr/local/context/2008-05-24- 
beta/texmf-cache/luatex-cache/context/e09ab1c5fd12ff1663572f339200d7b9/ 
trees/01087b0ca69d21f3ef3ffa1e45445465.tmc
LuaTools | locating list of /usr/local/context/2008-05-24-beta/texmf- 
project
LuaTools | locating list of /usr/local/context/2008-05-24-beta/texmf- 
fonts
LuaTools | locating list of /usr/local/context/2008-05-24-beta/texmf- 
local
LuaTools | locating list of /usr/local/context/2008-05-24-beta/texmf- 
context
LuaTools | locating list of /usr/local/context/2008-05-24-beta/texmf- 
extra
LuaTools | locating list of /usr/local/context/2008-05-24-beta/texmf
LuaTools | scanning path /usr/local/context/2008-05-24-beta/texmf-local
LuaTools | 0 files found on 0 directories with 0 uppercase remappings
LuaTools | scanning path /usr/local/context/2008-05-24-beta/texmf- 
context
LuaTools | 1349 files found on 125 directories with 0 uppercase  
remappings
LuaTools | scanning path /usr/local/context/2008-05-24-beta/texmf
LuaTools | 1550 files found on 82 directories with 60 uppercase  
remappings
LuaTools | preparing files for /usr/local/context/2008-05-24-beta/texmf
LuaTools | saving files in /usr/local/context/2008-05-24-beta/texmf- 
cache/luatex-cache/context/e09ab1c5fd12ff1663572f339200d7b9/trees/ 
058e57e5173e90883a3ba926c33fe22d.tma
LuaTools | compiling files to /usr/local/context/2008-05-24-beta/texmf- 
cache/luatex-cache/context/e09ab1c5fd12ff1663572f339200d7b9/trees/ 
058e57e5173e90883a3ba926c33fe22d.tmc
LuaTools | preparing files for /usr/local/context/2008-05-24-beta/ 
texmf-context
LuaTools | saving files in /usr/local/context/2008-05-24-beta/texmf- 
cache/luatex-cache/context/e09ab1c5fd12ff1663572f339200d7b9/trees/ 
3c541a92ee2a3a79f77458e195b0a0f8.tma
LuaTools | compiling files to /usr/local/context/2008-05-24-beta/texmf- 
cache/luatex-cache/context/e09ab1c5fd12ff1663572f339200d7b9/trees/ 
3c541a92ee2a3a79f77458e195b0a0f8.tmc
LuaTools | preparing files for /usr/local/context/2008-05-24-beta/ 
texmf-local
LuaTools | saving files in /usr/local/context/2008-05-24-beta/texmf- 
cache/luatex-cache/context/e09ab1c5fd12ff1663572f339200d7b9/trees/ 
678bda37a3a32e3b1917a023bf896e91.tma
LuaTools | compiling files to /usr/local/context/2008-05-24-beta/texmf- 
cache/luatex-cache/context/e09ab1c5fd12ff1663572f339200d7b9/trees/ 
678bda37a3a32e3b1917a023bf896e91.tmc
LuaTools |
LuaTools | runtime: 0.255 seconds

---

So far, so good. Now creating the format fails although the file texmf- 
context/tex/context/base/context.tex is present and perfectly  
readable :-(

---

bash# luatools --ini --compile --verbose cont-en

LuaTools | version 1.2.0 - 2006+ - PRAGMA ADE / CONTEXT

LuaTools | following symlink /usr/texbin to /usr/local/context/ 
2008-05-24-beta/texmf-osx-intel/bin
LuaTools | variable SELFAUTOLOC set to /usr/local/context/2008-05-24- 
beta/texmf-osx-intel/bin
LuaTools | variable SELFAUTODIR set to /usr/local/context/2008-05-24- 
beta/texmf-osx-intel/bin/..
LuaTools | variable SELFAUTOPARENT set to /usr/local/context/ 
2008-05-24-beta/texmf-osx-intel/bin/../..
LuaTools | variable TEXMFCNF set to {$SELFAUTODIR,$SELFAUTOPARENT}{,{/ 
share,}/texmf{-local,.local,}/web2c}
LuaTools | loading configuration file /usr/local/context/2008-05-24- 
beta/texmf/web2c/texmfcnf.lua
LuaTools | loading configuration for /usr/local/context/2008-05-24- 
beta/texmf/web2c from /usr/local/context/2008-05-24-beta/texmf-cache/ 
luatex-cache/context/e09ab1c5fd12ff1663572f339200d7b9/trees/ 
01087b0ca69d21f3ef3ffa1e45445465
LuaTools | locating list of /usr/local/context/2008-05-24-beta/texmf- 
project
LuaTools | locating list of /usr/local/context/2008-05-24-beta/texmf- 
fonts
LuaTools | locating list of /usr/local/context/2008-05-24-beta/texmf- 
local
LuaTools | locating list of /usr/local/context/2008-05-24-beta/texmf- 
context
LuaTools | locating list of /usr/local/context/2008-05-24-beta/texmf- 
extra
LuaTools | locating list of /usr/local/context/2008-05-24-beta/texmf
LuaTools | loading files for /usr/local/context/2008-05-24-beta/texmf- 
local from /usr/local/context/2008-05-24-beta/texmf-cache/luatex-cache/ 
context/e09ab1c5fd12ff1663572f339200d7b9/trees/ 
678bda37a3a32e3b1917a023bf896e91
LuaTools | loading files for /usr/local/context/2008-05-24-beta/texmf- 
context from /usr/local/context/2008-05-24-beta/texmf-cache/luatex- 
cache/context/e09ab1c5fd12ff1663572f339200d7b9/trees/ 
3c541a92ee2a3a79f77458e195b0a0f8
LuaTools | loading files for /usr/local/context/2008-05-24-beta/texmf  
from /usr/local/context/2008-05-24-beta/texmf-cache/luatex-cache/ 
context/e09ab1c5fd12ff1663572f339200d7b9/trees/ 
058e57e5173e90883a3ba926c33fe22d
LuaTools | creating initialization file cont-en
LuaTools | using library path : /usr/local/context/2008-05-24-beta/ 
texmf-context/tex/context/base
LuaTools | using lua libraries: l-string.lua l-lpeg.lua l-table.lua l- 
boolean.lua l-number.lua l-set.lua l-unicode.lua l-md5.lua l-os.lua l- 
io.lua l-file.lua l-url.lua l-dir.lua l-utils.lua l-tex.lua luat- 
env.lua luat-lib.lua luat-inp.lua luat-tmp.lua luat-zip.lua luat-tex.lua
LuaTools | using compiled initialization file cont-en.luc
LuaTools | using lua initialization file cont-en.luc
LuaTools | running command: luatex --ini --lua="cont-en.luc" "/usr/ 
local/context/2008-05-24-beta/texmf-context/tex/context/base/cont- 
en.tex" \\dump
(/usr/local/context/2008-05-24-beta/texmf-context/tex/context/base/ 
cont-en.tex
! I can't find file `context.tex'.
l.16 \input context.tex

Please type another input file name: ^C

bash# ! Emergency stop.
l.16 \input context.tex

mkiv lua stats : used config path     - /usr/local/context/2008-05-24- 
beta/texmf/web2c/texmf.cnf

mkiv lua stats : used cache path      - /Users/oliver

mkiv lua stats : input load time      - 0.005 seconds

mkiv lua stats : current memory usage - 612076 bytes

mkiv lua stats : node memory usage    - 1 dir

---

Strangely LuaTeX seems to use yet another cache path during format  
generation. I'm puzzled.

Oliver

From arthur.reutenauer at normalesup.org  Sun May 25 19:28:46 2008
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Sun, 25 May 2008 19:28:46 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <15F42DEA-B3DC-4584-9C1A-97D17783D766@mpq.mpg.de>
References: <4833F308.4080408@elvenkind.com> <48343D97.5020408@elvenkind.com>
	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>
	<483849F5.1000208@wxs.nl> <48384C40.8070702@elvenkind.com>
	<48385B1E.1060303@elvenkind.com> <48385E96.1070703@elvenkind.com>
	<26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>
	<48399DC4.9090406@wxs.nl>
	<15F42DEA-B3DC-4584-9C1A-97D17783D766@mpq.mpg.de>
Message-ID: <20080525172846.GQ21340@phare.normalesup.org>

> Who's "lud"?

  Lua :-)

From pragma at wxs.nl  Sun May 25 20:24:42 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 25 May 2008 20:24:42 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <8EBFD07B-8DB2-4F42-A399-767253060D41@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>	<48384C40.8070702@elvenkind.com>
	<48385B1E.1060303@elvenkind.com>	<48385E96.1070703@elvenkind.com>	<26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>
	<8EBFD07B-8DB2-4F42-A399-767253060D41@mpq.mpg.de>
Message-ID: <4839AEEA.6090007@wxs.nl>

Oliver Buerschaper wrote:
>>> What I mean is this: in the full path "/usr/texbin/luatex", "texbin"
>>> can be a symlink to a different directory and that will be followed,
>>> but if "luatex" itself is a symlink to a file in a different
>>> directory,
>>> that will not be noticed.
>> I think this should be just fine for the moment ...
> 
> Extended report ... in short, format compilation fails because of file  
> location problems. Apparently generating the LuaTeX cache succeeds  
> though. See below.

the hashes differ (these hashes represent the original path of the 
subtree and are needed in order to run multiple trees in one cache)

loading files for .../trees/678bda37a3a32e3b1917a023bf896e91
saving  files in  .../trees/058e57e5173e90883a3ba926c33fe22d
loading files for .../trees/3c541a92ee2a3a79f77458e195b0a0f8
saving  files in  .../trees/3c541a92ee2a3a79f77458e195b0a0f8
loading files for .../trees/058e57e5173e90883a3ba926c33fe22d
saving  files in  .../trees/678bda37a3a32e3b1917a023bf896e91

maybe you can add some message to

caches.hashed
caches.setpath

and see what happens there (luat-tmp)



-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Mon May 26 10:22:05 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 26 May 2008 10:22:05 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <48399DC4.9090406@wxs.nl>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>	<48384C40.8070702@elvenkind.com>
	<48385B1E.1060303@elvenkind.com>	<48385E96.1070703@elvenkind.com>
	<26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>
	<48399DC4.9090406@wxs.nl>
Message-ID: <483A732D.2010908@elvenkind.com>



Hans Hagen wrote:
> many functions to the core; hoever in this case it may be that we need 
> to let the binary provide info about the path where the binary resides 
> (also because it may be a bit playform depedent)

Side note: Finding the disk image that belongs to the current process
is surprisingly hard on any Unix system.

In bordercases, it  may not even be present at all, because the
executable can be deleted as soon as the process has started
(it will still be present on disk, but nameless). Anyway, there
is some special code in kpathsea that I can incorporate in the
binary and that will make life much easier (once 0.30.0 is out)

Best wishes,
Taco

From pragma at wxs.nl  Mon May 26 10:59:28 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 26 May 2008 10:59:28 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <8EBFD07B-8DB2-4F42-A399-767253060D41@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>	<48384C40.8070702@elvenkind.com>
	<48385B1E.1060303@elvenkind.com>	<48385E96.1070703@elvenkind.com>	<26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>
	<8EBFD07B-8DB2-4F42-A399-767253060D41@mpq.mpg.de>
Message-ID: <483A7BF0.5010602@wxs.nl>

Oliver Buerschaper wrote:
>>> What I mean is this: in the full path "/usr/texbin/luatex", "texbin"
>>> can be a symlink to a different directory and that will be followed,
>>> but if "luatex" itself is a symlink to a file in a different
>>> directory,
>>> that will not be noticed.
>> I think this should be just fine for the moment ...
> 
> Extended report ... in short, format compilation fails because of file  
> location problems. Apparently generating the LuaTeX cache succeeds  
> though. See below.

taco and i are clueless ... we need more info
-- 

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Mon May 26 11:06:23 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 26 May 2008 11:06:23 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <483A7BF0.5010602@wxs.nl>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>	<48384C40.8070702@elvenkind.com>	<48385B1E.1060303@elvenkind.com>	<48385E96.1070703@elvenkind.com>	<26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>	<8EBFD07B-8DB2-4F42-A399-767253060D41@mpq.mpg.de>
	<483A7BF0.5010602@wxs.nl>
Message-ID: <483A7D8F.8030406@elvenkind.com>



Hans Hagen wrote:
> Oliver Buerschaper wrote:
>>>> What I mean is this: in the full path "/usr/texbin/luatex", "texbin"
>>>> can be a symlink to a different directory and that will be followed,
>>>> but if "luatex" itself is a symlink to a file in a different
>>>> directory,
>>>> that will not be noticed.
>>> I think this should be just fine for the moment ...
>> Extended report ... in short, format compilation fails because of file  
>> location problems. Apparently generating the LuaTeX cache succeeds  
>> though. See below.
> 
> taco and i are clueless ... we need more info

There is a new beta release now.  It would be nice if you could
delete all luatex-cache's on your disk and then try again. It is
possible that there was a spurious file somewhere in the cache,
what with all those changes we have made in the last week.

Best wishes,
Taco

From oliver.buerschaper at mpq.mpg.de  Mon May 26 11:42:38 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Mon, 26 May 2008 11:42:38 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <483A7BF0.5010602@wxs.nl>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>	<48384C40.8070702@elvenkind.com>
	<48385B1E.1060303@elvenkind.com>	<48385E96.1070703@elvenkind.com>	<26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>
	<8EBFD07B-8DB2-4F42-A399-767253060D41@mpq.mpg.de>
	<483A7BF0.5010602@wxs.nl>
Message-ID: <E6E5A739-3CCD-463C-8233-EBD313FB25AB@mpq.mpg.de>

>> Extended report ... in short, format compilation fails because of  
>> file  location problems. Apparently generating the LuaTeX cache  
>> succeeds  though. See below.
>
> taco and i are clueless ... we need more info

Will try and have a look at luat-tmp later the day and see whether  
I'll understand enough in order to implement your suggestion ... my  
knowledge of Lua is rather limited though.

Oliver



From oliver.buerschaper at mpq.mpg.de  Mon May 26 11:44:24 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Mon, 26 May 2008 11:44:24 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <483A7D8F.8030406@elvenkind.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>	<48384C40.8070702@elvenkind.com>	<48385B1E.1060303@elvenkind.com>	<48385E96.1070703@elvenkind.com>	<26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>	<8EBFD07B-8DB2-4F42-A399-767253060D41@mpq.mpg.de>
	<483A7BF0.5010602@wxs.nl> <483A7D8F.8030406@elvenkind.com>
Message-ID: <6C669A44-E4B4-449E-8373-1F00B1204CB8@mpq.mpg.de>

> There is a new beta release now.  It would be nice if you could
> delete all luatex-cache's on your disk and then try again.

Will do.

Oliver

From taco at elvenkind.com  Mon May 26 11:46:23 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 26 May 2008 11:46:23 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <E6E5A739-3CCD-463C-8233-EBD313FB25AB@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>	<48384C40.8070702@elvenkind.com>	<48385B1E.1060303@elvenkind.com>	<48385E96.1070703@elvenkind.com>	<26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>	<8EBFD07B-8DB2-4F42-A399-767253060D41@mpq.mpg.de>	<483A7BF0.5010602@wxs.nl>
	<E6E5A739-3CCD-463C-8233-EBD313FB25AB@mpq.mpg.de>
Message-ID: <483A86EF.7020802@elvenkind.com>



Oliver Buerschaper wrote:
>>> Extended report ... in short, format compilation fails because of  
>>> file  location problems. Apparently generating the LuaTeX cache  
>>> succeeds  though. See below.
>> taco and i are clueless ... we need more info
> 
> Will try and have a look at luat-tmp later the day and see whether  
> I'll understand enough in order to implement your suggestion ... my  

Just ignore this suggestion, it is superseded by the new beta

Best wishes,
Taco

From arthur.reutenauer at normalesup.org  Mon May 26 19:32:07 2008
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Mon, 26 May 2008 19:32:07 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <483A7BF0.5010602@wxs.nl>
References: <4833F308.4080408@elvenkind.com> <48343D97.5020408@elvenkind.com>
	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>
	<483849F5.1000208@wxs.nl> <48384C40.8070702@elvenkind.com>
	<48385B1E.1060303@elvenkind.com> <48385E96.1070703@elvenkind.com>
	<26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>
	<8EBFD07B-8DB2-4F42-A399-767253060D41@mpq.mpg.de>
	<483A7BF0.5010602@wxs.nl>
Message-ID: <20080526173207.GB17245@phare.normalesup.org>

> taco and i are clueless ... we need more info

  I think there is a problem with input.aux.expanded_path ... I have
more or less the same system as Oliver, and this week-end I had the same
problem as him, but with today's release I have a different one:

  (I changed only the PATH)

# luatools --generate

LuaTools | variable SELFAUTOLOC set to /Users/arthur/TeX/ConTeXt/tex/texmf-osx-intel/bin
LuaTools | variable SELFAUTODIR set to /Users/arthur/TeX/ConTeXt/tex/texmf-osx-intel
LuaTools | variable SELFAUTOPARENT set to /Users/arthur/TeX/ConTeXt/tex
LuaTools | variable TEXMFCNF set to {$SELFAUTODIR,$SELFAUTOPARENT}{,{/share,}/texmf{-local,.local,}/web2c}
LuaTools | no cnf files found (TEXMFCNF may not be set/known)
LuaTools |
LuaTools | runtime: 0.028 seconds

  Apparently the problem is to be traced back to input.aux.expanded_path,
because it expands

  {$SELFAUTODIR,$SELFAUTOPARENT}{,{/share,}/texmf{-local,.local,}/web2c}

into

  $SELFAUTODIR/share
  $SELFAUTODIR/texmf-local/web2c
  $SELFAUTODIR/texmf.local/web2c
  $SELFAUTOPARENT/share
  $SELFAUTOPARENT/texmf-local/web2c
  $SELFAUTOPARENT/texmf.local/web2c

which is not correct, because it should also expand to .../texmf/...
(see the trailing comma in {-local,.local,}).

	Arthur

From pragma at wxs.nl  Mon May 26 19:45:30 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 26 May 2008 19:45:30 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <20080526173207.GB17245@phare.normalesup.org>
References: <4833F308.4080408@elvenkind.com>
	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>
	<48384C40.8070702@elvenkind.com>	<48385B1E.1060303@elvenkind.com>
	<48385E96.1070703@elvenkind.com>	<26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>	<8EBFD07B-8DB2-4F42-A399-767253060D41@mpq.mpg.de>	<483A7BF0.5010602@wxs.nl>
	<20080526173207.GB17245@phare.normalesup.org>
Message-ID: <483AF73A.4010807@wxs.nl>

Arthur Reutenauer wrote:
>> taco and i are clueless ... we need more info
> 
>   I think there is a problem with input.aux.expanded_path ... I have
> more or less the same system as Oliver, and this week-end I had the same
> problem as him, but with today's release I have a different one:
> 
>   (I changed only the PATH)

i'll look into it
-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From oliver.buerschaper at mpq.mpg.de  Tue May 27 13:35:43 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Tue, 27 May 2008 13:35:43 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <483A86EF.7020802@elvenkind.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>	<48384C40.8070702@elvenkind.com>	<48385B1E.1060303@elvenkind.com>	<48385E96.1070703@elvenkind.com>	<26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>	<8EBFD07B-8DB2-4F42-A399-767253060D41@mpq.mpg.de>	<483A7BF0.5010602@wxs.nl>
	<E6E5A739-3CCD-463C-8233-EBD313FB25AB@mpq.mpg.de>
	<483A86EF.7020802@elvenkind.com>
Message-ID: <7E66D72A-9D6E-48D9-8706-4AC8E6FEF365@mpq.mpg.de>

> Just ignore this suggestion, it is superseded by the new beta

Fresh attempt with version 2008.05.26 23:27 beta. Previously I wiped  
all instances of luatex-cache from my machine. As last time I didn't  
set any TEXMFCACHE environment variable and also placed the following  
texmfcnf.lua into texmf/web2c:

---

config = {}
config.TEXMFCACHE = "/usr/local/context/2008-05-26-beta/texmf-cache"
return config

---

This time generating the file database works but uses the wrong cache  
location. Apparently texmfcnf.lua is read but ignored. Format  
generation appears to run without flaws but keeps using the wrong  
cache. Please find logs of stdout attached ...

By the way, you seem to have removed the stub "context" in texmf-osx- 
intel/bin. Instead I tried to run a test file using

bash# mtxrun --script context test.tex

directly but I'm afraid neither context nor mtx-context.lua can be  
found. See also:

---

bash# luatools --variables
TEXMFCACHE=/usr/local/context/2008-05-26-beta/texmf-cache

bash# luatools --expansions
TEXMFCACHE=/usr/local/context/2008-05-26-beta/texmf-cache

bash# luatools --configurations
TEXMFCACHE

/usr/texbin/luatools:6527: attempt to call field 'tabstr' (a nil value)

bash# luatools --find-file mtx-context.lua --verbose

LuaTools | version 1.2.0 - 2006+ - PRAGMA ADE / CONTEXT

LuaTools | following symlink /usr/texbin to /usr/local/context/ 
2008-05-26-beta/texmf-osx-intel/bin
LuaTools | variable SELFAUTOLOC set to /usr/local/context/2008-05-26- 
beta/texmf-osx-intel/bin
LuaTools | variable SELFAUTODIR set to /usr/local/context/2008-05-26- 
beta/texmf-osx-intel
LuaTools | variable SELFAUTOPARENT set to /usr/local/context/ 
2008-05-26-beta
LuaTools | variable TEXMFCNF set to {$SELFAUTODIR,$SELFAUTOPARENT}{,{/ 
share,}/texmf{-local,.local,}/web2c}
LuaTools | loading configuration file /usr/local/context/2008-05-26- 
beta/texmf/web2c/texmfcnf.lua
LuaTools | skipping configuration for /usr/local/context/2008-05-26- 
beta/texmf/web2c from /var/folders/d5/d5kShiN8Gla+FttIH2Kn4E+++TM/- 
Tmp-/luatex-cache/context/58e4229c51dae5be777b612e0e33b14d/trees/ 
1e8cc3698917bc12bbc65c986d1f6576
LuaTools |
LuaTools |
LuaTools | runtime: 0.009 seconds

---

Note that while file database and format generation were run as root  
the latter commands were called as a normal user. It that makes a  
difference.

Oliver




-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: database.txt
Url: http://www.ntg.nl/mailman/private/dev-context/attachments/20080527/7ed9dd26/attachment-0002.txt 
-------------- next part --------------



-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: format.txt
Url: http://www.ntg.nl/mailman/private/dev-context/attachments/20080527/7ed9dd26/attachment-0003.txt 
-------------- next part --------------


From taco at elvenkind.com  Tue May 27 14:01:34 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 27 May 2008 14:01:34 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <7E66D72A-9D6E-48D9-8706-4AC8E6FEF365@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>	<48384C40.8070702@elvenkind.com>	<48385B1E.1060303@elvenkind.com>	<48385E96.1070703@elvenkind.com>	<26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>	<8EBFD07B-8DB2-4F42-A399-767253060D41@mpq.mpg.de>	<483A7BF0.5010602@wxs.nl>
	<E6E5A739-3CCD-463C-8233-EBD313FB25AB@mpq.mpg.de>
	<483A86EF.7020802@elvenkind.com>
	<7E66D72A-9D6E-48D9-8706-4AC8E6FEF365@mpq.mpg.de>
Message-ID: <483BF81E.9040606@elvenkind.com>


Hi Oliver,

Oliver Buerschaper wrote:
> /var/folders/d5/d5kShiN8Gla+FttIH2Kn4E+++TM/-Tmp-

How on earth did you manage to get this path?  Is that $TMPDIR ?
If so, it is probably different for each user, and in that case
the distinction between root/user could be important.



Best wishes,
Taco










From oliver.buerschaper at mpq.mpg.de  Tue May 27 14:10:30 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Tue, 27 May 2008 14:10:30 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <483BF81E.9040606@elvenkind.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48312657.8030206@elvenkind.com>	<6faad9f00805190050t33e24e46ta9b64cfc2414ae5e@mail.gmail.com>	<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>	<48384C40.8070702@elvenkind.com>	<48385B1E.1060303@elvenkind.com>	<48385E96.1070703@elvenkind.com>	<26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>	<8EBFD07B-8DB2-4F42-A399-767253060D41@mpq.mpg.de>	<483A7BF0.5010602@wxs.nl>
	<E6E5A739-3CCD-463C-8233-EBD313FB25AB@mpq.mpg.de>
	<483A86EF.7020802@elvenkind.com>
	<7E66D72A-9D6E-48D9-8706-4AC8E6FEF365@mpq.mpg.de> <483BF!
	81E.9040606@elvenkind.com>
Message-ID: <3B32C05A-1438-43DF-B541-F04DFE453236@mpq.mpg.de>

>> /var/folders/d5/d5kShiN8Gla+FttIH2Kn4E+++TM/-Tmp-
>
> How on earth did you manage to get this path?  Is that $TMPDIR ?

Exactly. $TMPDIR for my normal user account.

> If so, it is probably different for each user, and in that case
> the distinction between root/user could be important.

Actually I've just realized that $TMPDIR isn't set for root. Most  
probably this is why LuaTeX chose my home folder (sudo -s made me  
root!) during database and format generation as its fall-back cache  
location because there was no $TMPDIR. Still, LuaTeX should've used  
the cache path specified in texmfcnf.lua in the first place.

Oliver

From taco at elvenkind.com  Tue May 27 14:16:42 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 27 May 2008 14:16:42 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <3B32C05A-1438-43DF-B541-F04DFE453236@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>	<48384C40.8070702@elvenkind.com>	<48385B1E.1060303@elvenkind.com>	<48385E96.1070703@elvenkind.com>	<26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>	<8EBFD07B-8DB2-4F42-A399-767253060D41@mpq.mpg.de>	<483A7BF0.5010602@wxs.nl>
	<E6E5A739-3CCD-463C-8233-EBD313FB25AB@mpq.mpg.de>
	<483A86EF.7020802@elvenkind.com>
	<7E66D72A-9D6E-48D9-8706-4AC8E6FEF365@mpq.mpg.de> <483BF!
	81E.9040606@elvenkind.com>
	<3B32C05A-1438-43DF-B541-F04DFE453236@mpq.mpg.de>
Message-ID: <483BFBAA.9070101@elvenkind.com>



Oliver Buerschaper wrote:
> 
> Actually I've just realized that $TMPDIR isn't set for root. Most 
> probably this is why LuaTeX chose my home folder (sudo -s made me root!) 
> during database and format generation as its fall-back cache location 
> because there was no $TMPDIR. Still, LuaTeX should've used the cache 
> path specified in texmfcnf.lua in the first place.

Just checking: does

   /usr/local/context/2008-05-26-beta/texmf-cache

exist and is it writeable for everybody?



From oliver.buerschaper at mpq.mpg.de  Tue May 27 15:11:17 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Tue, 27 May 2008 15:11:17 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <483BFBAA.9070101@elvenkind.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<4831342A.4050109@elvenkind.com>	<CF094D27-8D69-4E72-9197-5E5FF7548E03@mpq.mpg.de>	<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>	<48384C40.8070702@elvenkind.com>	<48385B1E.1060303@elvenkind.com>	<48385E96.1070703@elvenkind.com>	<26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>	<8EBFD07B-8DB2-4F42-A399-767253060D41@mpq.mpg.de>	<483A7BF0.5010602@wxs.nl>
	<E6E5A739-3CCD-463C-8233-EBD313FB25AB@mpq.mpg.de>
	<483A86EF.7020802@elvenkind.com>
	<7E66D72A-9D6E-48D9-8706-4AC8E6FEF365@mpq.mpg.de> <483BF!
	81E.9040606@elvenkind.com>
	<3B32C05A-1438-43DF-B541-F04DFE453236@mpq.mpg.de> <483BFBAA.907010!
	1@elvenkind.com>
Message-ID: <EC56CFE5-280E-4F98-BEA5-1B147298CC27@mpq.mpg.de>

>> Actually I've just realized that $TMPDIR isn't set for root. Most  
>> probably this is why LuaTeX chose my home folder (sudo -s made me  
>> root!) during database and format generation as its fall-back cache  
>> location because there was no $TMPDIR. Still, LuaTeX should've used  
>> the cache path specified in texmfcnf.lua in the first place.
>
> Just checking: does
>
>  /usr/local/context/2008-05-26-beta/texmf-cache
>
> exist and is it writeable for everybody?

It exists but used to have permissions 775 which were the ones rsync  
set. Changed them to 777 and retried database generation as normal  
user first.

The directory above (set in texmfcnf.lua) is still ignored. Since  
$TMPDIR exists for a normal user LuaTeX chooses this one for its cache  
location.

After wiping all luatex-cache directories from my machine I made  
another fresh attempt at database generation, this time as root. Again  
the cache settings in texmfcnf.lua are ignored and since there's no  
$TMPDIR for root LuaTeX resorts to $HOME.

Oliver

From pragma at wxs.nl  Tue May 27 15:23:37 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 27 May 2008 15:23:37 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <EC56CFE5-280E-4F98-BEA5-1B147298CC27@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>	<48384C40.8070702@elvenkind.com>	<48385B1E.1060303@elvenkind.com>	<48385E96.1070703@elvenkind.com>	<26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>	<8EBFD07B-8DB2-4F42-A399-767253060D41@mpq.mpg.de>	<483A7BF0.5010602@wxs.nl>
	<E6E5A739-3CCD-463C-8233-EBD313FB25AB@mpq.mpg.de>
	<483A86EF.7020802@elvenkind.com>
	<7E66D72A-9D6E-48D9-8706-4AC8E6FEF365@mpq.mpg.de> <483BF!
	81E.9040606@elvenkind.com>
	<3B32C05A-1438-43DF-B541-F04DFE453236@mpq.mpg.de>
	<483BFBAA.907010! 1@elvenkind.com>
	<EC56CFE5-280E-4F98-BEA5-1B147298CC27@mpq.mpg.de>
Message-ID: <483C0B59.4030805@wxs.nl>

Oliver Buerschaper wrote:
>>> Actually I've just realized that $TMPDIR isn't set for root. Most 
>>> probably this is why LuaTeX chose my home folder (sudo -s made me 
>>> root!) during database and format generation as its fall-back cache 
>>> location because there was no $TMPDIR. Still, LuaTeX should've used 
>>> the cache path specified in texmfcnf.lua in the first place.
>>
>> Just checking: does
>>
>>  /usr/local/context/2008-05-26-beta/texmf-cache
>>
>> exist and is it writeable for everybody?
> 
> It exists but used to have permissions 775 which were the ones rsync 
> set. Changed them to 777 and retried database generation as normal user 
> first.
> 
> The directory above (set in texmfcnf.lua) is still ignored. Since 
> $TMPDIR exists for a normal user LuaTeX chooses this one for its cache 
> location.
> 
> After wiping all luatex-cache directories from my machine I made another 
> fresh attempt at database generation, this time as root. Again the cache 
> settings in texmfcnf.lua are ignored and since there's no $TMPDIR for 
> root LuaTeX resorts to $HOME.

but is texmfcnf.lua loaded? (--verbose)

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Tue May 27 15:29:14 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 27 May 2008 15:29:14 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <EC56CFE5-280E-4F98-BEA5-1B147298CC27@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>	<48384C40.8070702@elvenkind.com>	<48385B1E.1060303@elvenkind.com>	<48385E96.1070703@elvenkind.com>	<26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>	<8EBFD07B-8DB2-4F42-A399-767253060D41@mpq.mpg.de>	<483A7BF0.5010602@wxs.nl>
	<E6E5A739-3CCD-463C-8233-EBD313FB25AB@mpq.mpg.de>
	<483A86EF.7020802@elvenkind.com>
	<7E66D72A-9D6E-48D9-8706-4AC8E6FEF365@mpq.mpg.de> <483BF!
	81E.9040606@elvenkind.com>
	<3B32C05A-1438-43DF-B541-F04DFE453236@mpq.mpg.de>
	<483BFBAA.907010! 1@elvenkind.com>
	<EC56CFE5-280E-4F98-BEA5-1B147298CC27@mpq.mpg.de>
Message-ID: <483C0CAA.6090209@elvenkind.com>



Oliver Buerschaper wrote:
> 
> The directory above (set in texmfcnf.lua) is still ignored. Since 
> $TMPDIR exists for a normal user LuaTeX chooses this one for its cache 
> location.

Suddenly mine is ignored as well. Silly me, I should have tested
that much earlier, sorry about that. Will get back to you.



From oliver.buerschaper at mpq.mpg.de  Tue May 27 15:55:09 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Tue, 27 May 2008 15:55:09 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <483C0B59.4030805@wxs.nl>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48313F05.2020607@wxs.nl>	<69CEF316-FE54-442F-9192-0C206CEC356A@mpq.mpg.de>	<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>	<48384C40.8070702@elvenkind.com>	<48385B1E.1060303@elvenkind.com>	<48385E96.1070703@elvenkind.com>	<26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>	<8EBFD07B-8DB2-4F42-A399-767253060D41@mpq.mpg.de>	<483A7BF0.5010602@wxs.nl>
	<E6E5A739-3CCD-463C-8233-EBD313FB25AB@mpq.mpg.de>
	<483A86EF.7020802@elvenkind.com>
	<7E66D72A-9D6E-48D9-8706-4AC8E6FEF365@mpq.mpg.de> <483BF!
	81E.9040606@elvenkind.com>
	<3B32C05A-1438-43DF-B541-F04DFE453236@mpq.mpg.de>
	<483BFBAA.907010! 1@elvenkind.com>
	<EC56CFE5-280E-4F98-BEA5-1B147298CC27@mpq.mpg.de> <483C0B59.4030!
	805@wxs.nl>
Message-ID: <F6DED456-6F68-4E5D-BFA6-399766906D07@mpq.mpg.de>

> but is texmfcnf.lua loaded? (--verbose)

Sure. Both for root and the normal user.

From pragma at wxs.nl  Tue May 27 16:28:29 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 27 May 2008 16:28:29 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <F6DED456-6F68-4E5D-BFA6-399766906D07@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>	<48384C40.8070702@elvenkind.com>	<48385B1E.1060303@elvenkind.com>	<48385E96.1070703@elvenkind.com>	<26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>	<8EBFD07B-8DB2-4F42-A399-767253060D41@mpq.mpg.de>	<483A7BF0.5010602@wxs.nl>
	<E6E5A739-3CCD-463C-8233-EBD313FB25AB@mpq.mpg.de>
	<483A86EF.7020802@elvenkind.com>
	<7E66D72A-9D6E-48D9-8706-4AC8E6FEF365@mpq.mpg.de> <483BF!
	81E.9040606@elvenkind.com>
	<3B32C05A-1438-43DF-B541-F04DFE453236@mpq.mpg.de>
	<483BFBAA.907010! 1@elvenkind.com>
	<EC56CFE5-280E-4F98-BEA5-1B147298CC27@mpq.mpg.de>
	<483C0B59.4030! 805@wxs.nl>
	<F6DED456-6F68-4E5D-BFA6-399766906D07@mpq.mpg.de>
Message-ID: <483C1A8D.3070500@wxs.nl>

Oliver Buerschaper wrote:
>> but is texmfcnf.lua loaded? (--verbose)
> 
> Sure. Both for root and the normal user.

ok, another attempt .. new beta

-- 

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From luigi.scarso at gmail.com  Wed May 28 11:19:12 2008
From: luigi.scarso at gmail.com (luigi scarso)
Date: Wed, 28 May 2008 11:19:12 +0200
Subject: [dev-context] last modules frozen acrobat 8
In-Reply-To: <fe8d59da0805250351x5a787b96h2aa374bac7420d87@mail.gmail.com>
References: <fe8d59da0805250351x5a787b96h2aa374bac7420d87@mail.gmail.com>
Message-ID: <fe8d59da0805280219v43d03513lfdbf57872021cd5f@mail.gmail.com>

On Sun, May 25, 2008 at 12:51 PM, luigi scarso <luigi.scarso at gmail.com> wrote:
> It was reported that last modules freeze acrobat 8 .
> I have no problem with xpdf 3.02,
> GNOME evince 2.22.1.1
> and gs 8.62
fixed in #1296 (thanks taco,I was not able to test 1293)

ASAP I will make a new release of modules.



-- 
luigi

From oliver.buerschaper at mpq.mpg.de  Wed May 28 18:39:06 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Wed, 28 May 2008 18:39:06 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <483C1A8D.3070500@wxs.nl>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<48319B67.5080206@elvenkind.com>	<E0396BD7-28E9-4201-8AF3-52EE3EC491B3@mpq.mpg.de>	<4832D5D1.8070108@elvenkind.com>	<624E63D1-9AAD-45DE-B88F-10E581FCE2F6@mpq.mpg.de>	<4833F308.4080408@elvenkind.com>	<48343D97.5020408@elvenkind.com>	<101D0CF3-DE6B-446E-A14A-5354112F3A91@mpq.mpg.de>	<483849F5.1000208@wxs.nl>	<48384C40.8070702@elvenkind.com>	<48385B1E.1060303@elvenkind.com>	<48385E96.1070703@elvenkind.com>	<26779D2C-210E-4B83-890E-50FCA58796E0@mpq.mpg.de>	<8EBFD07B-8DB2-4F42-A399-767253060D41@mpq.mpg.de>	<483A7BF0.5010602@wxs.nl>
	<E6E5A739-3CCD-463C-8233-EBD313FB25AB@mpq.mpg.de>
	<483A86EF.7020802@elvenkind.com>
	<7E66D72A-9D6E-48D9-8706-4AC8E6FEF365@mpq.mpg.de> <483BF!
	81E.9040606@elvenkind.com>
	<3B32C05A-1438-43DF-B541-F04DFE453236@mpq.mpg.de>
	<483BFBAA.907010! 1@elvenkind.com>
	<EC56CFE5-280E-4F98-BEA5-1B147298CC27@mpq.mpg.de>
	<483C0B59.4030! 805@wxs.nl>
	<F6DED456-6F68-4E5D-BFA6-399766906D07@mpq.mpg.de> <483C1A8D.30!
	70500@wxs.nl>
Message-ID: <47A30E85-AFB2-473D-8E4D-4C5324E354DA@mpq.mpg.de>

>>> but is texmfcnf.lua loaded? (--verbose)
>> Sure. Both for root and the normal user.
>
> ok, another attempt .. new beta

Version 2008.05.27 16:31 happily generates the file database and  
compiles both english and dutch formats! Also, it sticks to the proper  
cache location I defined in texmf/web2c/texmfcnf.lua ... again without  
any environment variables set. Simple ConTeXt test files finally  
compile.

Thanks very much for the effort you put into this crucial problem!

Oliver

P.S. Can you put that "context" stub back into the minimals?

From mojca.miklavec.lists at gmail.com  Wed May 28 18:45:15 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 28 May 2008 18:45:15 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <47A30E85-AFB2-473D-8E4D-4C5324E354DA@mpq.mpg.de>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>
	<483A7BF0.5010602@wxs.nl>
	<E6E5A739-3CCD-463C-8233-EBD313FB25AB@mpq.mpg.de>
	<483A86EF.7020802@elvenkind.com>
	<7E66D72A-9D6E-48D9-8706-4AC8E6FEF365@mpq.mpg.de>
	<3B32C05A-1438-43DF-B541-F04DFE453236@mpq.mpg.de>
	<EC56CFE5-280E-4F98-BEA5-1B147298CC27@mpq.mpg.de>
	<F6DED456-6F68-4E5D-BFA6-399766906D07@mpq.mpg.de>
	<483C1A8D.3070500@wxs.nl>
	<47A30E85-AFB2-473D-8E4D-4C5324E354DA@mpq.mpg.de>
Message-ID: <6faad9f00805280945w926eee0w3da2da7e431015ba@mail.gmail.com>

On Wed, May 28, 2008 at 6:39 PM, Oliver Buerschaper wrote:
>
> P.S. Can you put that "context" stub back into the minimals?

It's only missing in the scripts/context/stubs/unix/ folder, in
scripts/context/stubs/mswin/ it is present :)

Mojca

From pragma at wxs.nl  Wed May 28 19:28:00 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 28 May 2008 19:28:00 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <6faad9f00805280945w926eee0w3da2da7e431015ba@mail.gmail.com>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>	
	<483A7BF0.5010602@wxs.nl>	
	<E6E5A739-3CCD-463C-8233-EBD313FB25AB@mpq.mpg.de>	
	<483A86EF.7020802@elvenkind.com>	
	<7E66D72A-9D6E-48D9-8706-4AC8E6FEF365@mpq.mpg.de>	
	<3B32C05A-1438-43DF-B541-F04DFE453236@mpq.mpg.de>	
	<EC56CFE5-280E-4F98-BEA5-1B147298CC27@mpq.mpg.de>	
	<F6DED456-6F68-4E5D-BFA6-399766906D07@mpq.mpg.de>	
	<483C1A8D.3070500@wxs.nl>	
	<47A30E85-AFB2-473D-8E4D-4C5324E354DA@mpq.mpg.de>
	<6faad9f00805280945w926eee0w3da2da7e431015ba@mail.gmail.com>
Message-ID: <483D9620.20103@wxs.nl>

Mojca Miklavec wrote:
> On Wed, May 28, 2008 at 6:39 PM, Oliver Buerschaper wrote:
>> P.S. Can you put that "context" stub back into the minimals?
> 
> It's only missing in the scripts/context/stubs/unix/ folder, in
> scripts/context/stubs/mswin/ it is present :)

well, i copy a non existing unix stub into the zip

is this one ok?

#!/bin/sh
mtxrun --script context "$@"


Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From oliver.buerschaper at mpq.mpg.de  Wed May 28 20:02:10 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Wed, 28 May 2008 20:02:10 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <483D9620.20103@wxs.nl>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>	
	<483A7BF0.5010602@wxs.nl>	
	<E6E5A739-3CCD-463C-8233-EBD313FB25AB@mpq.mpg.de>	
	<483A86EF.7020802@elvenkind.com>	
	<7E66D72A-9D6E-48D9-8706-4AC8E6FEF365@mpq.mpg.de>	
	<3B32C05A-1438-43DF-B541-F04DFE453236@mpq.mpg.de>	
	<EC56CFE5-280E-4F98-BEA5-1B147298CC27@mpq.mpg.de>	
	<F6DED456-6F68-4E5D-BFA6-399766906D07@mpq.mpg.de>	
	<483C1A8D.3070500@wxs.nl>	
	<47A30E85-AFB2-473D-8E4D-4C5324E354DA@mpq.mpg.de>
	<6faad9f00805280945w926eee0w3da2da7e431015ba@mail.gmail.com>
	<483D9620.20103@wxs.nl>
Message-ID: <AFD47370-E9C4-466F-AF18-3E771CEFD99B@mpq.mpg.de>

> well, i copy a non existing unix stub into the zip
>
> is this one ok?
>
> #!/bin/sh
> mtxrun --script context "$@"

Perfect. It's exactly the one that used to be present in the beta  
2008.05.24 20:06 (both in the binaries as well as the unix stubs  
directories). I was wondering why you removed it at all ;-)

Oliver

From taco at elvenkind.com  Wed May 28 20:02:59 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 28 May 2008 20:02:59 +0200
Subject: [dev-context] context program, mtxrun question?
In-Reply-To: <483D9620.20103@wxs.nl>
References: <20080519065821.GF17709@gamma.logic.tuwien.ac.at>		<483A7BF0.5010602@wxs.nl>		<E6E5A739-3CCD-463C-8233-EBD313FB25AB@mpq.mpg.de>		<483A86EF.7020802@elvenkind.com>		<7E66D72A-9D6E-48D9-8706-4AC8E6FEF365@mpq.mpg.de>		<3B32C05A-1438-43DF-B541-F04DFE453236@mpq.mpg.de>		<EC56CFE5-280E-4F98-BEA5-1B147298CC27@mpq.mpg.de>		<F6DED456-6F68-4E5D-BFA6-399766906D07@mpq.mpg.de>		<483C1A8D.3070500@wxs.nl>		<47A30E85-AFB2-473D-8E4D-4C5324E354DA@mpq.mpg.de>	<6faad9f00805280945w926eee0w3da2da7e431015ba@mail.gmail.com>
	<483D9620.20103@wxs.nl>
Message-ID: <483D9E53.60106@elvenkind.com>

Hans Hagen wrote:
> Mojca Miklavec wrote:
>> On Wed, May 28, 2008 at 6:39 PM, Oliver Buerschaper wrote:
>>> P.S. Can you put that "context" stub back into the minimals?
>> It's only missing in the scripts/context/stubs/unix/ folder, in
>> scripts/context/stubs/mswin/ it is present :)
> 
> well, i copy a non existing unix stub into the zip
> 
> is this one ok?
> 
> #!/bin/sh
> mtxrun --script context "$@"
> 

Yup, will do nicely.


From oliver.buerschaper at mpq.mpg.de  Sat Jun  7 12:20:38 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Sat, 7 Jun 2008 12:20:38 +0200
Subject: [dev-context] TEXMFHOME and the file database
Message-ID: <037D6524-F051-43F1-82DB-4BCC90BDA564@mpq.mpg.de>

Hi,

I tried to set up a TEXMFHOME directory for on-the-fly additions to  
the TeX tree. I'm working with the 2008.05.27 beta of MKIV, i.e. there  
are no setuptex scripts, environment variables and the like, just  
texmf.cnf and texmfcnf.lua in texmf/web2c. I've modified the former  
according to:

---

[...]

%HOMETEXMF     = /nonexist
TEXMFHOME     = $HOME/Library/texmf
TEXMF         = {$TEXMFHOME,!!$TEXMFPROJECT,!!$TEXMFFONTS,!! 
$TEXMFLOCAL,!!$TEXMFCONTEXT,!!$TEXMFEXTRA,!!$TEXMFMAIN}

[...]

---

Now LuaTeX only recognizes files put into $TEXMFHOME after the file  
database has been regenerated via

bash# luatools --generate --verbose

However, I would like LuaTeX to find these files without the need for  
rehashing just as if they were in the current working directory. What  
am I missing?

Best wishes,
Oliver

From dh at capdm.com  Tue Jun 10 19:36:01 2008
From: dh at capdm.com (Duncan Hothersall)
Date: Tue, 10 Jun 2008 18:36:01 +0100
Subject: [dev-context] Typo in core-reg.tex?
Message-ID: <484EBB81.8020800@capdm.com>

Line 571:

         
{#1\ifcase\currententrylevel\s!entrya\or\s!entryb\else\s!entryc\else\s!entryd\fi}

Penultimate \else should be an \or?

         
{#1\ifcase\currententrylevel\s!entrya\or\s!entryb\or\s!entryc\else\s!entryd\fi}

Duncan


From pragma at wxs.nl  Tue Jun 10 20:50:54 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 10 Jun 2008 20:50:54 +0200
Subject: [dev-context] Typo in core-reg.tex?
In-Reply-To: <484EBB81.8020800@capdm.com>
References: <484EBB81.8020800@capdm.com>
Message-ID: <484ECD0E.1020603@wxs.nl>

Duncan Hothersall wrote:
> Line 571:
> 
>          
> {#1\ifcase\currententrylevel\s!entrya\or\s!entryb\else\s!entryc\else\s!entryd\fi}
> 
> Penultimate \else should be an \or?
> 
>          
> {#1\ifcase\currententrylevel\s!entrya\or\s!entryb\or\s!entryc\else\s!entryd\fi}

ineed; fixed

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From oliver.buerschaper at mpq.mpg.de  Sun Jun 15 21:50:08 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Sun, 15 Jun 2008 21:50:08 +0200
Subject: [dev-context] mtxrun nonstopmode
Message-ID: <16FCA096-93E2-4217-8198-6052E8182787@mpq.mpg.de>

Dear all,

is it already possible to run LuaTeX (actually ConTeXt) in batchmode  
(or nonstopmode) via mtxrun?

Best,
Oliver

From schuster.wolfgang at googlemail.com  Mon Jun 16 08:22:59 2008
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Mon, 16 Jun 2008 08:22:59 +0200
Subject: [dev-context] mtxrun nonstopmode
In-Reply-To: <16FCA096-93E2-4217-8198-6052E8182787@mpq.mpg.de>
References: <16FCA096-93E2-4217-8198-6052E8182787@mpq.mpg.de>
Message-ID: <115224fb0806152322h2cbb5f8r4f68c80dfa9a92a8@mail.gmail.com>

On Sun, Jun 15, 2008 at 9:50 PM, Oliver Buerschaper
<oliver.buerschaper at mpq.mpg.de> wrote:
> Dear all,
>
> is it already possible to run LuaTeX (actually ConTeXt) in batchmode
> (or nonstopmode) via mtxrun?

Ask such questions next time better on the ConTeXt list.

context --batchmode ...
context --nonstopmode ...

Because we're already offtopic I continue with the next question.

Will the "purge" and "purgeall" parameters included in mtx-context or what is
there a lua script replacement for "ctxtools --purge --all".

Wolfgang

From taco at elvenkind.com  Mon Jun 16 10:27:10 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 16 Jun 2008 10:27:10 +0200
Subject: [dev-context] mtxrun nonstopmode
In-Reply-To: <115224fb0806152322h2cbb5f8r4f68c80dfa9a92a8@mail.gmail.com>
References: <16FCA096-93E2-4217-8198-6052E8182787@mpq.mpg.de>
	<115224fb0806152322h2cbb5f8r4f68c80dfa9a92a8@mail.gmail.com>
Message-ID: <485623DE.1030303@elvenkind.com>



Wolfgang Schuster wrote:
> On Sun, Jun 15, 2008 at 9:50 PM, Oliver Buerschaper
> <oliver.buerschaper at mpq.mpg.de> wrote:
>> Dear all,
>>
>> is it already possible to run LuaTeX (actually ConTeXt) in batchmode
>> (or nonstopmode) via mtxrun?
> 
> Ask such questions next time better on the ConTeXt list.
> 
> context --batchmode ...
> context --nonstopmode ...
> 
> Because we're already offtopic I continue with the next question.
> 
> Will the "purge" and "purgeall" parameters included in mtx-context or what is
> there a lua script replacement for "ctxtools --purge --all".

While at it, I would like to place a vote for having as few
command names as is feasible. In the current situation I find
I often forget whether I need ctxtools or xmltools or textools
or ...

Best wishes,
Taco

From mojca.miklavec.lists at gmail.com  Mon Jun 16 12:20:58 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Mon, 16 Jun 2008 12:20:58 +0200
Subject: [dev-context] Norwegian in ConTeXt (a delayed answer)
Message-ID: <6faad9f00806160320k5237d4e5pe68d84ef861254a6@mail.gmail.com>

Mojca/Hans/Mojca/Hans/Mojca wrote:

>>>> And we need to improve support for "Norwegian" - the poor user asked
>>>> for it more than one year ago.
>>>>
>>> anyhow, norwegian ... the poor user is not that poor apart from 3 missing hyphenation exceptions -)
>>
>> No, he also sent translations for all the labels for Nynorsk that have
>> never been included into ConTeXt, and language tags nn & nb have not
>> been added either.
>
> hm, must have lost that

[So I send this to the mailing list before a private conversation is lost again]

It's still there:
    http://thread.gmane.org/gmane.comp.tex.context.devel/349/

The point we stopped at was: you wanted to keep no and derive nn & nb
from it, but it stopped at hyphenation patterns somewhere (they were
submitted to CTAN, but notheng has happened afterwards), and at the
fact that nobody came up with a suggestion of how to derive the
languages from each other.

It really doesn't hurt if we define two languages nb and nn (such as
there are multiple languages for Czech/Slovak,
Croatian/Bosnian/Serbian), and "remove" no, in the sense that no can
be left as a synonym to nb only.

Specifically:

-------------

Hans F. Nordhaug:

> I think "no" should be deprecated and giving a (useful) warning/error -
> telling people to switch to "nb".

-------------

Karl:

To sum up, we need the following language codes: nb and nn.
And we need the following mappings:

bokmal --> nb
bokm?l --> nb (if possible)
nynorsk --> nn
norsk --> nb (with warning)
norwegian --> nb (with warning)

-------------

Mojca:

You also need to ask Hans how to provide a "'no' is not allowed
language switch" warning or error.

What are you planning to do with the "norwegian" interface?

Hans: why is "Norwegian" currently not listed in mult-sys.tex? Because
only languages which need something different than "ec" need to be
listed there or is there some other reason?

Hans, you pointed out the chineese module ... but from what I can see
there, one needs to include the module explicitely and ConTeXt users
are pampered too much ;) (i.e. everything should happen automatically)
- is there a way to say something like this?

\startlanguage[nn]
  \setupitemize[stopper=]
  \definesymbol[1][\endash]
\stoplanguage

-------------

Karl/Mojca/Karl:

>>    leftquotation=\leftguillemot,
>>    rightquotation=\rightguillemot,
>
>Are the old values wrong or just an alternative?

Well, there are no very strict rules in Norwegian; you *can* use every
possible quotation mark. But the guillemots are certainly the preferred ones
for (outer) quotations.

-------------

Karl:

My suggestion is

\definesymbol[1][{\symbol[dash]}]
\definesymbol[2][{\symbol[star]}]
\definesymbol[3][{\symbol[circle]}]
\definesymbol[4][{\symbol[bullet]}]
\definesymbol[5][{\symbol[triangle]}]

and leave levels 6+ at their defaults. Norwegian people, feel free to comment
on this. :)

-------------

Mojca:

so it would really make sense to enable something like

\startlanguagespecifics[nb]
  \setupitemize[stopper=]

  \definesymbol[1][{\symbol[dash]}]
  \definesymbol[2][{\symbol[star]}]
  \definesymbol[3][{\symbol[circle]}]
  \definesymbol[4][{\symbol[bullet]}]
  \definesymbol[5][{\symbol[triangle]}]
\stoplanguagespecifics

Perhaps that exists already, but I don't know how to do it.

For Slovenian and Hungarian, the same "problem" exists. Now I use

\def\placedotafter#1{#1.}
\setuphead[section][numbercommand=\placedotafter]

although it would be more clean if one could have something similar to

\startlanguagespecifics[sl]
  \setupheads[stopper=.]
\stoplanguagespecifics

in default settings once that will be implemented.

-------------

Karl:

\setupheadtext [\s!nb] [\v!content=Innhold]
\setupheadtext [\s!nn] [\v!content=Innhald]

\setupheadtext [\s!nb] [\v!tables=Tabeller]
\setupheadtext [\s!nn] [\v!tables=Tabellar]

\setupheadtext [\s!nb] [\v!figures=Figurer]
\setupheadtext [\s!nn] [\v!figures=Figurar]

\setupheadtext [\s!nb] [\v!graphics=Bilde]
\setupheadtext [\s!nn] [\v!graphics=Bilete]

\setupheadtext [\s!nb] [\v!intermezzi=Intermesso]
\setupheadtext [\s!nn] [\v!intermezzi=Intermesso]

\setupheadtext [\s!nb] [\v!index=Register]
\setupheadtext [\s!nn] [\v!index=Register]

\setupheadtext [\s!nb] [\v!abbreviations=Forkortelser]
\setupheadtext [\s!nn] [\v!abbreviations=Forkortingar]

\setupheadtext [\s!nb] [\v!logos=Logoer]
\setupheadtext [\s!nn] [\v!logos=Logoar]

\setupheadtext [\s!nb] [\v!units=Enheter]
\setupheadtext [\s!nn] [\v!units=Einingar]

\setuplabeltext [\s!nb] [\v!table=Tabell ]
\setuplabeltext [\s!nn] [\v!table=Tabell ]

\setuplabeltext [\s!nb] [\v!figure=Figur ]
\setuplabeltext [\s!nn] [\v!figure=Figur ]

\setuplabeltext [\s!nb] [\v!intermezzo=Intermesso ]
\setuplabeltext [\s!nn] [\v!intermezzo=Intermesso ]

\setuplabeltext [\s!nb] [\v!graphic=Bilde ]
\setuplabeltext [\s!nn] [\v!graphic=Bilete ]

\setuplabeltext [\s!nb] [\v!chapter=]
\setuplabeltext [\s!nn] [\v!chapter=]

\setuplabeltext [\s!nb] [\v!section=]
\setuplabeltext [\s!nn] [\v!section=]

\setuplabeltext [\s!nb] [\v!subsection=]
\setuplabeltext [\s!nn] [\v!subsection=]

\setuplabeltext [\s!nb] [\v!subsubsection=]
\setuplabeltext [\s!nn] [\v!subsubsection=]

\setuplabeltext [\s!nb] [\v!subsubsubsection=]
\setuplabeltext [\s!nn] [\v!subsubsubsection=]

\setuplabeltext [\s!nb] [\v!appendix=] % Tillegg
\setuplabeltext [\s!nn] [\v!appendix=] % Tillegg

\setuplabeltext [\s!nb] [\v!part=Del]
\setuplabeltext [\s!nn] [\v!part=Del]

\setuplabeltext [\s!nb] [\v!line=linje ]
\setuplabeltext [\s!nn] [\v!line=linje ]

\setuplabeltext [\s!nb] [\v!lines=linjer ]
\setuplabeltext [\s!nn] [\v!lines=linjer ]


\setuplabeltext [\s!nb]   [\v!january=januar]
\setuplabeltext [\s!nb]  [\v!february=februar]
\setuplabeltext [\s!nb]     [\v!march=mars]
\setuplabeltext [\s!nb]     [\v!april=april]
\setuplabeltext [\s!nb]       [\v!may=mai]
\setuplabeltext [\s!nb]      [\v!june=juni]
\setuplabeltext [\s!nb]      [\v!july=juli]
\setuplabeltext [\s!nb]    [\v!august=august]
\setuplabeltext [\s!nb] [\v!september=september]
\setuplabeltext [\s!nb]   [\v!october=oktober]
\setuplabeltext [\s!nb]  [\v!november=november]
\setuplabeltext [\s!nb]  [\v!december=desember]


\setuplabeltext [\s!nn]   [\v!january=januar]
\setuplabeltext [\s!nn]  [\v!february=februar]
\setuplabeltext [\s!nn]     [\v!march=mars]
\setuplabeltext [\s!nn]     [\v!april=april]
\setuplabeltext [\s!nn]       [\v!may=mai]
\setuplabeltext [\s!nn]      [\v!june=juni]
\setuplabeltext [\s!nn]      [\v!july=juli]
\setuplabeltext [\s!nn]    [\v!august=august]
\setuplabeltext [\s!nn] [\v!september=september]
\setuplabeltext [\s!nn]   [\v!october=oktober]
\setuplabeltext [\s!nn]  [\v!november=november]
\setuplabeltext [\s!nn]  [\v!december=desember]


\setuplabeltext [\s!nb]    [\v!sunday=s\ostroke ndag]
\setuplabeltext [\s!nb]    [\v!monday=mandag]
\setuplabeltext [\s!nb]   [\v!tuesday=tirsdag]
\setuplabeltext [\s!nb] [\v!wednesday=onsdag]
\setuplabeltext [\s!nb]  [\v!thursday=torsdag]
\setuplabeltext [\s!nb]    [\v!friday=fredag]
\setuplabeltext [\s!nb]  [\v!saturday=l\ostroke rdag]

\setuplabeltext [\s!nn]    [\v!sunday=sundag]
\setuplabeltext [\s!nn]    [\v!monday=m\aring ndag]
\setuplabeltext [\s!nn]   [\v!tuesday=tysdag]
\setuplabeltext [\s!nn] [\v!wednesday=onsdag]
\setuplabeltext [\s!nn]  [\v!thursday=torsdag]
\setuplabeltext [\s!nn]    [\v!friday=fredag]
\setuplabeltext [\s!nn]  [\v!saturday=laurdag]

\setuplabeltext [\s!nb]    [\v!page=side ]
\setuplabeltext [\s!nb]  [\v!atpage=p\aring\ side ]
\setuplabeltext [\s!nb] [\v!hencefore=som vist over]
\setuplabeltext [\s!nb] [\v!hereafter=som vist under]
\setuplabeltext [\s!nb]       [\v!see=se ]

\setuplabeltext [\s!nn]    [\v!page=side ]
\setuplabeltext [\s!nn]  [\v!atpage=p\aring\ side ]
\setuplabeltext [\s!nn] [\v!hencefore=som vist over]
\setuplabeltext [\s!nn] [\v!hereafter=som vist under]
\setuplabeltext [\s!nn]       [\v!see=sj\aring\ ]

\setuplabeltext [\s!nb] [\v!january  :\s!mnem=jan.]
\setuplabeltext [\s!nb] [\v!february :\s!mnem=feb.]
\setuplabeltext [\s!nb] [\v!march    :\s!mnem=mars]
\setuplabeltext [\s!nb] [\v!april    :\s!mnem=april]
\setuplabeltext [\s!nb] [\v!may      :\s!mnem=mai]
\setuplabeltext [\s!nb] [\v!june     :\s!mnem=juni]
\setuplabeltext [\s!nb] [\v!july     :\s!mnem=juli]
\setuplabeltext [\s!nb] [\v!august   :\s!mnem=aug.]
\setuplabeltext [\s!nb] [\v!september:\s!mnem=sep.]
\setuplabeltext [\s!nb] [\v!october  :\s!mnem=okt.]
\setuplabeltext [\s!nb] [\v!november :\s!mnem=nov.]
\setuplabeltext [\s!nb] [\v!december :\s!mnem=des.]


\setuplabeltext [\s!nn] [\v!january  :\s!mnem=jan.]
\setuplabeltext [\s!nn] [\v!february :\s!mnem=feb.]
\setuplabeltext [\s!nn] [\v!march    :\s!mnem=mars]
\setuplabeltext [\s!nn] [\v!april    :\s!mnem=april]
\setuplabeltext [\s!nn] [\v!may      :\s!mnem=mai]
\setuplabeltext [\s!nn] [\v!june     :\s!mnem=juni]
\setuplabeltext [\s!nn] [\v!july     :\s!mnem=juli]
\setuplabeltext [\s!nn] [\v!august   :\s!mnem=aug.]
\setuplabeltext [\s!nn] [\v!september:\s!mnem=sep.]
\setuplabeltext [\s!nn] [\v!october  :\s!mnem=okt.]
\setuplabeltext [\s!nn] [\v!november :\s!mnem=nov.]
\setuplabeltext [\s!nn] [\v!december :\s!mnem=des.]

------------------

Karl:

\installlanguage
 [nn]
 [spacing=packed,
  lefthyphenmin=2,
  righthyphenmin=2,
  leftsentence=---,
  rightsentence=---,
  leftsubsentence=---,
  rightsubsentence=---,
  leftquote=\upperleftsinglesixquote,
  rightquote=\upperrightsingleninequote,
  leftquotation=\leftguillemot,
  rightquotation=\rightguillemot,
  date={day,{.},\ ,month,\ ,year},
  state=stop]

This is for Norwegian Nynorsk ('nn'), but the same setup is used for Norwegian
Bokm?l (the values used for 'day' differ, though -- see below).

------------------

Mojca

From oliver.buerschaper at mpq.mpg.de  Mon Jun 16 16:56:18 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Mon, 16 Jun 2008 16:56:18 +0200
Subject: [dev-context] mtxrun nonstopmode
In-Reply-To: <485623DE.1030303@elvenkind.com>
References: <16FCA096-93E2-4217-8198-6052E8182787@mpq.mpg.de>
	<115224fb0806152322h2cbb5f8r4f68c80dfa9a92a8@mail.gmail.com>
	<485623DE.1030303@elvenkind.com>
Message-ID: <36B34404-4827-4441-87D8-43B415C1D0CE@mpq.mpg.de>

> While at it, I would like to place a vote for having as few
> command names as is feasible. In the current situation I find
> I often forget whether I need ctxtools or xmltools or textools
> or ...

I'd second that idea right away!

Oliver

From pragma at wxs.nl  Mon Jun 16 17:37:11 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 16 Jun 2008 17:37:11 +0200
Subject: [dev-context] mtxrun nonstopmode
In-Reply-To: <36B34404-4827-4441-87D8-43B415C1D0CE@mpq.mpg.de>
References: <16FCA096-93E2-4217-8198-6052E8182787@mpq.mpg.de>	<115224fb0806152322h2cbb5f8r4f68c80dfa9a92a8@mail.gmail.com>	<485623DE.1030303@elvenkind.com>
	<36B34404-4827-4441-87D8-43B415C1D0CE@mpq.mpg.de>
Message-ID: <485688A7.8060109@wxs.nl>

Oliver Buerschaper wrote:
>> While at it, I would like to place a vote for having as few
>> command names as is feasible. In the current situation I find
>> I often forget whether I need ctxtools or xmltools or textools
>> or ...

not all scripts are for everyday use ... when using mkiv some can go 
away (rlxtools may be intergrated in mkiv for instance) but combining 
all in one also complicstes matters (conflicting flags for instance)

some functionality moves ... for instance ctxtools and tmftools contain 
some 'fixup for tds situations' and that goes away when solved or no 
longer needed; an example of code that moves from ctxtools to somplace 
else if pattern conversion code (goes to mtx-patterns) and only an 
unhappy few will use that (read: mojca and me); in mtx-* featrues are 
differently organized and grouped

other stuff, like texexec's --pdf* features will not end up in 
mtx-context but will become ctx file driven features, so think of 
--ctx=pdfcombine and so

> I'd second that idea right away!

well, old script will stay forever because mkii will stay forever

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Mon Jun 16 17:49:42 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 16 Jun 2008 17:49:42 +0200
Subject: [dev-context] mtxrun nonstopmode
In-Reply-To: <485688A7.8060109@wxs.nl>
References: <16FCA096-93E2-4217-8198-6052E8182787@mpq.mpg.de>	<115224fb0806152322h2cbb5f8r4f68c80dfa9a92a8@mail.gmail.com>	<485623DE.1030303@elvenkind.com>
	<36B34404-4827-4441-87D8-43B415C1D0CE@mpq.mpg.de>
	<485688A7.8060109@wxs.nl>
Message-ID: <48568B96.40809@elvenkind.com>



Hans Hagen wrote:
> Oliver Buerschaper wrote:
>>> While at it, I would like to place a vote for having as few
>>> command names as is feasible. In the current situation I find
>>> I often forget whether I need ctxtools or xmltools or textools
>>> or ...
> 
> not all scripts are for everyday use ... when using mkiv some can go 
> away (rlxtools may be intergrated in mkiv for instance) but combining 
> all in one also complicstes matters (conflicting flags for instance)

How about:

   $ mtxrun --script whatprovides tpm\*
   textools --tpmmake
   $ mtxrun --script whatprovides --all make
   luatools --make
   mtxrun --make
   mtxrun --script context --make
   mtxrun --script update --make
   texexec --make
   $

;-)





From pragma at wxs.nl  Mon Jun 16 18:21:49 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 16 Jun 2008 18:21:49 +0200
Subject: [dev-context] mtxrun nonstopmode
In-Reply-To: <48568B96.40809@elvenkind.com>
References: <16FCA096-93E2-4217-8198-6052E8182787@mpq.mpg.de>	<115224fb0806152322h2cbb5f8r4f68c80dfa9a92a8@mail.gmail.com>	<485623DE.1030303@elvenkind.com>
	<36B34404-4827-4441-87D8-43B415C1D0CE@mpq.mpg.de>
	<485688A7.8060109@wxs.nl> <48568B96.40809@elvenkind.com>
Message-ID: <4856931D.80202@wxs.nl>

Taco Hoekwater wrote:
> 
> 
> Hans Hagen wrote:
>> Oliver Buerschaper wrote:
>>>> While at it, I would like to place a vote for having as few
>>>> command names as is feasible. In the current situation I find
>>>> I often forget whether I need ctxtools or xmltools or textools
>>>> or ...
>>
>> not all scripts are for everyday use ... when using mkiv some can go 
>> away (rlxtools may be intergrated in mkiv for instance) but combining 
>> all in one also complicstes matters (conflicting flags for instance)
> 
> How about:
> 
>   $ mtxrun --script whatprovides tpm\*
>   textools --tpmmake
>   $ mtxrun --script whatprovides --all make
>   luatools --make
>   mtxrun --make
>   mtxrun --script context --make
>   mtxrun --script update --make
>   texexec --make
>   $

nice eh? i was thinking of merging luatools and mtxrun but they have too 
different purposes

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From peter.rolf at arcor.de  Mon Jun 16 13:00:50 2008
From: peter.rolf at arcor.de (Peter Rolf)
Date: Mon, 16 Jun 2008 13:00:50 +0200
Subject: [dev-context] format() without formatting
Message-ID: <485647E2.8070600@arcor.de>

Hi,

can one of the experienced lua programmers here think about a special
version of format()? This function in general is of great help (short, 
good readable code), but in combination with direct written pdf code 
(like in mlib-pdf.lua) is has a major drawback.
All numbers are written with fixed size (as normally intended in
formatted output). As a result you get '0.000000' instead of a short '0'.
Look in an uncompressed pdf and you will see how much space is wasted
there in total.

Here an example (pdf code segment of a mp graphic).

% mps graphic 1: begin
q
q /Pattern cs
10.000000 M
1 j
0.000000 0.000000 m
94.486725 0.000000 188.977783 0.000000 283.464508 0.000000 c
283.464508 28.346451 l
188.977783 28.346451 94.486725 28.346451 0.000000 28.346451 c
0.000000 0.000000 l
W n /MpSh1 sh Q
0 g 0 G
1 J
0.100006 w
0.000000 28.346451 m
283.464508 28.346451 l
S
0 g 0 G
0 g 0 G
0.100006 w
283.096863 28.194168 m
283.464508 28.346451 l
283.096863 28.498734 l
283.096863 28.194168 l
h B
0 g 0 G
Q
% mps graphic 1: end


With enabled compression things don't look that bad (regarding to file 
size), but it's still a unnecessary waste.

To summarize it:
the new function should act like 'format', but it should use the minimal 
number of digits. Also there should be the possibility to adjust the 
number of digits after the point (current accuracy for floats: 1/1000000 
pt).

Any thoughts?


Regards, Peter


From arthur.reutenauer at normalesup.org  Tue Jun 17 09:42:51 2008
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Tue, 17 Jun 2008 09:42:51 +0200
Subject: [dev-context] format() without formatting
In-Reply-To: <485647E2.8070600@arcor.de>
References: <485647E2.8070600@arcor.de>
Message-ID: <20080617074251.GP29361@phare.normalesup.org>

	Hello,

  For a string with a single float you can play a bit with the output of
string.format.  The following few lines strip all the trailing zeroes
from strings that look a formatted float:

====

    function string.optimize_format(form, ...)
      local formatted_string = string.format(form, ...)
      local optimized_string = formatted_string:gsub('^(%d*\.%d-)(0*)$', '%1')
      return optimized_string
    end

    print(string.optimize_format(0.003))
    print(string.optimize_format(0.000007))
    print(string.optimize_format(120))
    print(string.optimize_format("Hello, world!"))

====

but of course this doesn't work if you have a format like "%s %s l"; you would
have to parse all the arguments to format.

	Arthur

From pragma at wxs.nl  Tue Jun 17 10:01:10 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 17 Jun 2008 10:01:10 +0200
Subject: [dev-context] format() without formatting
In-Reply-To: <485647E2.8070600@arcor.de>
References: <485647E2.8070600@arcor.de>
Message-ID: <48576F46.8050107@wxs.nl>

Peter Rolf wrote:
> Hi,
> 
> can one of the experienced lua programmers here think about a special
> version of format()? This function in general is of great help (short, 
> good readable code), but in combination with direct written pdf code 
> (like in mlib-pdf.lua) is has a major drawback.
> All numbers are written with fixed size (as normally intended in
> formatted output). As a result you get '0.000000' instead of a short '0'.
> Look in an uncompressed pdf and you will see how much space is wasted
> there in total.

it's a trade off; %g is not usable because we then get e notation

and postprocessing is no option either because it's a waste of cpu cycles

> With enabled compression things don't look that bad (regarding to file 
> size), but it's still a unnecessary waste.

indeed, such sequences compress well

adding special formatter function has a low priority .. maybe some day

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From arthur.reutenauer at normalesup.org  Tue Jun 17 11:40:07 2008
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Tue, 17 Jun 2008 11:40:07 +0200
Subject: [dev-context] format() without formatting
In-Reply-To: <20080617074251.GP29361@phare.normalesup.org>
References: <485647E2.8070600@arcor.de>
	<20080617074251.GP29361@phare.normalesup.org>
Message-ID: <20080617094007.GQ29361@phare.normalesup.org>

>       local optimized_string = formatted_string:gsub('^(%d*\.%d-)(0*)$', '%1')

  Actually, I just realized that the primitive tostring does exactly the
same transformation (probably in a much safer way), so we can use it in
the much more complete code:

====

-- Thank you, Lua-users wiki :-)
-- http://lua-users.org/wiki/VarargTheSecondClassCitizen Issue #7

-- The first two functions below implement a map over a "..." list
local function map_rec(f, n, a, ...)
  if n > 0 then return f(a), map_rec(f, n-1, ...) end
end

local function map(f, ...)
  return map_rec(f, select('#', ...), ...)
end

-- Our "better formatting" function
function string.better_format(form, ...)
  -- Every number-kind-of-format -> %s
  form = form:gsub('%%[0-9]-%.?[0-9]-f', '%%s')
  form = form:gsub('%%d', '%%s')
  form = form:gsub('%%i', '%%s')
  -- Then make every argument in the list into a string
  return(string.format(form, map(tostring, ...)))
end

-- Now Lua will happily strip the trailing zeroes
print(string.better_format("%f %f m", 94.486000, 30.000))
print(string.better_format("%5f %.7f l", .577, 2.7828))
print(string.better_format("%5f %.7f %d l", 3.14000, 2.7828, 3))

====

	Arthur

From pragma at wxs.nl  Tue Jun 17 12:14:58 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 17 Jun 2008 12:14:58 +0200
Subject: [dev-context] format() without formatting
In-Reply-To: <20080617094007.GQ29361@phare.normalesup.org>
References: <485647E2.8070600@arcor.de>	<20080617074251.GP29361@phare.normalesup.org>
	<20080617094007.GQ29361@phare.normalesup.org>
Message-ID: <48578EA2.3040709@wxs.nl>

Arthur Reutenauer wrote:
>>       local optimized_string = formatted_string:gsub('^(%d*\.%d-)(0*)$', '%1')
> 
>   Actually, I just realized that the primitive tostring does exactly the
> same transformation (probably in a much safer way), so we can use it in
> the much more complete code:
> 
> ====
> 
> -- Thank you, Lua-users wiki :-)
> -- http://lua-users.org/wiki/VarargTheSecondClassCitizen Issue #7
> 
> -- The first two functions below implement a map over a "..." list
> local function map_rec(f, n, a, ...)
>   if n > 0 then return f(a), map_rec(f, n-1, ...) end
> end
> 
> local function map(f, ...)
>   return map_rec(f, select('#', ...), ...)
> end
> 
> -- Our "better formatting" function
> function string.better_format(form, ...)
>   -- Every number-kind-of-format -> %s
>   form = form:gsub('%%[0-9]-%.?[0-9]-f', '%%s')
>   form = form:gsub('%%d', '%%s')
>   form = form:gsub('%%i', '%%s')
>   -- Then make every argument in the list into a string
>   return(string.format(form, map(tostring, ...)))
> end
> 
> -- Now Lua will happily strip the trailing zeroes
> print(string.better_format("%f %f m", 94.486000, 30.000))
> print(string.better_format("%5f %.7f l", .577, 2.7828))
> print(string.better_format("%5f %.7f %d l", 3.14000, 2.7828, 3))

this is a bit weird case ... on the one hand you specify %5f and such 
but that's ignored i.e. becomes %s so why not use %s in the first place 
then

so, you could have said

print(string.format("%s %s m", 94.486000, 30.000))
print(string.format("%s %s l", .577, 2.7828))
print(string.format("%s %s %s l", 3.14000, 2.7828, 3))

which is then way faster

anyway, originally i used %s but when taco and i played with the 
converter and did some performance tests we found out that %f is faster 
(unless > 6 digits specified)

a more general speed improvement is to set the pdf compression to 3

i may add a stripper (more general one) once i reimplement the backend 
(all backend stuff in mkiv is temporary)

Hans



-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Tue Jun 17 12:20:34 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 17 Jun 2008 12:20:34 +0200
Subject: [dev-context] format() without formatting
In-Reply-To: <20080617094007.GQ29361@phare.normalesup.org>
References: <485647E2.8070600@arcor.de>	<20080617074251.GP29361@phare.normalesup.org>
	<20080617094007.GQ29361@phare.normalesup.org>
Message-ID: <48578FF2.6090307@wxs.nl>

Arthur Reutenauer wrote:
>>       local optimized_string = formatted_string:gsub('^(%d*\.%d-)(0*)$', '%1')

okay then, let's go educational ... a better stripper:

local digit   = lpeg.R("09")
local period  = lpeg.P(".")
local zero    = lpeg.P("0")
local finish  = lpeg.P(-1)
local nodigit = (1-digit) + finish
local number  = digit^1 * ((period * zero^1 * #nodigit)/"") + (period * 
(1-zero)^0 * (zero^1/"" + digit^1) * nodigit)

local stripper = lpeg.Cs((number + 1)^0)

local sample = "bla bla 0.11100000 bla bla 0.00000 bla 0.00001 bla bla 
bla 10.11100000 bla bla 1.00000 bla 0.00001 bla"

collectgarbage("collect")
str = string.rep(sample,10000)
local ts = os.clock()
stripper:match(str)
print(#str, os.clock()-ts, stripper:match(sample))



-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From arthur.reutenauer at normalesup.org  Tue Jun 17 12:30:23 2008
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Tue, 17 Jun 2008 12:30:23 +0200
Subject: [dev-context] format() without formatting
In-Reply-To: <48578EA2.3040709@wxs.nl>
References: <485647E2.8070600@arcor.de>
	<20080617074251.GP29361@phare.normalesup.org>
	<20080617094007.GQ29361@phare.normalesup.org>
	<48578EA2.3040709@wxs.nl>
Message-ID: <20080617103023.GR29361@phare.normalesup.org>

> this is a bit weird case ... on the one hand you specify %5f and such 
> but that's ignored i.e. becomes %s so why not use %s in the first place 
> then

  Actually, this was precisely my intention: to show that one could use
the original format string with different formatting requirements (I
don't know where that format string is going to come from, if Peter is
going to type or if it's going to be inserted by some lower-level
function).  But I agree that if the user is going to type it himself,
he'd better use %s for convenience (Lua is so tolerant anyway).

> anyway, originally i used %s but when taco and i played with the 
> converter and did some performance tests we found out that %f is faster 
> (unless > 6 digits specified)

  I suppose that when Lua sees a %s format with an argument that is not
a string, he calls tostring which must be much slower.

	Arthur

From arthur.reutenauer at normalesup.org  Tue Jun 17 12:34:39 2008
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Tue, 17 Jun 2008 12:34:39 +0200
Subject: [dev-context] format() without formatting
In-Reply-To: <48578FF2.6090307@wxs.nl>
References: <485647E2.8070600@arcor.de>
	<20080617074251.GP29361@phare.normalesup.org>
	<20080617094007.GQ29361@phare.normalesup.org>
	<48578FF2.6090307@wxs.nl>
Message-ID: <20080617103439.GS29361@phare.normalesup.org>

> okay then, let's go educational ... a better stripper:
> 
> local digit   = lpeg.R("09")

  Yes, I started writing a format string parser in LPeg before I
realized that there was the tostring function as well :-)

	Arthur

From peter.rolf at arcor.de  Tue Jun 17 12:49:07 2008
From: peter.rolf at arcor.de (Peter Rolf)
Date: Tue, 17 Jun 2008 12:49:07 +0200
Subject: [dev-context] format() without formatting
In-Reply-To: <48576F46.8050107@wxs.nl>
References: <485647E2.8070600@arcor.de> <48576F46.8050107@wxs.nl>
Message-ID: <485796A3.6070000@arcor.de>

Hans Hagen schrieb:
> Peter Rolf wrote:
>> Hi,
>>
>> can one of the experienced lua programmers here think about a special
>> version of format()? This function in general is of great help (short, 
>> good readable code), but in combination with direct written pdf code 
>> (like in mlib-pdf.lua) is has a major drawback.
>> All numbers are written with fixed size (as normally intended in
>> formatted output). As a result you get '0.000000' instead of a short '0'.
>> Look in an uncompressed pdf and you will see how much space is wasted
>> there in total.
> 
> it's a trade off; %g is not usable because we then get e notation
> 
> and postprocessing is no option either because it's a waste of cpu cycles
>
stupid me (a much simpler approach is possible).

just looked deeper in mlib-pdf.lua. i simply added '%.3f' on all
positions, where coordinates/measures are written. same for integer 
('%.0f' or as in the pdf reference '%.1f'). much shorter and better 
readability of the unpacked pdf. so there is no really need for an 
*optimal* solution with an adapted format function. sorry for the noise.

>> With enabled compression things don't look that bad (regarding to file 
>> size), but it's still a unnecessary waste.
> 
> indeed, such sequences compress well
> 
yes <sigh>. i optimized some code and saved around 18k in the final
uncompressed pdf (3% smaller). took me some time and i was a little
proud of myself. after compressing all saving that was left were 1.111 
bytes. <sigh again> :)

but this is not only a file size issue. you have to represent the data
in some way in memory. less memory usage, less time for data scanning 
means faster viewing.

> adding special formatter function has a low priority .. maybe some day
> 
> Hans
> 
so can you please simply limit the number of digits after the point in 
mlib-pdf.lua? you have already done this for colors at the end of the 
source. if i have to patch one more file, i can make my own distribution ;)

regards, peter

> 
> -----------------------------------------------------------------
>                                           Hans Hagen | PRAGMA ADE
>               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
>      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
>                                              | www.pragma-pod.nl
> -----------------------------------------------------------------
> 



From pragma at wxs.nl  Tue Jun 17 13:08:33 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 17 Jun 2008 13:08:33 +0200
Subject: [dev-context] format() without formatting
In-Reply-To: <20080617103023.GR29361@phare.normalesup.org>
References: <485647E2.8070600@arcor.de>	<20080617074251.GP29361@phare.normalesup.org>	<20080617094007.GQ29361@phare.normalesup.org>	<48578EA2.3040709@wxs.nl>
	<20080617103023.GR29361@phare.normalesup.org>
Message-ID: <48579B31.2070802@wxs.nl>

Arthur Reutenauer wrote:
>> this is a bit weird case ... on the one hand you specify %5f and such 
>> but that's ignored i.e. becomes %s so why not use %s in the first place 
>> then
> 
>   Actually, this was precisely my intention: to show that one could use
> the original format string with different formatting requirements (I
> don't know where that format string is going to come from, if Peter is
> going to type or if it's going to be inserted by some lower-level
> function).  But I agree that if the user is going to type it himself,
> he'd better use %s for convenience (Lua is so tolerant anyway).

sure; in this case the %f is deep down in the mkiv code

>> anyway, originally i used %s but when taco and i played with the 
>> converter and did some performance tests we found out that %f is faster 
>> (unless > 6 digits specified)
> 
>   I suppose that when Lua sees a %s format with an argument that is not
> a string, he calls tostring which must be much slower.

i think that for any conversion it has to call a function (take hex) but 
tostring may be costly due to metatable access, also it seems that 
tostring does some stripping

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Tue Jun 17 13:18:36 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 17 Jun 2008 13:18:36 +0200
Subject: [dev-context] format() without formatting
In-Reply-To: <485796A3.6070000@arcor.de>
References: <485647E2.8070600@arcor.de> <48576F46.8050107@wxs.nl>
	<485796A3.6070000@arcor.de>
Message-ID: <48579D8C.3030606@wxs.nl>

Peter Rolf wrote:

> just looked deeper in mlib-pdf.lua. i simply added '%.3f' on all
> positions, where coordinates/measures are written. same for integer 
> ('%.0f' or as in the pdf reference '%.1f'). much shorter and better 

integers are %i and floats %f (which defaults to %.6f)

we really need at least 6 digits precision with graphics; for colors 3 
digits is ok

> readability of the unpacked pdf. so there is no really need for an 
> *optimal* solution with an adapted format function. sorry for the noise.
> 
>>> With enabled compression things don't look that bad (regarding to file 
>>> size), but it's still a unnecessary waste.
>> indeed, such sequences compress well
>>
> yes <sigh>. i optimized some code and saved around 18k in the final
> uncompressed pdf (3% smaller). took me some time and i was a little
> proud of myself. after compressing all saving that was left were 1.111 
> bytes. <sigh again> :)

so your document is 99% graphics then?

actually there are a few other optimizations i want to do (cm and such) 
but this is also related to literal processing in general (i need that 
for runtime generated fonts because (esp when we randomize too) one 
easilly get megs of inline fontdata

> but this is not only a file size issue. you have to represent the data
> in some way in memory. less memory usage, less time for data scanning 
> means faster viewing.

neglectable i guess, dealing with color spaces and such takes way more 
runtime

>> adding special formatter function has a low priority .. maybe some day
>>
>> Hans
>>
> so can you please simply limit the number of digits after the point in 
> mlib-pdf.lua? you have already done this for colors at the end of the 
> source. if i have to patch one more file, i can make my own distribution ;)

i'm not going to change this so i fear that you will end up with your 
own low-res version

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Tue Jun 17 15:13:46 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 17 Jun 2008 15:13:46 +0200
Subject: [dev-context] format() without formatting
In-Reply-To: <48579D8C.3030606@wxs.nl>
References: <485647E2.8070600@arcor.de>
	<48576F46.8050107@wxs.nl>	<485796A3.6070000@arcor.de>
	<48579D8C.3030606@wxs.nl>
Message-ID: <4857B88A.9010307@wxs.nl>

Hans Hagen wrote:

a better one

local digit    = lpeg.R("09")
local period   = lpeg.P(".")
local zero     = lpeg.P("0")
local nozero   = 1 - zero
local finish   = lpeg.P(-1)
local nodigit  = (1-digit) + finish
local case_1   = (period * zero^1 * #nodigit)/"" -- .000
local case_2   = (period * (1-(zero^0/"") * #nodigit)^1 * (zero^0/"") * 
nodigit) -- .010 .10 .100100
local number   = digit^1 * (case_1 + case_2)
local stripper = lpeg.Cs((number + 1)^0)

function aux.strip_zeros(str)
     return stripper:match(str)
end


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From peter.rolf at arcor.de  Tue Jun 17 16:29:09 2008
From: peter.rolf at arcor.de (Peter Rolf)
Date: Tue, 17 Jun 2008 16:29:09 +0200
Subject: [dev-context] format() without formatting
In-Reply-To: <48579D8C.3030606@wxs.nl>
References: <485647E2.8070600@arcor.de> <48576F46.8050107@wxs.nl>
	<485796A3.6070000@arcor.de> <48579D8C.3030606@wxs.nl>
Message-ID: <4857CA35.3010503@arcor.de>

Hans Hagen schrieb:
> Peter Rolf wrote:
> 
>> just looked deeper in mlib-pdf.lua. i simply added '%.3f' on all
>> positions, where coordinates/measures are written. same for integer 
>> ('%.0f' or as in the pdf reference '%.1f'). much shorter and better 
> 
> integers are %i and floats %f (which defaults to %.6f)
> 
> we really need at least 6 digits precision with graphics; for colors 3 
> digits is ok
>
you really need a precision of a millonth part of a point?
or do you need it in combination with other units (cm,m)? me no pdf expert.
anyhow, my graphics look similar with only three points after the digit.
saves me another 5% in the compressed pdf.

>> readability of the unpacked pdf. so there is no really need for an 
>> *optimal* solution with an adapted format function. sorry for the noise.
>>
>>>> With enabled compression things don't look that bad (regarding to 
>>>> file size), but it's still a unnecessary waste.
>>> indeed, such sequences compress well
>>>
>> yes <sigh>. i optimized some code and saved around 18k in the final
>> uncompressed pdf (3% smaller). took me some time and i was a little
>> proud of myself. after compressing all saving that was left were 1.111 
>> bytes. <sigh again> :)
> 
> so your document is 99% graphics then?
>
yes. only some text in the graphic. people don't like to read much text
in a gui :)

> actually there are a few other optimizations i want to do (cm and such) 
> but this is also related to literal processing in general (i need that 
> for runtime generated fonts because (esp when we randomize too) one 
> easilly get megs of inline fontdata
> 
>> but this is not only a file size issue. you have to represent the data
>> in some way in memory. less memory usage, less time for data scanning 
>> means faster viewing.
> 
> neglectable i guess, dealing with color spaces and such takes way more 
> runtime
> 
>>> adding special formatter function has a low priority .. maybe some day
>>>
>>> Hans
>>>
>> so can you please simply limit the number of digits after the point in 
>> mlib-pdf.lua? you have already done this for colors at the end of the 
>> source. if i have to patch one more file, i can make my own 
>> distribution ;)
> 
> i'm not going to change this so i fear that you will end up with your 
> own low-res version
>
ok, it can't be helped. so it's one more file to patch.

anyhow thanks to you and Arthur for your answers. i'm still trying to 
understand lpeg (once started, but never used it), so this is quite 
interesting stuff.

regards, peter

> Hans
> 
> -----------------------------------------------------------------
>                                           Hans Hagen | PRAGMA ADE
>               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
>      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
>                                              | www.pragma-pod.nl
> -----------------------------------------------------------------
> 




From pragma at wxs.nl  Tue Jun 17 17:52:06 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 17 Jun 2008 17:52:06 +0200
Subject: [dev-context] format() without formatting
In-Reply-To: <4857CA35.3010503@arcor.de>
References: <485647E2.8070600@arcor.de>
	<48576F46.8050107@wxs.nl>	<485796A3.6070000@arcor.de>
	<48579D8C.3030606@wxs.nl> <4857CA35.3010503@arcor.de>
Message-ID: <4857DDA6.5020207@wxs.nl>

Peter Rolf wrote:

> you really need a precision of a millonth part of a point?
> or do you need it in combination with other units (cm,m)? me no pdf expert.
> anyhow, my graphics look similar with only three points after the digit.
> saves me another 5% in the compressed pdf.

it depends a bit, but if you make little graphics and do a lot of 
scaling; long ago i played with precision (you can set this in pdftex 
too \pdfdecimaldigits=5 by default)

there's nothing as annoying as things just not fitting (enough apps out 
there that are inaccurate)


Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Tue Jun 24 11:46:55 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 24 Jun 2008 11:46:55 +0200
Subject: [dev-context] Luatex beta 0.27.0 released
Message-ID: <4860C28F.8080000@elvenkind.com>


Hi all,

I have just uploaded the archives for luatex 0.27.0. This is
an intermediate release leading up to 0.30.0, to be released
around TUG2008.

There are just too many changes to wait another month :-)

Bugs fixed compared to 0.25.3:

* Unicode reencoding support for non-standard (i.e. older)
   Type1 fonts is now somewhat less broken than it was (#25)

* .vf fonts using specials crashed luatex

* luatex would crash on --\par (#33)

* An attempt is made to get a sane default value for StemV in
   the created pdf (#32)

* We can now guarantee that %PDF-1.* header is printed before
   the first pdf.print() output

* lang.hyphenate() was broken

* insert_before(a,a,b) was broken (#37)

* argv[0] is now cleaned up before being used as a default for
   mem_name and prog_name (#28).

* luatex would crash on loading extended fonts (fonts loaded
   via lua callbacks) from a format file.

* The fix for pdftex bug #799 is backported from pdftex 1.40.4.

* slnunicode had a bug in the unicode.utf8.gmatch iterator.

* Queries of nonexisting fontdimens could cause a crash.

* luatex would crash on {\textdir TLT\pardir TLT x\break\par }

* Fixed wrong placement of lines in mixed-direction paragraphs
   that could happen in some situations.

Other news:
* Luatex now includes luasocket (#35)
   See http://www.tecgraf.puc-rio.br/~diego/professional/luasocket/
   for usage.
   There is a new commandline option: --nosocket to disable this,
   and that is also implied by --safer.

   NOTE to the binary builders: there are some unfixed configure
   problems when you need to add a specific library to get socket
   support on your platform. You probably will have to edit the
   generated Makefile by hand (search for 'socketlib').

* There is ongoing development to the 'img' and 'mplib' libraries.
   See the reference manual for details.

* The 'character commands' in virtual fonts now support image
   inclusion. See the reference manual for details.

* Lua error messages now include the call stack.

* \directlua and \latelua have been extended to accept a 'name'
   keyword. The argument is a token list that is used as the lua
   name of this chunk in lua error messages and call stack prints.
   (#42)

* The lua chunk names can be interfaced via a new virtual
   table called lua.instancename, the values in that function as
   defaults in the absence of 'name' keywords.

* The 2-plane limit on active character range is removed (#12).

* Subsetted TTF fonts in the PDF now retain the cmap table.

* There is a new Lua variable os.selfdir. This contains the
   full absolute pathname of the directory that the executable
   resides in (with symlinks resolved)

* There is a new function os.uname() this returns a lua
   table containing various platform information items.

* The node library now uses text strings for direction specifiers
   instead of numbers. See the reference manual for details.

* The 'E' (edit) as error response functionality is now a noop.

* Adding luatex 0.25.3 to texlive resulted in a few minor backports,
   in particular: Support for mktexfmt is added, and luatangle now
   identifies itself as such (instead of calling itself otangle).

* We fixed a whole series of portability problems (but
   we probably introduced new problems as well).

* Most (all?) files now have a corrected Copyright header,
   and link in $Id$ and  $URL$ into the object file.

* Some unnecessary files were removed from the distribution.

The archives (source and binaries) can be downloaded from supelec,
as usual:

      http://foundry.supelec.fr/projects/luatex/

Bugs and feature requests can be added to the issue tracker at

      http://tracker.luatex.org

Have fun,
Taco




From taco at elvenkind.com  Mon Jun 30 18:16:25 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 30 Jun 2008 18:16:25 +0200
Subject: [dev-context] Luatex beta 0.28.0 released
Message-ID: <486906D9.1080807@elvenkind.com>


Hi all,

I have just uploaded the archives for luatex 0.28.0, another
intermediate release leading up to TUG 2008. This release
matches SVN revision #1357.


There is one new feature:

There is now experimental support for non-trivial discretionaries
following explicit hyphens. In analogy to \prehyphenchar and
\posthyphenchar, there are two new parameters \preexhyphenchar en
\postexhyphenchar. Both new parameters default to zero (nothing).
When set to a nonzero value, the parameter is added to either the
pre- or post- break text. Note that this is *in addition to* the
hyphen already in the input. Testing and comments are very welcome.

Here is a short example (no idea what is says):

   \pdfoutput=1
   \hsize=2in
   \postexhyphenchar=`-
   Seria bom se eu
   pudesse t\^e-lo mantido como amigo, mas por
   mais bem-intencionado que eu fosse, n\~ao
   foi possivel
   \bye



Bugs fixed compared to 0.27.0:

* Words that started off with a character with a zero \lccode
   were never hyphenated at all.

* There was a bug in the new active characters code that prevented
   the latex format from being built (with Invalid character error).

* There is a temporary fix for the sometimes appearing "Font has a
   bad FontBB" message from Acrobat.

* \leaders did not actually stretch enough (the last bit of glue
   that has to line up the line endings was never output to the PDF).

* Bad paragraph-related callbacks could result in luatex crashing.

* The pre_linebreak and post_linebreak filters were never called
   when \output was active (this was a leftover of a superceded
   optimization).

* 'skipping' language codes when setting up \patterns c.s. did not
   work (it used the next empty slot instead of the actual value of
   \language).

* Using multiple 'attr' keywords on box items could cause random
   crashes.

* Calling lang.hyphenate() with one argument (without specifying a
    tail node) could crash.

* The luatex pdf banner and version reporting is cleaned up a bit.

* Conflicting patterns inside \patterns now give an error:
     ! Conflicting pattern ignored.
   (duplicate identical patterns are ignored without error).


The archives (source and binaries) can be downloaded from supelec,
as usual:

      http://foundry.supelec.fr/projects/luatex/

Bugs and feature requests can be added to the issue tracker at

      http://tracker.luatex.org

Have fun,
Taco





From taco at elvenkind.com  Tue Jul  1 14:43:17 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 01 Jul 2008 14:43:17 +0200
Subject: [dev-context] MPlib beta 1.080
Message-ID: <486A2665.3010909@elvenkind.com>

Hi all,

I have just released the archive files for MPlib beta 1.080.

At the moment, the archives contain only the mpost program sources
and executables. The final release will of course also contain the
MetaPost 'base' texmf support files and the already existing manuals
as well as a new manual documenting the C API of the library.

-----------------------------------------------------------------

For those of you who are not aware of the project yet:

MPlib is the name of the new, revamped version of the MetaPost
interpreter. It is implemented in Cweb, and internally consists
of a core library, an mpx generation library, and a frontend
driver program (mpost).

The new mpx generation library includes the label generation
functionality that was previously provided by 'makempx', and
this internal code will be used instead of that external program
unless the MPXCOMMAND variable is set in the  environment or
texmf.cnf.

The programs 'makempx', 'newer', 'mpto', 'dvitomp' and 'dmp' are
obsolete and are no longer included in the distribution.

The MPlib distribution is released under the GPL version 2 or, at
your option, any later version.

This beta release of MPlib that can replace the old pascal-based
metapost interpreter completely; the executable is almost a drop-in
replacement for MetaPost 1.005. The commandline is slightly
different and you have to regenerate the mem files, but that
should be the only user-visible change.

----------------------------------------------------------------------

The TODO list before the official announcement at TUG2008 in Cork
now only has two items left:

* Writing the documentation for the C API
* Bughunting

I'll be working on the first item myself, but for the second item
I really have to ask all of you for help: please test mplib on as
many files as you can find. Because there has been so much work
done on the source code (including the conversion from pascal web
to C web), bugs are likely.

----------------------------------------------------------------------

You can get the sources and a cross-compiled mingw binary for Win32
from the usual place:

   http://foundry.supelec.fr/frs/?group_id=13&release_id=307

Best wishes,
Taco

From pragma at wxs.nl  Wed Jul  2 15:14:49 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 02 Jul 2008 15:14:49 +0200
Subject: [dev-context] [metapost] MPlib beta 1.080
In-Reply-To: <486B74AF.4090004@quick.cz>
References: <486A2665.3010909@elvenkind.com> <486B74AF.4090004@quick.cz>
Message-ID: <486B7F49.4010201@wxs.nl>

Karel Hor?k wrote:
> 
>> The programs 'makempx', 'newer', 'mpto', 'dvitomp' and 'dmp' are
>> obsolete and are no longer included in the distribution.
>>
> 
> Strange, but when I move some of these "obsolete files" (mainly makempx, 
> mpto, I think) off the bin directory, mpost says the it is not able to 
> make mpx file...

can you check MPXCOMMAND in your cnf file?

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Tue Jul  8 15:17:50 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 08 Jul 2008 15:17:50 +0200
Subject: [dev-context] MPlib beta 1.085
Message-ID: <487368FE.9060206@elvenkind.com>

Hi all,

I have just released the archive files for MPlib beta 1.085.

At the moment, the archives contain only the mpost program sources
and executables. The final release will of course also contain the
MetaPost 'base' texmf support files and the already existing manuals
as well as a new manual documenting the C API of the library.

----------------------------------------------------------------------

What is new in this beta release:

* Determination of the mem name to use in non-ini mode is now much
   closer to the web2c approach.

* There is now a magic word in the beginning of the mem file to make
   sure it is written by the correct version of MPlib.

* Fixed the disappearing comment sign in the to-be-typeset document
   created by the mpx generation subsystem.

* Various identifiers have been renamed to avoid clashes (that prevented
   the source from building correctly on many platforms)

* A great many small changes and fixes have been added after running
   splint on the generated C source.

-----------------------------------------------------------------

For those of you who are not aware of the project yet:

MPlib is the name of the new, revamped version of the MetaPost
interpreter. It is implemented in Cweb, and internally consists
of a core library, an mpx generation library, and a frontend
driver program (mpost).

The new mpx generation library includes the label generation
functionality that was previously provided by 'makempx', and
this internal code will be used instead of that external program
unless the MPXCOMMAND variable is set in the  environment or
texmf.cnf.

The programs 'makempx', 'newer', 'mpto', 'dvitomp' and 'dmp' are
obsolete and are no longer included in the distribution.

The MPlib distribution is released under the GPL version 2 or, at
your option, any later version.

This beta release of MPlib that can replace the old pascal-based
metapost interpreter completely; the executable is almost a drop-in
replacement for MetaPost 1.005. The commandline is slightly
different and you have to regenerate the mem files, but that
should be the only user-visible change.

----------------------------------------------------------------------

The TODO list before the official announcement at TUG2008 in Cork
now only has two items left:

* Writing the documentation for the C API
* Bughunting

I'll be working on the first item myself, but for the second item
I really have to ask all of you for help: please test mplib on as
many files as you can find. Because there has been so much work
done on the source code (including the conversion from pascal web
to C web), bugs are likely.

----------------------------------------------------------------------

You can get the sources and a cross-compiled mingw binary for Win32
from the usual place:

    http://foundry.supelec.fr/frs/?group_id=13&release_id=308

Best wishes,
Taco


From preining at logic.at  Wed Jul  9 17:48:28 2008
From: preining at logic.at (Norbert Preining)
Date: Wed, 9 Jul 2008 17:48:28 +0200
Subject: [dev-context] texexec --listing --dvipdfmx don't work together
Message-ID: <20080709154828.GD5813@gamma.logic.tuwien.ac.at>

forwarded 489849 dev-context at ntg.nl
thanks

Hi Hans, Taco, all,

we got a minor bug report about the fact that
	texexec --listing --dvipdfmx
does not work together. Meaning that with --listing the output is
generated with pdftex, and not with dvipdfmx.

Maybe you consider that as a feature, and honestly I don't see a reason
why one wants to switch the engine for a listing, but anyway, here I
forward it ;-)

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
YADDLETHORPE (vb.)
(Of offended pooves.) To exit huffily from a boutique.
			--- Douglas Adams, The Meaning of Liff

From adityam at umich.edu  Wed Jul 16 03:18:45 2008
From: adityam at umich.edu (Aditya Mahajan)
Date: Tue, 15 Jul 2008 21:18:45 -0400 (EDT)
Subject: [dev-context] Texlive 2008 and luatools
Message-ID: <alpine.DEB.1.00.0807152100330.28642@nqv-yncgbc>

Hi,

Texlive 2008 works perfectly with Context, but I have one question 
regarding luatools. I am posting this here rather than on TL mailing list, 
since I do not want to cause more confusion on TL regarding ConTeXt.

In the bin directory in minimals, luatools is a copy of luatools.lua. This 
means that one does not need ruby in order to run luatools. It also means 
that whenver you upgrade your system, you need to run luatools 
--selfupdate.

In TL2008, luatools is a wrapper script.

#!/bin/sh
texmfstart luatools.lua "$@"


This means that you need to have ruby in order to run luatools. The 
advantage is that you do not need to run luatools --selfupdate. In terms 
of speed, there is a slight disadvantage, you first start ruby, and then 
start texlua. Using a wrapper script was suggested by Taco on the mailing 
list.

If TL is to use a wrapper scipt, why not simply

#!/bin/sh
mtxrun --script luatools "$@"

this will mean that you do not start ruby before moving to lua. In both 
cases, one has to do mtxrun --selfupdate after a update that changes 
mtxrun.

This is not really important, since luatools will be run rarely. Do you 
think that the current texmfstart wrapper should be changed to a mtxrun 
wrapper?

Aditya



From pragma at wxs.nl  Wed Jul 16 09:17:24 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 16 Jul 2008 09:17:24 +0200
Subject: [dev-context] Texlive 2008 and luatools
In-Reply-To: <alpine.DEB.1.00.0807152100330.28642@nqv-yncgbc>
References: <alpine.DEB.1.00.0807152100330.28642@nqv-yncgbc>
Message-ID: <487DA084.8010100@wxs.nl>

Aditya Mahajan wrote:
> Hi,
> 
> Texlive 2008 works perfectly with Context, but I have one question 
> regarding luatools. I am posting this here rather than on TL mailing list, 
> since I do not want to cause more confusion on TL regarding ConTeXt.
> 
> In the bin directory in minimals, luatools is a copy of luatools.lua. This 
> means that one does not need ruby in order to run luatools. It also means 
> that whenver you upgrade your system, you need to run luatools 
> --selfupdate.
> 
> In TL2008, luatools is a wrapper script.
> 
> #!/bin/sh
> texmfstart luatools.lua "$@"
> 
> This means that you need to have ruby in order to run luatools. The 
> advantage is that you do not need to run luatools --selfupdate. In terms 
> of speed, there is a slight disadvantage, you first start ruby, and then 
> start texlua. Using a wrapper script was suggested by Taco on the mailing 
> list.

having a 'copy' or 'symlink' is indeed the best for luatools and mtxrun, 
  and using texmfstart for it is at some point going to fail

> If TL is to use a wrapper scipt, why not simply
> 
> #!/bin/sh
> mtxrun --script luatools "$@"
> 
> this will mean that you do not start ruby before moving to lua. In both 
> cases, one has to do mtxrun --selfupdate after a update that changes 
> mtxrun.

i prefer both mtxrun and luatools to be handled as programs and not 
being stubbed (in a luatex specific installation there won;t even be a 
texmfstart anyway and i'm thinking of replacing texmfstart by mtxrun at 
somepoint)

> This is not really important, since luatools will be run rarely. Do you 
> think that the current texmfstart wrapper should be changed to a mtxrun 
> wrapper?

at some point i might replace luatools by mtx-tools so that we only have 
  mtxrun; i could not combine both because they have a different set of 
flags but in that case luatools would be a simple stub like 'context' is 
currently

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Wed Jul 16 09:31:10 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 16 Jul 2008 09:31:10 +0200
Subject: [dev-context] Texlive 2008 and luatools
In-Reply-To: <487DA084.8010100@wxs.nl>
References: <alpine.DEB.1.00.0807152100330.28642@nqv-yncgbc>
	<487DA084.8010100@wxs.nl>
Message-ID: <487DA3BE.8030006@elvenkind.com>


Hi,

Hans Hagen wrote:
> Aditya Mahajan wrote:
>>
>> In TL2008, luatools is a wrapper script.
>>
>> #!/bin/sh
>> texmfstart luatools.lua "$@"

That is by my suggestion. After all the other manual labor texlive
users will have go through just to get mkiv running, I did not want
to scare them even more by forcing them to use --selfupdate.

Especially since --selfupdate fails in a non-zero amount of cases,
and if that would happen to a user not on ntg-context they would be
utterly lost.

> having a 'copy' or 'symlink' is indeed the best for luatools and mtxrun, 
>   and using texmfstart for it is at some point going to fail

This would work fine if --selfupdate was totally reliable, but it isn't.
Whenever a new library appears in the distro there is a chance that
selfupdate will fail. I've had that happen a number of times. It is
ok for me (I know what to do), but not acceptable casual users.

Best wishes,
Taco

From taco at elvenkind.com  Fri Jul 18 16:38:05 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 18 Jul 2008 16:38:05 +0200
Subject: [dev-context] Luatex beta 0.29.0 released
Message-ID: <4880AACD.9090101@elvenkind.com>


Hi all,

I have just uploaded the archives for luatex 0.29.0, another
intermediate release leading up to TUG 2008. This release
matches SVN revision #1450.

(In case someone notices: yes, I forgot to update CHANGES)

New features:

* The embedded pdftex is now 1.40.9 (forthcoming) except for the
   following:
   - the png transparancy fix is skipped because it is in conflict
     with a macro-based solution offered by context mkiv.
   - LFS (PDF files > 2GiB) is not working yet.
   - Synctex is still missing

* libpng, xpdf, and zlib are updated to their pdftex 1.0.9 levels

* MPlib is updated to 1.090

* The syntax of buildpage_filter is changed to avoid confusion
   (and crashes). See the manual for the new calling convention.

Bugs fixed compared to 0.28.0:

* The previous bugfix for \languages skipping numbers was wrong.

* Various compile-time warnings are suppressed

* \pdfsetmatrix was broken

* \pdfsave and \pdfrestore were broken

* Valid user_defined whatsits nevertheless were generating errors.


The archives (source and binaries) can be downloaded from supelec,
as usual:

      http://foundry.supelec.fr/projects/luatex/

Bugs and feature requests can be added to the issue tracker at

      http://tracker.luatex.org

Have fun,
Taco






From taco at elvenkind.com  Sat Jul 19 14:22:53 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 19 Jul 2008 14:22:53 +0200
Subject: [dev-context] Metapost beta 1.091 release
Message-ID: <4881DC9D.6020604@elvenkind.com>

Hi all,

Following yesterday's beta release there were immediately a few
serious bugs reported (thank you, testers) so it made sense to do
a new beta release a.s.a.p.  So, I have just uploaded metapost 1.091.

----------------------------------------------------------------------
What is new in MetaPost beta version 1.091:
----------------------------------------------------------------------

* Dash lists were interfaced incorrectly by the lua bindings.

* The Type 1 Font inclusion in the previous version produced invalid
   subsets.

* The configure script now also checks for sys/time.h

* The error message you get for invalid mem files now mentions the
   name of the file as well as the nature of the problem.

----------------------------------------------------------------------

You can get the sources and a cross-compiled mingw binary for Win32
from the usual place:

     http://foundry.supelec.fr/frs/?group_id=13&release_id=311

Have fun,

Taco


--
http://tug.org/metapost/

From taco at elvenkind.com  Sun Jul 20 01:25:56 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 20 Jul 2008 01:25:56 +0200
Subject: [dev-context] [metapost] Metapost beta 1.091 release
In-Reply-To: <c3e9d6506dacb.6dacbc3e9d650@iol.cz>
References: <4881DC9D.6020604@elvenkind.com>
	<c3e9d6506dacb.6dacbc3e9d650@iol.cz>
Message-ID: <48827804.6060303@elvenkind.com>

akk64 at o2active.cz wrote:
> Sorry, I tried the new 1.091 version, but didn't get any result:
> 
> (Fatal mem file error; c:/TeXlive/texmf-var/web2c/mpost.mem appears not to be a mem file)

Argh. Thanks for testing so quickly.

The error was so silly that I have not updated the version number but
simply regenerated the archive files only, I hope nobody will mind that.

Sorry for the messup,
Taco


From akk64 at o2active.cz  Sat Jul 19 23:05:43 2008
From: akk64 at o2active.cz (akk64 at o2active.cz)
Date: Sat, 19 Jul 2008 23:05:43 +0200
Subject: [dev-context] [metapost] Metapost beta 1.091 release
In-Reply-To: <4881DC9D.6020604@elvenkind.com>
References: <4881DC9D.6020604@elvenkind.com>
Message-ID: <c3e9d6506dacb.6dacbc3e9d650@iol.cz>

Sorry, I tried the new 1.091 version, but didn't get any result:

(Fatal mem file error; c:/TeXlive/texmf-var/web2c/mpost.mem appears not to be a mem file)

The mem file was succesfuly created
(I would expect not "preloading the plain mem file" but plain.mp file:-)

This is MetaPost, version 1.091 (kpathsea version 3.5.7) (INIMP)  19 JUL 2008 22:46
**mpost.ini
(c:/TeXlive/texmf-dist/metapost/config/mpost.ini (c:/TeXlive/texmf-dist/metapost/base/plain.mp
Preloading the plain mem file, version 0.99) )
Beginning to dump on file mpost.mem
 (mem=mpost 2008.07.19)
at most 736 strings of total length 3629
3317 memory locations dumped; current usage is 1012&2227
501 symbolic tokens

Karel Horak


From schuster.wolfgang at googlemail.com  Mon Jul 28 10:30:13 2008
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Mon, 28 Jul 2008 10:30:13 +0200
Subject: [dev-context] System fonts and name access
Message-ID: <115224fb0807280130s306c53dfq8305084f406c4244@mail.gmail.com>

Hi,

with MkIV it is possible to use fonts in system directories
(C:\windows\fonts etc.)
but this works only if you use the file name of the font and not with
the font name.

The reason for this is a bug in font-syn.lua in the
'fonts.names.getpaths' function
which is called from 'font.name.identify' to extract the name
information from the fonts.

Another problem are fonts with file extension in uppercase letters,
none of then is
read when I generate the font database, can we add 'TTF' and 'TTC' to
'fonts.names.filters.list' in font-syn.lua.

Regards,
Wolfgang

From preining at logic.at  Mon Aug  4 02:46:43 2008
From: preining at logic.at (Norbert Preining)
Date: Mon, 4 Aug 2008 02:46:43 +0200
Subject: [dev-context] Debian TeX packages for Etch now on backports.org
Message-ID: <20080804004643.GI8207@gamma.logic.tuwien.ac.at>

Hi all!

Some news concerning the backports of TeX Live 2007 Debian packages to
etch. I have stopped to provide my own binaries and switched to using
www.backports.org. Advantage of that is that we will have uptodate 
binaries for all different architectures, not only for those I manage to
compile for or ask someone to compile for.

For you that means:
- the installation source for texlive-bin has changed, please see
  http://www.backports.org/dokuwiki/doku.php?id=instructions
  on how to use the backports service. In a nut shell:
  . add 
    deb http://www.backports.org/debian etch-backports main
    to your /etc/apt/source.list
  . call aptitude update
  . install any package with
    aptitude -t etch-backports install texlive-base-bin ....

- all arch = all packages (i.e., all the others) can be either taken
  from the testing repository with pinning (see again the above page
  for detailed descriptions), but I will continue to have them
  around in my repository on people.debian.org.

So to some the situation up:

texlive and tex-common
 	deb http://people.debian.org/~preining/TeX/ tl2007/
 	deb-src http://people.debian.org/~preining/TeX/ src/

texlive-bin
	deb http://www.backports.org/debian etch-backports main
	deb-src http://www.backports.org/debian etch-backports main
	(but the source is also available from the above location)

lmodern
	deb http://people.debian.org/~preining/TeX/ lmodern/
	deb-src http://people.debian.org/~preining/TeX/ lmodern/

context
  	deb http://people.debian.org/~preining/TeX/ context/
 	deb-src http://people.debian.org/~preining/TeX/ context/


The package has been accepted into backports.org only today, so
currently there are only i386 binaries, but soon there should be all the
other archs, too.

I hope that this service integrates better into the normal backport
world most people are using.

If you have any questions, just let me know.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
MUNDERFIELD (n.) A meadow selected, whilst driving past, as being
ideal for a picnic which, from a sitting position, turns out to be
full of stubble, dust and cowpats, and almost impossible to enjoy
yourself in.
			--- Douglas Adams, The Meaning of Liff

From oliver.buerschaper at mpq.mpg.de  Tue Aug  5 13:52:11 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Tue, 5 Aug 2008 13:52:11 +0200
Subject: [dev-context] MetaFun freelabel macro
Message-ID: <3E0CF808-EDAF-41E2-82AF-77DBD1748B17@mpq.mpg.de>

Dear Taco,

a minute ago I discovered this lovely macro freelabel() and friends ?  
just a minor thing that confuses me a bit:

freelabel("a", origin, dir(90));

places the label below the origin rather than above it. I would have  
expected the direction vector to point from the anchor point towards  
the label and not the other way round ?

Apart from that this nifty macro is going to save me a lot of trouble!

Oliver

From luigi.scarso at gmail.com  Wed Aug  6 03:06:59 2008
From: luigi.scarso at gmail.com (luigi scarso)
Date: Wed, 6 Aug 2008 03:06:59 +0200
Subject: [dev-context] update modules
Message-ID: <fe8d59da0808051806j4a5fdfbdp8bc3b8ca69801e9a@mail.gmail.com>

Update modules.

http://groups.foundry.supelec.fr/modules/

-- 
luigi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://www.ntg.nl/mailman/private/dev-context/attachments/20080806/c59ec3cd/attachment.html 

From taco at elvenkind.com  Thu Aug 28 11:17:31 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 28 Aug 2008 11:17:31 +0200
Subject: [dev-context] feature interiance
In-Reply-To: <115224fb0808280150g47d9a6fbs4a1056fcc1a39dd@mail.gmail.com>
References: <000001c9076a$c8d48af0$5a7da0d0$@de>	<48B55F99.5070201@elvenkind.com>
	<005f01c908d9$712b7a50$53826ef0$@de>
	<115224fb0808280150g47d9a6fbs4a1056fcc1a39dd@mail.gmail.com>
Message-ID: <48B66D2B.60709@elvenkind.com>


Hi Wolfgang, Hans,

Wolfgang Schuster wrote:
> 
> \definefontfeature[latin-default]  [default]
> [script=latn,expansion=quality,protrusion=pure]
> \definefontfeature[latin-smallcaps][smallcaps][script=latn,expansion=quality,protrusion=pure]
> \definefontfeature[latin-oldstyle] [oldstyle]
> [script=latn,expansion=quality,protrusion=pure]

It seems life would be easier if we would have a way to push
merged feature settings downward, something like this:

   \definefontfeature
     [plushz] % no inheritance, on purpose !
     [expansion=quality]
   \definetypeface [][][][][][extrafeatures=plushz]

That would then be functionally equivalent to

   \definefontfeature
     [plushz] % no inheritance, on purpose !
     [expansion=quality]
   \definefontfeature
     [<xxx>]
     [plushz]
   \definetypeface [][][][][]

for any <xxx> that is set up by the \definefontsynonyms.


Best wishes,
Taco


From pragma at wxs.nl  Thu Aug 28 11:35:40 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 28 Aug 2008 11:35:40 +0200
Subject: [dev-context] feature interiance
In-Reply-To: <48B66D2B.60709@elvenkind.com>
References: <000001c9076a$c8d48af0$5a7da0d0$@de>	<48B55F99.5070201@elvenkind.com>	<005f01c908d9$712b7a50$53826ef0$@de>	<115224fb0808280150g47d9a6fbs4a1056fcc1a39dd@mail.gmail.com>
	<48B66D2B.60709@elvenkind.com>
Message-ID: <48B6716C.6010700@wxs.nl>

Taco Hoekwater wrote:
> Hi Wolfgang, Hans,
> 
> Wolfgang Schuster wrote:
>> \definefontfeature[latin-default]  [default]
>> [script=latn,expansion=quality,protrusion=pure]
>> \definefontfeature[latin-smallcaps][smallcaps][script=latn,expansion=quality,protrusion=pure]
>> \definefontfeature[latin-oldstyle] [oldstyle]
>> [script=latn,expansion=quality,protrusion=pure]
> 
> It seems life would be easier if we would have a way to push
> merged feature settings downward, something like this:
> 
>    \definefontfeature
>      [plushz] % no inheritance, on purpose !
>      [expansion=quality]
>    \definetypeface [][][][][][extrafeatures=plushz]
> 
> That would then be functionally equivalent to
> 
>    \definefontfeature
>      [plushz] % no inheritance, on purpose !
>      [expansion=quality]
>    \definefontfeature
>      [<xxx>]
>      [plushz]
>    \definetypeface [][][][][]
> 
> for any <xxx> that is set up by the \definefontsynonyms.

features={a,b,c,d}

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Thu Aug 28 11:48:26 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 28 Aug 2008 11:48:26 +0200
Subject: [dev-context] feature interiance
In-Reply-To: <48B6716C.6010700@wxs.nl>
References: <000001c9076a$c8d48af0$5a7da0d0$@de>	<48B55F99.5070201@elvenkind.com>	<005f01c908d9$712b7a50$53826ef0$@de>	<115224fb0808280150g47d9a6fbs4a1056fcc1a39dd@mail.gmail.com>
	<48B66D2B.60709@elvenkind.com> <48B6716C.6010700@wxs.nl>
Message-ID: <48B6746A.3030906@elvenkind.com>

Hans Hagen wrote:
> Taco Hoekwater wrote:
>> Hi Wolfgang, Hans,
>>
>> Wolfgang Schuster wrote:
>>> \definefontfeature[latin-default]  [default]
>>> [script=latn,expansion=quality,protrusion=pure]
>>> \definefontfeature[latin-smallcaps][smallcaps][script=latn,expansion=quality,protrusion=pure] 
>>>
>>> \definefontfeature[latin-oldstyle] [oldstyle]
>>> [script=latn,expansion=quality,protrusion=pure]
>>
>> It seems life would be easier if we would have a way to push
>> merged feature settings downward, something like this:
>>
>>    \definefontfeature
>>      [plushz] % no inheritance, on purpose !
>>      [expansion=quality]
>>    \definetypeface [][][][][][extrafeatures=plushz]
>>
>> That would then be functionally equivalent to
>>
>>    \definefontfeature
>>      [plushz] % no inheritance, on purpose !
>>      [expansion=quality]
>>    \definefontfeature
>>      [<xxx>]
>>      [plushz]
>>    \definetypeface [][][][][]
>>
>> for any <xxx> that is set up by the \definefontsynonyms.
> 
> features={a,b,c,d}

But that doesnt help unless it happens automaticallly. Somewhere down
in the typescript there is a:

   \definefontsynonym [SansCaps] [Sans] [features=smallcaps]

and currently to have expansion added to that font you have to redefine
the font synonyms one way or another, either via

   \definefontfeature[hz-smallcaps][smallcaps][expansion=quality]
   ...
   \definefontsynonym [SansCaps] [Sans] [features=hz-smallcaps]

or via

   \definefontfeature[plushz][expansion=quality]
   ...
   \definefontsynonym [SansCaps] [Sans] [features={smallcaps,plushz}]

but in both cases quite a lot of lines have to be redone.


If MKIV would allow

    \definetypeface [][][][][][extrafeatures=plushz]

so that the font synonym would then automatically be interpreted as

   \definefontsynonym [SansCaps] [Sans] [features={smallcaps,plushz}]

that would be useful (i think so, at least)

Best wishes,
Taco







From taco at elvenkind.com  Thu Aug 28 12:12:03 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 28 Aug 2008 12:12:03 +0200
Subject: [dev-context] feature interiance
In-Reply-To: <48B67696.4070502@wxs.nl>
References: <000001c9076a$c8d48af0$5a7da0d0$@de>	<48B55F99.5070201@elvenkind.com>	<005f01c908d9$712b7a50$53826ef0$@de>	<115224fb0808280150g47d9a6fbs4a1056fcc1a39dd@mail.gmail.com>
	<48B66D2B.60709@elvenkind.com> <48B6716C.6010700@wxs.nl>
	<48B6746A.3030906@elvenkind.com> <48B67696.4070502@wxs.nl>
Message-ID: <48B679F3.8070503@elvenkind.com>

Hans Hagen wrote:
> Taco Hoekwater wrote:
> 
>> But that doesnt help unless it happens automaticallly. Somewhere down
>> in the typescript there is a:
>>
>>   \definefontsynonym [SansCaps] [Sans] [features=smallcaps]
>>
>> and currently to have expansion added to that font you have to redefine
>> the font synonyms one way or another, either via
>>
>>   \definefontfeature[hz-smallcaps][smallcaps][expansion=quality]
>>   ...
>>   \definefontsynonym [SansCaps] [Sans] [features=hz-smallcaps]
>>
>> or via
>>
>>   \definefontfeature[plushz][expansion=quality]
>>   ...
>>   \definefontsynonym [SansCaps] [Sans] [features={smallcaps,plushz}]
>>
>> but in both cases quite a lot of lines have to be redone.
>>
>>
>> If MKIV would allow
>>
>>    \definetypeface [][][][][][extrafeatures=plushz]
>>
>> so that the font synonym would then automatically be interpreted as
>>
>>   \definefontsynonym [SansCaps] [Sans] [features={smallcaps,plushz}]
>>
>> that would be useful (i think so, at least)
> 
> sure, but then we need an extraextraextrafeatures later, so i'd rather 

how so? simply adding feature names to the end of the list is an
extensible solution, i thought.


> ponder about an extendable solution; kind of
> \definefontfeature[extras][]
> 
> \definefontfeature[plushz][expansion=quality]
> 
> \definefontfeature[extras][plushz]

anyway, this also sounds good.

> \definefontsynonym [SansCaps] [Sans] [features={smallcaps,extras}]
> 
> anyhow, the whole feature support is somewhat floating and will be 
> extended anyway
> 
> 
> 
> Hans
> 
> -----------------------------------------------------------------
>                                           Hans Hagen | PRAGMA ADE
>               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
>      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
>                                              | www.pragma-pod.nl
> -----------------------------------------------------------------


From pragma at wxs.nl  Thu Aug 28 12:20:33 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 28 Aug 2008 12:20:33 +0200
Subject: [dev-context] feature interiance
In-Reply-To: <48B679F3.8070503@elvenkind.com>
References: <000001c9076a$c8d48af0$5a7da0d0$@de>	<48B55F99.5070201@elvenkind.com>	<005f01c908d9$712b7a50$53826ef0$@de>	<115224fb0808280150g47d9a6fbs4a1056fcc1a39dd@mail.gmail.com>
	<48B66D2B.60709@elvenkind.com> <48B6716C.6010700@wxs.nl>
	<48B6746A.3030906@elvenkind.com> <48B67696.4070502@wxs.nl>
	<48B679F3.8070503@elvenkind.com>
Message-ID: <48B67BF1.9090706@wxs.nl>

Taco Hoekwater wrote:

> how so? simply adding feature names to the end of the list is an
> extensible solution, i thought.

yeah, but it's just that only \someprefix at feature is passed and not all 
variables; at least not currently in the mkii/mkiv mix

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Thu Aug 28 11:57:42 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 28 Aug 2008 11:57:42 +0200
Subject: [dev-context] feature interiance
In-Reply-To: <48B6746A.3030906@elvenkind.com>
References: <000001c9076a$c8d48af0$5a7da0d0$@de>	<48B55F99.5070201@elvenkind.com>	<005f01c908d9$712b7a50$53826ef0$@de>	<115224fb0808280150g47d9a6fbs4a1056fcc1a39dd@mail.gmail.com>
	<48B66D2B.60709@elvenkind.com> <48B6716C.6010700@wxs.nl>
	<48B6746A.3030906@elvenkind.com>
Message-ID: <48B67696.4070502@wxs.nl>

Taco Hoekwater wrote:

> But that doesnt help unless it happens automaticallly. Somewhere down
> in the typescript there is a:
> 
>   \definefontsynonym [SansCaps] [Sans] [features=smallcaps]
> 
> and currently to have expansion added to that font you have to redefine
> the font synonyms one way or another, either via
> 
>   \definefontfeature[hz-smallcaps][smallcaps][expansion=quality]
>   ...
>   \definefontsynonym [SansCaps] [Sans] [features=hz-smallcaps]
> 
> or via
> 
>   \definefontfeature[plushz][expansion=quality]
>   ...
>   \definefontsynonym [SansCaps] [Sans] [features={smallcaps,plushz}]
> 
> but in both cases quite a lot of lines have to be redone.
> 
> 
> If MKIV would allow
> 
>    \definetypeface [][][][][][extrafeatures=plushz]
> 
> so that the font synonym would then automatically be interpreted as
> 
>   \definefontsynonym [SansCaps] [Sans] [features={smallcaps,plushz}]
> 
> that would be useful (i think so, at least)

sure, but then we need an extraextraextrafeatures later, so i'd rather 
ponder about an extendable solution; kind of

\definefontfeature[extras][]

\definefontfeature[plushz][expansion=quality]

\definefontfeature[extras][plushz]

\definefontsynonym [SansCaps] [Sans] [features={smallcaps,extras}]

anyhow, the whole feature support is somewhat floating and will be 
extended anyway



Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Thu Aug 28 16:33:59 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 28 Aug 2008 16:33:59 +0200
Subject: [dev-context] bugs & features
Message-ID: <48B6B757.5050804@elvenkind.com>


Hi,

Here is the stuff I have seen/heard in the last week. There may
well be more that I have not remembered yet.

(with apologies for starting an email thread but I am supposedly on
vacation for the rest of this week and the next and I do not want
things to fall into cracks simply because I am not at the office).

Bib module bugs:
* forced title downcasing in the bst files (this is bad for German)
* a missing \egroup in incollection
* inproceedings == conference (the latter doesnt exist yet)

Context feature requests:
* \setuptyping[ignorefirstspace=yes] (req. by pm on ntg-context)

Mplib related bugs:
* \sometxt is different in mkiv <> mkiv (from ts, email to mojca and me)
* a slowing down of mplib when many strings are used
   (from yue wang, email to hans and me)

Luatex bugs:
* the Italic pfbs from URW crash luatex when used in afm mode
* colorisation in tables doesnt work, this seems related to \leaders,
   and not a macro problem

MKIV bugs:
* \postexhyphenchar=`\- doesn't work in mkiv. Does work in plain luatex.
   (from Jano)
* converters.alphabetic(0,"arabic") is one off (from Khaled)
* \setupexternalfigures is always using the first setup if more
   are given (from pm, on the mailing list)
* problems with copying and pasting of oldstyle from the generated pdf
   (from aditya)

Generic context bug:
* Bug in \startitemize: embedded [joinedup] doesnt work (from Marcin)

Reference manual:
* \starttypescriptcollection needs documenting
* the typescripts / typefaces explanation is not good enough yet

Best wishes,
Taco

From mojca.miklavec.lists at gmail.com  Fri Aug 29 18:58:19 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 29 Aug 2008 18:58:19 +0200
Subject: [dev-context] metafun & textext problems in mkiv
Message-ID: <6faad9f00808290958h2f16dc6do754bc44bb8643eee@mail.gmail.com>

Hello Hans,

this fails in mkiv:

\setupcolors[state=start]
\starttext
\startMPpage
picture p;
p := textext("abc");
draw p withcolor red;
draw p shifted (3cm,0) withcolor blue;
\stopMPpage
\stoptext

Mojca

From mojca.miklavec.lists at gmail.com  Fri Aug 29 19:06:05 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 29 Aug 2008 19:06:05 +0200
Subject: [dev-context] metafun & textext problems in mkiv
In-Reply-To: <6faad9f00808290958h2f16dc6do754bc44bb8643eee@mail.gmail.com>
References: <6faad9f00808290958h2f16dc6do754bc44bb8643eee@mail.gmail.com>
Message-ID: <6faad9f00808291006o52feb137hd936ecd07325dafc@mail.gmail.com>

This also has problems - withpen is ignored:

\starttext
\startMPpage
draw origin--(10cm,0) withpen pencircle scaled 50;
\stopMPpage
\stoptext

Thanks,
    Mojca

From mojca.miklavec.lists at gmail.com  Fri Aug 29 19:11:55 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 29 Aug 2008 19:11:55 +0200
Subject: [dev-context] metafun & textext problems in mkiv
In-Reply-To: <6faad9f00808291006o52feb137hd936ecd07325dafc@mail.gmail.com>
References: <6faad9f00808290958h2f16dc6do754bc44bb8643eee@mail.gmail.com>
	<6faad9f00808291006o52feb137hd936ecd07325dafc@mail.gmail.com>
Message-ID: <6faad9f00808291011k100c2b86u6dafde52b7d97c70@mail.gmail.com>

On Fri, Aug 29, 2008 at 7:06 PM, Mojca Miklavec wrote:
> This also has problems - withpen is ignored:
>
> \starttext
> \startMPpage
> draw origin--(10cm,0) withpen pencircle scaled 50;
> \stopMPpage
> \stoptext

I'm sorry ... accidental usage of TL's luatex. Minimals seem to work
fine with that.

However, with both mkii and latest luatex + context I now get another
problem that otherwise works with TL's version.

Pure lottery :) :) :)

Mojca

From pragma at wxs.nl  Sat Aug 30 00:33:13 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Sat, 30 Aug 2008 00:33:13 +0200
Subject: [dev-context] metafun & textext problems in mkiv
In-Reply-To: <6faad9f00808291011k100c2b86u6dafde52b7d97c70@mail.gmail.com>
References: <6faad9f00808290958h2f16dc6do754bc44bb8643eee@mail.gmail.com>	<6faad9f00808291006o52feb137hd936ecd07325dafc@mail.gmail.com>
	<6faad9f00808291011k100c2b86u6dafde52b7d97c70@mail.gmail.com>
Message-ID: <48B87929.40002@wxs.nl>

Mojca Miklavec wrote:
> On Fri, Aug 29, 2008 at 7:06 PM, Mojca Miklavec wrote:
>> This also has problems - withpen is ignored:
>>
>> \starttext
>> \startMPpage
>> draw origin--(10cm,0) withpen pencircle scaled 50;
>> \stopMPpage
>> \stoptext
> 
> I'm sorry ... accidental usage of TL's luatex. Minimals seem to work
> fine with that.

had to do with a one point path that needs specal treatment; was indeed 
fixed

> However, with both mkii and latest luatex + context I now get another
> problem that otherwise works with TL's version.

as long as no example ... everything is fine

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Sat Aug 30 00:36:21 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Sat, 30 Aug 2008 00:36:21 +0200
Subject: [dev-context] metafun & textext problems in mkiv
In-Reply-To: <6faad9f00808290958h2f16dc6do754bc44bb8643eee@mail.gmail.com>
References: <6faad9f00808290958h2f16dc6do754bc44bb8643eee@mail.gmail.com>
Message-ID: <48B879E5.6000500@wxs.nl>

Mojca Miklavec wrote:
> Hello Hans,
> 
> this fails in mkiv:
> 
> \setupcolors[state=start]
> \starttext
> \startMPpage
> picture p;
> p := textext("abc");
> draw p withcolor red;
> draw p shifted (3cm,0) withcolor blue;
> \stopMPpage
> \stoptext

this is because text is handled at the tex end and color happens with 
attributes; i can hack a solution but i'm still wondering if it is 
really needed (will make code dirty)

textext("\red abc");

works

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From adityam at umich.edu  Sat Aug 30 00:56:48 2008
From: adityam at umich.edu (Aditya Mahajan)
Date: Fri, 29 Aug 2008 18:56:48 -0400 (EDT)
Subject: [dev-context] trouble with texmfstart and =
Message-ID: <alpine.DEB.1.00.0808291853500.29848@nqv-yncgbc>

texmfstart does not handle = in --argument propertly. For example

texmfstart --verbose --arguments="a=b" bin:echo

gives

texmfstart version 2.0.3
using 'system' call: echo a
a

Notice that oly echo a is being called. This causes problems when I want 
to call echo "a=b". If I try

texmfstart --verbose --arguments="\"a=b\"" bin:echo

I get

texmfstart version 2.0.3
using 'system' call: echo "a
sh: Syntax error: Unterminated quoted string

execution failed

For some reason, texmfstart is truncating the argument before =. Due to 
this bug the vim module does not work anymore.

Aditya

From pragma at wxs.nl  Sat Aug 30 09:55:52 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Sat, 30 Aug 2008 09:55:52 +0200
Subject: [dev-context] trouble with texmfstart and =
In-Reply-To: <alpine.DEB.1.00.0808291853500.29848@nqv-yncgbc>
References: <alpine.DEB.1.00.0808291853500.29848@nqv-yncgbc>
Message-ID: <48B8FD08.9020302@wxs.nl>

Aditya Mahajan wrote:
> texmfstart does not handle = in --argument propertly. For example
> 
> texmfstart --verbose --arguments="a=b" bin:echo

and what does

texmfstart --verbose "--arguments=a=b" bin:echo

do? or

texmfstart --verbose --arguments='a=b' bin:echo


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From mojca.miklavec.lists at gmail.com  Sat Aug 30 11:49:42 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sat, 30 Aug 2008 11:49:42 +0200
Subject: [dev-context] metafun & textext problems in mkiv
In-Reply-To: <48B879E5.6000500@wxs.nl>
References: <6faad9f00808290958h2f16dc6do754bc44bb8643eee@mail.gmail.com>
	<48B879E5.6000500@wxs.nl>
Message-ID: <6faad9f00808300249m9dd648eib096394139914e87@mail.gmail.com>

On Sat, Aug 30, 2008 at 12:36 AM, Hans Hagen wrote:
> Mojca Miklavec wrote:
>>
>> Hello Hans,
>>
>> this fails in mkiv:
>>
>> \setupcolors[state=start]
>> \starttext
>> \startMPpage
>> picture p;
>> p := textext("abc");
>> draw p withcolor red;
>> draw p shifted (3cm,0) withcolor blue;
>> \stopMPpage
>> \stoptext
>
> this is because text is handled at the tex end and color happens with
> attributes; i can hack a solution but i'm still wondering if it is really
> needed (will make code dirty)

It's not only about "color doesn't work" (though it would be really
nice if it would, but there have been many incompatibilities in that
respect since the introduction of \sometxt anyway), but the picture
also gets lost second time when it's used. I only get one "abc" and
empty space instead of the second one.

(The third problem mentioned turned out to be just a bug in my code
that happened to work with an older version of mkiv.)

Mojca

From adityam at umich.edu  Sat Aug 30 15:36:11 2008
From: adityam at umich.edu (Aditya Mahajan)
Date: Sat, 30 Aug 2008 09:36:11 -0400 (EDT)
Subject: [dev-context] trouble with texmfstart and =
In-Reply-To: <48B8FD08.9020302@wxs.nl>
References: <alpine.DEB.1.00.0808291853500.29848@nqv-yncgbc>
	<48B8FD08.9020302@wxs.nl>
Message-ID: <alpine.DEB.1.00.0808300934520.14895@nqv-yncgbc>

On Sat, 30 Aug 2008, Hans Hagen wrote:

> Aditya Mahajan wrote:
>> texmfstart does not handle = in --argument propertly. For example
>> 
>> texmfstart --verbose --arguments="a=b" bin:echo
>
> and what does

Both give incorrect output

> texmfstart --verbose "--arguments=a=b" bin:echo

texmfstart --verbose "--arguments=a=b" bin:echo

texmfstart version 2.0.3
using 'system' call: echo a
a

execution was successful


> do? or
>
> texmfstart --verbose --arguments='a=b' bin:echo

texmfstart --verbose --arguments='a=b' bin:echo

texmfstart version 2.0.3
using 'system' call: echo a
a

execution was successful


From pragma at wxs.nl  Sun Aug 31 12:26:45 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 31 Aug 2008 12:26:45 +0200
Subject: [dev-context] metafun & textext problems in mkiv
In-Reply-To: <6faad9f00808300249m9dd648eib096394139914e87@mail.gmail.com>
References: <6faad9f00808290958h2f16dc6do754bc44bb8643eee@mail.gmail.com>	
	<48B879E5.6000500@wxs.nl>
	<6faad9f00808300249m9dd648eib096394139914e87@mail.gmail.com>
Message-ID: <48BA71E5.4050106@wxs.nl>

Mojca Miklavec wrote:

> It's not only about "color doesn't work" (though it would be really
> nice if it would, but there have been many incompatibilities in that
> respect since the introduction of \sometxt anyway), but the picture
> also gets lost second time when it's used. I only get one "abc" and
> empty space instead of the second one.

in mlib-pps.tex we need a \copy instead of a \box

\def\MPLIBgettextscaled#1#2#3%
   {\vbox to \zeropoint{\vss\hbox to 
\zeropoint{\scale[sx=#2,sy=#3]{\raise\dp#1\copy#1}\hss}}}


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Sun Aug 31 12:35:30 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 31 Aug 2008 12:35:30 +0200
Subject: [dev-context] trouble with texmfstart and =
In-Reply-To: <alpine.DEB.1.00.0808300934520.14895@nqv-yncgbc>
References: <alpine.DEB.1.00.0808291853500.29848@nqv-yncgbc>
	<48B8FD08.9020302@wxs.nl>
	<alpine.DEB.1.00.0808300934520.14895@nqv-yncgbc>
Message-ID: <48BA73F2.3020103@wxs.nl>

Aditya Mahajan wrote:
> On Sat, 30 Aug 2008, Hans Hagen wrote:
> 
>> Aditya Mahajan wrote:
>>> texmfstart does not handle = in --argument propertly. For example
>>>
>>> texmfstart --verbose --arguments="a=b" bin:echo
>>
>> and what does
> 
> Both give incorrect output
> 
>> texmfstart --verbose "--arguments=a=b" bin:echo
> 
> texmfstart --verbose "--arguments=a=b" bin:echo

the first argument of texmfstart is considered to be the called script, 
prog etc

texmfstart [optional args for texmfstart] [prog to call] [args to prog]

so the question is, what do you want to achieve

 >texmfstart --verbose bin:echo "--args=a=b"
texmfstart version 2.0.3
using 'system' call: echo  --args=a=b
  --args=a=b

execution was successful




-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From mojca.miklavec.lists at gmail.com  Sun Aug 31 15:35:29 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sun, 31 Aug 2008 15:35:29 +0200
Subject: [dev-context] Happy ConTeXt Community Day :)
Message-ID: <6faad9f00808310635v4e982e9bhc26e7ccb0f2c69d0@mail.gmail.com>

Hello,

I would like to express my best wishes to the two very special people
who did most for the ConTeXt community - who are voluntary, with all
their enthusiasm, helping others and developing whatever users around
the World desire.

I wish them both to be able to do their dream job (as well as to spend
enough time away from computer for other hobbies :), and would like to
thank them both for the marvellous work they are doing.

Today could be declared the "ConTeXt Community Day" :)

Patrick, alles gutes zum Geburtstag!
Taco, van harte gefeliciteerd met je verjaardag!

M.

From adityam at umich.edu  Sun Aug 31 18:42:13 2008
From: adityam at umich.edu (Aditya Mahajan)
Date: Sun, 31 Aug 2008 12:42:13 -0400 (EDT)
Subject: [dev-context] trouble with texmfstart and =
In-Reply-To: <48BA73F2.3020103@wxs.nl>
References: <alpine.DEB.1.00.0808291853500.29848@nqv-yncgbc>
	<48B8FD08.9020302@wxs.nl>
	<alpine.DEB.1.00.0808300934520.14895@nqv-yncgbc>
	<48BA73F2.3020103@wxs.nl>
Message-ID: <alpine.DEB.1.00.0808311227360.2808@nqv-yncgbc>

On Sun, 31 Aug 2008, Hans Hagen wrote:

> Aditya Mahajan wrote:
>> On Sat, 30 Aug 2008, Hans Hagen wrote:
>> 
>>> Aditya Mahajan wrote:
>>>> texmfstart does not handle = in --argument propertly. For example
>>>> 
>>>> texmfstart --verbose --arguments="a=b" bin:echo
>>> 
>>> and what does
>> 
>> Both give incorrect output
>> 
>>> texmfstart --verbose "--arguments=a=b" bin:echo
>> 
>> texmfstart --verbose "--arguments=a=b" bin:echo
>
> the first argument of texmfstart is considered to be the called script, prog 
> etc
>
> texmfstart [optional args for texmfstart] [prog to call] [args to prog]
>
> so the question is, what do you want to achieve
>
>> texmfstart --verbose bin:echo "--args=a=b"
> texmfstart version 2.0.3
> using 'system' call: echo  --args=a=b
> --args=a=b

I want to call vim with the following arguments (all in one line)

vim -u NONE -e -C -n -c "set tabstop=8" -c "source 
/home/adityam/tex/texmf-local/tex/context/third/vim/2context.vim"
-c "wqa" test-vimsyntax.tmp

So, I use the following command: (in one line)

texmfstart --verbose bin:vim "-u NONE -e -C -n  -c \"set 
tabstop=8\" -c \"source kpse:2context.vim \" -c \"wqa\" test-vimsyntax.tmp "

which gives

texmfstart version 2.0.3
kpse     : direct (forced)
locating '2context.vim' in program space 'context'
2context.vim is resolved to 
/home/adityam/tex/texmf-local/tex/context/third/vim/2context.vim
using 'system' call: vim  -u NONE -e -C -n -c "set tabstop="8" -c 
"source /home/adityam/tex/texmf-local/tex/context/third/vim/2context.vim " 
-c "wqa" test-vimsyntax.tmp "

Notice that texmfstart has mungled the quotes. There are quotes around 8, 
and an extra quote in the end. The man page of texmfstart says

  --arguments=str
               an  alternative  for  providing  the arguments to be passed.  For
               example,
                  texmfstart --arguments=b.tex texexec
               will pass b.tex as the argument to texexec.

So, I was trying to use --arguments to see if that works better than the 
default. But --arguments fails does worse (again on one line)

texmfstart --verbose --arguments="-u NONE -e -C -n -c \"set 
tabstop=8\" -c \"source kpse:2context.vim \" -c \"wqa\" test-vimsyntax.tmp "
bin:vim

texmfstart version 2.0.3
using 'system' call: vim -u NONE -e -C -n -V10log -c "set tabstop
sh: Syntax error: Unterminated quoted string


So, how do I use texmfstart to get what I need? I cannot call vim directly 
because I want to use kpse to search for the exact path of 2context.vim 
file.

Aditya

From mojca.miklavec.lists at gmail.com  Mon Sep  1 10:03:42 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Mon, 1 Sep 2008 10:03:42 +0200
Subject: [dev-context] metafun & textext problems in mkiv
In-Reply-To: <48BA71E5.4050106@wxs.nl>
References: <6faad9f00808290958h2f16dc6do754bc44bb8643eee@mail.gmail.com>
	<48B879E5.6000500@wxs.nl>
	<6faad9f00808300249m9dd648eib096394139914e87@mail.gmail.com>
	<48BA71E5.4050106@wxs.nl>
Message-ID: <6faad9f00809010103u6b7a7242oaa5996a26aea9cd1@mail.gmail.com>

On Sun, Aug 31, 2008 at 12:26 PM, Hans Hagen wrote:
> Mojca Miklavec wrote:
>
>> It's not only about "color doesn't work" (though it would be really
>> nice if it would, but there have been many incompatibilities in that
>> respect since the introduction of \sometxt anyway), but the picture
>> also gets lost second time when it's used. I only get one "abc" and
>> empty space instead of the second one.
>
> in mlib-pps.tex we need a \copy instead of a \box
>
> \def\MPLIBgettextscaled#1#2#3%
>  {\vbox to \zeropoint{\vss\hbox to
> \zeropoint{\scale[sx=#2,sy=#3]{\raise\dp#1\copy#1}\hss}}}

Thanks a lot, it works OK now.
(Colors don't, but I guess that this is more or less on purpose.)

Mojca

From martin at scholz-net.org  Tue Sep  2 15:34:43 2008
From: martin at scholz-net.org (Martin Scholz)
Date: Tue, 2 Sep 2008 15:34:43 +0200
Subject: [dev-context] ConTeXt MK IV possibility to run different language
	options
Message-ID: <g9jfef$ba1$1@ger.gmane.org>

Hi 

I've got an wish for an additonal command option  in the context command.
Up to now there is no possibility to run context in MK IV mode in different
languages. Here is a way one could solve this:

as far as I see it context invokes the luatools command and for a non-english
source-file one could use
luatools --run cont-de myfile
Now why can't wan edit the context-command with a --lang option in the
following way context --lang=xx myfile
so that the --lang=xx option has a change-option in luatools so that the
--run option is change. context myfile invokes luatools --run cont-en myfile
context --lang=xx invokes luatools --run cont-xx myfile,
where xx stands for the countrycode.

Thanks for your patience

Greetings
Martin


From pragma at wxs.nl  Tue Sep  2 18:48:49 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 02 Sep 2008 18:48:49 +0200
Subject: [dev-context] ConTeXt MK IV possibility to run different
 language options
In-Reply-To: <g9jfef$ba1$1@ger.gmane.org>
References: <g9jfef$ba1$1@ger.gmane.org>
Message-ID: <48BD6E71.2040701@wxs.nl>

Martin Scholz wrote:
> Hi 
> 
> I've got an wish for an additonal command option  in the context command.
> Up to now there is no possibility to run context in MK IV mode in different
> languages. Here is a way one could solve this:
> 
> as far as I see it context invokes the luatools command and for a non-english
> source-file one could use
> luatools --run cont-de myfile
> Now why can't wan edit the context-command with a --lang option in the
> following way context --lang=xx myfile
> so that the --lang=xx option has a change-option in luatools so that the
> --run option is change. context myfile invokes luatools --run cont-en myfile
> context --lang=xx invokes luatools --run cont-xx myfile,
> where xx stands for the countrycode.
> 
> Thanks for your patience

actually, it shoul dbe

--interface=de  (as with texexec)

i've added it to mtx-context and it will be in the next beta

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From martin at scholz-net.org  Tue Sep  2 19:47:26 2008
From: martin at scholz-net.org (Martin Scholz)
Date: Tue, 2 Sep 2008 19:47:26 +0200
Subject: [dev-context] ConTeXt MK IV possibility to run different
	language options
References: <g9jfef$ba1$1@ger.gmane.org> <48BD6E71.2040701@wxs.nl>
Message-ID: <g9ju8c$4hf$1@ger.gmane.org>

On 02.09.2008 18:48:48, Hans Hagen wrote:
> Martin Scholz wrote:
>> Hi
>>
>> I've got an wish for an additonal command option  in the context command.
>> Up to now there is no possibility to run context in MK IV mode in different
>> languages. Here is a way one could solve this:
>>
>> as far as I see it context invokes the luatools command and for a non-english
>> source-file one could use
>> luatools --run cont-de myfile
>> Now why can't wan edit the context-command with a --lang option in the
>> following way context --lang=xx myfile
>> so that the --lang=xx option has a change-option in luatools so that the
>> --run option is change. context myfile invokes luatools --run cont-en myfile
>> context --lang=xx invokes luatools --run cont-xx myfile,
>> where xx stands for the countrycode.
>>
>> Thanks for your patience
> 
> actually, it shoul dbe
> 
> --interface=de  (as with texexec)
> 
> i've added it to mtx-context and it will be in the next beta
> 
> Hans
> 
> -----------------------------------------------------------------
> Hans Hagen | PRAGMA ADE
> Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
> tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
> | www.pragma-pod.nl
> -----------------------------------------------------------------
> 

ok that's a great news, I can't really await the outcome of the next release


From schuster.wolfgang at googlemail.com  Wed Sep  3 08:29:55 2008
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Wed, 3 Sep 2008 08:29:55 +0200
Subject: [dev-context] ConTeXt MK IV possibility to run different
	language options
In-Reply-To: <g9jfef$ba1$1@ger.gmane.org>
References: <g9jfef$ba1$1@ger.gmane.org>
Message-ID: <115224fb0809022329j43378c1cmb13f08bbd2cca017@mail.gmail.com>

On Tue, Sep 2, 2008 at 3:34 PM, Martin Scholz <martin at scholz-net.org> wrote:
> Hi
>
> I've got an wish for an additonal command option  in the context command.
> Up to now there is no possibility to run context in MK IV mode in different
> languages. Here is a way one could solve this:
>
> as far as I see it context invokes the luatools command and for a non-english
> source-file one could use
> luatools --run cont-de myfile

You could also use 'context --make de'.

> Now why can't wan edit the context-command with a --lang option in the
> following way context --lang=xx myfile
> so that the --lang=xx option has a change-option in luatools so that the
> --run option is change. context myfile invokes luatools --run cont-en myfile
> context --lang=xx invokes luatools --run cont-xx myfile,
> where xx stands for the countrycode.

Wolfgang

From peter.rolf at arcor.de  Thu Sep 25 16:48:31 2008
From: peter.rolf at arcor.de (Peter Rolf)
Date: Thu, 25 Sep 2008 16:48:31 +0200
Subject: [dev-context] derived colors (mkiv)
Message-ID: <48DBA4BF.5010702@arcor.de>

Hi,

there is currently no bookkeeping ('name-->id') for derived colors in
mkiv; i.e. \definecolor[foo] [black] does not register 'foo'.

\csname(ca:foo)\endcsname

is the only way to access the color id. While this in no problem in TeX
code, using this in lua is not very handy. I tried ugly stuff like

c_id = format("\\csname(ca:%s)\\endcsname",c)

but when I compare 'c_id' with the id of black, the values '1' and 1 (id
of black) differ when compared. Mhhhh.

I think that the best way to handle derived colors properly is to add
their name to the attributes list too. It's only a small patch and it
shouldn't do any harm.


Best wishes, Peter


-------------- next part --------------
A non-text attachment was scrubbed...
Name: colo-new.tar.bz2
Type: application/octet-stream
Size: 4110 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20080925/c018e5a6/attachment.obj 

From peter.rolf at arcor.de  Thu Sep 25 17:32:44 2008
From: peter.rolf at arcor.de (Peter Rolf)
Date: Thu, 25 Sep 2008 17:32:44 +0200
Subject: [dev-context] derived colors (mkiv)
In-Reply-To: <48DBA4BF.5010702@arcor.de>
References: <48DBA4BF.5010702@arcor.de>
Message-ID: <48DBAF1C.2090004@arcor.de>

Peter Rolf schrieb:
> Hi,
> 
> there is currently no bookkeeping ('name-->id') for derived colors in
> mkiv; i.e. \definecolor[foo] [black] does not register 'foo'.
> 
> \csname(ca:foo)\endcsname
> 
> is the only way to access the color id. While this in no problem in TeX
> code, using this in lua is not very handy. I tried ugly stuff like
> 
> c_id = format("\\csname(ca:%s)\\endcsname",c)
> 
> but when I compare 'c_id' with the id of black, the values '1' and 1 (id
> of black) differ when compared. Mhhhh.
> 
> I think that the best way to handle derived colors properly is to add
> their name to the attributes list too. It's only a small patch and it
> shouldn't do any harm.
>
.... I forgot to test the existense of a 'name' :(
hopefully now foolprooved.


        if name then
            local stra = attributes.list[attributes.numbers['color']][str]
            if stra then
                attributes.list[attributes.numbers['color']][name] =
stra -- inherit color id
            else
                attributes.list[attributes.numbers['color']][name] =
attributes.list[attributes.numbers['color']][black]
            end
        end


> 
> Best wishes, Peter
> 
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> dev-context mailing list
> dev-context at ntg.nl
> http://www.ntg.nl/mailman/listinfo/dev-context


From pragma at wxs.nl  Thu Sep 25 18:07:54 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 25 Sep 2008 18:07:54 +0200
Subject: [dev-context] derived colors (mkiv)
In-Reply-To: <48DBAF1C.2090004@arcor.de>
References: <48DBA4BF.5010702@arcor.de> <48DBAF1C.2090004@arcor.de>
Message-ID: <48DBB75A.5040202@wxs.nl>

Peter Rolf wrote:
> Peter Rolf schrieb:
>> Hi,
>>
>> there is currently no bookkeeping ('name-->id') for derived colors in
>> mkiv; i.e. \definecolor[foo] [black] does not register 'foo'.
>>
>> \csname(ca:foo)\endcsname
>>
>> is the only way to access the color id. While this in no problem in TeX
>> code, using this in lua is not very handy. I tried ugly stuff like
>>
>> c_id = format("\\csname(ca:%s)\\endcsname",c)
>>
>> but when I compare 'c_id' with the id of black, the values '1' and 1 (id
>> of black) differ when compared. Mhhhh.
>>
>> I think that the best way to handle derived colors properly is to add
>> their name to the attributes list too. It's only a small patch and it
>> shouldn't do any harm.
>>
> ..... I forgot to test the existense of a 'name' :(
> hopefully now foolprooved.
> 
> 
>         if name then
>             local stra = attributes.list[attributes.numbers['color']][str]
>             if stra then
>                 attributes.list[attributes.numbers['color']][name] =
> stra -- inherit color id
>             else
>                 attributes.list[attributes.numbers['color']][name] =
> attributes.list[attributes.numbers['color']][black]
>             end
>         end

btw ...


\setupcolors[state=start]

\starttext
     \definecolor[foo][black]   {\red red {\foo black} red}
     \definecolor[black][green] {\red red {\foo black} red}
\stoptext

you cannot freeze foo to black


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Thu Sep 25 18:04:10 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 25 Sep 2008 18:04:10 +0200
Subject: [dev-context] derived colors (mkiv)
In-Reply-To: <48DBA4BF.5010702@arcor.de>
References: <48DBA4BF.5010702@arcor.de>
Message-ID: <48DBB67A.4000209@wxs.nl>

Peter Rolf wrote:
> Hi,
> 
> there is currently no bookkeeping ('name-->id') for derived colors in
> mkiv; i.e. \definecolor[foo] [black] does not register 'foo'.
> 
> \csname(ca:foo)\endcsname
> 
> is the only way to access the color id. While this in no problem in TeX
> code, using this in lua is not very handy. I tried ugly stuff like
> 
> c_id = format("\\csname(ca:%s)\\endcsname",c)

hm, why do you want to use that number? th ecurrent implementation is 
not frozen so depending on it at the lua level can be dangerous

> but when I compare 'c_id' with the id of black, the values '1' and 1 (id
> of black) differ when compared. Mhhhh.
> 
> I think that the best way to handle derived colors properly is to add
> their name to the attributes list too. It's only a small patch and it
> shouldn't do any harm.

i'm not sure about this yet; also, if something like happens it sould 
happen in the clone/inherit functions and not only in this one spot 
(there are more places and there's also transparency)

so, what exactly do you need the number for

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Thu Sep 25 19:44:28 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 25 Sep 2008 19:44:28 +0200
Subject: [dev-context] derived colors (mkiv)
In-Reply-To: <48DBC1C8.6080500@arcor.de>
References: <48DBA4BF.5010702@arcor.de> <48DBB67A.4000209@wxs.nl>
	<48DBC1C8.6080500@arcor.de>
Message-ID: <48DBCDFC.9040802@wxs.nl>

Peter Rolf wrote:
				
> Hans Hagen schrieb:

>> so, what exactly do you need the number for
> 
> for overprinting (text only) i have to test if the current color is
> black. overprinting should be activated for all text elements, but if
> the print color is non black, overprinting should be disabled.

so, how about something that just works -)

\setupcolors[state=start]

\startluacode
function ctx.isblack(ca) -- name might change
     local cv = ca > 0 and colors.value(ca)
     return (cv and cv[2] == 0) or false
end
\stopluacode

\def\doifblackelse#1%
   {\ctxlua{commands.doifelse(ctx.isblack(\thecolorattribute{#1}))}}

\def\doifdrawingblackelse 
{\ctxlua{commands.doifelse(ctx.isblack(tex.attribute[attributes.numbers['color']]))}}

\starttext

     \definecolor[foo][black]
     {\red red {\foo (\doifblackelse{foo}{YES}{NO}
        \doifdrawingblackelse{YES}{NO}) black} red}

     \definecolor[foo][green]
     {\red red {\foo (\doifblackelse{foo}{YES}{NO}
        \doifdrawingblackelse{YES}{NO}) green} red}

\stoptext

less code and more abstract

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From peter.rolf at arcor.de  Thu Sep 25 20:10:53 2008
From: peter.rolf at arcor.de (Peter Rolf)
Date: Thu, 25 Sep 2008 20:10:53 +0200
Subject: [dev-context] derived colors (mkiv)
In-Reply-To: <48DBCDFC.9040802@wxs.nl>
References: <48DBA4BF.5010702@arcor.de>
	<48DBB67A.4000209@wxs.nl>	<48DBC1C8.6080500@arcor.de>
	<48DBCDFC.9040802@wxs.nl>
Message-ID: <48DBD42D.3050204@arcor.de>

Hans Hagen schrieb:
> Peter Rolf wrote:
> 				
>> Hans Hagen schrieb:
> 
>>> so, what exactly do you need the number for
>> for overprinting (text only) i have to test if the current color is
>> black. overprinting should be activated for all text elements, but if
>> the print color is non black, overprinting should be disabled.
> 
> so, how about something that just works -)
>

build in stuff is always preferred (as i don't have to adapt it if the
environment changes) :)

this looks nice. much better than my low level based and therefore
fragile solution.

many thanks!!

regards, peter

> \setupcolors[state=start]
> 
> \startluacode
> function ctx.isblack(ca) -- name might change
>      local cv = ca > 0 and colors.value(ca)
>      return (cv and cv[2] == 0) or false
> end
> \stopluacode
> 
> \def\doifblackelse#1%
>    {\ctxlua{commands.doifelse(ctx.isblack(\thecolorattribute{#1}))}}
> 
> \def\doifdrawingblackelse 
> {\ctxlua{commands.doifelse(ctx.isblack(tex.attribute[attributes.numbers['color']]))}}
> 
> \starttext
> 
>      \definecolor[foo][black]
>      {\red red {\foo (\doifblackelse{foo}{YES}{NO}
>         \doifdrawingblackelse{YES}{NO}) black} red}
> 
>      \definecolor[foo][green]
>      {\red red {\foo (\doifblackelse{foo}{YES}{NO}
>         \doifdrawingblackelse{YES}{NO}) green} red}
> 
> \stoptext
> 
> less code and more abstract
> 
> -----------------------------------------------------------------
>                                            Hans Hagen | PRAGMA ADE
>                Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
>       tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
>                                               | www.pragma-pod.nl
> -----------------------------------------------------------------
> _______________________________________________
> dev-context mailing list
> dev-context at ntg.nl
> http://www.ntg.nl/mailman/listinfo/dev-context
> 


From taco at elvenkind.com  Tue Sep 30 12:00:55 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 30 Sep 2008 12:00:55 +0200
Subject: [dev-context] Luatex beta 0.30.0 released
Message-ID: <48E1F8D7.2050701@elvenkind.com>


Hi all,

I have just uploaded the archives for luatex 0.30.0.
This release matches SVN revision #1521.

New features:

* Readable \tex internal params that are counts, attrs, or dimens are
   now returned as numbers instead of strings, and skips as node objects.
   Read-write access to tex's skip registers added: tex.skip[0] etc.
* new callback: 'linebreak_callback' to replace the internal paragraph
   breaking code
* the tex table now supports more readable 'convert' values:
   tex.fontname, tex.pdffontname, tex.pdffontobjnum, tex.pdffontsize,
   tex.uniformdeviate, tex.number, tex.romannumeral, tex.pdfpageref,
   tex.pdfxformname  (each takes a number as argument)
* new readable parameter: tex.fontidentifier(number) returns the
   \csname associated with that font id
* luatex now outputs \FONT<nr> instead of \^^@ in Overfull/Underfull
   messages if the font's id text is zero (like for expanded fonts) (#77)
  * luatex --version is split into --version and --credits
* There is now (again) an svn revision number in luatex --version (#91)
* Add support for more read-only internal access from lua:
   tex.lastpenalty, tex.lastkern, tex.lastskip, tex.lastnodetype,
   tex.inputlineno, tex.badness, tex.pdftexversion, tex.pdflastobj,
   tex.pdflastxform, tex.pdflastximage, tex.pdflastximagepages,
   tex.pdflastannot, tex.pdflastxpos, tex.pdflastypos, tex.pdfrandomseed,
   tex.pdflastlink, tex.luatexversion, tex.Alephversion,
   tex.Omegaversion, tex.Alephminorversion, tex.Omegaminorversion,
   tex.eTeXminorversion, tex.eTeXversion, tex.currentgrouplevel,
   tex.currentgrouptype, tex.currentiflevel, tex.currentiftype,
   tex.currentifbranch, tex.pdflastximagecolordepth (#81)
* the old --src-specials are replaced by --synctex (#63)
* the \expanded primitive is backported from pdftex 1.50 (#43)
* luatex now comes with libpng 1.2.32
* experimental: tex.definefont(string, number) associates a
   csname string with a font id number

Bugs fixed compared to 0.29.0:

* dashes were exported wrongly by MPlib
* multi-item \discretionaries were broken in various ways (#78, mailinglist)
* read_font_info was sometimes called recursively from lua-loaded
   virtual fonts
* do_vf was sometimes called on lua-loaded fonts that where
   already known to be virtual
* trailing junk in tfm files is now ignored (needed for ecrm fonts)
* pdf_ignored_dimen was initialized too late, breaking \prevdepth
   handling and causing output lines to overlap eachother (#72)
* pdf.immediateobj() had a printf-related bug
* the fontname terminal logging is fixed for strange font file names
* lua tex array assignments now listen to the globaldefs setting
   (tex.count[0] etc) (#92,partial)
* \parshape was broken (#70)
* there is no longer a ".tex" extension forced on very input file (#74)
* eof() for mapfiles was true one byte too soon (#76)
* out of range \lefthyphenmin and \righthyphenmin settings now actually
   disable hyphenation (#90)
* tex.unset_attribute() looked too far ahead when a to-be-unset
   attribute id not only did not exist in the node, but was also
   higher than the highest set attribute on the node. (#65)
* the parameters attr and page_name of read_image() were swapped
   (this broke \pdfimage with attributes)
* tex filenames with spaces in them on the command line are now
   allowed again (#30)
* sometimes pfb fonts were included multiple times without valid
   reason (#29)
* some parts of the pdftex 1.40.9 PNG transparancy hack were still
   present and caused transparant png handling to fail
* \localinterlinepenalty and \localbrokenpenalty were broken
* special case catcode tables are now handled better (#23)
* the handling of missing .notdef charstrings in old pfb fonts
   is fixed (#27)


The archives (source and binaries) can be downloaded from supelec,
as usual:

      http://foundry.supelec.fr/projects/luatex/

Bugs and feature requests can be added to the issue tracker at

      http://tracker.luatex.org

Have fun,
Taco







From preining at logic.at  Tue Sep 30 13:15:57 2008
From: preining at logic.at (Norbert Preining)
Date: Tue, 30 Sep 2008 13:15:57 +0200
Subject: [dev-context] [Dev-luatex] Luatex beta 0.30.0 released
In-Reply-To: <48E1F8D7.2050701@elvenkind.com>
References: <48E1F8D7.2050701@elvenkind.com>
Message-ID: <20080930111557.GA21729@gamma.logic.tuwien.ac.at>

Hi Taco!

On Di, 30 Sep 2008, Taco Hoekwater wrote:
> I have just uploaded the archives for luatex 0.30.0.

Thanks a lot.

One thing which will/would make most distributors happy: You set
	AC_INIT(zlib/zlib.h)
which does not work when I remove the zlib sources completely from the
.orig.tar.gz. Better is 
	AC_INIT(lua51/lapi.h)
and rebuilding the configure.

--- src/libs/configure.in.orig	2008-09-30 13:13:05.000000000 +0200
+++ src/libs/configure.in	2008-09-30 13:13:43.000000000 +0200
@@ -1,6 +1,6 @@
 dnl configure.in for TeX Live source/libs.
 dnl Public domain.
-AC_INIT(zlib/zlib.h)
+AC_INIT(lua51/lapi.h)
 
 AC_CONFIG_AUX_DIR(../config)
 AC_PROG_MAKE_SET


Currently building Debian packages, will soon be available.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
DITHERINGTON (n)
Sudden access to panic experienced by one who realises that he is
being drawn inexorably into a clabby (q.v.) conversion, i.e. one he
has no hope of enjoying, benefiting from or understanding.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Tue Sep 30 13:51:31 2008
From: preining at logic.at (Norbert Preining)
Date: Tue, 30 Sep 2008 13:51:31 +0200
Subject: [dev-context] [Dev-luatex] Luatex beta 0.30.0 released
In-Reply-To: <68bfdc900809300439i1f66f49emb0ce6cdfb607df4f@mail.gmail.com>
References: <48E1F8D7.2050701@elvenkind.com>
	<20080930111557.GA21729@gamma.logic.tuwien.ac.at>
	<68bfdc900809300439i1f66f49emb0ce6cdfb607df4f@mail.gmail.com>
Message-ID: <20080930115131.GD21729@gamma.logic.tuwien.ac.at>

On Di, 30 Sep 2008, Yue Wang wrote:
> I dont know why Debian and Debian-like distributions have an old
> tradition to link tex-related program to dynamic library.

Ever heard about security related items?

Do YOU want to wade through thousands of packages and check whether they
use xpdf code, zlib code, or whatever, and fix in all of them a severe
security bug?

If not, then learn how big distributions have to work. That is life.

I don't use the system lua because lua has been changed in luatex,
same with xetex and libice (and I am surprised where you got the
information that ubuntu did that, because ubuntu takes my packages from
Debian, and I never did that).

So thanks for the useless contribution.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
LOCHRANZA (n.)
The long unaccomplished wail in the middle of a Scottish folk song
where the pipes nip around the corner for a couple of drinks.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Tue Sep 30 13:59:51 2008
From: preining at logic.at (Norbert Preining)
Date: Tue, 30 Sep 2008 13:59:51 +0200
Subject: [dev-context] [Dev-luatex] Luatex beta 0.30.0 released
In-Reply-To: <20080930111557.GA21729@gamma.logic.tuwien.ac.at>
References: <48E1F8D7.2050701@elvenkind.com>
	<20080930111557.GA21729@gamma.logic.tuwien.ac.at>
Message-ID: <20080930115951.GF21729@gamma.logic.tuwien.ac.at>

On Di, 30 Sep 2008, Norbert Preining wrote:
> Currently building Debian packages, will soon be available.

luatex packages for Debian sid are now available from 
	deb http://people.debian.org/~preining/TeX/ luatex-sid/
	deb-src http://people.debian.org/~preining/TeX/ luatex-sid/

I will NOT upload them until lenny is out, after that they will go into
normal unstable.

I will try to make etch backports ASAP.

No testing with current context has been done, if someone can, please.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
CLATHY (adj.)
Nervously indecisive about how safely to dispose of a dud lightbulb.
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Tue Sep 30 15:00:56 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 30 Sep 2008 15:00:56 +0200
Subject: [dev-context] [Dev-luatex] Luatex beta 0.30.0 released
In-Reply-To: <20080930111557.GA21729@gamma.logic.tuwien.ac.at>
References: <48E1F8D7.2050701@elvenkind.com>
	<20080930111557.GA21729@gamma.logic.tuwien.ac.at>
Message-ID: <48E22308.9010805@elvenkind.com>



Norbert Preining wrote:
> Hi Taco!
> 
> On Di, 30 Sep 2008, Taco Hoekwater wrote:
>> I have just uploaded the archives for luatex 0.30.0.
> 
> Thanks a lot.
> 
> One thing which will/would make most distributors happy: You set
> 	AC_INIT(zlib/zlib.h)
> which does not work when I remove the zlib sources completely from the
> .orig.tar.gz. Better is 
> 	AC_INIT(lua51/lapi.h)
> and rebuilding the configure.

I don't understand what this does exactly, but sure.

Best wishes,
Taco



From preining at logic.at  Tue Sep 30 19:55:15 2008
From: preining at logic.at (Norbert Preining)
Date: Tue, 30 Sep 2008 19:55:15 +0200
Subject: [dev-context] [Dev-luatex] Luatex beta 0.30.0 released
In-Reply-To: <48E22308.9010805@elvenkind.com>
References: <48E1F8D7.2050701@elvenkind.com>
	<20080930111557.GA21729@gamma.logic.tuwien.ac.at>
	<48E22308.9010805@elvenkind.com>
Message-ID: <20080930175515.GA5897@gamma.logic.tuwien.ac.at>

On Di, 30 Sep 2008, Taco Hoekwater wrote:
> >One thing which will/would make most distributors happy: You set
> >	AC_INIT(zlib/zlib.h)
> >which does not work when I remove the zlib sources completely from the
> >.orig.tar.gz. Better is 
> >	AC_INIT(lua51/lapi.h)
> >and rebuilding the configure.
> 
> I don't understand what this does exactly, but sure.

Not that I am an AC profi, but it seems that it checks for the existence
of that file at every run and if it does not exist it assumes that it is
in some wrong directory, breaking off.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
DITHERINGTON (n)
Sudden access to panic experienced by one who realises that he is
being drawn inexorably into a clabby (q.v.) conversion, i.e. one he
has no hope of enjoying, benefiting from or understanding.
			--- Douglas Adams, The Meaning of Liff

From mojca.miklavec.lists at gmail.com  Sat Oct  4 02:50:57 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sat, 4 Oct 2008 02:50:57 +0200
Subject: [dev-context] [do we need TeXtexts in MkIV]: how to rewrite
	\startTeXtexts?
Message-ID: <6faad9f00810031750m2b41be35xb37b1f18e489ad1f@mail.gmail.com>

Hello,

I'm a bit "out" of programming at the moment (and not following mkiv
as deep as I should), but here's one of the old sins that keeps
preventing my module to be used in MKIV.

How can I get rid of \startTeXtexts in the following code, so that the
code will be usable by both mkii and mkiv? (Metapost code is probably
[almost] OK, but the TeX part needs some minor polishing. One could
definitely rewrite metapost code into lua, but then I would need to
take care for two paralel versions - I do not want to go there since
metapost does all the work at the moment.)

Any hinst most welcome,
    Mojca

\defineconversion
	[hans and taco]
	[H,a,n,s,\ ,\&,\ ,T,a,c,o,\ ]

\setupcolors
	[state=start]
\chardef\TeXtextcolormode\zerocount

\startTeXtexts
	\doloop{\doifelseconversionnumber{hans and taco}{\recurselevel}%
		% +500 is a hack (hopefully the plot doesn't contain more than 500 labels)
		% otherwise the points would be overwritten by labels with another \TeXtext:
		% it might need a fix in ConTeXt core
		{\TeXtext{\numexpr\recurselevel+500\relax}{\strut{\convertnumber{hans
and taco}{\recurselevel}}}}%
	{\exitloop}}%
\stopTeXtexts

\edef\numberofsymbols{1}%
\doloop{\doifelseconversionnumber{hans and taco}{\recurselevel}%
	{\edef\numberofsymbols{\recurselevel}}%
	{\exitloop}}%

\starttext
\startMPcode

color c[];
for i=1 upto \numberofsymbols:
	c[i] = ((i-1)/(\numberofsymbols-1))[red,blue];
endfor;

vardef the_number(expr n) = ((n mod \numberofsymbols) + 1) enddef;

vardef the_symbol(expr n) =
	picture pict;
	pict := sometxt(the_number(n) + 500);
	pict shifted -.5[llcorner pict,lrcorner pict]
enddef;

def draw_point(expr x, y, n) =
	draw (the_symbol(n) shifted (x,y)) withcolor c[the_number(n)];
enddef;

for i=0 upto 23:
	draw_point(0,-i*3mm,i);
endfor;
\stopMPcode

\stoptext
-------------- next part --------------
A non-text attachment was scrubbed...
Name: devgnu.tex
Type: application/x-tex
Size: 1196 bytes
Desc: not available
Url : http://www.ntg.nl/mailman/private/dev-context/attachments/20081004/844f7289/attachment.tex 

From mojca.miklavec.lists at gmail.com  Sat Oct  4 03:04:30 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sat, 4 Oct 2008 03:04:30 +0200
Subject: [dev-context] [do we need TeXtexts in MkIV]: how to rewrite
	\startTeXtexts?
In-Reply-To: <6faad9f00810031750m2b41be35xb37b1f18e489ad1f@mail.gmail.com>
References: <6faad9f00810031750m2b41be35xb37b1f18e489ad1f@mail.gmail.com>
Message-ID: <6faad9f00810031804g4a975577m887d3cd6e1230ff3@mail.gmail.com>

On Sat, Oct 4, 2008 at 2:50 AM, Mojca Miklavec wrote:
> Hello,
>
> I'm a bit "out" of programming at the moment (and not following mkiv
> as deep as I should), but here's one of the old sins that keeps
> preventing my module to be used in MKIV.
>
> How can I get rid of \startTeXtexts in the following code, so that the
> code will be usable by both mkii and mkiv?

It must be something trivial, but this one (bad try) eats backslashes:

vardef sometxtm(expr n) =
	textext("\\convertnumber{hans and taco}{2}")
enddef;
...
pict := sometxtm(n);

Mojca

From pragma at wxs.nl  Sat Oct  4 14:59:04 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Sat, 04 Oct 2008 14:59:04 +0200
Subject: [dev-context] [do we need TeXtexts in MkIV]: how to
	rewrite	\startTeXtexts?
In-Reply-To: <6faad9f00810031750m2b41be35xb37b1f18e489ad1f@mail.gmail.com>
References: <6faad9f00810031750m2b41be35xb37b1f18e489ad1f@mail.gmail.com>
Message-ID: <48E76898.1000808@wxs.nl>

Mojca Miklavec wrote:
> Hello,
> 
> I'm a bit "out" of programming at the moment (and not following mkiv
> as deep as I should), but here's one of the old sins that keeps
> preventing my module to be used in MKIV.
> 
> How can I get rid of \startTeXtexts in the following code, so that the
> code will be usable by both mkii and mkiv? (Metapost code is probably
> [almost] OK, but the TeX part needs some minor polishing. One could
> definitely rewrite metapost code into lua, but then I would need to
> take care for two paralel versions - I do not want to go there since
> metapost does all the work at the moment.)
> 
> Any hinst most welcome,
>     Mojca
> 
> \defineconversion
> 	[hans and taco]
> 	[H,a,n,s,\ ,\&,\ ,T,a,c,o,\ ]
> 
> \setupcolors
> 	[state=start]
> \chardef\TeXtextcolormode\zerocount
> 
> \startTeXtexts
> 	\doloop{\doifelseconversionnumber{hans and taco}{\recurselevel}%
> 		% +500 is a hack (hopefully the plot doesn't contain more than 500 labels)
> 		% otherwise the points would be overwritten by labels with another \TeXtext:
> 		% it might need a fix in ConTeXt core
> 		{\TeXtext{\numexpr\recurselevel+500\relax}{\strut{\convertnumber{hans
> and taco}{\recurselevel}}}}%
> 	{\exitloop}}%
> \stopTeXtexts
> 
> \edef\numberofsymbols{1}%
> \doloop{\doifelseconversionnumber{hans and taco}{\recurselevel}%
> 	{\edef\numberofsymbols{\recurselevel}}%
> 	{\exitloop}}%
> 
> \starttext
> \startMPcode
> 
> color c[];
> for i=1 upto \numberofsymbols:
> 	c[i] = ((i-1)/(\numberofsymbols-1))[red,blue];
> endfor;
> 
> vardef the_number(expr n) = ((n mod \numberofsymbols) + 1) enddef;
> 
> vardef the_symbol(expr n) =
> 	picture pict;
> 	pict := sometxt(the_number(n) + 500);
> 	pict shifted -.5[llcorner pict,lrcorner pict]
> enddef;
> 
> def draw_point(expr x, y, n) =
> 	draw (the_symbol(n) shifted (x,y)) withcolor c[the_number(n)];
> enddef;
> 
> for i=0 upto 23:
> 	draw_point(0,-i*3mm,i);
> endfor;
> \stopMPcode
> 
> \stoptext

just make a proper tex string ... here 's'

\setupcolors[state=start]

\unexpanded\def\colored[#1]%
   {\groupedcommand
      {\definecolor[@colored@][#1]\doactivatecolor{@colored@}}
      {}}

\starttext
     \startMPcode
     vardef draw_point(expr x, y, n) =
         save s ; string s ;
         s := "\colored[r=" & decimal (n/25) & "]{" & decimal n & "}" ;
         draw (textext(s) shifted (x,y)) ;
     enddef;

     for i=0 upto 23:
         draw_point(-i*2mm,-i*3mm,i);
     endfor;
     \stopMPcode
\stoptext

i'll add \colored to the core (this is the mkiv definition)


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From mojca.miklavec.lists at gmail.com  Sat Oct  4 17:06:57 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sat, 4 Oct 2008 17:06:57 +0200
Subject: [dev-context] [do we need TeXtexts in MkIV]: how to rewrite
	\startTeXtexts?
In-Reply-To: <48E76898.1000808@wxs.nl>
References: <6faad9f00810031750m2b41be35xb37b1f18e489ad1f@mail.gmail.com>
	<48E76898.1000808@wxs.nl>
Message-ID: <6faad9f00810040806v2befcd02pea643acbf8ebccc3@mail.gmail.com>

> \unexpanded\def\colored[#1]%
>  {\groupedcommand
>     {\definecolor[@colored@][#1]\doactivatecolor{@colored@}}
>     {}}
>
> i'll add \colored to the core (this is the mkiv definition)

Concerning this specific issue: I often miss
    \color[r=.5,g=.5]{something orange}
in mkii as well. Is the "command space" in the definition of \color
command itself already polluted, so that this is not possible? \color
is very complex command, so there's probably a chance that "if
argument are assignments, then define the color first and then use it,
if it's not assignment, use the already known color" would not work.

Is there any specific reason why only mark iv (apart from the fact
that you consider mkii "frozen")?

Mojca

(I have some more questions concerning this thread.)

From pragma at wxs.nl  Tue Oct  7 19:36:01 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 07 Oct 2008 19:36:01 +0200
Subject: [dev-context] [do we need TeXtexts in MkIV]: how to rewrite
	\startTeXtexts?
In-Reply-To: <6faad9f00810040806v2befcd02pea643acbf8ebccc3@mail.gmail.com>
References: <6faad9f00810031750m2b41be35xb37b1f18e489ad1f@mail.gmail.com>	
	<48E76898.1000808@wxs.nl>
	<6faad9f00810040806v2befcd02pea643acbf8ebccc3@mail.gmail.com>
Message-ID: <48EB9E01.3080209@wxs.nl>

Mojca Miklavec wrote:

> Concerning this specific issue: I often miss
>     \color[r=.5,g=.5]{something orange}
> in mkii as well. Is the "command space" in the definition of \color
> command itself already polluted, so that this is not possible? \color

permitting this in \color would slow down thsi command too much so best 
use a dedicated one

> is very complex command, so there's probably a chance that "if
> argument are assignments, then define the color first and then use it,
> if it's not assignment, use the already known color" would not work.
> 
> Is there any specific reason why only mark iv (apart from the fact
> that you consider mkii "frozen")?

i added it to both


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Thu Oct  9 11:02:02 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 09 Oct 2008 11:02:02 +0200
Subject: [dev-context] Luatex beta 0.30.1 released
Message-ID: <48EDC88A.9030004@elvenkind.com>

Hi all,

I have just uploaded the archives for luatex 0.30.1.
This release matches SVN revision #1552.

There are no new features, just bugfixes and speedups:

* Invalid return values from the linebreak_filter callback
   are now handled gracefully (was crashing)
* a preinstalled ctangle is no longer needed except when
   cross-compiling
* In 0.30.0, the .notdef fix was incorrectly applied to
   truetype / opentype fonts.
* A bunch of all memory leaks is fixed
* In lua, f:read('*a') now uses signicantly less memory
* The number of \catcodetables is now limited to 64KB
   (for speed reasons)
* Luatex could crash if there were PDF images with and
   without page /Group included on the same page
* Lua coco now always uses setjmp (for OpenBSD compatibility)
* The embedded mplib is updated to the latest svn version
* # marks (characters with catcode 6) are no longer doubled
   inside \directlua
* Handling the nul character (U+0000) with catcode 13
   (active) was broken
* Luatex could crash on win32 with an access violation
   because there was one predefined language too few
   (the one matching \language=-1)


The archives (source and binaries) can be downloaded from supelec,
as usual:

      http://foundry.supelec.fr/projects/luatex/

Bugs and feature requests can be added to the issue tracker at

      http://tracker.luatex.org

Have fun,
Taco



From preining at logic.at  Tue Oct 14 10:20:11 2008
From: preining at logic.at (Norbert Preining)
Date: Tue, 14 Oct 2008 10:20:11 +0200
Subject: [dev-context] [Dev-luatex] Luatex beta 0.30.1 released
In-Reply-To: <48EDC88A.9030004@elvenkind.com>
References: <48EDC88A.9030004@elvenkind.com>
Message-ID: <20081014082011.GA21255@gamma.logic.tuwien.ac.at>

Hi all,

On Do, 09 Okt 2008, Taco Hoekwater wrote:
> I have just uploaded the archives for luatex 0.30.1.

It took a bit since my laptop crashed to set up a build environment on
my mother's computer, but here it is, Debian SID package available at
the usual place:
	deb http://people.debian.org/~preining/TeX/ luatex-sid/
	deb-src http://people.debian.org/~preining/TeX/ luatex-sid/

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
SWANAGE (pl.n.)
Swanage is the series of diversionary tactics used when trying to
cover up the existence of a glossop (q.v.) and may include (a)
uttering a high-pitched laugh and pointing out of the window (NB. this
doesn't work more that twice); (b) sneezing as loudly as possible and
wiping the glossop off the table in the same movement as whipping out
your handkerchief; (c) saying 'Christ! I seen to have dropped some
shit on your table' (very unwise); (d) saying 'Christ, who did that?'
(better) (e) pressing your elbow on the glossop itself and working
your arms slowly to the edge of the table; (f) leaving the glossop
where it is but moving a plate over it and putting up with sitting at
an uncomfortable angle the rest of the meal; or, if the glossop is in
too exposed a position, (g) leaving it there unremarked except for the
occasional humorous glance.
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Mon Oct 20 16:40:17 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 20 Oct 2008 16:40:17 +0200
Subject: [dev-context] Luatex beta 0.30.2 released
Message-ID: <48FC9851.3090901@elvenkind.com>

Hi all,

I have just uploaded the archives for luatex 0.30.2.
This release matches SVN revision #1568.

This release fixes a few (rather serious) bugs:

* The Lua coco change from 0.30.1 is reverted as it gave
   trouble on MacOSX. Lua coco on non-intel OpenBSD platforms
   is now explicitly turned off.

* The lua file reading speedup in 0.30.1 broke reading of
   files larger than 100MB.

* Reading of font-related files was broken when there was a find
   callback, but no read callback.

* The texmf.cnf array size setup values were ignored whenever
   --lua was given on the commandline (instead of only when
   texconfig.kpse_init is set to false).

* glyphs with negative widths resulted in incorrect horizontal
   placement (overlapping) of the string in the output PDF.

* Using \latelua could sometimes result in an invalid output PDF,
   and the argument token list was expanded too early

* There was a read buffer overrun in the mapfile parser

* There are two new variables in the status table:
   status.callbacks and status.indirect_callbacks (execution counts).

The archives (source and binaries) can be downloaded from supelec,
as usual:

       http://foundry.supelec.fr/projects/luatex/

Bugs and feature requests can be added to the issue tracker at

       http://tracker.luatex.org

Have fun,
Taco


_______________________________________________
dev-luatex mailing list
dev-luatex at ntg.nl
http://www.ntg.nl/mailman/listinfo/dev-luatex

From taco at elvenkind.com  Fri Oct 31 18:43:25 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 31 Oct 2008 18:43:25 +0100
Subject: [dev-context] Release 2008.10.31
Message-ID: <490B43BD.6020101@elvenkind.com>

Hi,

Hans did a new release today, and I have just finished
its webpage. Unfortunately I have no more time today
for announcement nor summary: I have dinner guests that
prefer to have me actually at the dinner table, attending.

Unless someone (Hans?) beats me to it, I can summarize
adn announce tomorrow morning

Taco

From taco at elvenkind.com  Thu Nov 27 12:12:53 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 27 Nov 2008 12:12:53 +0100
Subject: [dev-context] MetaPost 1.100 announcement
Message-ID: <492E80B5.4010007@elvenkind.com>


The MetaPost team is happy to announce a new release of MetaPost:

----------------------------------------------------------------------
MetaPost 1.1000
----------------------------------------------------------------------

The sources and a win32 package can be downloaded immediately from

  http://foundry.supelec.fr/projects/metapost/

This release will also be available from CTAN soon, and it will be
included in the next TeXLive. The source package should compile normally
on all systems that are capable of compiling a modern web2c-based TeX
distribution.

The win32 package is intended for texlive or a similar web2c-based
installation, and has been tested only with TeXLive 2008. These
executables will *not* work for miktex, sorry.

Of course, we welcome any comments (either good or bad) that you may
have. Simply replying to this message is fine, but see the bottom of
the message for a more formal way to report bugs and feature requests.

----------------------------------------------------------------------
What is new in version 1.100:
----------------------------------------------------------------------

* This release is the first version based on MPlib, the Cweb
  conversion / reimplementation of MetaPost.

  The one but big user-visible change is that the btex ... etex
  label conversion is now handled internally instead of via
  the external "mpware" programs. These programs are therefore
  no longer distributed.

* There is a new manual, mplibapi.pdf, that describes the internal
  interface to MPlib for developers.

* The file 'mpintro.pdf' is no longer distributed because the
  introduction mnaual is obsolete and has been that way for some
  time. A new tutorial is being worked on and will be included
  in future releases.

* The distribution now includes Dan Luecking's mpsproof.tex.

----------------------------------------------------------------------
Legal notice / license / bug reports
----------------------------------------------------------------------

MetaPost is a system for producing graphics developed by John Hobby
at AT&T, based on Donald Knuth's Metafont.  The MetaPost home page
is http://tug.org/metapost.

MetaPost is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the
Free Software Foundation, either version 2 of the License, or (at your
option) any later version.

The MetaPost development project is currently hosted at Supelec,
https://foundry.supelec.fr/projects/metapost; please report bugs and
request enhancements through there if possible. Alternatively, you
can reach us through the <metapost at tug.org> mailing list as well.

Have fun!

Taco Hoekwater, for the MetaPost team, November 29, 2008.






From taco at elvenkind.com  Thu Nov 27 15:34:42 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 27 Nov 2008 15:34:42 +0100
Subject: [dev-context] MetaPost beta 1.110
In-Reply-To: <492E80B5.4010007@elvenkind.com>
References: <492E80B5.4010007@elvenkind.com>
Message-ID: <492EB002.80702@elvenkind.com>


Hi all,

Immediately following the release of the stable MetaPost version 1.100,
I can also announce the very first test version of the new development
cycle.

As some of you know already, in the past month I have been working
on a SVG backend for MetaPost. SVG stands for Scalable Vector Graphics,
a language for describing two-dimensional graphics and graphical
applications in XML. It is a W3C Recommendation, see

  http://www.w3.org/Graphics/SVG/

for more details.

This new backend was requested by Dave Crossland, who also provided
the funding to make it possible.  Dave, thank you again!

================
How does it work?

* There is a new internal string variable, "outputformat". Its default
  value is "eps", but when you assign "svg" you will get SVG output.

* You may want to set the internal string variable "outputtemplate" to
  something like "%c%j.svg".

* If you use text labels, you will definately want to set

    prologues:=3

  With this setting, MetaPost will convert the font into curves
  (of course you also need a correct font map line, just as for
  PostScript output).

  With any other value of prologues you will simply get the SVG
  default text font in a system-dependant encoding. This is unlikely
  to be what you want!

================
A simple example:

  outputformat := "svg";
  outputtemplate := "%j-%c.svg";
  beginfig(1);
  fill fullcircle scaled 100 withcolor .4red;
  endfig;
  end.

==============
Other news

* The new internal string variable "outputtemplate" replaces
  "filenametemplate". The big difference is that "outputtemplate"
  is a true 'internal', so that you need a proper assignment.
  On the positive side, this means that you can use its (and
  "outputformat"s) current value with e.g. show and message.

  I am planning to make it possible for users to create their
  own internal string variables too (cf. newinternal).

* The source code itself is not yet in its final form (and there
  is also no lua binding yet), but the output is more or less
  finalized unless I get requests for changes from you.

* This new backend will not be the only new feature in MP 1.200,
  more new features are planned. One such feature will be direct
  access to the glyph->path conversion from the MetaPost input.


==============
Files

The MetaPost development project is currently hosted at Supelec,

  https://foundry.supelec.fr/projects/metapost

I have uploaded the sources as well as linux-i386 and mingw windows
binaries.


Have fun,
Taco

From taco at elvenkind.com  Fri Nov 28 11:43:00 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 28 Nov 2008 11:43:00 +0100
Subject: [dev-context] Luatex beta 0.30.3 released
Message-ID: <492FCB34.4060201@elvenkind.com>

Hi all,

I have just uploaded the archives for luatex 0.30.3.
This release matches SVN revision #1587.

This release fixes a really big bug, a few smaller ones,
and has updates of png and mplib:

* All hyphenation patterns that were anchored at the start or
  end of a word were ignored in luatex versions 0.25.X and 0.30.X
  (and possibly even earlier).

* Repeated use of \language=-1 could result in "There is not room
  for another language".

* The lua true coroutines patch (Coco) is now disabled on OpenBSD
  running on non-intel platforms.

* The lua socket library is patched so that it will now compile on
  OpenSolaris.

* Luatex now has libpng 1.2.33 and mplib 1.100


The archives (source and binaries) can be downloaded from supelec,
as usual:

       http://foundry.supelec.fr/projects/luatex/

Bugs and feature requests can be added to the issue tracker at

       http://tracker.luatex.org

Have fun,
Taco



From preining at logic.at  Fri Nov 28 12:06:48 2008
From: preining at logic.at (Norbert Preining)
Date: Fri, 28 Nov 2008 12:06:48 +0100
Subject: [dev-context] [Dev-luatex] Luatex beta 0.30.3 released
In-Reply-To: <492FCB34.4060201@elvenkind.com>
References: <492FCB34.4060201@elvenkind.com>
Message-ID: <20081128110648.GA7700@gandalf.dynalias.org>

On Fri, 28 Nov 2008, Taco Hoekwater wrote:
> I have just uploaded the archives for luatex 0.30.3.

Debian packages will be available in short time from the experimental
"distribution". I am not uploading to sid since I wait till lenny is
released and no fixes for RC bugs need to be made.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
DILLYTOP (n.)
The kind of bath plug which for some unaccountable reason is actually
designed to sit on top of the hole rather than fit into it.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Fri Nov 28 12:53:20 2008
From: preining at logic.at (Norbert Preining)
Date: Fri, 28 Nov 2008 12:53:20 +0100
Subject: [dev-context] new context and luatex packages for Debian
Message-ID: <20081128115320.GB7700@gandalf.dynalias.org>

Following Taco's release of the new luatex here is now the announcement
of new packages for context and luatex.

Both have been uploaded to Debian/experimental, but can be obtained
directly via:
	deb http://people.debian.org/~preining/TeX/ context/
	deb http://people.debian.org/~preining/TeX/ luatex-sid/

Version: luatex 0.30.3, context 2008.10.31

Any comments are appreciated.

I hope to get the MarkIV stuff sorted out sooner or later...

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
DIBBLE (vb.)
To try to remove a sticky something from one hand with the other, thus
causing it to get stuck to the other hand and eventually to anything
else you try to remove it with.
			--- Douglas Adams, The Meaning of Liff

From sanjoy at MIT.EDU  Sun Nov 30 18:30:22 2008
From: sanjoy at MIT.EDU (Sanjoy Mahajan)
Date: Sun, 30 Nov 2008 12:30:22 -0500
Subject: [dev-context] new context and luatex packages for Debian
In-Reply-To: Your message of "Fri, 28 Nov 2008 12:53:20 +0100."
	<20081128115320.GB7700@gandalf.dynalias.org>
	(sfid-20081128_082332_735226_13A66ED4) 
Message-ID: <E1L6q7i-0001T7-Vh@approx.mit.edu>

> Following Taco's release of the new luatex here is now the
> announcement of new packages for context and luatex.

Good news, thanks!

> Both have been uploaded to Debian/experimental
> Version: luatex 0.30.3, context 2008.10.31

CONTEXT
=======

The new context passed my usual tests: compiling a couple of 100+-page
books with math and physics equations and figures.  It didn't pass a new
test, mixing Palatino and Euler:

========== start test.tex ===============
\usetypescript[palatino] [ec] 
\definetypeface [palatino] [mm] [math] [euler] [euler] [rscale=1.03] 
\setupbodyfont[palatino,11pt] 

\starttext
\startformula
c^2 = a^2 + b^2.
\stopformula
\stoptext
========== end test.tex ===============

This test also did not work with my previous context installation (the
2008.05.21 packages).  With either the current or previous packages, the
equation comes out in Euler but as "a^2 b^2 + c^2:" (i.e. missing equals
sign, and the period replaced by a colon).

The test works on live.contextgarden.net (context 2008.11.10), and it
worked with an older set of context minimals a month or so ago.  So I
suspect a problem in my font map files (I'm using lmodern 1.010x-5).
The problem might be caused by something silly that I did; however, as
far as I know I run a vanilla tex setup from your Debian 'unstable'
packages.  Let me know if you have the same problem.


LUATEX
======

I couldn't find luatex in Debian/experimental.  I tried two methods to
find it.  The first method is:

  $ aptitude update   # with experimental in my sources.list
  $ aptitude install luatex/experimental

It produced:

  Unable to find an archive "experimental" for the package "luatex"

Which was strange, since I also have your line

  deb http://people.debian.org/~preining/TeX/ luatex-sid/

in my sources.list, and it wasn't picked up there either.

For the second method, I visited
<http://packages.debian.org/search?suite=experimental&keywords=luatex>
which lists these luatex packages

    * experimental (tex): next generation TeX engine
       0.30.3-1: amd64 hppa ia64 kfreebsd-amd64 kfreebsd-i386 sparc

So, there's no i386 package.  I'm using a TP T60, so that's why the
first method didn't find the new luatex.  I've just downloaded the
source package and, as a check, will try to build the binary package.

-Sanjoy

`Until lions have their historians, tales of the hunt shall always
 glorify the hunters.'  --African Proverb

From taco at elvenkind.com  Mon Dec  1 09:11:04 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 01 Dec 2008 09:11:04 +0100
Subject: [dev-context] [Dev-luatex] new context and luatex packages for
 Debian
In-Reply-To: <E1L6q7i-0001T7-Vh@approx.mit.edu>
References: <E1L6q7i-0001T7-Vh@approx.mit.edu>
Message-ID: <49339C18.4030207@elvenkind.com>

Sanjoy Mahajan wrote:
> ========== start test.tex ===============
> \usetypescript[palatino] [ec] 
> \definetypeface [palatino] [mm] [math] [euler] [euler] [rscale=1.03] 
> \setupbodyfont[palatino,11pt] 
> 
> \starttext
> \startformula
> c^2 = a^2 + b^2.
> \stopformula
> \stoptext
> ========== end test.tex ===============
> 
> This test also did not work with my previous context installation (the
> 2008.05.21 packages).  With either the current or previous packages, the
> equation comes out in Euler but as "a^2 b^2 + c^2:" (i.e. missing equals
> sign, and the period replaced by a colon).
> 

Works for me (but then, I am not using a 100% typical minimal). It looks
like a problem with a virtual font. This in turn is often caused by an
extra or wrong map line, but it could also be a missing .vf. Is there
no hint in the log?

Best wishes,
Taco


From preining at logic.at  Mon Dec  1 18:12:08 2008
From: preining at logic.at (Norbert Preining)
Date: Mon, 1 Dec 2008 18:12:08 +0100
Subject: [dev-context] new context and luatex packages for Debian
In-Reply-To: <E1L6q7i-0001T7-Vh@approx.mit.edu>
References: <20081128115320.GB7700@gandalf.dynalias.org>
	<E1L6q7i-0001T7-Vh@approx.mit.edu>
Message-ID: <20081201171208.GM28712@gamma.logic.tuwien.ac.at>

Hi Sanjoy,

thanks for testing.

On So, 30 Nov 2008, Sanjoy Mahajan wrote:
> The new context passed my usual tests: compiling a couple of 100+-page
> books with math and physics equations and figures.  It didn't pass a new

That is *really* great. In fact, as stated, if you don't mind me having
it on my computer (but I guarantee that I will not use it for anything
but testing context) I would be happy to have a big fat test document.
You already sent me one, that is one of those I test before uploading.

> ========== start test.tex ===============
> \usetypescript[palatino] [ec] 
> \definetypeface [palatino] [mm] [math] [euler] [euler] [rscale=1.03] 
> \setupbodyfont[palatino,11pt] 
> 
> \starttext
> \startformula
> c^2 = a^2 + b^2.
> \stopformula
> \stoptext
> ========== end test.tex ===============
> 
> This test also did not work with my previous context installation (the

Strange. I am running it here on my laptop and it comes out fine, Debian
packages:
context        2008.10.31-1 
lmodern        1.010x-5

> worked with an older set of context minimals a month or so ago.  So I
> suspect a problem in my font map files (I'm using lmodern 1.010x-5).

Pity that -recorder cannot be passed to texexec so that it records *all*
loaded files. This is the best way to find interfering files.

Maybe texexec has something similar?

> I couldn't find luatex in Debian/experimental.  I tried two methods to

It hasn't been compiled for x86 till now, I uploaded amd64 binaries.

Thanks a lot for all your tests, much appreciated.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
SOLENT (adj.)
Descriptive of the state of serene self-knowledge reached through
drink.
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Mon Dec  1 18:39:32 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 01 Dec 2008 18:39:32 +0100
Subject: [dev-context] new context and luatex packages for Debian
In-Reply-To: <20081201171208.GM28712@gamma.logic.tuwien.ac.at>
References: <20081128115320.GB7700@gandalf.dynalias.org>	<E1L6q7i-0001T7-Vh@approx.mit.edu>
	<20081201171208.GM28712@gamma.logic.tuwien.ac.at>
Message-ID: <49342154.2020202@elvenkind.com>

Norbert Preining wrote:
> Pity that -recorder cannot be passed to texexec so that it records *all*
> loaded files. This is the best way to find interfering files.
> 
> Maybe texexec has something similar?

texexec --passon='-recorder' (but it doesn't list ruby files)

Best wishes,
Taco

From sanjoy at MIT.EDU  Mon Dec  1 18:46:30 2008
From: sanjoy at MIT.EDU (Sanjoy Mahajan)
Date: Mon, 01 Dec 2008 12:46:30 -0500
Subject: [dev-context] new context and luatex packages for Debian
In-Reply-To: Your message of "Mon, 01 Dec 2008 18:12:08 +0100."
	<20081201171208.GM28712@gamma.logic.tuwien.ac.at>
	(sfid-20081201_121550_645635_F73AA3F7) 
Message-ID: <E1L7Cqs-0002X7-9G@approx.mit.edu>

> In fact, as stated, if you don't mind me having it on my computer (but
> I guarantee that I will not use it for anything but testing context) I
> would be happy to have a big fat test document.  You already sent me
> one, that is one of those I test before uploading.

One of my two tests is a slightly newer version of the mathematics
textbook that I sent you.  I can send you the newer math textbook if
that's useful.  Now that the Euler problem is fixed (see below), I'll
probably use Euler for the equations, so you'll have a test suite using
Palatino and Euler.

The other test is the physics textbook ("Art of Approximation").  The
physics textbook uses two Python scripts that I wrote plus mercurial.
If you don't mind testing Python as a side effect of testing the Debian
packages, I can send you a version of the physics textbook that still
uses Python but doesn't depend on mercurial (or I can send you the
vanilla version with all those deps).

> Strange. I am running it here on my laptop and it comes out fine, Debian
> packages:
> context        2008.10.31-1 
> lmodern        1.010x-5
> 
> > worked with an older set of context minimals a month or so ago.  So I
> > suspect a problem in my font map files (I'm using lmodern 1.010x-5).
> 
> Pity that -recorder cannot be passed to texexec so that it records *all*
> loaded files. This is the best way to find interfering files.

that suggestion solved the problem.  You can pass -recorder as follows:

  texexec --passon=-recorder test.tex

pdftex then gets the -recorder option, and test.fls will have the magic info.

I did so and looked for any loaded files that begin with /home/sanjoy.
And found the culprit:

  INPUT /home/sanjoy/texmf/tex/context/math-eul.tex

So I had an interfering version of math-eul.tex.  When I deleted it, the
test file compiled fine.  Sorry for the noise.

-Sanjoy

`Until lions have their historians, tales of the hunt shall always
 glorify the hunters.'  --African Proverb

From preining at logic.at  Mon Dec  1 19:17:55 2008
From: preining at logic.at (Norbert Preining)
Date: Mon, 1 Dec 2008 19:17:55 +0100
Subject: [dev-context] new context and luatex packages for Debian
In-Reply-To: <E1L7Cqs-0002X7-9G@approx.mit.edu>
References: <20081201171208.GM28712@gamma.logic.tuwien.ac.at>
	<E1L7Cqs-0002X7-9G@approx.mit.edu>
Message-ID: <20081201181755.GB10855@gamma.logic.tuwien.ac.at>

Hi Sanjoy,

On Mo, 01 Dez 2008, Sanjoy Mahajan wrote:
> One of my two tests is a slightly newer version of the mathematics
> textbook that I sent you.  I can send you the newer math textbook if
> that's useful.  Now that the Euler problem is fixed (see below), I'll
> probably use Euler for the equations, so you'll have a test suite using
> Palatino and Euler.

Great!!!

> The other test is the physics textbook ("Art of Approximation").  The
> physics textbook uses two Python scripts that I wrote plus mercurial.
> If you don't mind testing Python as a side effect of testing the Debian
> packages, I can send you a version of the physics textbook that still
> uses Python but doesn't depend on mercurial (or I can send you the
> vanilla version with all those deps).

I have mercurial 1.0.1-5.1 installed, but I guess you were talking about
access to the mercurial repository you are using.

In any case I am happy with *any* test docuemnt, and I don't mind
testing python on the way ;-)

>   texexec --passon=-recorder test.tex

Yup, I have also seen Taco's email. That is good, the most important
option in life ;-)

> So I had an interfering version of math-eul.tex.  When I deleted it, the
> test file compiled fine.  Sorry for the noise.

Good to hear it resolved, and what is coming from you is never noise,
you *do* real testing, while others complain without testing and trying
to fix it themselves. Please continue with that noise!

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
FORSINAIN (n. archaic)
The right of the lord of the manor to molest dwarves on their
birthdays.
			--- Douglas Adams, The Meaning of Liff

From preining at logic.at  Mon Dec  1 19:23:42 2008
From: preining at logic.at (Norbert Preining)
Date: Mon, 1 Dec 2008 19:23:42 +0100
Subject: [dev-context] new context and luatex packages for Debian
In-Reply-To: <49342154.2020202@elvenkind.com>
References: <20081128115320.GB7700@gandalf.dynalias.org>
	<E1L6q7i-0001T7-Vh@approx.mit.edu>
	<20081201171208.GM28712@gamma.logic.tuwien.ac.at>
	<49342154.2020202@elvenkind.com>
Message-ID: <20081201182342.GE10855@gamma.logic.tuwien.ac.at>

On Mo, 01 Dez 2008, Taco Hoekwater wrote:
> texexec --passon='-recorder' (but it doesn't list ruby files)

Great to hear, thanks.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
What the hell, he thought, you're only young once, and
threw himself out of the window. That would at least keep
the element of surprise on his side.
                 --- Ford outwitting a Vogon with a rocket launcher by going
                 --- into another certain death situation.
                 --- Douglas Adams, The Hitchhikers Guide to the Galaxy

From taco at elvenkind.com  Fri Dec  5 17:21:33 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 05 Dec 2008 17:21:33 +0100
Subject: [dev-context] Luatex beta 0.31.0
Message-ID: <4939550D.6000007@elvenkind.com>

Hi all,

I have just uploaded the archives for luatex 0.31.0.

This is just an intermediate release so that some testing can be
done on the updated fontforge embedding.

* There are new fields being generated by fontforge.to_table(),
  and one or two old ones have been removed. These fields are /
  will be documented in the manual, but very briefly:

  - MATH table and associated information are now exported
    (the main reason for the new fontforge code)
  - Baseline data is now exported
    (perhaps usable in lua code)
  - Multiple Master / Glyph variation data is now exported
    (but useless, for now)
  - Mac Feature (AAT) information is now exported
    (perhaps usable in lua code)
  - If (lookup) names were saved via the PfED table, these
    will the exported instead of the default, generated names.
    (as requested by Yannis)

* dfont is now treated as an archive format just like ttc
  when it comes to fontforge.info(). NOTE: that does not mean you
  can actually use them, because the  backend doesn't know
  yet how to embed dfont fonts in the PDF, that is on the
  TODO list for the next big beta (0.40.0).

* The executables are a lot larger than before. That is because
  much more of fontforge is included than before. Likely this
  will stay this way, because this makes upgrading the ff code
  much easier, and it means that luatex/FF potentially
  understands more font formats (after upgrading the backend,
  of course)

The archives (just binaries this time) can be downloaded from
supelec as usual:

       http://foundry.supelec.fr/projects/luatex/


If you need the sources, please check out via anonymous svn:

 svn co svn://scm.foundry.supelec.fr/svn/luatex/tags/beta-0.31.0


Bugs and feature requests can be added to the issue tracker at

       http://tracker.luatex.org

Have fun,
Taco


_______________________________________________
dev-luatex mailing list
dev-luatex at ntg.nl
http://www.ntg.nl/mailman/listinfo/dev-luatex

From oliver.buerschaper at mpq.mpg.de  Mon Dec  8 15:51:13 2008
From: oliver.buerschaper at mpq.mpg.de (Oliver Buerschaper)
Date: Mon, 8 Dec 2008 15:51:13 +0100
Subject: [dev-context] Luatex beta 0.31.0
In-Reply-To: <4939550D.6000007@elvenkind.com>
References: <4939550D.6000007@elvenkind.com>
Message-ID: <36D65ACD-09AF-488B-A8EB-A76613160869@mpq.mpg.de>

Hi Taco,

may I ask a completely uninformed question? I'm wondering whether it's  
also possible to access the glyphs' path data from within LuaTeX (and/ 
or MetaPost) ...

Best,
Oliver



> Hi all,
>
> I have just uploaded the archives for luatex 0.31.0.
>
> This is just an intermediate release so that some testing can be
> done on the updated fontforge embedding.
>
> * There are new fields being generated by fontforge.to_table(),
>  and one or two old ones have been removed. These fields are /
>  will be documented in the manual, but very briefly:
>
>  - MATH table and associated information are now exported
>    (the main reason for the new fontforge code)
>  - Baseline data is now exported
>    (perhaps usable in lua code)
>  - Multiple Master / Glyph variation data is now exported
>    (but useless, for now)
>  - Mac Feature (AAT) information is now exported
>    (perhaps usable in lua code)
>  - If (lookup) names were saved via the PfED table, these
>    will the exported instead of the default, generated names.
>    (as requested by Yannis)
>
> * dfont is now treated as an archive format just like ttc
>  when it comes to fontforge.info(). NOTE: that does not mean you
>  can actually use them, because the  backend doesn't know
>  yet how to embed dfont fonts in the PDF, that is on the
>  TODO list for the next big beta (0.40.0).
>
> * The executables are a lot larger than before. That is because
>  much more of fontforge is included than before. Likely this
>  will stay this way, because this makes upgrading the ff code
>  much easier, and it means that luatex/FF potentially
>  understands more font formats (after upgrading the backend,
>  of course)
>
> The archives (just binaries this time) can be downloaded from
> supelec as usual:
>
>       http://foundry.supelec.fr/projects/luatex/
>
>
> If you need the sources, please check out via anonymous svn:
>
> svn co svn://scm.foundry.supelec.fr/svn/luatex/tags/beta-0.31.0
>
>
> Bugs and feature requests can be added to the issue tracker at
>
>       http://tracker.luatex.org
>
> Have fun,
> Taco

From taco at elvenkind.com  Mon Dec  8 16:40:10 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 08 Dec 2008 16:40:10 +0100
Subject: [dev-context] Luatex beta 0.31.0
In-Reply-To: <36D65ACD-09AF-488B-A8EB-A76613160869@mpq.mpg.de>
References: <4939550D.6000007@elvenkind.com>
	<36D65ACD-09AF-488B-A8EB-A76613160869@mpq.mpg.de>
Message-ID: <493D3FDA.3020701@elvenkind.com>



Oliver Buerschaper wrote:
> Hi Taco,
> 
> may I ask a completely uninformed question? I'm wondering whether it's
> also possible to access the glyphs' path data from within LuaTeX (and/or
> MetaPost) ...

Not now. But that would be cool to have, so maybe someday.

Best wishes,
Taco

From preining at logic.at  Tue Dec  9 02:25:19 2008
From: preining at logic.at (Norbert Preining)
Date: Tue, 9 Dec 2008 02:25:19 +0100
Subject: [dev-context] testing lmodern 1.106 and context on Debian
Message-ID: <20081209012519.GA399@gandalf.dynalias.org>

Dear friends,

I am currently investing a bit of time to packages the (not anymore so)
new lmodern 1.106 fonts for Debian (experimental).

Since up to now we are shipping lmodern 1.010x I patched context so that
it uses the old font names.

So now there are new context and lmodern packages for testing. Mind that
they probably wont be the final ones, but if you can give them some
testing that would be great:
	deb http://people.debian.org/~preining/TeX/ next/
	deb-src http://people.debian.org/~preining/TeX/ next/
as usual signed with my key.

Feedback on the functionality, not only with context, but also with the
rest of the TeX Live 2007 packages in Debian, would be great!!!

Thanks a lot and all the best

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
LIFF (n.)
A book, the contents of which are totally belied by its cover. For
instance, any book the dust jacket of which bears the words. 'This
book will change your life'.
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Tue Dec  9 11:43:23 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 09 Dec 2008 11:43:23 +0100
Subject: [dev-context] Luatex beta 0.31.1
In-Reply-To: <4939550D.6000007@elvenkind.com>
References: <4939550D.6000007@elvenkind.com>
Message-ID: <493E4BCB.4000007@elvenkind.com>



Hi,

I have just uploaded luatex 0.31.1, hopefully fixing a bunch
of compilation errors on various platforms, but with no other
visible changes.


The archives (just binaries this time, hopefully there will be a
source package later) can be downloaded from supelec as usual:

        http://foundry.supelec.fr/projects/luatex/


If you need the sources, please check out via anonymous svn:

  svn co svn://scm.foundry.supelec.fr/svn/luatex/tags/beta-0.31.1


Bugs and feature requests can be added to the issue tracker at

       http://tracker.luatex.org

Have fun,
Taco


From taco at elvenkind.com  Tue Dec  9 12:39:21 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 09 Dec 2008 12:39:21 +0100
Subject: [dev-context] Luatex beta 0.31 update warning
In-Reply-To: <493E4BCB.4000007@elvenkind.com>
References: <4939550D.6000007@elvenkind.com> <493E4BCB.4000007@elvenkind.com>
Message-ID: <493E58E9.9050000@elvenkind.com>


Hi all,

Quick warning from me: if you update from the minimals this week,
be prepared for some potential problems with opentype fonts in
luatex. Because of the update of the embedded fontforge, there are
some differences in the font table format that Hans and I have yet
to sort out.

While that will not take long, it will still mean the beginning
of next week at the earliest (because Hans is teaching in Brno).

Best wishes,
Taco

Taco Hoekwater wrote:
> 
> Hi,
> 
> I have just uploaded luatex 0.31.1, hopefully fixing a bunch
> of compilation errors on various platforms, but with no other
> visible changes.


From pragma at wxs.nl  Tue Dec  9 12:49:48 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 09 Dec 2008 12:49:48 +0100
Subject: [dev-context] Luatex beta 0.31 update warning
In-Reply-To: <493E58E9.9050000@elvenkind.com>
References: <4939550D.6000007@elvenkind.com> <493E4BCB.4000007@elvenkind.com>
	<493E58E9.9050000@elvenkind.com>
Message-ID: <493E5B5C.6060909@wxs.nl>

Taco Hoekwater wrote:
> 
> Hi all,
> 
> Quick warning from me: if you update from the minimals this week,
> be prepared for some potential problems with opentype fonts in
> luatex. Because of the update of the embedded fontforge, there are
> some differences in the font table format that Hans and I have yet
> to sort out.
> 
> While that will not take long, it will still mean the beginning
> of next week at the earliest (because Hans is teaching in Brno).

we just found that out here! can we use the old binary for a while?

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From mojca.miklavec.lists at gmail.com  Tue Dec  9 12:54:28 2008
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Tue, 9 Dec 2008 12:54:28 +0100
Subject: [dev-context] Luatex beta 0.31 update warning
In-Reply-To: <493E58E9.9050000@elvenkind.com>
References: <4939550D.6000007@elvenkind.com> <493E4BCB.4000007@elvenkind.com>
	<493E58E9.9050000@elvenkind.com>
Message-ID: <6faad9f00812090354j4ef00a14wc25d12c3a2bcec12@mail.gmail.com>

On Tue, Dec 9, 2008 at 12:39 PM, Taco Hoekwater wrote:
>
> Hi all,
>
> Quick warning from me: if you update from the minimals this week,
> be prepared for some potential problems with opentype fonts in
> luatex. Because of the update of the embedded fontforge, there are
> some differences in the font table format that Hans and I have yet
> to sort out.

No problem. LuaTeX did not compile on most platforms anyway, so it
couldn't have affected too many people :) :) :)
(We only have the linux & freebsd binary there; in case of serious
problems it's no problem to revert back to the old version of LuaTeX
for those two platforms as well.)

Mojca

From pragma at wxs.nl  Tue Dec  9 13:01:23 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Tue, 09 Dec 2008 13:01:23 +0100
Subject: [dev-context] Luatex beta 0.31 update warning
In-Reply-To: <6faad9f00812090354j4ef00a14wc25d12c3a2bcec12@mail.gmail.com>
References: <4939550D.6000007@elvenkind.com>
	<493E4BCB.4000007@elvenkind.com>	<493E58E9.9050000@elvenkind.com>
	<6faad9f00812090354j4ef00a14wc25d12c3a2bcec12@mail.gmail.com>
Message-ID: <493E5E13.3070500@wxs.nl>

Mojca Miklavec wrote:

> No problem. LuaTeX did not compile on most platforms anyway, so it
> couldn't have affected too many people :) :) :)
> (We only have the linux & freebsd binary there; in case of serious
> problems it's no problem to revert back to the old version of LuaTeX
> for those two platforms as well.)

ok, just rollback then till we can do a synced mkiv/luatex update

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From sanjoy at MIT.EDU  Tue Dec  9 21:50:51 2008
From: sanjoy at MIT.EDU (Sanjoy Mahajan)
Date: Tue, 09 Dec 2008 15:50:51 -0500
Subject: [dev-context] testing lmodern 1.106 and context on Debian
In-Reply-To: Your message of "Tue, 09 Dec 2008 02:25:19 +0100."
	<20081209012519.GA399@gandalf.dynalias.org>
	(sfid-20081208_210903_224251_47B05A93) 
Message-ID: <E1LA9Xf-0000P8-Pp@approx.mit.edu>

I just installed the new lmodern and context packages from your 'next'
archive.  The context package passes my usual tests.

I don't have handy tests for plain tex or LaTeX but I have an idea for
how to develop a suite.  I want to check whether the idea has merit
before saying anything more.

-Sanjoy

`Until lions have their historians, tales of the hunt shall always
 glorify the hunters.'  --African Proverb

From preining at logic.at  Tue Dec  9 21:55:33 2008
From: preining at logic.at (Norbert Preining)
Date: Tue, 9 Dec 2008 21:55:33 +0100
Subject: [dev-context] testing lmodern 1.106 and context on Debian
In-Reply-To: <E1LA9Xf-0000P8-Pp@approx.mit.edu>
References: <20081209012519.GA399@gandalf.dynalias.org>
	<E1LA9Xf-0000P8-Pp@approx.mit.edu>
Message-ID: <20081209205533.GA5355@gandalf.dynalias.org>

Hi Sanjoy,

as usual, you get a special big thanks for being one of the best testers
I have here, thanks a lot! In German we would say you will get a "golden
washing machine" ;-)

On Tue, 09 Dec 2008, Sanjoy Mahajan wrote:
> I just installed the new lmodern and context packages from your 'next'
> archive.  The context package passes my usual tests.

That is fine. In fact this is my biggest concern since I don't expect
too many problems with TeX Live itself.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
KNOPTOFT (n.)
The mysterious fluff placed in your pockets by dry-cleaning firms.
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Wed Dec 10 10:49:29 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 10 Dec 2008 10:49:29 +0100
Subject: [dev-context] [Dev-luatex] Luatex beta 0.31.2
In-Reply-To: <4939550D.6000007@elvenkind.com>
References: <4939550D.6000007@elvenkind.com>
Message-ID: <493F90A9.7090903@elvenkind.com>



Hi,

I have just uploaded luatex 0.31.2, in the ongoing attempt to
fix build troubles.

* I have now received succesful build reports from

  * linux on i386
  * mingw32 (that is built by me)
  * freebsd on i386
  * solaris on sparc
  * osx (intel & ppc)

  so it seems the source should be more or less ok now.

Besides fixing building issues, this release has

  * A small fix for a crash that could happen when using
    external OCPs.

  * A fix in the format of fontforge.to_table output.
    (In 0.31.1 <font>.lookups was near-empty; the lookups
    were accidentally output as part of the gpos table).

The archives (just binaries this time, hopefully there will be a
source package later) can be downloaded from supelec as usual:

        http://foundry.supelec.fr/projects/luatex/

If you need the sources, please check out via anonymous svn:

  svn co svn://scm.foundry.supelec.fr/svn/luatex/tags/beta-0.31.2

Bugs and feature requests can be added to the issue tracker at

       http://tracker.luatex.org

Have fun,
Taco


From taco at elvenkind.com  Wed Dec 10 10:54:10 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 10 Dec 2008 10:54:10 +0100
Subject: [dev-context] Luatex beta 0.31.2
In-Reply-To: <493F90A9.7090903@elvenkind.com>
References: <4939550D.6000007@elvenkind.com> <493F90A9.7090903@elvenkind.com>
Message-ID: <493F91C2.7060802@elvenkind.com>


Hi,

To make sure I don't forget this time:

The font output format is still incompatible with current
context, so inclusion in the minimals will have to wait
until a new context beta next week.  The change is not
big, but enough to be fatal.

Best wishes,
Taco


Taco Hoekwater wrote:
> 
> Hi,
> 
> I have just uploaded luatex 0.31.2, in the ongoing attempt to
> fix build troubles.
> 
> * I have now received succesful build reports from
> 
>   * linux on i386
>   * mingw32 (that is built by me)
>   * freebsd on i386
>   * solaris on sparc
>   * osx (intel & ppc)
> 
>   so it seems the source should be more or less ok now.
> 
> Besides fixing building issues, this release has
> 
>   * A small fix for a crash that could happen when using
>     external OCPs.
> 
>   * A fix in the format of fontforge.to_table output.
>     (In 0.31.1 <font>.lookups was near-empty; the lookups
>     were accidentally output as part of the gpos table).
> 
> The archives (just binaries this time, hopefully there will be a
> source package later) can be downloaded from supelec as usual:
> 
>         http://foundry.supelec.fr/projects/luatex/
> 
> If you need the sources, please check out via anonymous svn:
> 
>   svn co svn://scm.foundry.supelec.fr/svn/luatex/tags/beta-0.31.2
> 
> Bugs and feature requests can be added to the issue tracker at
> 
>        http://tracker.luatex.org
> 
> Have fun,
> Taco
> 
> _______________________________________________
> dev-context mailing list
> dev-context at ntg.nl
> http://www.ntg.nl/mailman/listinfo/dev-context

From pragma at wxs.nl  Wed Dec 10 19:47:25 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 10 Dec 2008 19:47:25 +0100
Subject: [dev-context] [Dev-luatex] Luatex beta 0.31.2
In-Reply-To: <20081210165800.GA6208@khaled-laptop>
References: <4939550D.6000007@elvenkind.com> <493F90A9.7090903@elvenkind.com>
	<20081210165800.GA6208@khaled-laptop>
Message-ID: <49400EBD.3080107@wxs.nl>

Khaled Hosny wrote:
> On Wed, Dec 10, 2008 at 10:49:29AM +0100, Taco Hoekwater wrote:
>>   * A small fix for a crash that could happen when using
>>     external OCPs.
> 
> Thanks for the fix. Another issue, with external OCPs, luatex easily
> exceeds maximum open files limit on linux an segfaults. A 20 pages
> ConTeXt file has around 3000 /tmp/__aleph__{in,out}* open files. I had
> to increase the max. limit to get around this.

hm, why so many open files?


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From khaledhosny at eglug.org  Wed Dec 10 17:58:00 2008
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 10 Dec 2008 18:58:00 +0200
Subject: [dev-context] [Dev-luatex]  Luatex beta 0.31.2
In-Reply-To: <493F90A9.7090903@elvenkind.com>
References: <4939550D.6000007@elvenkind.com> <493F90A9.7090903@elvenkind.com>
Message-ID: <20081210165800.GA6208@khaled-laptop>

On Wed, Dec 10, 2008 at 10:49:29AM +0100, Taco Hoekwater wrote:
> 
>   * A small fix for a crash that could happen when using
>     external OCPs.

Thanks for the fix. Another issue, with external OCPs, luatex easily
exceeds maximum open files limit on linux an segfaults. A 20 pages
ConTeXt file has around 3000 /tmp/__aleph__{in,out}* open files. I had
to increase the max. limit to get around this.

Regards,


-- 
 Khaled Hosny
 Arabic localizer and member of Arabeyes.org team
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
URL: <http://www.ntg.nl/mailman/private/dev-context/attachments/20081210/78c61373/attachment.bin>

From taco at elvenkind.com  Thu Dec 11 10:30:25 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 11 Dec 2008 10:30:25 +0100
Subject: [dev-context] [Dev-luatex]  Luatex beta 0.31.2
In-Reply-To: <20081210165800.GA6208@khaled-laptop>
References: <4939550D.6000007@elvenkind.com> <493F90A9.7090903@elvenkind.com>
	<20081210165800.GA6208@khaled-laptop>
Message-ID: <4940DDB1.30209@elvenkind.com>



Khaled Hosny wrote:
> On Wed, Dec 10, 2008 at 10:49:29AM +0100, Taco Hoekwater wrote:
>>   * A small fix for a crash that could happen when using
>>     external OCPs.
> 
> Thanks for the fix. Another issue, with external OCPs, luatex easily
> exceeds maximum open files limit on linux an segfaults. A 20 pages
> ConTeXt file has around 3000 /tmp/__aleph__{in,out}* open files. I had
> to increase the max. limit to get around this.

There was a missing fclose() in run_external_ocp. Fixed in SVN.

Best wishes,
Taco

From taco at elvenkind.com  Thu Dec 11 16:43:38 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 11 Dec 2008 16:43:38 +0100
Subject: [dev-context] MetaPost 1.101 announcement
Message-ID: <4941352A.7050600@elvenkind.com>


The MetaPost team is happy to announce a new release of MetaPost:

----------------------------------------------------------------------
MetaPost 1.101
----------------------------------------------------------------------

The sources and a win32 package can be downloaded immediately from

  http://foundry.supelec.fr/projects/metapost/

This release will also be available from CTAN soon, and it will be
included in the next TeXLive. The source package should compile normally
on all systems that are capable of compiling a modern web2c-based TeX
distribution.

The win32 package is intended for texlive or a similar web2c-based
installation, and has been tested only with TeXLive 2008. These
executables will *not* work for miktex, sorry.

Of course, we welcome any comments (either good or bad) that you may
have. Simply replying to this message is fine, but see the bottom of
the message for a more formal way to report bugs and feature requests.

----------------------------------------------------------------------
What is new in MetaPost version 1.101:
----------------------------------------------------------------------

This is just a bugfix release. The following bugs / problem areas in
MetaPost 1.100 have been fixed / improved:

* TFM file generation was completely broken.

* The job name discovery on the commandline has been improved.

* Under some (rare) conditions MetaPost forgot to create a log file.

* Labels containing char0 were exported to PostScript incorrectly.

* On Windows, the DVI file that is the result from the internal call
  to TeX for btex .. etex lables was not deleted automatically.


----------------------------------------------------------------------
Legal notice / license / bug reports
----------------------------------------------------------------------

MetaPost is a system for producing graphics developed by John Hobby
at AT&T, based on Donald Knuth's Metafont.  The MetaPost home page
is http://tug.org/metapost.

MetaPost is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the
Free Software Foundation, either version 2 of the License, or (at your
option) any later version.

The MetaPost development project is currently hosted at Supelec,
https://foundry.supelec.fr/projects/metapost; please report bugs and
request enhancements through there if possible. Alternatively, you
can reach us through the <metapost at tug.org> mailing list as well.

Have fun!

Taco Hoekwater, for the MetaPost team, December 11, 2008.





--
http://tug.org/metapost/

From taco at elvenkind.com  Thu Dec 11 17:22:21 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 11 Dec 2008 17:22:21 +0100
Subject: [dev-context] [mp-implementors] MetaPost 1.101 announcement
In-Reply-To: <cf53c9500812110815i6cab7ab5p2068f94c73198978@mail.gmail.com>
References: <4941352A.7050600@elvenkind.com>
	<cf53c9500812110815i6cab7ab5p2068f94c73198978@mail.gmail.com>
Message-ID: <49413E3D.9090606@elvenkind.com>


Hi Troy,

Troy Henderson wrote:
> I built 1.101 in linux using the build.sh script and copied the mpost
> executable to my path.  However, running mpost complains in the
> following way:
> 
> Sorry, I can't find that mem file; will try PLAIN.

Obviously, it can't find the mpost.mem file. Likely causes:

* There is no mpost.mem file
* It exists but can't be found due to missing mktexlsr
* It exists but texmf.cnf can't be found
  (this happens is the binary is not close enough to
  its texmf/ tree).

You can run

 $ mpost --kpathsea-debug=7

to see what files mpost tries to open

Best wishes,
Taco

From thenders at gmail.com  Thu Dec 11 17:15:50 2008
From: thenders at gmail.com (Troy Henderson)
Date: Thu, 11 Dec 2008 10:15:50 -0600
Subject: [dev-context] [mp-implementors] MetaPost 1.101 announcement
In-Reply-To: <4941352A.7050600@elvenkind.com>
References: <4941352A.7050600@elvenkind.com>
Message-ID: <cf53c9500812110815i6cab7ab5p2068f94c73198978@mail.gmail.com>

I built 1.101 in linux using the build.sh script and copied the mpost
executable to my path.  However, running mpost complains in the
following way:

Sorry, I can't find that mem file; will try PLAIN.
I can't find the PLAIN mem file!

I'd appreciate any thoughts on how to fix this.

Thanks,

Troy

From khaledhosny at eglug.org  Sun Dec 21 19:02:39 2008
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sun, 21 Dec 2008 20:02:39 +0200
Subject: [dev-context] [Dev-luatex]  Luatex beta 0.31.2
In-Reply-To: <4940DDB1.30209@elvenkind.com>
References: <4939550D.6000007@elvenkind.com> <493F90A9.7090903@elvenkind.com>
	<20081210165800.GA6208@khaled-laptop>
	<4940DDB1.30209@elvenkind.com>
Message-ID: <20081221180239.GA9190@khaled-laptop>

On Thu, Dec 11, 2008 at 10:30:25AM +0100, Taco Hoekwater wrote:
> 
> 
> Khaled Hosny wrote:
> > On Wed, Dec 10, 2008 at 10:49:29AM +0100, Taco Hoekwater wrote:
> >>   * A small fix for a crash that could happen when using
> >>     external OCPs.
> > 
> > Thanks for the fix. Another issue, with external OCPs, luatex easily
> > exceeds maximum open files limit on linux an segfaults. A 20 pages
> > ConTeXt file has around 3000 /tmp/__aleph__{in,out}* open files. I had
> > to increase the max. limit to get around this.
> 
> There was a missing fclose() in run_external_ocp. Fixed in SVN.

This actually fixes half the issue, luatex were keeping to open
instants of each output file and one of each input file, now it keeps
one of each. It turned out that each input and output file is opened
twice because mkstemp() opens the newly created file and returns a file
descriptor. The attached patch, almost copied from Omega's omegabis.c
file, takes care of this.

Regards,


-- 
 Khaled Hosny
 Arabic localizer and member of Arabeyes.org team
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mkstemp.diff
Type: text/x-diff
Size: 1580 bytes
Desc: not available
URL: <http://www.ntg.nl/mailman/private/dev-context/attachments/20081221/66414d57/attachment.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
URL: <http://www.ntg.nl/mailman/private/dev-context/attachments/20081221/66414d57/attachment-0001.bin>

From patrick at gundla.ch  Sun Dec 21 20:42:29 2008
From: patrick at gundla.ch (Patrick Gundlach)
Date: Sun, 21 Dec 2008 20:42:29 +0100
Subject: [dev-context] cont-en.xml questions
Message-ID: <m21vw12u3e.fsf@levana.de>

Hi,

in cont-en.xml there are two places that are unusal


1) cd:inherit with optional="no":


  <cd:command name="setupbodyfontenvironment" file="font-ini.tex" category="font
s">
    <cd:sequence>
      <cd:string value="setupbodyfontenvironment"/>
    </cd:sequence>
    <cd:arguments>
      <cd:keywords n="1" optional="yes"> <!-- same as definebodyfontenvironment;
 you can define the whole commant to inherit, not only parameters-->
        <cd:inherit name="definebodyfontenvironment" n="1"/>
      </cd:keywords>
      <cd:keywords n="2" optional="no">
        <cd:inherit name="definebodyfontenvironment" n="2" optional="no"/>
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      </cd:keywords>
      <cd:assignments n="3" optional="yes" list="yes">
        <cd:inherit name="definebodyfontenvironment" n="3"/>
      </cd:assignments>
    </cd:arguments>
  </cd:command>


what does the optional="no" means in the second cd:inherit line? That
sounds redundant, the <cd:keywords element already has the optional
keyword. Can we remove this?

2) list=yes in cd:constant

  <cd:command name="definefonthandling" file="hand-ini.mkii"> 
    <cd:sequence>
      <cd:string value="definefonthandling"/>
    </cd:sequence>
    <cd:arguments>
      <cd:keywords n="1">
        <cd:constant type="cd:name"/>
      </cd:keywords>
      <cd:keywords n="2">
        <cd:constant type="cd:name" list="yes"/>
      </cd:keywords>
      ....

shouldn't the list="yes" be in the line above? That would match all the
other occurences in the xml file. Can we remove this?

Here is the suggested patch:

--- cont-en.xml-orig	2008-12-21 20:40:42.000000000 +0100
+++ cont-en.xml	2008-12-21 20:39:29.000000000 +0100
@@ -350,7 +350,7 @@
         <cd:inherit name="definebodyfontenvironment" n="1"/>
       </cd:keywords>
       <cd:keywords n="2" optional="no">
-        <cd:inherit name="definebodyfontenvironment" n="2" optional="no"/>
+        <cd:inherit name="definebodyfontenvironment" n="2"/>
       </cd:keywords>
       <cd:assignments n="3" optional="yes" list="yes">
         <cd:inherit name="definebodyfontenvironment" n="3"/>
@@ -10106,8 +10106,8 @@
       <cd:keywords n="1">
         <cd:constant type="cd:name"/>
       </cd:keywords>
-      <cd:keywords n="2">
-        <cd:constant type="cd:name" list="yes"/>
+      <cd:keywords n="2" list="yes">
+        <cd:constant type="cd:name"/>
       </cd:keywords>
       <cd:assignments n="3">
         <cd:parameter name="type">

And attached the current interface definition grammar.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: interface.rnc
Type: application/octet-stream
Size: 4054 bytes
Desc: relax ng grammar for context setup file
URL: <http://www.ntg.nl/mailman/private/dev-context/attachments/20081221/2128815e/attachment.obj>
-------------- next part --------------



Patrick


-- 
ConTeXt wiki and more: http://contextgarden.net

From patrick at gundla.ch  Sun Dec 21 20:49:54 2008
From: patrick at gundla.ch (Patrick Gundlach)
Date: Sun, 21 Dec 2008 20:49:54 +0100
Subject: [dev-context] current cont-en.xml
Message-ID: <m2wsdt1f6l.fsf@levana.de>

Hi,

which is the most current cont-en.xml? In the distribution? Or in the
context reference manual @supelec?

Patrick
-- 
ConTeXt wiki and more: http://contextgarden.net

From patrick at gundla.ch  Sun Dec 21 21:18:42 2008
From: patrick at gundla.ch (Patrick Gundlach)
Date: Sun, 21 Dec 2008 21:18:42 +0100
Subject: [dev-context] cont-en.xml / unique keys
Message-ID: <m2skoh1dul.fsf@levana.de>

Hi,

could we add some unique key to the commands? That way we could have a
more reliable way to know which command is which. It is useful when you
use cd:inherit and refer to a command, such as color (which can be an
environment or a standalone command) or commands with variants. It even
removes the need for the variant=".." which is not perfect (see
setupinterlinespace2 for example, it has variant 2 but there is no
setupinterlinespace2 with variant 1). 

example:

  <cd:command id="d1e311" name="setuplanguage" file="lang-ini.tex" category="lan
guage">
    <cd:sequence>
      <cd:string value="setuplanguage"/>
    </cd:sequence>
    <cd:arguments>
      <cd:keywords n="1">
        <cd:resolve name="language"/>
      </cd:keywords>
      <cd:assignments n="2" list="yes">
        <cd:inherit ref="d1e177" name="installlanguage" n="2"/>
      </cd:assignments>
    </cd:arguments>
  </cd:command>

  <cd:command id="d1e177" name="installlanguage" file="lang-ini.tex" category="l
anguage">
    <cd:sequence>
      <cd:string value="installlanguage"/>
    </cd:sequence>
    <cd:arguments>
      <cd:keywords n="1">
...
...


The attached file generates unique ids for the commands and puts them
into the cd:inerit elements (only those that are not set yet)

Patrick
-------------- next part --------------
A non-text attachment was scrubbed...
Name: add_id.xsl
Type: application/octet-stream
Size: 845 bytes
Desc: not available
URL: <http://www.ntg.nl/mailman/private/dev-context/attachments/20081221/f6f71de4/attachment.obj>
-------------- next part --------------


-- 
ConTeXt wiki and more: http://contextgarden.net

From pragma at wxs.nl  Sun Dec 21 23:07:42 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 21 Dec 2008 23:07:42 +0100
Subject: [dev-context] cont-en.xml / unique keys
In-Reply-To: <m2skoh1dul.fsf@levana.de>
References: <m2skoh1dul.fsf@levana.de>
Message-ID: <494EBE2E.9030102@wxs.nl>

Patrick Gundlach wrote:
> Hi,
> 
> could we add some unique key to the commands? That way we could have a
> more reliable way to know which command is which. It is useful when you
> use cd:inherit and refer to a command, such as color (which can be an
> environment or a standalone command) or commands with variants. It even
> removes the need for the variant=".." which is not perfect (see
> setupinterlinespace2 for example, it has variant 2 but there is no
> setupinterlinespace2 with variant 1). 
> 
> example:
> 
>   <cd:command id="d1e311" name="setuplanguage" file="lang-ini.tex" category="lan

why not using something

cd:command id=cd:<number>

which makes it 'easier' to refer to them when discussing them (i hate 
funny keys -)

btw 1: i made a simple variation of texshow using texlua as webserver, 
just for local usage in editors like i do in scite)

btw 2: we can use the id also for related info as the one users can 
enter on the wiki; i can even imagine that we use such id's in the wiki 
examples (so that we can filter <wikisection command=cd:number>... )

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Sun Dec 21 23:08:29 2008
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 21 Dec 2008 23:08:29 +0100
Subject: [dev-context] current cont-en.xml
In-Reply-To: <m2wsdt1f6l.fsf@levana.de>
References: <m2wsdt1f6l.fsf@levana.de>
Message-ID: <494EBE5D.4070403@wxs.nl>

Patrick Gundlach wrote:
> Hi,
> 
> which is the most current cont-en.xml? In the distribution? Or in the
> context reference manual @supelec?

the manual one (i might have a few local things but i can always diff 
them in)


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From patrick at gundla.ch  Mon Dec 22 13:58:05 2008
From: patrick at gundla.ch (Patrick Gundlach)
Date: Mon, 22 Dec 2008 13:58:05 +0100
Subject: [dev-context] cont-en.xml / unique keys
In-Reply-To: <494EBE2E.9030102@wxs.nl> (Hans Hagen's message of "Sun\,
	21 Dec 2008 23\:07\:42 +0100")
References: <m2skoh1dul.fsf@levana.de> <494EBE2E.9030102@wxs.nl>
Message-ID: <m2ocz41i5e.fsf@levana.de>

Hi,

>> example:
>>
>>   <cd:command id="d1e311" name="setuplanguage" file="lang-ini.tex" category="lan
>
> why not using something
>
> cd:command id=cd:<number>

OK, either way would be ok to me. As long as the keys are uniqe and they
don't change over time. 

How about this:

  <cd:command id="cd:10" name="definebodyfontenvironment" file="font-ini.tex" ca
tegory="fonts">
    <cd:sequence>
      <cd:string value="definebodyfontenvironment"/>
    </cd:sequence>
    <cd:arguments>
...
...
...


  <cd:command id="cd:11" name="setupbodyfontenvironment" file="font-ini.tex" cat
egory="fonts">
    <cd:sequence>
      <cd:string value="setupbodyfontenvironment"/>
    </cd:sequence>
    <cd:arguments>
      <cd:keywords n="1" optional="yes"> <!-- same as definebodyfontenvironment;
 you can define the whole commant to inherit, not only parameters-->
        <cd:inherit ref="cd:10" name="definebodyfontenvironment" n="1"/>
      </cd:keywords>
      <cd:keywords n="2" optional="no">
        <cd:inherit ref="cd:10" name="definebodyfontenvironment" n="2"/>
      </cd:keywords>
      <cd:assignments n="3" optional="yes" list="yes">
        <cd:inherit ref="cd:10" name="definebodyfontenvironment" n="3"/>
      </cd:assignments>
    </cd:arguments>
  </cd:command>



The attached version 2 xslt stylesheet creates these id/ref attributes if (and
only if) they are not existant. 

> btw 1: i made a simple variation of texshow using texlua as webserver,
> just for local usage in editors like i do in scite)

cool! Is it in the distribution?


Patrick
-- 
ConTeXt wiki and more: http://contextgarden.net
-------------- next part --------------
A non-text attachment was scrubbed...
Name: add_id.xsl
Type: application/octet-stream
Size: 1865 bytes
Desc: not available
URL: <http://www.ntg.nl/mailman/private/dev-context/attachments/20081222/c6cd35d9/attachment.obj>

From taco at elvenkind.com  Tue Dec 23 17:34:35 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 23 Dec 2008 17:34:35 +0100
Subject: [dev-context] cont-en.xml / unique keys
In-Reply-To: <m2skoh1dul.fsf@levana.de>
References: <m2skoh1dul.fsf@levana.de>
Message-ID: <4951131B.2010203@elvenkind.com>



Patrick Gundlach wrote:
> Hi,
> 
> (see setupinterlinespace2 for example, it has variant 2 but there is no
> setupinterlinespace2 with variant 1). 

IIRC, that trailing 2 in "setupinterlinespace2" was just added due to my
misunderstanding of how \showsetup works.

Best wishes,
Taco

From taco at elvenkind.com  Wed Dec 24 10:06:10 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 24 Dec 2008 10:06:10 +0100
Subject: [dev-context] MetaPost 1.102 announcement
Message-ID: <4951FB82.6080501@elvenkind.com>


The MetaPost team is happy to announce a new release of MetaPost:

----------------------------------------------------------------------
MetaPost 1.102
----------------------------------------------------------------------

The sources and a win32 package can be downloaded immediately from

  http://foundry.supelec.fr/projects/metapost/

This release will also be available from CTAN soon, and it will be
included in the next TeXLive. The source package should compile normally
on all systems that are capable of compiling a modern web2c-based TeX
distribution.

The win32 package is intended for texlive or a similar web2c-based
installation, and has been tested only with TeXLive 2008. These
executables will *not* work for miktex, sorry.

Of course, we welcome any comments (either good or bad) that you may
have. Simply replying to this message is fine, but see the bottom of
the message for a more formal way to report bugs and feature requests.

----------------------------------------------------------------------
What is new in MetaPost version 1.102:
----------------------------------------------------------------------

* Printing of 8-bit string characters has been fixed.

* In previous versions, TFM files and PFB fonts would not be read
  properly on big-endian machines (e.g. powerpc)

* The MetaPost distribution now contains "A Beginner's Guide to
  MetaPost for Creating High-Quality Graphics" by Troy Henderson
  and Stephan Hennig. This tutorial replaces Hobby's mpintro.tex.


----------------------------------------------------------------------
Legal notice / license / bug reports
----------------------------------------------------------------------

MetaPost is a system for producing graphics developed by John Hobby
at AT&T, based on Donald Knuth's Metafont.  The MetaPost home page
is http://tug.org/metapost.

MetaPost is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the
Free Software Foundation, either version 2 of the License, or (at your
option) any later version.

The MetaPost development project is currently hosted at Supelec,
https://foundry.supelec.fr/projects/metapost; please report bugs and
request enhancements through there if possible. Alternatively, you
can reach us through the <metapost at tug.org> mailing list as well.

Have fun!

Taco Hoekwater, for the MetaPost team, December 24, 2008.


From taco at elvenkind.com  Mon Dec 29 17:42:32 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 29 Dec 2008 17:42:32 +0100
Subject: [dev-context] Luatex beta 0.31.3
In-Reply-To: <4939550D.6000007@elvenkind.com>
References: <4939550D.6000007@elvenkind.com>
Message-ID: <4958FDF8.8020107@elvenkind.com>



Hi,

I have just uploaded luatex 0.31.3. This release has a bunch of
updates from the development trunk. It is intended as a bug
release for 0.31.2 only, there are no new features.

  * Closing of files opened by \externalocp.

  * Fix for a locale-related bug that make PDF generation fail
    with a "Parsing CFF Dict failed" message when including
    opentype fonts.

  * The included metapost is now version 1.102.

  * PDF rules in vertical modes in RL direction where output
    in the wrong direction

  * Fix for a crash on Apple fonts that contain a 'bsln' table.

  * The handling of the second argument to fontforge.open() was
    broken

  * The included libpng is now 1.2.34

  * Handling of ttc files on Windows was broken


The archives (just binaries this time, hopefully there will be a
source package later) can be downloaded from supelec as usual:

        http://foundry.supelec.fr/projects/luatex/

If you need the sources, please check out via anonymous svn:

  svn co svn://scm.foundry.supelec.fr/svn/luatex/tags/beta-0.31.3

Bugs and feature requests can be added to the issue tracker at

       http://tracker.luatex.org

Have fun,
Taco



From zhichu.chen at gmail.com  Tue Dec 30 05:09:31 2008
From: zhichu.chen at gmail.com (Zhichu Chen)
Date: Tue, 30 Dec 2008 12:09:31 +0800
Subject: [dev-context] [Dev-luatex] Luatex beta 0.31.3
In-Reply-To: <4958FDF8.8020107@elvenkind.com>
References: <4939550D.6000007@elvenkind.com> <4958FDF8.8020107@elvenkind.com>
Message-ID: <769ba7780812292009sfdfdb9k9ba3096a17e8afff@mail.gmail.com>

Hi Taco,

I downloaded the code and compiled it on my Leopard 10.5.5 with gcc
4.0.1 from Xcode,
and I got a lot of, almost every one of, objects that have no symbols:
=================================================================
ranlib: file: ../.libs/libfontforge.a(autotrace.o) has no symbols
ranlib: file: ../.libs/libfontforge.a(bezctx_ff.o) has no symbols
ranlib: file: ../.libs/libfontforge.a(http.o) has no symbols
ranlib: file: ../.libs/libfontforge.a(plugins.o) has no symbols
ranlib: file: ../.libs/libfontforge.a(print.o) has no symbols
ranlib: file: ../.libs/libfontforge.a(utils.o) has no symbols
ranlib ../.libs/libfontforge.a
ranlib: file: ../.libs/libfontforge.a(autotrace.o) has no symbols
ranlib: file: ../.libs/libfontforge.a(bezctx_ff.o) has no symbols
ranlib: file: ../.libs/libfontforge.a(http.o) has no symbols
ranlib: file: ../.libs/libfontforge.a(plugins.o) has no symbols
ranlib: file: ../.libs/libfontforge.a(print.o) has no symbols
ranlib: file: ../.libs/libfontforge.a(utils.o) has no symbols
creating ../libfontforge.la
(cd ../.libs && rm -f libfontforge.la && ln -s ../libfontforge.la
libfontforge.la)
sh -c "ar cru libff.a fontforge/fontforge/*.o fontforge/gutils/*.o
fontforge/Unicode/*.o ffdummies.o luafflib.o"
ranlib: file: libff.a(autotrace.o) has no symbols
ranlib: file: libff.a(bezctx_ff.o) has no symbols
ranlib: file: libff.a(http.o) has no symbols
ranlib: file: libff.a(plugins.o) has no symbols
ranlib: file: libff.a(print.o) has no symbols
ranlib: file: libff.a(utils.o) has no symbols
ranlib: file: libff.a(gimagereadgif.o) has no symbols
ranlib: file: libff.a(gimagereadjpeg.o) has no symbols
ranlib: file: libff.a(gimagereadpng.o) has no symbols
ranlib: file: libff.a(gimagereadtiff.o) has no symbols
ranlib: file: libff.a(gimagewritejpeg.o) has no symbols
ranlib: file: libff.a(gimagewritepng.o) has no symbols
ranlib: file: libff.a(gio.o) has no symbols
ranlib: file: libff.a(giofile.o) has no symbols
ranlib: file: libff.a(gioftp.o) has no symbols
ranlib: file: libff.a(giohosts.o) has no symbols
ranlib: file: libff.a(giothread.o) has no symbols
ranlib: file: libff.a(giotrans.o) has no symbols
ranlib libff.a
ranlib: file: libff.a(autotrace.o) has no symbols
ranlib: file: libff.a(bezctx_ff.o) has no symbols
ranlib: file: libff.a(http.o) has no symbols
ranlib: file: libff.a(plugins.o) has no symbols
ranlib: file: libff.a(print.o) has no symbols
ranlib: file: libff.a(utils.o) has no symbols
ranlib: file: libff.a(gimagereadgif.o) has no symbols
ranlib: file: libff.a(gimagereadjpeg.o) has no symbols
ranlib: file: libff.a(gimagereadpng.o) has no symbols
ranlib: file: libff.a(gimagereadtiff.o) has no symbols
ranlib: file: libff.a(gimagewritejpeg.o) has no symbols
ranlib: file: libff.a(gimagewritepng.o) has no symbols
ranlib: file: libff.a(gio.o) has no symbols
ranlib: file: libff.a(giofile.o) has no symbols
ranlib: file: libff.a(gioftp.o) has no symbols
ranlib: file: libff.a(giohosts.o) has no symbols
ranlib: file: libff.a(giothread.o) has no symbols
ranlib: file: libff.a(giotrans.o) has no symbols
=================================================================

I am a little scared. Would there be any potential risks or something?

On Tue, Dec 30, 2008 at 12:42 AM, Taco Hoekwater <taco at elvenkind.com> wrote:
>
>
> Hi,
>
> I have just uploaded luatex 0.31.3. This release has a bunch of
> updates from the development trunk. It is intended as a bug
> release for 0.31.2 only, there are no new features.
>
>  * Closing of files opened by \externalocp.
>
>  * Fix for a locale-related bug that make PDF generation fail
>    with a "Parsing CFF Dict failed" message when including
>    opentype fonts.
>
>  * The included metapost is now version 1.102.
>
>  * PDF rules in vertical modes in RL direction where output
>    in the wrong direction
>
>  * Fix for a crash on Apple fonts that contain a 'bsln' table.
>
>  * The handling of the second argument to fontforge.open() was
>    broken
>
>  * The included libpng is now 1.2.34
>
>  * Handling of ttc files on Windows was broken
>
>
> The archives (just binaries this time, hopefully there will be a
> source package later) can be downloaded from supelec as usual:
>
>        http://foundry.supelec.fr/projects/luatex/
>
> If you need the sources, please check out via anonymous svn:
>
>  svn co svn://scm.foundry.supelec.fr/svn/luatex/tags/beta-0.31.3
>
> Bugs and feature requests can be added to the issue tracker at
>
>       http://tracker.luatex.org
>
> Have fun,
> Taco
>
>
> _______________________________________________
> dev-luatex mailing list
> dev-luatex at ntg.nl
> http://www.ntg.nl/mailman/listinfo/dev-luatex
>



-- 
Best Regards
Chen
----------------------------------------------------------------

          Zhi-chu Chen | Shanghai Synchrotron Radiation Facility
         No. 2019 | Jialuo Rd. | Jiading | Shanghai | P.R. China
             tel: 086 21 5955 3405 | zhichu.chen.googlepages.com
                                               | www.sinap.ac.cn
----------------------------------------------------------------

From taco at elvenkind.com  Tue Dec 30 09:05:15 2008
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 30 Dec 2008 09:05:15 +0100
Subject: [dev-context] [Dev-luatex] Luatex beta 0.31.3
In-Reply-To: <769ba7780812292009sfdfdb9k9ba3096a17e8afff@mail.gmail.com>
References: <4939550D.6000007@elvenkind.com> <4958FDF8.8020107@elvenkind.com>
	<769ba7780812292009sfdfdb9k9ba3096a17e8afff@mail.gmail.com>
Message-ID: <4959D63B.9060800@elvenkind.com>

Zhichu Chen wrote:
> Hi Taco,
> 
> I downloaded the code and compiled it on my Leopard 10.5.5 with gcc
> 4.0.1 from Xcode, and I got a lot of, almost every one of, 

Not even close to all of them, don't worry :)

It is a small error on my side (every object file should define at
least one symbol according to the C specification).

I'll fix this for the next release, but it is a completely harmless
warning message/error. Nothing is wrong with your executable.

Best wishes,
Taco

