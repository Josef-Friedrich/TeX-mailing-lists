From patrick at gundla.ch  Fri Jul  6 13:20:09 2012
From: patrick at gundla.ch (Patrick Gundlach)
Date: Fri, 6 Jul 2012 13:20:09 +0200
Subject: [luatex] luaotfload maintenance
In-Reply-To: <372FB8C9-4F51-4B00-9DB2-5E533F4C54E6@googlemail.com>
References: <372FB8C9-4F51-4B00-9DB2-5E533F4C54E6@googlemail.com>
Message-ID: <8E7A5D8E-7671-4FB6-B878-630C1C69E980@gundla.ch>

Hi Vafa,

> By the way, I can maintain luaotfload code if and only if no one else will be willing to do that.

Did you, by chance, already have a look into the code?

Patrick



From vafakhlg at gmail.com  Fri Jul  6 13:43:12 2012
From: vafakhlg at gmail.com (Vafa Khalighi)
Date: Fri, 6 Jul 2012 21:43:12 +1000
Subject: [luatex] luaotfload maintenance
In-Reply-To: <8E7A5D8E-7671-4FB6-B878-630C1C69E980@gundla.ch>
References: <372FB8C9-4F51-4B00-9DB2-5E533F4C54E6@googlemail.com>
 <8E7A5D8E-7671-4FB6-B878-630C1C69E980@gundla.ch>
Message-ID: <CAHor6nXb0QCCi_rBbk-NzUNGKGLow2cocL0Ha7TABrFogLyFyw@mail.gmail.com>

No, I have not.

On Fri, Jul 6, 2012 at 9:20 PM, Patrick Gundlach <patrick at gundla.ch> wrote:

> Hi Vafa,
>
> > By the way, I can maintain luaotfload code if and only if no one else
> will be willing to do that.
>
> Did you, by chance, already have a look into the code?
>
> Patrick
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/luatex/attachments/20120706/73cc471c/attachment.html>

From khaledhosny at eglug.org  Sat Jul  7 15:39:17 2012
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sat, 7 Jul 2012 15:39:17 +0200
Subject: [luatex] Attempt to build font name database fails with app
	crash
In-Reply-To: <20120507091055.GB2407@khaled-laptop>
References: <4FA59805.6000502@philo.de> <1i4td7o2mqht9$.dlg@nililand.de>
 <4FA6B20B.3030802@philo.de>
 <CALBOmsZr__M--PiKyE7DfEEM7GaVJuyfFe0dpYYL2Wk8Ga1c7Q@mail.gmail.com>
 <4FA77ED0.7030707@philo.de>
 <CALBOmsaZ8b6uv9-iocBDsk6VX-PXexyarm+Pk5RVaUXzv5QO9A@mail.gmail.com>
 <CALBOmsY2YcTcXF1N2pV-wuJTaV5HnzA-xgbJkUXyPVktsV9iAg@mail.gmail.com>
 <20120507091055.GB2407@khaled-laptop>
Message-ID: <20120707133917.GA6618@khaled-laptop>

On Mon, May 07, 2012 at 11:10:55AM +0200, Khaled Hosny wrote:
> On Mon, May 07, 2012 at 10:09:33AM +0200, Mojca Miklavec wrote:
> > On Mon, May 7, 2012 at 9:54 AM, Mojca Miklavec wrote:
> > >
> > > ? ?http://www.webpagepublicity.com/free-fonts/o/Orlando.ttf
> > 
> > If I try to install the font on my Mac, it cries out with
> >    1 minor problem was found. Proceed with caution.
> >    2 serious errors were found. Do not use these fonts.
> > 
> > The errors seem to be in 'post' and 'kern' tables, the warnings in 'sfnt'.
> > 
> > A simple example like
> > 
> > \starttext
> > \font\a=Orlando.ttf \a abc
> > \stoptext
> > 
> > crashes on my computer as well:
> > 
> > fonts           > otf loading > loading: Orlando.ttf (hash: orlando)
> > mtx-context     | fatal error: no return code, message: luatex:
> > execution interrupted
> > 
> > So: the font is definitely buggy, but it would be nice if luatex would
> > catch the problem and refuse to load the font instead of crashing.
> 
> The crash is in fontforge part of the font loader, the same fonts also
> crashes current FontForge in the same place (bad font encoding, it
> seems).

Fixed in FontForge, and back-ported to luatex, r4452.

Regards,
 Khaled

From dirk.laurie at gmail.com  Sun Jul 15 10:36:13 2012
From: dirk.laurie at gmail.com (Dirk Laurie)
Date: Sun, 15 Jul 2012 10:36:13 +0200
Subject: [luatex] Should lualatex have pdflatex or xelatex compatibility?
Message-ID: <CABcj=tmPcnNarrNd5+g+_5Teex6iHC6E6Gqk+aMveqvQ=Qae0A@mail.gmail.com>

Here is an example where lualatex behaves like pdflatex when
it would have been nicer to behave like xelatex.

On the following file:

\documentclass{article}
\usepackage{hyperref,biblatex}
\bibliography{refs}
\begin{document}
This is a Latex reference \cite{latex2012}.
\end{document}

lualatex produces this message:

LuaTeX warning (dest): name{cite.0 at latex2012} has been referenced but does
not exist, replaced by a fixed one

Similarly, pdflatex:

pdfTeX warning (dest): name{cite.0 at latex2012} has been referenced but does not
exist, replaced by a fixed one

Running the program a second time does not help.

But xelatex:

Package hyperref Warning: Rerun to get /PageLabels entry.

and when running it a second time there is no warning.

From heiko.oberdiek at googlemail.com  Sun Jul 15 12:24:52 2012
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Sun, 15 Jul 2012 12:24:52 +0200
Subject: [luatex] Should lualatex have pdflatex or xelatex compatibility?
In-Reply-To: <CABcj=tmPcnNarrNd5+g+_5Teex6iHC6E6Gqk+aMveqvQ=Qae0A@mail.gmail.com>
References: <CABcj=tmPcnNarrNd5+g+_5Teex6iHC6E6Gqk+aMveqvQ=Qae0A@mail.gmail.com>
Message-ID: <20120715102452.GA9072@oberdiek.my-fqdn.de>

On Sun, Jul 15, 2012 at 10:36:13AM +0200, Dirk Laurie wrote:

> Here is an example where lualatex behaves like pdflatex when
> it would have been nicer to behave like xelatex.
> 
> On the following file:
> 
> \documentclass{article}
> \usepackage{hyperref,biblatex}
> \bibliography{refs}
> \begin{document}
> This is a Latex reference \cite{latex2012}.
> \end{document}
> 
> lualatex produces this message:
> 
> LuaTeX warning (dest): name{cite.0 at latex2012} has been referenced but does
> not exist, replaced by a fixed one
> 
> Similarly, pdflatex:
> 
> pdfTeX warning (dest): name{cite.0 at latex2012} has been referenced but does not
> exist, replaced by a fixed one
> 
> Running the program a second time does not help.
> 
> But xelatex:
> 
> Package hyperref Warning: Rerun to get /PageLabels entry.
> 
> and when running it a second time there is no warning.

These are complete different matters. XeTeX *needs* two runs
to get the page labels right. In pdfTeX or LuaTeX the
page label settings are done at the end of the compile run.
XeTeX (or TeX) do not provide the possibility to emit
\specials *after* the last DVI page. But *all* pages are
needed to know what \thepage for all pages look like.

Why there is a warning that a destination name is undefined,
I do not know, because it works for me without this warning
(biblatex 2011/11/13 v1.7).

Yours sincerely
  Heiko Oberdiek

From dirk.laurie at gmail.com  Wed Jul 18 11:59:41 2012
From: dirk.laurie at gmail.com (Dirk Laurie)
Date: Wed, 18 Jul 2012 11:59:41 +0200
Subject: [luatex] Package luamplib
Message-ID: <CABcj=tncbyLrUrNXhKrjOf=HfdHbwy6s1i+XxwqnDXhUND+otg@mail.gmail.com>

I presume the MetaPost / LuaTeX versions are not compatible.
What's the easiest solution, short of "Update your whole
installation to the latest TeXLive"?

\documentclass{article}
\usepackage{luamplib}
\begin{document}
\begin{mplibcode}
beginfig(1);
fill fullcircle scaled 5cm withcolor green;
draw fullcircle scaled 4.5cm;
endfig;
\end{mplibcode}
\end{document}

I get:

This is LuaTeX, Version beta-0.65.0-2011041019 (rev 4033)
...
luamplib: This is MetaPost, Version 1.503
 (plain.mp
>> $Id
! Isolated expression.
<to be read again>
                   :
l.1  $Id:
          plain.mp,v 1.3 2005/04/28 06:45:21 taco Exp $
! Extra tokens will be flushed.
<to be read again>

etc.

From schultzk at gmx.net  Wed Jul 18 23:02:38 2012
From: schultzk at gmx.net (Keith J. Schultz)
Date: Wed, 18 Jul 2012 23:02:38 +0200
Subject: [luatex] Package luamplib
In-Reply-To: <CABcj=tncbyLrUrNXhKrjOf=HfdHbwy6s1i+XxwqnDXhUND+otg@mail.gmail.com>
References: <CABcj=tncbyLrUrNXhKrjOf=HfdHbwy6s1i+XxwqnDXhUND+otg@mail.gmail.com>
Message-ID: <7CC11686-7F6E-4F55-AB21-05CDC9292934@gmx.net>

Hi Dirk,

my Texlive 2011 was at version 0.70.?

just try updating you TexLive 2011.

Of course going TexLive 2012 is an option.

regards
	Keith

Am 18.07.2012 um 11:59 schrieb Dirk Laurie:

> I presume the MetaPost / LuaTeX versions are not compatible.
> What's the easiest solution, short of "Update your whole
> installation to the latest TeXLive"?
> 
> \documentclass{article}
> \usepackage{luamplib}
> \begin{document}
> \begin{mplibcode}
> beginfig(1);
> fill fullcircle scaled 5cm withcolor green;
> draw fullcircle scaled 4.5cm;
> endfig;
> \end{mplibcode}
> \end{document}
> 
> I get:
> 
> This is LuaTeX, Version beta-0.65.0-2011041019 (rev 4033)
> ...
> luamplib: This is MetaPost, Version 1.503
> (plain.mp
>>> $Id
> ! Isolated expression.
> <to be read again>
>                   :
> l.1  $Id:
>          plain.mp,v 1.3 2005/04/28 06:45:21 taco Exp $
> ! Extra tokens will be flushed.
> <to be read again>
> 
> etc.



From reinhard.kotucha at web.de  Wed Jul 18 23:17:15 2012
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Wed, 18 Jul 2012 23:17:15 +0200
Subject: [luatex] Package luamplib
In-Reply-To: <CABcj=tncbyLrUrNXhKrjOf=HfdHbwy6s1i+XxwqnDXhUND+otg@mail.gmail.com>
References: <CABcj=tncbyLrUrNXhKrjOf=HfdHbwy6s1i+XxwqnDXhUND+otg@mail.gmail.com>
Message-ID: <20487.10203.841708.434347@zaphod.ms25.net>

On 2012-07-18 at 11:59:41 +0200, Dirk Laurie wrote:

 > I presume the MetaPost / LuaTeX versions are not compatible.

AFAIK mplib is linked statically to the LuaTeX binary, hence it should
be sufficient to upgrade LuaTeX.  Binaries for various platforms are
available at the TeX Live repository:

  http://www.tug.org/svn/texlive

BTW, the problem you encountered seems to be caused by a bug rather
than a compatibility problem.  Obviously the comment character was
ignored.  However, it's fixed already in newer releases.

 > What's the easiest solution, short of "Update your whole
 > installation to the latest TeXLive"?

Please note that in order to upgrade from TL-2011 to TL-2012 you don't
have to install everything from scratch anymore:

  http://tug.org/texlive/upgrade.html

You could probably install a newer LuaTeX binary into your current
installation, but I fear that everything you do beyond the package
manager's neck will cause trouble former or later.  In particular,
if your system is inconsistent, nobody can reproduce your problems.

Unless disk space is scarce or internet access is slow, I strongly
recommend to bite the bullet and do a clean upgrade.

Regards,
  Reinhard


 > \documentclass{article}
 > \usepackage{luamplib}
 > \begin{document}
 > \begin{mplibcode}
 > beginfig(1);
 > fill fullcircle scaled 5cm withcolor green;
 > draw fullcircle scaled 4.5cm;
 > endfig;
 > \end{mplibcode}
 > \end{document}
 > 
 > I get:
 > 
 > This is LuaTeX, Version beta-0.65.0-2011041019 (rev 4033)
 > ...
 > luamplib: This is MetaPost, Version 1.503
 >  (plain.mp
 > >> $Id
 > ! Isolated expression.
 > <to be read again>
 >                    :
 > l.1  $Id:
 >           plain.mp,v 1.3 2005/04/28 06:45:21 taco Exp $
 > ! Extra tokens will be flushed.
 > <to be read again>
 > 
 > etc.

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From dirk.laurie at gmail.com  Thu Jul 19 21:59:23 2012
From: dirk.laurie at gmail.com (Dirk Laurie)
Date: Thu, 19 Jul 2012 21:59:23 +0200
Subject: [luatex] Package luamplib
In-Reply-To: <20487.10203.841708.434347@zaphod.ms25.net>
References: <CABcj=tncbyLrUrNXhKrjOf=HfdHbwy6s1i+XxwqnDXhUND+otg@mail.gmail.com>
 <20487.10203.841708.434347@zaphod.ms25.net>
Message-ID: <CABcj=t=HLoePanma4dxdmT_967NVzQebw1V2T3nh4km2GYmQGA@mail.gmail.com>

2012/7/18 Reinhard Kotucha <reinhard.kotucha at web.de>:

>
> BTW, the problem you encountered seems to be caused by a bug rather
> than a compatibility problem.  Obviously the comment character was
> ignored.  However, it's fixed already in newer releases.
>
>  > What's the easiest solution, short of "Update your whole
>  > installation to the latest TeXLive"?
>
> Please note that in order to upgrade from TL-2011 to TL-2012 you don't
> have to install everything from scratch anymore:
>
>   http://tug.org/texlive/upgrade.html
>
> You could probably install a newer LuaTeX binary into your current
> installation, but I fear that everything you do beyond the package
> manager's neck will cause trouble former or later.  In particular,
> if your system is inconsistent, nobody can reproduce your problems.
>

Can you believe it, Ubuntu 12.04 LTS "Precise Pangolin" released
April 2012 ships with TeXLive 2009.

Dirk

From zg7s at eservices.virginia.edu  Thu Jul 19 22:07:15 2012
From: zg7s at eservices.virginia.edu (Zvi Gilboa)
Date: Thu, 19 Jul 2012 16:07:15 -0400
Subject: [luatex] Package luamplib
In-Reply-To: <CABcj=t=HLoePanma4dxdmT_967NVzQebw1V2T3nh4km2GYmQGA@mail.gmail.com>
References: <CABcj=tncbyLrUrNXhKrjOf=HfdHbwy6s1i+XxwqnDXhUND+otg@mail.gmail.com>
 <20487.10203.841708.434347@zaphod.ms25.net>
 <CABcj=t=HLoePanma4dxdmT_967NVzQebw1V2T3nh4km2GYmQGA@mail.gmail.com>
Message-ID: <500868F3.6080103@eservices.virginia.edu>

This is indeed embarrassing, however in my humble opinion, TeXLive 
should not be shipping with Ubuntu at all, as it is the source of many 
potential disasters.  One trivial example: suppose that you use a 
different TeX distribution, or simply opt for a "manual" installation of 
(the current version of) TeXLive, as many people (myself included)do.  
You might then decide to install a random TeX-related package -- be it 
an editor, a font, or anything else for that matter -- just to realize 
that Ubuntu thinks it should now install the whole TeX-system shebang 
for you...

Best regards,
Zvi Gilboa






On 07/19/2012 03:59 PM, Dirk Laurie wrote:
> 2012/7/18 Reinhard Kotucha <reinhard.kotucha at web.de>:
>
>> BTW, the problem you encountered seems to be caused by a bug rather
>> than a compatibility problem.  Obviously the comment character was
>> ignored.  However, it's fixed already in newer releases.
>>
>>   > What's the easiest solution, short of "Update your whole
>>   > installation to the latest TeXLive"?
>>
>> Please note that in order to upgrade from TL-2011 to TL-2012 you don't
>> have to install everything from scratch anymore:
>>
>>    http://tug.org/texlive/upgrade.html
>>
>> You could probably install a newer LuaTeX binary into your current
>> installation, but I fear that everything you do beyond the package
>> manager's neck will cause trouble former or later.  In particular,
>> if your system is inconsistent, nobody can reproduce your problems.
>>
> Can you believe it, Ubuntu 12.04 LTS "Precise Pangolin" released
> April 2012 ships with TeXLive 2009.
>
> Dirk


From Robin.Fairbairns at cl.cam.ac.uk  Thu Jul 19 22:48:24 2012
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Thu, 19 Jul 2012 21:48:24 +0100
Subject: [luatex] Package luamplib
In-Reply-To: Your message of Thu, 19 Jul 2012 21:59:23 +0200.
 <CABcj=t=HLoePanma4dxdmT_967NVzQebw1V2T3nh4km2GYmQGA@mail.gmail.com>
Message-ID: <2505.1342730904@cl.cam.ac.uk>

Dirk Laurie <dirk.laurie at gmail.com> wrote:

> 2012/7/18 Reinhard Kotucha <reinhard.kotucha at web.de>:
> 
> > BTW, the problem you encountered seems to be caused by a bug rather
> > than a compatibility problem.  Obviously the comment character was
> > ignored.  However, it's fixed already in newer releases.
> >
> >  > What's the easiest solution, short of "Update your whole
> >  > installation to the latest TeXLive"?
> >
> > Please note that in order to upgrade from TL-2011 to TL-2012 you don't
> > have to install everything from scratch anymore:
> >
> >   http://tug.org/texlive/upgrade.html
> >
> > You could probably install a newer LuaTeX binary into your current
> > installation, but I fear that everything you do beyond the package
> > manager's neck will cause trouble former or later.  In particular,
> > if your system is inconsistent, nobody can reproduce your problems.
> 
> Can you believe it, Ubuntu 12.04 LTS "Precise Pangolin" released
> April 2012 ships with TeXLive 2009.

i know that.  i have such a system ... with a tl2012 installation on a
/local directory.

we're told that U12.10 will ship with tl2012, but fedora's tempting.
(unfortunately i don't trust my creaking old brain to look after a
system that's no longer supported by the department -- it's centos or
ubuntu here or you're on your own.  centos has frozen a similarly
ancient version of tl.)

robin the grumpy tex user under linux

From khaledhosny at eglug.org  Thu Jul 19 22:56:05 2012
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Thu, 19 Jul 2012 22:56:05 +0200
Subject: [luatex] Package luamplib
In-Reply-To: <CABcj=t=HLoePanma4dxdmT_967NVzQebw1V2T3nh4km2GYmQGA@mail.gmail.com>
References: <CABcj=tncbyLrUrNXhKrjOf=HfdHbwy6s1i+XxwqnDXhUND+otg@mail.gmail.com>
 <20487.10203.841708.434347@zaphod.ms25.net>
 <CABcj=t=HLoePanma4dxdmT_967NVzQebw1V2T3nh4km2GYmQGA@mail.gmail.com>
Message-ID: <20120719205605.GB2227@khaled-laptop>

On Thu, Jul 19, 2012 at 09:59:23PM +0200, Dirk Laurie wrote:
> 2012/7/18 Reinhard Kotucha <reinhard.kotucha at web.de>:
> 
> >
> > BTW, the problem you encountered seems to be caused by a bug rather
> > than a compatibility problem.  Obviously the comment character was
> > ignored.  However, it's fixed already in newer releases.
> >
> >  > What's the easiest solution, short of "Update your whole
> >  > installation to the latest TeXLive"?
> >
> > Please note that in order to upgrade from TL-2011 to TL-2012 you don't
> > have to install everything from scratch anymore:
> >
> >   http://tug.org/texlive/upgrade.html
> >
> > You could probably install a newer LuaTeX binary into your current
> > installation, but I fear that everything you do beyond the package
> > manager's neck will cause trouble former or later.  In particular,
> > if your system is inconsistent, nobody can reproduce your problems.
> >
> 
> Can you believe it, Ubuntu 12.04 LTS "Precise Pangolin" released
> April 2012 ships with TeXLive 2009.

Ubuntu does not really package TeXLive, they just pull whatever Debian
packages, and the Debian TeX packaging team is very small. That being
said, TeXLive 2012 is have been in Debian even before it is officially
released, so next Ububtu should have it.

http://packages.ubuntu.com/quantal/texlive

Regards,
 Khaled

From reinhard.kotucha at web.de  Fri Jul 20 00:40:06 2012
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Fri, 20 Jul 2012 00:40:06 +0200
Subject: [luatex] Package luamplib
In-Reply-To: <500868F3.6080103@eservices.virginia.edu>
References: <CABcj=tncbyLrUrNXhKrjOf=HfdHbwy6s1i+XxwqnDXhUND+otg@mail.gmail.com>
 <20487.10203.841708.434347@zaphod.ms25.net>
 <CABcj=t=HLoePanma4dxdmT_967NVzQebw1V2T3nh4km2GYmQGA@mail.gmail.com>
 <500868F3.6080103@eservices.virginia.edu>
Message-ID: <20488.36038.718235.478615@zaphod.ms25.net>

On 2012-07-19 at 16:07:15 -0400, Zvi Gilboa wrote:

 > This is indeed embarrassing, however in my humble opinion, TeXLive 
 > should not be shipping with Ubuntu at all, as it is the source of many 
 > potential disasters.  One trivial example: suppose that you use a 
 > different TeX distribution, or simply opt for a "manual" installation of 
 > (the current version of) TeXLive, as many people (myself included)do.  
 > You might then decide to install a random TeX-related package -- be it 
 > an editor, a font, or anything else for that matter -- just to realize 
 > that Ubuntu thinks it should now install the whole TeX-system shebang 
 > for you...

Sorry, I disagree.  TeX Live is only one of tens of thousands of
packages provided by Linux distributions.  You installed TeX Live
yourself probably because you need new features.  But for the majority
of users TeX is only one program of many and the easiest way to
acquire it is to install what the Linux distribution provides.

The dependency problems you described exist with many other programs
too.  Suppose you have CUPS installed but want to maintain ghostscript
yourself.  I think that Linux distributors should provide everything
they can maintain.

TeX Live doesn't interfere with another release installed somewhere
else on a particular system.  Unless disk space is a severe problem,
it doesn't matter very much what the package manager pulls in.

BTW, I'm using Gentoo and CentOS and can't confirm that TeX Live is
pulled in by the package managers when I install a font, an editor, or
something alike.  AucTeX might be an exception because it depends on
both, a text editor and a TeX system.

Regards,
  Reinhard


 > Best regards,
 > Zvi Gilboa
 > 
 > 
 > On 07/19/2012 03:59 PM, Dirk Laurie wrote:
 > > 2012/7/18 Reinhard Kotucha <reinhard.kotucha at web.de>:
 > >
 > >> BTW, the problem you encountered seems to be caused by a bug rather
 > >> than a compatibility problem.  Obviously the comment character was
 > >> ignored.  However, it's fixed already in newer releases.
 > >>
 > >>   > What's the easiest solution, short of "Update your whole
 > >>   > installation to the latest TeXLive"?
 > >>
 > >> Please note that in order to upgrade from TL-2011 to TL-2012 you don't
 > >> have to install everything from scratch anymore:
 > >>
 > >>    http://tug.org/texlive/upgrade.html
 > >>
 > >> You could probably install a newer LuaTeX binary into your current
 > >> installation, but I fear that everything you do beyond the package
 > >> manager's neck will cause trouble former or later.  In particular,
 > >> if your system is inconsistent, nobody can reproduce your problems.
 > >>
 > > Can you believe it, Ubuntu 12.04 LTS "Precise Pangolin" released
 > > April 2012 ships with TeXLive 2009.
 > >
 > > Dirk
 > 

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From preining at logic.at  Fri Jul 20 00:54:48 2012
From: preining at logic.at (Norbert Preining)
Date: Fri, 20 Jul 2012 07:54:48 +0900
Subject: [luatex] Package luamplib
In-Reply-To: <500868F3.6080103@eservices.virginia.edu>
 <CABcj=t=HLoePanma4dxdmT_967NVzQebw1V2T3nh4km2GYmQGA@mail.gmail.com>
References: <CABcj=tncbyLrUrNXhKrjOf=HfdHbwy6s1i+XxwqnDXhUND+otg@mail.gmail.com>
 <20487.10203.841708.434347@zaphod.ms25.net>
 <CABcj=t=HLoePanma4dxdmT_967NVzQebw1V2T3nh4km2GYmQGA@mail.gmail.com>
 <500868F3.6080103@eservices.virginia.edu>
 <CABcj=tncbyLrUrNXhKrjOf=HfdHbwy6s1i+XxwqnDXhUND+otg@mail.gmail.com>
 <20487.10203.841708.434347@zaphod.ms25.net>
 <CABcj=t=HLoePanma4dxdmT_967NVzQebw1V2T3nh4km2GYmQGA@mail.gmail.com>
Message-ID: <20120719225448.GD7977@gamma.logic.tuwien.ac.at>

In addition to all the emails about the Ubuntu/TeX Live topic
some words from me, the Debian TeX Live maintainer, and thus
the responsible also for Ubuntu, since Ubuntu only pulls from
Debian.

On Do, 19 Jul 2012, Dirk Laurie wrote:
> Can you believe it, Ubuntu 12.04 LTS "Precise Pangolin" released
> April 2012 ships with TeXLive 2009.

Yes, I was 1 month late, I know. If anyone would have stepped up
6 months earlier and offered a bit help in testing etc, it might
have worked out for 12.04, but alas, it still is a one-man-show
when it comes to the packaging. 

On Do, 19 Jul 2012, Zvi Gilboa wrote:
> This is indeed embarrassing, however in my humble opinion, TeXLive  
> should not be shipping with Ubuntu at all, as it is the source of many  
> potential disasters.  One trivial example: suppose that you use a  

That is rubbish, as Reinhard already explained in detail.

First of all let me one thing completely clear: I *honestly* believe
that *most* people whining about the TL2009 being so old have no
*actual* need for tl2012 or so, since the write normal LaTeX documents
that work even with TL2005. It is only their infinite upgraditis
or however it is called.

I, as the packager, still used for long time 2009 since all I do,
and that is *a*lot* (private, research), is done in LaTeX and works
all well with 2009.

Ok, end of the ranting. Going back to real.

> different TeX distribution, or simply opt for a "manual" installation of  
> (the current version of) TeXLive, as many people (myself included)do.   
> You might then decide to install a random TeX-related package -- be it  
> an editor, a font, or anything else for that matter -- just to realize  
> that Ubuntu thinks it should now install the whole TeX-system shebang  
> for you...

As long as there is no disk space shortage, that is no problem as long
as you set up the PATH properly (as explained in the manual).

If there is a problem with diskspace you should create an equivs package,
as described on the web page tug.org/texlive/debian.html

So all settled, unless we assume that people are incapable of reading
the documentation.

Best wishes

Norbert
------------------------------------------------------------------------
Norbert Preining            preining@{jaist.ac.jp, logic.at, debian.org}
JAIST, Japan                                 TeX Live & Debian Developer
DSA: 0x09C5B094   fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
------------------------------------------------------------------------
DUGGLEBY (n.)
The person in front of you in the supermarket queue who has just
unloaded a bulging trolley on to the conveyor belt and is now in the
process of trying to work out which pocket they left their cheque book
in, and indeed which pair of trousers.
			--- Douglas Adams, The Meaning of Liff

From reinhard.kotucha at web.de  Fri Jul 20 02:15:22 2012
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Fri, 20 Jul 2012 02:15:22 +0200
Subject: [luatex] Package luamplib
In-Reply-To: <2505.1342730904@cl.cam.ac.uk>
References: <CABcj=t=HLoePanma4dxdmT_967NVzQebw1V2T3nh4km2GYmQGA@mail.gmail.com>
 <2505.1342730904@cl.cam.ac.uk>
Message-ID: <20488.41754.191789.711805@zaphod.ms25.net>

On 2012-07-19 at 21:48:24 +0100, Robin Fairbairns wrote:

 > we're told that U12.10 will ship with tl2012, but fedora's
 > tempting.  (unfortunately i don't trust my creaking old brain to
 > look after a system that's no longer supported by the department --
 > it's centos or ubuntu here or you're on your own.  centos has
 > frozen a similarly ancient version of tl.)

I'm using CentOS at work.  AFAIR they switched from teTeX to TL-2007
last year (CentOs 6).  Though this TL version is ancient indeed, I had
the impression that the rest of the distribution is more up-to-date.
Don't know why they decided to provide such a fossil.

On the other hand I think that an enterprise grade Linux distribution
deserves an enterprise grade TeX Live installation.

Nothing easier than that.  I installed TeX Live on the server and my
colleagues can use it directly without the need to install or update
anything.  Unix users have to mount it via NFS and add the bin
directory to PATH, Windows users have to associate \\server\tex , for
example, with a drive letter, and click w32-client.bat .  That's all.

The nice thing is that I can add custom macro packages, Perl or Lua
scripts, the company logo, etc. without the need to tell my colleagues
how to install them.  Everything I put on the server is available
instantaneously.  ...unless I forget to run texhash, of course.

I suppose that unfortunately most people aren't aware of this
possibility.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From zg7s at eservices.virginia.edu  Fri Jul 20 02:25:08 2012
From: zg7s at eservices.virginia.edu (Zvi Gilboa)
Date: Thu, 19 Jul 2012 20:25:08 -0400
Subject: [luatex] Package luamplib
In-Reply-To: <20488.36038.718235.478615@zaphod.ms25.net>
References: <CABcj=tncbyLrUrNXhKrjOf=HfdHbwy6s1i+XxwqnDXhUND+otg@mail.gmail.com>
 <20487.10203.841708.434347@zaphod.ms25.net>
 <CABcj=t=HLoePanma4dxdmT_967NVzQebw1V2T3nh4km2GYmQGA@mail.gmail.com>
 <500868F3.6080103@eservices.virginia.edu>
 <20488.36038.718235.478615@zaphod.ms25.net>
Message-ID: <5008A564.6060304@eservices.virginia.edu>

Thanks, Reinhard, for the reminder that TeX is only one of thousands of 
packages!
Admittedly, I have completely forgotten about that:)

Cheers,
Zvi






On 07/19/2012 06:40 PM, Reinhard Kotucha wrote:
> On 2012-07-19 at 16:07:15 -0400, Zvi Gilboa wrote:
>
>   > This is indeed embarrassing, however in my humble opinion, TeXLive
>   > should not be shipping with Ubuntu at all, as it is the source of many
>   > potential disasters.  One trivial example: suppose that you use a
>   > different TeX distribution, or simply opt for a "manual" installation of
>   > (the current version of) TeXLive, as many people (myself included)do.
>   > You might then decide to install a random TeX-related package -- be it
>   > an editor, a font, or anything else for that matter -- just to realize
>   > that Ubuntu thinks it should now install the whole TeX-system shebang
>   > for you...
>
> Sorry, I disagree.  TeX Live is only one of tens of thousands of
> packages provided by Linux distributions.  You installed TeX Live
> yourself probably because you need new features.  But for the majority
> of users TeX is only one program of many and the easiest way to
> acquire it is to install what the Linux distribution provides.
>
> The dependency problems you described exist with many other programs
> too.  Suppose you have CUPS installed but want to maintain ghostscript
> yourself.  I think that Linux distributors should provide everything
> they can maintain.
>
> TeX Live doesn't interfere with another release installed somewhere
> else on a particular system.  Unless disk space is a severe problem,
> it doesn't matter very much what the package manager pulls in.
>
> BTW, I'm using Gentoo and CentOS and can't confirm that TeX Live is
> pulled in by the package managers when I install a font, an editor, or
> something alike.  AucTeX might be an exception because it depends on
> both, a text editor and a TeX system.
>
> Regards,
>    Reinhard
>
>
>   > Best regards,
>   > Zvi Gilboa
>   >
>   >
>   > On 07/19/2012 03:59 PM, Dirk Laurie wrote:
>   > > 2012/7/18 Reinhard Kotucha <reinhard.kotucha at web.de>:
>   > >
>   > >> BTW, the problem you encountered seems to be caused by a bug rather
>   > >> than a compatibility problem.  Obviously the comment character was
>   > >> ignored.  However, it's fixed already in newer releases.
>   > >>
>   > >>   > What's the easiest solution, short of "Update your whole
>   > >>   > installation to the latest TeXLive"?
>   > >>
>   > >> Please note that in order to upgrade from TL-2011 to TL-2012 you don't
>   > >> have to install everything from scratch anymore:
>   > >>
>   > >>    http://tug.org/texlive/upgrade.html
>   > >>
>   > >> You could probably install a newer LuaTeX binary into your current
>   > >> installation, but I fear that everything you do beyond the package
>   > >> manager's neck will cause trouble former or later.  In particular,
>   > >> if your system is inconsistent, nobody can reproduce your problems.
>   > >>
>   > > Can you believe it, Ubuntu 12.04 LTS "Precise Pangolin" released
>   > > April 2012 ships with TeXLive 2009.
>   > >
>   > > Dirk
>   >
>


From dirk.laurie at gmail.com  Fri Jul 20 07:09:50 2012
From: dirk.laurie at gmail.com (Dirk Laurie)
Date: Fri, 20 Jul 2012 07:09:50 +0200
Subject: [luatex] Package luamplib
In-Reply-To: <20120719225448.GD7977@gamma.logic.tuwien.ac.at>
References: <CABcj=tncbyLrUrNXhKrjOf=HfdHbwy6s1i+XxwqnDXhUND+otg@mail.gmail.com>
 <20487.10203.841708.434347@zaphod.ms25.net>
 <500868F3.6080103@eservices.virginia.edu>
 <CABcj=t=HLoePanma4dxdmT_967NVzQebw1V2T3nh4km2GYmQGA@mail.gmail.com>
 <20120719225448.GD7977@gamma.logic.tuwien.ac.at>
Message-ID: <CABcj=t=quu7MD92q2rx=f0WOXhPUDU36FW4Xb2Bi96X-H-3UfQ@mail.gmail.com>

2012/7/20 Norbert Preining <preining at logic.at>:

>
> First of all let me one thing completely clear: I *honestly* believe
> that *most* people whining about the TL2009 being so old have no
> *actual* need for tl2012 or so, since the write normal LaTeX documents
> that work even with TL2005. It is only their infinite upgraditis
> or however it is called.
>

The perception that >50% of the complaints come from people who don't
actually need it, even if true, does not change that fact that many people
do need it.

I have run into several problems -- packages hyperref, luamplib, fontspec,
biblatex etc. -- and reported them on this or another list.  (That's  where
this thread started.) In most cases I got replies, even from Windows users,
that it's a bug that was fixed long ago.

> If there is a problem with diskspace you should create an equivs package,
> as described on the web page tug.org/texlive/debian.html

> So all settled, unless we assume that people are incapable of reading
> the documentation.

That page is very helpful indeed.  It would be even more so if available in
the documentation packaged with tex-common.

Dirk

From Robin.Fairbairns at cl.cam.ac.uk  Fri Jul 20 10:58:50 2012
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Fri, 20 Jul 2012 09:58:50 +0100
Subject: [luatex] Package luamplib
In-Reply-To: Your message of Fri, 20 Jul 2012 02:15:22 +0200.
 <20488.41754.191789.711805@zaphod.ms25.net>
Message-ID: <2902.1342774730@cl.cam.ac.uk>

Reinhard Kotucha <reinhard.kotucha at web.de> wrote:

> On 2012-07-19 at 21:48:24 +0100, Robin Fairbairns wrote:
> 
>  > we're told that U12.10 will ship with tl2012, but fedora's
>  > tempting.  (unfortunately i don't trust my creaking old brain to
>  > look after a system that's no longer supported by the department --
>  > it's centos or ubuntu here or you're on your own.  centos has
>  > frozen a similarly ancient version of tl.)
> 
> I'm using CentOS at work.  AFAIR they switched from teTeX to TL-2007
> last year (CentOs 6).  Though this TL version is ancient indeed, I had
> the impression that the rest of the distribution is more up-to-date.
> Don't know why they decided to provide such a fossil.

:-)

> On the other hand I think that an enterprise grade Linux distribution
> deserves an enterprise grade TeX Live installation.
> 
> Nothing easier than that.  I installed TeX Live on the server and my
> colleagues can use it directly without the need to install or update
> anything.  Unix users have to mount it via NFS and add the bin
> directory to PATH, Windows users have to associate \\server\tex , for
> example, with a drive letter, and click w32-client.bat .  That's all.
> 
> The nice thing is that I can add custom macro packages, Perl or Lua
> scripts, the company logo, etc. without the need to tell my colleagues
> how to install them.  Everything I put on the server is available
> instantaneously.  ...unless I forget to run texhash, of course.
> 
> I suppose that unfortunately most people aren't aware of this
> possibility.

or don't have the means to do the job.

the best i can do (consistent with policy -- i'm a sysadmin) is to
produce a virtual machine with tl2012, to be the answer to bug reports
of the form "my latex doesn't have _this_ package" or "my pdftex doesn't
do _this_" (surprisingly frequyent).  nothing so obvious as allowing
people to self-install...  i'll be getting that going some time next
month, in time for the new academical year.

r

From Robin.Fairbairns at cl.cam.ac.uk  Fri Jul 20 11:26:49 2012
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Fri, 20 Jul 2012 10:26:49 +0100
Subject: [luatex] Package luamplib
In-Reply-To: Your message of Fri, 20 Jul 2012 07:09:50 +0200.
 <CABcj=t=quu7MD92q2rx=f0WOXhPUDU36FW4Xb2Bi96X-H-3UfQ@mail.gmail.com>
Message-ID: <4871.1342776409@cl.cam.ac.uk>

Dirk Laurie <dirk.laurie at gmail.com> wrote:

> 2012/7/20 Norbert Preining <preining at logic.at>:
> 
> > First of all let me one thing completely clear: I *honestly* believe
> > that *most* people whining about the TL2009 being so old have no
> > *actual* need for tl2012 or so, since the write normal LaTeX documents
> > that work even with TL2005. It is only their infinite upgraditis
> > or however it is called.
> 
> The perception that >50% of the complaints come from people who don't
> actually need it, even if true, does not change that fact that many people
> do need it.
> 
> I have run into several problems -- packages hyperref, luamplib, fontspec,
> biblatex etc. -- and reported them on this or another list.  (That's  where
> this thread started.) In most cases I got replies, even from Windows users,
> that it's a bug that was fixed long ago.
> 
> > If there is a problem with diskspace you should create an equivs package,
> > as described on the web page tug.org/texlive/debian.html
> 
> > So all settled, unless we assume that people are incapable of reading
> > the documentation.
> 
> That page is very helpful indeed.  It would be even more so if available in
> the documentation packaged with tex-common.

it would be better still if i could find it with google.  (i'm not the
world's greatest expert on use of google, but it covers all the keywords
i was using in my searches.)

i could put a link into the uk faq, but not many read that unless
they're _real_ newbies, afaict.  (imo, newbies shouldn't even be trying
this sort of thing...)

robin

From mtw at view.net.au  Fri Jul 20 13:56:48 2012
From: mtw at view.net.au (Michael Talbot-Wilson)
Date: Fri, 20 Jul 2012 21:26:48 +0930
Subject: [luatex] Bumbling luatex newbie gets nowhere
In-Reply-To: <2902.1342774730@cl.cam.ac.uk>
References: <2902.1342774730@cl.cam.ac.uk>
Message-ID: <Pine.LNX.4.64.1207202039090.12409@calypso.view.net.au>

On Fri, 20 Jul 2012, Robin Fairbairns wrote:

> of the form "my latex doesn't have _this_ package" or "my pdftex doesn't
> do _this_" (surprisingly frequyent).  nothing so obvious as allowing
> people to self-install...  i'll be getting that going some time next
> month, in time for the new academical year.

Person self-installed.  Granted he doesn't know what he's doing, is
bumbling along, but...

my brand new Eplain Luatex (per luatex.fmt as below) doesn't do
_this_ ...  Step one goes nowhere.  Any ideas, anyone?

$ luatex test-modutils-plain.tex
This is LuaTeX, Version beta-0.70.1-2012071504
(./test-modutils-plain.tex
(/usr/local/libexec/teTeX/share/texmf-local/tex/generic/luatex/luatexbase-modut
ils.sty
Package: luatexbase-modutils 2010/10/10 v0.3 Module utilities for
LuaTeX
(/usr/local/libexec/teTeX/share/texmf-local/tex/generic/luatex/ifluatex.sty)
(/usr/local/libexec/teTeX/share/texmf-local/tex/generic/luatex/luatexbase-loade
r.sty
Package: luatexbase-loader 2010/10/10 v0.3 Lua module loader for
LuaTeX
(/usr/local/libexec/teTeX/share/texmf-local/tex/generic/luatex/ifluatex.sty)
(/usr/local/libexec/teTeX/share/texmf-local/tex/generic/luatex/luatexbase-compa
t.sty
Package: luatexbase-compat 2010/10/10 v0.3 Compatibility tools for
LuaTeX
(/usr/local/libexec/teTeX/share/texmf-local/tex/generic/luatex/ifluatex.sty)
! Missing number, treated as zero.
<to be read again>
                    }
l.90 \the\toks0

?

I tried that after doing this, because the freshly compiled luatex
seemed to need a fmt file:

$ luatex -ini
This is LuaTeX, Version beta-0.70.1-2012071504  (INITEX)
**\catcode `\{=1
*\catcode `\}=2
*\directlua { tex.enableprimitives('',tex.extraprimitives()) }
*\input ./plain.tex
*\input ifluatex.sty
*\input ./eplain.tex
*\dump

From dirk.laurie at gmail.com  Fri Jul 20 19:51:54 2012
From: dirk.laurie at gmail.com (Dirk Laurie)
Date: Fri, 20 Jul 2012 19:51:54 +0200
Subject: [luatex] Package luamplib
In-Reply-To: <4871.1342776409@cl.cam.ac.uk>
References: <CABcj=t=quu7MD92q2rx=f0WOXhPUDU36FW4Xb2Bi96X-H-3UfQ@mail.gmail.com>
 <4871.1342776409@cl.cam.ac.uk>
Message-ID: <CABcj=tnRWUfa0kBqjTkagXUDheHhz-QMTDSVqZqimTBLmL0YAA@mail.gmail.com>

2012/7/20 Robin Fairbairns <Robin.Fairbairns at cl.cam.ac.uk>:
> Dirk Laurie <dirk.laurie at gmail.com> wrote:
>> 2012/7/20 Norbert Preining <preining at logic.at>:

>> > If there is a problem with diskspace you should create an equivs package,
>> > as described on the web page tug.org/texlive/debian.html
>>

>>
>> That page is very helpful indeed.  It would be even more so if available in
>> the documentation packaged with tex-common.
>
> it would be better still if i could find it with google.  (i'm not the
> world's greatest expert on use of google, but it covers all the keywords
> i was using in my searches.)
>
>

You need to remember that Ubuntu is Debian with milk and two sugar.

Google on texlive,debian and feel lucky.

Dirk

From dirk.laurie at gmail.com  Sun Jul 22 13:00:20 2012
From: dirk.laurie at gmail.com (Dirk Laurie)
Date: Sun, 22 Jul 2012 13:00:20 +0200
Subject: [luatex] TexLive 2012 LuaLaTeX segmentation fault
Message-ID: <CABcj=t=PZH9fYzk02nd6PPup4OD5o39VhE6vJdt_0HobQ6F4mg@mail.gmail.com>

I have Ubuntu 12.04 without any TeX package.  All my TeX is off the DVD
image downloaded from tug,org, installed by tl-install with default settings.
The binaries are i386-linux.


This is the input file 'sample.tex':

\documentclass{article}
\begin{document}
\directlua{
  mp=mplib.new{}
  mp:execute[[
beginfig(1);
fill fullcircle scaled 5cm withcolor green;
draw fullcircle scaled 4.5cm;
endfig;
]]}
\end{document}

This is what happens:

$ lualatex sample.tex
This is LuaTeX, Version beta-0.70.2-2012062812 (TeX Live 2012)
 restricted \write18 enabled.
(./sample.tex
LaTeX2e <2011/06/27>
LuaTeX adaptation of babel <v3.8m-luatex-1.5> and hyphenation patterns for engl
ish, dumylang, nohyphenation, loaded.
(/usr/local/texlive/2012/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class
(/usr/local/texlive/2012/texmf-dist/tex/latex/base/size10.clo))
(./sample.auxSegmentation fault (core dumped)

There is no output: sample.aux and sample.log are empty.

From zg7s at eservices.virginia.edu  Sun Jul 22 15:24:42 2012
From: zg7s at eservices.virginia.edu (Zvi Gilboa)
Date: Sun, 22 Jul 2012 09:24:42 -0400
Subject: [luatex] TexLive 2012 LuaLaTeX segmentation fault
In-Reply-To: <CABcj=t=PZH9fYzk02nd6PPup4OD5o39VhE6vJdt_0HobQ6F4mg@mail.gmail.com>
References: <CABcj=t=PZH9fYzk02nd6PPup4OD5o39VhE6vJdt_0HobQ6F4mg@mail.gmail.com>
Message-ID: <500BFF1A.90801@eservices.virginia.edu>

I have the exact same setting -- Ubuntu 12.04 and TL-2012 installed from 
the DVD image.  Running Dirk's sample.tex, I encounter the exact same 
output and segmentation fault.
Best regards,
Zvi





On 07/22/2012 07:00 AM, Dirk Laurie wrote:
> I have Ubuntu 12.04 without any TeX package.  All my TeX is off the DVD
> image downloaded from tug,org, installed by tl-install with default settings.
> The binaries are i386-linux.
>
>
> This is the input file 'sample.tex':
>
> \documentclass{article}
> \begin{document}
> \directlua{
>    mp=mplib.new{}
>    mp:execute[[
> beginfig(1);
> fill fullcircle scaled 5cm withcolor green;
> draw fullcircle scaled 4.5cm;
> endfig;
> ]]}
> \end{document}
>
> This is what happens:
>
> $ lualatex sample.tex
> This is LuaTeX, Version beta-0.70.2-2012062812 (TeX Live 2012)
>   restricted \write18 enabled.
> (./sample.tex
> LaTeX2e <2011/06/27>
> LuaTeX adaptation of babel <v3.8m-luatex-1.5> and hyphenation patterns for engl
> ish, dumylang, nohyphenation, loaded.
> (/usr/local/texlive/2012/texmf-dist/tex/latex/base/article.cls
> Document Class: article 2007/10/19 v1.4h Standard LaTeX document class
> (/usr/local/texlive/2012/texmf-dist/tex/latex/base/size10.clo))
> (./sample.auxSegmentation fault (core dumped)
>
> There is no output: sample.aux and sample.log are empty.


From preining at logic.at  Sun Jul 22 16:40:44 2012
From: preining at logic.at (Norbert Preining)
Date: Sun, 22 Jul 2012 23:40:44 +0900
Subject: [luatex] TexLive 2012 LuaLaTeX segmentation fault
In-Reply-To: <500BFF1A.90801@eservices.virginia.edu>
References: <CABcj=t=PZH9fYzk02nd6PPup4OD5o39VhE6vJdt_0HobQ6F4mg@mail.gmail.com>
 <500BFF1A.90801@eservices.virginia.edu>
Message-ID: <20120722144044.GH17876@gamma.logic.tuwien.ac.at>

On So, 22 Jul 2012, Zvi Gilboa wrote:
> I have the exact same setting -- Ubuntu 12.04 and TL-2012 installed from  
> the DVD image.  Running Dirk's sample.tex, I encounter the exact same  
> output and segmentation fault.

Smae on x68_64 with debian compiled luatex.

Best wishes

Norbert
------------------------------------------------------------------------
Norbert Preining            preining@{jaist.ac.jp, logic.at, debian.org}
JAIST, Japan                                 TeX Live & Debian Developer
DSA: 0x09C5B094   fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
------------------------------------------------------------------------
WROOT (n.)
A short little berk who thinks that by pulling on his pipe and gazing
shrewdly at you he will give the impression that he is infinitely wise
and 5 ft 11 in.
			--- Douglas Adams, The Meaning of Liff

From taco at elvenkind.com  Mon Jul 23 10:08:36 2012
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 23 Jul 2012 10:08:36 +0200
Subject: [luatex] TexLive 2012 LuaLaTeX segmentation fault
In-Reply-To: <CABcj=t=PZH9fYzk02nd6PPup4OD5o39VhE6vJdt_0HobQ6F4mg@mail.gmail.com>
References: <CABcj=t=PZH9fYzk02nd6PPup4OD5o39VhE6vJdt_0HobQ6F4mg@mail.gmail.com>
Message-ID: <500D0684.50500@elvenkind.com>


Hi,

On 07/22/2012 01:00 PM, Dirk Laurie wrote:
> I have Ubuntu 12.04 without any TeX package.  All my TeX is off the DVD
> image downloaded from tug,org, installed by tl-install with default settings.

> The binaries are i386-linux.

This crash is a mplib bug, and as such not really a lualatex problem
(it would happen in any case).

> This is the input file 'sample.tex':
>
> \documentclass{article}
> \begin{document}
> \directlua{
>    mp=mplib.new{}
>    mp:execute[[
> beginfig(1);
> fill fullcircle scaled 5cm withcolor green;
> draw fullcircle scaled 4.5cm;
> endfig;
> ]]}
> \end{document}

Sorry about the crash, but this won't work, ever. Mplib does not know
out of the box how to find input files that are not in the current
directory. You'll need to write a find_file function for it. The
simplest solution looks like this:

\documentclass{article}
\begin{document}
\directlua{
   local function find(a) return kpse.find_file(a,'mp') end
   mp=mplib.new{mem_name = find('plain'),
                find_file = find}
   mp:execute[[
beginfig(1);
fill fullcircle scaled 5cm withcolor green;
draw fullcircle scaled 4.5cm;
endfig;
]]}
\end{document}

Even so, this will not actually output anything. You need to intercept
the generated results and convert those into pdf operators also. All in
all, it is much easier to use a package like luamplib:

\documentclass{article}
\usepackage{luamplib}
\begin{document}
\begin{mplibcode}
fill fullcircle scaled 5cm withcolor green;
draw fullcircle scaled 4.5cm;
\end{mplibcode}
\end{document}

Best wishes,
Taco



From mtw at view.net.au  Mon Jul 30 07:19:27 2012
From: mtw at view.net.au (Michael Talbot-Wilson)
Date: Mon, 30 Jul 2012 14:49:27 +0930
Subject: [luatex] TexLive 2012 LuaLaTeX segmentation fault
In-Reply-To: <500D0684.50500@elvenkind.com>
References: <CABcj=t=PZH9fYzk02nd6PPup4OD5o39VhE6vJdt_0HobQ6F4mg@mail.gmail.com>
 <500D0684.50500@elvenkind.com>
Message-ID: <Pine.LNX.4.64.1207301428360.3454@calypso.view.net.au>

On Mon, 23 Jul 2012, Taco Hoekwater wrote:
> On 07/22/2012 01:00 PM, Dirk Laurie wrote:
>> ...
>> This is the input file 'sample.tex':
>> 
>> \documentclass{article}
>> \begin{document}
>> \directlua{
>>    mp=mplib.new{}
>>    mp:execute[[
>> beginfig(1);
>> fill fullcircle scaled 5cm withcolor green;
>> draw fullcircle scaled 4.5cm;
>> endfig;
>> ]]}
>> \end{document}
>
> Sorry about the crash, but this won't work, ever. Mplib does not know
> out of the box how to find input files that are not in the current
> directory...
> ... All in
> all, it is much easier to use a package like luamplib:
>
> \documentclass{article}
> \usepackage{luamplib}
> \begin{document}
> \begin{mplibcode}
> fill fullcircle scaled 5cm withcolor green;
> draw fullcircle scaled 4.5cm;
> \end{mplibcode}
> \end{document}

Okay,

$ luatex fix.tex #source below

Edited log file:

This is LuaTeX, Version beta-0.70.2-2012062812 (TeX Live 2012)
(format=luatex 2012.7.24)  30 JUL 2012 14:33
  restricted \write18 enabled.
**fix.tex
(./fix.tex
(/usr/local/libexec/texlive/2012/texmf-dist/tex/eplain/eplain.tex)
(/usr/local/libexec/texlive/2012/texmf-dist/tex/plain/graphics-pln/miniltx.tex
...
)
(/usr/local/libexec/texlive/2012/texmf-dist/tex/luatex/luamplib/luamplib.sty
luamplib.sty: 2011/12/09 v1.09 mplib package for LuaTeX
^^^^^^^^                       ^^^^^^^^^^^^^

(/usr/local/libexec/texlive/2012/texmf-dist/tex/luatex/luatexbase/luatexbase-mo
dutils.sty
luatexbase-modutils.sty: 2010/10/10 v0.3 Module utilities for LuaTeX

(/usr/local/libexec/texlive/2012/texmf-dist/tex/generic/oberdiek/ifluatex.sty
ifluatex.sty: 2010/03/01 v1.3 Provides the ifluatex switch (HO)
ifluatex: LuaTeX detected
)
(/usr/local/libexec/texlive/2012/texmf-dist/tex/luatex/luatexbase/luatexbase-lo
ader.sty
luatexbase-loader.sty: 2010/10/10 v0.3 Lua module loader for LuaTeX

61: Eplain: package `ifluatex' already loaded, skipping reloading
(/usr/local/libexec/texlive/2012/texmf-dist/tex/luatex/luatexbase/luatexbase-co
mpat.sty
luatexbase-compat.sty: 2010/10/10 v0.3 Compatibility tools for LuaTeX

61: Eplain: package `ifluatex' already loaded, skipping reloading
)
(/usr/local/libexec/texlive/2012/texmf-dist/tex/luatex/luatexbase/luatexbase.lo
ader.lua))
(/usr/local/libexec/texlive/2012/texmf-dist/tex/luatex/luatexbase/modutils.lua)
)
(/usr/local/libexec/texlive/2012/texmf-dist/tex/latex/fancyvrb/fancyvrb.sty
fancyvrb.sty: 2008/02/07

Style option: `fancyvrb' v2.7a, with DG/SPQR fixes, and
firstline=lastline fix
<2008/02/07> (tvz)
(/usr/local/libexec/texlive/2012/texmf-dist/tex/latex/graphics/keyval.sty
keyval.sty: 1999/03/16 v1.13 key=value parser (DPC)
...
\FV at CodeLineNo=\count52
\FV at InFile=\read1
\FV at TabBox=\box20

! Undefined control sequence.
l.1050 \newcounter
                   {FancyVerbLine}
? x
No pages of output.

fix.tex
-------
%\documentclass{article}
\input eplain
\beginpackages
\usepackage{luamplib}
%\begin{document}
\begin{mplibcode}
fill fullcircle scaled 5cm withcolor green;
draw fullcircle scaled 4.5cm;
\end{mplibcode}
%\end{document}
\endpackages

Being the blind following the fit, who seem to have disappeared (as
they say) over the horizon (as they call it)... in which direction
should I now turn?

From mtw at view.net.au  Mon Jul 30 07:48:09 2012
From: mtw at view.net.au (Michael Talbot-Wilson)
Date: Mon, 30 Jul 2012 15:18:09 +0930
Subject: [luatex] TexLive 2012 LuaLaTeX segmentation fault
In-Reply-To: <Pine.LNX.4.64.1207301428360.3454@calypso.view.net.au>
References: <CABcj=t=PZH9fYzk02nd6PPup4OD5o39VhE6vJdt_0HobQ6F4mg@mail.gmail.com>
 <500D0684.50500@elvenkind.com>
 <Pine.LNX.4.64.1207301428360.3454@calypso.view.net.au>
Message-ID: <Pine.LNX.4.64.1207301509460.3541@calypso.view.net.au>

Sorry.  Here it is.

$ luatex old

(./old.tex
! Undefined control sequence.
l.2 \newcounter
                 {FancySomeLine}
?

old.tex
-------
\newcount\FancyAnyLine
\newcounter {FancySomeLine}
Hello.
\bye

May be rubbery stuff I wouldn't know about.  Apologies it that's it.

From dirk.laurie at gmail.com  Tue Jul 31 14:47:06 2012
From: dirk.laurie at gmail.com (Dirk Laurie)
Date: Tue, 31 Jul 2012 14:47:06 +0200
Subject: [luatex] Bumbling luatex newbie gets nowhere
In-Reply-To: <Pine.LNX.4.64.1207202039090.12409@calypso.view.net.au>
References: <2902.1342774730@cl.cam.ac.uk>
 <Pine.LNX.4.64.1207202039090.12409@calypso.view.net.au>
Message-ID: <CABcj=tmc4O08FppzcvT7AQ1F7pyCsFc-U8GXvG9U26e7E19DWA@mail.gmail.com>

2012/7/20 Michael Talbot-Wilson <mtw at view.net.au>:
>
> my brand new Eplain Luatex (per luatex.fmt as below) doesn't do
> _this_ ...  Step one goes nowhere.  Any ideas, anyone?
>
> $ luatex test-modutils-plain.tex
> This is LuaTeX, Version beta-0.70.1-2012071504

At the Univ, I pulled the latest TexLive dvd image off the local mirror
onto my USB disk, took it home, ran install-tl.

When I run the same test, it works.  My output starts

> This is LuaTeX, Version beta-0.70.2-2012062812 (TeX Live 2012)

This seems to show that despite your later build date, you started
from older source.  Which may just explain why mine works
and yours doesn't.

