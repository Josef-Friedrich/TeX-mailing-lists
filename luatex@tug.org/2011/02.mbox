From patrick at gundla.ch  Wed Feb  2 09:07:04 2011
From: patrick at gundla.ch (Patrick Gundlach)
Date: Wed, 2 Feb 2011 09:07:04 +0100
Subject: [luatex] \input from Lua.
In-Reply-To: <4D46B46B.4040500@elvenkind.com>
References: <4D43EFC1.3060505@free.fr>
 <AB21411C-E087-453D-8969-FC00F01F9B71@gmail.com> <4D468F27.6010705@free.fr>
 <4D46B46B.4040500@elvenkind.com>
Message-ID: <61A244F7-EEC7-4566-97A4-FD798764B584@gundla.ch>


Am 31.01.2011 um 14:08 schrieb Taco Hoekwater:

> 
> One of the next versions will have
> 
>  tex.initialize()
> 
> available in the startup script to boot the typesetting parts
> of the machinery.

Will this be available in texlua?

(if not: feature request :-))

Patrick


From taco at elvenkind.com  Wed Feb  2 09:18:51 2011
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 02 Feb 2011 09:18:51 +0100
Subject: [luatex] \input from Lua.
In-Reply-To: <61A244F7-EEC7-4566-97A4-FD798764B584@gundla.ch>
References: <4D43EFC1.3060505@free.fr>
 <AB21411C-E087-453D-8969-FC00F01F9B71@gmail.com> <4D468F27.6010705@free.fr>
 <4D46B46B.4040500@elvenkind.com>
 <61A244F7-EEC7-4566-97A4-FD798764B584@gundla.ch>
Message-ID: <4D49136B.1020706@elvenkind.com>

On 02/02/2011 09:07 AM, Patrick Gundlach wrote:
>
> Am 31.01.2011 um 14:08 schrieb Taco Hoekwater:
>
>>
>> One of the next versions will have
>>
>>   tex.initialize()
>>
>> available in the startup script to boot the typesetting parts
>> of the machinery.
>
> Will this be available in texlua?

Yes.

From till.heilmann at unibas.ch  Fri Feb  4 09:15:23 2011
From: till.heilmann at unibas.ch (Till A. Heilmann)
Date: Fri, 4 Feb 2011 09:15:23 +0100
Subject: [luatex] Tracking feature with microtype and LuaTeX
Message-ID: <EE68B169-0110-4ACB-A911-B97F08F48513@unibas.ch>

The tracking feature in microtype 2.5 beta-04 is supposed to work  
with LuaTeX 0.62 and above (see microtype manual p. 16). But it  
doesn't (see below). Am I doing something wrong or is it a bug?

\listfiles
\documentclass{article}
\usepackage[tracking]{microtype}
\begin{document}
Test.
\end{document}

This is LuaTeX, Version beta-0.65.0-2010121316
  restricted \write18 enabled.
(./test.tex
LaTeX2e <2009/09/24>
LuaTeX adaptation of babel <v3.8l-luatex-1.4> and hyphenation  
patterns for engl
ish, dumylang, nohyphenation, loaded.
(/usr/local/texlive/2010/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class
(/usr/local/texlive/2010/texmf-dist/tex/latex/base/size10.clo))
(/Users/till/Dropbox/texmf/tex/latex/microtype/microtype.sty
(/usr/local/texlive/2010/texmf-dist/tex/latex/graphics/keyval.sty)
(/Users/till/Dropbox/texmf/tex/latex/microtype/microtype-luatex.def)
(/Users/till/Dropbox/texmf/tex/latex/microtype/microtype.cfg))
No file test.aux.

! Package microtype Error: The tracking feature only works with  
pdftex 1.40
(microtype)                or newer. Switching it off.

See the microtype package documentation for explanation.
Type  H <return>  for immediate help.
  ...

l.4 \begin{document}

?
(/Users/till/Dropbox/texmf/tex/latex/microtype/mt-cmr.cfg) [1{/Users/ 
till/Libra
ry/texlive/2010/texmf-var/fonts/map/pdftex/updmap/pdftex.map}] (./ 
test.aux)

  *File List*
  article.cls    2007/10/19 v1.4h Standard LaTeX document class
   size10.clo    2007/10/19 v1.4h Standard LaTeX file (size option)
microtype.sty    2010/11/11 v2.5 <beta-04> Micro-typographical  
refinements (RS)

   keyval.sty    1999/03/16 v1.13 key=value parser (DPC)
microtype-luatex.def
microtype.cfg    2010/11/11 v2.5 <beta-04> microtype main  
configuration file (R
S)
   mt-cmr.cfg    2009/11/09 v2.0 microtype config. file: Computer  
Modern Roman (
RS)
  ***********

  )
  260 words of node memory still in use:
    2 hlist, 1 vlist, 1 rule, 2 glue, 39 glue_spec, 1 write nodes
    avail lists: 1:1,2:15,3:2,4:23,5:1,6:13,7:1,9:6
</usr/local/texlive/2010/texmf-dist/fonts/type1/public/amsfonts/cm/ 
cmr10.pfb>
Output written on test.pdf (1 page, 10967 bytes).
Transcript written on test.log.

-- 
Dr. Till A. Heilmann
Research Assistant

UNIVERSITY OF BASEL
Institute for Media Studies
Bernoullistrasse 28
CH-4056 Basel
Tel. +41 (0)61 267 09 86
Fax  +41 (0)61 267 08 87
E-Mail till.heilmann at unibas.ch
www.mewi.unibas.ch


From taco at elvenkind.com  Fri Feb  4 09:16:33 2011
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 04 Feb 2011 09:16:33 +0100
Subject: [luatex] Tracking feature with microtype and LuaTeX
In-Reply-To: <EE68B169-0110-4ACB-A911-B97F08F48513@unibas.ch>
References: <EE68B169-0110-4ACB-A911-B97F08F48513@unibas.ch>
Message-ID: <4D4BB5E1.4070701@elvenkind.com>


Hi,

Added the lualatex list as a CC.

Best wishes,
Taco

On 02/04/2011 09:15 AM, Till A. Heilmann wrote:
> The tracking feature in microtype 2.5 beta-04 is supposed to work with
> LuaTeX 0.62 and above (see microtype manual p. 16). But it doesn't (see
> below). Am I doing something wrong or is it a bug?
>
> \listfiles
> \documentclass{article}
> \usepackage[tracking]{microtype}
> \begin{document}
> Test.
> \end{document}
>
> This is LuaTeX, Version beta-0.65.0-2010121316
> restricted \write18 enabled.
> (./test.tex
> LaTeX2e <2009/09/24>
> LuaTeX adaptation of babel <v3.8l-luatex-1.4> and hyphenation patterns
> for engl
> ish, dumylang, nohyphenation, loaded.
> (/usr/local/texlive/2010/texmf-dist/tex/latex/base/article.cls
> Document Class: article 2007/10/19 v1.4h Standard LaTeX document class
> (/usr/local/texlive/2010/texmf-dist/tex/latex/base/size10.clo))
> (/Users/till/Dropbox/texmf/tex/latex/microtype/microtype.sty
> (/usr/local/texlive/2010/texmf-dist/tex/latex/graphics/keyval.sty)
> (/Users/till/Dropbox/texmf/tex/latex/microtype/microtype-luatex.def)
> (/Users/till/Dropbox/texmf/tex/latex/microtype/microtype.cfg))
> No file test.aux.
>
> ! Package microtype Error: The tracking feature only works with pdftex 1.40
> (microtype) or newer. Switching it off.
>
> See the microtype package documentation for explanation.
> Type H <return> for immediate help.
> ...
>
> l.4 \begin{document}
>
> ?
> (/Users/till/Dropbox/texmf/tex/latex/microtype/mt-cmr.cfg)
> [1{/Users/till/Libra
> ry/texlive/2010/texmf-var/fonts/map/pdftex/updmap/pdftex.map}] (./test.aux)
>
> *File List*
> article.cls 2007/10/19 v1.4h Standard LaTeX document class
> size10.clo 2007/10/19 v1.4h Standard LaTeX file (size option)
> microtype.sty 2010/11/11 v2.5 <beta-04> Micro-typographical refinements
> (RS)
>
> keyval.sty 1999/03/16 v1.13 key=value parser (DPC)
> microtype-luatex.def
> microtype.cfg 2010/11/11 v2.5 <beta-04> microtype main configuration
> file (R
> S)
> mt-cmr.cfg 2009/11/09 v2.0 microtype config. file: Computer Modern Roman (
> RS)
> ***********
>
> )
> 260 words of node memory still in use:
> 2 hlist, 1 vlist, 1 rule, 2 glue, 39 glue_spec, 1 write nodes
> avail lists: 1:1,2:15,3:2,4:23,5:1,6:13,7:1,9:6
> </usr/local/texlive/2010/texmf-dist/fonts/type1/public/amsfonts/cm/cmr10.pfb>
>
> Output written on test.pdf (1 page, 10967 bytes).
> Transcript written on test.log.
>


From w.m.l at gmx.net  Fri Feb  4 16:36:16 2011
From: w.m.l at gmx.net (Robert)
Date: Fri, 04 Feb 2011 16:36:16 +0100
Subject: [luatex] [lltx]  Tracking feature with microtype and LuaTeX
In-Reply-To: <4D4BB5E1.4070701@elvenkind.com>
References: <EE68B169-0110-4ACB-A911-B97F08F48513@unibas.ch>
 <4D4BB5E1.4070701@elvenkind.com>
Message-ID: <4D4C1CF0.7030209@gmx.net>

On 02/04/2011 09:15 AM, Till A. Heilmann wrote:
> The tracking feature in microtype 2.5 beta-04 is supposed to work with
> LuaTeX 0.62 and above (see microtype manual p. 16). But it doesn't (see
> below). Am I doing something wrong or is it a bug?

Works for me. Maybe an old version of microtype-luatex.def?

Regards,
-- 
  Robert

From martin at oneiros.de  Fri Feb  4 17:04:21 2011
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 4 Feb 2011 17:04:21 +0100
Subject: [luatex] [lltx] Tracking feature with microtype and LuaTeX
In-Reply-To: <4D4C1CF0.7030209@gmx.net>
References: <EE68B169-0110-4ACB-A911-B97F08F48513@unibas.ch>
 <4D4BB5E1.4070701@elvenkind.com> <4D4C1CF0.7030209@gmx.net>
Message-ID: <AANLkTikifHn9UMKG13w=Dh8OgdLGCUX951f4-iOqb0DP@mail.gmail.com>

2011/2/4 Robert <w.m.l at gmx.net>:
> Works for me. Maybe an old version of microtype-luatex.def?

It's the one currently in tlcontrib.

Best
   Martin

From w.m.l at gmx.net  Fri Feb  4 17:27:04 2011
From: w.m.l at gmx.net (Robert)
Date: Fri, 04 Feb 2011 17:27:04 +0100
Subject: [luatex] [lltx]  Tracking feature with microtype and LuaTeX
In-Reply-To: <4D4C1CF0.7030209@gmx.net>
References: <EE68B169-0110-4ACB-A911-B97F08F48513@unibas.ch>
 <4D4BB5E1.4070701@elvenkind.com> <4D4C1CF0.7030209@gmx.net>
Message-ID: <4D4C28D8.6050009@gmx.net>

On 04.02.11 16:36, I wrote:
> Works for me.

Because I was testing with my private version. Sorry. I've now uploaded 
beta-5 to xetex.tk and to tlcontrib (should be available at the turn of 
the hour). And then it should really work ...

Best regards,
-- 
  Robert

From st_philipp at yahoo.de  Sat Feb  5 21:31:46 2011
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Sat, 5 Feb 2011 21:31:46 +0100
Subject: [luatex] [lltx] Patching fonts with the luaotfload callback
	"luaotfload.patch_font"
In-Reply-To: <1ljwcgp8ixgpm.dlg@nililand.de>
References: <1ljwcgp8ixgpm.dlg@nililand.de>
Message-ID: <CE5F0784-4A6C-48F9-A2D0-E37705597F62@yahoo.de>

Am 05.02.2011 um 15:28 schrieb Ulrike Fischer:

> I'm really happy that the newest version of luaotfload offers a
> callback "luaotfload.patch_font" which can be use to change fonts. I
> think that is really useful. As a first step I would like to use it
> to reencode some chess fonts so that they can be used with latex.
> 
> Below is a small example of my first tests. It tries to replace the
> "a" by a "b". For all fonts in the example I get the expected "look"
> in the pdf ("bbc").
> 
> I have two questions:
> 
> 1. I added some messages to the function (for diagnosing), but they
> don't appear for all fonts in the log/terminal. I see messages from
> the fontspec-fonts "The font is \EU2/lmr/m/it/10" but not from
> "\font\mytest" and "\font\mytestb". The curious thing is that I get
> a "The font is \mytest"-message if I uncomment the last fontspec, I
> can't find a rule, why some messages appear and other not. Has
> someone an idea?

Font loading happens *before* the font is assigned to a font definition token, and before selecting the font. `font.current()`, however, returns the number of the most recently selected font, which is never the font being loaded (because TeX simply doesn't know the latter yet). You can test that by comparing the requested with the current font:

local function patch_font(fontdata)
 texio.write_nl("The font is " .. tex.fontidentifier(font.current()) .. " while loading " .. fontdata.name)
end

This gives:

The font is \EU2/lmr/m/n/10 while loading Georgia  % while executing \font\mytest=Georgia; the default font (Latin Modern Roman) is the current one
The font is EU2/lmr/m/n/10 while loading file:lmroman10-italic:script=latn;+trep;+tlig;  % while executing \itshape; LM Roman is still selected
The font is \EU2/lmr/m/it/10 while loading Arial  % while \font\mytestb="Arial"; LM Italic is the current font


> 
> 2. For the first test I simply set 
> fontdata.characters[0x0061]=fontdata.characters[0x0062]. 
> 
> But I'm really unsure which table(s) should be copied how.

That line doesn't copy anything, it just has char 0x61 point to the same table as char 0x62.

> I think I
> copied to much: When I copy&paste the output in the pdf I get "aac
> aac aac". This means my code also affected the input "b" - something
> I don't want.
> 
> What I want is
> - only the input "a" should be affected.
> - its output in the pdf should be "b" (with correct width and heigth
> etc
> - it should copy&paste as "a" or - better - as a completly different
> character e.g. "d".

You have to set the `tounicode` table entry:

 fontdata.tounicode = 1
 local a = { }
 local b = fontdata.characters[0x0062]
 local c = fontdata.characters[0x0063]
 for k, v in pairs(b) do
   a[k] = v
 end
 a.tounicode = "0064"
 b.tounicode = "0062"
 c.tounicode = "0063"
 fontdata.characters[0x0061] = a

This doesn't work as expected (you still get "ddc" instead of "dbc"), so I'm CC'ing Taco.

I think for your problem you should prefer virtual fonts over font patching. I requested the addition of the patch_font callback to be able to fix minor bugs (e.g. a wrong math parameter in Cambria Math) during font loading. Remapping characters should probably be done by means of virtual fonts:

\documentclass{article}
\usepackage{fontspec}
\usepackage{luacode}
\font\realfont={name:LMRoman10-Regular:}\relax
\begin{luacode*}
local real_id = font.id("realfont")
local real_data = font.getfont(real_id)
local virtual_data = {
  type = "virtual",
  name = "test",
  tounicode = 1,
  fonts = {
    { id = font.id("realfont"), size = 0xA0000 }
  },
  characters = { }
}
for k, v in pairs(real_data.characters) do
  local i, c, u
  if k == 0x0061 then
    i = 0x0062
    c = real_data.characters[i]
    u = "0064"
  else
    i = k
    c = v
    u = c.tounicode or (i < 0xFFFF and string.format("%04X", i))
  end
  virtual_data.characters[k] = {
    width = c.width,
    height = c.height,
    depth = c.depth,
    tounicode = u,
    commands = {
      { "char", i }
    }
  }
end
local virtual_id = font.define(virtual_data)
function select_virtual_font()
  font.current(virtual_id)
end
\end{luacode*}
\begin{document}
\luadirect{select_virtual_font()}
abc
\end{document}

The tounicode entries still don't work as expected; hopefully Taco can enlighten us.

From taco at elvenkind.com  Sun Feb  6 10:25:06 2011
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 06 Feb 2011 10:25:06 +0100
Subject: [luatex] [lltx] Patching fonts with the luaotfload
	callback	"luaotfload.patch_font"
In-Reply-To: <CE5F0784-4A6C-48F9-A2D0-E37705597F62@yahoo.de>
References: <1ljwcgp8ixgpm.dlg@nililand.de>
 <CE5F0784-4A6C-48F9-A2D0-E37705597F62@yahoo.de>
Message-ID: <4D4E68F2.9030601@elvenkind.com>

On 02/05/2011 09:31 PM, Philipp Stephani wrote:
>
> The tounicode entries still don't work as expected; hopefully Taco can enlighten us.

tounicode (and the PDF /ToUnicode feature) works on the font glyphs
that are actually included in the pdf, that is why it does not work. In
the virtual font, it does notwork because there is no actual glyph, and
in the original is works 'too well' as both 'a' and 'b' use the same
glyph.

As long as you are actually re-encoding, it is not too hard to alter
the font, but getting two input characters that map to the same glyph
to have two different tounicode values is impossible.

Virtual fonts do not really help that much for the posted problem
because of the need to adjust tounicode as well. The code in the first
post was good enough, except for a lua misunderstanding:

   fontdata.characters[0x0061] = fontdata.characters[0x0062]

is a variable assignment, not a table copy. To create an actual
copy of fontdata.characters[0x0062], you would need to do something
like this:

   fontdata.characters[0x0061]={}
   -- copy the table from 'b'
   for a,v in pairs(fontdata.characters[0x0062]) do
     fontdata.characters[0x0061][a] = v
   end

(if you are re-encoding an entire font, it is more efficient to
use a remap table to actually swap the table entries instead of
copying all keys.)

After the assignment(s), you can add

   fontdata.characters[0x0061].tounicode = "0061"

to set the correct tounicode value.

Best wishes,
Taco





From st_philipp at yahoo.de  Sun Feb  6 18:34:42 2011
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Sun, 06 Feb 2011 18:34:42 +0100
Subject: [luatex] [lltx] Patching fonts with the luaotfload
	callback	"luaotfload.patch_font"
In-Reply-To: <18x8tfw34stlj$.dlg@nililand.de>
References: <1ljwcgp8ixgpm.dlg@nililand.de>
 <CE5F0784-4A6C-48F9-A2D0-E37705597F62@yahoo.de>
 <18x8tfw34stlj$.dlg@nililand.de>
Message-ID: <4D4EDBB2.3050906@yahoo.de>

Am 06.02.2011 18:03, schrieb Ulrike Fischer:
> But I want in the end to do something like
> \font\myfont="myvirtualfont". The luatex manual contains an example
> with a virtual font and this syntax. But it uses the define_callback
> to implement it and at my opinion this is not the right place to
> define a single virtual font. It would be much better if one could
> store the definitions of the virtual font in a stand-alone file and
> let luaotfload "find" and handle the font. But I don't neither if
> this is already possible nor how. 

This has always been possible, long before LuaTeX was invented:
http://www.tex.ac.uk/cgi-bin/texfaq2html?label=virtualfonts

From till.heilmann at unibas.ch  Sun Feb  6 22:27:34 2011
From: till.heilmann at unibas.ch (Till A. Heilmann)
Date: Sun, 6 Feb 2011 22:27:34 +0100
Subject: [luatex] [lltx]  Tracking feature with microtype and LuaTeX
Message-ID: <5CF0721B-0E60-4C52-BEAC-7FB4DBE6F342@unibas.ch>

With the new microtype beta 5, the above minimal example works. Thank  
you for your help--and, obviously, for all the fantastic work you  
guys are putting into Lua(La)TeX and the packages!

Things are different (and much more complicated) for my real life  
book project, though. In this particular and rather complex case, I  
cannot seem to get it right. It is difficult to explain in detail,  
but I will try to show some of the problems bothering me with two  
other (almost) minimal examples.

Consider this file first ...

\documentclass{article}
\usepackage[ngerman]{babel}
\usepackage{blindtext}
\usepackage{fontspec}
\usepackage[T1]{fontenc}
\setmainfont{TeX Gyre Bonum}
\renewcommand{\rmdefault}{qbk}
\newcommand{\mysmallfont}{\fontsize{8}{10}\rmfamily}
\usepackage[tracking=true,letterspace=0]{microtype}
\DeclareMicrotypeSet*[tracking]{mytracking}{encoding={*}}
\SetTracking{encoding={*},family={rm*},size={8}}{188}
\begin{document}
\blindtext\par
\mysmallfont
\blindtext
\end{document}

The code works just the way I want it: The tracking feature of  
microtype is enabled and fonts are not letterspaced in general but  
only in specified cases (e.g. serif fonts in size 8pt).

What I do not understand is why

a) I have to load the fontenc package (line 5) with option T1 (I keep  
reading loading fontenc is not necessary with fontspec)

and why

b) I need to set Bonum as \rmdefault with \renewcommand (line 7): is  
\setmainfont not supposed to handle this?

Without fontenc, tracking works but the document is set not in Bonum  
but in Computern Modern. Without \renewcommand{\rmdefault}{qbk},  
neither the tracking works nor is Bonum used.

As a consequence, I load fontenc but this, in turn, breaks some of my  
characters: Consider the second file ...

\documentclass{article}
\usepackage{fontspec}
\usepackage[T1]{fontenc}
\setmainfont{TeX Gyre Bonum}
\begin{document}
? ? ?
\end{document}

Now, Bonum is not used and the sharp S, the ellipsis, and the en dash  
are set wrong (or not at all), apparently because fontenc *is* loaded  
(line 3). Without loading fontenc, it works just fine (and no need  
for a \renewcommand{\rmdefault}{qbk} either).

I'm confused.
-- 
Dr. Till A. Heilmann
Assistenz

UNIVERSIT?T BASEL
Institut f?r Medienwissenschaft
Bernoullistrasse 28
CH-4056 Basel
Tel. +41 (0)61 267 09 86 (direkt)
Tel. +41 (0)61 267 09 11 (Sekretariat)
Fax  +41 (0)61 267 08 87
E-Mail till.heilmann at unibas.ch
www.mewi.unibas.ch


-------------- next part --------------
A non-text attachment was scrubbed...
Name: theilmann_card_de.vcf
Type: text/directory
Size: 634 bytes
Desc: not available
URL: <http://tug.org/pipermail/luatex/attachments/20110206/419d25ca/attachment.bin>
-------------- next part --------------



From wspr81 at gmail.com  Mon Feb  7 12:48:52 2011
From: wspr81 at gmail.com (Will Robertson)
Date: Mon, 7 Feb 2011 22:18:52 +1030
Subject: [luatex] [lltx]    Tracking feature with microtype and LuaTeX
In-Reply-To: <5CF0721B-0E60-4C52-BEAC-7FB4DBE6F342@unibas.ch>
References: <5CF0721B-0E60-4C52-BEAC-7FB4DBE6F342@unibas.ch>
Message-ID: <BF565B99-59CA-428F-A154-8E0A3C548D1A@gmail.com>

On 07/02/2011, at 7:57 AM, Till A. Heilmann wrote:

> a) I have to load the fontenc package (line 5) with option T1 (I keep reading loading fontenc is not necessary with fontspec)
> 
> and why
> 
> b) I need to set Bonum as \rmdefault with \renewcommand (line 7): is \setmainfont not supposed to handle this?

These lines eliminate what fontspec is doing to load the OpenType fonts. But it makes sense that you need to do this to because we haven't attempted any integration between microtype and fontspec yet. To be honest I've tried not to think about it.

Robert, have you any idea what is required in fontspec to achieve this? I have to admit not spending much time in microtype's internals.

Khaled had a couple of simple options in fontspec that bypassed microtype to activate the hz features but I thought it was better to wait until we could integrate the packages properly.

-- Will



From zappathustra at free.fr  Mon Feb  7 23:09:44 2011
From: zappathustra at free.fr (zappathustra)
Date: Mon, 07 Feb 2011 23:09:44 +0100
Subject: [luatex] Kern classes and lookups.
Message-ID: <4D506DA8.4060100@free.fr>

Hello there,

I'd be more than happy if anyone could answer some of the following 
questions. I'm sorry, it might be a bit fastidious.

See the code extract below; it's from a font GPOS table. I've removed 
some information, including the kerning tables themselves (i.e. firsts, 
seconds, and offsets). Now what puzzles me is the organization. Lookup 
pp_l_1_k_1 oversees with three kern classes, one associated with lookups 
pp_l_1_k_1 (the same), pp_l_1_k_2 and pp_l_1_k_3, the second with 
lookups pp_l_1_k_2 and pp_l_1_k_3, and the third with pp_l_1_k_3. Then 
pp_l_1_k_2 has two kern classes, one associated with itself and 
pp_l_1_k_3, and one with pp_l_1_k_3 only. Finally, pp_l_1_k_3 has one 
class, associated with itself. I've found this "reverse pyramid" in 
several font files. Besides, as far as I can tell, pp_l_1_k_1's second 
class (meaning the kerning pairs) is identical to pp_l_1_k_2's first 
(they're associated with the same lookups), and its third is equivalent 
to pp_l_1_k_2's second and pp_l_1_k_3's only class. Well, all that seems 
very logical, yet a bit redundant. Here are the questions:

1. What's the difference in status between a lookup in "name" and a 
lookup in "lookup". Does it mean that if, say, pp_l_1_k_1 is obeyed, 
pp_l_1_k_2 should be too? But why bother, since the classes in 
pp_l_1_k_2 are already in pp_l_1_k_1?
2. Is it aimed at the general possibility that those lookups might be 
fired separately, even though this is not the case in this font (they 
appear only here and all depend on the "kern" feature)?
3. The user requests +kern. I use pp_l_1_k_1's classes, but what do I do 
with the rest?
4. What's that pp_l_1_g_0 lookup doing anyway?
5. The information in the font's "kerns" table is identical to 
pp_l_1_k_1's: three classes, one with the three lookups, the other with 
2 and 3, the last with 3. Should I have relied on that in the first 
place and just don't pay attention to GPOS tables when they're of the 
"gpos_pair" type?

I'm sure I have other questions but let's leave it at that for the moment.

Thanks to anybody who bothered to read down to here,
Paul


%%% Extract from GPOS %%%
/2/type = gpos_pair
/2/name = pp_l_1
/2/features/1/tag = kern

/2/subtables/1/name = pp_l_1_g_0

/2/subtables/2/name = pp_l_1_k_1
                           /kernclass/1/lookup/1 = pp_l_1_k_1
                           /kernclass/1/lookup/2 = pp_l_1_k_2
                           /kernclass/1/lookup/3 = pp_l_1_k_3
                           /kernclass/2/lookup/1 = pp_l_1_k_2
                           /kernclass/2/lookup/2 = pp_l_1_k_3
                           /kernclass/3/lookup = pp_l_1_k_3

/2/subtables/3/name = pp_l_1_k_2
                           /kernclass/1/lookup/1 = pp_l_1_k_2
                           /kernclass/1/lookup/2 = pp_l_1_k_3
                           /kernclass/2/lookup = pp_l_1_k_3

/2/subtables/4/name = pp_l_1_k_3
                           /kernclass/1/lookup = pp_l_1_k_3
%%%%%%%%%%%%%%%%%

From taco at elvenkind.com  Tue Feb  8 07:57:02 2011
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 08 Feb 2011 07:57:02 +0100
Subject: [luatex] Kern classes and lookups.
In-Reply-To: <4D506DA8.4060100@free.fr>
References: <4D506DA8.4060100@free.fr>
Message-ID: <4D50E93E.2060906@elvenkind.com>

On 02/07/2011 11:09 PM, zappathustra wrote:
>
> I'm sure I have other questions but let's leave it at that for the moment.

I could try to answer this, but it will be much easier to do so
with either the to_table() dump of the font, or the actual font
itself.

Best wishes,
Taco

From till.heilmann at unibas.ch  Tue Feb  8 14:57:54 2011
From: till.heilmann at unibas.ch (Heilmann, Till A.)
Date: Tue, 8 Feb 2011 14:57:54 +0100
Subject: [luatex] German hyphenation, fontspec and adjusted kerning
Message-ID: <81EE4468-CD13-45B0-9F83-E0F5F3DC8E8A@unibas.ch>

As Ulrike Fischer pointed out to me, the German hyphenation patterns conflict with the adjustment of kerning pairs via fontspec and OTF feature files.

Minimal example ...

bonum.fea

languagesystem DFLT dflt;
languagesystem latn dflt;
feature kern {
pos f h 100;
} kern;

test.tex

\documentclass{article}
\makeatletter\bbl at patterns{ngerman}\makeatother
\usepackage{fontspec}
\setmainfont[FeatureFile=bonum.fea]{TeX Gyre Bonum}
\begin{document}
fh aufhalten
\end{document}

Is this a bug that can be fixed or do we have to live with it?
-- 
Dr. Till A. Heilmann
Research Assistant

UNIVERSITY OF BASEL
Institute for Media Studies
Bernoullistrasse 28
CH-4056 Basel
Tel. +41 (0)61 267 09 86
Fax  +41 (0)61 267 08 87
E-Mail till.heilmann at unibas.ch
www.mewi.unibas.ch

-------------- next part --------------
A non-text attachment was scrubbed...
Name: theilmann_card_en.vcf
Type: text/directory
Size: 614 bytes
Desc: not available
URL: <http://tug.org/pipermail/luatex/attachments/20110208/5fad1d74/attachment.bin>
-------------- next part --------------


From elie.roux at telecom-bretagne.eu  Tue Feb  8 16:10:04 2011
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Tue, 08 Feb 2011 16:10:04 +0100
Subject: [luatex] strange pdf
Message-ID: <4D515CCC.2020100@telecom-bretagne.eu>

Hello,

on http://norgz.guiling.fr/optima/ is a strange pdf : it shows well with 
xpdf and poppler, but on Acrobat Reader (latest versions of Linux and 
Windows), the italic words show up regular... Is it a bug in LuaTeX, 
fontspec, luaotfload or Acrobat Reader? I don't really know where to 
start as I'm far from being a pdf expert... In the same directory are 
the log file as well as the fonts with which I had this behaviour.

Thank you,
-- 
Elie

From w.m.l at gmx.net  Tue Feb  8 16:42:40 2011
From: w.m.l at gmx.net (Robert)
Date: Tue, 08 Feb 2011 16:42:40 +0100
Subject: [luatex] [lltx]    Tracking feature with microtype and LuaTeX
In-Reply-To: <5CF0721B-0E60-4C52-BEAC-7FB4DBE6F342@unibas.ch>
References: <5CF0721B-0E60-4C52-BEAC-7FB4DBE6F342@unibas.ch>
Message-ID: <4D516470.7040106@gmx.net>

[Sorry, Till, this was supposed to go to the lists]

On 06.02.11 22:27, Till A. Heilmann wrote:
 > What I do not understand is why
 >
 > a) I have to load the fontenc package (line 5) with option T1 (I keep
 > reading loading fontenc is not necessary with fontspec)
 >
 > and why
 >
 > b) I need to set Bonum as \rmdefault with \renewcommand (line 7): is
 > \setmainfont not supposed to handle this?

As Will noted, you disable fontenc with these lines.

The problem was that microtype did not correctly expand the variable 
"rm*" in the \SetTracking definition. It would have worked if you had 
written:

\SetTracking{encoding={*},family={TeX Gyre Bonum},size={8}}{188}

I've fixed this now in tlcontrib, so that you can remove lines 5 and 7 
again, and still say "rm*".

Regards,
-- 
  Robert

From w.m.l at gmx.net  Tue Feb  8 16:43:35 2011
From: w.m.l at gmx.net (Robert)
Date: Tue, 08 Feb 2011 16:43:35 +0100
Subject: [luatex] [lltx]    Tracking feature with microtype and LuaTeX
In-Reply-To: <BF565B99-59CA-428F-A154-8E0A3C548D1A@gmail.com>
References: <5CF0721B-0E60-4C52-BEAC-7FB4DBE6F342@unibas.ch>
 <BF565B99-59CA-428F-A154-8E0A3C548D1A@gmail.com>
Message-ID: <4D5164A7.2010202@gmx.net>

[Sorry, Will, this was supposed to go to the lists]

On 07.02.11 12:48, Will Robertson wrote:
 > Robert, have you any idea what is required in fontspec to achieve
 > this?

In this case, it was simply a bug in microtype (see my other mail). The 
basic things should already work.

However, both packages could indeed be integrated better. At the moment, 
microtype still uses the pdftex primitives to set up the fonts (\lccode 
etc.), while fontspec of course loads and modifies them in lua. The 
following would be conceptually cleaner, and probably also faster:
  * fontspec would call microtype just before loading the font,
  * microtype would then return a lua configuration table for this font,
  * and fontspec would pass this table to luaotfload (instead of 
luaotfload's "default" ones, which are really not very good IMHO)

In fontspec, this would probably only require the addition of one line. 
Unfortunately for me, the bulk of the changes would have to be made in 
microtype. And I won't be able to even start working on this before 
March ...


Regards,
-- 
  Robert

From zappathustra at free.fr  Tue Feb  8 16:52:40 2011
From: zappathustra at free.fr (Paul Isambert)
Date: Tue, 08 Feb 2011 16:52:40 +0100
Subject: [luatex] strange pdf
In-Reply-To: <4D515CCC.2020100@telecom-bretagne.eu>
References: <4D515CCC.2020100@telecom-bretagne.eu>
Message-ID: <4D5166C8.6070701@free.fr>

Le 08/02/2011 16:10, Elie Roux a ?crit :
> Hello,
>
> on http://norgz.guiling.fr/optima/ is a strange pdf : it shows well 
> with xpdf and poppler, but on Acrobat Reader (latest versions of Linux 
> and Windows), the italic words show up regular... Is it a bug in 
> LuaTeX, fontspec, luaotfload or Acrobat Reader? I don't really know 
> where to start as I'm far from being a pdf expert... In the same 
> directory are the log file as well as the fonts with which I had this 
> behaviour.

Unfortunately the fonts can't be accessed.
Anyway:
- make the same document with XeTeX, or even with OpenOffice or whatever 
(and turn it into a PDF in the later case); if the trouble remains, it 
comes from Acrobat or the font. Otherwise, the trouble comes from the 
packages or LuaTeX, so:
- Remove fontspec, i.e. use luaotfload directly: \input luaotfload.sty 
\font\myfont{Optima-Oblique.otf}, etc. If the problem remains:
- Load the font by yourself, without luaotfload.sty 
(http://wiki.luatex.org/index.php/Use_a_TrueType_font). If the problem 
remains: you have a bug.

Best,
Paul

From martin at oneiros.de  Tue Feb  8 16:54:55 2011
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Tue, 8 Feb 2011 16:54:55 +0100
Subject: [luatex] [lltx]  strange pdf
In-Reply-To: <4D5166C8.6070701@free.fr>
References: <4D515CCC.2020100@telecom-bretagne.eu> <4D5166C8.6070701@free.fr>
Message-ID: <AANLkTi=Vo+PZfZRM615inHj8gd3M-vkXcmGWuiyn5VSF@mail.gmail.com>

2011/2/8 Paul Isambert <zappathustra at free.fr>:
> - make the same document with XeTeX, or even with OpenOffice or whatever
> (and turn it into a PDF in the later case); if the trouble remains, it comes
> from Acrobat or the font. Otherwise, the trouble comes from the packages or

Acrobat Preflight shows no errors in the file.

Best
   Martin

From heiko.oberdiek at googlemail.com  Tue Feb  8 17:23:00 2011
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Tue, 8 Feb 2011 17:23:00 +0100
Subject: [luatex] [lltx] strange pdf
In-Reply-To: <4D515CCC.2020100@telecom-bretagne.eu>
References: <4D515CCC.2020100@telecom-bretagne.eu>
Message-ID: <20110208162300.GA17500@oberdiek.my-fqdn.de>

On Tue, Feb 08, 2011 at 04:10:04PM +0100, Elie Roux wrote:

> on http://norgz.guiling.fr/optima/ is a strange pdf : it shows well
> with xpdf and poppler,

xpdf 3.00: "s  es seco   es"
gs 8.70: "first    second"
acroread5/linux, acroread7/linux:
  "first test second test" with "test" in italics.
acroread8/linux: "first test second test" without italics

Result of "pdffonts testbug.pdf":

name                                 type         emb sub uni object ID
------------------------------------ ------------ --- --- --- ---------
FTDOSG+Optima                        CID Type 0C  yes yes yes      4  0
ONVDNU+Optima-Oblique                CID Type 0C  yes yes yes      5  0

Yours sincerely
  Heiko Oberdiek

From zappathustra at free.fr  Tue Feb  8 17:39:16 2011
From: zappathustra at free.fr (Paul Isambert)
Date: Tue, 08 Feb 2011 17:39:16 +0100
Subject: [luatex] [lltx] strange pdf
In-Reply-To: <20110208162300.GA17500@oberdiek.my-fqdn.de>
References: <4D515CCC.2020100@telecom-bretagne.eu>
 <20110208162300.GA17500@oberdiek.my-fqdn.de>
Message-ID: <4D5171B4.9090401@free.fr>

Also note that Windows can't read the font files (there are accessible 
after all, sorry for my earlier statement) and won't install it. It says 
they're invalid.
Best,
Paul

Le 08/02/2011 17:23, Heiko Oberdiek a ?crit :
> On Tue, Feb 08, 2011 at 04:10:04PM +0100, Elie Roux wrote:
>
>> on http://norgz.guiling.fr/optima/ is a strange pdf : it shows well
>> with xpdf and poppler,
> xpdf 3.00: "s  es seco   es"
> gs 8.70: "first    second"
> acroread5/linux, acroread7/linux:
>    "first test second test" with "test" in italics.
> acroread8/linux: "first test second test" without italics
>
> Result of "pdffonts testbug.pdf":
>
> name                                 type         emb sub uni object ID
> ------------------------------------ ------------ --- --- --- ---------
> FTDOSG+Optima                        CID Type 0C  yes yes yes      4  0
> ONVDNU+Optima-Oblique                CID Type 0C  yes yes yes      5  0
>
> Yours sincerely
>    Heiko Oberdiek

From elie.roux at telecom-bretagne.eu  Wed Feb  9 10:11:39 2011
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Wed, 09 Feb 2011 10:11:39 +0100
Subject: [luatex] [lltx]  strange pdf
In-Reply-To: <4D5166C8.6070701@free.fr>
References: <4D515CCC.2020100@telecom-bretagne.eu> <4D5166C8.6070701@free.fr>
Message-ID: <4D525A4B.8040403@telecom-bretagne.eu>

Hello,

sorry for the noise, I didn't suspect the font and it was the culprit... 
With another version everything works perfectly fine!

Thank you,
-- 
Elie

From kiryen at gmail.com  Thu Feb 10 12:23:13 2011
From: kiryen at gmail.com (Andy Lin)
Date: Thu, 10 Feb 2011 06:23:13 -0500
Subject: [luatex] Optical Sizes of Adobe Utopia Std Bold
Message-ID: <AANLkTinwNgvgWpBXze+VO3jMEMXc5pGvwHXQHav5p69K@mail.gmail.com>

Hi,
I just started using LuaLaTeX for the first time this week (texlive
2010) and I've run into a problem. Below is a minimal example:

\documentclass{article}
\usepackage{fontspec}
\usepackage{graphics}
\setmainfont{Utopia Std}
\begin{document}
\noindent\resizebox{!}{24pt}{\fontsize{24}{28}\selectfont k \textbf{k}
\textit{k} \textbf{\textit{k}}}\\
\resizebox{!}{24pt}{\fontsize{16}{28}\selectfont k \textbf{k}
\textit{k} \textbf{\textit{k}}}\\
\resizebox{!}{24pt}{\fontsize{10}{28}\selectfont k \textbf{k}
\textit{k} \textbf{\textit{k}}}\\
\resizebox{!}{24pt}{\fontsize{8}{28}\selectfont k \textbf{k}
\textit{k} \textbf{\textit{k}}}
\end{document}

If this is processed with lualatex, the bold 24-point k is typeset
with Utopia Std Bold Caption when it is supposed to be typeset with
Utopia Std Bold Display. Oddly enough, all the other characters have
the correct optical size font. Using xelatex, this problem does not
occur. (I've attached the output for both and the log for the luatex
run.)

I've tried clearing the lua font cache in texmf-var and running
mkluatexfontdb with the -f switch.

When I look at the log, I find this:

luaotfload | load font: auto-selecting default features for script: dflt (was l
atn)
luaotfload | load font: font family='utopiastd', subfamily='regular' found: uto
piastd-disp.otf(load: D:/texlive/texmf-var/luatex-cache/generic/fonts/otf/temp-
utopiastd-disp.lua)
luaotfload | load font: auto-selecting default features for script: dflt (was l
atn)
luaotfload | load font: font family='utopiastd', subfamily='bold' found: utopia
std-boldcapt.otf(load: D:/texlive/texmf-var/luatex-cache/generic/fonts/otf/temp
-utopiastd-boldcapt.lua)
luaotfload | load font: auto-selecting default features for script: dflt (was l
atn)
luaotfload | load font: font family='utopiastd', subfamily='italic' found: utop
iastd-dispit.otf(load: D:/texlive/texmf-var/luatex-cache/generic/fonts/otf/temp
-utopiastd-dispit.lua)
luaotfload | load font: auto-selecting default features for script: dflt (was l
atn)
luaotfload | load font: font family='utopiastd', subfamily='bolditalic' found:
utopiastd-bolddispit.otf(load: D:/texlive/texmf-var/luatex-cache/generic/fonts/
otf/temp-utopiastd-bolddispit.lua)

When luaotfload loads the fonts for the first line, it selects the
Display size for the other three characters, but selects the Caption
size for the bold character. Is this a fontspec problem? Or is there
something wrong with my luatex setup?

Thanks!
-Andy
-------------- next part --------------
A non-text attachment was scrubbed...
Name: uxetex.pdf
Type: application/pdf
Size: 21051 bytes
Desc: not available
URL: <http://tug.org/pipermail/luatex/attachments/20110210/44026e94/attachment-0002.pdf>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: uluatex.pdf
Type: application/pdf
Size: 20376 bytes
Desc: not available
URL: <http://tug.org/pipermail/luatex/attachments/20110210/44026e94/attachment-0003.pdf>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: uluatex.log
Type: application/octet-stream
Size: 35244 bytes
Desc: not available
URL: <http://tug.org/pipermail/luatex/attachments/20110210/44026e94/attachment-0001.obj>

From kiryen at gmail.com  Mon Feb 14 07:15:28 2011
From: kiryen at gmail.com (Andy Lin)
Date: Mon, 14 Feb 2011 01:15:28 -0500
Subject: [luatex] Removing directories from mkluatexfontdb search
Message-ID: <AANLkTiks_XBFdQHj2f1ha+89r_gGTMBaoB=-cZvvS=Ob@mail.gmail.com>

Is there any way to remove a directory from the list that
mkluatexfontdb searches?

I'm currently using texlive 2010 on a Windows machine and it searches
Windows/Fonts and Program Files/Adobe/Reader 9.0/resource/font by
default. Setting OSFONTDIR doesn't restrict searching to that
directory, it merely adds it. I've looked at the lua files, but I'm
not sure where these paths are being stored. Is there a file like
XeTeX's fonts.conf/localfonts.conf?

Thanks,

Andy

From khaledhosny at eglug.org  Mon Feb 14 13:51:16 2011
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Mon, 14 Feb 2011 14:51:16 +0200
Subject: [luatex] Removing directories from mkluatexfontdb search
In-Reply-To: <AANLkTiks_XBFdQHj2f1ha+89r_gGTMBaoB=-cZvvS=Ob@mail.gmail.com>
References: <AANLkTiks_XBFdQHj2f1ha+89r_gGTMBaoB=-cZvvS=Ob@mail.gmail.com>
Message-ID: <20110214125116.GA1901@khaled-laptop>

On Mon, Feb 14, 2011 at 01:15:28AM -0500, Andy Lin wrote:
> Is there any way to remove a directory from the list that
> mkluatexfontdb searches?
> 
> I'm currently using texlive 2010 on a Windows machine and it searches
> Windows/Fonts and Program Files/Adobe/Reader 9.0/resource/font by
> default. Setting OSFONTDIR doesn't restrict searching to that
> directory, it merely adds it. I've looked at the lua files, but I'm
> not sure where these paths are being stored. Is there a file like
> XeTeX's fonts.conf/localfonts.conf?

There is no support for that currently, but you can blacklist individual
fonts, check luaotfload manual for documentation.

Regards,
 Khaled

-- 
 Khaled Hosny
 Egyptian

From kiryen at gmail.com  Tue Feb 15 04:12:20 2011
From: kiryen at gmail.com (Andy Lin)
Date: Mon, 14 Feb 2011 22:12:20 -0500
Subject: [luatex] Removing directories from mkluatexfontdb search
In-Reply-To: <20110214125116.GA1901@khaled-laptop>
References: <AANLkTiks_XBFdQHj2f1ha+89r_gGTMBaoB=-cZvvS=Ob@mail.gmail.com>
 <20110214125116.GA1901@khaled-laptop>
Message-ID: <AANLkTinN7tCcvjBzi9yhAXpR6Lmn9EVmc0s1m8JDR=uG@mail.gmail.com>

Thanks, I'll look into that!
-Andy

On Mon, Feb 14, 2011 at 07:51, Khaled Hosny <khaledhosny at eglug.org> wrote:
> On Mon, Feb 14, 2011 at 01:15:28AM -0500, Andy Lin wrote:
>> Is there any way to remove a directory from the list that
>> mkluatexfontdb searches?
>>
>> I'm currently using texlive 2010 on a Windows machine and it searches
>> Windows/Fonts and Program Files/Adobe/Reader 9.0/resource/font by
>> default. Setting OSFONTDIR doesn't restrict searching to that
>> directory, it merely adds it. I've looked at the lua files, but I'm
>> not sure where these paths are being stored. Is there a file like
>> XeTeX's fonts.conf/localfonts.conf?
>
> There is no support for that currently, but you can blacklist individual
> fonts, check luaotfload manual for documentation.
>
> Regards,
> ?Khaled
>
> --
> ?Khaled Hosny
> ?Egyptian
>


From yannis.haralambous at telecom-bretagne.eu  Wed Feb 16 06:27:15 2011
From: yannis.haralambous at telecom-bretagne.eu (Yannis Haralambous)
Date: Wed, 16 Feb 2011 14:27:15 +0900
Subject: [luatex] Error when compiling luatex on MacOS X
Message-ID: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>

Hi everybody,
I tried (after a long time) to checkout luatex from the SVN server. After fetching and compiling many files, it ended with the following error:

mkdir -p ../../libs/lua51 && cd ../../libs/lua51 && cp -f ../../../src/texk/web2c/../../libs/lua51/* . && make posix
make a MYCFLAGS=-DLUA_USE_POSIX
cc -DLUA_USE_POSIX    -c lapi.c
cc -DLUA_USE_POSIX    -c lcode.c
cc -DLUA_USE_POSIX    -c ldebug.c
ldebug.c: In function ?precheck?:
ldebug.c:279: warning: comparison is always true due to limited range of data type
cc -DLUA_USE_POSIX    -c ldo.c
cc -DLUA_USE_POSIX    -c ldump.c
cc -DLUA_USE_POSIX    -c lfunc.c
cc -DLUA_USE_POSIX    -c lgc.c
cc -DLUA_USE_POSIX    -c llex.c
cc -DLUA_USE_POSIX    -c lmem.c
cc -DLUA_USE_POSIX    -c lobject.c
cc -DLUA_USE_POSIX    -c lopcodes.c
cc -DLUA_USE_POSIX    -c lparser.c
cc -DLUA_USE_POSIX    -c lstate.c
cc -DLUA_USE_POSIX    -c lstring.c
cc -DLUA_USE_POSIX    -c ltable.c
cc -DLUA_USE_POSIX    -c ltm.c
cc -DLUA_USE_POSIX    -c lundump.c
cc -DLUA_USE_POSIX    -c lvm.c
cc -DLUA_USE_POSIX    -c lzio.c
cc -DLUA_USE_POSIX    -c lcoco.c
In file included from lcoco.c:344:
/usr/include/ucontext.h:42:2: error: #error ucontext routines are deprecated, and require _XOPEN_SOURCE to be defined
lcoco.c:352:1: warning: "COCO_MAIN_PARAM" redefined
lcoco.c:248:1: warning: this is the location of the previous definition
lcoco.c:382: error: expected specifier-qualifier-list before ?ucontext_t?
lcoco.c: In function ?coco_main?:
lcoco.c:454: error: ?coco_State? has no member named ?nargs?
lcoco.c:456: error: ?coco_State? has no member named ?ctx?
lcoco.c:456: error: ?coco_State? has no member named ?back?
lcoco.c: In function ?lua_newcthread?:
lcoco.c:473: error: ?coco_State? has no member named ?allocptr?
lcoco.c:473: error: ?coco_State? has no member named ?allocsize?
lcoco.c:473: error: ?coco_State? has no member named ?ctx?
lcoco.c:473: error: ?coco_State? has no member named ?ctx?
lcoco.c:473: error: ?coco_State? has no member named ?ctx?
lcoco.c:473: error: ?coco_State? has no member named ?allocptr?
lcoco.c:473: error: ?coco_State? has no member named ?ctx?
lcoco.c:473: error: ?coco_State? has no member named ?allocptr?
lcoco.c:473: error: ?coco_State? has no member named ?ctx?
lcoco.c: In function ?luaCOCO_free?:
lcoco.c:481: error: ?coco_State? has no member named ?allocptr?
lcoco.c:481: error: ?coco_State? has no member named ?allocsize?
lcoco.c: In function ?luaCOCO_resume?:
lcoco.c:488: error: ?coco_State? has no member named ?nargs?
lcoco.c:489: error: ?coco_State? has no member named ?back?
lcoco.c:489: error: ?coco_State? has no member named ?ctx?
lcoco.c:492: error: ?coco_State? has no member named ?allocptr?
lcoco.c:492: error: ?coco_State? has no member named ?allocsize?
lcoco.c: In function ?luaCOCO_yield?:
lcoco.c:503: error: ?coco_State? has no member named ?ctx?
lcoco.c:503: error: ?coco_State? has no member named ?back?
lcoco.c:506: error: ?coco_State? has no member named ?nargs?
lcoco.c:515: error: ?coco_State? has no member named ?nargs?
make[2]: *** [lcoco.o] Error 1
make[1]: *** [posix] Error 2
make: *** [../../libs/lua51/liblua.a] Error 2


Any idea what may be going wrong? Or how to avoid this?

-- 
-------------------------------------------------------
Yannis Haralambous
Directeur d'?tudes
ADRESSE TEMPORAIRE :
University of Aizu
Aizu-Wakamatsu, Fukushima-ken  965-8580, Japon
ADRESSE PERMANENTE :
Institut T?l?com, T?l?com Bretagne
D?partement Informatique
UMR CNRS 3192 Lab-STICC
Technop?le Brest Iroise
CS 83818, 29238 Brest Cedex 3, France
Tel: +33 2 29 00 14 27
Fax: +33 2 29 00 12 82
Email: yannis.haralambous at telecom-bretagne.eu
Internet: http://omega.enstb.org/yannis
ICBM address: 48?21'31.57"N 4?34'16.76"W
Twitter: y_haralambous
-------------------------------------------------------
...pour distinguer l'ext?rieur d'un aquarium,
mieux vaut n'?tre pas poisson

...the ball I threw while playing in the park
has not yet reached the ground

Es gab eine Zeit, wo ich nur ungern ?ber Schubert sprechen,
nur N?chtens den B?umen und Sternen von ihm vorerz?hlen m?gen.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Yannis Haralambous.vcf
Type: text/directory
Size: 508 bytes
Desc: not available
URL: <http://tug.org/pipermail/luatex/attachments/20110216/c8dfd371/attachment.bin>
-------------- next part --------------


From taco at elvenkind.com  Wed Feb 16 07:34:03 2011
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 16 Feb 2011 07:34:03 +0100
Subject: [luatex] Error when compiling luatex on MacOS X
In-Reply-To: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
References: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
Message-ID: <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>


> 
> In file included from lcoco.c:344:
> /usr/include/ucontext.h:42:2: error: #error ucontext routines are deprecated, and require _XOPEN_SOURCE to be defined
> 

At least this message is pretty clear. 

> 
> Any idea what may be going wrong? Or how to avoid this?

You should not have updated to Snow Leopard ;)

Seriously: Apple decided that some stuff that was fine before should not be used any more from now on. Luatex needs to be patched for that, I will add a tracker item for myself to work on it.

Best wishes,
Taco


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/luatex/attachments/20110216/9553fc96/attachment.html>

From patrick at gundla.ch  Wed Feb 16 07:54:05 2011
From: patrick at gundla.ch (Patrick Gundlach)
Date: Wed, 16 Feb 2011 07:54:05 +0100
Subject: [luatex] Error when compiling luatex on MacOS X
In-Reply-To: <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>
References: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
 <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>
Message-ID: <4518694B-30AC-462B-8AD3-BE92CF9DFADB@gundla.ch>


>> You should not have updated to Snow Leopard ;)

> Seriously: Apple decided that some stuff that was fine before should not be used any more from now on. Luatex needs to be patched for that, I will add a tracker item for myself to work on it.

I am able to compile LuaTeX on Mac OS X, 10.6.6, and I believe that this is snow leopard.

Patrick



From luigi.scarso at gmail.com  Wed Feb 16 08:17:28 2011
From: luigi.scarso at gmail.com (luigi scarso)
Date: Wed, 16 Feb 2011 08:17:28 +0100
Subject: [luatex] Error when compiling luatex on MacOS X
In-Reply-To: <4518694B-30AC-462B-8AD3-BE92CF9DFADB@gundla.ch>
References: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
 <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>
 <4518694B-30AC-462B-8AD3-BE92CF9DFADB@gundla.ch>
Message-ID: <AANLkTik8J=2mc=O95L6RCbFiWG0gmj78RgSUTZghZBbM@mail.gmail.com>

On Wed, Feb 16, 2011 at 7:54 AM, Patrick Gundlach <patrick at gundla.ch> wrote:
>
>>> You should not have updated to Snow Leopard ;)
>
>> Seriously: Apple decided that some stuff that was fine before should not be used any more from now on. Luatex needs to be patched for that, I will add a tracker item for myself to work on it.
>
> I am able to compile LuaTeX on Mac OS X, 10.6.6, and I believe that this is snow leopard.
>
> Patrick
>
>
>
How is your
/usr/include/ucontext.h
?


-- 
luigi

From patrick at gundla.ch  Wed Feb 16 08:32:16 2011
From: patrick at gundla.ch (Patrick Gundlach)
Date: Wed, 16 Feb 2011 08:32:16 +0100
Subject: [luatex] Error when compiling luatex on MacOS X
In-Reply-To: <AANLkTik8J=2mc=O95L6RCbFiWG0gmj78RgSUTZghZBbM@mail.gmail.com>
References: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
 <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>
 <4518694B-30AC-462B-8AD3-BE92CF9DFADB@gundla.ch>
 <AANLkTik8J=2mc=O95L6RCbFiWG0gmj78RgSUTZghZBbM@mail.gmail.com>
Message-ID: <6A90A4CC-C718-49D7-9BB9-EA39D2FE8B74@gundla.ch>


>> I am able to compile LuaTeX on Mac OS X, 10.6.6, and I believe that this is snow leopard.

> How is your /usr/include/ucontext.h?

Very well, thanks for asking :)




#ifndef _UCONTEXT_H_
#define _UCONTEXT_H_

#include <sys/cdefs.h>

#ifdef _XOPEN_SOURCE
#include <sys/ucontext.h>

__BEGIN_DECLS
int  getcontext(ucontext_t *);
void makecontext(ucontext_t *, void (*)(), int, ...);
int  setcontext(const ucontext_t *);
int  swapcontext(ucontext_t * __restrict, const ucontext_t * __restrict);
__END_DECLS
#else /* !_XOPEN_SOURCE */
#error ucontext routines are deprecated, and require _XOPEN_SOURCE to be defined
#endif /* _XOPEN_SOURCE */

#endif /* _UCONTEXT_H_ */




From luigi.scarso at gmail.com  Wed Feb 16 08:50:10 2011
From: luigi.scarso at gmail.com (luigi scarso)
Date: Wed, 16 Feb 2011 08:50:10 +0100
Subject: [luatex] Error when compiling luatex on MacOS X
In-Reply-To: <6A90A4CC-C718-49D7-9BB9-EA39D2FE8B74@gundla.ch>
References: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
 <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>
 <4518694B-30AC-462B-8AD3-BE92CF9DFADB@gundla.ch>
 <AANLkTik8J=2mc=O95L6RCbFiWG0gmj78RgSUTZghZBbM@mail.gmail.com>
 <6A90A4CC-C718-49D7-9BB9-EA39D2FE8B74@gundla.ch>
Message-ID: <AANLkTi=S9u_C__infbU+FRGJj0_DG0KiaYsj7=nwrhhj@mail.gmail.com>

On Wed, Feb 16, 2011 at 8:32 AM, Patrick Gundlach <patrick at gundla.ch> wrote:
>
>>> I am able to compile LuaTeX on Mac OS X, 10.6.6, and I believe that this is snow leopard.
>
>> How is your /usr/include/ucontext.h?
>
> Very well, thanks for asking :)
>
>
>
>
> #ifndef _UCONTEXT_H_
> #define _UCONTEXT_H_
>
> #include <sys/cdefs.h>
>
> #ifdef _XOPEN_SOURCE
> #include <sys/ucontext.h>
>
> __BEGIN_DECLS
> int ?getcontext(ucontext_t *);
> void makecontext(ucontext_t *, void (*)(), int, ...);
> int ?setcontext(const ucontext_t *);
> int ?swapcontext(ucontext_t * __restrict, const ucontext_t * __restrict);
> __END_DECLS
> #else /* !_XOPEN_SOURCE */
> #error ucontext routines are deprecated, and require _XOPEN_SOURCE to be defined
> #endif /* _XOPEN_SOURCE */
>
> #endif /* _UCONTEXT_H_ */
>
>
>
>

So it is healthy like the first one..

-- 
luigi


From patrick at gundla.ch  Wed Feb 16 09:12:23 2011
From: patrick at gundla.ch (Patrick Gundlach)
Date: Wed, 16 Feb 2011 09:12:23 +0100
Subject: [luatex] Error when compiling luatex on MacOS X
In-Reply-To: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
References: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
Message-ID: <5306AFE0-8592-47B1-80EE-F5EF6B3598C0@gundla.ch>

Hi,

> mkdir -p ../../libs/lua51 && cd ../../libs/lua51 && cp -f ../../../src/texk/web2c/../../libs/lua51/* . && make posix
> make a MYCFLAGS=-DLUA_USE_POSIX

[...]

when I compile luatex on OS X, I don't get these lines.

Patrick



From till.heilmann at unibas.ch  Wed Feb 16 09:32:54 2011
From: till.heilmann at unibas.ch (Heilmann, Till A.)
Date: Wed, 16 Feb 2011 09:32:54 +0100
Subject: [luatex] German hyphenation, fontspec and adjusted kerning
Message-ID: <3C9AABB1-EA6D-48E4-A58F-659C088779C2@unibas.ch>

(Since there has been no reply to my earlier posting, I will try to be a bit more specific this time. Also, I am not sure if this is the appropriate place to ask the question. If not, maybe someone can point me in the right direction?)

There is a problem with adjusted kerning in OpenType fonts and hyphenation patterns.

Customized kerning of letter pairs (via the FeatureFile capability of fontspec) is ignored when it coincides with a possible hyphenation of a word. As Ulrike Fischer pointed out to me, the problem seems to be the break points between the adjusted kerning pairs (e.g. between 'f' and 'h' in German words like 'aufhalten'; see minimal example below).

Is this a bug and/or is it unavoidable?

Thanks,
- Till

\begin{filecontents*}{bonum.fea}
languagesystem DFLT dflt;
languagesystem latn dflt;
feature kern {
pos f h 100;
} kern;
\end{filecontents*}
\documentclass{article}
\usepackage[ngerman]{babel}
\usepackage{fontspec}
\setmainfont[FeatureFile=bonum.fea]{TeX Gyre Bonum}
\begin{document}
fh aufhalten
\end{document}




From ab31 at ualberta.ca  Wed Feb 16 12:23:59 2011
From: ab31 at ualberta.ca (Aditya Bhargava)
Date: Wed, 16 Feb 2011 04:23:59 -0700
Subject: [luatex] luatex's (mis-)handling of Unicode Devanagari vowel signs
	and ligatures
Message-ID: <AANLkTimC+DhpJgCLtTkYMd-36nYB3193AV3VzXdBCdNY@mail.gmail.com>

Hello all,

I have recently found myself needing to include small bits of text (words)
from various languages in a latex document. To try and make this easier on
myself, I decided to try out lualatex, and originally steered clear of
xelatex because I wanted a tex engine that would provide PDF natively (I
also want to be try out the microtype package, but this isn't terribly
important). I'm doing this on Ubuntu 10.10, which uses TeX Live 2009, and
since the examples I found all used fontspec which (as I recall, and
hopefully read correctly) didn't work with luatex until TeX Live 2010, I
downloaded that and installed it (separately from the 2009 installation, of
course). All of my runs have been done using what is included with TeX Live
2010 (though I did grab the latest source for luaotfload, since there was an
infinite loop bug that got fixed recently).

I got Cyrillic, IPA, and Japanese displaying well, but the Devanagari script
(for Hindi) has been causing me some problems. In particular, the vowel
signs and ligatures are not being rendered (if that's the right word)
correctly, and this is the case using any font. I gave xelatex a shot (which
I am stuck with for now), and it seems to handle them correctly. I can
describe it, or I can just show you---I didn't want to attach PDFs as I'm
not sure what the rules are for this list, so you can grab them online:

http://www.cs.ualberta.ca/~ab31/bad-dn/dn-xelatex.pdf
http://www.cs.ualberta.ca/~ab31/bad-dn/dn-lualatex.pdf

And here is the code that generated them:

\documentclass[11pt]{report}
\usepackage{fontspec}
%\usepackage[english]{babel}
\newcommand{\hindi}[1]{{\fontspec[Script=Devanagari]{Nakula}#1}}
\begin{document}
Here is the word:\\
\hindi{???????}\\
The Unicode character sequence is:\\
\hindi{? ? ? ? ? ? ?}\\
a.k.a.\\
\texttt{U+0917 U+0930 U+094D U+0936 U+0935 U+093F U+0928}
\end{document}

Which you can grab from:
http://www.cs.ualberta.ca/~ab31/bad-dn/dn.tex

Hopefully you can see what the issue is; I've included the characters
separately so that you can see the whole sequence. If it's not clear from
the PDFs I can elaborate further.

I should be OK using xelatex for now, but if this is a bug hopefully now
it's known and can be treated as such. If I'm doing something wrong, I'd
love to hear it!

TIA,
Aditya
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/luatex/attachments/20110216/bb82e7eb/attachment.html>

From khaledhosny at eglug.org  Wed Feb 16 16:15:34 2011
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 16 Feb 2011 17:15:34 +0200
Subject: [luatex] luatex's (mis-)handling of Unicode Devanagari vowel
 signs and ligatures
In-Reply-To: <AANLkTimC+DhpJgCLtTkYMd-36nYB3193AV3VzXdBCdNY@mail.gmail.com>
References: <AANLkTimC+DhpJgCLtTkYMd-36nYB3193AV3VzXdBCdNY@mail.gmail.com>
Message-ID: <20110216151534.GB2349@khaled-laptop>

There is currently no support for Indic scripts in our OpenType layout
engine, simply because no one asked for it.

Since Hans don't read any of these languages, he will need help from
someone who can. So if you are interested in digging into this finding
relivant specs, fonts, reference renderings and so (be warned, Indic
support is OpenType is a big mess with basically two incompatible
standards one deprecated but there are many fonts out there using it),
then contact Hans and I think he would be interested in such help.

Regards,
 Khaled

On Wed, Feb 16, 2011 at 04:23:59AM -0700, Aditya Bhargava wrote:
> Hello all,
> 
> I have recently found myself needing to include small bits of text (words) from
> various languages in a latex document. To try and make this easier on myself, I
> decided to try out lualatex, and originally steered clear of xelatex because I
> wanted a tex engine that would provide PDF natively (I also want to be try out
> the microtype package, but this isn't terribly important). I'm doing this on
> Ubuntu 10.10, which uses TeX Live 2009, and since the examples I found all used
> fontspec which (as I recall, and hopefully read correctly) didn't work with
> luatex until TeX Live 2010, I downloaded that and installed it (separately from
> the 2009 installation, of course). All of my runs have been done using what is
> included with TeX Live 2010 (though I did grab the latest source for
> luaotfload, since there was an infinite loop bug that got fixed recently).
> 
> I got Cyrillic, IPA, and Japanese displaying well, but the Devanagari script
> (for Hindi) has been causing me some problems. In particular, the vowel signs
> and ligatures are not being rendered (if that's the right word) correctly, and
> this is the case using any font. I gave xelatex a shot (which I am stuck with
> for now), and it seems to handle them correctly. I can describe it, or I can
> just show you---I didn't want to attach PDFs as I'm not sure what the rules are
> for this list, so you can grab them online:
> 
> http://www.cs.ualberta.ca/~ab31/bad-dn/dn-xelatex.pdf
> http://www.cs.ualberta.ca/~ab31/bad-dn/dn-lualatex.pdf
> 
> And here is the code that generated them:
> 
> \documentclass[11pt]{report}
> \usepackage{fontspec}
> %\usepackage[english]{babel}
> \newcommand{\hindi}[1]{{\fontspec[Script=Devanagari]{Nakula}#1}}
> \begin{document}
> Here is the word:\\
> \hindi{???????}\\
> The Unicode character sequence is:\\
> \hindi{? ? ?? ? ??}\\
> a.k.a.\\
> \texttt{U+0917 U+0930 U+094D U+0936 U+0935 U+093F U+0928}
> \end{document}
> 
> Which you can grab from:
> http://www.cs.ualberta.ca/~ab31/bad-dn/dn.tex
> 
> Hopefully you can see what the issue is; I've included the characters
> separately so that you can see the whole sequence. If it's not clear from the
> PDFs I can elaborate further.
> 
> I should be OK using xelatex for now, but if this is a bug hopefully now it's
> known and can be treated as such. If I'm doing something wrong, I'd love to
> hear it!
> 
> TIA,
> Aditya

-- 
 Khaled Hosny
 Egyptian

From yannis.haralambous at telecom-bretagne.eu  Thu Feb 17 02:49:32 2011
From: yannis.haralambous at telecom-bretagne.eu (Yannis Haralambous)
Date: Thu, 17 Feb 2011 10:49:32 +0900
Subject: [luatex] Error when compiling luatex on MacOS X
In-Reply-To: <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>
References: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
 <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>
Message-ID: <A86EB785-5AA9-45F2-9238-2140CD01FB26@telecom-bretagne.eu>

I have exactly the same /usr/include/ucontext.h as Patrick, but he is able to compile and I am not?
Maybe the error is elsewhere?

Le 16 f?vr. 2011 ? 15:34, Taco Hoekwater a ?crit :

> 
>> 
>> In file included from lcoco.c:344:
>> /usr/include/ucontext.h:42:2: error: #error ucontext routines are deprecated, and require _XOPEN_SOURCE to be defined
>> 
> 
> At least this message is pretty clear. 
> 
>> 
>> Any idea what may be going wrong? Or how to avoid this?
> 
> You should not have updated to Snow Leopard ;)
> 
> Seriously: Apple decided that some stuff that was fine before should not be used any more from now on. Luatex needs to be patched for that, I will add a tracker item for myself to work on it.
> 
> Best wishes,
> Taco
> 
> 

-- 
-------------------------------------------------------
Yannis Haralambous
Directeur d'?tudes
ADRESSE TEMPORAIRE :
University of Aizu
Aizu-Wakamatsu, Fukushima-ken  965-8580, Japon
ADRESSE PERMANENTE :
Institut T?l?com, T?l?com Bretagne
D?partement Informatique
UMR CNRS 3192 Lab-STICC
Technop?le Brest Iroise
CS 83818, 29238 Brest Cedex 3, France
Tel: +33 2 29 00 14 27
Fax: +33 2 29 00 12 82
Email: yannis.haralambous at telecom-bretagne.eu
Internet: http://omega.enstb.org/yannis
ICBM address: 48?21'31.57"N 4?34'16.76"W
Twitter: y_haralambous
-------------------------------------------------------
...pour distinguer l'ext?rieur d'un aquarium,
mieux vaut n'?tre pas poisson

...the ball I threw while playing in the park
has not yet reached the ground

Es gab eine Zeit, wo ich nur ungern ?ber Schubert sprechen,
nur N?chtens den B?umen und Sternen von ihm vorerz?hlen m?gen.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/luatex/attachments/20110217/618ad6eb/attachment-0002.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Yannis Haralambous.vcf
Type: text/directory
Size: 508 bytes
Desc: not available
URL: <http://tug.org/pipermail/luatex/attachments/20110217/618ad6eb/attachment-0001.bin>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/luatex/attachments/20110217/618ad6eb/attachment-0003.html>

From reinhard.kotucha at web.de  Thu Feb 17 03:46:48 2011
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Thu, 17 Feb 2011 03:46:48 +0100
Subject: [luatex] Error when compiling luatex on MacOS X
In-Reply-To: <A86EB785-5AA9-45F2-9238-2140CD01FB26@telecom-bretagne.eu>
References: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
 <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>
 <A86EB785-5AA9-45F2-9238-2140CD01FB26@telecom-bretagne.eu>
Message-ID: <19804.35864.781990.49576@zaphod.ms25.net>

On 17 February 2011 Yannis Haralambous wrote:

 > -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;
 > ">I have exactly the same /usr/include/ucontext.h as Patrick, but
 > he is able to compile and I am not?<div>Maybe the error is
 > elsewhere?</div><div><br><div><div>Le 16 f?vr. 2011 ? 15:34, Taco
 > Hoekwater a ?crit :</div><br
 > class="Apple-interchange-newline"><blockquote type="cite"><div
 > bgcolor="#FFFFFF"><div><br></div><blockquote type="cite"><div><font
 > class="Apple-style-span"><br></font><span>In file included from
 > lcoco.c:344:</span><br><span>/usr/include/ucontext.h:42:2: error:
 > #error ucontext routines are deprecated, and require _XOPEN_SOURCE
 > to be
 > defined</span><br><span></span><br></div></blockquote><div><br></div>At
 > least this message is pretty clear.&nbsp;<div><br><blockquote
 > type="cite"><div><span></span><br><span>Any idea what may be going
 > wrong? Or how to avoid
 > this?</span><br></div></blockquote><br></div><div>You should not
 > have updated to Snow Leopard ;)</div><div><br></div><div>Seriously:
 > Apple decided that some stuff that was fine before should not be
 > used any more from now on. Luatex needs to be patched for that, I
 > will add a tracker item for myself to work on
 > it.</div><div><br></div><div>Best
 > wishes,</div><div>Taco</div><div><br></div><div><br></div></div></blockquote></div><br><div
 > apple-content-edited="true"> <span class="Apple-style-span"
 > style="border-collapse: separate; color: rgb(0, 0, 0); font-family:
 > Helvetica; font-style: normal; font-variant: normal; font-weight:
 > normal; letter-spacing: normal; line-height: normal; orphans: 2;
 > text-align: auto; text-indent: 0px; text-transform: none;
 > white-space: normal; widows: 2; word-spacing: 0px;
 > -webkit-border-horizontal-spacing: 0px;
 > -webkit-border-vertical-spacing: 0px;
 > -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust:
 > auto; -webkit-text-stroke-width: 0px; font-size: medium; "><span
 > class="Apple-style-span" style="border-collapse: separate; color:
 > rgb(0, 0, 0); font-family: Helvetica; font-style: normal;
 > font-variant: normal; font-weight: normal; letter-spacing: normal;
 > line-height: normal; orphans: 2; text-indent: 0px; text-transform:
 > none; white-space: normal; widows: 2; word-spacing: 0px;
 > -webkit-border-horizontal-spacing: 0px;
 > -webkit-border-vertical-spacing: 0px;
 > -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust:
 > auto; -webkit-text-stroke-width: 0px; font-size: medium; "><span
 > class="Apple-style-span" style="border-collapse: separate; color:
 > rgb(0, 0, 0); font-family: Helvetica; font-style: normal;
 > font-variant: normal; font-weight: normal; letter-spacing: normal;
 > line-height: normal; orphans: 2; text-indent: 0px; text-transform:
 > none; white-space: normal; widows: 2; word-spacing: 0px;
 > -webkit-border-horizontal-spacing: 0px;
 > -webkit-border-vertical-spacing: 0px;
 > -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust:
 > auto; -webkit-text-stroke-width: 0px; font-size: medium; "><span
 > class="Apple-style-span" style="border-collapse: separate; color:
 > rgb(0, 0, 0); font-family: Helvetica; font-style: normal;
 > font-variant: normal; font-weight: normal; letter-spacing: normal;
 > line-height: normal; orphans: 2; text-indent: 0px; text-transform:
 > none; white-space: normal; widows: 2; word-spacing: 0px;
 > -webkit-border-horizontal-spacing: 0px;
 > -webkit-border-vertical-spacing: 0px;
 > -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust:
 > auto; -webkit-text-stroke-width: 0px; font-size: medium; "><span
 > class="Apple-style-span" style="border-collapse: separate; color:
 > rgb(0, 0, 0); font-family: Helvetica; font-style: normal;
 > font-variant: normal; font-weight: normal; letter-spacing: normal;
 > line-height: normal; orphans: 2; text-indent: 0px; text-transform:
 > none; white-space: normal; widows: 2; word-spacing: 0px;
 > -webkit-border-horizontal-spacing: 0px;
 > -webkit-border-vertical-spacing: 0px;
 > -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust:
 > auto; -webkit-text-stroke-width: 0px; font-size: medium; "><span
 > class="Apple-style-span" style="border-collapse: separate; color:
 > rgb(0, 0, 0); font-family: Helvetica; font-style: normal;
 > font-variant: normal; font-weight: normal; letter-spacing: normal;
 > line-height: normal; orphans: 2; text-indent: 0px; text-transform:
 > none; white-space: normal; widows: 2; word-spacing: 0px;
 > -webkit-border-horizontal-spacing: 0px;
 > -webkit-border-vertical-spacing: 0px;
 > -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust:
 > auto; -webkit-text-stroke-width: 0px; font-size: medium; "><span
 > class="Apple-style-span" style="border-collapse: separate; color:
 > rgb(0, 0, 0); font-family: Helvetica; font-style: normal;
 > font-variant: normal; font-weight: normal; letter-spacing: normal;
 > line-height: normal; orphans: 2; text-indent: 0px; text-transform:
 > none; white-space: normal; widows: 2; word-spacing: 0px;
 > -webkit-border-horizontal-spacing: 0px;
 > -webkit-border-vertical-spacing: 0px;
 > -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust:
 > auto; -webkit-text-stroke-width: 0px; font-size: medium;
 > ">--&nbsp;<br>-------------------------------------------------------<br>Yannis
 > Haralambous<br>Directeur d'?tudes<br>ADRESSE TEMPORAIRE
 > :<br>University of Aizu<br>Aizu-Wakamatsu, Fukushima-ken
 > &nbsp;965-8580, Japon<br>ADRESSE PERMANENTE :<br>Institut T?l?com,
 > T?l?com Bretagne<br>D?partement Informatique<br>UMR CNRS 3192
 > Lab-STICC</span></span></span><div>Technop?le Brest Iroise<br>CS
 > 83818, 29238 Brest Cedex 3, France<br>Tel: +33 2 29 00 14
 > 27<br>Fax: +33 2 29 00 12 82<br>Email: <a
 > href="mailto:yannis.haralambous at telecom-bretagne.eu">yannis.haralambous at telecom-bretagne.eu</a><br>Internet:
 > <a
 > href="http://omega.enstb.org/yannis">http://omega.enstb.org/yannis</a><br>ICBM
 > address: 48?21'31.57"N 4?34'16.76"W</div><div><span
 > class="Apple-style-span" style="border-collapse: separate; color:
 > rgb(0, 0, 0); font-family: Helvetica; font-style: normal;
 > font-variant: normal; font-weight: normal; letter-spacing: normal;
 > line-height: normal; orphans: 2; text-indent: 0px; text-transform:
 > none; white-space: normal; widows: 2; word-spacing: 0px;
 > -webkit-border-horizontal-spacing: 0px;
 > -webkit-border-vertical-spacing: 0px;
 > -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust:
 > auto; -webkit-text-stroke-width: 0px; font-size: medium; "><span
 > class="Apple-style-span" style="border-collapse: separate; color:
 > rgb(0, 0, 0); font-family: Helvetica; font-style: normal;
 > font-variant: normal; font-weight: normal; letter-spacing: normal;
 > line-height: normal; orphans: 2; text-indent: 0px; text-transform:
 > none; white-space: normal; widows: 2; word-spacing: 0px;
 > -webkit-border-horizontal-spacing: 0px;
 > -webkit-border-vertical-spacing: 0px;
 > -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust:
 > auto; -webkit-text-stroke-width: 0px; font-size: medium; "><span
 > class="Apple-style-span" style="border-collapse: separate; color:
 > rgb(0, 0, 0); font-family: Helvetica; font-style: normal;
 > font-variant: normal; font-weight: normal; letter-spacing: normal;
 > line-height: normal; orphans: 2; text-indent: 0px; text-transform:
 > none; white-space: normal; widows: 2; word-spacing: 0px;
 > -webkit-border-horizontal-spacing: 0px;
 > -webkit-border-vertical-spacing: 0px;
 > -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust:
 > auto; -webkit-text-stroke-width: 0px; font-size: medium; ">Twitter:
 > y_haralambous<br>-------------------------------------------------------<br>...pour
 > distinguer l'ext?rieur d'un aquarium,<br>mieux vaut n'?tre pas
 > poisson<br><br>...the ball I threw while playing in the park<br>has
 > not yet reached the ground<br><br>Es gab eine Zeit, wo ich nur
 > ungern ?ber Schubert sprechen,<br>nur N?chtens den B?umen und
 > Sternen von ihm vorerz?hlen
 > m?gen.<br><br><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></span></span></div></span></span></span></span></div></div></body></html>BEGIN:VCARD
 > VERSION:3.0 N:Haralambous;Yannis;;; FN:Yannis Haralambous
 > ORG:Enseignant-chercheur\, TELECOM Bretagne;
 > EMAIL;type=INTERNET;type=WORK;type=pref:yannis.haralambous at telecom-bretagne.eu
 > TEL;type=WORK;type=pref:+33 229001427 TEL;type=CELL:+33 607981626
 > TEL;type=WORK;type=FAX:+33 229001282
 > item1.ADR;type=WORK;type=pref:;;D??partement Informatique\, TELECOM
 > Bretagne\, CS 83818;Brest Cedex 3;;29238;France item1.X-ABADR:fr
 > X-ABUID:CD3E6B27-C13F-40A4-B2F7-8393D5CE6493\:ABPerson END:VCARD
 > <html><head></head><body style="word-wrap: break-word;
 > -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;
 > "><div><div apple-content-edited="true"><span
 > class="Apple-style-span" style="border-collapse: separate; color:
 > rgb(0, 0, 0); font-family: Helvetica; font-style: normal;
 > font-variant: normal; font-weight: normal; letter-spacing: normal;
 > line-height: normal; orphans: 2; text-align: auto; text-indent:
 > 0px; text-transform: none; white-space: normal; widows: 2;
 > word-spacing: 0px; -webkit-border-horizontal-spacing: 0px;
 > -webkit-border-vertical-spacing: 0px;
 > -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust:
 > auto; -webkit-text-stroke-width: 0px; font-size: medium; "><span
 > class="Apple-style-span" style="border-collapse: separate; color:
 > rgb(0, 0, 0); font-family: Helvetica; font-style: normal;
 > font-variant: normal; font-weight: normal; letter-spacing: normal;
 > line-height: normal; orphans: 2; text-indent: 0px; text-transform:
 > none; white-space: normal; widows: 2; word-spacing: 0px;
 > -webkit-border-horizontal-spacing: 0px;
 > -webkit-border-vertical-spacing: 0px;
 > -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust:
 > auto; -webkit-text-stroke-width: 0px; font-size: medium; "><span
 > class="Apple-style-span" style="border-collapse: separate; color:
 > rgb(0, 0, 0); font-family: Helvetica; font-style: normal;
 > font-variant: normal; font-weight: normal; letter-spacing: normal;
 > line-height: normal; orphans: 2; text-indent: 0px; text-transform:
 > none; white-space: normal; widows: 2; word-spacing: 0px;
 > -webkit-border-horizontal-spacing: 0px;
 > -webkit-border-vertical-spacing: 0px;
 > -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust:
 > auto; -webkit-text-stroke-width: 0px; font-size: medium; "><span
 > class="Apple-style-span" style="border-collapse: separate; color:
 > rgb(0, 0, 0); font-family: Helvetica; font-style: normal;
 > font-variant: normal; font-weight: normal; letter-spacing: normal;
 > line-height: normal; orphans: 2; text-indent: 0px; text-transform:
 > none; white-space: normal; widows: 2; word-spacing: 0px;
 > -webkit-border-horizontal-spacing: 0px;
 > -webkit-border-vertical-spacing: 0px;
 > -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust:
 > auto; -webkit-text-stroke-width: 0px; font-size: medium;
 > "><div><span class="Apple-style-span" style="border-collapse:
 > separate; color: rgb(0, 0, 0); font-family: Helvetica; font-style:
 > normal; font-variant: normal; font-weight: normal; letter-spacing:
 > normal; line-height: normal; orphans: 2; text-indent: 0px;
 > text-transform: none; white-space: normal; widows: 2; word-spacing:
 > 0px; -webkit-border-horizontal-spacing: 0px;
 > -webkit-border-vertical-spacing: 0px;
 > -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust:
 > auto; -webkit-text-stroke-width: 0px; font-size: medium; "><span
 > class="Apple-style-span" style="border-collapse: separate; color:
 > rgb(0, 0, 0); font-family: Helvetica; font-style: normal;
 > font-variant: normal; font-weight: normal; letter-spacing: normal;
 > line-height: normal; orphans: 2; text-indent: 0px; text-transform:
 > none; white-space: normal; widows: 2; word-spacing: 0px;
 > -webkit-border-horizontal-spacing: 0px;
 > -webkit-border-vertical-spacing: 0px;
 > -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust:
 > auto; -webkit-text-stroke-width: 0px; font-size: medium; "><span
 > class="Apple-style-span" style="border-collapse: separate; color:
 > rgb(0, 0, 0); font-family: Helvetica; font-style: normal;
 > font-variant: normal; font-weight: normal; letter-spacing: normal;
 > line-height: normal; orphans: 2; text-indent: 0px; text-transform:
 > none; white-space: normal; widows: 2; word-spacing: 0px;
 > -webkit-border-horizontal-spacing: 0px;
 > -webkit-border-vertical-spacing: 0px;
 > -webkit-text-decorations-in-effect: none; -webkit-text-size-adjust:
 > auto; -webkit-text-stroke-width: 0px; font-size: medium;
 > "><span></span> </span></span></span></div>
 > </span></span></span></span></div><br></div></body></html>

Is it possible to write mails in human readable form?

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From taco at elvenkind.com  Thu Feb 17 07:15:10 2011
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 17 Feb 2011 07:15:10 +0100
Subject: [luatex] Error when compiling luatex on MacOS X
In-Reply-To: <A86EB785-5AA9-45F2-9238-2140CD01FB26@telecom-bretagne.eu>
References: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
 <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>
 <A86EB785-5AA9-45F2-9238-2140CD01FB26@telecom-bretagne.eu>
Message-ID: <4D5CBCEE.2000302@elvenkind.com>



On 02/17/11 02:49, Yannis Haralambous wrote:
> I have exactly the same /usr/include/ucontext.h as Patrick, but he is
> able to compile and I am not?
> Maybe the error is elsewhere?

Maybe check your XCode versions? And make doubly sure that both of you
have the latest luatex trunk ?

Best wishes,
Taco

From taco at elvenkind.com  Thu Feb 17 07:32:19 2011
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 17 Feb 2011 07:32:19 +0100
Subject: [luatex] luatex's (mis-)handling of Unicode Devanagari vowel
 signs and ligatures
In-Reply-To: <20110216151534.GB2349@khaled-laptop>
References: <AANLkTimC+DhpJgCLtTkYMd-36nYB3193AV3VzXdBCdNY@mail.gmail.com>
 <20110216151534.GB2349@khaled-laptop>
Message-ID: <4D5CC0F3.5030007@elvenkind.com>



On 02/16/11 16:15, Khaled Hosny wrote:
> There is currently no support for Indic scripts in our OpenType layout
> engine, simply because no one asked for it.
> 
> Since Hans don't read any of these languages, he will need help from
> someone who can. So if you are interested in digging into this finding
> relivant specs, fonts, reference renderings and so (be warned, Indic
> support is OpenType is a big mess with basically two incompatible
> standards one deprecated but there are many fonts out there using it),
> then contact Hans and I think he would be interested in such help.

The problem with complex scripts is that they sometimes need more
support that just turning on opentype features. For example,
in Arabic script, there is a the need to analyze the relative
location of the characters (initial, medial, final, isolated).
This process is not actually encoded in the font itself, it has
to be done by the engine based on whether or not the engine
believes it is in Arabic mode (yes, that it is indeed a little
fuzzy).

It looks like the Devanagari script processing depends on a similar
non-encoded presumed logic in the engine, and that is the information
that Hans currently does not have (and therefore does not implement).

Best wishes,
Taco

From ab31 at ualberta.ca  Thu Feb 17 07:39:07 2011
From: ab31 at ualberta.ca (Aditya Bhargava)
Date: Wed, 16 Feb 2011 23:39:07 -0700
Subject: [luatex] luatex's (mis-)handling of Unicode Devanagari vowel
 signs and ligatures
In-Reply-To: <4D5CC0F3.5030007@elvenkind.com>
References: <AANLkTimC+DhpJgCLtTkYMd-36nYB3193AV3VzXdBCdNY@mail.gmail.com>
 <20110216151534.GB2349@khaled-laptop>
 <4D5CC0F3.5030007@elvenkind.com>
Message-ID: <AANLkTikmc9xvE=HjP9O1vXWfyP65vG=QbBxaTeaZO6ow@mail.gmail.com>

On Wed, Feb 16, 2011 at 11:32 PM, Taco Hoekwater <taco at elvenkind.com> wrote:

> The problem with complex scripts is that they sometimes need more
> support that just turning on opentype features. For example,
> in Arabic script, there is a the need to analyze the relative
> location of the characters (initial, medial, final, isolated).
> This process is not actually encoded in the font itself, it has
> to be done by the engine based on whether or not the engine
> believes it is in Arabic mode (yes, that it is indeed a little
> fuzzy).
>
> It looks like the Devanagari script processing depends on a similar
> non-encoded presumed logic in the engine, and that is the information
> that Hans currently does not have (and therefore does not implement).
>

Xelatex also needs the special handling to be explicitly specified: without
the [Script=Devanagari] parameter to fontspec it doesn't render it
correctly.  I know very little about these things, but shouldn't the Unicode
range be enough of a hint to enable the special handling? At any rate, given
xelatex's behaviour, I don't expect that having to manually specify the
script would be of any added hindrance to anybody using it (vs. xelatex,
that is).

On Wed, Feb 16, 2011 at 8:15 AM, Khaled Hosny <khaledhosny at eglug.org> wrote:

> Since Hans don't read any of these languages, he will need help from
> someone who can. So if you are interested in digging into this finding
> relivant specs, fonts, reference renderings and so (be warned, Indic
> support is OpenType is a big mess with basically two incompatible
> standards one deprecated but there are many fonts out there using it),
> then contact Hans and I think he would be interested in such help.
>

Thanks; I've emailed him (assuming I got the right Hans).

Aditya
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/luatex/attachments/20110216/73ab1da1/attachment-0001.html>

From patrick at gundla.ch  Thu Feb 17 07:45:30 2011
From: patrick at gundla.ch (Patrick Gundlach)
Date: Thu, 17 Feb 2011 07:45:30 +0100
Subject: [luatex] Error when compiling luatex on MacOS X
In-Reply-To: <4D5CBCEE.2000302@elvenkind.com>
References: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
 <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>
 <A86EB785-5AA9-45F2-9238-2140CD01FB26@telecom-bretagne.eu>
 <4D5CBCEE.2000302@elvenkind.com>
Message-ID: <B3365B58-518A-43FA-B372-D83E9E9902B8@gundla.ch>


Am 17.02.2011 um 07:15 schrieb Taco Hoekwater:

> 
> 
> On 02/17/11 02:49, Yannis Haralambous wrote:
>> I have exactly the same /usr/include/ucontext.h as Patrick, but he is
>> able to compile and I am not?
>> Maybe the error is elsewhere?
> 
> Maybe check your XCode versions? And make doubly sure that both of you
> have the latest luatex trunk ?

XCode Version 3.2.5 (1760)

These were my steps:

svn export http://foundry.supelec.fr/svn/luatex/trunk
cd trunk/
./build.sh

--> OK

and nothing special in my $PATH:

$ echo $PATH
/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/Users/patrick/bin


Patrick



From mojca.miklavec.lists at gmail.com  Thu Feb 17 12:07:23 2011
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Thu, 17 Feb 2011 12:07:23 +0100
Subject: [luatex] Error when compiling luatex on MacOS X
In-Reply-To: <B3365B58-518A-43FA-B372-D83E9E9902B8@gundla.ch>
References: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
 <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>
 <A86EB785-5AA9-45F2-9238-2140CD01FB26@telecom-bretagne.eu>
 <4D5CBCEE.2000302@elvenkind.com>
 <B3365B58-518A-43FA-B372-D83E9E9902B8@gundla.ch>
Message-ID: <AANLkTimXoo06=kEmtVCzQVWpuO1GLxQ278pv3Z5s3uss@mail.gmail.com>

On Thu, Feb 17, 2011 at 07:45, Patrick Gundlach <patrick at gundla.ch> wrote:
>
> Am 17.02.2011 um 07:15 schrieb Taco Hoekwater:
>
>>
>>
>> On 02/17/11 02:49, Yannis Haralambous wrote:
>>> I have exactly the same /usr/include/ucontext.h as Patrick, but he is
>>> able to compile and I am not?
>>> Maybe the error is elsewhere?
>>
>> Maybe check your XCode versions? And make doubly sure that both of you
>> have the latest luatex trunk ?
>
> XCode Version 3.2.5 (1760)
>
> These were my steps:
>
> svn export http://foundry.supelec.fr/svn/luatex/trunk
> cd trunk/
> ./build.sh
>
> --> OK
>
> and nothing special in my $PATH:
>
> $ echo $PATH
> /usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/Users/patrick/bin

It works for me as well.

I get zillions of warnings
    deprecated conversion from string constant to ?char*?
but I guess that is harmless anyway.

It works with or without macports or texlive in path.

Mojca


From khaledhosny at eglug.org  Thu Feb 17 12:08:14 2011
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Thu, 17 Feb 2011 13:08:14 +0200
Subject: [luatex] Error when compiling luatex on MacOS X
In-Reply-To: <19804.35864.781990.49576@zaphod.ms25.net>
References: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
 <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>
 <A86EB785-5AA9-45F2-9238-2140CD01FB26@telecom-bretagne.eu>
 <19804.35864.781990.49576@zaphod.ms25.net>
Message-ID: <20110217110814.GB1831@khaled-laptop>

On Thu, Feb 17, 2011 at 03:46:48AM +0100, Reinhard Kotucha wrote:
> On 17 February 2011 Yannis Haralambous wrote:
> 
> Is it possible to write mails in human readable form?

It depends on your client I think, here my client showed me the plain
text version.

Regards,
 Khaled

-- 
 Khaled Hosny
 Egyptian

From taco at elvenkind.com  Thu Feb 17 12:12:53 2011
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 17 Feb 2011 12:12:53 +0100
Subject: [luatex] Error when compiling luatex on MacOS X
In-Reply-To: <AANLkTimXoo06=kEmtVCzQVWpuO1GLxQ278pv3Z5s3uss@mail.gmail.com>
References: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
 <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>
 <A86EB785-5AA9-45F2-9238-2140CD01FB26@telecom-bretagne.eu>
 <4D5CBCEE.2000302@elvenkind.com>
 <B3365B58-518A-43FA-B372-D83E9E9902B8@gundla.ch>
 <AANLkTimXoo06=kEmtVCzQVWpuO1GLxQ278pv3Z5s3uss@mail.gmail.com>
Message-ID: <4D5D02B5.1090502@elvenkind.com>



On 02/17/11 12:07, Mojca Miklavec wrote:
> 
> I get zillions of warnings
>     deprecated conversion from string constant to ?char*?
> but I guess that is harmless anyway.

Yes, these are assumed harmless (nevertheless they should
eventually be fixed in upstream libpoppler).

Best wishes,
Taco

From khaledhosny at eglug.org  Thu Feb 17 12:13:47 2011
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Thu, 17 Feb 2011 13:13:47 +0200
Subject: [luatex] luatex's (mis-)handling of Unicode Devanagari vowel
 signs and ligatures
In-Reply-To: <4D5CC0F3.5030007@elvenkind.com>
References: <AANLkTimC+DhpJgCLtTkYMd-36nYB3193AV3VzXdBCdNY@mail.gmail.com>
 <20110216151534.GB2349@khaled-laptop>
 <4D5CC0F3.5030007@elvenkind.com>
Message-ID: <20110217111347.GC1831@khaled-laptop>

On Thu, Feb 17, 2011 at 07:32:19AM +0100, Taco Hoekwater wrote:
> 
> 
> On 02/16/11 16:15, Khaled Hosny wrote:
> > There is currently no support for Indic scripts in our OpenType layout
> > engine, simply because no one asked for it.
> > 
> > Since Hans don't read any of these languages, he will need help from
> > someone who can. So if you are interested in digging into this finding
> > relivant specs, fonts, reference renderings and so (be warned, Indic
> > support is OpenType is a big mess with basically two incompatible
> > standards one deprecated but there are many fonts out there using it),
> > then contact Hans and I think he would be interested in such help.
> 
> The problem with complex scripts is that they sometimes need more
> support that just turning on opentype features. For example,
> in Arabic script, there is a the need to analyze the relative
> location of the characters (initial, medial, final, isolated).
> This process is not actually encoded in the font itself, it has
> to be done by the engine based on whether or not the engine
> believes it is in Arabic mode (yes, that it is indeed a little
> fuzzy).

Not that fuzzy, you either set the script manually (which what we
already do) or the engine implements Unicode script classification
algorithm (pretty simple, unlike BiDi) which e.g. Pango does.

Regards,
 Khaled

-- 
 Khaled Hosny
 Egyptian

From martin at oneiros.de  Thu Feb 17 13:08:10 2011
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Thu, 17 Feb 2011 13:08:10 +0100
Subject: [luatex] Error when compiling luatex on MacOS X
In-Reply-To: <4D5D02B5.1090502@elvenkind.com>
References: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
 <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>
 <A86EB785-5AA9-45F2-9238-2140CD01FB26@telecom-bretagne.eu>
 <4D5CBCEE.2000302@elvenkind.com>
 <B3365B58-518A-43FA-B372-D83E9E9902B8@gundla.ch>
 <AANLkTimXoo06=kEmtVCzQVWpuO1GLxQ278pv3Z5s3uss@mail.gmail.com>
 <4D5D02B5.1090502@elvenkind.com>
Message-ID: <AANLkTinuV0hP0brc6D3F2RDWvKxBbLPz_uytqzcZ2fB6@mail.gmail.com>

2011/2/17 Taco Hoekwater <taco at elvenkind.com>:
> Yes, these are assumed harmless (nevertheless they should
> eventually be fixed in upstream libpoppler).

That probably won't happen as it would break compatibility with xpdf
(as if anybody needs that anymore).

Best
   Martin

From luatex at nililand.de  Thu Feb 17 15:08:25 2011
From: luatex at nililand.de (Ulrike Fischer)
Date: Thu, 17 Feb 2011 15:08:25 +0100
Subject: [luatex] German hyphenation, fontspec and adjusted kerning
References: <3C9AABB1-EA6D-48E4-A58F-659C088779C2@unibas.ch>
Message-ID: <bjqbqyz5ukm8.dlg@nililand.de>

Am Wed, 16 Feb 2011 09:32:54 +0100 schrieb Heilmann, Till A.:

> (Since there has been no reply to my earlier posting, I will try
> to be a bit more specific this time. Also, I am not sure if this
> is the appropriate place to ask the question. If not, maybe
> someone can point me in the right direction?)

I think it is the appropriate place. But you could also try the
context mailing and ask if and if yes how the problem is solved
there.

I tried the following example with context and could not reproduce
the problem, the space was between both fh. So there is some hope
that a solution exists.
But
- I don't know if the code is correct and actually loads german
hyphenation patterns (I think yes)
- My context is rather old as miktex doesn't update.

\mainlanguage	[de]
\font\test={name:TeX Gyre Bonum:featurefile=bonum.fea;+kern}
\starttext
\test  fh aufhalten
\stoptext
\bye



-- 
Ulrike Fischer 


From schuster.wolfgang at googlemail.com  Thu Feb 17 16:43:35 2011
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Thu, 17 Feb 2011 16:43:35 +0100
Subject: [luatex] German hyphenation, fontspec and adjusted kerning
In-Reply-To: <bjqbqyz5ukm8.dlg@nililand.de>
References: <3C9AABB1-EA6D-48E4-A58F-659C088779C2@unibas.ch>
 <bjqbqyz5ukm8.dlg@nililand.de>
Message-ID: <082A99F3-F702-4818-8A7F-E35AEED5F7D9@gmail.com>


Am 17.02.2011 um 15:08 schrieb Ulrike Fischer:

> I tried the following example with context and could not reproduce
> the problem, the space was between both fh. So there is some hope
> that a solution exists.
> But
> - I don't know if the code is correct and actually loads german
> hyphenation patterns (I think yes)
> - My context is rather old as miktex doesn't update.
> 
> \mainlanguage	[de]
> \font\test={name:TeX Gyre Bonum:featurefile=bonum.fea;+kern}

A context user would write this as:

\definefontfeature[test][kern=yes,featurefile=bonum]
\definefont[test][name:texgyrebonum*test]

Ligature in certain words can be broken in the following way.

\usemodule[translate]
\translateinput[aufhalten][auf|*|halten]
\enableinputtranslation
\setupbodyfont[pagella]
\starttext
fh aufhalten
\stoptext

Wolfgang


From luatex at nililand.de  Thu Feb 17 17:00:00 2011
From: luatex at nililand.de (Ulrike Fischer)
Date: Thu, 17 Feb 2011 17:00:00 +0100
Subject: [luatex] German hyphenation, fontspec and adjusted kerning
References: <3C9AABB1-EA6D-48E4-A58F-659C088779C2@unibas.ch>
 <bjqbqyz5ukm8.dlg@nililand.de>
 <082A99F3-F702-4818-8A7F-E35AEED5F7D9@gmail.com>
Message-ID: <3d85f5272wq1.dlg@nililand.de>

Am Thu, 17 Feb 2011 16:43:35 +0100 schrieb Wolfgang Schuster:

 
>> I tried the following example with context and could not reproduce
>> the problem, the space was between both fh. So there is some hope
>> that a solution exists.
>> But
>> - I don't know if the code is correct and actually loads german
>> hyphenation patterns (I think yes)
>> - My context is rather old as miktex doesn't update.
>> 
>> \mainlanguage	[de]
>> \font\test={name:TeX Gyre Bonum:featurefile=bonum.fea;+kern}
> 
> A context user would write this as:
> 
> \definefontfeature[test][kern=yes,featurefile=bonum]
> \definefont[test][name:texgyrebonum*test]

OK.

> Ligature in certain words can be broken in the following way.

I don't think that the problem has something to do with ligatures.
The problem is that the context example

\mainlanguage	[de]
\definefontfeature[test][featurefile=bonum,kern=yes]
\definefont[test][name:texgyrebonum*test]
\starttext
\test fh aufhalten
\stoptext

gives the (wanted) result with kerning spaces between both "fh":

f h auf halten

While the similar latex example:

\documentclass{article}
\makeatletter\bbl at patterns{ngerman}\makeatother
\usepackage{fontspec}
\setmainfont[FeatureFile=bonum.fea]{TeX Gyre Bonum}
\begin{document}
fh aufhalten
\end{document}

gives 

f h aufhalten

But only if the (n)german hyphenation patters are loaded. So the
hyphenation point (auf-halten) is somehow supressing the insertion
of the kern. The question is why it works in context and if the
solution can be used in latex too.


-- 
Ulrike Fischer 


From reinhard.kotucha at web.de  Thu Feb 17 22:27:40 2011
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Thu, 17 Feb 2011 22:27:40 +0100
Subject: [luatex] Error when compiling luatex on MacOS X
In-Reply-To: <20110217110814.GB1831@khaled-laptop>
References: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
 <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>
 <A86EB785-5AA9-45F2-9238-2140CD01FB26@telecom-bretagne.eu>
 <19804.35864.781990.49576@zaphod.ms25.net>
 <20110217110814.GB1831@khaled-laptop>
Message-ID: <19805.37580.112328.291778@zaphod.ms25.net>

On 17 February 2011 Khaled Hosny wrote:

 > On Thu, Feb 17, 2011 at 03:46:48AM +0100, Reinhard Kotucha wrote:
 > > On 17 February 2011 Yannis Haralambous wrote:
 > > 
 > > Is it possible to write mails in human readable form?
 > 
 > It depends on your client I think, here my client showed me the
 > plain text version.

After some investigation I found that Yannis' last mail contained
nested multipart/alternative / multipart/mixed sections.  Only the
latter one was displayed.  However, in Yannis' first mail in this
thread there was only a multipart/mixed section and the text version
was displayed properly.  I formerly thought that Yannis is using
different mail clients, but obviously Apple Mail doesn't always use
the same structure.

I updated my mail client now and the text section is displayed.  
Actually, I made several attempts to update the program (vm/Emacs)
during the last few years, but it seems that only the very last
version works properly.

Regards, and sorry for the noise,
  Reinhard

... who is not convinced that HTML in mails is a good thing.

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From khaledhosny at eglug.org  Thu Feb 17 22:51:17 2011
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Thu, 17 Feb 2011 23:51:17 +0200
Subject: [luatex] Error when compiling luatex on MacOS X
In-Reply-To: <19805.37580.112328.291778@zaphod.ms25.net>
References: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
 <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>
 <A86EB785-5AA9-45F2-9238-2140CD01FB26@telecom-bretagne.eu>
 <19804.35864.781990.49576@zaphod.ms25.net>
 <20110217110814.GB1831@khaled-laptop>
 <19805.37580.112328.291778@zaphod.ms25.net>
Message-ID: <20110217215117.GA4257@khaled-laptop>

On Thu, Feb 17, 2011 at 10:27:40PM +0100, Reinhard Kotucha wrote:
> ... who is not convinced that HTML in mails is a good thing.

Neither I.

Regards,
 Khaled

-- 
 Khaled Hosny
 Egyptian

From t34www at googlemail.com  Fri Feb 18 00:29:31 2011
From: t34www at googlemail.com (T T)
Date: Thu, 17 Feb 2011 23:29:31 +0000
Subject: [luatex] Error when compiling luatex on MacOS X
In-Reply-To: <20110217215117.GA4257@khaled-laptop>
References: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
 <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>
 <A86EB785-5AA9-45F2-9238-2140CD01FB26@telecom-bretagne.eu>
 <19804.35864.781990.49576@zaphod.ms25.net>
 <20110217110814.GB1831@khaled-laptop>
 <19805.37580.112328.291778@zaphod.ms25.net>
 <20110217215117.GA4257@khaled-laptop>
Message-ID: <AANLkTimgbowfh+SaLodUeDoDVQZUYT-Jjzqd+MiCQcYB@mail.gmail.com>

On 17 February 2011 21:51, Khaled Hosny <khaledhosny at eglug.org> wrote:
> On Thu, Feb 17, 2011 at 10:27:40PM +0100, Reinhard Kotucha wrote:
>> ... who is not convinced that HTML in mails is a good thing.
>
> Neither I.

And I'm convinced that it is not :)

Cheers,

Tomek

From reinhard.kotucha at web.de  Fri Feb 18 01:55:35 2011
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Fri, 18 Feb 2011 01:55:35 +0100
Subject: [luatex] Error when compiling luatex on MacOS X
In-Reply-To: <AANLkTimgbowfh+SaLodUeDoDVQZUYT-Jjzqd+MiCQcYB@mail.gmail.com>
References: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
 <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>
 <A86EB785-5AA9-45F2-9238-2140CD01FB26@telecom-bretagne.eu>
 <19804.35864.781990.49576@zaphod.ms25.net>
 <20110217110814.GB1831@khaled-laptop>
 <19805.37580.112328.291778@zaphod.ms25.net>
 <20110217215117.GA4257@khaled-laptop>
 <AANLkTimgbowfh+SaLodUeDoDVQZUYT-Jjzqd+MiCQcYB@mail.gmail.com>
Message-ID: <19805.50055.59931.534027@zaphod.ms25.net>

On 17 February 2011 T T wrote:

 > On 17 February 2011 21:51, Khaled Hosny <khaledhosny at eglug.org> wrote:
 > > On Thu, Feb 17, 2011 at 10:27:40PM +0100, Reinhard Kotucha wrote:
 > >> ... who is not convinced that HTML in mails is a good thing.
 > >
 > > Neither I.
 > 
 > And I'm convinced that it is not :)

I already considered to write my mails in PostScript.  This makes more
sense than HTML, especially if all fonts are embedded.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From yannis.haralambous at telecom-bretagne.eu  Sat Feb 19 01:10:31 2011
From: yannis.haralambous at telecom-bretagne.eu (Yannis Haralambous)
Date: Sat, 19 Feb 2011 09:10:31 +0900
Subject: [luatex] % character in \directlua
In-Reply-To: <19805.37580.112328.291778@zaphod.ms25.net>
References: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
 <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>
 <A86EB785-5AA9-45F2-9238-2140CD01FB26@telecom-bretagne.eu>
 <19804.35864.781990.49576@zaphod.ms25.net>
 <20110217110814.GB1831@khaled-laptop>
 <19805.37580.112328.291778@zaphod.ms25.net>
Message-ID: <4F6B9376-8A75-4757-B581-425A9599E0E3@telecom-bretagne.eu>

Hi everybody, and sorry for my mailer: it gives me only two choices, either "text" (my current choice, believe it or not) or "rtf".

I'm writing to ask whether there is a more elegant way to use a % in a \directlua argument (I need the Lua modulo operator)
besides changing the catcode of % to 12 around the \directlua command:

\begingroup
\catcode`\%=12
\directlua{texio.write(5 % 2)}
\endgroup

I have tried \%, \string%, nothing works besides the code above.

cheers

Yannis
-- 
-------------------------------------------------------
Yannis Haralambous
Directeur d'?tudes
ADRESSE TEMPORAIRE :
University of Aizu
Aizu-Wakamatsu, Fukushima-ken  965-8580, Japon
ADRESSE PERMANENTE :
Institut T?l?com, T?l?com Bretagne
D?partement Informatique
UMR CNRS 3192 Lab-STICC
Technop?le Brest Iroise
CS 83818, 29238 Brest Cedex 3, France
Tel: +33 2 29 00 14 27
Fax: +33 2 29 00 12 82
Email: yannis.haralambous at telecom-bretagne.eu
Internet: http://omega.enstb.org/yannis
ICBM address: 48?21'31.57"N 4?34'16.76"W
Twitter: y_haralambous
-------------------------------------------------------
...pour distinguer l'ext?rieur d'un aquarium,
mieux vaut n'?tre pas poisson

...the ball I threw while playing in the park
has not yet reached the ground

Es gab eine Zeit, wo ich nur ungern ?ber Schubert sprechen,
nur N?chtens den B?umen und Sternen von ihm vorerz?hlen m?gen.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Yannis Haralambous.vcf
Type: text/directory
Size: 508 bytes
Desc: not available
URL: <http://tug.org/pipermail/luatex/attachments/20110219/d5ba2580/attachment.bin>
-------------- next part --------------


From reinhard.kotucha at web.de  Sat Feb 19 02:14:03 2011
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 19 Feb 2011 02:14:03 +0100
Subject: [luatex] % character in \directlua
In-Reply-To: <4F6B9376-8A75-4757-B581-425A9599E0E3@telecom-bretagne.eu>
References: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
 <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>
 <A86EB785-5AA9-45F2-9238-2140CD01FB26@telecom-bretagne.eu>
 <19804.35864.781990.49576@zaphod.ms25.net>
 <20110217110814.GB1831@khaled-laptop>
 <19805.37580.112328.291778@zaphod.ms25.net>
 <4F6B9376-8A75-4757-B581-425A9599E0E3@telecom-bretagne.eu>
Message-ID: <19807.6491.860178.957077@zaphod.ms25.net>

On 2011-02-19 at 09:10:31 +0900, Yannis Haralambous wrote:

 > Hi everybody, and sorry for my mailer: it gives me only two
 > choices, either "text" (my current choice, believe it or not) or
 > "rtf".

Hi Yannis,
you don't have to apologize if you can't send HTML. "text" is fine,
and we don't need anything else. :)
 
 > I'm writing to ask whether there is a more elegant way to use a %
 > in a \directlua argument (I need the Lua modulo operator) besides
 > changing the catcode of % to 12 around the \directlua command:

If you are using LaTeX, I recommend the great luacode package.

If you are using plain TeX, maybe you can steal code from the
package.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From zappathustra at free.fr  Sat Feb 19 10:16:24 2011
From: zappathustra at free.fr (Paul Isambert)
Date: Sat, 19 Feb 2011 10:16:24 +0100
Subject: [luatex] % character in \directlua
In-Reply-To: <4F6B9376-8A75-4757-B581-425A9599E0E3@telecom-bretagne.eu>
References: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
 <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>
 <A86EB785-5AA9-45F2-9238-2140CD01FB26@telecom-bretagne.eu>
 <19804.35864.781990.49576@zaphod.ms25.net>
 <20110217110814.GB1831@khaled-laptop>
 <19805.37580.112328.291778@zaphod.ms25.net>
 <4F6B9376-8A75-4757-B581-425A9599E0E3@telecom-bretagne.eu>
Message-ID: <4D5F8A68.3000501@free.fr>

Le 19/02/2011 01:10, Yannis Haralambous a ?crit :
> Hi everybody, and sorry for my mailer: it gives me only two choices, either "text" (my current choice, believe it or not) or "rtf".
>
> I'm writing to ask whether there is a more elegant way to use a % in a \directlua argument (I need the Lua modulo operator)
> besides changing the catcode of % to 12 around the \directlua command:
>
> \begingroup
> \catcode`\%=12
> \directlua{texio.write(5 % 2)}
> \endgroup
>
> I have tried \%, \string%, nothing works besides the code above.

Any solution implies either catcode change or \string. The simplest, 
perhaps, would be to define a macro:

\bgroup
\escapechar=-1
\xdef\pc{\string\%}
\egroup

and then use \pc instead of %:

\directlua{texio.write(5 \pc 2)}

There's nothing more elegant, since we're basically dealing with verbatim.

Best,
Paul

From schuster.wolfgang at googlemail.com  Sat Feb 19 11:41:41 2011
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Sat, 19 Feb 2011 11:41:41 +0100
Subject: [luatex] % character in \directlua
In-Reply-To: <4F6B9376-8A75-4757-B581-425A9599E0E3@telecom-bretagne.eu>
References: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
 <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>
 <A86EB785-5AA9-45F2-9238-2140CD01FB26@telecom-bretagne.eu>
 <19804.35864.781990.49576@zaphod.ms25.net>
 <20110217110814.GB1831@khaled-laptop>
 <19805.37580.112328.291778@zaphod.ms25.net>
 <4F6B9376-8A75-4757-B581-425A9599E0E3@telecom-bretagne.eu>
Message-ID: <8D7A2D13-3460-4CF5-A591-A170E510D7C5@gmail.com>


Am 19.02.2011 um 01:10 schrieb Yannis Haralambous:

> Hi everybody, and sorry for my mailer: it gives me only two choices, either "text" (my current choice, believe it or not) or "rtf".
> 
> I'm writing to ask whether there is a more elegant way to use a % in a \directlua argument (I need the Lua modulo operator)
> besides changing the catcode of % to 12 around the \directlua command:
> 
> \begingroup
> \catcode`\%=12
> \directlua{texio.write(5 % 2)}
> \endgroup
> 
> I have tried \%, \string%, nothing works besides the code above.


As plain TeX user you can write your own command:

\def\luacode
  {\begingroup
   \catcode`\%=12
   \doluacode}

\def\doluacode#1%
  {\endgroup
   \directlua{#1}}

\luacode{tex.sprint(string.format("%.2f",math.pi))}

\bye

ConTeXt already provides a command with the name \ctxluacode which does the same.

Wolfgang



From dpl at sun.ac.za  Sat Feb 19 12:12:22 2011
From: dpl at sun.ac.za (Dirk Laurie)
Date: Sat, 19 Feb 2011 13:12:22 +0200
Subject: [luatex] Line breaks
Message-ID: <20110219111222.GC7513@rondloper>

The following are not equivalent on my system (texlive, ubuntu lucid):

% excerpt from TeX file
This is a paragraph
with some lines.

This is another paragraph,
separated from the first
by a blank line.
% end excerpt

% another excerpt
\directlua{ text = [[
This is a paragraph
with some lines.
 
This is another paragraph,
separated from the first
by a blank line. ]]
tex.print(text)}
% end excerpt

The second excerpt sets as a single paragraph.

Dirk


From zappathustra at free.fr  Sat Feb 19 12:25:47 2011
From: zappathustra at free.fr (Paul Isambert)
Date: Sat, 19 Feb 2011 12:25:47 +0100
Subject: [luatex] Line breaks
In-Reply-To: <20110219111222.GC7513@rondloper>
References: <20110219111222.GC7513@rondloper>
Message-ID: <4D5FA8BB.8080000@free.fr>

Le 19/02/2011 12:12, Dirk Laurie a ?crit :
> The following are not equivalent on my system (texlive, ubuntu lucid):
>
> % excerpt from TeX file
> This is a paragraph
> with some lines.
>
> This is another paragraph,
> separated from the first
> by a blank line.
> % end excerpt
>
> % another excerpt
> \directlua{ text = [[
> This is a paragraph
> with some lines.
>
> This is another paragraph,
> separated from the first
> by a blank line. ]]
> tex.print(text)}
> % end excerpt
>
> The second excerpt sets as a single paragraph.

Which confirms something I'd been suspecting for a while but never 
really investigated: blank lines aren't turned into \par in \directlua, 
as they are anywhere else (including whatsits). I guess that's a 
feature, so you can have blank lines in your Lua code, but in that case 
it's not what's intended.

Best,
Paul


From heiko.oberdiek at googlemail.com  Sat Feb 19 13:20:40 2011
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Sat, 19 Feb 2011 13:20:40 +0100
Subject: [luatex] % character in \directlua
In-Reply-To: <4D5F8A68.3000501@free.fr>
References: <2F72D1EE-EF9E-4400-9B00-722B7F585F77@telecom-bretagne.eu>
 <9B5A514B-DDC0-483B-9D2E-1B17FDFEE5C2@elvenkind.com>
 <A86EB785-5AA9-45F2-9238-2140CD01FB26@telecom-bretagne.eu>
 <19804.35864.781990.49576@zaphod.ms25.net>
 <20110217110814.GB1831@khaled-laptop>
 <19805.37580.112328.291778@zaphod.ms25.net>
 <4F6B9376-8A75-4757-B581-425A9599E0E3@telecom-bretagne.eu>
 <4D5F8A68.3000501@free.fr>
Message-ID: <20110219122040.GA20189@oberdiek.my-fqdn.de>

On Sat, Feb 19, 2011 at 10:16:24AM +0100, Paul Isambert wrote:

> Any solution implies either catcode change or \string. The simplest,
> perhaps, would be to define a macro:
> 
> \bgroup
> \escapechar=-1
> \xdef\pc{\string\%}
> \egroup

latex.ltx provides \@percentchar (also \@backslashchar).

Yours sincerely
  Heiko Oberdiek

From heiko.oberdiek at googlemail.com  Sat Feb 19 13:38:27 2011
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Sat, 19 Feb 2011 13:38:27 +0100
Subject: [luatex] Line breaks
In-Reply-To: <4D5FA8BB.8080000@free.fr>
References: <20110219111222.GC7513@rondloper>
 <4D5FA8BB.8080000@free.fr>
Message-ID: <20110219123827.GB20189@oberdiek.my-fqdn.de>

On Sat, Feb 19, 2011 at 12:25:47PM +0100, Paul Isambert wrote:

> Le 19/02/2011 12:12, Dirk Laurie a ?crit :
> >The following are not equivalent on my system (texlive, ubuntu lucid):
> >
> >% excerpt from TeX file
> >This is a paragraph
> >with some lines.
> >
> >This is another paragraph,
> >separated from the first
> >by a blank line.
> >% end excerpt
> >
> >% another excerpt
> >\directlua{ text = [[
> >This is a paragraph
> >with some lines.
> >
> >This is another paragraph,
> >separated from the first
> >by a blank line. ]]
> >tex.print(text)}
> >% end excerpt
> >
> >The second excerpt sets as a single paragraph.
> 
> Which confirms something I'd been suspecting for a while but never
> really investigated: blank lines aren't turned into \par in
> \directlua,

No, the conversion is done by TeX, \directlua sees the \par then.
But tex.print removes the \par, perhaps because of

| Each string argument is treated by TEX as a separate input line.

Also interesting:

| The very last string of the very last tex.print() command in a
| \directlua will not have the \endlinechar appended, all others do.

But a statement about \par filtering of tex.print() would be useful
for the documentation.

Minimal example (luatex --ini):

\catcode`\{=1
\catcode`\}=2
\expandafter\def\expandafter\x\expandafter{%
  \directlua{tex.print('a \par b')}%
}\show\x
\csname @@end\endcsname\end

Result: "a b"

Yours sincerely
  Heiko Oberdiek

From zappathustra at free.fr  Sat Feb 19 13:41:30 2011
From: zappathustra at free.fr (Paul Isambert)
Date: Sat, 19 Feb 2011 13:41:30 +0100
Subject: [luatex] [Dev-luatex]  Line breaks
In-Reply-To: <20110219123827.GB20189@oberdiek.my-fqdn.de>
References: <20110219111222.GC7513@rondloper> <4D5FA8BB.8080000@free.fr>
 <20110219123827.GB20189@oberdiek.my-fqdn.de>
Message-ID: <4D5FBA7A.40203@free.fr>

Le 19/02/2011 13:38, Heiko Oberdiek a ?crit :
> On Sat, Feb 19, 2011 at 12:25:47PM +0100, Paul Isambert wrote:
>
>> Le 19/02/2011 12:12, Dirk Laurie a ?crit :
>>> The following are not equivalent on my system (texlive, ubuntu lucid):
>>>
>>> % excerpt from TeX file
>>> This is a paragraph
>>> with some lines.
>>>
>>> This is another paragraph,
>>> separated from the first
>>> by a blank line.
>>> % end excerpt
>>>
>>> % another excerpt
>>> \directlua{ text = [[
>>> This is a paragraph
>>> with some lines.
>>>
>>> This is another paragraph,
>>> separated from the first
>>> by a blank line. ]]
>>> tex.print(text)}
>>> % end excerpt
>>>
>>> The second excerpt sets as a single paragraph.
>> Which confirms something I'd been suspecting for a while but never
>> really investigated: blank lines aren't turned into \par in
>> \directlua,
> No, the conversion is done by TeX, \directlua sees the \par then.

Then

\directlua{

foo = 1}

should be read as "\parfoo=1", and it isn't. Or is there something I'm 
missing?

Paul

From dpl at sun.ac.za  Sat Feb 19 13:42:06 2011
From: dpl at sun.ac.za (Dirk Laurie)
Date: Sat, 19 Feb 2011 14:42:06 +0200
Subject: [luatex] Line breaks
In-Reply-To: <4D5FA8BB.8080000@free.fr>
References: <20110219111222.GC7513@rondloper>
 <4D5FA8BB.8080000@free.fr>
Message-ID: <20110219124206.GA8025@rondloper>

On Sat, Feb 19, 2011 at 01:25:47PM +0200, Paul Isambert wrote:
> 
> Which confirms something I'd been suspecting for a while but never 
> really investigated: blank lines aren't turned into \par in \directlua, 
> as they are anywhere else (including whatsits). I guess that's a 
> feature, so you can have blank lines in your Lua code, but in that case 
> it's not what's intended.
> 
And if I save those exerpts as 

% file ex1.tex 
This is a paragraph
with some lines.
 
This is another paragraph,
separated from the first
by a blank line.
% end file

-- file ex2.lua
text = [[
This is a paragraph
with some lines.

This is another paragraph,
separated from the first
by a blank line. ]]
tex.print(text)
-- end file

then the result of lualatex on

% 
\documentclass{article}
\begin{document}
\input{ex1.tex}

\directlua{ dofile "ex2.lua" }
\end{document}
%

gives results that look even more different: the newlines in the
ex2.lua version are set by lualatex beta-0.50.0-2010010503 as 
capital Omega.  I also tried beta-0.65.0-2010121316, same story.

Thus the error seems to be due to a font/locale difference, which 
I do not understand.

I'm working around the problem as follows:

function linefix(a)
    a=string.gsub(a,"\n%s*\n+","\\par ")
    return string.gsub(a,"\n",' ')
    return a
    end

then strings that may contain newlines, especially
blank paragraph separators, are filtered through linefix.

Dirk


From heiko.oberdiek at googlemail.com  Sat Feb 19 14:05:18 2011
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Sat, 19 Feb 2011 14:05:18 +0100
Subject: [luatex] [Dev-luatex]  Line breaks
In-Reply-To: <4D5FBA7A.40203@free.fr>
References: <20110219111222.GC7513@rondloper> <4D5FA8BB.8080000@free.fr>
 <20110219123827.GB20189@oberdiek.my-fqdn.de>
 <4D5FBA7A.40203@free.fr>
Message-ID: <20110219130517.GA20496@oberdiek.my-fqdn.de>

On Sat, Feb 19, 2011 at 01:41:30PM +0100, Paul Isambert wrote:

> >No, the conversion is done by TeX, \directlua sees the \par then.
> 
> Then
> 
> \directlua{
> 
> foo = 1}
> 
> should be read as "\parfoo=1", and it isn't. Or is there something
> I'm missing?

Yes, you example and some testing shows, that it isn't tex.print,
but \directlua seems to remove \par if it has its original meaning.

  \def\par{bar}
  \directlua{

  foo = 1}

Then Lua sees "barfoo = 1".

Something like the following should fix the OP's problem:

\begingroup
  \def\par{\endgraf}
  \directlua{
    text = [[
      This is a paragraph
      with some lines.

      This is another paragraph,
      separated from the first
      by a blank line. ]]
    tex.print(text)
  }
\endgroup

Yours sincerely
  Heiko Oberdiek

From zappathustra at free.fr  Sat Feb 19 14:25:05 2011
From: zappathustra at free.fr (Paul Isambert)
Date: Sat, 19 Feb 2011 14:25:05 +0100
Subject: [luatex] [Dev-luatex]  Line breaks
In-Reply-To: <20110219130517.GA20496@oberdiek.my-fqdn.de>
References: <20110219111222.GC7513@rondloper> <4D5FA8BB.8080000@free.fr>
 <20110219123827.GB20189@oberdiek.my-fqdn.de> <4D5FBA7A.40203@free.fr>
 <20110219130517.GA20496@oberdiek.my-fqdn.de>
Message-ID: <4D5FC4B1.6070902@free.fr>

Le 19/02/2011 14:05, Heiko Oberdiek a ?crit :
> On Sat, Feb 19, 2011 at 01:41:30PM +0100, Paul Isambert wrote:
>
>>> No, the conversion is done by TeX, \directlua sees the \par then.
>> Then
>>
>> \directlua{
>>
>> foo = 1}
>>
>> should be read as "\parfoo=1", and it isn't. Or is there something
>> I'm missing?
> Yes, you example and some testing shows, that it isn't tex.print,
> but \directlua seems to remove \par if it has its original meaning.

So I guess it's definitely a feature (quite useful), not a bug. But that 
should be mentioned in the manual.

Best,
Paul

From schuster.wolfgang at googlemail.com  Sat Feb 19 16:15:58 2011
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Sat, 19 Feb 2011 16:15:58 +0100
Subject: [luatex] Line breaks
In-Reply-To: <20110219111222.GC7513@rondloper>
References: <20110219111222.GC7513@rondloper>
Message-ID: <5B547EB5-4952-4AC4-BE10-24AE787B1A3A@gmail.com>


Am 19.02.2011 um 12:12 schrieb Dirk Laurie:

> The following are not equivalent on my system (texlive, ubuntu lucid):
> 
> % excerpt from TeX file
> This is a paragraph
> with some lines.
> 
> This is another paragraph,
> separated from the first
> by a blank line.
> % end excerpt
> 
> % another excerpt
> \directlua{ text = [[
> This is a paragraph
> with some lines.
> 
> This is another paragraph,
> separated from the first
> by a blank line. ]]
> tex.print(text)}
> % end excerpt
> 
> The second excerpt sets as a single paragraph.

Use \detokenize, e.g.

\directlua{\detokenize{text = [[
This is a paragraph
with some lines.

This is another paragraph,
separated from the first
by a blank line. ]]}
tex.print(text)}

\bye

Wolfgang


From dpl at sun.ac.za  Sat Feb 19 17:11:58 2011
From: dpl at sun.ac.za (Dirk Laurie)
Date: Sat, 19 Feb 2011 18:11:58 +0200
Subject: [luatex] Line breaks
In-Reply-To: <5B547EB5-4952-4AC4-BE10-24AE787B1A3A@gmail.com>
References: <20110219111222.GC7513@rondloper>
 <5B547EB5-4952-4AC4-BE10-24AE787B1A3A@gmail.com>
Message-ID: <20110219161158.GA8397@rondloper>

On Sat, Feb 19, 2011 at 05:15:58PM +0200, Wolfgang Schuster wrote:
> 
> Use \detokenize, e.g.
> 
> \directlua{\detokenize{text = [[
> This is a paragraph
> with some lines.
> 
> This is another paragraph,
> separated from the first
> by a blank line. ]]}
> tex.print(text)}
> 
Yes, this works.  Unfortunately, 

\directlua{\detokenize{ dofile "ex2.lua" }}

when ex2.lua contains

text = [[
> This is a paragraph
> with some lines.
> 
> This is another paragraph,
> separated from the first
> by a blank line. ]]}
> tex.print(text)

is not similarly effective.  
 
I have tried a workaround using a "detokenize" function
written in Lua, which is almost effective: there is a mysterious
extra 3 in the PDF file.

I attach files xxx.tex, ex1.tex, ex2.lua, xxx.pdf, the last made
by lualatex 0.65.

The output of "pdftotext xxx.pdf" is also surprising.

Dirk




-------------- next part --------------
A non-text attachment was scrubbed...
Name: xxx.tex
Type: text/x-tex
Size: 105 bytes
Desc: not available
URL: <http://tug.org/pipermail/luatex/attachments/20110219/a87ed9dc/attachment.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ex1.tex
Type: text/x-tex
Size: 108 bytes
Desc: not available
URL: <http://tug.org/pipermail/luatex/attachments/20110219/a87ed9dc/attachment-0001.bin>
-------------- next part --------------
function detokenize(text)
    text=string.gsub(text,"\n%s*\n+","\\par ")
    return string.gsub(text,"\n",' ')
    end

text = [[
This is a paragraph
with some lines.

This is another paragraph,
separated from the first
by a blank line. ]]
tex.print(detokenize(text))
-------------- next part --------------
A non-text attachment was scrubbed...
Name: xxx.pdf
Type: application/pdf
Size: 16064 bytes
Desc: not available
URL: <http://tug.org/pipermail/luatex/attachments/20110219/a87ed9dc/attachment.pdf>

From schuster.wolfgang at googlemail.com  Sat Feb 19 17:32:14 2011
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Sat, 19 Feb 2011 17:32:14 +0100
Subject: [luatex] Line breaks
In-Reply-To: <20110219161158.GA8397@rondloper>
References: <20110219111222.GC7513@rondloper>
 <5B547EB5-4952-4AC4-BE10-24AE787B1A3A@gmail.com>
 <20110219161158.GA8397@rondloper>
Message-ID: <23A77C5C-CEED-44FC-AD3F-90D9111EA3AC@gmail.com>


Am 19.02.2011 um 17:11 schrieb Dirk Laurie:

> I have tried a workaround using a "detokenize" function
> written in Lua, which is almost effective: there is a mysterious
> extra 3 in the PDF file.


The number disappears when i change your detokenize function to this:

function detokenize(text)
	text = text:gsub("\n\n","\\par ")
	text = text:gsub("\n"," ")
	return text
end

Maybe the experts here on the list can give you better tips when
you explain what do you want to achieve.

Wolfgang


From khaledhosny at eglug.org  Sat Feb 19 18:05:46 2011
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sat, 19 Feb 2011 19:05:46 +0200
Subject: [luatex] Line breaks
In-Reply-To: <20110219161158.GA8397@rondloper>
References: <20110219111222.GC7513@rondloper>
 <5B547EB5-4952-4AC4-BE10-24AE787B1A3A@gmail.com>
 <20110219161158.GA8397@rondloper>
Message-ID: <20110219170546.GA7468@khaled-laptop>

On Sat, Feb 19, 2011 at 06:11:58PM +0200, Dirk Laurie wrote:
> On Sat, Feb 19, 2011 at 05:15:58PM +0200, Wolfgang Schuster wrote:
> > 
> > Use \detokenize, e.g.
> > 
> > \directlua{\detokenize{text = [[
> > This is a paragraph
> > with some lines.
> > 
> > This is another paragraph,
> > separated from the first
> > by a blank line. ]]}
> > tex.print(text)}
> > 
> Yes, this works.  Unfortunately, 
> 
> \directlua{\detokenize{ dofile "ex2.lua" }}
> 
> when ex2.lua contains
> 
> text = [[
> > This is a paragraph
> > with some lines.
> > 
> > This is another paragraph,
> > separated from the first
> > by a blank line. ]]}

Something like that would do the trick (basically detecting empty lines
on your own):

for line in text:gmatch("(.-)\r?\n") do
    local p = #line and tex.print or tex.sprint
    p(line)
end

It will ignore your last line, though, because it is not line feed
delimited.

Regards,
 Khaled

-- 
 Khaled Hosny
 Egyptian

From dpl at sun.ac.za  Sat Feb 19 21:54:36 2011
From: dpl at sun.ac.za (Dirk Laurie)
Date: Sat, 19 Feb 2011 22:54:36 +0200
Subject: [luatex] Line breaks
In-Reply-To: <23A77C5C-CEED-44FC-AD3F-90D9111EA3AC@gmail.com>
References: <20110219111222.GC7513@rondloper>
 <5B547EB5-4952-4AC4-BE10-24AE787B1A3A@gmail.com>
 <20110219161158.GA8397@rondloper>
 <23A77C5C-CEED-44FC-AD3F-90D9111EA3AC@gmail.com>
Message-ID: <20110219205436.GA10189@rondloper>

On Sat, Feb 19, 2011 at 06:32:14PM +0200, Wolfgang Schuster wrote:
> 
> Am 19.02.2011 um 17:11 schrieb Dirk Laurie:
> 
> > I have tried a workaround using a "detokenize" function
> > written in Lua, which is almost effective: there is a mysterious
> > extra 3 in the PDF file.
> 
> 
> The number disappears when i change your detokenize function to this:
> 
> function detokenize(text)
> 	text = text:gsub("\n\n","\\par ")
> 	text = text:gsub("\n"," ")
> 	return text
> end
> 
I am amazed.  How did you find that?!

The step that does the trick is not the object-oriented representsation,
it is the extra step so that one can have just "return text".

"pdftotext xxx.pdf" still produces something curious, though.

Dirk


From Peter_Dyballa at Web.DE  Thu Feb 24 12:49:54 2011
From: Peter_Dyballa at Web.DE (Peter Dyballa)
Date: Thu, 24 Feb 2011 12:49:54 +0100
Subject: [luatex] luaotfload | Updating the font names
 database:.../2010/texmf-dist/tex/luatex/lualibs/lualibs-file.lua:75: stack
 overflow
Message-ID: <59DACCAA-AF72-41D7-AD92-C9109B55205B@Web.DE>

Hello!

Could be the cause is that I have two TTC in the fonts search path.  
Invoking /usr/local/texlive/2010/texmf-dist/scripts/luaotfload/ 
mkluatexfontdb.lua with up to three (-)v only produces the same 25,000  
repeated lines of output without much content:

	luaotfload | Updating the font names database:
	luaotfload | Font names database not found, generating new one.
	             This can take several minutes; please be patient.

The option '--verbose=<undocumented level>' does not change anything.  
The documentation on where to place a private black list files is vague.


Mac OS X 10.5.8 (Leopard), PPC hardware.

--
Greetings

   Pete

The light at the end of the tunnel has been turned off due to budget  
cuts.


From st_philipp at yahoo.de  Thu Feb 24 16:13:32 2011
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Thu, 24 Feb 2011 16:13:32 +0100
Subject: [luatex] luaotfload | Updating the font names
 database:.../2010/texmf-dist/tex/luatex/lualibs/lualibs-file.lua:75: stack
 overflow
In-Reply-To: <59DACCAA-AF72-41D7-AD92-C9109B55205B@Web.DE>
References: <59DACCAA-AF72-41D7-AD92-C9109B55205B@Web.DE>
Message-ID: <4D66759C.70600@yahoo.de>

Am 24.02.2011 12:49, schrieb Peter Dyballa:
> Hello!
> 
> Could be the cause is that I have two TTC in the fonts search path.

No, TTCs work fine, I too have several of them. Looks like this bug:
https://github.com/khaledhosny/luaotfload/issues/23

From jmalv04 at gmail.com  Fri Feb 25 21:24:33 2011
From: jmalv04 at gmail.com (Jose)
Date: Fri, 25 Feb 2011 21:24:33 +0100
Subject: [luatex] installing luatex betas
Message-ID: <AANLkTimq8YogJ_VMS_s23=iKSaZWVjJCn54_=kjhmFyD@mail.gmail.com>

Hi,

I'm new to LuaTeX  (but not to Lua). I am running Fedora Core 14 on x86_64

I tried to approaches:

1. A minimal install from source (0.65) as detailed in this blog post:
http://www.readytext.co.uk/?p=642

In this approach I fail to build the .fmt files:

luatex --ini plain \dump

--
kdebug:start search(files=[/myluatex/texmf/tex/generic/hyphen/hyphen.tex],
must_exist=0, find_all=0, path=.:/myluatex/texmf/tex//).
kdebug:search([/myluatex/texmf/tex/generic/hyphen/hyphen.tex]) =>
/myluatex/texmf/tex/generic/hyphen/hyphen.tex
kdebug:fopen(/myluatex/texmf/tex/generic/hyphen/hyphen.tex, rb) => 0x21b6100

(/myluatex/texmf/tex/generic/hyphen/hyphen.tex))
*
--

2. Using the Fedora repository (0.60)

Below is the output I get when trying to generate a basic document:

# luatex t
FontForge does not support your encoding (utf8), it will pretend the
local encoding is latin1
This is LuaTeX, Version beta-0.60.2-2011020812 (TeX Live 2011/dev) (rev 3736)
 restricted \write18 enabled.
(./t.tex
! Undefined control sequence.
l.2 \starttext


Could anybody provide any hints on how to fixe these issues ? What is
the FontForge message about ?
(BTW, I also installed the texlive-unicode-cm package)

regards
jose

From martin at oneiros.de  Fri Feb 25 21:29:31 2011
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 25 Feb 2011 21:29:31 +0100
Subject: [luatex] installing luatex betas
In-Reply-To: <AANLkTimq8YogJ_VMS_s23=iKSaZWVjJCn54_=kjhmFyD@mail.gmail.com>
References: <AANLkTimq8YogJ_VMS_s23=iKSaZWVjJCn54_=kjhmFyD@mail.gmail.com>
Message-ID: <AANLkTikVK=kG--WA+xCbqmFF-G1rChKNBFf6OnmGcPt=@mail.gmail.com>

2011/2/25 Jose <jmalv04 at gmail.com>:
> I'm new to LuaTeX ?(but not to Lua). I am running Fedora Core 14 on x86_64
>
> I tried to approaches:

Install TeXlive 2010 and get your luatex from TLcontrib.

Best
   Martin


From jmalv04 at gmail.com  Sat Feb 26 12:05:53 2011
From: jmalv04 at gmail.com (Jose)
Date: Sat, 26 Feb 2011 12:05:53 +0100
Subject: [luatex] installing luatex betas
In-Reply-To: <AANLkTikVK=kG--WA+xCbqmFF-G1rChKNBFf6OnmGcPt=@mail.gmail.com>
References: <AANLkTimq8YogJ_VMS_s23=iKSaZWVjJCn54_=kjhmFyD@mail.gmail.com>
 <AANLkTikVK=kG--WA+xCbqmFF-G1rChKNBFf6OnmGcPt=@mail.gmail.com>
Message-ID: <AANLkTiminj6UbiZws7ObHRtbYpyo9uPRCdtCByyCPcmB@mail.gmail.com>

On Fri, Feb 25, 2011 at 9:29 PM, Martin Schr?der <martin at oneiros.de> wrote:
> Install TeXlive 2010 and get your luatex from TLcontrib.

Can I run the latest betas that way ? (still, I would like to get some
hints on what was wrong with the previous approaches)

thanks


From mojca.miklavec.lists at gmail.com  Sat Feb 26 12:25:46 2011
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sat, 26 Feb 2011 12:25:46 +0100
Subject: [luatex] installing luatex betas
In-Reply-To: <AANLkTiminj6UbiZws7ObHRtbYpyo9uPRCdtCByyCPcmB@mail.gmail.com>
References: <AANLkTimq8YogJ_VMS_s23=iKSaZWVjJCn54_=kjhmFyD@mail.gmail.com>
 <AANLkTikVK=kG--WA+xCbqmFF-G1rChKNBFf6OnmGcPt=@mail.gmail.com>
 <AANLkTiminj6UbiZws7ObHRtbYpyo9uPRCdtCByyCPcmB@mail.gmail.com>
Message-ID: <AANLkTikQcTnugP0mFJc+jsAUvx2qKvoTQqB6R92tEwyc@mail.gmail.com>

On Sat, Feb 26, 2011 at 12:05, Jose <jmalv04 at gmail.com> wrote:
> On Fri, Feb 25, 2011 at 9:29 PM, Martin Schr?der <martin at oneiros.de> wrote:
>> Install TeXlive 2010 and get your luatex from TLcontrib.
>
> Can I run the latest betas that way ? (still, I would like to get some
> hints on what was wrong with the previous approaches)

You file t.tex contained \starttext which is a ConTeXt command.

I don't know what was in that file (where you got it from etc.), but
if you want to compile ConTeXt files, you need to install ConTeXt as
well and the article about minimal luatex installation won't suffice.
Did you try to compile a simple file like

    hello world \bye

Mojca


From mojca.miklavec.lists at gmail.com  Sat Feb 26 22:41:21 2011
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Sat, 26 Feb 2011 22:41:21 +0100
Subject: [luatex] installing luatex betas
In-Reply-To: <AANLkTik3S8jvP5x_1n016xjUUcmY1uhgxz=pjoS=eTdo@mail.gmail.com>
References: <AANLkTimq8YogJ_VMS_s23=iKSaZWVjJCn54_=kjhmFyD@mail.gmail.com>
 <AANLkTikVK=kG--WA+xCbqmFF-G1rChKNBFf6OnmGcPt=@mail.gmail.com>
 <AANLkTiminj6UbiZws7ObHRtbYpyo9uPRCdtCByyCPcmB@mail.gmail.com>
 <AANLkTikQcTnugP0mFJc+jsAUvx2qKvoTQqB6R92tEwyc@mail.gmail.com>
 <AANLkTik3S8jvP5x_1n016xjUUcmY1uhgxz=pjoS=eTdo@mail.gmail.com>
Message-ID: <AANLkTinTmsJg8h32Q2MFHMtcdRjSBtVp5Zn1A-rchrqP@mail.gmail.com>

On Sat, Feb 26, 2011 at 17:41, Jose <jmalv04 at gmail.com> wrote:
>
> For option 2 I've installed the following:
>
> texlive-collection-luatex-2011-0.1.svn20423.fc14.noarch
> texlive-collection-basic-2011-0.1.svn20730.fc14.noarch
> texlive-collection-context-2011-0.1.svn19939.fc14.noarch
>
> 1. luatex simple.tex works OK
>
> 2. I am trying to compile the file below with context t.tex
> -------------------
> \starttext
> aha!
> \stoptext
> -------------------
>
> I get this output:
>
> FontForge does not support your encoding (utf8), it will pretend the
> local encoding is latin1
> MTXrun | unknown script 'context.lua' or 'mtx-context.lua'
>
> (even if I run luatools --generate)
>
> What I eventually want to do is just compile ConTeXt files with
> embedded Lua (/startluacode and /stopluacode)
>
> So your answer helps me advance but I still don't understand:
>
> 1) Why FontForrge does not support utf8 ?

What is the size of luatex executable?

I don't know Fedora well enough, but it is possible that they took
their own version of fontforge library, while luatex has a modified
version of FontForge (blind guess, I don't know anything about it).

> 2) How can I generate context.lua ?

My blind guess is that ConTeXt configuration has not been properly
adapted for the way Fedora packages its TeX Live distribution. ConTeXt
has to find texmfcnf.lua. Once it does it tries to respect it, but I
guess that the file has not been modified like texmf.cnf. It is
possible that:
- ConTeXt doesn't find the file at all.
- Even if it finds it, it doesn't help unless file is properly adapted.

You may try to send texmf.cnf and texmfcnf.lua from your Fedora to
ConTeXt mailing list (also write where you have binaries and where you
have texmf trees), but you might need to talk to Fedora developers as
well.

Mojca

From pragma at wxs.nl  Sat Feb 26 23:45:58 2011
From: pragma at wxs.nl (Hans Hagen)
Date: Sat, 26 Feb 2011 23:45:58 +0100
Subject: [luatex] installing luatex betas
In-Reply-To: <AANLkTinTmsJg8h32Q2MFHMtcdRjSBtVp5Zn1A-rchrqP@mail.gmail.com>
References: <AANLkTimq8YogJ_VMS_s23=iKSaZWVjJCn54_=kjhmFyD@mail.gmail.com>
 <AANLkTikVK=kG--WA+xCbqmFF-G1rChKNBFf6OnmGcPt=@mail.gmail.com>
 <AANLkTiminj6UbiZws7ObHRtbYpyo9uPRCdtCByyCPcmB@mail.gmail.com>
 <AANLkTikQcTnugP0mFJc+jsAUvx2qKvoTQqB6R92tEwyc@mail.gmail.com>
 <AANLkTik3S8jvP5x_1n016xjUUcmY1uhgxz=pjoS=eTdo@mail.gmail.com>
 <AANLkTinTmsJg8h32Q2MFHMtcdRjSBtVp5Zn1A-rchrqP@mail.gmail.com>
Message-ID: <4D6982A6.1090400@wxs.nl>

On 26-2-2011 10:41, Mojca Miklavec wrote:

> What is the size of luatex executable?
>
> I don't know Fedora well enough, but it is possible that they took
> their own version of fontforge library, while luatex has a modified
> version of FontForge (blind guess, I don't know anything about it).

luatex has a subset of fontforge so sharing libs with fontforge itself 
will never be the case

but it smells like a binary mixup as utf is unrelated to fontforge in 
luatex

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From reinhard.kotucha at web.de  Sun Feb 27 02:36:56 2011
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sun, 27 Feb 2011 02:36:56 +0100
Subject: [luatex] installing luatex betas
In-Reply-To: <AANLkTinTmsJg8h32Q2MFHMtcdRjSBtVp5Zn1A-rchrqP@mail.gmail.com>
References: <AANLkTimq8YogJ_VMS_s23=iKSaZWVjJCn54_=kjhmFyD@mail.gmail.com>
 <AANLkTikVK=kG--WA+xCbqmFF-G1rChKNBFf6OnmGcPt=@mail.gmail.com>
 <AANLkTiminj6UbiZws7ObHRtbYpyo9uPRCdtCByyCPcmB@mail.gmail.com>
 <AANLkTikQcTnugP0mFJc+jsAUvx2qKvoTQqB6R92tEwyc@mail.gmail.com>
 <AANLkTik3S8jvP5x_1n016xjUUcmY1uhgxz=pjoS=eTdo@mail.gmail.com>
 <AANLkTinTmsJg8h32Q2MFHMtcdRjSBtVp5Zn1A-rchrqP@mail.gmail.com>
Message-ID: <19817.43704.867853.175287@zaphod.ms25.net>

On 2011-02-26 at 22:41:21 +0100, Mojca Miklavec wrote:

 > What is the size of luatex executable?

Executables shipped with TeX Live or provided by the LuaTeX team are
statically linked.  Linux distributors prefer dynamic linking, hence
the sizes of executables are certainly different.

I'm convinced that you get different sizes with different C-compilers
(or even different versions of GCC).  ...not to mention different
platforms.

If something doesn't work as expected, I recommend to install the
"authentic" LuaTeX and compare the results with the Fedora version.

However, the result of "luatex --version" is more reliable than the
size of the executable.  And maybe the output of

  ldd `which luatex`

is quite helpful too.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From till.heilmann at unibas.ch  Sun Feb 27 07:50:47 2011
From: till.heilmann at unibas.ch (Heilmann, Till A.)
Date: Sun, 27 Feb 2011 07:50:47 +0100
Subject: [luatex] German hyphenation, fontspec and adjusted kerning
Message-ID: <0482CD36-F7DF-4FB2-9F2C-6659C9BD7118@unibas.ch>

Just to let the readers of this list know: The problem has been  
solved on the ConTeXt mailing list. Adjusting the kerning of OpenType  
fonts only works with (some) hyphenation patterns when luaotfload  
operates in basic mode. Using fontspec, you have to load the font  
with the option "Renderer=Basic" (see below).

- Till

\begin{filecontents*}{bonum.fea}
languagesystem DFLT dflt;
languagesystem latn dflt;
feature kern {
pos f h 100;
} kern;
\documentclass{article}
\usepackage[ngerman]{babel}
\usepackage{fontspec}
\setmainfont[Renderer=Basic,FeatureFile=bonum.fea]{TeX Gyre Bonum}
\begin{document}
fh aufhalten
\end{document}

From Peter_Dyballa at Freenet.DE  Sun Feb 27 11:41:59 2011
From: Peter_Dyballa at Freenet.DE (Peter Dyballa)
Date: Sun, 27 Feb 2011 11:41:59 +0100
Subject: [luatex] luaotfload | Updating the font names
 database:.../2010/texmf-dist/tex/luatex/lualibs/lualibs-file.lua:75: stack
 overflow
In-Reply-To: <59DACCAA-AF72-41D7-AD92-C9109B55205B@Web.DE>
References: <59DACCAA-AF72-41D7-AD92-C9109B55205B@Web.DE>
Message-ID: <1E3CA827-8F04-4935-A5A1-723594DA7CA0@Freenet.DE>

Hello!

After an update mkluatexfontdb now works as advertised. It stops here:

	luaotfload | loading font: /Library/Fonts/Extrafonts/ 
mingliub.ttcSegmentation fault (core dumped)

What is the right place for the personal blacklist file? Neither  
documentation nor kpsewhich give a hint.


Here on Mac OS X 10.5.8 (Leopard, without Snow), PPC, mkluatexfontdb  
also reports:

	luaotfload | error: failed to open /Library/Fonts/NISC18030.ttf
	luaotfload | failed to load .Keyboard.ttf
	luaotfload | failed to load .LastResort.ttf

So these names should be put into the system's blacklist file as well.


The script seems to catalogue some font files more often than once:

	luaotfload | loading font: /Library/Fonts/Extrafonts/Vera.ttf
	luaotfload | loading font: /Library/Fonts/Extrafonts/Vera.ttf
	luaotfload | loading font: /Library/Fonts/Extrafonts/Vera.ttf
	luaotfload | loading font: /Library/Fonts/Extrafonts/Vera.ttf
	luaotfload | loading font: /Library/Fonts/Extrafonts/Vera.ttf

Is this necessary?


Mkluatexfontdb has a systematic flaw: It makes no difference between  
activated and not activated "installed" fonts (installed = can be  
found on disk). So different versions of the same font are scanned and  
catalogued. Is it chance which lets LuaTeX choose the font it uses for  
PDF output?

--
Greetings

   Pete

                (This space left blank for technical reasons.)


From khaledhosny at eglug.org  Sun Feb 27 17:15:51 2011
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sun, 27 Feb 2011 18:15:51 +0200
Subject: [luatex] luaotfload | Updating the font names
 database:.../2010/texmf-dist/tex/luatex/lualibs/lualibs-file.lua:75: stack
 overflow
In-Reply-To: <1E3CA827-8F04-4935-A5A1-723594DA7CA0@Freenet.DE>
References: <59DACCAA-AF72-41D7-AD92-C9109B55205B@Web.DE>
 <1E3CA827-8F04-4935-A5A1-723594DA7CA0@Freenet.DE>
Message-ID: <20110227161551.GA11794@khaled-laptop>

On Sun, Feb 27, 2011 at 11:41:59AM +0100, Peter Dyballa wrote:
> Hello!
> 
> After an update mkluatexfontdb now works as advertised. It stops here:
> 
> 	luaotfload | loading font: /Library/Fonts/Extrafonts/
> mingliub.ttcSegmentation fault (core dumped)
> 
> What is the right place for the personal blacklist file? Neither
> documentation nor kpsewhich give a hint.

Anywhere kpse looks for .lua files, I've no definite answer myself, but
$HOME/texmf/tex/luatex/ would work. But I think Taco would be interested
in debugging this font.

> Here on Mac OS X 10.5.8 (Leopard, without Snow), PPC, mkluatexfontdb
> also reports:
> 
> 	luaotfload | error: failed to open /Library/Fonts/NISC18030.ttf
> 	luaotfload | failed to load .Keyboard.ttf
> 	luaotfload | failed to load .LastResort.ttf
> 
> So these names should be put into the system's blacklist file as well.

Not necessary, luaotfload will ignore it anyway (that is different from
the above case where the engine itself is crashing).

> The script seems to catalogue some font files more often than once:
> 
> 	luaotfload | loading font: /Library/Fonts/Extrafonts/Vera.ttf
> 	luaotfload | loading font: /Library/Fonts/Extrafonts/Vera.ttf
> 	luaotfload | loading font: /Library/Fonts/Extrafonts/Vera.ttf
> 	luaotfload | loading font: /Library/Fonts/Extrafonts/Vera.ttf
> 	luaotfload | loading font: /Library/Fonts/Extrafonts/Vera.ttf
> 
> Is this necessary?

Do you have OSFONTDIR set? may be the file is returned several times by
kpse e.g. one when asking for opentype fonts and one for truetype fonts,
but then you shouldn't see those lines in succession.

> Mkluatexfontdb has a systematic flaw: It makes no difference between
> activated and not activated "installed" fonts (installed = can be
> found on disk). So different versions of the same font are scanned
> and catalogued. Is it chance which lets LuaTeX choose the font it
> uses for PDF output?

You can set OSFONTDIR to control what system font directories are active
or not, you can also use `fonts.names.scan("/path/foo")` in your
document to load fonts from a specific directory (those fonts will not
be saved in the names database, though). Mac OS X has API to list system
fonts (which take care of activated and unactivated fonts) but I've no
idea how to access it from lua (on Linux we read the configuration files
directly since they are publicly documented, but there are also command
lines tools using fontconfig that we were using initially).

Regards,
 Khaled

-- 
 Khaled Hosny
 Egyptian
 Arab

From Peter_Dyballa at Freenet.DE  Sun Feb 27 22:21:34 2011
From: Peter_Dyballa at Freenet.DE (Peter Dyballa)
Date: Sun, 27 Feb 2011 22:21:34 +0100
Subject: [luatex] luaotfload | Updating the font names
	database:.../2010/texmf-dist/tex/luatex/lualibs/lualibs-file.lua:75:
	stack overflow
In-Reply-To: <1E3CA827-8F04-4935-A5A1-723594DA7CA0@Freenet.DE>
References: <59DACCAA-AF72-41D7-AD92-C9109B55205B@Web.DE>
 <1E3CA827-8F04-4935-A5A1-723594DA7CA0@Freenet.DE>
Message-ID: <1D8CDA99-48F8-4303-BBB4-512C13AE2456@Freenet.DE>

Am 27.02.2011 um 17:15 schrieb Khaled Hosny:
> > Here on Mac OS X 10.5.8 (Leopard, without Snow), PPC, mkluatexfontdb
> > also reports:
> >
> > 	luaotfload | error: failed to open /Library/Fonts/NISC18030.ttf
> > 	luaotfload | failed to load .Keyboard.ttf
> > 	luaotfload | failed to load .LastResort.ttf
> >
> > So these names should be put into the system's blacklist file as  
> well.
> Not necessary, luaotfload will ignore it anyway (that is different  
> from the above case where the engine itself is crashing).
The last two fonts are converted versions of system fonts, installed  
by a Fink package. Presumingly they're pretty useless and hopefully  
they don't get installed any more. FontForge can't use them. The first  
font is just a big bag of bitmapped CJK glyphs.
>
> > The script seems to catalogue some font files more often than once:
> >
> > 	luaotfload | loading font: /Library/Fonts/Extrafonts/Vera.ttf
> > 	luaotfload | loading font: /Library/Fonts/Extrafonts/Vera.ttf
> > 	luaotfload | loading font: /Library/Fonts/Extrafonts/Vera.ttf
> > 	luaotfload | loading font: /Library/Fonts/Extrafonts/Vera.ttf
> > 	luaotfload | loading font: /Library/Fonts/Extrafonts/Vera.ttf
> >
> > Is this necessary?
>
> Do you have OSFONTDIR set? may be the file is returned several times  
> by
> kpse e.g. one when asking for opentype fonts and one for truetype  
> fonts,
> but then you shouldn't see those lines in succession.
When I browsed through the output generated by mkluatexfontdb I saw  
that it again and again accessed the same fonts. Then I filtered the  
output with sort and cited a very small block. They were certainly not  
issued in succession.

I have OSFONTDIR set to /usr/X11/lib/X11/fonts//;/Library/Fonts//;/ 
System/Library/Fonts;$HOME/Library/Fonts;/System/Library/Frameworks/ 
JavaVM.framework/Versions/1.3.1/Home/lib/fonts;/System/Library/ 
Frameworks/JavaVM.framework/Versions/1.6.0/Home/lib/fonts; in TL '09 I  
had also Fink font directories added, but it seems that FontForge can  
read any [reasonable] Apple font format, so I removed it now.  
Presumingly I can remove the X11 fonts too. (The only valuable fonts  
are local additions of "system" fonts. This path element will get  
removed afterwards!) I have added sym-links to the font files in / 
Library/Fonts/Extrafonts to the local X11 font directory.

>
> > Mkluatexfontdb has a systematic flaw: It makes no difference between
> > activated and not activated "installed" fonts (installed = can be
> > found on disk). So different versions of the same font are scanned
> > and catalogued. Is it chance which lets LuaTeX choose the font it
> > uses for PDF output?
>
> You can set OSFONTDIR to control what system font directories are  
> active
> or not,

This would make it necessary to organise the duplicate fonts  
differently. The OS' font service sets markers in its table of known  
fonts, so their place in the file system plays no role. (Maybe LuaTeX  
can learn from BeOS/NeXTSTEP a bit as well...)

--
Greetings

   Pete

Ce qui a ?t? compris n'existe plus.
				(Paul Eluard)



From khaledhosny at eglug.org  Sun Feb 27 23:30:55 2011
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Mon, 28 Feb 2011 00:30:55 +0200
Subject: [luatex] luaotfload | Updating the font names
 database:.../2010/texmf-dist/tex/luatex/lualibs/lualibs-file.lua:75: stack
 overflow
In-Reply-To: <1D8CDA99-48F8-4303-BBB4-512C13AE2456@Freenet.DE>
References: <59DACCAA-AF72-41D7-AD92-C9109B55205B@Web.DE>
 <1E3CA827-8F04-4935-A5A1-723594DA7CA0@Freenet.DE>
 <1D8CDA99-48F8-4303-BBB4-512C13AE2456@Freenet.DE>
Message-ID: <20110227223055.GA12876@khaled-laptop>

On Sun, Feb 27, 2011 at 10:21:34PM +0100, Peter Dyballa wrote:
> >> The script seems to catalogue some font files more often than once:
> >>
> >> 	luaotfload | loading font: /Library/Fonts/Extrafonts/Vera.ttf
> >> 	luaotfload | loading font: /Library/Fonts/Extrafonts/Vera.ttf
> >> 	luaotfload | loading font: /Library/Fonts/Extrafonts/Vera.ttf
> >> 	luaotfload | loading font: /Library/Fonts/Extrafonts/Vera.ttf
> >> 	luaotfload | loading font: /Library/Fonts/Extrafonts/Vera.ttf
> >>
> >> Is this necessary?
> >
> >Do you have OSFONTDIR set? may be the file is returned several
> >times by
> >kpse e.g. one when asking for opentype fonts and one for truetype
> >fonts,
> >but then you shouldn't see those lines in succession.
> When I browsed through the output generated by mkluatexfontdb I saw
> that it again and again accessed the same fonts. Then I filtered the
> output with sort and cited a very small block. They were certainly
> not issued in succession.

The code usually don't reload an already saved font (or so I guess, I've
to check the code again) but usually the "loading" message is issued too
early so it don't usually mean the font got actually read again.

Regards,
 Khaled

-- 
 Khaled Hosny
 Egyptian
 Arab

From taco at elvenkind.com  Mon Feb 28 08:55:37 2011
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 28 Feb 2011 08:55:37 +0100
Subject: [luatex] luaotfload | Updating the font
 names	database:.../2010/texmf-dist/tex/luatex/lualibs/lualibs-file.lua:75:
 stack overflow
In-Reply-To: <1D8CDA99-48F8-4303-BBB4-512C13AE2456@Freenet.DE>
References: <59DACCAA-AF72-41D7-AD92-C9109B55205B@Web.DE>
 <1E3CA827-8F04-4935-A5A1-723594DA7CA0@Freenet.DE>
 <1D8CDA99-48F8-4303-BBB4-512C13AE2456@Freenet.DE>
Message-ID: <4D6B54F9.7000608@elvenkind.com>

On 02/27/2011 10:21 PM, Peter Dyballa wrote:
>
> This would make it necessary to organise the duplicate fonts
> differently. The OS' font service sets markers in its table of known
> fonts, so their place in the file system plays no role. (Maybe LuaTeX
> can learn from BeOS/NeXTSTEP a bit as well...)

Quite definitely not going to happen: we will not be adding
operating-system specific code to luatex.

Best wishes,
Taco

From khaledhosny at eglug.org  Mon Feb 28 14:48:51 2011
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Mon, 28 Feb 2011 15:48:51 +0200
Subject: [luatex] luaotfload | Updating the font names
 database:.../2010/texmf-dist/tex/luatex/lualibs/lualibs-file.lua:75: stack
 overflow
In-Reply-To: <1D8CDA99-48F8-4303-BBB4-512C13AE2456@Freenet.DE>
References: <59DACCAA-AF72-41D7-AD92-C9109B55205B@Web.DE>
 <1E3CA827-8F04-4935-A5A1-723594DA7CA0@Freenet.DE>
 <1D8CDA99-48F8-4303-BBB4-512C13AE2456@Freenet.DE>
Message-ID: <20110228134851.GA2497@khaled-laptop>

On Sun, Feb 27, 2011 at 10:21:34PM +0100, Peter Dyballa wrote:
> >You can set OSFONTDIR to control what system font directories are
> >active
> >or not,
> 
> This would make it necessary to organise the duplicate fonts
> differently. The OS' font service sets markers in its table of known
> fonts, so their place in the file system plays no role. (Maybe
> LuaTeX can learn from BeOS/NeXTSTEP a bit as well...)

This is not going to happen (see Taco's reply, which is nothing new as
it has been stated in several occasions), but a possible compromise is
for someone writing an independent command line tool that can interact
with Apple APIs and return a list of system fonts (all what we need is
absolute file paths) and luaotfload on mac would use it.

Regards,
 Khaled

-- 
 Khaled Hosny
 Egyptian
 Arab

From st_philipp at yahoo.de  Mon Feb 28 18:39:20 2011
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Mon, 28 Feb 2011 18:39:20 +0100
Subject: [luatex] luaotfload | Updating the font names
	database:.../2010/texmf-dist/tex/luatex/lualibs/lualibs-file.lua:75:
	stack overflow
In-Reply-To: <20110228134851.GA2497@khaled-laptop>
References: <59DACCAA-AF72-41D7-AD92-C9109B55205B@Web.DE>
 <1E3CA827-8F04-4935-A5A1-723594DA7CA0@Freenet.DE>
 <1D8CDA99-48F8-4303-BBB4-512C13AE2456@Freenet.DE>
 <20110228134851.GA2497@khaled-laptop>
Message-ID: <5A9522A5-E3EC-447C-82E5-28A04406B76E@yahoo.de>


Am 28.02.2011 um 14:48 schrieb Khaled Hosny:

> On Sun, Feb 27, 2011 at 10:21:34PM +0100, Peter Dyballa wrote:
>>> You can set OSFONTDIR to control what system font directories are
>>> active
>>> or not,
>> 
>> This would make it necessary to organise the duplicate fonts
>> differently. The OS' font service sets markers in its table of known
>> fonts, so their place in the file system plays no role. (Maybe
>> LuaTeX can learn from BeOS/NeXTSTEP a bit as well...)
> 
> This is not going to happen (see Taco's reply, which is nothing new as
> it has been stated in several occasions), but a possible compromise is
> for someone writing an independent command line tool that can interact
> with Apple APIs and return a list of system fonts (all what we need is
> absolute file paths) and luaotfload on mac would use it.

Done, see https://github.com/phst/ListFonts

From khaledhosny at eglug.org  Mon Feb 28 19:56:33 2011
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Mon, 28 Feb 2011 20:56:33 +0200
Subject: [luatex] luaotfload | Updating the font names
 database:.../2010/texmf-dist/tex/luatex/lualibs/lualibs-file.lua:75: stack
 overflow
In-Reply-To: <5A9522A5-E3EC-447C-82E5-28A04406B76E@yahoo.de>
References: <59DACCAA-AF72-41D7-AD92-C9109B55205B@Web.DE>
 <1E3CA827-8F04-4935-A5A1-723594DA7CA0@Freenet.DE>
 <1D8CDA99-48F8-4303-BBB4-512C13AE2456@Freenet.DE>
 <20110228134851.GA2497@khaled-laptop>
 <5A9522A5-E3EC-447C-82E5-28A04406B76E@yahoo.de>
Message-ID: <20110228185633.GA1880@khaled-laptop>

On Mon, Feb 28, 2011 at 06:39:20PM +0100, Philipp Stephani wrote:
> 
> Am 28.02.2011 um 14:48 schrieb Khaled Hosny:
> 
> > On Sun, Feb 27, 2011 at 10:21:34PM +0100, Peter Dyballa wrote:
> >>> You can set OSFONTDIR to control what system font directories are
> >>> active
> >>> or not,
> >> 
> >> This would make it necessary to organise the duplicate fonts
> >> differently. The OS' font service sets markers in its table of known
> >> fonts, so their place in the file system plays no role. (Maybe
> >> LuaTeX can learn from BeOS/NeXTSTEP a bit as well...)
> > 
> > This is not going to happen (see Taco's reply, which is nothing new as
> > it has been stated in several occasions), but a possible compromise is
> > for someone writing an independent command line tool that can interact
> > with Apple APIs and return a list of system fonts (all what we need is
> > absolute file paths) and luaotfload on mac would use it.
> 
> Done, see https://github.com/phst/ListFonts

Great, can we have easily parsable output, one file per line with no
file:// and # thing. Don't put much effort in it though, if not readily
avialable on the C side we can parse it in lua. In any case, can you
send me a sample output so I can play with it (I've no macs) unless
someone want to do the luaotfload stuff himself.

Regards,
 Khaled

-- 
 Khaled Hosny
 Egyptian
 Arab

From st_philipp at yahoo.de  Mon Feb 28 20:33:56 2011
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Mon, 28 Feb 2011 20:33:56 +0100
Subject: [luatex] luaotfload | Updating the font names
	database:.../2010/texmf-dist/tex/luatex/lualibs/lualibs-file.lua:75:
	stack overflow
In-Reply-To: <20110228185633.GA1880@khaled-laptop>
References: <59DACCAA-AF72-41D7-AD92-C9109B55205B@Web.DE>
 <1E3CA827-8F04-4935-A5A1-723594DA7CA0@Freenet.DE>
 <1D8CDA99-48F8-4303-BBB4-512C13AE2456@Freenet.DE>
 <20110228134851.GA2497@khaled-laptop>
 <5A9522A5-E3EC-447C-82E5-28A04406B76E@yahoo.de>
 <20110228185633.GA1880@khaled-laptop>
Message-ID: <A99D9543-C17D-43E2-ACA1-C2E5A483AA08@yahoo.de>


Am 28.02.2011 um 19:56 schrieb Khaled Hosny:

> On Mon, Feb 28, 2011 at 06:39:20PM +0100, Philipp Stephani wrote:
>> 
>> Am 28.02.2011 um 14:48 schrieb Khaled Hosny:
>> 
>>> On Sun, Feb 27, 2011 at 10:21:34PM +0100, Peter Dyballa wrote:
>>>>> You can set OSFONTDIR to control what system font directories are
>>>>> active
>>>>> or not,
>>>> 
>>>> This would make it necessary to organise the duplicate fonts
>>>> differently. The OS' font service sets markers in its table of known
>>>> fonts, so their place in the file system plays no role. (Maybe
>>>> LuaTeX can learn from BeOS/NeXTSTEP a bit as well...)
>>> 
>>> This is not going to happen (see Taco's reply, which is nothing new as
>>> it has been stated in several occasions), but a possible compromise is
>>> for someone writing an independent command line tool that can interact
>>> with Apple APIs and return a list of system fonts (all what we need is
>>> absolute file paths) and luaotfload on mac would use it.
>> 
>> Done, see https://github.com/phst/ListFonts
> 
> Great, can we have easily parsable output, one file per line with no
> file:// and # thing.

Yes that's easy, but the path will always be percent encoded (which is a good choice since it solves all problems related to encodings, spaces, newlines etc.), so you need to decode the string according to the RFC. If the PostScript name is included, you could compare the OS X name with the FontForge name and issue a warning if they don't match.

> In any case, can you
> send me a sample output so I can play with it (I've no macs) unless
> someone want to do the luaotfload stuff himself.

I'll send you the output on my system off-list.

