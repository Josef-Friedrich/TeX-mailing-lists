From luatex at nililand.de  Mon Jul  2 13:58:40 2018
From: luatex at nililand.de (Ulrike Fischer)
Date: Mon, 2 Jul 2018 13:58:40 +0200
Subject: [luatex] luatex panics if an obj is written twice
Message-ID: <1lmf7fdjrsdta$.dlg@nililand.de>

I inadvertently tried to write the same object twice:

blbl
 \pdfextension obj reserveobjnum
 \edef\mynum{\pdffeedback lastobj}
  \pdfextension obj useobjnum \mynum {something}
  \pdfextension obj useobjnum \mynum {something}
\bye

and then luatex panicked:

(./test-utf8.texPANIC: unprotected error in call to Lua API (object
in use)

A similar error in pdflatex gives only a warning:
pdfTeX warning (\pdfobj): invalid object number being ignored

Can one avoid the PANIC crash?
And how can I test if the object number is valid before trying to
write the object?


-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From eduardoochs at gmail.com  Tue Jul 17 23:55:17 2018
From: eduardoochs at gmail.com (Eduardo Ochs)
Date: Tue, 17 Jul 2018 18:55:17 -0300
Subject: [luatex] The "read" half of TeX_without_TeX (in a REPL)
Message-ID: <CADs++6g0dd97dEMbYUaDygvqR4F0jE5-4r-QoBeNjRMxcUBfWg@mail.gmail.com>

Hi list,

in a few days - in july 20 - I will give a talk at a TUG meeting about
the LuaTeX-based package ("dednat6") that I've been using for diagrams
since several years ago... the slides for the talk are here:

  http://angg.twu.net/math-b.html#tug-2018
  http://angg.twu.net/LATEX/2018tug-dednat6.pdf

The thing is: in one of the last slides I show how we can use dednat6
to run a Lua REPL in the middle of a .tex file, and how we can then
use that to inspect TeX structures - for example, we can inspect the
contents of tex.box[0] from Lua... but I am probably one of the most
un-knowleadgeable persons on that in this mailing list...

Many years ago I worked through this page

  http://wiki.luatex.org/index.php/TeX_without_TeX

quite carefully, and translated its code into something that I could
run interactively by sending commands one by one to the Lua
interpreter; I had to fix several little things - the code in
TeX_without_TeX seemed to be slightly outdated - and the last time
that I tested my scripts they didn't work, they would need more fixes.

Anyone has (a link for?) an example of how to _inspect_ a TeX box from
Lua? Even a simple example, like how to show the glyphs in

  \setbox0\hbox{abc}

would help me a lot...

Thanks in advance!!!
  Cheers,
    Eduardo Ochs
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/luatex/attachments/20180717/df0f579a/attachment.html>

From henrimenke at gmail.com  Wed Jul 18 01:35:52 2018
From: henrimenke at gmail.com (Henri Menke)
Date: Wed, 18 Jul 2018 11:35:52 +1200
Subject: [luatex] The "read" half of TeX_without_TeX (in a REPL)
In-Reply-To: <CADs++6g0dd97dEMbYUaDygvqR4F0jE5-4r-QoBeNjRMxcUBfWg@mail.gmail.com>
References: <CADs++6g0dd97dEMbYUaDygvqR4F0jE5-4r-QoBeNjRMxcUBfWg@mail.gmail.com>
Message-ID: <6225d4f5-9447-c67f-a145-32877d461b1f@gmail.com>



On 18/07/18 09:55, Eduardo Ochs wrote:
> Hi list,
> 
> in a few days - in july 20 - I will give a talk at a TUG meeting about
> the LuaTeX-based package ("dednat6") that I've been using for diagrams
> since several years ago... the slides for the talk are here:
> 
> http://angg.twu.net/math-b.html#tug-2018
> http://angg.twu.net/LATEX/2018tug-dednat6.pdf
> 
> The thing is: in one of the last slides I show how we can use dednat6
> to run a Lua REPL in the middle of a .tex file, and how we can then
> use that to inspect TeX structures - for example, we can inspect the
> contents of tex.box[0] from Lua... but I am probably one of the most
> un-knowleadgeable persons on that in this mailing list...
> 
> Many years ago I worked through this page
> 
> http://wiki.luatex.org/index.php/TeX_without_TeX
> 
> quite carefully, and translated its code into something that I could
> run interactively by sending commands one by one to the Lua
> interpreter; I had to fix several little things - the code in
> TeX_without_TeX seemed to be slightly outdated - and the last time
> that I tested my scripts they didn't work, they would need more fixes.
> 
> Anyone has (a link for?) an example of how to _inspect_ a TeX box from
> Lua? Even a simple example, like how to show the glyphs in
> 
>  ? \setbox0\hbox{abc}

To traverse the glyphs in a box use node.traverse_id().  It's all 
documented in the LuaTeX manual.  The following example will print abc 
in the log.  N.B.: node.traverse_id() does not recurse into sublists.

\setbox0=\hbox{abc}

\directlua{
local head = tex.box[0].list
%
for n in node.traverse_id(node.id("glyph"),head) do
     print(utf8.char(n.char))
end
}

\bye


> 
> would help me a lot...
> 
> Thanks in advance!!!
>  ? Cheers,
>  ? ? Eduardo Ochs
> 

From eduardoochs at gmail.com  Thu Jul 19 03:44:41 2018
From: eduardoochs at gmail.com (Eduardo Ochs)
Date: Wed, 18 Jul 2018 22:44:41 -0300
Subject: [luatex] The "read" half of TeX_without_TeX (in a REPL)
In-Reply-To: <6225d4f5-9447-c67f-a145-32877d461b1f@gmail.com>
References: <CADs++6g0dd97dEMbYUaDygvqR4F0jE5-4r-QoBeNjRMxcUBfWg@mail.gmail.com>
 <6225d4f5-9447-c67f-a145-32877d461b1f@gmail.com>
Message-ID: <CADs++6jRh8pX6=hy4_2h-di-mtnMCw0UWKyhBu05S8Gw+JJe2Q@mail.gmail.com>

Done! I've adapted your example and added it to the slides!
Thanks a lot!!! =)

  Eduardo Ochs
    http://angg.twu.net/math-b.html#tug-2018
    http://angg.twu.net/e/luatex.e.html#tex-without-tex-email



On Tue, Jul 17, 2018 at 8:35 PM, Henri Menke <henrimenke at gmail.com> wrote:

>
>
To traverse the glyphs in a box use node.traverse_id().  It's all
> documented in the LuaTeX manual.  The following example will print abc in
> the log.  N.B.: node.traverse_id() does not recurse into sublists.
>
> \setbox0=\hbox{abc}
>
> \directlua{
> local head = tex.box[0].list
> %
> for n in node.traverse_id(node.id("glyph"),head) do
>     print(utf8.char(n.char))
> end
> }
>
> \bye
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/luatex/attachments/20180718/852863f3/attachment.html>

From listas at tex-tipografia.com  Sat Jul 21 11:24:17 2018
From: listas at tex-tipografia.com (Javier Bezos)
Date: Sat, 21 Jul 2018 11:24:17 +0200
Subject: [luatex] Misplaced letter
In-Reply-To: <f88wmk1pgu4s.dlg@nililand.de>
References: <5A32C199.5050904@tex-tipografia.com>
 <7nsv8n7gr66h$.dlg@nililand.de> <5A33F82F.4050207@tex-tipografia.com>
 <5A3516A5.80507@tex-tipografia.com> <p7ayx76g9niu.dlg@nililand.de>
 <47385b68-7c00-9d26-9a05-cde2fcd5f300@wxs.nl> <f88wmk1pgu4s.dlg@nililand.de>
Message-ID: <5B52FBC1.9080808@tex-tipografia.com>

Still struggling, after several months, with Arabic fonts :-(.
This is the only thing I need to release a new babel with support
for Arabic, but I'm stuck.

Hans:

     > I'll send Ulrike something to test.


Ulrike:

    With the patched function (added to a fontloader from 2017-12-12)
    the output of both examples looks ok (that means that the paragraphs
    are identical, I have no idea if they are correct ;-))


Please, could you post the fix here or send it to me?

By the way, I've attempted to use the context loader with:

-------
[run]
fontloader = context;
-------

in luaotfload.conf and with the help pf fontloader-luaotfload,
but it doesn't work, with the error:

-----
luaotfload | db : Reload initiated (formats: otf,ttf,ttc); reason: "File 
not found: lmroman10-regular.".(load luc: C:/Aplica
ciones/TeXLive/texmf-var/luatex-cache/generic/fonts/otl/lmroman10-regular.luc)
! Font \TU/lmr/m/n/10=[lmroman10-regular]:+tlig; at 10pt not loadable: metric d
ata not found or bad.
-----

A fix for this error would be also most welcome. The following
loads the fonts, but Arabic is still buggy:

-------
[run]
fontloader  = fontloader-reference-2017-08-18.lua;
-------

--
Javier



From j.hagen at xs4all.nl  Sat Jul 21 22:13:01 2018
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Sat, 21 Jul 2018 22:13:01 +0200
Subject: [luatex] Misplaced letter
In-Reply-To: <5B52FBC1.9080808@tex-tipografia.com>
References: <5A32C199.5050904@tex-tipografia.com>
 <7nsv8n7gr66h$.dlg@nililand.de> <5A33F82F.4050207@tex-tipografia.com>
 <5A3516A5.80507@tex-tipografia.com> <p7ayx76g9niu.dlg@nililand.de>
 <47385b68-7c00-9d26-9a05-cde2fcd5f300@wxs.nl> <f88wmk1pgu4s.dlg@nililand.de>
 <5B52FBC1.9080808@tex-tipografia.com>
Message-ID: <1af5ecfe-0a4f-ae16-57d9-37c9cb167b8f@xs4all.nl>

On 7/21/2018 11:24 AM, Javier Bezos wrote:
> Still struggling, after several months, with Arabic fonts :-(.
> This is the only thing I need to release a new babel with support
> for Arabic, but I'm stuck.
> 
> Hans:
> 
>  ??? > I'll send Ulrike something to test.

afaik arabic works ok in context (i'd have gotten complaints from users 
otherwise) so maybe you don't enable the right features

> Ulrike:
> 
>  ?? With the patched function (added to a fontloader from 2017-12-12)
>  ?? the output of both examples looks ok (that means that the paragraphs
>  ?? are identical, I have no idea if they are correct ;-))
> 
> 
> Please, could you post the fix here or send it to me?

Be aware that Ulrike takes recent version from the context distribution 
so it might not be a drop in for texlive.

> By the way, I've attempted to use the context loader with:
> 
> -------
> [run]
> fontloader = context;
> -------

with 'context' being ... actually the generic fontloader uses the fact 
that 'context' is undefined but i assume that it never was an issue in 
the wrapped code

> in luaotfload.conf and with the help pf fontloader-luaotfload,
> but it doesn't work, with the error:
> 
> -----
> luaotfload | db : Reload initiated (formats: otf,ttf,ttc); reason: "File 
> not found: lmroman10-regular.".(load luc: C:/Aplica
> ciones/TeXLive/texmf-var/luatex-cache/generic/fonts/otl/lmroman10-regular.luc) 
> 
> ! Font \TU/lmr/m/n/10=[lmroman10-regular]:+tlig; at 10pt not loadable: 
> metric d
> ata not found or bad.
> -----
> 
> A fix for this error would be also most welcome. The following
> loads the fonts, but Arabic is still buggy:
> 
> -------
> [run]
> fontloader? = fontloader-reference-2017-08-18.lua;
> -------
> 
> -- 
> Javier
> 
> 


-- 

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From listas at tex-tipografia.com  Sun Jul 22 09:39:06 2018
From: listas at tex-tipografia.com (Javier Bezos)
Date: Sun, 22 Jul 2018 09:39:06 +0200
Subject: [luatex] Misplaced letter
In-Reply-To: <1af5ecfe-0a4f-ae16-57d9-37c9cb167b8f@xs4all.nl>
References: <5A32C199.5050904@tex-tipografia.com>
 <7nsv8n7gr66h$.dlg@nililand.de> <5A33F82F.4050207@tex-tipografia.com>
 <5A3516A5.80507@tex-tipografia.com> <p7ayx76g9niu.dlg@nililand.de>
 <47385b68-7c00-9d26-9a05-cde2fcd5f300@wxs.nl> <f88wmk1pgu4s.dlg@nililand.de>
 <5B52FBC1.9080808@tex-tipografia.com>
 <1af5ecfe-0a4f-ae16-57d9-37c9cb167b8f@xs4all.nl>
Message-ID: <5B54349A.2020807@tex-tipografia.com>

 > afaik arabic works ok in context (i'd have gotten complaints from users
 > otherwise) so maybe you don't enable the right features

Now it works in context, indeed (and this is the very reason I tried
to use the "fontloader=context"), but several months ago didn't.
It seems luaoftload is unmaintained (15 forks on GitHub!) and the
fix for this issue hasn't reached it.

I only want to know where the problem was, just to see if I can
do anything to improve the situation (or at least, to document
what to do). and finish the basic support for lua+babel+Arabic.

I've found a workaround based on introducing some explicit dirs at
some places, but a better solution is clearly preferable. (I've even
considered forking luaoftload, but it's a daunting task, you know).

Javier

From luatex at nililand.de  Wed Jul 25 18:12:42 2018
From: luatex at nililand.de (Ulrike Fischer)
Date: Wed, 25 Jul 2018 18:12:42 +0200
Subject: [luatex] Misplaced letter
References: <5A32C199.5050904@tex-tipografia.com>
 <7nsv8n7gr66h$.dlg@nililand.de> <5A33F82F.4050207@tex-tipografia.com>
 <5A3516A5.80507@tex-tipografia.com> <p7ayx76g9niu.dlg@nililand.de>
 <47385b68-7c00-9d26-9a05-cde2fcd5f300@wxs.nl> <f88wmk1pgu4s.dlg@nililand.de>
 <5B52FBC1.9080808@tex-tipografia.com>
 <1af5ecfe-0a4f-ae16-57d9-37c9cb167b8f@xs4all.nl>
Message-ID: <1md0yv4yjx66l$.dlg@nililand.de>

Am Sat, 21 Jul 2018 22:13:01 +0200 schrieb Hans Hagen:


> afaik arabic works ok in context (i'd have gotten complaints from users 
> otherwise) so maybe you don't enable the right features

Javier posted an example at 

https://github.com/lualatex/luaotfload/issues/423

I posted there also the output I get with a current fontloader and
the patches we made to luaotfload. 

The spacing on the left of the left lines looks a bit wrong. And the
numbers should be perhaps read 1234. But I don't know enough about
arabic fonts to be able to setup a comparision with context and with
the luatex-plain code. And so I can't decide if the problem is with
luaotfload/the fontloader or some missing feature in the font
definition. Perhaps you could try too and show your output?

> Be aware that Ulrike takes recent version from the context distribution 
> so it might not be a drop in for texlive.

If Javier needs a newer fontloader we will have to push the patched
files and the newer fontloader to CTAN. luaotfload will break with
luatex 1.09 so at some time this will have to be done anyway. The
main point of my current tests is to be prepared for such a
situation ...

-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From listas at tex-tipografia.com  Wed Jul 25 19:14:38 2018
From: listas at tex-tipografia.com (Javier Bezos)
Date: Wed, 25 Jul 2018 19:14:38 +0200
Subject: [luatex] Misplaced letter
In-Reply-To: <1md0yv4yjx66l$.dlg@nililand.de>
References: <5A32C199.5050904@tex-tipografia.com>
 <7nsv8n7gr66h$.dlg@nililand.de> <5A33F82F.4050207@tex-tipografia.com>
 <5A3516A5.80507@tex-tipografia.com> <p7ayx76g9niu.dlg@nililand.de>
 <47385b68-7c00-9d26-9a05-cde2fcd5f300@wxs.nl> <f88wmk1pgu4s.dlg@nililand.de>
 <5B52FBC1.9080808@tex-tipografia.com>
 <1af5ecfe-0a4f-ae16-57d9-37c9cb167b8f@xs4all.nl>
 <1md0yv4yjx66l$.dlg@nililand.de>
Message-ID: <5B58AFFE.8050502@tex-tipografia.com>


> The spacing on the left of the left lines looks a bit wrong. And the
> numbers should be perhaps read 1234.

That's ok. The point is the relative placement of letters
inside the Arabic words. I'll test the new files, but the
image shows there are still some problems with \halign
(the last leftmost word).

> If Javier needs a newer fontloader we will have to push the patched
> files and the newer fontloader to CTAN. luaotfload will break with
> luatex 1.09

I'd say it is already broken :-).

Thanks

Javier

From j.hagen at xs4all.nl  Wed Jul 25 19:38:26 2018
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Wed, 25 Jul 2018 19:38:26 +0200
Subject: [luatex] Misplaced letter
In-Reply-To: <1md0yv4yjx66l$.dlg@nililand.de>
References: <5A32C199.5050904@tex-tipografia.com>
 <7nsv8n7gr66h$.dlg@nililand.de> <5A33F82F.4050207@tex-tipografia.com>
 <5A3516A5.80507@tex-tipografia.com> <p7ayx76g9niu.dlg@nililand.de>
 <47385b68-7c00-9d26-9a05-cde2fcd5f300@wxs.nl> <f88wmk1pgu4s.dlg@nililand.de>
 <5B52FBC1.9080808@tex-tipografia.com>
 <1af5ecfe-0a4f-ae16-57d9-37c9cb167b8f@xs4all.nl>
 <1md0yv4yjx66l$.dlg@nililand.de>
Message-ID: <802761a3-f753-996a-4b4e-144954ca489a@xs4all.nl>

On 7/25/2018 6:12 PM, Ulrike Fischer wrote:
> Am Sat, 21 Jul 2018 22:13:01 +0200 schrieb Hans Hagen:
> 
> 
>> afaik arabic works ok in context (i'd have gotten complaints from users
>> otherwise) so maybe you don't enable the right features
> 
> Javier posted an example at
> 
> https://github.com/lualatex/luaotfload/issues/423
> 
> I posted there also the output I get with a current fontloader and
> the patches we made to luaotfload.
> 
> The spacing on the left of the left lines looks a bit wrong. And the
> numbers should be perhaps read 1234. But I don't know enough about
> arabic fonts to be able to setup a comparision with context and with
> the luatex-plain code. And so I can't decide if the problem is with
> luaotfload/the fontloader or some missing feature in the font
> definition. Perhaps you could try too and show your output?

in such a low level halign the direction is not known so one should 
either add a \textdir TRT in the cell or you can try to add this to

nodes.simple_font-handler

         if not direction then
             direction = tex.get("textdir") -- experiment
         end

of whatever variant you use .. both work ok

how numbers should read is not up to the fontloader code

>> Be aware that Ulrike takes recent version from the context distribution
>> so it might not be a drop in for texlive.
> 
> If Javier needs a newer fontloader we will have to push the patched
> files and the newer fontloader to CTAN. luaotfload will break with
> luatex 1.09 so at some time this will have to be done anyway. The
> main point of my current tests is to be prepared for such a
> situation ...

Isn't it more the reverse? That a more recent fontloader expects 1.09+
(it also depends on what compatibility hacks you add)?

(Btw, there have not that many changed in the font code recently, only 
that generic lua font lookup stuff you wanted.)

(Also, @ version 1.10 luatex is more of less complete, apart from low 
level improvements nothing fundamental will change / be added.)

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From luatex at nililand.de  Wed Jul 25 20:29:54 2018
From: luatex at nililand.de (Ulrike Fischer)
Date: Wed, 25 Jul 2018 20:29:54 +0200
Subject: [luatex] Misplaced letter
References: <5A32C199.5050904@tex-tipografia.com>
 <7nsv8n7gr66h$.dlg@nililand.de> <5A33F82F.4050207@tex-tipografia.com>
 <5A3516A5.80507@tex-tipografia.com> <p7ayx76g9niu.dlg@nililand.de>
 <47385b68-7c00-9d26-9a05-cde2fcd5f300@wxs.nl> <f88wmk1pgu4s.dlg@nililand.de>
 <5B52FBC1.9080808@tex-tipografia.com>
 <1af5ecfe-0a4f-ae16-57d9-37c9cb167b8f@xs4all.nl>
 <1md0yv4yjx66l$.dlg@nililand.de>
 <802761a3-f753-996a-4b4e-144954ca489a@xs4all.nl>
Message-ID: <1hypoq7euavsv.dlg@nililand.de>

Am Wed, 25 Jul 2018 19:38:26 +0200 schrieb Hans Hagen:


>> The spacing on the left of the left lines looks a bit wrong. And the
>> numbers should be perhaps read 1234. But I don't know enough about
>> arabic fonts to be able to setup a comparision with context and with
>> the luatex-plain code. And so I can't decide if the problem is with
>> luaotfload/the fontloader or some missing feature in the font
>> definition. Perhaps you could try too and show your output?
> 
> in such a low level halign the direction is not known so one should 
> either add a \textdir TRT in the cell or you can try to add this to

When I added \textdir to the cell the content disappeared ;-).
(Perhaps it is outside the text margin or whatever). 
 
> nodes.simple_font-handler
> 
>          if not direction then
>              direction = tex.get("textdir") -- experiment
>          end
> 

This worked fine. 


>>> Be aware that Ulrike takes recent version from the context distribution
>>> so it might not be a drop in for texlive.
>> 
>> If Javier needs a newer fontloader we will have to push the patched
>> files and the newer fontloader to CTAN. luaotfload will break with
>> luatex 1.09 so at some time this will have to be done anyway. The
>> main point of my current tests is to be prepared for such a
>> situation ...
> 
> Isn't it more the reverse? That a more recent fontloader expects 1.09+
> (it also depends on what compatibility hacks you add)?

It seems still to work fine with luatex 1.07. 

I'm currently checking every few weeks if there is a new fontloader
and then use them to see if there are problems. If one breaks we can
take the last working version.  

But I need more testfiles ;-)
 

> (Btw, there have not that many changed in the font code recently, only 
> that generic lua font lookup stuff you wanted.)
> 
> (Also, @ version 1.10 luatex is more of less complete, apart from low 
> level improvements nothing fundamental will change / be added.)

does it still panic if two object are written? 
Did you find the source for Roberts problem with the "! error:
(vf): invalid DVI command"?

-- 
Ulrike Fischer 
https://www.troubleshooting-tex.de/


From j.hagen at xs4all.nl  Wed Jul 25 23:18:52 2018
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Wed, 25 Jul 2018 23:18:52 +0200
Subject: [luatex] Misplaced letter
In-Reply-To: <1hypoq7euavsv.dlg@nililand.de>
References: <5A32C199.5050904@tex-tipografia.com>
 <7nsv8n7gr66h$.dlg@nililand.de> <5A33F82F.4050207@tex-tipografia.com>
 <5A3516A5.80507@tex-tipografia.com> <p7ayx76g9niu.dlg@nililand.de>
 <47385b68-7c00-9d26-9a05-cde2fcd5f300@wxs.nl> <f88wmk1pgu4s.dlg@nililand.de>
 <5B52FBC1.9080808@tex-tipografia.com>
 <1af5ecfe-0a4f-ae16-57d9-37c9cb167b8f@xs4all.nl>
 <1md0yv4yjx66l$.dlg@nililand.de>
 <802761a3-f753-996a-4b4e-144954ca489a@xs4all.nl>
 <1hypoq7euavsv.dlg@nililand.de>
Message-ID: <c69a93c7-7a28-626f-466d-533e0621ddbb@xs4all.nl>

On 7/25/2018 8:29 PM, Ulrike Fischer wrote:
> Am Wed, 25 Jul 2018 19:38:26 +0200 schrieb Hans Hagen:
> 
> 
>>> The spacing on the left of the left lines looks a bit wrong. And the
>>> numbers should be perhaps read 1234. But I don't know enough about
>>> arabic fonts to be able to setup a comparision with context and with
>>> the luatex-plain code. And so I can't decide if the problem is with
>>> luaotfload/the fontloader or some missing feature in the font
>>> definition. Perhaps you could try too and show your output?
>>
>> in such a low level halign the direction is not known so one should
>> either add a \textdir TRT in the cell or you can try to add this to
> 
> When I added \textdir to the cell the content disappeared ;-).
> (Perhaps it is outside the text margin or whatever).

how about

{\textdir ... }
> does it still panic if two object are written?

i don't know .. i've never done that .. but i would not be surprised as 
one can mess up in many ways (and adding all kind of checks for what are 
programming errors at the lua end will not happen i.e. only trivial 
tests that don't hit performance) .. it's a side effect of opening up 
that one can introduce conflicts

> Did you find the source for Roberts problem with the "! error:
> (vf): invalid DVI command"?
i didn't look into something like that; is there a simple test i can do 
without installing a ton of code? btw, if it's a bad font then such a 
message sounds ok to me ... using for instance a non-pdf vf special in a 
virtual font is invalid in pdf output mode as is a vf pdf special in dvi 
mode

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From luatex at nililand.de  Wed Jul 25 23:53:35 2018
From: luatex at nililand.de (Ulrike Fischer)
Date: Wed, 25 Jul 2018 23:53:35 +0200
Subject: [luatex] Misplaced letter
References: <5A32C199.5050904@tex-tipografia.com>
 <7nsv8n7gr66h$.dlg@nililand.de> <5A33F82F.4050207@tex-tipografia.com>
 <5A3516A5.80507@tex-tipografia.com> <p7ayx76g9niu.dlg@nililand.de>
 <47385b68-7c00-9d26-9a05-cde2fcd5f300@wxs.nl> <f88wmk1pgu4s.dlg@nililand.de>
 <5B52FBC1.9080808@tex-tipografia.com>
 <1af5ecfe-0a4f-ae16-57d9-37c9cb167b8f@xs4all.nl>
 <1md0yv4yjx66l$.dlg@nililand.de>
 <802761a3-f753-996a-4b4e-144954ca489a@xs4all.nl>
 <1hypoq7euavsv.dlg@nililand.de>
 <c69a93c7-7a28-626f-466d-533e0621ddbb@xs4all.nl>
Message-ID: <1oinoc5so7cqp$.dlg@nililand.de>

Am Wed, 25 Jul 2018 23:18:52 +0200 schrieb Hans Hagen:

>> When I added \textdir to the cell the content disappeared ;-).
>> (Perhaps it is outside the text margin or whatever).
> 
> how about
> 
> {\textdir ... }

That works (with/without the patch to nodes.simple_font_handler).

>> does it still panic if two object are written?

> i don't know .. i've never done that .. but i would not be surprised as 
> one can mess up in many ways (and adding all kind of checks for what are 
> programming errors at the lua end 

Well I didn't do it by purpose and it wasn't at the lua end

See

https://tug.org/pipermail/luatex/2018-July/006841.html


> 
>> Did you find the source for Roberts problem with the "! error:
>> (vf): invalid DVI command"?
> i didn't look into something like that; is there a simple test i can do 
> without installing a ton of code? 

Robert's example was a simple plain tex example:

https://tug.org/pipermail/luatex/2018-May/006818.html

As far as I can see \letterspacefont doesn't like virtual fonts
anymore.

 

-- 
Ulrike Fischer 
https://www.troubleshooting-tex.de/


From j.hagen at xs4all.nl  Thu Jul 26 01:04:02 2018
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Thu, 26 Jul 2018 01:04:02 +0200
Subject: [luatex] Misplaced letter
In-Reply-To: <1oinoc5so7cqp$.dlg@nililand.de>
References: <5A32C199.5050904@tex-tipografia.com>
 <7nsv8n7gr66h$.dlg@nililand.de> <5A33F82F.4050207@tex-tipografia.com>
 <5A3516A5.80507@tex-tipografia.com> <p7ayx76g9niu.dlg@nililand.de>
 <47385b68-7c00-9d26-9a05-cde2fcd5f300@wxs.nl> <f88wmk1pgu4s.dlg@nililand.de>
 <5B52FBC1.9080808@tex-tipografia.com>
 <1af5ecfe-0a4f-ae16-57d9-37c9cb167b8f@xs4all.nl>
 <1md0yv4yjx66l$.dlg@nililand.de>
 <802761a3-f753-996a-4b4e-144954ca489a@xs4all.nl>
 <1hypoq7euavsv.dlg@nililand.de>
 <c69a93c7-7a28-626f-466d-533e0621ddbb@xs4all.nl>
 <1oinoc5so7cqp$.dlg@nililand.de>
Message-ID: <39feb2a6-3d1d-bd91-7a75-10683032240d@xs4all.nl>

On 7/25/2018 11:53 PM, Ulrike Fischer wrote:

> Robert's example was a simple plain tex example:
> 
> https://tug.org/pipermail/luatex/2018-May/006818.html
> 
> As far as I can see \letterspacefont doesn't like virtual fonts
> anymore.
i think i found the reason (wrong packet size), so i have no abort now 
(i have no clue if the result is ok because i only tested loading the 
tfm/vf pair)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From j.hagen at xs4all.nl  Thu Jul 26 01:13:23 2018
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Thu, 26 Jul 2018 01:13:23 +0200
Subject: [luatex] Misplaced letter
In-Reply-To: <1oinoc5so7cqp$.dlg@nililand.de>
References: <5A32C199.5050904@tex-tipografia.com>
 <7nsv8n7gr66h$.dlg@nililand.de> <5A33F82F.4050207@tex-tipografia.com>
 <5A3516A5.80507@tex-tipografia.com> <p7ayx76g9niu.dlg@nililand.de>
 <47385b68-7c00-9d26-9a05-cde2fcd5f300@wxs.nl> <f88wmk1pgu4s.dlg@nililand.de>
 <5B52FBC1.9080808@tex-tipografia.com>
 <1af5ecfe-0a4f-ae16-57d9-37c9cb167b8f@xs4all.nl>
 <1md0yv4yjx66l$.dlg@nililand.de>
 <802761a3-f753-996a-4b4e-144954ca489a@xs4all.nl>
 <1hypoq7euavsv.dlg@nililand.de>
 <c69a93c7-7a28-626f-466d-533e0621ddbb@xs4all.nl>
 <1oinoc5so7cqp$.dlg@nililand.de>
Message-ID: <c2bb2793-be38-004b-0e0b-2f60635c1b04@xs4all.nl>

On 7/25/2018 11:53 PM, Ulrike Fischer wrote:

>>> does it still panic if two object are written?
> 
>> i don't know .. i've never done that .. but i would not be surprised as
>> one can mess up in many ways (and adding all kind of checks for what are
>> programming errors at the lua end
> 
> Well I didn't do it by purpose and it wasn't at the lua end

i changed the error to:

! error:  (pdf backend): scheduled object is already used

so we still quit as we do with other errors, but with a less dramatic 
PANIC message.

(fwiw, we have lots of different warnings and errors than pdftex if only 
because the backend code evolves differently)

Hans
-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From luatex at nililand.de  Thu Jul 26 09:29:16 2018
From: luatex at nililand.de (Ulrike Fischer)
Date: Thu, 26 Jul 2018 09:29:16 +0200
Subject: [luatex] Misplaced letter
References: <5A32C199.5050904@tex-tipografia.com>
 <7nsv8n7gr66h$.dlg@nililand.de> <5A33F82F.4050207@tex-tipografia.com>
 <5A3516A5.80507@tex-tipografia.com> <p7ayx76g9niu.dlg@nililand.de>
 <47385b68-7c00-9d26-9a05-cde2fcd5f300@wxs.nl> <f88wmk1pgu4s.dlg@nililand.de>
 <5B52FBC1.9080808@tex-tipografia.com>
 <1af5ecfe-0a4f-ae16-57d9-37c9cb167b8f@xs4all.nl>
 <1md0yv4yjx66l$.dlg@nililand.de>
 <802761a3-f753-996a-4b4e-144954ca489a@xs4all.nl>
 <1hypoq7euavsv.dlg@nililand.de>
 <c69a93c7-7a28-626f-466d-533e0621ddbb@xs4all.nl>
 <1oinoc5so7cqp$.dlg@nililand.de>
 <39feb2a6-3d1d-bd91-7a75-10683032240d@xs4all.nl>
Message-ID: <z7gpj8l02i7k.dlg@nililand.de>

Am Thu, 26 Jul 2018 01:04:02 +0200 schrieb Hans Hagen:

>> Robert's example was a simple plain tex example:
>> 
>> https://tug.org/pipermail/luatex/2018-May/006818.html
>> 
>> As far as I can see \letterspacefont doesn't like virtual fonts
>> anymore.

> i think i found the reason (wrong packet size), so i have no abort now 
> (i have no clue if the result is ok because i only tested loading the 
> tfm/vf pair)

Looks ok to me. No error and the font is letterspaced. 


-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From luatex at nililand.de  Thu Jul 26 09:30:40 2018
From: luatex at nililand.de (Ulrike Fischer)
Date: Thu, 26 Jul 2018 09:30:40 +0200
Subject: [luatex] Misplaced letter
References: <5A32C199.5050904@tex-tipografia.com>
 <7nsv8n7gr66h$.dlg@nililand.de> <5A33F82F.4050207@tex-tipografia.com>
 <5A3516A5.80507@tex-tipografia.com> <p7ayx76g9niu.dlg@nililand.de>
 <47385b68-7c00-9d26-9a05-cde2fcd5f300@wxs.nl> <f88wmk1pgu4s.dlg@nililand.de>
 <5B52FBC1.9080808@tex-tipografia.com>
 <1af5ecfe-0a4f-ae16-57d9-37c9cb167b8f@xs4all.nl>
 <1md0yv4yjx66l$.dlg@nililand.de>
 <802761a3-f753-996a-4b4e-144954ca489a@xs4all.nl>
 <1hypoq7euavsv.dlg@nililand.de>
 <c69a93c7-7a28-626f-466d-533e0621ddbb@xs4all.nl>
 <1oinoc5so7cqp$.dlg@nililand.de>
 <c2bb2793-be38-004b-0e0b-2f60635c1b04@xs4all.nl>
Message-ID: <1ocidcl82stfj.dlg@nililand.de>

Am Thu, 26 Jul 2018 01:13:23 +0200 schrieb Hans Hagen:

> i changed the error to:
> 
> ! error:  (pdf backend): scheduled object is already used
> 
> so we still quit as we do with other errors, but with a less dramatic 
> PANIC message.

Much better ;-). Thanks.

-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From listas at tex-tipografia.com  Thu Jul 26 15:26:21 2018
From: listas at tex-tipografia.com (Javier Bezos)
Date: Thu, 26 Jul 2018 15:26:21 +0200
Subject: [luatex] Misplaced letter
In-Reply-To: <5B58AFFE.8050502@tex-tipografia.com>
References: <5A32C199.5050904@tex-tipografia.com>
 <7nsv8n7gr66h$.dlg@nililand.de> <5A33F82F.4050207@tex-tipografia.com>
 <5A3516A5.80507@tex-tipografia.com> <p7ayx76g9niu.dlg@nililand.de>
 <47385b68-7c00-9d26-9a05-cde2fcd5f300@wxs.nl> <f88wmk1pgu4s.dlg@nililand.de>
 <5B52FBC1.9080808@tex-tipografia.com>
 <1af5ecfe-0a4f-ae16-57d9-37c9cb167b8f@xs4all.nl>
 <1md0yv4yjx66l$.dlg@nililand.de> <5B58AFFE.8050502@tex-tipografia.com>
Message-ID: <5B59CBFD.4010806@tex-tipografia.com>


I'm glad to see luatofload will be, at last, updated
(thank you, Ulrike), but to be honest, I'm still worried
about how it will evolve in the future and whether new
features added by Hans in luatex-plain/context (eg, Indic
scripts) will find its way into luaotfload in a reasonable
time.

Of course, I'm willing to help and to prepare some test
files.

     *    *    *

Below is a minimal file in luatex (ie, plain) showing
the problem in luaotfload. It requires FreeSerif and Arabic
Typesetting, but the latter is not essential, because
FreeSerif already shows the problem. See the following
images:

http://texnia.com/archive/luatex-plain.png

http://texnia.com/archive/luaotfload.png

As you can see, with the code for luatex-plain everything
is fine.

-------------------------------

% Works with code for luatex-plain:
\input luatex-basics
\input luatex-fonts

% But with luaotfload some letters are misplaced:
% \input luaotfload.sty

\font\fs= FreeSerif:%
    mode=node;script=arab;+init;+medi;+fina;+rlig;

\font\at= [c:/Windows/Fonts/arabtype.ttf]:%
    mode=node;script=arab;+init;+medi;+fina;+rlig;

\textdir TRT \pardir TRT

\hsize 3cm

\fs % FreeSerif

???????? ????

\leavevmode\hbox{???????? ????}

\leavevmode\halign{#\cr ???????? ????\cr}

\at % Arabic Typesetting - wrong, too, but in different ways

???????? ????

\leavevmode\hbox{???????? ????}

\leavevmode\halign{#\cr ???????? ????\cr}

\bye
------------------------------------

Javier

From j.hagen at xs4all.nl  Thu Jul 26 15:51:14 2018
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Thu, 26 Jul 2018 15:51:14 +0200
Subject: [luatex] Misplaced letter
In-Reply-To: <5B59CBFD.4010806@tex-tipografia.com>
References: <5A32C199.5050904@tex-tipografia.com>
 <7nsv8n7gr66h$.dlg@nililand.de> <5A33F82F.4050207@tex-tipografia.com>
 <5A3516A5.80507@tex-tipografia.com> <p7ayx76g9niu.dlg@nililand.de>
 <47385b68-7c00-9d26-9a05-cde2fcd5f300@wxs.nl> <f88wmk1pgu4s.dlg@nililand.de>
 <5B52FBC1.9080808@tex-tipografia.com>
 <1af5ecfe-0a4f-ae16-57d9-37c9cb167b8f@xs4all.nl>
 <1md0yv4yjx66l$.dlg@nililand.de> <5B58AFFE.8050502@tex-tipografia.com>
 <5B59CBFD.4010806@tex-tipografia.com>
Message-ID: <18338d57-89e2-ca8f-487c-8f8497d8389e@xs4all.nl>

On 7/26/2018 3:26 PM, Javier Bezos wrote:

> \font\at= [c:/Windows/Fonts/arabtype.ttf]:%
>  ?? mode=node;script=arab;+init;+medi;+fina;+rlig;
how about also adding: 'kern' 'mark' 'mkmk' 'curs' as well as 'analyze' 
and maybe 'liga', 'calt', 'clig' and more

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

From listas at tex-tipografia.com  Thu Jul 26 16:49:05 2018
From: listas at tex-tipografia.com (Javier Bezos)
Date: Thu, 26 Jul 2018 16:49:05 +0200
Subject: [luatex] Misplaced letter
In-Reply-To: <18338d57-89e2-ca8f-487c-8f8497d8389e@xs4all.nl>
References: <5A32C199.5050904@tex-tipografia.com>
 <7nsv8n7gr66h$.dlg@nililand.de> <5A33F82F.4050207@tex-tipografia.com>
 <5A3516A5.80507@tex-tipografia.com> <p7ayx76g9niu.dlg@nililand.de>
 <47385b68-7c00-9d26-9a05-cde2fcd5f300@wxs.nl> <f88wmk1pgu4s.dlg@nililand.de>
 <5B52FBC1.9080808@tex-tipografia.com>
 <1af5ecfe-0a4f-ae16-57d9-37c9cb167b8f@xs4all.nl>
 <1md0yv4yjx66l$.dlg@nililand.de> <5B58AFFE.8050502@tex-tipografia.com>
 <5B59CBFD.4010806@tex-tipografia.com>
 <18338d57-89e2-ca8f-487c-8f8497d8389e@xs4all.nl>
Message-ID: <5B59DF61.1060402@tex-tipografia.com>

Hans,

>> \font\at= [c:/Windows/Fonts/arabtype.ttf]:%
>>     mode=node;script=arab;+init;+medi;+fina;+rlig;

> how about also adding: 'kern' 'mark' 'mkmk' 'curs' as well as 'analyze' and
> maybe 'liga', 'calt', 'clig' and more

The two words I selected should work with the minimal
set of features I set. And indeed, your code under
\tex\generic\context\luatex DOES work.

But luautfload has not been updated (and adding these
features changes nothing).

Javier

From luatex at nililand.de  Thu Jul 26 17:12:36 2018
From: luatex at nililand.de (Ulrike Fischer)
Date: Thu, 26 Jul 2018 17:12:36 +0200
Subject: [luatex] Misplaced letter
References: <5A32C199.5050904@tex-tipografia.com>
 <7nsv8n7gr66h$.dlg@nililand.de> <5A33F82F.4050207@tex-tipografia.com>
 <5A3516A5.80507@tex-tipografia.com> <p7ayx76g9niu.dlg@nililand.de>
 <47385b68-7c00-9d26-9a05-cde2fcd5f300@wxs.nl> <f88wmk1pgu4s.dlg@nililand.de>
 <5B52FBC1.9080808@tex-tipografia.com>
 <1af5ecfe-0a4f-ae16-57d9-37c9cb167b8f@xs4all.nl>
 <1md0yv4yjx66l$.dlg@nililand.de> <5B58AFFE.8050502@tex-tipografia.com>
 <5B59CBFD.4010806@tex-tipografia.com>
 <18338d57-89e2-ca8f-487c-8f8497d8389e@xs4all.nl>
 <5B59DF61.1060402@tex-tipografia.com>
Message-ID: <tc9owtjfy2jp$.dlg@nililand.de>

Am Thu, 26 Jul 2018 16:49:05 +0200 schrieb Javier Bezos:

>>> \font\at= [c:/Windows/Fonts/arabtype.ttf]:%
>>>     mode=node;script=arab;+init;+medi;+fina;+rlig;
> 
>> how about also adding: 'kern' 'mark' 'mkmk' 'curs' as well as 'analyze' and
>> maybe 'liga', 'calt', 'clig' and more
> 
> The two words I selected should work with the minimal
> set of features I set. And indeed, your code under
> \tex\generic\context\luatex DOES work.
> 
> But luautfload has not been updated (and adding these
> features changes nothing).


You need to use a newer fontloader.

Please try the experimental luaotfload:

Get the texmf-tree from here 

https://github.com/u-fischer/lua-font-pond

and save it somewhere on your computer (or clone the whole
repository)

Add the texmf to your system by issuing

   tlmgr conf auxtrees add path/to/the/texmf/root

It should then work out of the box. You should see messages like

!!!!! MK: Using CHANGED luaotfload-parsers.lua 2018-06-26 !!!!!
luaotfload | conf : Requested fontloader
"fontloader-reference-2018-07-20.lua" n
ot defined, use at your own risk.

in the log.

At the first run it will probably regenerate the font database. So
be patient. 


If you no longer want to use it, deactivate it with

   tlmgr conf auxtrees delete path/to/the/texmf/root



In the folder fontloader-luaotfload of this texmf is a
luaotfload.conf, there you can activate/deactivate fontloaders (by
removing the semicolon). 

The currently last (commented) entry 
;fontloader = fontloader-reference-2018-07-20-patched.lua
contains the direction patch suggested yesterday by Hans which also
corrects the \halign. 

-- 
Ulrike Fischer 
https://www.troubleshooting-tex.de/


From listas at tex-tipografia.com  Thu Jul 26 19:26:17 2018
From: listas at tex-tipografia.com (Javier Bezos)
Date: Thu, 26 Jul 2018 19:26:17 +0200
Subject: [luatex] Misplaced letter
In-Reply-To: <tc9owtjfy2jp$.dlg@nililand.de>
References: <5A32C199.5050904@tex-tipografia.com>
 <7nsv8n7gr66h$.dlg@nililand.de> <5A33F82F.4050207@tex-tipografia.com>
 <5A3516A5.80507@tex-tipografia.com> <p7ayx76g9niu.dlg@nililand.de>
 <47385b68-7c00-9d26-9a05-cde2fcd5f300@wxs.nl> <f88wmk1pgu4s.dlg@nililand.de>
 <5B52FBC1.9080808@tex-tipografia.com>
 <1af5ecfe-0a4f-ae16-57d9-37c9cb167b8f@xs4all.nl>
 <1md0yv4yjx66l$.dlg@nililand.de> <5B58AFFE.8050502@tex-tipografia.com>
 <5B59CBFD.4010806@tex-tipografia.com>
 <18338d57-89e2-ca8f-487c-8f8497d8389e@xs4all.nl>
 <5B59DF61.1060402@tex-tipografia.com> <tc9owtjfy2jp$.dlg@nililand.de>
Message-ID: <5B5A0439.9060108@tex-tipografia.com>


> You need to use a newer fontloader.
>
> Please try the experimental luaotfload:

With it (the patched one) everything seems fine, and
the babel samples in GitHub are rendered as expected
( https://github.com/latex3/latex2e/tree/master/required/babel/samples )
with Amiri, FreeSerif, and Arabic Typesetting, but
I'm still doing some tests (well, Amiri has some
problems, but they are unrelated - the point is the
letters aren't misplaced).

Javier



From liebrecht at grossmann-venter.com  Sun Jul 29 16:31:25 2018
From: liebrecht at grossmann-venter.com (liebrecht at grossmann-venter.com)
Date: Sun, 29 Jul 2018 10:31:25 -0400
Subject: [luatex] lyluatex compile problems
Message-ID: <6315e328fcd64ecc7cf13804cc047589@grossmann-venter.com>

I installed lyluatex by means of texlive-luatex.

I then tried to compile the manual (lyluatex.tex) in the luatex download 
zip archive as a test.

$] latex lyluatex.tex

It exits with errors.

Obviously then the compiler is not LaTeX.

The manual is thorough but I cannot find a single instance of how to 
compile a lyluatex file.
I must have overlooked it but just cannot find it.

So what is the mysterious compile command ?

thanks

From lists at openlilylib.org  Sun Jul 29 17:22:31 2018
From: lists at openlilylib.org (Urs Liska)
Date: Sun, 29 Jul 2018 17:22:31 +0200
Subject: [luatex] lyluatex compile problems
In-Reply-To: <6315e328fcd64ecc7cf13804cc047589@grossmann-venter.com>
References: <6315e328fcd64ecc7cf13804cc047589@grossmann-venter.com>
Message-ID: <fdbc0e88-c4b3-243a-9036-58bad7d6098b@openlilylib.org>



Am 29.07.2018 um 16:31 schrieb liebrecht at grossmann-venter.com:
> I installed lyluatex by means of texlive-luatex.
>
> I then tried to compile the manual (lyluatex.tex) in the luatex 
> download zip archive as a test.
>
> $] latex lyluatex.tex
>
> It exits with errors.
>
> Obviously then the compiler is not LaTeX.

There are several issues here:

a)
The manual is not written in a lyluatex.tex file but in lyluatex.md, 
which has to be processed with Pandoc. Also the Zip download from Github 
doesn't contain such a file, so I don't know what you actually tried to 
compile.

>
> The manual is thorough but I cannot find a single instance of how to 
> compile a lyluatex file.
> I must have overlooked it but just cannot find it.

b)
lyluatex relies (as the name suggests) on LuaLaTeX, so the basic command 
has to be lualatex, not latex.

This is stated in the first "Note:" section of the "Usage" section. In a 
slightly more informal way it is also stated in the first paragraph of 
the introduction.

c)
As lyluatex invokes LilyPond it needs the privilege to do so. This is 
done by the command line option --shell-escape.
This is described in some detail in the third "NOTE:" section of said 
"Usage" section

>
> So what is the mysterious compile command ?

lualatex --shell-escape somefile.tex

>
> thanks


From luatex at nililand.de  Sun Jul 29 17:48:00 2018
From: luatex at nililand.de (Ulrike Fischer)
Date: Sun, 29 Jul 2018 17:48:00 +0200
Subject: [luatex] lyluatex compile problems
References: <6315e328fcd64ecc7cf13804cc047589@grossmann-venter.com>
Message-ID: <o1dxaoqx8bfw.dlg@nililand.de>

Am Sun, 29 Jul 2018 10:31:25 -0400 schrieb
liebrecht at grossmann-venter.com:

> I installed lyluatex by means of texlive-luatex.
> 
> I then tried to compile the manual (lyluatex.tex) in the luatex download 
> zip archive as a test.
> 
> $] latex lyluatex.tex
> 
> It exits with errors.
> 
> Obviously then the compiler is not LaTeX.
> 
> The manual is thorough but I cannot find a single instance of how to 
> compile a lyluatex file.
> I must have overlooked it but just cannot find it.
> 
> So what is the mysterious compile command ?

lualatex see also the readme:

http://mirrors.ctan.org/support/lyluatex/README.md

-- 
Ulrike Fischer 
https://www.troubleshooting-tex.de/


From liebrecht at grossmann-venter.com  Sun Jul 29 17:59:49 2018
From: liebrecht at grossmann-venter.com (liebrecht at grossmann-venter.com)
Date: Sun, 29 Jul 2018 11:59:49 -0400
Subject: [luatex] lyluatex compile problems
In-Reply-To: <fdbc0e88-c4b3-243a-9036-58bad7d6098b@openlilylib.org>
References: <6315e328fcd64ecc7cf13804cc047589@grossmann-venter.com>
 <fdbc0e88-c4b3-243a-9036-58bad7d6098b@openlilylib.org>
Message-ID: <d35ca710a90e94178cc138119f9f36cd@grossmann-venter.com>

a)  Ok good to know that explains the compiling problems fundamentally.
If the manual were a lyluatex file it would have been one of the 
greatest tutorials right there.
What I tried to compile is the manual in the zip download here
"https://ctan.org/pkg/lyluatex?lang=en"
Which seemed to be the  lyluatex code, but I am seemingly mistaken.

b) Ok

c) Ok I saw that, but where that was mentioned there was no direct 
compile instruction. The option --shell-escape was mentioned in the body 
text and there was no direct compile command.
If
"lualatex --shell-escape somefile.tex"
were in the instructions I did not have to ask this question, but it is 
absent.
Would be a good idea to add that.


Question:
1) Since I cannot compile the manual and use that to learn lyluatex, (my 
preferred latex way to learn is just to work through the code compiling 
the manual. (Last 20+ more years taught me that is by far the best way.)
Is there an indepth lyluatex manual that is compilable with luatex ?
2) Is there an archive with lots of lyluatex document examples combining 
both text and musical notaion in the document ?

Thanks



On 2018-07-29 11:22, Urs Liska wrote:
> Am 29.07.2018 um 16:31 schrieb liebrecht at grossmann-venter.com:
>> I installed lyluatex by means of texlive-luatex.
>> 
>> I then tried to compile the manual (lyluatex.tex) in the luatex 
>> download zip archive as a test.
>> 
>> $] latex lyluatex.tex
>> 
>> It exits with errors.
>> 
>> Obviously then the compiler is not LaTeX.
> 
> There are several issues here:
> 
> a)
> The manual is not written in a lyluatex.tex file but in lyluatex.md,
> which has to be processed with Pandoc. Also the Zip download from
> Github doesn't contain such a file, so I don't know what you actually
> tried to compile.
> 
>> 
>> The manual is thorough but I cannot find a single instance of how to 
>> compile a lyluatex file.
>> I must have overlooked it but just cannot find it.
> 
> b)
> lyluatex relies (as the name suggests) on LuaLaTeX, so the basic
> command has to be lualatex, not latex.
> 
> This is stated in the first "Note:" section of the "Usage" section. In
> a slightly more informal way it is also stated in the first paragraph
> of the introduction.
> 
> c)
> As lyluatex invokes LilyPond it needs the privilege to do so. This is
> done by the command line option --shell-escape.
> This is described in some detail in the third "NOTE:" section of said
> "Usage" section
> 
>> 
>> So what is the mysterious compile command ?
> 
> lualatex --shell-escape somefile.tex
> 
>> 
>> thanks

From liebrecht at grossmann-venter.com  Sun Jul 29 18:07:09 2018
From: liebrecht at grossmann-venter.com (liebrecht at grossmann-venter.com)
Date: Sun, 29 Jul 2018 12:07:09 -0400
Subject: [luatex] lyluatex compile problems
In-Reply-To: <o1dxaoqx8bfw.dlg@nililand.de>
References: <6315e328fcd64ecc7cf13804cc047589@grossmann-venter.com>
 <o1dxaoqx8bfw.dlg@nililand.de>
Message-ID: <f0b6dd8bb4229ac5d3e56065ce45561f@grossmann-venter.com>

Thanks.
You are right, in the Lyluatex zip archive there was indeed a markdown  
README.md if I used my terminal.
But, it did not show up in my filemanager. The markdown md extension 
seemingly made the file manager ignore the file.
It would be nice to just stick to a plain old Unix text README



On 2018-07-29 11:48, Ulrike Fischer wrote:
> Am Sun, 29 Jul 2018 10:31:25 -0400 schrieb
> liebrecht at grossmann-venter.com:
> 
>> I installed lyluatex by means of texlive-luatex.
>> 
>> I then tried to compile the manual (lyluatex.tex) in the luatex 
>> download
>> zip archive as a test.
>> 
>> $] latex lyluatex.tex
>> 
>> It exits with errors.
>> 
>> Obviously then the compiler is not LaTeX.
>> 
>> The manual is thorough but I cannot find a single instance of how to
>> compile a lyluatex file.
>> I must have overlooked it but just cannot find it.
>> 
>> So what is the mysterious compile command ?
> 
> lualatex see also the readme:
> 
> http://mirrors.ctan.org/support/lyluatex/README.md

From lists at openlilylib.org  Sun Jul 29 18:28:38 2018
From: lists at openlilylib.org (Urs Liska)
Date: Sun, 29 Jul 2018 18:28:38 +0200
Subject: [luatex] lyluatex compile problems
In-Reply-To: <d35ca710a90e94178cc138119f9f36cd@grossmann-venter.com>
References: <6315e328fcd64ecc7cf13804cc047589@grossmann-venter.com>
 <fdbc0e88-c4b3-243a-9036-58bad7d6098b@openlilylib.org>
 <d35ca710a90e94178cc138119f9f36cd@grossmann-venter.com>
Message-ID: <87120c15-dce2-ffe6-3edf-a0dc4445f373@openlilylib.org>



Am 29.07.2018 um 17:59 schrieb liebrecht at grossmann-venter.com:
> a) Ok good to know that explains the compiling problems fundamentally.
> If the manual were a lyluatex file it would have been one of the 
> greatest tutorials right there.
> What I tried to compile is the manual in the zip download here
> "https://ctan.org/pkg/lyluatex?lang=en"
> Which seemed to be the? lyluatex code, but I am seemingly mistaken.

No, you're not mistaken. I wasn't aware of the fact that the script 
preparing the CTAN upload actually produced that lyluatex.tex file.

>
> b) Ok
>
> c) Ok I saw that, but where that was mentioned there was no direct 
> compile instruction. The option --shell-escape was mentioned in the 
> body text and there was no direct compile command.
> If
> "lualatex --shell-escape somefile.tex"
> were in the instructions I did not have to ask this question, but it 
> is absent.
> Would be a good idea to add that.

I'll try to keep that in mind. It would be great if you could open an 
issue on the Github issue tracker at 
https://github.com/jperon/lyluatex/issues about it.

>
>
> Question:
> 1) Since I cannot compile the manual and use that to learn lyluatex, 
> (my preferred latex way to learn is just to work through the code 
> compiling the manual. (Last 20+ more years taught me that is by far 
> the best way.)
> Is there an indepth lyluatex manual that is compilable with luatex ?

This .tex file *is* compilable with lualatex (not luatex!).
Please first try the other things I told you about, and if that doesn't 
work please post more details about the errors. But this is not a luatex 
issue, so this list may not be right place to discuss. Please either 
subscribe to the lilypond-user mailing list or open an issue on the 
issue tracker.

> 2) Is there an archive with lots of lyluatex document examples 
> combining both text and musical notaion in the document ?

lyluatex is actually brand new, so there is no such archive (yet).

HTH
Urs

>
> Thanks
>
>
>
> On 2018-07-29 11:22, Urs Liska wrote:
>> Am 29.07.2018 um 16:31 schrieb liebrecht at grossmann-venter.com:
>>> I installed lyluatex by means of texlive-luatex.
>>>
>>> I then tried to compile the manual (lyluatex.tex) in the luatex 
>>> download zip archive as a test.
>>>
>>> $] latex lyluatex.tex
>>>
>>> It exits with errors.
>>>
>>> Obviously then the compiler is not LaTeX.
>>
>> There are several issues here:
>>
>> a)
>> The manual is not written in a lyluatex.tex file but in lyluatex.md,
>> which has to be processed with Pandoc. Also the Zip download from
>> Github doesn't contain such a file, so I don't know what you actually
>> tried to compile.
>>
>>>
>>> The manual is thorough but I cannot find a single instance of how to 
>>> compile a lyluatex file.
>>> I must have overlooked it but just cannot find it.
>>
>> b)
>> lyluatex relies (as the name suggests) on LuaLaTeX, so the basic
>> command has to be lualatex, not latex.
>>
>> This is stated in the first "Note:" section of the "Usage" section. In
>> a slightly more informal way it is also stated in the first paragraph
>> of the introduction.
>>
>> c)
>> As lyluatex invokes LilyPond it needs the privilege to do so. This is
>> done by the command line option --shell-escape.
>> This is described in some detail in the third "NOTE:" section of said
>> "Usage" section
>>
>>>
>>> So what is the mysterious compile command ?
>>
>> lualatex --shell-escape somefile.tex
>>
>>>
>>> thanks


From luatex at nililand.de  Sun Jul 29 18:32:29 2018
From: luatex at nililand.de (Ulrike Fischer)
Date: Sun, 29 Jul 2018 18:32:29 +0200
Subject: [luatex] lyluatex compile problems
References: <6315e328fcd64ecc7cf13804cc047589@grossmann-venter.com>
 <fdbc0e88-c4b3-243a-9036-58bad7d6098b@openlilylib.org>
 <d35ca710a90e94178cc138119f9f36cd@grossmann-venter.com>
 <87120c15-dce2-ffe6-3edf-a0dc4445f373@openlilylib.org>
Message-ID: <1ddj6mkha5nxy$.dlg@nililand.de>

Am Sun, 29 Jul 2018 18:28:38 +0200 schrieb Urs Liska:

>> 2) Is there an archive with lots of lyluatex document examples 
>> combining both text and musical notaion in the document ?
> 
> lyluatex is actually brand new, so there is no such archive (yet).

There seem to be some examples in the github repository. 

https://github.com/jperon/lyluatex


-- 
Ulrike Fischer 
https://www.troubleshooting-tex.de/


From liebrecht at grossmann-venter.com  Sun Jul 29 18:50:15 2018
From: liebrecht at grossmann-venter.com (liebrecht at grossmann-venter.com)
Date: Sun, 29 Jul 2018 12:50:15 -0400
Subject: [luatex] lyluatex compile problems
In-Reply-To: <87120c15-dce2-ffe6-3edf-a0dc4445f373@openlilylib.org>
References: <6315e328fcd64ecc7cf13804cc047589@grossmann-venter.com>
 <fdbc0e88-c4b3-243a-9036-58bad7d6098b@openlilylib.org>
 <d35ca710a90e94178cc138119f9f36cd@grossmann-venter.com>
 <87120c15-dce2-ffe6-3edf-a0dc4445f373@openlilylib.org>
Message-ID: <e13e914c7d5818b20c0c097b9c423a7c@grossmann-venter.com>

Urs,

Thanks for thy kind and detailed answer.
There is currently NO commercial software I could find that can 
intermingle TeX and Musical Nortation.
I am really thankful that you guys did this.
Now if only you have a midi interface that could play the Notation in 
the document by means of player buttons, but I understand that doesnt 
exist yet.
Frescobaldi does that, but unfortunately cannot add text inline to 
scores creating a document.

I might want to create such a frontend for lyluatex.

I will take your concerns noted below seriously.
It is just difficult to figure out the differences between
luatex, lyluatex, lualatex and which interfaces with lillypond for 
someone new to luatex (I am an old-time LaTeX/TeX user though )
So I will step on your toes for a while unintentionally.


Are you going to remove lyluatex.tex file in future ?
The reason I ask is that I want to learn lyluatex by studying the code 
creating the manual, so I will have to add all the other packages in the 
headers of the TeX file.
If I am not supposed to have it let me know, but the manual does EXACTLY 
what I want so it THE example file for me. It has everything by design.

If I am allowed to use it and you have the time and patience...
1) Are only the packages listed n the header needed to compile the 
manual ?
2) Are there any other unforseen issues compiling it you know of that 
could save me time before I delve into it myself ?

This is possibly the best music typeset software that I have seen in my 
life.
I cannot think of anything that can beat it.
Enormous !!!
Hope the Universities at least will use it and stop teaching people to 
be Joe-mousepusher.


Thanks

On 2018-07-29 12:28, Urs Liska wrote:
> Am 29.07.2018 um 17:59 schrieb liebrecht at grossmann-venter.com:
>> a) Ok good to know that explains the compiling problems fundamentally.
>> If the manual were a lyluatex file it would have been one of the 
>> greatest tutorials right there.
>> What I tried to compile is the manual in the zip download here
>> "https://ctan.org/pkg/lyluatex?lang=en"
>> Which seemed to be the? lyluatex code, but I am seemingly mistaken.
> 
> No, you're not mistaken. I wasn't aware of the fact that the script
> preparing the CTAN upload actually produced that lyluatex.tex file.
> 
>> 
>> b) Ok
>> 
>> c) Ok I saw that, but where that was mentioned there was no direct 
>> compile instruction. The option --shell-escape was mentioned in the 
>> body text and there was no direct compile command.
>> If
>> "lualatex --shell-escape somefile.tex"
>> were in the instructions I did not have to ask this question, but it 
>> is absent.
>> Would be a good idea to add that.
> 
> I'll try to keep that in mind. It would be great if you could open an
> issue on the Github issue tracker at
> https://github.com/jperon/lyluatex/issues about it.
> 
>> 
>> 
>> Question:
>> 1) Since I cannot compile the manual and use that to learn lyluatex, 
>> (my preferred latex way to learn is just to work through the code 
>> compiling the manual. (Last 20+ more years taught me that is by far 
>> the best way.)
>> Is there an indepth lyluatex manual that is compilable with luatex ?
> 
> This .tex file *is* compilable with lualatex (not luatex!).
> Please first try the other things I told you about, and if that
> doesn't work please post more details about the errors. But this is
> not a luatex issue, so this list may not be right place to discuss.
> Please either subscribe to the lilypond-user mailing list or open an
> issue on the issue tracker.
> 
>> 2) Is there an archive with lots of lyluatex document examples 
>> combining both text and musical notaion in the document ?
> 
> lyluatex is actually brand new, so there is no such archive (yet).
> 
> HTH
> Urs

From liebrecht at grossmann-venter.com  Sun Jul 29 18:51:19 2018
From: liebrecht at grossmann-venter.com (liebrecht at grossmann-venter.com)
Date: Sun, 29 Jul 2018 12:51:19 -0400
Subject: [luatex] lyluatex compile problems
In-Reply-To: <1ddj6mkha5nxy$.dlg@nililand.de>
References: <6315e328fcd64ecc7cf13804cc047589@grossmann-venter.com>
 <fdbc0e88-c4b3-243a-9036-58bad7d6098b@openlilylib.org>
 <d35ca710a90e94178cc138119f9f36cd@grossmann-venter.com>
 <87120c15-dce2-ffe6-3edf-a0dc4445f373@openlilylib.org>
 <1ddj6mkha5nxy$.dlg@nililand.de>
Message-ID: <69236c55a4bc0636db5d8f8f3ddec002@grossmann-venter.com>

Ulrike,
Thanks a lot I will get on to it .



On 2018-07-29 12:32, Ulrike Fischer wrote:
> Am Sun, 29 Jul 2018 18:28:38 +0200 schrieb Urs Liska:
> 
>>> 2) Is there an archive with lots of lyluatex document examples
>>> combining both text and musical notaion in the document ?
>> 
>> lyluatex is actually brand new, so there is no such archive (yet).
> 
> There seem to be some examples in the github repository.
> 
> https://github.com/jperon/lyluatex

From liebrecht at grossmann-venter.com  Mon Jul 30 03:32:04 2018
From: liebrecht at grossmann-venter.com (liebrecht at grossmann-venter.com)
Date: Sun, 29 Jul 2018 21:32:04 -0400
Subject: [luatex] inconsolata package
Message-ID: <d8ed847e0370d10dbccc47ec37b6b4df@grossmann-venter.com>

I see the manual uses inconsolata package.
After I installed inconsolate the usual way in the texlive directory as 
the readme says, compiling the manual still gives me inconsolata errors. 
inconsolata is a bit of a beast to get working for no apparent reason.

What did you use inconsolata font for. Are there fonts used that do not 
have equivalents in other font systems ?
What I mean, is it crucial fonts that will break the purpose of the 
document or is it just a matter of taste for the typesetting ?

Thanks

From lists at openlilylib.org  Mon Jul 30 09:41:42 2018
From: lists at openlilylib.org (Urs Liska)
Date: Mon, 30 Jul 2018 09:41:42 +0200
Subject: [luatex] lyluatex compile problems
In-Reply-To: <1ddj6mkha5nxy$.dlg@nililand.de>
References: <6315e328fcd64ecc7cf13804cc047589@grossmann-venter.com>
 <fdbc0e88-c4b3-243a-9036-58bad7d6098b@openlilylib.org>
 <d35ca710a90e94178cc138119f9f36cd@grossmann-venter.com>
 <87120c15-dce2-ffe6-3edf-a0dc4445f373@openlilylib.org>
 <1ddj6mkha5nxy$.dlg@nililand.de>
Message-ID: <d1c8bc5d-6435-63fe-c608-7b50185f98ef@openlilylib.org>



Am 29.07.2018 um 18:32 schrieb Ulrike Fischer:
> Am Sun, 29 Jul 2018 18:28:38 +0200 schrieb Urs Liska:
>
>>> 2) Is there an archive with lots of lyluatex document examples
>>> combining both text and musical notaion in the document ?
>> lyluatex is actually brand new, so there is no such archive (yet).
> There seem to be some examples in the github repository.
>
> https://github.com/jperon/lyluatex

Yes, but these are programmatically merged into the manual, so while 
useful examplese they don't provide additional code over what the manual 
already does.

Urs

From luatex at nililand.de  Mon Jul 30 10:38:20 2018
From: luatex at nililand.de (Ulrike Fischer)
Date: Mon, 30 Jul 2018 10:38:20 +0200
Subject: [luatex] inconsolata package
References: <d8ed847e0370d10dbccc47ec37b6b4df@grossmann-venter.com>
Message-ID: <8u6prdupmaiq$.dlg@nililand.de>

Am Sun, 29 Jul 2018 21:32:04 -0400 schrieb
liebrecht at grossmann-venter.com:

> I see the manual uses inconsolata package.

This here is not the lyluatex list, but the luatex list. You
shouldn't assume that everyone knows what you mean by "the manual".
And if you have specific lyluatex question you should better use the
places Urs suggested to you in his answer.

> After I installed inconsolate the usual way in the texlive
> directory as the readme says, compiling the manual still gives me
> inconsolata errors. inconsolata is a bit of a beast to get
> working for no apparent reason.

I didn't have to install anything. inconsolata is part of texlive
2018 and worked out-of-the box. 

Beside this you should better use tlmgr to install packages in your
texlive system. 


-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From lists at openlilylib.org  Mon Jul 30 11:03:11 2018
From: lists at openlilylib.org (Urs Liska)
Date: Mon, 30 Jul 2018 11:03:11 +0200
Subject: [luatex] lyluatex compile problems
In-Reply-To: <e13e914c7d5818b20c0c097b9c423a7c@grossmann-venter.com>
References: <6315e328fcd64ecc7cf13804cc047589@grossmann-venter.com>
 <fdbc0e88-c4b3-243a-9036-58bad7d6098b@openlilylib.org>
 <d35ca710a90e94178cc138119f9f36cd@grossmann-venter.com>
 <87120c15-dce2-ffe6-3edf-a0dc4445f373@openlilylib.org>
 <e13e914c7d5818b20c0c097b9c423a7c@grossmann-venter.com>
Message-ID: <bcee0631-1c3e-adb7-67c9-512698c926a2@openlilylib.org>



Am 29.07.2018 um 18:50 schrieb liebrecht at grossmann-venter.com:
> Urs,
>
> Thanks for thy kind and detailed answer.
> There is currently NO commercial software I could find that can 
> intermingle TeX and Musical Nortation.

Ah, now I get the connection to your other posts on the Frescobaldi list ;-)

> I am really thankful that you guys did this.
> Now if only you have a midi interface that could play the Notation in 
> the document by means of player buttons, but I understand that doesnt 
> exist yet.
> Frescobaldi does that, but unfortunately cannot add text inline to 
> scores creating a document.
>
> I might want to create such a frontend for lyluatex.

A solution to this is probably not that far-fetched, but in order to get 
there you have to either get to a clear understanding of what you want 
to achieve or - if you actually have that - communicate it clearly so we 
all know where we want to get. I think you have a very valid use case 
here that would be good to support.

I *think* what you will want is to have the score examples accompanied 
by *links* (in whatever graphical form, as plain text links or as fancy 
graphic buttons). These links should point to either the MIDI files 
created by LilyPond, *or* to audio files that have been generated from 
these MIDI files in advance. I can think of no other suitable concept of 
having a "document" play back the score examples. If I'm missing 
anything please correct me.

Here's what has to be done to achieve that goal. Please create an issue 
at https://github.com/jperon/lyluatex/issues and copy as much 
information as possible/useful from this thread. I would not want to 
continue discussion here because it really isn't a "luatex" issue but 
relates to lyluatex and LilyPond directly:

  * lyluatex has to make LilyPond also produce the MIDI files beside the
    scores.
    This has not been implemented yet, but should be a minor thing to do
    (and as said, I find this a valuable use case)
  * lyluatex will then (automatically) produce poth a
    <unique-hash-name>.pdf and a <same-unique-hash-name>.midi file in
    the cache directory
  * With the 'raw-pdf' option lyluatex will return that calculated base
    name instead of directly including the score as an image.
  *  From there you can create a macro that will include the image and
    create a link to the midi file.
    This can be done with standard LaTeX means
  * Or you can add a hook in between to call another external program to
    generate the corresponding audio file and link to that.
    This would probably be (much) easier to program in Lua, since Lua is
    present anyway.


>
> I will take your concerns noted below seriously.
> It is just difficult to figure out the differences between
> luatex, lyluatex, lualatex and which interfaces with lillypond for 
> someone new to luatex (I am an old-time LaTeX/TeX user though )
> So I will step on your toes for a while unintentionally.
>
>
> Are you going to remove lyluatex.tex file in future ?
> The reason I ask is that I want to learn lyluatex by studying the code 
> creating the manual, so I will have to add all the other packages in 
> the headers of the TeX file.
> If I am not supposed to have it let me know, but the manual does 
> EXACTLY what I want so it THE example file for me. It has everything 
> by design.
This last assumption is on spot.
And no, we're not going to remove that file.

In the development repository we author the manual in a Markdown file, 
and it is compiled through Pandoc. But the make rule for producing the 
CTAN upload the Markdown file is compiled to the corresponding .tex 
file. So that lyluatex.tex file is an official part of the CTAN package 
(and I would assume that it is also copied *somewhere* into your texlive 
installation).


>
> If I am allowed to use it and you have the time and patience...
> 1) Are only the packages listed n the header needed to compile the 
> manual ?

You should also look into the the lyluatex.sty file since that also 
loads a number of packages. But AFAIK there are no *special* packages 
needed that aren't available in regular TeX Live (I just don't know what 
happens if you haven't installed texlive-full).

> 2) Are there any other unforseen issues compiling it you know of that 
> could save me time before I delve into it myself ?

 From what I can see in your communications I'm not 100% confident you 
have set up LilyPond properly already.
lyluatex does its work by calling LilyPond as an external command, so 
that has to be a) installed and b) found by lyluatex.
If you don't have a working environment I suggest downloading the 
current development version from http://lilypond.org/development.html 
(they are not at all "unstable" in the case of LilyPond) and installing 
it (I don't know what OS you are having).

If you are on a UNIX OS and can run "lilypond --version" after the 
installation everything should be fine, but if you have to specify any 
other command line you have to provide this to lyluatex through the 
[program={path/to/lilypond/executable}] option.

If you still have errors after that please report with more details - we 
have tried to make the error handling as informative as possible - but 
do so on the lyluatex issue tracker, not here.

>
> This is possibly the best music typeset software that I have seen in 
> my life.
> I cannot think of anything that can beat it.
> Enormous !!!
> Hope the Universities at least will use it and stop teaching people to 
> be Joe-mousepusher.

Having literally spent years with this topic I can't give you too much 
hope about this :-(

Best
Urs

>
>
> Thanks
>
> On 2018-07-29 12:28, Urs Liska wrote:
>> Am 29.07.2018 um 17:59 schrieb liebrecht at grossmann-venter.com:
>>> a) Ok good to know that explains the compiling problems fundamentally.
>>> If the manual were a lyluatex file it would have been one of the 
>>> greatest tutorials right there.
>>> What I tried to compile is the manual in the zip download here
>>> "https://ctan.org/pkg/lyluatex?lang=en"
>>> Which seemed to be the? lyluatex code, but I am seemingly mistaken.
>>
>> No, you're not mistaken. I wasn't aware of the fact that the script
>> preparing the CTAN upload actually produced that lyluatex.tex file.
>>
>>>
>>> b) Ok
>>>
>>> c) Ok I saw that, but where that was mentioned there was no direct 
>>> compile instruction. The option --shell-escape was mentioned in the 
>>> body text and there was no direct compile command.
>>> If
>>> "lualatex --shell-escape somefile.tex"
>>> were in the instructions I did not have to ask this question, but it 
>>> is absent.
>>> Would be a good idea to add that.
>>
>> I'll try to keep that in mind. It would be great if you could open an
>> issue on the Github issue tracker at
>> https://github.com/jperon/lyluatex/issues about it.
>>
>>>
>>>
>>> Question:
>>> 1) Since I cannot compile the manual and use that to learn lyluatex, 
>>> (my preferred latex way to learn is just to work through the code 
>>> compiling the manual. (Last 20+ more years taught me that is by far 
>>> the best way.)
>>> Is there an indepth lyluatex manual that is compilable with luatex ?
>>
>> This .tex file *is* compilable with lualatex (not luatex!).
>> Please first try the other things I told you about, and if that
>> doesn't work please post more details about the errors. But this is
>> not a luatex issue, so this list may not be right place to discuss.
>> Please either subscribe to the lilypond-user mailing list or open an
>> issue on the issue tracker.
>>
>>> 2) Is there an archive with lots of lyluatex document examples 
>>> combining both text and musical notaion in the document ?
>>
>> lyluatex is actually brand new, so there is no such archive (yet).
>>
>> HTH
>> Urs

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/luatex/attachments/20180730/c5f005be/attachment.html>

From liebrecht at grossmann-venter.com  Mon Jul 30 19:20:34 2018
From: liebrecht at grossmann-venter.com (liebrecht at grossmann-venter.com)
Date: Mon, 30 Jul 2018 13:20:34 -0400
Subject: [luatex] lyluatex compile problems
In-Reply-To: <bcee0631-1c3e-adb7-67c9-512698c926a2@openlilylib.org>
References: <6315e328fcd64ecc7cf13804cc047589@grossmann-venter.com>
 <fdbc0e88-c4b3-243a-9036-58bad7d6098b@openlilylib.org>
 <d35ca710a90e94178cc138119f9f36cd@grossmann-venter.com>
 <87120c15-dce2-ffe6-3edf-a0dc4445f373@openlilylib.org>
 <e13e914c7d5818b20c0c097b9c423a7c@grossmann-venter.com>
 <bcee0631-1c3e-adb7-67c9-512698c926a2@openlilylib.org>
Message-ID: <cbc6df5a53b2701516076284afa22cb8@grossmann-venter.com>

Urs,
There are several ways to implement this and I already drawn it out 
using Lazarus, but I agree that doing it native to TeX as far as 
possible would be really preferable.
In the end Knuth always wins.

Since you asked; I can explain the scenario of use like this.
--------------------------------------------------------------

Assume someone is giving a lecture by electronic means, meaning an LCD 
projector and laptop.
Currently you have to display the sheetmusic and sometimes just a a few 
bars independently from text which is painful distracting switching on 
the screen, or you literally have to go paste sheetmusic images into a 
word or such document which is really really, I mean really stupid or 
have to deal with the usually troublesome image import with floats in 
LaTeX which is preferable but out of the reach of the general regular 
person which makes up the majority of mousepushing users.
(but thank heavens I now have lyluatex and it makes this mess described 
unnecessary )

Then usually you even have to have separate music files to play sound 
separate from the document and the sheetmusic. This now creates enormous 
acrobatics for an already stressed out presenter with a person dedicated 
to do the document/sheetmusic/snippets of bars of music/sound for you 
while you give the presentation or you have to drag a piano into the 
conference room to play the examples yourself
(with compromise usually). It is damn awful! We all saw it and how it 
usually goes wrong during seminars and such.

What I envisaged in my original mail is ONE documewnt of which lyluatex 
already does 2/3 of the topics above.
All that is needed is a player that can be activated on the notation. 
the presenter then has everything in one document and can just play the 
parts right in the documents as they come up.
As an added benefit, the audience can take a copy of the document with 
and replay the entire thing complete at their leisure.

This will solve the current madness.

I use a lot of professional Symphony VST's like for example Miroslav 
Symphony and it is enormously good.
It is really a piece of cake to implement the midi interfaces to these 
professional vsts and to adapt the current midi implementation to work 
with these VSTs.

I spent the last 3 years begging Notion to just include text in their 
great software, but they cant see the benefit. They absolutely want to 
do scores only period.

So, luLaTeX is probably the only hope to get something like this 
realized, but I will do it with Lazarus+luLaTeX+Custom-midi-drivers  as 
it is the easiest way for me to implement the changes to midi 
interfacing with professional VSTs. I see a bit of a learning curve for 
me doing all that with TeX but it would be preferable if possible and 
the real TeX-heads are seriously resourceful people that can perform 
magic that will take me longer with TeX.

So I can think you see the current dilemma and the obvious solution 
which lyLuaTeX is already 70% of the solution. (if only mousepushers can 
be converted to use a computer for what it was intended for)

Knuth should at least get the Nobel prize in my opinion although he 
deserves way more.
After 15 years since buying the books, I still fight my way through "The 
Art Of Computer Programming" which is always helpful and never outdated.





> 
>> I am really thankful that you guys did this.
>> Now if only you have a midi interface that could play the Notation
>> in the document by means of player buttons, but I understand that
>> doesnt exist yet.
>> Frescobaldi does that, but unfortunately cannot add text inline to
>> scores creating a document.
>> 
>> I might want to create such a frontend for lyluatex.
> 
> A solution to this is probably not that far-fetched, but in order to
> get there you have to either get to a clear understanding of what you
> want to achieve or - if you actually have that - communicate it
> clearly so we all know where we want to get. I think you have a very
> valid use case here that would be good to support.
> 
> I *think* what you will want is to have the score examples accompanied
> by *links* (in whatever graphical form, as plain text links or as
> fancy graphic buttons). These links should point to either the MIDI
> files created by LilyPond, *or* to audio files that have been
> generated from these MIDI files in advance. I can think of no other
> suitable concept of having a "document" play back the score examples.
> If I'm missing anything please correct me.
> 
> Here's what has to be done to achieve that goal. Please create an
> issue at https://github.com/jperon/lyluatex/issues and copy as much
> information as possible/useful from this thread. I would not want to
> continue discussion here because it really isn't a "luatex" issue but
> relates to lyluatex and LilyPond directly:
> 
> 	* lyluatex has to make LilyPond also produce the MIDI files beside
> the scores.
> This has not been implemented yet, but should be a minor thing to do
> (and as said, I find this a valuable use case) 	* lyluatex will then
> (automatically) produce poth a <unique-hash-name>.pdf and a
> <same-unique-hash-name>.midi file in the cache directory
>  	* With the 'raw-pdf' option lyluatex will return that calculated
> base name instead of directly including the score as an image.
> 
> 	* From there you can create a macro that will include the image and
> create a link to the midi file.
> This can be done with standard LaTeX means
> 
> 	* Or you can add a hook in between to call another external program
> to generate the corresponding audio file and link to that.
> This would probably be (much) easier to program in Lua, since Lua is
> present anyway.
> 
>> I will take your concerns noted below seriously.
>> It is just difficult to figure out the differences between
>> luatex, lyluatex, lualatex and which interfaces with lillypond for
>> someone new to luatex (I am an old-time LaTeX/TeX user though )
>> So I will step on your toes for a while unintentionally.
>> 
>> Are you going to remove lyluatex.tex file in future ?
>> The reason I ask is that I want to learn lyluatex by studying the
>> code creating the manual, so I will have to add all the other
>> packages in the headers of the TeX file.
>> If I am not supposed to have it let me know, but the manual does
>> EXACTLY what I want so it THE example file for me. It has everything
>> by design.
>  This last assumption is on spot.
> And no, we're not going to remove that file.
> 
> In the development repository we author the manual in a Markdown file,
> and it is compiled through Pandoc. But the make rule for producing the
> CTAN upload the Markdown file is compiled to the corresponding .tex
> file. So that lyluatex.tex file is an official part of the CTAN
> package (and I would assume that it is also copied *somewhere* into
> your texlive installation).
> 
>> If I am allowed to use it and you have the time and patience...
>> 1) Are only the packages listed n the header needed to compile the
>> manual ?
> 
> You should also look into the the lyluatex.sty file since that also
> loads a number of packages. But AFAIK there are no *special* packages
> needed that aren't available in regular TeX Live (I just don't know
> what happens if you haven't installed texlive-full).
> 
>> 2) Are there any other unforseen issues compiling it you know of
>> that could save me time before I delve into it myself ?
> 
> From what I can see in your communications I'm not 100% confident you
> have set up LilyPond properly already.
> lyluatex does its work by calling LilyPond as an external command, so
> that has to be a) installed and b) found by lyluatex.
> If you don't have a working environment I suggest downloading the
> current development version from http://lilypond.org/development.html
> (they are not at all "unstable" in the case of LilyPond) and
> installing it (I don't know what OS you are having).
> 
> If you are on a UNIX OS and can run "lilypond --version" after the
> installation everything should be fine, but if you have to specify any
> other command line you have to provide this to lyluatex through the
> [program={path/to/lilypond/executable}] option.
> 
> If you still have errors after that please report with more details -
> we have tried to make the error handling as informative as possible -
> but do so on the lyluatex issue tracker, not here.
> 
>> This is possibly the best music typeset software that I have seen in
>> my life.
>> I cannot think of anything that can beat it.
>> Enormous !!!
>> Hope the Universities at least will use it and stop teaching people
>> to be Joe-mousepusher.
> 
> Having literally spent years with this topic I can't give you too much
> hope about this :-(
> 
> Best
> Urs
> 
>> Thanks
>> 
>> On 2018-07-29 12:28, Urs Liska wrote:
>> Am 29.07.2018 um 17:59 schrieb liebrecht at grossmann-venter.com:
>> a) Ok good to know that explains the compiling problems
>> fundamentally.
>> If the manual were a lyluatex file it would have been one of the
>> greatest tutorials right there.
>> What I tried to compile is the manual in the zip download here
>> "https://ctan.org/pkg/lyluatex?lang=en" [1]
>> Which seemed to be the  lyluatex code, but I am seemingly mistaken.
>> 
>> No, you're not mistaken. I wasn't aware of the fact that the script
>> preparing the CTAN upload actually produced that lyluatex.tex file.
>> 
>> b) Ok
>> 
>> c) Ok I saw that, but where that was mentioned there was no direct
>> compile instruction. The option --shell-escape was mentioned in the
>> body text and there was no direct compile command.
>> If
>> "lualatex --shell-escape somefile.tex"
>> were in the instructions I did not have to ask this question, but it
>> is absent.
>> Would be a good idea to add that.
>> 
>> I'll try to keep that in mind. It would be great if you could open
>> an
>> issue on the Github issue tracker at
>> https://github.com/jperon/lyluatex/issues about it.
>> 
>> Question:
>> 1) Since I cannot compile the manual and use that to learn lyluatex,
>> (my preferred latex way to learn is just to work through the code
>> compiling the manual. (Last 20+ more years taught me that is by far
>> the best way.)
>> Is there an indepth lyluatex manual that is compilable with luatex ?
>> 
>> 
>> This .tex file *is* compilable with lualatex (not luatex!).
>> Please first try the other things I told you about, and if that
>> doesn't work please post more details about the errors. But this is
>> not a luatex issue, so this list may not be right place to discuss.
>> Please either subscribe to the lilypond-user mailing list or open an
>> 
>> issue on the issue tracker.
>> 
>> 2) Is there an archive with lots of lyluatex document examples
>> combining both text and musical notaion in the document ?
>> 
>> lyluatex is actually brand new, so there is no such archive (yet).
>> 
>> HTH
>> Urs
> 
> 
> 
> Links:
> ------
> [1] https://ctan.org/pkg/lyluatex?lang=en

From liebrecht at grossmann-venter.com  Mon Jul 30 19:31:02 2018
From: liebrecht at grossmann-venter.com (liebrecht at grossmann-venter.com)
Date: Mon, 30 Jul 2018 13:31:02 -0400
Subject: [luatex] inconsolata package
In-Reply-To: <8u6prdupmaiq$.dlg@nililand.de>
References: <d8ed847e0370d10dbccc47ec37b6b4df@grossmann-venter.com>
 <8u6prdupmaiq$.dlg@nililand.de>
Message-ID: <2beb2dc6929bee722e223ad4e2fdb290@grossmann-venter.com>

I will do so.
Thank you for your patience.
There is very little difference between LuaTeX and lyLuaTeX, but I 
understad you want to keep questions segregated.

Regarding your answers inconsolata doesnt work out of the box with my 
texlive installation. I had to install it separately from CTAN.

I will use tlmgr, but I am so used to do the installations by hand the 
last 20 years, that I dont look for newer installations. I guess that is 
part of my problem with inconsolata as things change.

Sorry for the LuaTeX/lyLuateX cross postings I will be more careful, but 
it is difficult to discern as sometimes it involves both.




On 2018-07-30 04:38, Ulrike Fischer wrote:
> Am Sun, 29 Jul 2018 21:32:04 -0400 schrieb
> liebrecht at grossmann-venter.com:
> 
>> I see the manual uses inconsolata package.
> 
> This here is not the lyluatex list, but the luatex list. You
> shouldn't assume that everyone knows what you mean by "the manual".
> And if you have specific lyluatex question you should better use the
> places Urs suggested to you in his answer.
> 
>> After I installed inconsolate the usual way in the texlive
>> directory as the readme says, compiling the manual still gives me
>> inconsolata errors. inconsolata is a bit of a beast to get
>> working for no apparent reason.
> 
> I didn't have to install anything. inconsolata is part of texlive
> 2018 and worked out-of-the box.
> 
> Beside this you should better use tlmgr to install packages in your
> texlive system.

From rpspringuel at gmail.com  Mon Jul 30 19:40:00 2018
From: rpspringuel at gmail.com (R. Padraic Springuel)
Date: Mon, 30 Jul 2018 13:40:00 -0400
Subject: [luatex] lyluatex compile problems
In-Reply-To: <cbc6df5a53b2701516076284afa22cb8@grossmann-venter.com>
References: <6315e328fcd64ecc7cf13804cc047589@grossmann-venter.com>
 <fdbc0e88-c4b3-243a-9036-58bad7d6098b@openlilylib.org>
 <d35ca710a90e94178cc138119f9f36cd@grossmann-venter.com>
 <87120c15-dce2-ffe6-3edf-a0dc4445f373@openlilylib.org>
 <e13e914c7d5818b20c0c097b9c423a7c@grossmann-venter.com>
 <bcee0631-1c3e-adb7-67c9-512698c926a2@openlilylib.org>
 <cbc6df5a53b2701516076284afa22cb8@grossmann-venter.com>
Message-ID: <AF8E3288-C453-4BBD-B50F-DC31B480C217@gmail.com>

For embedding audio files in a pdf using LaTeX, I would start by looking at media9, as suggested on TeX StackExchange (https://tex.stackexchange.com/questions/89706/audio-examples-in-phonetics-project/89741#89741).  I haven't played with it to see whether it can embed midi directly, but it looks promising. 

??????????????????????????
Br. Samuel, OSB
(R. Padraic Springuel)
St. Anselm's Abbey 
4501 South Dakota Ave, NE
Washington, DC, 20017
202-269-2300
(c) 202-674-1682
PAX ? ???????

> On Jul 30, 2018, at 1:20 PM, liebrecht at grossmann-venter.com wrote:
> 
> Urs,
> There are several ways to implement this and I already drawn it out using Lazarus, but I agree that doing it native to TeX as far as possible would be really preferable.
> In the end Knuth always wins.
> 
> Since you asked; I can explain the scenario of use like this.
> --------------------------------------------------------------
> 
> Assume someone is giving a lecture by electronic means, meaning an LCD projector and laptop.
> Currently you have to display the sheetmusic and sometimes just a a few bars independently from text which is painful distracting switching on the screen, or you literally have to go paste sheetmusic images into a word or such document which is really really, I mean really stupid or have to deal with the usually troublesome image import with floats in LaTeX which is preferable but out of the reach of the general regular person which makes up the majority of mousepushing users.
> (but thank heavens I now have lyluatex and it makes this mess described unnecessary )
> 
> Then usually you even have to have separate music files to play sound separate from the document and the sheetmusic. This now creates enormous acrobatics for an already stressed out presenter with a person dedicated to do the document/sheetmusic/snippets of bars of music/sound for you while you give the presentation or you have to drag a piano into the conference room to play the examples yourself
> (with compromise usually). It is damn awful! We all saw it and how it usually goes wrong during seminars and such.
> 
> What I envisaged in my original mail is ONE documewnt of which lyluatex already does 2/3 of the topics above.
> All that is needed is a player that can be activated on the notation. the presenter then has everything in one document and can just play the parts right in the documents as they come up.
> As an added benefit, the audience can take a copy of the document with and replay the entire thing complete at their leisure.
> 
> This will solve the current madness.
> 
> I use a lot of professional Symphony VST's like for example Miroslav Symphony and it is enormously good.
> It is really a piece of cake to implement the midi interfaces to these professional vsts and to adapt the current midi implementation to work with these VSTs.
> 
> I spent the last 3 years begging Notion to just include text in their great software, but they cant see the benefit. They absolutely want to do scores only period.
> 
> So, luLaTeX is probably the only hope to get something like this realized, but I will do it with Lazarus+luLaTeX+Custom-midi-drivers  as it is the easiest way for me to implement the changes to midi interfacing with professional VSTs. I see a bit of a learning curve for me doing all that with TeX but it would be preferable if possible and the real TeX-heads are seriously resourceful people that can perform magic that will take me longer with TeX.
> 
> So I can think you see the current dilemma and the obvious solution which lyLuaTeX is already 70% of the solution. (if only mousepushers can be converted to use a computer for what it was intended for)
> 
> Knuth should at least get the Nobel prize in my opinion although he deserves way more.
> After 15 years since buying the books, I still fight my way through "The Art Of Computer Programming" which is always helpful and never outdated.
> 
> 
> 
> 
> 
>>> I am really thankful that you guys did this.
>>> Now if only you have a midi interface that could play the Notation
>>> in the document by means of player buttons, but I understand that
>>> doesnt exist yet.
>>> Frescobaldi does that, but unfortunately cannot add text inline to
>>> scores creating a document.
>>> I might want to create such a frontend for lyluatex.
>> A solution to this is probably not that far-fetched, but in order to
>> get there you have to either get to a clear understanding of what you
>> want to achieve or - if you actually have that - communicate it
>> clearly so we all know where we want to get. I think you have a very
>> valid use case here that would be good to support.
>> I *think* what you will want is to have the score examples accompanied
>> by *links* (in whatever graphical form, as plain text links or as
>> fancy graphic buttons). These links should point to either the MIDI
>> files created by LilyPond, *or* to audio files that have been
>> generated from these MIDI files in advance. I can think of no other
>> suitable concept of having a "document" play back the score examples.
>> If I'm missing anything please correct me.
>> Here's what has to be done to achieve that goal. Please create an
>> issue at https://github.com/jperon/lyluatex/issues and copy as much
>> information as possible/useful from this thread. I would not want to
>> continue discussion here because it really isn't a "luatex" issue but
>> relates to lyluatex and LilyPond directly:
>>    * lyluatex has to make LilyPond also produce the MIDI files beside
>> the scores.
>> This has not been implemented yet, but should be a minor thing to do
>> (and as said, I find this a valuable use case)    * lyluatex will then
>> (automatically) produce poth a <unique-hash-name>.pdf and a
>> <same-unique-hash-name>.midi file in the cache directory
>>    * With the 'raw-pdf' option lyluatex will return that calculated
>> base name instead of directly including the score as an image.
>>    * From there you can create a macro that will include the image and
>> create a link to the midi file.
>> This can be done with standard LaTeX means
>>    * Or you can add a hook in between to call another external program
>> to generate the corresponding audio file and link to that.
>> This would probably be (much) easier to program in Lua, since Lua is
>> present anyway.
>>> I will take your concerns noted below seriously.
>>> It is just difficult to figure out the differences between
>>> luatex, lyluatex, lualatex and which interfaces with lillypond for
>>> someone new to luatex (I am an old-time LaTeX/TeX user though )
>>> So I will step on your toes for a while unintentionally.
>>> Are you going to remove lyluatex.tex file in future ?
>>> The reason I ask is that I want to learn lyluatex by studying the
>>> code creating the manual, so I will have to add all the other
>>> packages in the headers of the TeX file.
>>> If I am not supposed to have it let me know, but the manual does
>>> EXACTLY what I want so it THE example file for me. It has everything
>>> by design.
>> This last assumption is on spot.
>> And no, we're not going to remove that file.
>> In the development repository we author the manual in a Markdown file,
>> and it is compiled through Pandoc. But the make rule for producing the
>> CTAN upload the Markdown file is compiled to the corresponding .tex
>> file. So that lyluatex.tex file is an official part of the CTAN
>> package (and I would assume that it is also copied *somewhere* into
>> your texlive installation).
>>> If I am allowed to use it and you have the time and patience...
>>> 1) Are only the packages listed n the header needed to compile the
>>> manual ?
>> You should also look into the the lyluatex.sty file since that also
>> loads a number of packages. But AFAIK there are no *special* packages
>> needed that aren't available in regular TeX Live (I just don't know
>> what happens if you haven't installed texlive-full).
>>> 2) Are there any other unforseen issues compiling it you know of
>>> that could save me time before I delve into it myself ?
>> From what I can see in your communications I'm not 100% confident you
>> have set up LilyPond properly already.
>> lyluatex does its work by calling LilyPond as an external command, so
>> that has to be a) installed and b) found by lyluatex.
>> If you don't have a working environment I suggest downloading the
>> current development version from http://lilypond.org/development.html
>> (they are not at all "unstable" in the case of LilyPond) and
>> installing it (I don't know what OS you are having).
>> If you are on a UNIX OS and can run "lilypond --version" after the
>> installation everything should be fine, but if you have to specify any
>> other command line you have to provide this to lyluatex through the
>> [program={path/to/lilypond/executable}] option.
>> If you still have errors after that please report with more details -
>> we have tried to make the error handling as informative as possible -
>> but do so on the lyluatex issue tracker, not here.
>>> This is possibly the best music typeset software that I have seen in
>>> my life.
>>> I cannot think of anything that can beat it.
>>> Enormous !!!
>>> Hope the Universities at least will use it and stop teaching people
>>> to be Joe-mousepusher.
>> Having literally spent years with this topic I can't give you too much
>> hope about this :-(
>> Best
>> Urs
>>> Thanks
>>> On 2018-07-29 12:28, Urs Liska wrote:
>>> Am 29.07.2018 um 17:59 schrieb liebrecht at grossmann-venter.com:
>>> a) Ok good to know that explains the compiling problems
>>> fundamentally.
>>> If the manual were a lyluatex file it would have been one of the
>>> greatest tutorials right there.
>>> What I tried to compile is the manual in the zip download here
>>> "https://ctan.org/pkg/lyluatex?lang=en" [1]
>>> Which seemed to be the  lyluatex code, but I am seemingly mistaken.
>>> No, you're not mistaken. I wasn't aware of the fact that the script
>>> preparing the CTAN upload actually produced that lyluatex.tex file.
>>> b) Ok
>>> c) Ok I saw that, but where that was mentioned there was no direct
>>> compile instruction. The option --shell-escape was mentioned in the
>>> body text and there was no direct compile command.
>>> If
>>> "lualatex --shell-escape somefile.tex"
>>> were in the instructions I did not have to ask this question, but it
>>> is absent.
>>> Would be a good idea to add that.
>>> I'll try to keep that in mind. It would be great if you could open
>>> an
>>> issue on the Github issue tracker at
>>> https://github.com/jperon/lyluatex/issues about it.
>>> Question:
>>> 1) Since I cannot compile the manual and use that to learn lyluatex,
>>> (my preferred latex way to learn is just to work through the code
>>> compiling the manual. (Last 20+ more years taught me that is by far
>>> the best way.)
>>> Is there an indepth lyluatex manual that is compilable with luatex ?
>>> This .tex file *is* compilable with lualatex (not luatex!).
>>> Please first try the other things I told you about, and if that
>>> doesn't work please post more details about the errors. But this is
>>> not a luatex issue, so this list may not be right place to discuss.
>>> Please either subscribe to the lilypond-user mailing list or open an
>>> issue on the issue tracker.
>>> 2) Is there an archive with lots of lyluatex document examples
>>> combining both text and musical notaion in the document ?
>>> lyluatex is actually brand new, so there is no such archive (yet).
>>> HTH
>>> Urs
>> Links:
>> ------
>> [1] https://ctan.org/pkg/lyluatex?lang=en
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://tug.org/pipermail/luatex/attachments/20180730/ac9143e9/attachment-0001.html>

From luatex at nililand.de  Mon Jul 30 19:53:28 2018
From: luatex at nililand.de (Ulrike Fischer)
Date: Mon, 30 Jul 2018 19:53:28 +0200
Subject: [luatex] inconsolata package
References: <d8ed847e0370d10dbccc47ec37b6b4df@grossmann-venter.com>
 <8u6prdupmaiq$.dlg@nililand.de>
 <2beb2dc6929bee722e223ad4e2fdb290@grossmann-venter.com>
Message-ID: <brmvk0qpglv6$.dlg@nililand.de>

Am Mon, 30 Jul 2018 13:31:02 -0400 schrieb
liebrecht at grossmann-venter.com:

> There is very little difference between LuaTeX and lyLuaTeX,

There is all the difference in the world. luatex is an engine,
lyluatex a package. 


> Regarding your answers inconsolata doesnt work out of the box with my 
> texlive installation. I had to install it separately from CTAN.
> 
> I will use tlmgr, but I am so used to do the installations by hand the 
> last 20 years, that I dont look for newer installations.

If your installation is older than texlive 2017 than you should
update. luatex reached version 1 only with this texlive. 



-- 
Ulrike Fischer 
https://www.troubleshooting-tex.de/


From liebrecht at grossmann-venter.com  Mon Jul 30 20:01:46 2018
From: liebrecht at grossmann-venter.com (liebrecht at grossmann-venter.com)
Date: Mon, 30 Jul 2018 14:01:46 -0400
Subject: [luatex] inconsolata package
In-Reply-To: <brmvk0qpglv6$.dlg@nililand.de>
References: <d8ed847e0370d10dbccc47ec37b6b4df@grossmann-venter.com>
 <8u6prdupmaiq$.dlg@nililand.de>
 <2beb2dc6929bee722e223ad4e2fdb290@grossmann-venter.com>
 <brmvk0qpglv6$.dlg@nililand.de>
Message-ID: <e7bbe1c534673a07c0c1eaa7e0778f51@grossmann-venter.com>

lyLuaTeX basically only adds Lylipond objects as far as I can see as a 
user.
Personally to me it is LuaTeX with Lilypond extensions.
So problems will be most likely solved in the LuaTex environment.
But that is how I see it.
As a developer you will see things way different than a user.


On 2018-07-30 13:53, Ulrike Fischer wrote:
> Am Mon, 30 Jul 2018 13:31:02 -0400 schrieb
> liebrecht at grossmann-venter.com:
> 
>> There is very little difference between LuaTeX and lyLuaTeX,
> 
> There is all the difference in the world. luatex is an engine,
> lyluatex a package.
> 
> 
>> Regarding your answers inconsolata doesnt work out of the box with my
>> texlive installation. I had to install it separately from CTAN.
>> 
>> I will use tlmgr, but I am so used to do the installations by hand the
>> last 20 years, that I dont look for newer installations.
> 
> If your installation is older than texlive 2017 than you should
> update. luatex reached version 1 only with this texlive.

From liebrecht at grossmann-venter.com  Mon Jul 30 20:36:03 2018
From: liebrecht at grossmann-venter.com (liebrecht at grossmann-venter.com)
Date: Mon, 30 Jul 2018 14:36:03 -0400
Subject: [luatex] lyluatex compile problems
In-Reply-To: <AF8E3288-C453-4BBD-B50F-DC31B480C217@gmail.com>
References: <6315e328fcd64ecc7cf13804cc047589@grossmann-venter.com>
 <fdbc0e88-c4b3-243a-9036-58bad7d6098b@openlilylib.org>
 <d35ca710a90e94178cc138119f9f36cd@grossmann-venter.com>
 <87120c15-dce2-ffe6-3edf-a0dc4445f373@openlilylib.org>
 <e13e914c7d5818b20c0c097b9c423a7c@grossmann-venter.com>
 <bcee0631-1c3e-adb7-67c9-512698c926a2@openlilylib.org>
 <cbc6df5a53b2701516076284afa22cb8@grossmann-venter.com>
 <AF8E3288-C453-4BBD-B50F-DC31B480C217@gmail.com>
Message-ID: <a007dd367797636a15df9f36fafbcf1e@grossmann-venter.com>

Br. Samuel
Thank you for the response.
I will keep it in my mind. It is definitely one way to have a single pdf 
as the final document. I can see your point in that case that you dont 
want a midi interface directly from the pdf as it can be handed for 
users and the soundfiles are preferable and more transportable.
So in retrospect, the software needs a Composition Mode and a 
Performance Mode. The Composition Mode allows you to add instruments 
from the VSTs to e.g. a large orchestral score and when you are happy 
with the entire document and score, it then creates an audio file that 
links to the pdf.
What I am saying is that what you describe is the 100% solution to the 
Performance Mode (sort of the equivalent of the pressed CD mode you can 
distribute).
The Composition Mode is very important in the document preparation and 
there you just have to use midi Orchestra VST's and LuaTex/lyLuaTeX 
combined with midi drivers for the orchestra interfaces.
The drivers are the easy part for me as I am a very good device driver / 
numerical programmer.
So thanks for that pointer, I think you came close to defining that part 
accurately.




On 2018-07-30 13:40, R. Padraic Springuel wrote:
> For embedding audio files in a pdf using LaTeX, I would start by
> looking at media9, as suggested on TeX StackExchange
> (https://tex.stackexchange.com/questions/89706/audio-examples-in-phonetics-project/89741#89741).
>  I haven't played with it to see whether it can embed midi directly,
> but it looks promising.
> 
> ??????????????????????????
> Br. Samuel, OSB
> (R. Padraic Springuel)
> St. Anselm's Abbey
> 4501 South Dakota Ave, NE
> Washington, DC, 20017
> 202-269-2300
> (c) 202-674-1682
> PAX ? ???????
> 

From lists at openlilylib.org  Mon Jul 30 20:43:53 2018
From: lists at openlilylib.org (Urs Liska)
Date: Mon, 30 Jul 2018 20:43:53 +0200
Subject: [luatex] lyluatex compile problems
In-Reply-To: <a007dd367797636a15df9f36fafbcf1e@grossmann-venter.com>
References: <6315e328fcd64ecc7cf13804cc047589@grossmann-venter.com>
 <fdbc0e88-c4b3-243a-9036-58bad7d6098b@openlilylib.org>
 <d35ca710a90e94178cc138119f9f36cd@grossmann-venter.com>
 <87120c15-dce2-ffe6-3edf-a0dc4445f373@openlilylib.org>
 <e13e914c7d5818b20c0c097b9c423a7c@grossmann-venter.com>
 <bcee0631-1c3e-adb7-67c9-512698c926a2@openlilylib.org>
 <cbc6df5a53b2701516076284afa22cb8@grossmann-venter.com>
 <AF8E3288-C453-4BBD-B50F-DC31B480C217@gmail.com>
 <a007dd367797636a15df9f36fafbcf1e@grossmann-venter.com>
Message-ID: <8C634FA5-7639-47FF-B181-0D563E97A7A1@openlilylib.org>



Am 30. Juli 2018 20:36:03 MESZ schrieb liebrecht at grossmann-venter.com:
>Br. Samuel
>Thank you for the response.
>I will keep it in my mind. It is definitely one way to have a single
>pdf 
>as the final document. I can see your point in that case that you dont 
>want a midi interface directly from the pdf as it can be handed for 
>users and the soundfiles are preferable and more transportable.
>So in retrospect, the software needs a Composition Mode and a 
>Performance Mode. The Composition Mode allows you to add instruments 
>from the VSTs to e.g. a large orchestral score and when you are happy 
>with the entire document and score, it then creates an audio file that 
>links to the pdf.
>What I am saying is that what you describe is the 100% solution to the 
>Performance Mode (sort of the equivalent of the pressed CD mode you can
>
>distribute).
>The Composition Mode is very important in the document preparation and 
>there you just have to use midi Orchestra VST's and LuaTex/lyLuaTeX 
>combined with midi drivers for the orchestra interfaces.
>The drivers are the easy part for me as I am a very good device driver
>/ 
>numerical programmer.
>So thanks for that pointer, I think you came close to defining that
>part 
>accurately.
>
>

When I read this I think you should "develop" your score examples in Frescobaldi and include them in the .Tex with \lilypondfile{filename}. All the other stuff about playback not being covered by this suggestion.

>
>
>On 2018-07-30 13:40, R. Padraic Springuel wrote:
>> For embedding audio files in a pdf using LaTeX, I would start by
>> looking at media9, as suggested on TeX StackExchange
>>
>(https://tex.stackexchange.com/questions/89706/audio-examples-in-phonetics-project/89741#89741).
>>  I haven't played with it to see whether it can embed midi directly,
>> but it looks promising.
>> 
>> ??????????????????????????
>> Br. Samuel, OSB
>> (R. Padraic Springuel)
>> St. Anselm's Abbey
>> 4501 South Dakota Ave, NE
>> Washington, DC, 20017
>> 202-269-2300
>> (c) 202-674-1682
>> PAX ? ???????
>> 


From liebrecht at grossmann-venter.com  Mon Jul 30 20:52:25 2018
From: liebrecht at grossmann-venter.com (liebrecht at grossmann-venter.com)
Date: Mon, 30 Jul 2018 14:52:25 -0400
Subject: [luatex] inconsolata package
In-Reply-To: <brmvk0qpglv6$.dlg@nililand.de>
References: <d8ed847e0370d10dbccc47ec37b6b4df@grossmann-venter.com>
 <8u6prdupmaiq$.dlg@nililand.de>
 <2beb2dc6929bee722e223ad4e2fdb290@grossmann-venter.com>
 <brmvk0qpglv6$.dlg@nililand.de>
Message-ID: <ee3cc934d3f49764ce55d1ddeea824c5@grossmann-venter.com>

Ulrike,

I tried to find a liLuaTex Forum but it doesnt seem to exist at all.
I contacted the developer listed in the README but no answer yet.

Since several people here redirected my questions to rather ask at 
lyLuaTeX do any of you know where the lyLuaTeX FORUM is located ?

Google brings up nothing, Neither does CTAN list it.



From lists at openlilylib.org  Mon Jul 30 21:20:25 2018
From: lists at openlilylib.org (Urs Liska)
Date: Mon, 30 Jul 2018 21:20:25 +0200
Subject: [luatex] inconsolata package
In-Reply-To: <ee3cc934d3f49764ce55d1ddeea824c5@grossmann-venter.com>
References: <d8ed847e0370d10dbccc47ec37b6b4df@grossmann-venter.com>
 <8u6prdupmaiq$.dlg@nililand.de>
 <2beb2dc6929bee722e223ad4e2fdb290@grossmann-venter.com>
 <brmvk0qpglv6$.dlg@nililand.de>
 <ee3cc934d3f49764ce55d1ddeea824c5@grossmann-venter.com>
Message-ID: <ea0473ba-63c1-89c2-03ee-4dc52acf405e@openlilylib.org>



Am 30.07.2018 um 20:52 schrieb liebrecht at grossmann-venter.com:
> Ulrike,
>
> I tried to find a liLuaTex Forum but it doesnt seem to exist at all.
> I contacted the developer listed in the README but no answer yet.
>
> Since several people here redirected my questions to rather ask at 
> lyLuaTeX do any of you know where the lyLuaTeX FORUM is located ?
>
> Google brings up nothing, Neither does CTAN list it.
>
>

Well, I have more than once pointed you *exactly* to the two places 
where your questions should be discussed: lyluatex's issue tracker at 
Github and the lilypond-user mailing list. I will *not* repeat the exact 
URLs that I have given multiple times, though.

Urs

From liebrecht at grossmann-venter.com  Mon Jul 30 21:48:38 2018
From: liebrecht at grossmann-venter.com (liebrecht at grossmann-venter.com)
Date: Mon, 30 Jul 2018 15:48:38 -0400
Subject: [luatex] inconsolata package
In-Reply-To: <ea0473ba-63c1-89c2-03ee-4dc52acf405e@openlilylib.org>
References: <d8ed847e0370d10dbccc47ec37b6b4df@grossmann-venter.com>
 <8u6prdupmaiq$.dlg@nililand.de>
 <2beb2dc6929bee722e223ad4e2fdb290@grossmann-venter.com>
 <brmvk0qpglv6$.dlg@nililand.de>
 <ee3cc934d3f49764ce55d1ddeea824c5@grossmann-venter.com>
 <ea0473ba-63c1-89c2-03ee-4dc52acf405e@openlilylib.org>
Message-ID: <66c5f052127eb0beb3df40b196e0dd0d@grossmann-venter.com>

Oh well.
Lilypond is not liLuaTeX so I didnt follow that advice, but whatever 
pleases is fine with me.



On 2018-07-30 15:20, Urs Liska wrote:
> Am 30.07.2018 um 20:52 schrieb liebrecht at grossmann-venter.com:
>> Ulrike,
>> 
>> I tried to find a liLuaTex Forum but it doesnt seem to exist at all.
>> I contacted the developer listed in the README but no answer yet.
>> 
>> Since several people here redirected my questions to rather ask at 
>> lyLuaTeX do any of you know where the lyLuaTeX FORUM is located ?
>> 
>> Google brings up nothing, Neither does CTAN list it.
>> 
>> 
> 
> Well, I have more than once pointed you *exactly* to the two places
> where your questions should be discussed: lyluatex's issue tracker at
> Github and the lilypond-user mailing list. I will *not* repeat the
> exact URLs that I have given multiple times, though.
> 
> Urs

From liebrecht at grossmann-venter.com  Mon Jul 30 21:51:02 2018
From: liebrecht at grossmann-venter.com (liebrecht at grossmann-venter.com)
Date: Mon, 30 Jul 2018 15:51:02 -0400
Subject: [luatex] inconsolata package
In-Reply-To: <ea0473ba-63c1-89c2-03ee-4dc52acf405e@openlilylib.org>
References: <d8ed847e0370d10dbccc47ec37b6b4df@grossmann-venter.com>
 <8u6prdupmaiq$.dlg@nililand.de>
 <2beb2dc6929bee722e223ad4e2fdb290@grossmann-venter.com>
 <brmvk0qpglv6$.dlg@nililand.de>
 <ee3cc934d3f49764ce55d1ddeea824c5@grossmann-venter.com>
 <ea0473ba-63c1-89c2-03ee-4dc52acf405e@openlilylib.org>
Message-ID: <f6047e38bea9ddf4e50bf5d0858b5a19@grossmann-venter.com>

Oh well.
Lilypond is not liLuaTeX so I didnt follow that advice, but whatever 
pleases is fine with me.
and
an issue tracker is NOT a foru,
In all fairness if you read my question I asked for a FORUM.


On 2018-07-30 15:20, Urs Liska wrote:
> Am 30.07.2018 um 20:52 schrieb liebrecht at grossmann-venter.com:
>> Ulrike,
>> 
>> I tried to find a liLuaTex Forum but it doesnt seem to exist at all.
>> I contacted the developer listed in the README but no answer yet.
>> 
>> Since several people here redirected my questions to rather ask at 
>> lyLuaTeX do any of you know where the lyLuaTeX FORUM is located ?
>> 
>> Google brings up nothing, Neither does CTAN list it.
>> 
>> 
> 
> Well, I have more than once pointed you *exactly* to the two places
> where your questions should be discussed: lyluatex's issue tracker at
> Github and the lilypond-user mailing list. I will *not* repeat the
> exact URLs that I have given multiple times, though.
> 
> Urs

From lists at openlilylib.org  Mon Jul 30 23:16:38 2018
From: lists at openlilylib.org (Urs Liska)
Date: Mon, 30 Jul 2018 21:16:38 +0000
Subject: [luatex] inconsolata package
In-Reply-To: <66c5f052127eb0beb3df40b196e0dd0d@grossmann-venter.com>
References: <66c5f052127eb0beb3df40b196e0dd0d@grossmann-venter.com>
 <d8ed847e0370d10dbccc47ec37b6b4df@grossmann-venter.com>
 <8u6prdupmaiq$.dlg@nililand.de>
 <2beb2dc6929bee722e223ad4e2fdb290@grossmann-venter.com>
 <brmvk0qpglv6$.dlg@nililand.de>
 <ee3cc934d3f49764ce55d1ddeea824c5@grossmann-venter.com>
 <ea0473ba-63c1-89c2-03ee-4dc52acf405e@openlilylib.org>
Message-ID: <26907f46f960a718754b60750e2cb076@openlilylib.org>

30. Juli 2018 21:50, liebrecht at grossmann-venter.com schrieb:

> Oh well.
> Lilypond is not liLuaTeX 

but lilypond-user is wherw you'll find users and support.

> so I didnt follow that advice, but whatever pleases is fine with me.

It's not about "please" but about being suitable - both for the people having to read your posts and yourself with the goal of getting feedback.

Urs


> 
> On 2018-07-30 15:20, Urs Liska wrote:
> 
>> Am 30.07.2018 um 20:52 schrieb liebrecht at grossmann-venter.com:
>>> Ulrike,
>>>>> I tried to find a liLuaTex Forum but it doesnt seem to exist at all.
>>> I contacted the developer listed in the README but no answer yet.
>>>>> Since several people here redirected my questions to rather ask at >> lyLuaTeX do any of you
>>> know where the lyLuaTeX FORUM is located ?
>>>>> Google brings up nothing, Neither does CTAN list it.
>>>>>>> Well, I have more than once pointed you *exactly* to the two places
>> 
>> where your questions should be discussed: lyluatex's issue tracker at
>> Github and the lilypond-user mailing list. I will *not* repeat the
>> exact URLs that I have given multiple times, though.
>> Urs


From lists at openlilylib.org  Mon Jul 30 23:20:30 2018
From: lists at openlilylib.org (Urs Liska)
Date: Mon, 30 Jul 2018 21:20:30 +0000
Subject: [luatex] inconsolata package
In-Reply-To: <f6047e38bea9ddf4e50bf5d0858b5a19@grossmann-venter.com>
References: <f6047e38bea9ddf4e50bf5d0858b5a19@grossmann-venter.com>
 <d8ed847e0370d10dbccc47ec37b6b4df@grossmann-venter.com>
 <8u6prdupmaiq$.dlg@nililand.de>
 <2beb2dc6929bee722e223ad4e2fdb290@grossmann-venter.com>
 <brmvk0qpglv6$.dlg@nililand.de>
 <ee3cc934d3f49764ce55d1ddeea824c5@grossmann-venter.com>
 <ea0473ba-63c1-89c2-03ee-4dc52acf405e@openlilylib.org>
Message-ID: <54e0281f108bdea1c277b6548878e84b@openlilylib.org>

30. Juli 2018 21:52, liebrecht at grossmann-venter.com schrieb:

> Oh well.
> Lilypond is not liLuaTeX so I didnt follow that advice, but whatever pleases is fine with me.
> and
> an issue tracker is NOT a foru,

No, but it is the place to discuss *issue* with a package, like asking for new features (=> adding MIDI support) or perceivd *compile problems*, which revealed something in the manual that could be improved.

> In all fairness if you read my question I asked for a FORUM.

Not every single LaTeX package has its own forum.
But lilypond-user is as much of a forum you can get.

> 
> On 2018-07-30 15:20, Urs Liska wrote:
> 
>> Am 30.07.2018 um 20:52 schrieb liebrecht at grossmann-venter.com:
>>> Ulrike,
>>>>> I tried to find a liLuaTex Forum but it doesnt seem to exist at all.
>>> I contacted the developer listed in the README but no answer yet.
>>>>> Since several people here redirected my questions to rather ask at >> lyLuaTeX do any of you
>>> know where the lyLuaTeX FORUM is located ?
>>>>> Google brings up nothing, Neither does CTAN list it.
>>>>>>> Well, I have more than once pointed you *exactly* to the two places
>> 
>> where your questions should be discussed: lyluatex's issue tracker at
>> Github and the lilypond-user mailing list. I will *not* repeat the
>> exact URLs that I have given multiple times, though.
>> Urs


From liebrecht at grossmann-venter.com  Mon Jul 30 23:32:52 2018
From: liebrecht at grossmann-venter.com (liebrecht at grossmann-venter.com)
Date: Mon, 30 Jul 2018 17:32:52 -0400
Subject: [luatex] inconsolata package
In-Reply-To: <54e0281f108bdea1c277b6548878e84b@openlilylib.org>
References: <f6047e38bea9ddf4e50bf5d0858b5a19@grossmann-venter.com>
 <d8ed847e0370d10dbccc47ec37b6b4df@grossmann-venter.com>
 <8u6prdupmaiq$.dlg@nililand.de>
 <2beb2dc6929bee722e223ad4e2fdb290@grossmann-venter.com>
 <brmvk0qpglv6$.dlg@nililand.de>
 <ee3cc934d3f49764ce55d1ddeea824c5@grossmann-venter.com>
 <ea0473ba-63c1-89c2-03ee-4dc52acf405e@openlilylib.org>
 <54e0281f108bdea1c277b6548878e84b@openlilylib.org>
Message-ID: <c22ed6613bd4986ff6e9deea299bdc5a@grossmann-venter.com>

On 2018-07-30 17:20, Urs Liska wrote:

> 
> Not every single LaTeX package has its own forum.
> But lilypond-user is as much of a forum you can get.
> 

I know that, but my question was if anyone knows if a Forum exists as I 
couldnt find one.

It is not easy with lyLuaTex to be sure your post is in the right forum.
I just posted on lilypond, and immediately realized that one of the 
issues is most possibly a LuaTeX problem and not a lyLuaTeX problem.

Very convoluted.

All I can do as a user is to try my honest best to post in the correct 
forum, but there will be errors as the lyLuaTeX is a convolution of 
several others.

As a developer things are obvious to you which is not immediately 
obvious to a user, which I am currently.

From reinhard.kotucha at web.de  Tue Jul 31 04:04:12 2018
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Tue, 31 Jul 2018 04:04:12 +0200
Subject: [luatex] inconsolata package
In-Reply-To: <e7bbe1c534673a07c0c1eaa7e0778f51@grossmann-venter.com>
References: <d8ed847e0370d10dbccc47ec37b6b4df@grossmann-venter.com>
 <8u6prdupmaiq$.dlg@nililand.de>
 <2beb2dc6929bee722e223ad4e2fdb290@grossmann-venter.com>
 <brmvk0qpglv6$.dlg@nililand.de>
 <e7bbe1c534673a07c0c1eaa7e0778f51@grossmann-venter.com>
Message-ID: <23391.50076.868212.85594@gargle.gargle.HOWL>

On 2018-07-30 at 14:01:46 -0400, liebrecht at grossmann-venter.com wrote:

 > Personally to me it is LuaTeX with Lilypond extensions.

This is your own "virtual reality".  lyluatex is a LaTeX package.  

 > So problems will be most likely solved in the LuaTex environment.

Not at all, see above.

Urs is *the* expert and you can save a lot of time if you simply
follow his advices.

BTW, I follow this discussion with great pleasure.  I'm not able to
read music scores at all, but...

More than a decade ago, a professor of the "Hochschule f?r Musik und
Theater" visited our monthly TeX-meeting at the University.  He was
already aware of LilyPond and MusixTeX.  He was interested in a
procedure which allows his students to insert snippets of music scores
into their theses.  LaTeX was a good starting point but the MusixTeX
notation was simply too difficult.  We had no idea at this time how to
solve this problem.

lyluatex does exactly what the professor asked for.  I'm absolutely
sure that lyluatex will be the de-facto standard for typesetting music
and text in the future.

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------


From luatex at nililand.de  Tue Jul 31 15:17:59 2018
From: luatex at nililand.de (Ulrike Fischer)
Date: Tue, 31 Jul 2018 15:17:59 +0200
Subject: [luatex] Misplaced letter
References: <5A32C199.5050904@tex-tipografia.com>
 <7nsv8n7gr66h$.dlg@nililand.de> <5A33F82F.4050207@tex-tipografia.com>
 <5A3516A5.80507@tex-tipografia.com> <p7ayx76g9niu.dlg@nililand.de>
 <47385b68-7c00-9d26-9a05-cde2fcd5f300@wxs.nl> <f88wmk1pgu4s.dlg@nililand.de>
 <5B52FBC1.9080808@tex-tipografia.com>
 <1af5ecfe-0a4f-ae16-57d9-37c9cb167b8f@xs4all.nl>
 <1md0yv4yjx66l$.dlg@nililand.de>
 <802761a3-f753-996a-4b4e-144954ca489a@xs4all.nl>
Message-ID: <93psp61ka6p3$.dlg@nililand.de>

Am Wed, 25 Jul 2018 19:38:26 +0200 schrieb Hans Hagen:

> or you can try to add this to
> 
> nodes.simple_font-handler
> 
>          if not direction then
>              direction = tex.get("textdir") -- experiment
>          end

Is there a reason why this isn't there yet by default?
Could it break somewhere?

 
-- 
Ulrike Fischer 
http://www.troubleshooting-tex.de/


From j.hagen at xs4all.nl  Tue Jul 31 17:23:46 2018
From: j.hagen at xs4all.nl (Hans Hagen)
Date: Tue, 31 Jul 2018 17:23:46 +0200
Subject: [luatex] Misplaced letter
In-Reply-To: <93psp61ka6p3$.dlg@nililand.de>
References: <5A32C199.5050904@tex-tipografia.com>
 <7nsv8n7gr66h$.dlg@nililand.de> <5A33F82F.4050207@tex-tipografia.com>
 <5A3516A5.80507@tex-tipografia.com> <p7ayx76g9niu.dlg@nililand.de>
 <47385b68-7c00-9d26-9a05-cde2fcd5f300@wxs.nl> <f88wmk1pgu4s.dlg@nililand.de>
 <5B52FBC1.9080808@tex-tipografia.com>
 <1af5ecfe-0a4f-ae16-57d9-37c9cb167b8f@xs4all.nl>
 <1md0yv4yjx66l$.dlg@nililand.de>
 <802761a3-f753-996a-4b4e-144954ca489a@xs4all.nl>
 <93psp61ka6p3$.dlg@nililand.de>
Message-ID: <8227e44a-6d34-d076-1dde-9fbb0b4b9ca2@xs4all.nl>

On 7/31/2018 3:17 PM, Ulrike Fischer wrote:
> Am Wed, 25 Jul 2018 19:38:26 +0200 schrieb Hans Hagen:
> 
>> or you can try to add this to
>>
>> nodes.simple_font-handler
>>
>>           if not direction then
>>               direction = tex.get("textdir") -- experiment
>>           end
> 
> Is there a reason why this isn't there yet by default?
> Could it break somewhere?
because normally it gets the direction of the encapsulating box (while 
align cells don't have that)

anyway, direction specific issues are also macro package dependent and 
context and latex might (and probably do) approach things differently so 
we can best play safe there

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
        tel: 038 477 53 69 | www.pragma-ade.nl | www.pragma-pod.nl
-----------------------------------------------------------------

