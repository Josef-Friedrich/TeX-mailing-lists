From dcnieho at gmail.com  Fri Oct  1 04:11:03 2010
From: dcnieho at gmail.com (Diederick C. Niehorster)
Date: Fri, 1 Oct 2010 10:11:03 +0800
Subject: [luatex] Passing verbatim text to a function
In-Reply-To: <AANLkTinyoHapsmgzADJ8C-LYqopD4Hgs0O1WpOvKN8S1@mail.gmail.com>
References: <AANLkTimbxNXyegm-+=tN5gutnbqnRtbbt3O7Zv-JVV5M@mail.gmail.com>
	<D0B564CB-F0A9-41C2-A8BB-5AEE3E515F45@gmail.com>
	<AANLkTikkz8Rs4gu5D5hpZcCcvH=22G7M2e7NP2up1nsM@mail.gmail.com>
	<80D12F7E-4D22-4F11-8F06-39BAEED10196@gmail.com>
	<AANLkTi=bGtJGD08wRPW=Od6d1627SpcBonEN0SC6x2gE@mail.gmail.com>
	<A07FE30C-9A31-41EB-87B2-9FC33CB9D7CC@gmail.com>
	<AANLkTimYr5q0ggbYJHm5xR0vpXBYvvAfHiWS91jDjkud@mail.gmail.com>
	<AANLkTinmiOhYxG1VfKVKEVRs4fZRxpBEu30vRhPMLF5=@mail.gmail.com>
	<AANLkTinyoHapsmgzADJ8C-LYqopD4Hgs0O1WpOvKN8S1@mail.gmail.com>
Message-ID: <AANLkTikF7NY0N=TrcQ3B-ZmjJdTM-VHMdetBjCPcsgJY@mail.gmail.com>

Hoi Siets,

On Fri, Oct 1, 2010 at 03:56, Sietse Brouwer <sbbrouwer at gmail.com> wrote:
>> I just note that the wiki can really use some better syntax
>> highlighting btw (or would that be my IE7 on windows XP issue?).
>
> On which note: I should probably hack up a Vim syntax file that does
> interweaved ConTeXt and Lua highlighting. One of these days, perhaps.
> If anyone else gets the jones first, don't hesitate --- you'll
> probably beat me to it. :-)

Hmm, I assume actually, no real experience, that there are syntax
highlighting files for javascript in html or some other combination of
langueages, both for vim and for wikis. Those might be a good starting
point, though it is not something i'm going to look at.

Best,
Dee

From adityam at umich.edu  Fri Oct  1 04:16:58 2010
From: adityam at umich.edu (Aditya Mahajan)
Date: Thu, 30 Sep 2010 22:16:58 -0400
Subject: [luatex] Passing verbatim text to a function
In-Reply-To: <AANLkTinyoHapsmgzADJ8C-LYqopD4Hgs0O1WpOvKN8S1@mail.gmail.com>
References: <AANLkTimbxNXyegm-+=tN5gutnbqnRtbbt3O7Zv-JVV5M@mail.gmail.com>
	<D0B564CB-F0A9-41C2-A8BB-5AEE3E515F45@gmail.com>
	<AANLkTikkz8Rs4gu5D5hpZcCcvH=22G7M2e7NP2up1nsM@mail.gmail.com>
	<80D12F7E-4D22-4F11-8F06-39BAEED10196@gmail.com>
	<AANLkTi=bGtJGD08wRPW=Od6d1627SpcBonEN0SC6x2gE@mail.gmail.com>
	<A07FE30C-9A31-41EB-87B2-9FC33CB9D7CC@gmail.com>
	<AANLkTimYr5q0ggbYJHm5xR0vpXBYvvAfHiWS91jDjkud@mail.gmail.com>
	<AANLkTinmiOhYxG1VfKVKEVRs4fZRxpBEu30vRhPMLF5=@mail.gmail.com>
	<AANLkTinyoHapsmgzADJ8C-LYqopD4Hgs0O1WpOvKN8S1@mail.gmail.com>
Message-ID: <alpine.LNX.2.00.1009302216070.27075@ybpnyubfg.ybpnyqbznva>

On Thu, 30 Sep 2010, Sietse Brouwer wrote:

>> I just note that the wiki can really use some better syntax
>> highlighting btw (or would that be my IE7 on windows XP issue?).
>
> On which note: I should probably hack up a Vim syntax file that does
> interweaved ConTeXt and Lua highlighting. One of these days, perhaps.
> If anyone else gets the jones first, don't hesitate --- you'll
> probably beat me to it. :-)

http://github.com/adityam/vim-context/blob/master/syntax/context.vim

Integrated metapost and lua syntax highligting.

Aditya


From sbbrouwer at gmail.com  Fri Oct  1 13:16:00 2010
From: sbbrouwer at gmail.com (Sietse Brouwer)
Date: Fri, 1 Oct 2010 13:16:00 +0200
Subject: [luatex] Passing verbatim text to a function
In-Reply-To: <alpine.LNX.2.00.1009302216070.27075@ybpnyubfg.ybpnyqbznva>
References: <AANLkTimbxNXyegm-+=tN5gutnbqnRtbbt3O7Zv-JVV5M@mail.gmail.com>
	<D0B564CB-F0A9-41C2-A8BB-5AEE3E515F45@gmail.com>
	<AANLkTikkz8Rs4gu5D5hpZcCcvH=22G7M2e7NP2up1nsM@mail.gmail.com>
	<80D12F7E-4D22-4F11-8F06-39BAEED10196@gmail.com>
	<AANLkTi=bGtJGD08wRPW=Od6d1627SpcBonEN0SC6x2gE@mail.gmail.com>
	<A07FE30C-9A31-41EB-87B2-9FC33CB9D7CC@gmail.com>
	<AANLkTimYr5q0ggbYJHm5xR0vpXBYvvAfHiWS91jDjkud@mail.gmail.com>
	<AANLkTinmiOhYxG1VfKVKEVRs4fZRxpBEu30vRhPMLF5=@mail.gmail.com>
	<AANLkTinyoHapsmgzADJ8C-LYqopD4Hgs0O1WpOvKN8S1@mail.gmail.com>
	<alpine.LNX.2.00.1009302216070.27075@ybpnyubfg.ybpnyqbznva>
Message-ID: <AANLkTi=8yb=wBJ49FoA4EeqhSvMkvewRtpgkZv477TbY@mail.gmail.com>

On Fri, Oct 1, 2010 at 04:16, Aditya Mahajan <adityam at umich.edu> wrote:
> http://github.com/adityam/vim-context/blob/master/syntax/context.vim
>
> Integrated metapost and lua syntax highligting.

Cloned. Excellent.

I think we've reached the end of this thread ? thanks, again,
everybody, for all your help.

?Sietse

--
Sietse Brouwer -- sbbrouwer at gmail.com -- +31 6 13456848
Wildekamp 32 -- 6721 JD Bennekom -- the Netherlands
MSN: sietse at gawab.com -- ICQ: 341232104



On Fri, Oct 1, 2010 at 04:16, Aditya Mahajan <adityam at umich.edu> wrote:
> On Thu, 30 Sep 2010, Sietse Brouwer wrote:
>
>>> I just note that the wiki can really use some better syntax
>>> highlighting btw (or would that be my IE7 on windows XP issue?).
>>
>> On which note: I should probably hack up a Vim syntax file that does
>> interweaved ConTeXt and Lua highlighting. One of these days, perhaps.
>> If anyone else gets the jones first, don't hesitate --- you'll
>> probably beat me to it. :-)
>
> http://github.com/adityam/vim-context/blob/master/syntax/context.vim
>
> Integrated metapost and lua syntax highligting.
>
> Aditya
>
>


From zappathustra at free.fr  Fri Oct  1 23:58:22 2010
From: zappathustra at free.fr (Paul Isambert)
Date: Fri, 01 Oct 2010 23:58:22 +0200
Subject: [luatex] Building LuaTeX.
Message-ID: <4CA6597E.2030907@free.fr>

  Le 29/09/2010 10:48, luigi scarso a ?crit :
 >/ Download context-setup-mswin.zip and unzip to a<directory> where you
/>/ want to install ConTeXt. It is recommended that you choose a
/>/ <directory>
/>/ that does not have a space in its full path. Then open cmd.exe, go to
/>/ the installation<directory> and run
/>/
/>/ #> first-setup.bat
/>/
/>/ then
/>/ #>cd<directory>/tex
/>/ #>call setuptex.bat
/>/
/>/ Next, save in test.tex this line
/>/
/>/ \startext\input tufte\stoptext
/>/
/>/ and then
/>/ #>context test.tex
/>/
/>/ You should have test.pdf .
//
/It works, and I have it. Now, if only context could produce the output 
file in the same directory as the source, I'd be very glad to be able to 
test my packages under a ConTeXtual environment, and perhaps even 
indulge in some ConTeXtualization from time to time, like, you know, a 
candy bar after organic whole grain buckwheat (meaning plain TeX).

[I know this is not the ConTeXt list, but a new ConTeXt user, however 
unsteady, is always good news, huh? Plus I've just noticed the moon was 
circling the earth in the bottom corners of the LuaTeX ref's pages, 
which I find incredibly, well, err, ConTeXtually cute. As in /it's so 
cute/, with a giggle.]

Best,
Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/luatex/attachments/20101001/4e3e9d4e/attachment.html>

From luigi.scarso at gmail.com  Sat Oct  2 00:27:54 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Sat, 2 Oct 2010 00:27:54 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <4CA6597E.2030907@free.fr>
References: <4CA6597E.2030907@free.fr>
Message-ID: <AANLkTinYq1N1ndm9Vj4o=jojm4gtaCtJjQXaxTvH_6bX@mail.gmail.com>

On Fri, Oct 1, 2010 at 11:58 PM, Paul Isambert <zappathustra at free.fr> wrote:
> Le 29/09/2010 10:48, luigi scarso a ?crit :
>> Download context-setup-mswin.zip and unzip to a<directory> where you
>> want to install ConTeXt. It is recommended that you choose a
>> <directory>
>> that does not have a space in its full path. Then open cmd.exe, go to
>> the installation<directory> and run
>>
>> #> first-setup.bat
>>
>> then
>> #>cd<directory>/tex
>> #>call setuptex.bat
>>
>> Next, save in test.tex this line
>>
>> \startext\input tufte\stoptext
>>
>> and then
>> #>context test.tex
>>
>> You should have test.pdf .
>
> It works, and I have it. Now, if only context could produce the output file
> in the same directory as the source,
This is the normal behaviour, otherwise there is something wrong in
your build -- or I have not understood  your problem.

Actually I have the following problems with my build
1) mkiv format is regenerated at every run -- it's not normal
2) if I don't have MinGW on my PATH, then luatex.exe  doesn't work





>
> [I know this is not the ConTeXt list, but a new ConTeXt user, however
> unsteady, is always good news, huh? Plus I've just noticed the moon was
> circling the earth in the bottom corners of the LuaTeX ref's pages, which I
> find incredibly, well, err, ConTeXtually cute. As in it's so cute, with a
> giggle.]

I'm sure that your  "ConTeXtual experiments" will be really appreciate.
You can also show them on your wiki pages: just register at
http://wiki.contextgarden.net/Main_Page
A kind of psychedelic page
http://wiki.contextgarden.net/User:Luigi.scarso/luatex_lunatic

Anyway, yes, it's off topic here.

-- 
luigi


From reinhard.kotucha at web.de  Sat Oct  2 02:33:44 2010
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 2 Oct 2010 02:33:44 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <AANLkTinYq1N1ndm9Vj4o=jojm4gtaCtJjQXaxTvH_6bX@mail.gmail.com>
References: <4CA6597E.2030907@free.fr>
	<AANLkTinYq1N1ndm9Vj4o=jojm4gtaCtJjQXaxTvH_6bX@mail.gmail.com>
Message-ID: <19622.32232.831816.382452@zaphod.ms25.net>

On 2 October 2010 luigi scarso wrote:

 > 1) mkiv format is regenerated at every run -- it's not normal

Do you have to update the file database?

 > 2) if I don't have MinGW on my PATH, then luatex.exe  doesn't work

Did you copy all required DLLs to the same directory as luatex.exe?

This is just a guess, AFAIK Windows complains if a DLL can't be
loaded.

Since many useful debugging tools like strace or ldd don't work on
Windows, consider to install "Dependency Walker":

   http://www.dependencywalker.com/

Under MinGW you could also try:

  strings /path/to/luatex.exe | grep -i '\.dll$'


Dependency Walker was formerly part of Mark Russinovich's Sysinternals
Suite, which provides a lot of debugging tools for Windows:

   http://technet.microsoft.com/en-us/sysinternals/bb842062.aspx

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From luigi.scarso at gmail.com  Sat Oct  2 09:24:19 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Sat, 2 Oct 2010 09:24:19 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <19622.32232.831816.382452@zaphod.ms25.net>
References: <4CA6597E.2030907@free.fr>
	<AANLkTinYq1N1ndm9Vj4o=jojm4gtaCtJjQXaxTvH_6bX@mail.gmail.com>
	<19622.32232.831816.382452@zaphod.ms25.net>
Message-ID: <AANLkTi=FanPr=ZaF_Q8dMrsHDbA8tMf8Rz7XPBAqAsgc@mail.gmail.com>

On Sat, Oct 2, 2010 at 2:33 AM, Reinhard Kotucha
<reinhard.kotucha at web.de> wrote:
> On 2 October 2010 luigi scarso wrote:
>
> ?> 1) mkiv format is regenerated at every run -- it's not normal
>
> Do you have to update the file database?
>
> ?> 2) if I don't have MinGW on my PATH, then luatex.exe ?doesn't work
>
> Did you copy all required DLLs to the same directory as luatex.exe?
The key point is that the windows binary from foundry just works, even
without MinGW at all.
That why I think I'm still missing something.
Unfortunately these days I've no time to dedicate as it needs (a
deadline for next guit meeting)

>
> This is just a guess, AFAIK Windows complains if a DLL can't be
> loaded.
>
> Since many useful debugging tools like strace or ldd don't work on
> Windows, consider to install "Dependency Walker":
>
> ? http://www.dependencywalker.com/
>
> Under MinGW you could also try:
>
> ?strings /path/to/luatex.exe | grep -i '\.dll$'
>
>
> Dependency Walker was formerly part of Mark Russinovich's Sysinternals
> Suite, which provides a lot of debugging tools for Windows:
>
> ? http://technet.microsoft.com/en-us/sysinternals/bb842062.aspx
Thank you very much.
As today I can promise when,
but all these infos will end on an page on contextgarden



-- 
luigi


From taco at elvenkind.com  Sat Oct  2 09:29:05 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 02 Oct 2010 09:29:05 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <AANLkTi=FanPr=ZaF_Q8dMrsHDbA8tMf8Rz7XPBAqAsgc@mail.gmail.com>
References: <4CA6597E.2030907@free.fr>	<AANLkTinYq1N1ndm9Vj4o=jojm4gtaCtJjQXaxTvH_6bX@mail.gmail.com>	<19622.32232.831816.382452@zaphod.ms25.net>
	<AANLkTi=FanPr=ZaF_Q8dMrsHDbA8tMf8Rz7XPBAqAsgc@mail.gmail.com>
Message-ID: <4CA6DF41.30800@elvenkind.com>

On 10/02/2010 09:24 AM, luigi scarso wrote:
> On Sat, Oct 2, 2010 at 2:33 AM, Reinhard Kotucha
> <reinhard.kotucha at web.de>  wrote:
>> On 2 October 2010 luigi scarso wrote:
>>
>>   >  1) mkiv format is regenerated at every run -- it's not normal
>>
>> Do you have to update the file database?
>>
>>   >  2) if I don't have MinGW on my PATH, then luatex.exe  doesn't work
>>
>> Did you copy all required DLLs to the same directory as luatex.exe?
> The key point is that the windows binary from foundry just works, even
> without MinGW at all.
> That why I think I'm still missing something.

I suspect that is because I am using an older gcc (3.4.5) for
cross-compilation, and that version is less eager to use dlls
for its own runtime. IIRC, even with the newer gccs there is a
command line switch to link those runtime dlls statically
(but it will probably mean you have to install another mingw
package).

Best wishes,
Taco


From zappathustra at free.fr  Sat Oct  2 10:16:22 2010
From: zappathustra at free.fr (Paul Isambert)
Date: Sat, 02 Oct 2010 10:16:22 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <AANLkTinYq1N1ndm9Vj4o=jojm4gtaCtJjQXaxTvH_6bX@mail.gmail.com>
References: <4CA6597E.2030907@free.fr>
	<AANLkTinYq1N1ndm9Vj4o=jojm4gtaCtJjQXaxTvH_6bX@mail.gmail.com>
Message-ID: <4CA6EA56.7010809@free.fr>

  Le 02/10/2010 00:27, luigi scarso a ?crit :
> On Fri, Oct 1, 2010 at 11:58 PM, Paul Isambert<zappathustra at free.fr>  wrote:
>>
>> It works, and I have it. Now, if only context could produce the output file
>> in the same directory as the source,
> This is the normal behaviour, otherwise there is something wrong in
> your build -- or I have not understood  your problem.
>
> Actually I have the following problems with my build
> 1) mkiv format is regenerated at every run -- it's not normal
> 2) if I don't have MinGW on my PATH, then luatex.exe  doesn't work
>
>

My problem must definitely be simpler than that, since I use the version 
of LuaTeX shipped with the minimals. When I do

 > context test.tex

test.pdf ends up somewhere very remote instead of just next to the source.

As for your problem, if I replace the LuaTeX engine with the one built 
from the source, then a format error ensues (``I'm stymied''), which is 
strange enough since both versions are 0.63; and if I use texexec --lua 
--make all, then I wind up with apparently the same situation as yours: 
the format is rebuilt at every run.

Otherwise, I do indeed need the MinGW on the PATH for LuaTeX to work 
properly when built from source. More precisely,  LuaTeX needs access to 
the two dlls mentioned before.


>
>> [I know this is not the ConTeXt list, but a new ConTeXt user, however
>> unsteady, is always good news, huh? Plus I've just noticed the moon was
>> circling the earth in the bottom corners of the LuaTeX ref's pages, which I
>> find incredibly, well, err, ConTeXtually cute. As in it's so cute, with a
>> giggle.]
> I'm sure that your  "ConTeXtual experiments" will be really appreciate.
> You can also show them on your wiki pages: just register at
> http://wiki.contextgarden.net/Main_Page

Thanks for the invitation. For the moment, I'm more likely to be a 
ctx-garden reader rather than writer, unless you want the site's quality 
to decrease dramatically.

> A kind of psychedelic page
> http://wiki.contextgarden.net/User:Luigi.scarso/luatex_lunatic
Oh no. After I've convinced myself I should learn and use Lua instead of 
sticking neurotically to TeX, now what? Python? You're telling me I 
should venture in yet an unknown realm? An unknown language? It's 
Pentecost everyday in LuaTeX!

The results are impressive, though. I don't know if it makes any kind of 
sense, but Python + graphs make me think of 
http://matplotlib.sourceforge.net/, which I've never tested.

Best,
Paul

From luigi.scarso at gmail.com  Sat Oct  2 10:37:52 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Sat, 2 Oct 2010 10:37:52 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <4CA6EA56.7010809@free.fr>
References: <4CA6597E.2030907@free.fr>
	<AANLkTinYq1N1ndm9Vj4o=jojm4gtaCtJjQXaxTvH_6bX@mail.gmail.com>
	<4CA6EA56.7010809@free.fr>
Message-ID: <AANLkTi=7r87tk0U0utdb685pGTLp2PMSGrUfim4d860j@mail.gmail.com>

On Sat, Oct 2, 2010 at 10:16 AM, Paul Isambert <zappathustra at free.fr> wrote:
> My problem must definitely be simpler than that, since I use the version of
> LuaTeX shipped with the minimals. When I do
>
>> context test.tex
>
> test.pdf ends up somewhere very remote instead of just next to the source.
It seems an installation problem -- better to go to context mailing list

>
> As for your problem, if I replace the LuaTeX engine with the one built from
> the source, then a format error ensues (``I'm stymied''), which is strange
> enough since both versions are 0.63;
no no, it's normal. Every time you recompile luatex you must rebuild the format.


>and if I use texexec --lua --make all,
> then I wind up with apparently the same situation as yours: the format is
> rebuilt at every run.
> Otherwise, I do indeed need the MinGW on the PATH for LuaTeX to work
> properly when built from source. More precisely, ?LuaTeX needs access to the
> two dlls mentioned before.
Good, at least we have the same wrong results.
 As taco wrote, binary from svn are cross-compiled with and old gcc;
I'm pretty sure that I need to add another switch in build.sh.

>> A kind of psychedelic page
>> http://wiki.contextgarden.net/User:Luigi.scarso/luatex_lunatic
>
>It's Pentecost everyday in LuaTeX!
More or less, but we like it.
Pentecost is not soo bad for a typographer: the Pentecostal
glossolalia ("speaking in tongues") is huge gift.
See (oops, hear) Arthur, for example.

-- 
luigi


From zappathustra at free.fr  Sat Oct  2 13:36:23 2010
From: zappathustra at free.fr (Paul Isambert)
Date: Sat, 02 Oct 2010 13:36:23 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <AANLkTi=7r87tk0U0utdb685pGTLp2PMSGrUfim4d860j@mail.gmail.com>
References: <4CA6597E.2030907@free.fr>	<AANLkTinYq1N1ndm9Vj4o=jojm4gtaCtJjQXaxTvH_6bX@mail.gmail.com>	<4CA6EA56.7010809@free.fr>
	<AANLkTi=7r87tk0U0utdb685pGTLp2PMSGrUfim4d860j@mail.gmail.com>
Message-ID: <4CA71937.8030800@free.fr>

  Le 02/10/2010 10:37, luigi scarso a ?crit :
> On Sat, Oct 2, 2010 at 10:16 AM, Paul Isambert<zappathustra at free.fr>  wrote:
>> My problem must definitely be simpler than that, since I use the version of
>> LuaTeX shipped with the minimals. When I do
>>
>>> context test.tex
>> test.pdf ends up somewhere very remote instead of just next to the source.
> It seems an installation problem -- better to go to context mailing list
>

Well, for the moment I can do as is.

>> As for your problem, if I replace the LuaTeX engine with the one built from
>> the source, then a format error ensues (``I'm stymied''), which is strange
>> enough since both versions are 0.63;
> no no, it's normal. Every time you recompile luatex you must rebuild the format.
>

Not with TeXLive, no, as long as the version number doesn't change, 
there's no need to rebuild the format.

>> and if I use texexec --lua --make all,
>> then I wind up with apparently the same situation as yours: the format is
>> rebuilt at every run.
>> Otherwise, I do indeed need the MinGW on the PATH for LuaTeX to work
>> properly when built from source. More precisely,  LuaTeX needs access to the
>> two dlls mentioned before.
> Good, at least we have the same wrong results.
>   As taco wrote, binary from svn are cross-compiled with and old gcc;
> I'm pretty sure that I need to add another switch in build.sh.
>

As I've said before, adding  "--enable-auto-import", as suggested by the 
compiler, doesn't change anything. Perhaps I don't put it in the right 
place.

>>> A kind of psychedelic page
>>> http://wiki.contextgarden.net/User:Luigi.scarso/luatex_lunatic
>> It's Pentecost everyday in LuaTeX!
> More or less, but we like it.
> Pentecost is not soo bad for a typographer: the Pentecostal
> glossolalia ("speaking in tongues") is huge gift.
> See (oops, hear) Arthur, for example.
Yes, a huge gift, especially when you don't have it, and especially when 
you're a linguist -- a scar on my ego, as far as I'm concerned (I speak 
only French and English, and very rudimentary German). Too bad TeX is no 
natural language... but I'm off-topicalizing here.

Best,
Paul

From enrico.gregorio at univr.it  Sat Oct  2 17:01:45 2010
From: enrico.gregorio at univr.it (enrico.gregorio at univr.it)
Date: Sat, 02 Oct 2010 17:01:45 +0200
Subject: [luatex] Strange hyphenation
Message-ID: <fc99ee4c6b37.4ca76579@univr.it>

Consider the following document

===
\documentclass[a4paper]{article} 
\usepackage[italian]{babel} 
\usepackage{fontspec} 
\setmainfont[Ligatures=TeX,Numbers=OldStyle]{TeX Gyre Termes} 
% \hyphenation{de-ter-mi-nan-te} 
\frenchspacing

\begin{document}

\showhyphens{determinante}

\dots le forme nella natura sono tanto varie, e per cos? dire tanto numerose 
le modificazioni dei concetti trascendentali universali della natura, 
lasciate indeterminate da quelle leggi che l'intelletto puro fornisce a priori 
queste ultime infatti non riguardano che la possibilit? di una natura come 
oggetto dei sensi in generale), --- da richiedere perci? leggi che, in quanto 
empiriche, possono essere contingenti dal punto di vista del nostro 
intelletto, ma che, per ricevere il nome di leggi (come ? richiesto anche dal 
concetto di una natura), debbono venir considerate come necessarie a partire 
da un concetto (per quanto a noi sconosciuto) dell'unit? del molteplice. --- 
Il Giudizio riflettente, cui tocca risalire dal particolare della natura 
all'universale, ha dunque bisogno d'un principio che non pu? ricavare 
dall'esperienza, perch? deve appunto fondare l'unit? di tutti i princ?pi 
empirici sotto princ?pi anch'essi empirici, ma pi? elevati, e quindi la 
possibilit? di una sistematica subordinazione di tali princ?pi gli uni agli 
altri. Un tale principio trascendentale, il Giudizio riflettente pu? dunque 
darselo soltanto esso stesso come legge, senza prenderlo dall'esterno (perch? 
allora si trasformerebbe in Giudizio determinante), 
n? pu? prescriverlo alla natura, poich? la riflessione sulle leggi della natura 
si adegua alla natura, mentre quest'ultima non si adegua alle condizioni 
secondo le quali noi aspiriamo a formarci di essa un concetto che, rispetto 
a tali condizioni, ? del tutto contingente. 

\hyphenation{de-ter-mi-nan-te}

\dots le forme nella natura sono tanto varie, e per cos? dire tanto numerose 
le modificazioni dei concetti trascendentali universali della natura, 
lasciate indeterminate da quelle leggi che l'intelletto puro fornisce a priori 
queste ultime infatti non riguardano che la possibilit? di una natura come 
oggetto dei sensi in generale), --- da richiedere perci? leggi che, in quanto 
empiriche, possono essere contingenti dal punto di vista del nostro 
intelletto, ma che, per ricevere il nome di leggi (come ? richiesto anche dal 
concetto di una natura), debbono venir considerate come necessarie a partire 
da un concetto (per quanto a noi sconosciuto) dell'unit? del molteplice. --- 
Il Giudizio riflettente, cui tocca risalire dal particolare della natura 
all'universale, ha dunque bisogno d'un principio che non pu? ricavare 
dall'esperienza, perch? deve appunto fondare l'unit? di tutti i princ?pi 
empirici sotto princ?pi anch'essi empirici, ma pi? elevati, e quindi la 
possibilit? di una sistematica subordinazione di tali princ?pi gli uni agli 
altri. Un tale principio trascendentale, il Giudizio riflettente pu? dunque 
darselo soltanto esso stesso come legge, senza prenderlo dall'esterno (perch? 
allora si trasformerebbe in Giudizio determinante), 
n? pu? prescriverlo alla natura, poich? la riflessione sulle leggi della natura 
si adegua alla natura, mentre quest'ultima non si adegua alle condizioni 
secondo le quali noi aspiriamo a formarci di essa un concetto che, rispetto 
a tali condizioni, ? del tutto contingente. 

\end{document}
===

The two paragraphs are identical, but they are typeset differently. In the first one
the word "determinante" is not hyphenated, while in the second one it is. The only
thing that changes is the addition to the hyphenation exceptions, but notice that
\showhyphens shows the correct hyphenation even before the first paragraph.

Here is the log. LuaTeX is version 0.63 on a TeX Live 2010, binary taken from the LuaTeX site;
everything updated as of October 2, as regards TeX Live.

===
This is LuaTeX, Version beta-0.63.0-2010091123  (format=lualatex 2010.9.27)  2 OCT 2010 16:50
 restricted \write18 enabled.
**samielhyph.tex
(./samielhyph.tex
LaTeX2e <2009/09/24>
LuaTeX adaptation of babel <v3.8l-luatex-1.4> and hyphenation patterns for engl
ish, dumylang, nohyphenation, loaded.
(/usr/local/texlive/2010/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class
(/usr/local/texlive/2010/texmf-dist/tex/latex/base/size10.clo
File: size10.clo 2007/10/19 v1.4h Standard LaTeX file (size option)
)
\c at part=\count79
\c at section=\count80
\c at subsection=\count81
\c at subsubsection=\count82
\c at paragraph=\count83
\c at subparagraph=\count84
\c at figure=\count85
\c at table=\count86
\abovecaptionskip=\skip41
\belowcaptionskip=\skip42
\bibindent=\dimen102
)
(/usr/local/texlive/2010/texmf-dist/tex/generic/babel/babel.sty
Package: babel 2008/07/06 v3.8l The Babel package

(/usr/local/texlive/2010/texmf-dist/tex/generic/babel/italian.ldf
Language: italian 2008/03/14 v1.2t Italian support from the babel system

(/usr/local/texlive/2010/texmf-dist/tex/generic/babel/babel.def
File: babel.def 2008/07/06 v3.8l Babel common definitions
\babel at savecnt=\count87
\U at D=\dimen103
)
Package babel Info: Making " an active character on input line 94.
luatex-hyphen: loading patterns and exceptions for: italian (\language48)))
(/usr/local/texlive/2010/texmf-dist/tex/latex/fontspec/fontspec.sty
Package: fontspec 2010/09/29 v2.1b Advanced font selection for XeLaTeX/LuaLaTeX


(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/expl3.sty
(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3names.sty
Package: l3names 2010/09/26 v2048 L3 Experimental Naming Scheme for TeX Primiti
ves

(/usr/local/texlive/2010/texmf-dist/tex/generic/oberdiek/luatex.sty
Package: luatex 2010/03/09 v0.4 LuaTeX basic definition package (HO)

(/usr/local/texlive/2010/texmf-dist/tex/generic/oberdiek/infwarerr.sty
Package: infwarerr 2010/04/08 v1.3 Providing info/warning/message (HO)
)
(/usr/local/texlive/2010/texmf-dist/tex/generic/oberdiek/ifluatex.sty
Package: ifluatex 2010/03/01 v1.3 Provides the ifluatex switch (HO)
Package ifluatex Info: LuaTeX detected.
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/etex-pkg/etex.sty
Package: etex 1998/03/26 v2.0 eTeX basic definition package (PEB)
\et at xins=\count88
)
\LuT at AllocAttribute=\count277
\LuT at AllocCatcodeTable=\count278
\CatcodeTableStack=\count279
\CatcodeTableIniTeX=\catcodetable1
\CatcodeTableString=\catcodetable3
\CatcodeTableOther=\catcodetable5
\CatcodeTableLaTeX=\catcodetable7

(/usr/local/texlive/2010/texmf-dist/tex/generic/oberdiek/luatex-loader.sty
Package: luatex-loader 2010/03/09 v0.4 Lua module loader (HO)

(/usr/local/texlive/2010/texmf-dist/scripts/oberdiek/oberdiek.luatex.lua)))
(/usr/local/texlive/2010/texmf-dist/tex/generic/oberdiek/pdftexcmds.sty
Package: pdftexcmds 2010/04/01 v0.9 Utility functions of pdfTeX for LuaTeX (HO)


(/usr/local/texlive/2010/texmf-dist/tex/generic/oberdiek/ltxcmds.sty
Package: ltxcmds 2010/04/26 v1.7 LaTeX kernel commands for general use (HO)
)
Package pdftexcmds Info: \pdf at primitive is available.
Package pdftexcmds Info: \pdf at ifprimitive is available.
\pdftexcmds at toks=\toks14
))
Package: expl3 2010/09/16 v2022 L3 Experimental code bundle wrapper

(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3basics.sty
Package: l3basics 2010/09/20 v2037 L3 Experimental basic definitions
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3expan.sty
Package: l3expan 2010/09/20 v2037 L3 Experimental Argument Expansion module
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3tl.sty
Package: l3tl 2010/09/21 v2040 L3 Experimental Token Lists
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3intexpr.sty
Package: l3intexpr 2010/09/22 v2045 L3 Integer Expressions
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3quark.sty
Package: l3quark 2010/09/20 v2036 L3 Experimental Quark Commands
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3seq.sty
Package: l3seq 2010/03/29 v1879 L3 Experimental sequences and stacks
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3toks.sty
Package: l3toks 2010/09/20 v2037 L3 Experimental Token Registers
\l_tmpb_toks=\toks15
\l_tmpc_toks=\toks16
\g_tmpa_toks=\toks17
\g_tmpb_toks=\toks18
\g_tmpc_toks=\toks19
\c_empty_toks=\toks20
\l_tl_replace_toks=\toks21
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3int.sty
Package: l3int 2010/09/19 v2029 L3 Experimental Integer module
\l_tmpa_int=\count280
\l_tmpb_int=\count281
\l_tmpc_int=\count282
\g_tmpa_int=\count283
\g_tmpb_int=\count284
\c_max_int=\count285
\g_tl_inline_level_int=\count286
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3prg.sty
Package: l3prg 2010/09/22 v2043 L3 Experimental control structures
\g_prg_inline_level_int=\count287
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3clist.sty
Package: l3clist 2010/09/20 v2037 L3 Experimental comma separated lists
\g_clist_map_inline_int=\count288
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3token.sty
Package: l3token 2010/09/19 v2029 L3 Experimental token investigation and manip
ulation
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3prop.sty
Package: l3prop 2010/03/21 v1857 L3 Experimental Property Lists
\g_prop_inline_level_int=\count289
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3msg.sty
Package: l3msg 2010/03/23 v1866 L3 Experimental LaTeX Messages module
\l_msg_redirect_classes_prop=\toks22
\l_msg_redirect_names_prop=\toks23
\l_msg_redirect_fatal_prop=\toks24
\l_msg_redirect_error_prop=\toks25
\l_msg_redirect_warning_prop=\toks26
\l_msg_redirect_info_prop=\toks27
\l_msg_redirect_log_prop=\toks28
\l_msg_redirect_trace_prop=\toks29
\l_msg_redirect_none_prop=\toks30
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3io.sty
Package: l3io 2010/05/22 v1923 L3 Experimental i/o module
\g_iow_streams_prop=\toks31
\g_ior_streams_prop=\toks32
\l_iow_stream_int=\count290
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3skip.sty
Package: l3skip 2010/09/23 v2047 L3 Experimental skip registers
\l_tmpa_skip=\skip256
\l_tmpb_skip=\skip257
\l_tmpc_skip=\skip258
\g_tmpa_skip=\skip259
\g_tmpb_skip=\skip260
\l_tmpa_dim=\dimen256
\l_tmpb_dim=\dimen257
\l_tmpc_dim=\dimen258
\l_tmpd_dim=\dimen259
\g_tmpa_dim=\dimen260
\g_tmpb_dim=\dimen261
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3box.sty
Package: l3box 2010/09/26 v2048 L3 Experimental Box module
\l_tmpb_box=\box256
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3keyval.sty
Package: l3keyval 2010/04/11 v1890 L3 Experimental keyval processing
\l_KV_level_int=\count291
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3keys.sty
Package: l3keys 2010/05/24 v1931 L3 Experimental key-value support
\l_keys_choice_int=\count292
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3precom.sty
Package: l3precom 2010/02/09 v1793 L3 Experimental precompilation module
\g_gen_sym_int=\count293
\g_ggen_sym_int=\count294
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3xref.sty
Package: l3xref 2010/02/09 v1786 L3 Experimental cross referencing
\g_xref_all_curr_immediate_fields_prop=\toks33
\g_xref_all_curr_deferred_fields_prop=\toks34
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3file.sty
Package: l3file 2010/03/21 v1853 L3 Experimental file loading
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3fp.sty
Package: l3fp 2010/09/19 v2029 L3 Experimental floating-point operations
\c_forty_four=\count295
\c_one_hundred=\count296
\c_one_thousand=\count297
\c_one_million=\count298
\c_one_hundred_million=\count299
\c_five_hundred_million=\count300
\c_one_thousand_million=\count301
\c_fp_pi_by_four_decimal_int=\count302
\c_fp_pi_by_four_extended_int=\count303
\c_fp_pi_decimal_int=\count304
\c_fp_pi_extended_int=\count305
\c_fp_two_pi_decimal_int=\count306
\c_fp_two_pi_extended_int=\count307
\l_fp_count_int=\count308
\l_fp_div_offset_int=\count309
\l_fp_input_a_sign_int=\count310
\l_fp_input_a_integer_int=\count311
\l_fp_input_a_decimal_int=\count312
\l_fp_input_a_exponent_int=\count313
\l_fp_input_b_sign_int=\count314
\l_fp_input_b_integer_int=\count315
\l_fp_input_b_decimal_int=\count316
\l_fp_input_b_exponent_int=\count317
\l_fp_input_a_extended_int=\count318
\l_fp_input_b_extended_int=\count319
\l_fp_mul_a_i_int=\count320
\l_fp_mul_a_ii_int=\count321
\l_fp_mul_a_iii_int=\count322
\l_fp_mul_a_iv_int=\count323
\l_fp_mul_a_v_int=\count324
\l_fp_mul_a_vi_int=\count325
\l_fp_mul_b_i_int=\count326
\l_fp_mul_b_ii_int=\count327
\l_fp_mul_b_iii_int=\count328
\l_fp_mul_b_iv_int=\count329
\l_fp_mul_b_v_int=\count330
\l_fp_mul_b_vi_int=\count331
\l_fp_mul_output_int=\count332
\l_fp_output_sign_int=\count333
\l_fp_output_integer_int=\count334
\l_fp_output_decimal_int=\count335
\l_fp_output_exponent_int=\count336
\l_fp_output_extended_int=\count337
\l_fp_round_position_int=\count338
\l_fp_round_target_int=\count339
\l_fp_split_sign_int=\count340
\l_fp_tmp_int=\count341
\l_fp_trig_octant_int=\count342
\l_fp_trig_sign_int=\count343
\l_fp_trig_decimal_int=\count344
\l_fp_trig_extended_int=\count345
\l_fp_tmp_dim=\dimen262
\l_fp_tmp_skip=\skip261
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/expl3/l3luatex.sty
Package: l3luatex 2010/07/18 v1985 L3 Experimental LuaTeX functions
\g_cctab_allocate_int=\count346
\g_cctab_stack_int=\count347
\c_code_cctab=\catcodetable9
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/tools/calc.sty
Package: calc 2007/08/22 v4.3 Infix arithmetic (KKT,FJ)
\calc at Acount=\count348
\calc at Bcount=\count349
\calc at Adimen=\dimen263
\calc at Bdimen=\dimen264
\calc at Askip=\skip262
\calc at Bskip=\skip263
LaTeX Info: Redefining \setlength on input line 76.
LaTeX Info: Redefining \addtolength on input line 77.
\calc at Ccount=\count350
\calc at Cskip=\skip264
))
(/usr/local/texlive/2010/texmf-dist/tex/latex/xpackages/xbase/xparse.sty
Package: xparse 2010/09/20 v2037 Generic document command parser
\c_xparse_shorthands_prop=\toks35
\l_xparse_m_args_int=\count351
\l_xparse_mandatory_args_int=\count352
\l_xparse_processor_int=\count353
\l_xparse_total_args_int=\count354
)
(/usr/local/texlive/2010/texmf-dist/tex/generic/kastrup/binhex.tex)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatextra/luatextra.sty
Package: luatextra 2010/08/02 v0.971 LuaTeX extra low-level macros

(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase-modutils.s
ty
Package: luatexbase-modutils 2010/05/27 v0.2a Module utilities for LuaTeX

(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase-loader.sty
Package: luatexbase-loader 2010/05/27 v0.2a Lua module loader for LuaTeX

(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase-compat.sty
Package: luatexbase-compat 2010/05/27 v0.2a Compatibility tools for LuaTeX
)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase.loader.lua
))
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/modutils.lua))
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase-attr.sty
Package: luatexbase-attr 2010/05/27 v0.2a Attributes allocation for LuaTeX

(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/attr.lua))
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase-cctb.sty
Package: luatexbase-cctb 2010/05/27 v0.2a Catcodetable allocation for LuaTeX

(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/cctb.lua)
\lltxb at catcodetable@alloc=\count355
\CatcodeTableIniTeX=\luatexcatcodetable1
\CatcodeTableString=\luatexcatcodetable2
\CatcodeTableOther=\luatexcatcodetable3
\CatcodeTableLaTeX=\luatexcatcodetable4
\CatcodeTableLaTeXAtLetter=\luatexcatcodetable5
\CatcodeTableExpl=\luatexcatcodetable6
)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase-regs.sty
Package: luatexbase-regs 2010/05/27 v0.2a Registers allocation for LuaTeX
)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase-mcb.sty
Package: luatexbase-mcb 2010/05/27 v0.2a Callback management for LuaTeX

(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/mcb.lua)
Lua module: luamcallbacks 2010/05/12 v0.20 register several functions in a call
back
)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs.lua)
Lua module: lualibs 2010/06/28 v0.95 Lua additional functions.

(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-string.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-lpeg.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-boolean.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-number.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-math.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-table.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-aux.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-io.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-os.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-file.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-md5.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-dir.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-unicode.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-utils.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-dimen.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-url.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-set.lua)
(/usr/local/texlive/2010/texmf-dist/tex/latex/environ/environ.sty
Package: environ 2008/06/18 v0.2 A new way to define environments
\@emptytoks=\toks36
\@envbody=\toks37
)
Lua module: luatextra 2010/08/02 v0.97 Additional low level functions for LuaTe
X
luamcallbacks: inserting function 'luatextra.open_read_file' at position 1 in c
allback list for 'open_read_file'
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luaotfload/luaotfload.sty
Package: luaotfload 2010/09/12 v1.19 OpenType layout system

(/usr/local/texlive/2010/texmf-dist/tex/luatex/luaotfload/luaotfload.lua)
Lua module: luaotfload 2010/09/12 v1.19 OpenType layout system.
luaotfload: loading file /usr/local/texlive/2010/texmf-dist/tex/luatex/luaotflo
ad/otfl-luat-dum.lua.(using cache: /Users/enricomb/Library/texlive/2010/texmf-v
ar/luatex-cache/generic)
luaotfload: loading file /usr/local/texlive/2010/texmf-dist/tex/luatex/luaotflo
ad/otfl-luat-ovr.lua.
luaotfload: loading file /usr/local/texlive/2010/texmf-dist/tex/luatex/luaotflo
ad/otfl-data-con.lua.
luaotfload: loading file /usr/local/texlive/2010/texmf-dist/tex/luatex/luaotflo
ad/otfl-font-ini.lua.
luaotfload: loading file /usr/local/texlive/2010/texmf-dist/tex/luatex/luaotflo
ad/otfl-node-dum.lua.
luaotfload: loading file /usr/local/texlive/2010/texmf-dist/tex/luatex/luaotflo
ad/otfl-node-inj.lua.
luaotfload: loading file /usr/local/texlive/2010/texmf-dist/tex/luatex/luaotflo
ad/otfl-font-tfm.lua.
luatexbase.attributes["otfl at state"] = 1
luaotfload: loading file /usr/local/texlive/2010/texmf-dist/tex/luatex/luaotflo
ad/otfl-font-cid.lua.
luaotfload: loading file /usr/local/texlive/2010/texmf-dist/tex/luatex/luaotflo
ad/otfl-font-ott.lua.
luaotfload: loading file /usr/local/texlive/2010/texmf-dist/tex/luatex/luaotflo
ad/otfl-font-map.lua.
luaotfload: loading file /usr/local/texlive/2010/texmf-dist/tex/luatex/luaotflo
ad/otfl-font-otf.lua.
luaotfload: loading file /usr/local/texlive/2010/texmf-dist/tex/luatex/luaotflo
ad/otfl-font-otd.lua.
luaotfload: loading file /usr/local/texlive/2010/texmf-dist/tex/luatex/luaotflo
ad/otfl-font-oti.lua.
luaotfload: loading file /usr/local/texlive/2010/texmf-dist/tex/luatex/luaotflo
ad/otfl-font-otb.lua.
luaotfload: loading file /usr/local/texlive/2010/texmf-dist/tex/luatex/luaotflo
ad/otfl-font-otn.lua.
luatexbase.attributes["otfl at markbase"] = 2
luatexbase.attributes["otfl at markmark"] = 3
luatexbase.attributes["otfl at markdone"] = 4
luatexbase.attributes["otfl at cursbase"] = 5
luatexbase.attributes["otfl at curscurs"] = 6
luatexbase.attributes["otfl at cursdone"] = 7
luatexbase.attributes["otfl at kernpair"] = 8
luaotfload: loading file /usr/local/texlive/2010/texmf-dist/tex/luatex/luaotflo
ad/otfl-font-ota.lua.
luaotfload: loading file /usr/local/texlive/2010/texmf-dist/tex/luatex/luaotflo
ad/otfl-font-otc.lua.
luaotfload: loading file /usr/local/texlive/2010/texmf-dist/tex/luatex/luaotflo
ad/otfl-font-def.lua.
luaotfload: loading file /usr/local/texlive/2010/texmf-dist/tex/luatex/luaotflo
ad/otfl-font-xtx.lua.
luaotfload: loading file /usr/local/texlive/2010/texmf-dist/tex/luatex/luaotflo
ad/otfl-font-dum.lua.
luaotfload: loading file /usr/local/texlive/2010/texmf-dist/tex/luatex/luaotflo
ad/otfl-font-nms.lua.
luaotfload: loading file /usr/local/texlive/2010/texmf-dist/tex/luatex/luaotflo
ad/otfl-font-clr.lua.
luamcallbacks: inserting function 'luaotfload.pre_linebreak_filter' at position
 1 in callback list for 'pre_linebreak_filter'
luamcallbacks: inserting function 'luaotfload.hpack_filter' at position 1 in ca
llback list for 'hpack_filter'
luamcallbacks: inserting function 'luaotfload.define_font' at position 1 in cal
lback list for 'define_font'
luamcallbacks: inserting function 'luaotfload.find_vf_file' at position 1 in ca
llback list for 'find_vf_file'))
(/usr/local/texlive/2010/texmf-dist/tex/latex/fontspec/fontspec.lua)
Lua module: fontspec 2009/12/04 v2.00 Advanced font selection for LuaLaTeX.
\l_fontspec_script_int=\count356
\l_fontspec_language_int=\count357
\l_fontspec_strnum_int=\count358
Variant \tl_gset:cV already defined; not changing it on line 79

(/usr/local/texlive/2010/texmf-dist/tex/latex/xkeyval/xkeyval.sty
Package: xkeyval 2008/08/13 v2.6a package option processing (HA)

(/usr/local/texlive/2010/texmf-dist/tex/generic/xkeyval/xkeyval.tex
\XKV at toks=\toks38
\XKV at tempa@toks=\toks39
\XKV at depth=\count359
File: xkeyval.tex 2008/08/13 v2.6a key=value parser (HA)

(/usr/local/texlive/2010/texmf-dist/tex/generic/xkeyval/keyval.tex)))
(/usr/local/texlive/2010/texmf-dist/tex/latex/fontspec/fontspec-patches.sty
Package: fontspec-patches 2010/09/29 v2.1b Advanced font selection for XeLaTeX/
LuaLaTeX

(/usr/local/texlive/2010/texmf-dist/tex/latex/base/fixltx2e.sty
Package: fixltx2e 2006/09/13 v1.1m fixes to LaTeX
LaTeX Info: Redefining \em on input line 420.
)
LaTeX Info: Redefining \em on input line 22.
LaTeX Info: Redefining \emph on input line 29.
LaTeX Info: Redefining \- on input line 32.
)
(/usr/local/texlive/2010/texmf-dist/tex/latex/base/fontenc.sty
Package: fontenc 2005/09/27 v1.99g Standard LaTeX package

(/usr/local/texlive/2010/texmf-dist/tex/latex/euenc/eu2enc.def
File: eu2enc.def 2010/05/27 v0.1h Experimental Unicode font encodings
)
LaTeX Font Info:    Try loading font information for EU2+lmr on input line 100.


(/usr/local/texlive/2010/texmf-dist/tex/latex/euenc/eu2lmr.fd
File: eu2lmr.fd 2009/10/30 v1.6 Font defs for Latin Modern
)
luaotfload | load font: auto-selecting default features for script: dflt (was l
atn)(load: /Users/enricomb/Library/texlive/2010/texmf-var/luatex-cache/generic/
fonts/otf/temp-lmroman10-regular.lua))
(/usr/local/texlive/2010/texmf-dist/tex/xelatex/xunicode/xunicode.sty
File: xunicode.sty 2010/05/18 v0.95 provides access to latin accents and many o
ther characters in Unicode lower plane
)
 LaTeX Info: Defining document command \fontspec
(LaTeX)  with arg. spec. 'O{}m' on line 315.

 LaTeX Info: Defining document command \setmainfont
(LaTeX)  with arg. spec. 'O{}m' on line 319.

 LaTeX Info: Defining document command \setsansfont
(LaTeX)  with arg. spec. 'O{}m' on line 323.

 LaTeX Info: Defining document command \setmonofont
(LaTeX)  with arg. spec. 'O{}m' on line 327.

 LaTeX Info: Defining document command \setmathrm
(LaTeX)  with arg. spec. 'O{}m' on line 331.

 LaTeX Info: Defining document command \setboldmathrm
(LaTeX)  with arg. spec. 'O{}m' on line 334.

 LaTeX Info: Defining document command \setmathsf
(LaTeX)  with arg. spec. 'O{}m' on line 337.

 LaTeX Info: Defining document command \setmathtt
(LaTeX)  with arg. spec. 'O{}m' on line 340.

 LaTeX Info: Defining document command \newfontfamily
(LaTeX)  with arg. spec. 'mO{}m' on line 356.

 LaTeX Info: Defining document command \newfontface
(LaTeX)  with arg. spec. 'mO{}m' on line 359.

 LaTeX Info: Defining document command \defaultfontfeatures
(LaTeX)  with arg. spec. 'm' on line 362.

 LaTeX Info: Defining document command \addfontfeatures
(LaTeX)  with arg. spec. 'm' on line 379.

 LaTeX Info: Defining document command \newfontfeature
(LaTeX)  with arg. spec. 'mm' on line 386.

 LaTeX Info: Defining document command \newAATfeature
(LaTeX)  with arg. spec. 'mmmm' on line 395.

 LaTeX Info: Defining document command \newICUfeature
(LaTeX)  with arg. spec. 'mmm' on line 404.

 LaTeX Info: Defining document command \aliasfontfeature
(LaTeX)  with arg. spec. 'mm' on line 406.

 LaTeX Info: Defining document command \aliasfontfeatureoption
(LaTeX)  with arg. spec. 'mmm' on line 409.

 LaTeX Info: Defining document command \newfontscript
(LaTeX)  with arg. spec. 'mm' on line 414.

 LaTeX Info: Defining document command \newfontlanguage
(LaTeX)  with arg. spec. 'mm' on line 432.

 LaTeX Info: Defining document command \DeclareFontsExtensions
(LaTeX)  with arg. spec. 'm' on line 449.

\c at fontspec_tmp_int=\count360
LaTeX Info: Redefining \itshape on input line 2016.
LaTeX Info: Redefining \slshape on input line 2020.
LaTeX Info: Redefining \scshape on input line 2024.
LaTeX Info: Redefining \upshape on input line 2028.

(/usr/local/texlive/2010/texmf-dist/tex/latex/fontspec/fontspec.cfg))
luaotfload | Font names database loaded: /Users/enricomb/Library/texlive/2010/t
exmf-var/luatex-cache/generic/names/otfl-names.lua
luaotfload | load font: font family='texgyretermes', subfamily='regular' found:
 texgyretermes-regular.otf(load: /Users/enricomb/Library/texlive/2010/texmf-var
/luatex-cache/generic/fonts/otf/temp-texgyretermes-regular.lua)
luaotfload | load font: font family='texgyretermes', subfamily='regular' found:
 texgyretermes-regular.otf
fontspec: script 'latn' exists in font 'TeXGyreTermes-Regular'
fontspec: script 'latn' exists in font 'TeXGyreTermes-Regular'
fontspec: feature '+onum' for language 'DFLT' and script 'latn' exists in font 
'TeXGyreTermes-Regular'
\g_fontspec_family_TeX Gyre Termes_int=\count361
 fontspec Info: Defining font family for 'TeX Gyre Termes' with options [Ligatu
res=TeX,Numbers=OldStyle].

luaotfload | load font: font family='texgyretermes', subfamily='regular' found:
 texgyretermes-regular.otf
fontspec: feature '+onum' for language 'DFLT' and script 'latn' exists in font 
'TeXGyreTermes-Regular'
 fontspec Info: Defining shape 'normal' with NFSS specification:
(fontspec)  <->"name:TeXGyreTermes:mode=node;script=latn;language=DFLT;+tlig;+t
rep;+onum;"

fontspec: feature '+smcp' for language 'DFLT' and script 'latn' exists in font 
'TeXGyreTermes-Regular'
fontspec: feature '+onum' for language 'DFLT' and script 'latn' exists in font 
'TeXGyreTermes-Regular'
 fontspec Info: Defining shape 'small caps' with NFSS specification:
(fontspec)  <->"name:TeXGyreTermes:mode=node;script=latn;language=DFLT;+tlig;+t
rep;+onum;+smcp;"

luaotfload | load font: font family='texgyretermes', subfamily='regular' found:
 texgyretermes-regular.otf
luaotfload | load font: font family='texgyretermes', subfamily='bold' found: te
xgyretermes-bold.otf(load: /Users/enricomb/Library/texlive/2010/texmf-var/luate
x-cache/generic/fonts/otf/temp-texgyretermes-bold.lua)
luaotfload | load font: font family='texgyretermes', subfamily='bold' found: te
xgyretermes-bold.otf
fontspec: feature '+onum' for language 'DFLT' and script 'latn' exists in font 
'TeXGyreTermes-Bold'
 fontspec Info: Defining shape 'bold' with NFSS specification:
(fontspec)  <->"name:TeXGyreTermes/B:mode=node;script=latn;language=DFLT;+tlig;
+trep;+onum;"

fontspec: feature '+smcp' for language 'DFLT' and script 'latn' exists in font 
'TeXGyreTermes-Bold'
fontspec: feature '+onum' for language 'DFLT' and script 'latn' exists in font 
'TeXGyreTermes-Bold'
 fontspec Info: Defining shape 'bold small caps' with NFSS specification:
(fontspec)  <->"name:TeXGyreTermes/B:mode=node;script=latn;language=DFLT;+tlig;
+trep;+onum;+smcp;"

luaotfload | load font: font family='texgyretermes', subfamily='regular' found:
 texgyretermes-regular.otf
luaotfload | load font: font family='texgyretermes', subfamily='italic' found: 
texgyretermes-italic.otf(load: /Users/enricomb/Library/texlive/2010/texmf-var/l
uatex-cache/generic/fonts/otf/temp-texgyretermes-italic.lua)
luaotfload | load font: font family='texgyretermes', subfamily='italic' found: 
texgyretermes-italic.otf
fontspec: feature '+onum' for language 'DFLT' and script 'latn' exists in font 
'TeXGyreTermes-Italic'
 fontspec Info: Defining shape 'italic' with NFSS specification:
(fontspec)  <->"name:TeXGyreTermes/I:mode=node;script=latn;language=DFLT;+tlig;
+trep;+onum;"

fontspec: feature '+smcp' for language 'DFLT' and script 'latn' exists in font 
'TeXGyreTermes-Italic'
fontspec: feature '+onum' for language 'DFLT' and script 'latn' exists in font 
'TeXGyreTermes-Italic'
 fontspec Info: Defining shape 'italic small caps' with NFSS specification:
(fontspec)  <->"name:TeXGyreTermes/I:mode=node;script=latn;language=DFLT;+tlig;
+trep;+onum;+smcp;"

luaotfload | load font: font family='texgyretermes', subfamily='regular' found:
 texgyretermes-regular.otf
luaotfload | load font: font family='texgyretermes', subfamily='bolditalic' fou
nd: texgyretermes-bolditalic.otf(load: /Users/enricomb/Library/texlive/2010/tex
mf-var/luatex-cache/generic/fonts/otf/temp-texgyretermes-bolditalic.lua)
luaotfload | load font: font family='texgyretermes', subfamily='bolditalic' fou
nd: texgyretermes-bolditalic.otf
fontspec: feature '+onum' for language 'DFLT' and script 'latn' exists in font 
'TeXGyreTermes-BoldItalic'
 fontspec Info: Defining shape 'bold italic' with NFSS specification:
(fontspec)  <->"name:TeXGyreTermes/BI:mode=node;script=latn;language=DFLT;+tlig
;+trep;+onum;"

fontspec: feature '+smcp' for language 'DFLT' and script 'latn' exists in font 
'TeXGyreTermes-BoldItalic'
fontspec: feature '+onum' for language 'DFLT' and script 'latn' exists in font 
'TeXGyreTermes-BoldItalic'
 fontspec Info: Defining shape 'bold italic small caps' with NFSS specification
:
(fontspec)  <->"name:TeXGyreTermes/BI:mode=node;script=latn;language=DFLT;+tlig
;+trep;+onum;+smcp;"

luaotfload | load font: auto-selecting default features for script: dflt (was l
atn)
luaotfload | load font: font family='texgyretermes', subfamily='regular' found:
 texgyretermes-regular.otf (./samielhyph.aux)
LaTeX Font Info:    Checking defaults for OML/cmm/m/it on input line 8.
LaTeX Font Info:    ... okay on input line 8.
LaTeX Font Info:    Checking defaults for T1/cmr/m/n on input line 8.
LaTeX Font Info:    ... okay on input line 8.
LaTeX Font Info:    Checking defaults for OT1/cmr/m/n on input line 8.
LaTeX Font Info:    ... okay on input line 8.
LaTeX Font Info:    Checking defaults for OMS/cmsy/m/n on input line 8.
LaTeX Font Info:    ... okay on input line 8.
LaTeX Font Info:    Checking defaults for OMX/cmex/m/n on input line 8.
LaTeX Font Info:    ... okay on input line 8.
LaTeX Font Info:    Checking defaults for U/cmr/m/n on input line 8.
LaTeX Font Info:    ... okay on input line 8.
LaTeX Font Info:    Checking defaults for LGR/cmr/m/n on input line 8.
LaTeX Font Info:    Try loading font information for LGR+cmr on input line 8.

(/usr/local/texlive/2010/texmf-dist/tex/generic/babel/lgrcmr.fd
File: lgrcmr.fd 2008/06/17 v2.3 Greek Computer Modern
)
LaTeX Font Info:    ... okay on input line 8.
LaTeX Font Info:    Checking defaults for EU2/lmr/m/n on input line 8.
LaTeX Font Info:    ... okay on input line 8.
 fontspec Info: Adjusting the maths setup (use [no-math] to avoid this).

\symlegacymaths=\mathgroup4
LaTeX Font Info:    Overwriting symbol font `legacymaths' in version `bold'
(Font)                  OT1/cmr/m/n --> OT1/cmr/bx/n on input line 8.
LaTeX Font Info:    Redeclaring math accent \acute on input line 8.
LaTeX Font Info:    Redeclaring math accent \grave on input line 8.
LaTeX Font Info:    Redeclaring math accent \ddot on input line 8.
LaTeX Font Info:    Redeclaring math accent \tilde on input line 8.
LaTeX Font Info:    Redeclaring math accent \bar on input line 8.
LaTeX Font Info:    Redeclaring math accent \breve on input line 8.
LaTeX Font Info:    Redeclaring math accent \check on input line 8.
LaTeX Font Info:    Redeclaring math accent \hat on input line 8.
LaTeX Font Info:    Redeclaring math accent \dot on input line 8.
LaTeX Font Info:    Redeclaring math accent \mathring on input line 8.
LaTeX Font Info:    Redeclaring math symbol \colon on input line 8.
LaTeX Font Info:    Redeclaring math symbol \Gamma on input line 8.
LaTeX Font Info:    Redeclaring math symbol \Delta on input line 8.
LaTeX Font Info:    Redeclaring math symbol \Theta on input line 8.
LaTeX Font Info:    Redeclaring math symbol \Lambda on input line 8.
LaTeX Font Info:    Redeclaring math symbol \Xi on input line 8.
LaTeX Font Info:    Redeclaring math symbol \Pi on input line 8.
LaTeX Font Info:    Redeclaring math symbol \Sigma on input line 8.
LaTeX Font Info:    Redeclaring math symbol \Upsilon on input line 8.
LaTeX Font Info:    Redeclaring math symbol \Phi on input line 8.
LaTeX Font Info:    Redeclaring math symbol \Psi on input line 8.
LaTeX Font Info:    Redeclaring math symbol \Omega on input line 8.
LaTeX Font Info:    Redeclaring math symbol \mathdollar on input line 8.
LaTeX Font Info:    Redeclaring symbol font `operators' on input line 8.
LaTeX Font Info:    Encoding `OT1' has changed to `EU2' for symbol font
(Font)              `operators' in the math version `normal' on input line 8.
LaTeX Font Info:    Overwriting symbol font `operators' in version `normal'
(Font)                  OT1/cmr/m/n --> EU2/TeXGyreTermes(0)/m/n on input line 
8.
LaTeX Font Info:    Encoding `OT1' has changed to `EU2' for symbol font
(Font)              `operators' in the math version `bold' on input line 8.
LaTeX Font Info:    Overwriting symbol font `operators' in version `bold'
(Font)                  OT1/cmr/bx/n --> EU2/TeXGyreTermes(0)/m/n on input line
 8.
LaTeX Font Info:    Overwriting symbol font `operators' in version `normal'
(Font)                  EU2/TeXGyreTermes(0)/m/n --> EU2/TeXGyreTermes(0)/m/n o
n input line 8.
LaTeX Font Info:    Overwriting math alphabet `\mathrm' in version `normal'
(Font)                  EU2/TeXGyreTermes(0)/m/n --> EU2/TeXGyreTermes(0)/m/n o
n input line 8.
LaTeX Font Info:    Overwriting math alphabet `\mathit' in version `normal'
(Font)                  OT1/cmr/m/it --> EU2/TeXGyreTermes(0)/m/it on input lin
e 8.
LaTeX Font Info:    Overwriting math alphabet `\mathbf' in version `normal'
(Font)                  OT1/cmr/bx/n --> EU2/TeXGyreTermes(0)/bx/n on input lin
e 8.
LaTeX Font Info:    Overwriting math alphabet `\mathsf' in version `normal'
(Font)                  OT1/cmss/m/n --> EU2/lmss/m/n on input line 8.
LaTeX Font Info:    Overwriting math alphabet `\mathtt' in version `normal'
(Font)                  OT1/cmtt/m/n --> EU2/lmtt/m/n on input line 8.
LaTeX Font Info:    Overwriting symbol font `operators' in version `bold'
(Font)                  EU2/TeXGyreTermes(0)/m/n --> EU2/TeXGyreTermes(0)/bx/n 
on input line 8.
LaTeX Font Info:    Overwriting math alphabet `\mathrm' in version `bold'
(Font)                  EU2/TeXGyreTermes(0)/m/n --> EU2/TeXGyreTermes(0)/bx/n 
on input line 8.
LaTeX Font Info:    Overwriting math alphabet `\mathit' in version `bold'
(Font)                  OT1/cmr/bx/it --> EU2/TeXGyreTermes(0)/bx/it on input l
ine 8.
LaTeX Font Info:    Overwriting math alphabet `\mathsf' in version `bold'
(Font)                  OT1/cmss/bx/n --> EU2/lmss/bx/n on input line 8.
LaTeX Font Info:    Overwriting math alphabet `\mathtt' in version `bold'
(Font)                  OT1/cmtt/m/n --> EU2/lmtt/bx/n on input line 8.

Underfull \hbox (badness 10000) in paragraph at lines 10--10
[][] \EU2/TeXGyreTermes(0)/m/n/10 de-ter-mi-nan-te

\hbox(6.83+0.1)x16383.99998, glue set 13051.43164, direction TLT []

[1

{/usr/local/texlive/2010/texmf-var/fonts/map/pdftex/updmap/pdftex.map}]
(./samielhyph.aux) )

Here is how much of LuaTeX's memory you used:
 10870 strings out of 257220
 100000,266212 words of node,token memory allocated
 561 words of node memory still in use:
   4 hlist, 2 vlist, 1 rule, 4 disc, 5 glue, 1 penalty, 16 glyph, 36 attribute,
 40 glue_spec, 20 attribute_list, 1 write, 1 local_par nodes
   avail lists: 1:1,2:8373,3:11,4:587,5:183,6:2742,7:70,9:42,10:144
 14171 multiletter control sequences out of 65536+200000
 21 fonts using 1111755 bytes
 47i,4n,75p,304b,279s stack positions out of 5000i,500n,6000p,200000b,50000s
</usr/local/texlive/2010/texmf-dist/fonts/opentype/public/tex-gyre/texgyreterme
s-regular.otf>
Output written on samielhyph.pdf (1 page, 8147 bytes).
PDF statistics: 15 PDF objects out of 1000 (max. 8388607)
 8 compressed objects within 1 object stream
 0 named destinations out of 1000 (max. 131072)
 1 words of extra memory for PDF output out of 10000 (max. 10000000)
===

Ciao
Enrico
--
Enrico Gregorio          + Dipartimento di Informatica          + Tel: +39 045 8027937
Enrico.Gregorio at univr.it + Universit? degli Studi di Verona     +
(gregorio at math.unipd.it) + Strada le Grazie 15 / I-37134 Verona + Fax: +39 045 8027928



From taco at elvenkind.com  Sun Oct  3 09:01:05 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 03 Oct 2010 09:01:05 +0200
Subject: [luatex] Strange hyphenation
In-Reply-To: <fc99ee4c6b37.4ca76579@univr.it>
References: <fc99ee4c6b37.4ca76579@univr.it>
Message-ID: <4CA82A31.9060807@elvenkind.com>

On 10/02/2010 05:01 PM, enrico.gregorio at univr.it wrote:
> Consider the following document
>
> ===
> \documentclass[a4paper]{article}
> \usepackage[italian]{babel}

I just tried to run this with TL + 0.63, but I get a babel warning
stating that there are no patterns for 'Italian'.

Best wishes,
Taco

From enrico.gregorio at univr.it  Sun Oct  3 11:31:39 2010
From: enrico.gregorio at univr.it (enrico.gregorio at univr.it)
Date: Sun, 03 Oct 2010 11:31:39 +0200
Subject: [luatex] Strange hyphenation
In-Reply-To: <4CA82A31.9060807@elvenkind.com>
References: <fc99ee4c6b37.4ca76579@univr.it> <4CA82A31.9060807@elvenkind.com>
Message-ID: <fc96d4a75f76.4ca8699b@univr.it>

> On 10/02/2010 05:01 PM, enrico.gregorio at univr.it wrote:
> > Consider the following document
> >
> > ===
> > \documentclass[a4paper]{article}
> > \usepackage[italian]{babel}
> 
> I just tried to run this with TL + 0.63, but I get a babel warning
> stating that there are no patterns for 'Italian'.

Of course on my site the hyphenation patterns for Italian are
enabled.

It's not a hyphenation pattern problem, since \showhyphens
shows the correct hyphenation. But when the paragraph is
being typeset, the word is not split. It is if I explicitly add a
hyphenation exception. This is quite strange, isn't it?

Ciao
Enrico
--
Enrico Gregorio          + Dipartimento di Informatica          + Tel: +39 045 8027937
Enrico.Gregorio at univr.it + Universit? degli Studi di Verona     +
(gregorio at math.unipd.it) + Strada le Grazie 15 / I-37134 Verona + Fax: +39 045 8027928


From taco at elvenkind.com  Sun Oct  3 13:41:31 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 03 Oct 2010 13:41:31 +0200
Subject: [luatex] Strange hyphenation
In-Reply-To: <fc96d4a75f76.4ca8699b@univr.it>
References: <fc99ee4c6b37.4ca76579@univr.it> <4CA82A31.9060807@elvenkind.com>
	<fc96d4a75f76.4ca8699b@univr.it>
Message-ID: <4CA86BEB.7000800@elvenkind.com>

On 10/03/2010 11:31 AM, enrico.gregorio at univr.it wrote:
>> On 10/02/2010 05:01 PM, enrico.gregorio at univr.it wrote:
>>> Consider the following document
>>>
>>> ===
>>> \documentclass[a4paper]{article}
>>> \usepackage[italian]{babel}
>>
>> I just tried to run this with TL + 0.63, but I get a babel warning
>> stating that there are no patterns for 'Italian'.
>
> Of course on my site the hyphenation patterns for Italian are
> enabled.
>
> It's not a hyphenation pattern problem, since \showhyphens
> shows the correct hyphenation. But when the paragraph is
> being typeset, the word is not split. It is if I explicitly add a
> hyphenation exception. This is quite strange, isn't it?

It is certainly strange. But what I meant with my post was: if
you cannot explain to me how to enable 'Italian', I will not be
able to reproduce the bug, and therefore will not be able to
investigate it at all.

Best wishes,
Taco

From patrick at gundla.ch  Sun Oct  3 13:43:48 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Sun, 3 Oct 2010 13:43:48 +0200
Subject: [luatex] Strange hyphenation
In-Reply-To: <fc96d4a75f76.4ca8699b@univr.it>
References: <fc99ee4c6b37.4ca76579@univr.it> <4CA82A31.9060807@elvenkind.com>
	<fc96d4a75f76.4ca8699b@univr.it>
Message-ID: <1165CC14-9D33-4E8D-A26A-DC0F8128FEA1@gundla.ch>

Hi,



I can reproduce the problem and I find it strange as well. Sorry that I don't have anything to add.

And I don't get a babel warning. It loads the italian patterns (as far as I can see)

INPUT /opt/texlive2010/texmf-dist/tex/generic/hyph-utf8/patterns/txt/hyph-it.pat.txt
INPUT /opt/texlive2010/texmf-dist/tex/generic/hyph-utf8/patterns/txt/hyph-it.hyp.txt

Patrick




From enrico.gregorio at univr.it  Sun Oct  3 14:52:47 2010
From: enrico.gregorio at univr.it (enrico.gregorio at univr.it)
Date: Sun, 03 Oct 2010 14:52:47 +0200
Subject: [luatex] Strange hyphenation
In-Reply-To: <4CA86BEB.7000800@elvenkind.com>
References: <fc99ee4c6b37.4ca76579@univr.it> <4CA82A31.9060807@elvenkind.com>
	<fc96d4a75f76.4ca8699b@univr.it> <4CA86BEB.7000800@elvenkind.com>
Message-ID: <fca2e4e060e8.4ca898bf@univr.it>

Taco wrote:

> On 10/03/2010 11:31 AM, enrico.gregorio at univr.it wrote:
> >> On 10/02/2010 05:01 PM, enrico.gregorio at univr.it wrote:
> >>> Consider the following document
> >>>
> >>> ===
> >>> \documentclass[a4paper]{article}
> >>> \usepackage[italian]{babel}
> >>
> >> I just tried to run this with TL + 0.63, but I get a babel warning
> >> stating that there are no patterns for 'Italian'.
> >
> > Of course on my site the hyphenation patterns for Italian are
> > enabled.
> >
> > It's not a hyphenation pattern problem, since \showhyphens
> > shows the correct hyphenation. But when the paragraph is
> > being typeset, the word is not split. It is if I explicitly add a
> > hyphenation exception. This is quite strange, isn't it?
> 
> It is certainly strange. But what I meant with my post was: if
> you cannot explain to me how to enable 'Italian', I will not be
> able to reproduce the bug, and therefore will not be able to
> investigate it at all.

My fmtutil.cnf says

...
lualatex luatex language.dat,language.dat.lua lualatex.ini
...

My language.dat has

...
% from hyphen-italian:
italian loadhyph-it.tex
...

while language.dat.lua has

...
-- from hyphen-italian:
  ['italian'] = {
    loader = 'loadhyph-it.tex',
    lefthyphenmin = 2,
    righthyphenmin = 2,
    synonyms = {  },
    patterns = 'hyph-it.pat.txt',
    hyphenation = 'hyph-it.hyp.txt',
  },
...

On TeX Live all known languages are always enabled by default. It's probably sufficient
to uncomment the relevant line in "language.dat" and say 

tlmgr generate language.dat.lua

since lualatex doesn't dump hyphenation patterns in the format, AFAIK.

Ciao
Enrico
--
Enrico Gregorio          + Dipartimento di Informatica          + Tel: +39 045 8027937
Enrico.Gregorio at univr.it + Universit? degli Studi di Verona     +
(gregorio at math.unipd.it) + Strada le Grazie 15 / I-37134 Verona + Fax: +39 045 8027928



From taco at elvenkind.com  Sun Oct  3 17:45:27 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 03 Oct 2010 17:45:27 +0200
Subject: [luatex] Strange hyphenation
In-Reply-To: <fca2e4e060e8.4ca898bf@univr.it>
References: <fc99ee4c6b37.4ca76579@univr.it> <4CA82A31.9060807@elvenkind.com>
	<fc96d4a75f76.4ca8699b@univr.it> <4CA86BEB.7000800@elvenkind.com>
	<fca2e4e060e8.4ca898bf@univr.it>
Message-ID: <4CA8A517.9000007@elvenkind.com>

On 10/03/2010 02:52 PM, enrico.gregorio at univr.it wrote:
>
> My fmtutil.cnf says
>

Ok, I managed to fix my installation, and now I get the same bad
output you did (I had to run fmtutil --byfmt by hand to get a proper
new format).

The problem is not the word 'determinante' at all. Believe it or not,
but the acutal problem is the '---' ligature. No _normal_ patterns are
applied to the current paragraph any more after the first occurence of
that. Hyphenation exceptions still work, and that is why the second
paragraph comes out ok.

I need to do some serious thinking on why a ligature can block
hyphenation :(

Best wishes,
Taco



From zappathustra at free.fr  Sun Oct  3 18:15:03 2010
From: zappathustra at free.fr (Paul Isambert)
Date: Sun, 03 Oct 2010 18:15:03 +0200
Subject: [luatex] Strange hyphenation
In-Reply-To: <4CA8A517.9000007@elvenkind.com>
References: <fc99ee4c6b37.4ca76579@univr.it>
	<4CA82A31.9060807@elvenkind.com>	<fc96d4a75f76.4ca8699b@univr.it>
	<4CA86BEB.7000800@elvenkind.com>	<fca2e4e060e8.4ca898bf@univr.it>
	<4CA8A517.9000007@elvenkind.com>
Message-ID: <4CA8AC07.1040201@free.fr>

  Le 03/10/2010 17:45, Taco Hoekwater a ?crit :
> On 10/03/2010 02:52 PM, enrico.gregorio at univr.it wrote:
>>
>> My fmtutil.cnf says
>>
>
> Ok, I managed to fix my installation, and now I get the same bad
> output you did (I had to run fmtutil --byfmt by hand to get a proper
> new format).
>
> The problem is not the word 'determinante' at all. Believe it or not,
> but the acutal problem is the '---' ligature. No _normal_ patterns are
> applied to the current paragraph any more after the first occurence of
> that. Hyphenation exceptions still work, and that is why the second
> paragraph comes out ok.
>
> I need to do some serious thinking on why a ligature can block
> hyphenation :(

Just for the record:

Enrico's text, under plain TeX, with luaotfload and an otf font, is 
hyphenated properly, even with `---' ligatures.
So isn't it LaTeX, or Babel, or anything not related to LuaTeX, that is 
bugged?

Paul

From luigi.scarso at gmail.com  Sun Oct  3 18:46:59 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Sun, 3 Oct 2010 18:46:59 +0200
Subject: [luatex] Strange hyphenation
In-Reply-To: <4CA8AC07.1040201@free.fr>
References: <fc99ee4c6b37.4ca76579@univr.it> <4CA82A31.9060807@elvenkind.com>
	<fc96d4a75f76.4ca8699b@univr.it> <4CA86BEB.7000800@elvenkind.com>
	<fca2e4e060e8.4ca898bf@univr.it> <4CA8A517.9000007@elvenkind.com>
	<4CA8AC07.1040201@free.fr>
Message-ID: <AANLkTim3v4uch49eXs4tOThOmiyNmdduhO2CEq9+3R5s@mail.gmail.com>

On Sun, Oct 3, 2010 at 6:15 PM, Paul Isambert <zappathustra at free.fr> wrote:
> ?Le 03/10/2010 17:45, Taco Hoekwater a ?crit :
>>
>> On 10/03/2010 02:52 PM, enrico.gregorio at univr.it wrote:
>>>
>>> My fmtutil.cnf says
>>>
>>
>> Ok, I managed to fix my installation, and now I get the same bad
>> output you did (I had to run fmtutil --byfmt by hand to get a proper
>> new format).
>>
>> The problem is not the word 'determinante' at all. Believe it or not,
>> but the acutal problem is the '---' ligature. No _normal_ patterns are
>> applied to the current paragraph any more after the first occurence of
>> that. Hyphenation exceptions still work, and that is why the second
>> paragraph comes out ok.
>>
>> I need to do some serious thinking on why a ligature can block
>> hyphenation :(
>
> Just for the record:
>
> Enrico's text, under plain TeX, with luaotfload and an otf font, is
> hyphenated properly, even with `---' ligatures.
> So isn't it LaTeX, or Babel, or anything not related to LuaTeX, that is
> bugged?
What is your test ?



-- 
luigi


From mpg at elzevir.fr  Sun Oct  3 19:27:33 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Sun, 03 Oct 2010 19:27:33 +0200
Subject: [luatex] Strange hyphenation
In-Reply-To: <fca2e4e060e8.4ca898bf@univr.it>
References: <fc99ee4c6b37.4ca76579@univr.it>
	<4CA82A31.9060807@elvenkind.com>	<fc96d4a75f76.4ca8699b@univr.it>
	<4CA86BEB.7000800@elvenkind.com> <fca2e4e060e8.4ca898bf@univr.it>
Message-ID: <4CA8BD05.7010207@elzevir.fr>

Hi,

I'm aware that the problem of activating Italian patterns on Taco's machine is
solved, but anyway, just for the record:

Le 03/10/2010 14:52, enrico.gregorio at univr.it a ?crit :
> On TeX Live all known languages are always enabled by default. It's probably sufficient
> to uncomment the relevant line in "language.dat" and say 
> 
> tlmgr generate language.dat.lua
> 
> since lualatex doesn't dump hyphenation patterns in the format, AFAIK.
> 
This is incorrect for two reasons:

1. language.dat.lua is not generated from language.dat: both are generated from
the information in texlive.tlpdb & local files language-local.dat(.lua). See the
"generate" section in tlmgr's manual for details. Also, it is strongly
recommended not to edit language.dat manually, as stated in the comments:

% DO NOT EDIT THIS FILE (language.dat)! It is generated by tlmgr.

2. Lualatex doesn't dump patterns themselves in the format any more, but it
still stores the list of languages available for babel. So, formats still need
to be rebuild after changing this list. This limitation will be removed in the
future, but I'm unlikely to act on it before a few months.

Manuel.

From zappathustra at free.fr  Sun Oct  3 19:39:59 2010
From: zappathustra at free.fr (Paul Isambert)
Date: Sun, 03 Oct 2010 19:39:59 +0200
Subject: [luatex] Strange hyphenation
In-Reply-To: <AANLkTim3v4uch49eXs4tOThOmiyNmdduhO2CEq9+3R5s@mail.gmail.com>
References: <fc99ee4c6b37.4ca76579@univr.it>
	<4CA82A31.9060807@elvenkind.com>	<fc96d4a75f76.4ca8699b@univr.it>
	<4CA86BEB.7000800@elvenkind.com>	<fca2e4e060e8.4ca898bf@univr.it>
	<4CA8A517.9000007@elvenkind.com>	<4CA8AC07.1040201@free.fr>
	<AANLkTim3v4uch49eXs4tOThOmiyNmdduhO2CEq9+3R5s@mail.gmail.com>
Message-ID: <4CA8BFEF.40003@free.fr>

  Le 03/10/2010 18:46, luigi scarso a ?crit :
> On Sun, Oct 3, 2010 at 6:15 PM, Paul Isambert<zappathustra at free.fr>  wrote:
>>   Le 03/10/2010 17:45, Taco Hoekwater a ?crit :
>>> On 10/03/2010 02:52 PM, enrico.gregorio at univr.it wrote:
>>>> My fmtutil.cnf says
>>>>
>>> Ok, I managed to fix my installation, and now I get the same bad
>>> output you did (I had to run fmtutil --byfmt by hand to get a proper
>>> new format).
>>>
>>> The problem is not the word 'determinante' at all. Believe it or not,
>>> but the acutal problem is the '---' ligature. No _normal_ patterns are
>>> applied to the current paragraph any more after the first occurence of
>>> that. Hyphenation exceptions still work, and that is why the second
>>> paragraph comes out ok.
>>>
>>> I need to do some serious thinking on why a ligature can block
>>> hyphenation :(
>> Just for the record:
>>
>> Enrico's text, under plain TeX, with luaotfload and an otf font, is
>> hyphenated properly, even with `---' ligatures.
>> So isn't it LaTeX, or Babel, or anything not related to LuaTeX, that is
>> bugged?
> What is your test ?
\input luaotfload.sty

\font\myfont=ElectraLTStd-Regular.otf:+tlig
\myfont

<enrico's text>

\bye

My version of luaotfload isn't up to date, though.

Paul

From mpg at elzevir.fr  Sun Oct  3 19:44:54 2010
From: mpg at elzevir.fr (=?UTF-8?B?TWFudWVsIFDDqWdvdXJpw6ktR29ubmFyZA==?=)
Date: Sun, 03 Oct 2010 19:44:54 +0200
Subject: [luatex] Strange hyphenation
In-Reply-To: <4CA8BFEF.40003@free.fr>
References: <fc99ee4c6b37.4ca76579@univr.it>	<4CA82A31.9060807@elvenkind.com>	<fc96d4a75f76.4ca8699b@univr.it>	<4CA86BEB.7000800@elvenkind.com>	<fca2e4e060e8.4ca898bf@univr.it>	<4CA8A517.9000007@elvenkind.com>	<4CA8AC07.1040201@free.fr>	<AANLkTim3v4uch49eXs4tOThOmiyNmdduhO2CEq9+3R5s@mail.gmail.com>
	<4CA8BFEF.40003@free.fr>
Message-ID: <4CA8C116.3020906@elzevir.fr>

Le 03/10/2010 19:39, Paul Isambert a ?crit :
> \input luaotfload.sty
> 
> \font\myfont=ElectraLTStd-Regular.otf:+tlig
> \myfont
> 
> <enrico's text>
> 
> \bye
> 
Your example doesn't load Italian patterns, does it?

Manuel.


From zappathustra at free.fr  Sun Oct  3 19:53:15 2010
From: zappathustra at free.fr (Paul Isambert)
Date: Sun, 03 Oct 2010 19:53:15 +0200
Subject: [luatex] Strange hyphenation
In-Reply-To: <4CA8C116.3020906@elzevir.fr>
References: <fc99ee4c6b37.4ca76579@univr.it>	<4CA82A31.9060807@elvenkind.com>	<fc96d4a75f76.4ca8699b@univr.it>	<4CA86BEB.7000800@elvenkind.com>	<fca2e4e060e8.4ca898bf@univr.it>	<4CA8A517.9000007@elvenkind.com>	<4CA8AC07.1040201@free.fr>	<AANLkTim3v4uch49eXs4tOThOmiyNmdduhO2CEq9+3R5s@mail.gmail.com>
	<4CA8BFEF.40003@free.fr> <4CA8C116.3020906@elzevir.fr>
Message-ID: <4CA8C30B.7010505@free.fr>


  Le 03/10/2010 19:44, Manuel P?gouri?-Gonnard a ?crit :
> Le 03/10/2010 19:39, Paul Isambert a ?crit :
>> \input luaotfload.sty
>>
>> \font\myfont=ElectraLTStd-Regular.otf:+tlig
>> \myfont
>>
>> <enrico's text>
>>
>> \bye
>>
> Your example doesn't load Italian patterns, does it?
Nope. That's the point. Taco said that the `---' ligature prevented 
hyphenation. I just remark that, when we strip down to the minimum, the 
ligature doesn't hinder anything.

Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/luatex/attachments/20101003/c1406ce9/attachment.html>

From khaledhosny at eglug.org  Sun Oct  3 20:02:22 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sun, 3 Oct 2010 20:02:22 +0200
Subject: [luatex] Strange hyphenation
In-Reply-To: <4CA8AC07.1040201@free.fr>
References: <fc99ee4c6b37.4ca76579@univr.it> <4CA82A31.9060807@elvenkind.com>
	<fc96d4a75f76.4ca8699b@univr.it> <4CA86BEB.7000800@elvenkind.com>
	<fca2e4e060e8.4ca898bf@univr.it> <4CA8A517.9000007@elvenkind.com>
	<4CA8AC07.1040201@free.fr>
Message-ID: <20101003180222.GD2214@khaled-laptop>

On Sun, Oct 03, 2010 at 06:15:03PM +0200, Paul Isambert wrote:
>  Le 03/10/2010 17:45, Taco Hoekwater a ?crit :
> >On 10/03/2010 02:52 PM, enrico.gregorio at univr.it wrote:
> >>
> >>My fmtutil.cnf says
> >>
> >
> >Ok, I managed to fix my installation, and now I get the same bad
> >output you did (I had to run fmtutil --byfmt by hand to get a proper
> >new format).
> >
> >The problem is not the word 'determinante' at all. Believe it or not,
> >but the acutal problem is the '---' ligature. No _normal_ patterns are
> >applied to the current paragraph any more after the first occurence of
> >that. Hyphenation exceptions still work, and that is why the second
> >paragraph comes out ok.
> >
> >I need to do some serious thinking on why a ligature can block
> >hyphenation :(
> 
> Just for the record:
> 
> Enrico's text, under plain TeX, with luaotfload and an otf font, is
> hyphenated properly, even with `---' ligatures.
> So isn't it LaTeX, or Babel, or anything not related to LuaTeX, that
> is bugged?

Yes, because in that case it is no longer a TeX ligature, OpenType
ligatures (in "node" mode) are not done through the legacy TeX
ligaturing machinery.

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From mpg at elzevir.fr  Sun Oct  3 20:26:34 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Sun, 03 Oct 2010 20:26:34 +0200
Subject: [luatex] Strange hyphenation
In-Reply-To: <4CA8A517.9000007@elvenkind.com>
References: <fc99ee4c6b37.4ca76579@univr.it>
	<4CA82A31.9060807@elvenkind.com>	<fc96d4a75f76.4ca8699b@univr.it>
	<4CA86BEB.7000800@elvenkind.com>	<fca2e4e060e8.4ca898bf@univr.it>
	<4CA8A517.9000007@elvenkind.com>
Message-ID: <4CA8CADA.9010903@elzevir.fr>

Le 03/10/2010 17:45, Taco Hoekwater a ?crit :
> The problem is not the word 'determinante' at all. Believe it or not,
> but the acutal problem is the '---' ligature. No _normal_ patterns are
> applied to the current paragraph any more after the first occurence of
> that. Hyphenation exceptions still work, and that is why the second
> paragraph comes out ok.
> 
> I need to do some serious thinking on why a ligature can block
> hyphenation :(
> 
It sure sounds weird. Maybe it'll help you to know that it works just fine with
luatex 0.60 from TL2010. Attached are the log and pdf with 0.60 and 0.63
(everything unchanged except luatex binary and format rebuilt to match the binary).

Manuel.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: hyph-lltx-0.60.log
Type: text/x-log
Size: 30422 bytes
Desc: not available
URL: <http://tug.org/pipermail/luatex/attachments/20101003/c4ff4f0d/attachment-0002.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: hyph-lltx-0.60.pdf
Type: application/pdf
Size: 7911 bytes
Desc: not available
URL: <http://tug.org/pipermail/luatex/attachments/20101003/c4ff4f0d/attachment-0002.pdf>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: hyph-lltx-0.63.log
Type: text/x-log
Size: 30595 bytes
Desc: not available
URL: <http://tug.org/pipermail/luatex/attachments/20101003/c4ff4f0d/attachment-0003.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: hyph-lltx-0.63.pdf
Type: application/pdf
Size: 8251 bytes
Desc: not available
URL: <http://tug.org/pipermail/luatex/attachments/20101003/c4ff4f0d/attachment-0003.pdf>

From zappathustra at free.fr  Sun Oct  3 20:26:41 2010
From: zappathustra at free.fr (Paul Isambert)
Date: Sun, 03 Oct 2010 20:26:41 +0200
Subject: [luatex] Strange hyphenation
In-Reply-To: <20101003180222.GD2214@khaled-laptop>
References: <fc99ee4c6b37.4ca76579@univr.it>
	<4CA82A31.9060807@elvenkind.com>	<fc96d4a75f76.4ca8699b@univr.it>
	<4CA86BEB.7000800@elvenkind.com>	<fca2e4e060e8.4ca898bf@univr.it>
	<4CA8A517.9000007@elvenkind.com>	<4CA8AC07.1040201@free.fr>
	<20101003180222.GD2214@khaled-laptop>
Message-ID: <4CA8CAE1.4070004@free.fr>

  Le 03/10/2010 20:02, Khaled Hosny a ?crit :
> On Sun, Oct 03, 2010 at 06:15:03PM +0200, Paul Isambert wrote:
>>   Le 03/10/2010 17:45, Taco Hoekwater a ?crit :
>>> On 10/03/2010 02:52 PM, enrico.gregorio at univr.it wrote:
>>>> My fmtutil.cnf says
>>>>
>>> Ok, I managed to fix my installation, and now I get the same bad
>>> output you did (I had to run fmtutil --byfmt by hand to get a proper
>>> new format).
>>>
>>> The problem is not the word 'determinante' at all. Believe it or not,
>>> but the acutal problem is the '---' ligature. No _normal_ patterns are
>>> applied to the current paragraph any more after the first occurence of
>>> that. Hyphenation exceptions still work, and that is why the second
>>> paragraph comes out ok.
>>>
>>> I need to do some serious thinking on why a ligature can block
>>> hyphenation :(
>> Just for the record:
>>
>> Enrico's text, under plain TeX, with luaotfload and an otf font, is
>> hyphenated properly, even with `---' ligatures.
>> So isn't it LaTeX, or Babel, or anything not related to LuaTeX, that
>> is bugged?
> Yes, because in that case it is no longer a TeX ligature, OpenType
> ligatures (in "node" mode) are not done through the legacy TeX
> ligaturing machinery.
Interesting point, except I should have mentioned that my slightly 
modified and outdated version of luaotfload doesn't rely on node mode 
but TeX ligatures instead.

Paul


From mpg at elzevir.fr  Sun Oct  3 23:26:30 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Sun, 03 Oct 2010 23:26:30 +0200
Subject: [luatex] Strange hyphenation
In-Reply-To: <4CA8CADA.9010903@elzevir.fr>
References: <fc99ee4c6b37.4ca76579@univr.it>	<4CA82A31.9060807@elvenkind.com>	<fc96d4a75f76.4ca8699b@univr.it>	<4CA86BEB.7000800@elvenkind.com>	<fca2e4e060e8.4ca898bf@univr.it>	<4CA8A517.9000007@elvenkind.com>
	<4CA8CADA.9010903@elzevir.fr>
Message-ID: <4CA8F506.90509@elzevir.fr>

Le 03/10/2010 20:26, Manuel P?gouri?-Gonnard a ?crit :
> Le 03/10/2010 17:45, Taco Hoekwater a ?crit :
>> The problem is not the word 'determinante' at all. Believe it or not,
>> but the acutal problem is the '---' ligature. No _normal_ patterns are
>> applied to the current paragraph any more after the first occurence of
>> that. Hyphenation exceptions still work, and that is why the second
>> paragraph comes out ok.
>>
>> I need to do some serious thinking on why a ligature can block
>> hyphenation :(
>>
> It sure sounds weird. Maybe it'll help you to know that it works just fine with
> luatex 0.60 from TL2010. Attached are the log and pdf with 0.60 and 0.63
> (everything unchanged except luatex binary and format rebuilt to match the binary).
> 
According to git bisect, the culprit is rev 3854:

    * insertion of discretionaries following explicit hyphen characters
    now happens in hnj_hyphenation(), not earlier
    * the main control loop has been simplified accordingly
    * hyphenation exceptions are now case sensitive
    * it is now possible to add extra hyphenation points to a compound word
    containing explict hyphens via a hyphenation exception

hth,
m

From taco at elvenkind.com  Mon Oct  4 10:08:37 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 04 Oct 2010 10:08:37 +0200
Subject: [luatex] Strange hyphenation
In-Reply-To: <4CA8F506.90509@elzevir.fr>
References: <fc99ee4c6b37.4ca76579@univr.it>	<4CA82A31.9060807@elvenkind.com>	<fc96d4a75f76.4ca8699b@univr.it>	<4CA86BEB.7000800@elvenkind.com>	<fca2e4e060e8.4ca898bf@univr.it>	<4CA8A517.9000007@elvenkind.com>	<4CA8CADA.9010903@elzevir.fr>
	<4CA8F506.90509@elzevir.fr>
Message-ID: <4CA98B85.9060403@elvenkind.com>

On 10/03/2010 11:26 PM, Manuel P?gouri?-Gonnard wrote:
> According to git bisect, the culprit is rev 3854:
>
>      * insertion of discretionaries following explicit hyphen characters
>      now happens in hnj_hyphenation(), not earlier

This is probably the culprit.

> hth,

Yes it does, thanks.

Best wishes,
Taco

From taco at elvenkind.com  Mon Oct  4 11:04:05 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 04 Oct 2010 11:04:05 +0200
Subject: [luatex] Strange hyphenation
In-Reply-To: <4CA8F506.90509@elzevir.fr>
References: <fc99ee4c6b37.4ca76579@univr.it>	<4CA82A31.9060807@elvenkind.com>	<fc96d4a75f76.4ca8699b@univr.it>	<4CA86BEB.7000800@elvenkind.com>	<fca2e4e060e8.4ca898bf@univr.it>	<4CA8A517.9000007@elvenkind.com>	<4CA8CADA.9010903@elzevir.fr>
	<4CA8F506.90509@elzevir.fr>
Message-ID: <4CA99885.1010008@elvenkind.com>

On 10/03/2010 11:26 PM, Manuel P?gouri?-Gonnard wrote:
> According to git bisect, the culprit is rev 3854:
>
>      * insertion of discretionaries following explicit hyphen characters
>      now happens in hnj_hyphenation(), not earlier

The fix is now in the repository, commit #3907.

Note to self: when using state variables, it makes sense to unset them
at some point :(

Best wishes,
Taco

From zappathustra at free.fr  Mon Oct  4 11:10:28 2010
From: zappathustra at free.fr (Paul Isambert)
Date: Mon, 04 Oct 2010 11:10:28 +0200
Subject: [luatex] Strange hyphenation
In-Reply-To: <4CA99885.1010008@elvenkind.com>
References: <fc99ee4c6b37.4ca76579@univr.it>	<4CA82A31.9060807@elvenkind.com>	<fc96d4a75f76.4ca8699b@univr.it>	<4CA86BEB.7000800@elvenkind.com>	<fca2e4e060e8.4ca898bf@univr.it>	<4CA8A517.9000007@elvenkind.com>	<4CA8CADA.9010903@elzevir.fr>	<4CA8F506.90509@elzevir.fr>
	<4CA99885.1010008@elvenkind.com>
Message-ID: <4CA99A04.3080900@free.fr>

  Le 04/10/2010 11:04, Taco Hoekwater a ?crit :
> On 10/03/2010 11:26 PM, Manuel P?gouri?-Gonnard wrote:
>> According to git bisect, the culprit is rev 3854:
>>
>>      * insertion of discretionaries following explicit hyphen characters
>>      now happens in hnj_hyphenation(), not earlier
>
> The fix is now in the repository, commit #3907.
>
> Note to self: when using state variables, it makes sense to unset them
> at some point :(

By `state variables', You mean presidents, secretaries and the like? 
Yes, that's democracy!

Sorry for the joke and thank you for the fix.

Paul

From enrico.gregorio at univr.it  Mon Oct  4 15:36:09 2010
From: enrico.gregorio at univr.it (enrico.gregorio at univr.it)
Date: Mon, 04 Oct 2010 15:36:09 +0200
Subject: [luatex] Strange hyphenation
In-Reply-To: <4CA99885.1010008@elvenkind.com>
References: <fc99ee4c6b37.4ca76579@univr.it> <4CA82A31.9060807@elvenkind.com>
	<fc96d4a75f76.4ca8699b@univr.it> <4CA86BEB.7000800@elvenkind.com>
	<fca2e4e060e8.4ca898bf@univr.it> <4CA8A517.9000007@elvenkind.com>
	<4CA8CADA.9010903@elzevir.fr> <4CA8F506.90509@elzevir.fr>
	<4CA99885.1010008@elvenkind.com>
Message-ID: <fca4fc0317f2.4ca9f469@univr.it>

Taco Hoekwater <taco at elvenkind.com> wrote
> On 10/03/2010 11:26 PM, Manuel P?gouri?-Gonnard wrote:
> > According to git bisect, the culprit is rev 3854:
> >
> >      * insertion of discretionaries 
> following explicit hyphen characters
> >      now happens in 
> hnj_hyphenation(), not earlier
> 
> The fix is now in the repository, commit #3907.
> 
> Note to self: when using state variables, it makes sense to 
> unset them
> at some point :(
> 
> Best wishes,
> Taco

I built luatex from SVN (rev 3907) and words after the ligature are actually hyphenated.
Nice done, thanks!

Ciao
Enrico

--
Enrico Gregorio          + Dipartimento di Informatica          + Tel: +39 045 8027937
Enrico.Gregorio at univr.it + Universit? degli Studi di Verona     +
(gregorio at math.unipd.it) + Strada le Grazie 15 / I-37134 Verona + Fax: +39 045 8027928



From t34www at googlemail.com  Mon Oct  4 16:15:21 2010
From: t34www at googlemail.com (T T)
Date: Mon, 4 Oct 2010 15:15:21 +0100
Subject: [luatex] combining files with pure LuaTeX
In-Reply-To: <4C9F8F8C.4090705@web.de>
References: <18011.1285511548@cl.cam.ac.uk>
	<4C9F8F8C.4090705@web.de>
Message-ID: <AANLkTinN==67WRQO2s-e403aZ1PpYMQmV9KO-3T+8DHd@mail.gmail.com>

2010/9/26 Pablo Rodr?guez <oinos at web.de>:
>
> The computer that I have to use isn't mine. I don't have administrator
> rights under Windows XP (and I don't want to ask for them). All files must
> be deleted after the operation. I could install a TeX distribution locally,
> but not for a operation that might happen once a week. And the scripting
> abilities are also needed.

I'm sure if my reply is still relevant, but you can install TL to and
run it from an usb stick or hard drive (give -portable option on the
command line to the TL installer).

Cheers,

Tomek


From luigi.scarso at gmail.com  Tue Oct  5 16:09:00 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Tue, 5 Oct 2010 16:09:00 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <4CA71937.8030800@free.fr>
References: <4CA6597E.2030907@free.fr>
	<AANLkTinYq1N1ndm9Vj4o=jojm4gtaCtJjQXaxTvH_6bX@mail.gmail.com>
	<4CA6EA56.7010809@free.fr>
	<AANLkTi=7r87tk0U0utdb685pGTLp2PMSGrUfim4d860j@mail.gmail.com>
	<4CA71937.8030800@free.fr>
Message-ID: <AANLkTi=HCkbBm5mnJPso6kLPzFts12Cda1MJfOk8EEHs@mail.gmail.com>

On Sat, Oct 2, 2010 at 1:36 PM, Paul Isambert <zappathustra at free.fr> wrote:
> As I've said before, adding ?"--enable-auto-import", as suggested by the
> compiler, doesn't change anything. Perhaps I don't put it in the right
> place.
It works by adding
-static-libstdc++
-static-libgcc
but then binary is also triplicate .

-- 
luigi


From ccomren at gmail.com  Tue Oct  5 17:23:11 2010
From: ccomren at gmail.com (C. Comren)
Date: Tue, 5 Oct 2010 17:23:11 +0200
Subject: [luatex] Use Math Glyphs from Text Font
Message-ID: <AANLkTi=NXrhJH4AMVr80Dwhvw4NSmPPaCy4uXiRKjUFu@mail.gmail.com>

Hi,

is it possible to replace some math glyphs by glyphs from the opentype
text font? I would like to use italic Greek letters from the text
font.

Thanks,
CC

From ccomren at gmail.com  Tue Oct  5 17:38:04 2010
From: ccomren at gmail.com (C. Comren)
Date: Tue, 5 Oct 2010 17:38:04 +0200
Subject: [luatex] Fine-tuning size of math fonts
Message-ID: <AANLkTikk1H8mwqBHD95sBsue8ai_q=kvmnMKaT2hQ+cp@mail.gmail.com>

Hi,

how can I adjust the size of the math font without changing the size
of the text fonts?

Thanks,
CC

From khaledhosny at eglug.org  Tue Oct  5 18:37:45 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Tue, 5 Oct 2010 18:37:45 +0200
Subject: [luatex] Use Math Glyphs from Text Font
In-Reply-To: <AANLkTi=NXrhJH4AMVr80Dwhvw4NSmPPaCy4uXiRKjUFu@mail.gmail.com>
References: <AANLkTi=NXrhJH4AMVr80Dwhvw4NSmPPaCy4uXiRKjUFu@mail.gmail.com>
Message-ID: <20101005163745.GB5991@khaled-laptop>

On Tue, Oct 05, 2010 at 05:23:11PM +0200, C. Comren wrote:
> Hi,
> 
> is it possible to replace some math glyphs by glyphs from the opentype
> text font? I would like to use italic Greek letters from the text
> font.

It depends on what macro package you are using.

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From khaledhosny at eglug.org  Tue Oct  5 18:39:44 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Tue, 5 Oct 2010 18:39:44 +0200
Subject: [luatex] Fine-tuning size of math fonts
In-Reply-To: <AANLkTikk1H8mwqBHD95sBsue8ai_q=kvmnMKaT2hQ+cp@mail.gmail.com>
References: <AANLkTikk1H8mwqBHD95sBsue8ai_q=kvmnMKaT2hQ+cp@mail.gmail.com>
Message-ID: <20101005163944.GC5991@khaled-laptop>

On Tue, Oct 05, 2010 at 05:38:04PM +0200, C. Comren wrote:
> Hi,
> 
> how can I adjust the size of the math font without changing the size
> of the text fonts?

Again, more info is needed; what macro package you are using (plain,
ConTeXt, LaTeX) etc, what TeX distribution you are using and so on.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From ccomren at gmail.com  Tue Oct  5 22:32:55 2010
From: ccomren at gmail.com (C. Comren)
Date: Tue, 5 Oct 2010 22:32:55 +0200
Subject: [luatex] Use Math Glyphs from Text Font
Message-ID: <AANLkTin3gT5gSmHOrx8ZKL9hr+7mLVxRui44c2xdHv5o@mail.gmail.com>

>Again, more info is needed; what macro package you are using (plain,
>ConTeXt, LaTeX) etc, what TeX distribution you are using and so on.

I am using LuaLaTeX with TexLive 2010. I use the package fontspec,
which worked right out-of-the-box.

From khaledhosny at eglug.org  Tue Oct  5 22:37:57 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Tue, 5 Oct 2010 22:37:57 +0200
Subject: [luatex] Use Math Glyphs from Text Font
In-Reply-To: <AANLkTin3gT5gSmHOrx8ZKL9hr+7mLVxRui44c2xdHv5o@mail.gmail.com>
References: <AANLkTin3gT5gSmHOrx8ZKL9hr+7mLVxRui44c2xdHv5o@mail.gmail.com>
Message-ID: <20101005203756.GA12291@khaled-laptop>

On Tue, Oct 05, 2010 at 10:32:55PM +0200, C. Comren wrote:
> >Again, more info is needed; what macro package you are using (plain,
> >ConTeXt, LaTeX) etc, what TeX distribution you are using and so on.
> 
> I am using LuaLaTeX with TexLive 2010. I use the package fontspec,
> which worked right out-of-the-box.

Then you can use unicode-math package, check its documentation
especially the "using multiple fonts section".

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From ccomren at gmail.com  Tue Oct  5 23:27:58 2010
From: ccomren at gmail.com (C. Comren)
Date: Tue, 5 Oct 2010 23:27:58 +0200
Subject: [luatex] Use Math Glyphs from Text Font
In-Reply-To: <20101005203756.GA12291@khaled-laptop>
References: <AANLkTin3gT5gSmHOrx8ZKL9hr+7mLVxRui44c2xdHv5o@mail.gmail.com>
	<20101005203756.GA12291@khaled-laptop>
Message-ID: <AANLkTimwnuo_y_EOOYc_6nFswptyH-NJixnUkdPaJOx2@mail.gmail.com>

> Then you can use unicode-math package, check its documentation
> especially the "using multiple fonts section".

I tried

\setmathfont[range=\mathbfsfit/{greek,Greek}]{NameOfTheFont}

LuaLaTeX complains that the font does not contain script "Math" and
produces a PDF without any math in it.

From reinhard.kotucha at web.de  Tue Oct  5 23:42:45 2010
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Tue, 5 Oct 2010 23:42:45 +0200
Subject: [luatex] Use Math Glyphs from Text Font
In-Reply-To: <AANLkTimwnuo_y_EOOYc_6nFswptyH-NJixnUkdPaJOx2@mail.gmail.com>
References: <AANLkTin3gT5gSmHOrx8ZKL9hr+7mLVxRui44c2xdHv5o@mail.gmail.com>
	<20101005203756.GA12291@khaled-laptop>
	<AANLkTimwnuo_y_EOOYc_6nFswptyH-NJixnUkdPaJOx2@mail.gmail.com>
Message-ID: <19627.39893.533321.511825@zaphod.ms25.net>

On 5 October 2010 C. Comren wrote:

 > > Then you can use unicode-math package, check its documentation
 > > especially the "using multiple fonts section".
 > 
 > I tried
 > 
 > \setmathfont[range=\mathbfsfit/{greek,Greek}]{NameOfTheFont}
 > 
 > LuaLaTeX complains that the font does not contain script "Math" and
 > produces a PDF without any math in it.

This means that the font does not contain script "Math".

HTH,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From ccomren at gmail.com  Wed Oct  6 00:04:18 2010
From: ccomren at gmail.com (C. Comren)
Date: Wed, 6 Oct 2010 00:04:18 +0200
Subject: [luatex] Use Math Glyphs from Text Font
In-Reply-To: <19627.39893.533321.511825@zaphod.ms25.net>
References: <AANLkTin3gT5gSmHOrx8ZKL9hr+7mLVxRui44c2xdHv5o@mail.gmail.com>
	<20101005203756.GA12291@khaled-laptop>
	<AANLkTimwnuo_y_EOOYc_6nFswptyH-NJixnUkdPaJOx2@mail.gmail.com>
	<19627.39893.533321.511825@zaphod.ms25.net>
Message-ID: <AANLkTikK8wxVa=6UCWGGEHd-bXOGweqCQmGw7+xBwT4s@mail.gmail.com>

> This means that the font does not contain script "Math".

Yes, it's an italic text font. However, I loaded a math package and
tried to replace it's greek letters by the text font's.

From khaledhosny at eglug.org  Wed Oct  6 00:05:53 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 6 Oct 2010 00:05:53 +0200
Subject: [luatex] Use Math Glyphs from Text Font
In-Reply-To: <AANLkTimwnuo_y_EOOYc_6nFswptyH-NJixnUkdPaJOx2@mail.gmail.com>
References: <AANLkTin3gT5gSmHOrx8ZKL9hr+7mLVxRui44c2xdHv5o@mail.gmail.com>
	<20101005203756.GA12291@khaled-laptop>
	<AANLkTimwnuo_y_EOOYc_6nFswptyH-NJixnUkdPaJOx2@mail.gmail.com>
Message-ID: <20101005220553.GA13319@khaled-laptop>

On Tue, Oct 05, 2010 at 11:27:58PM +0200, C. Comren wrote:
> > Then you can use unicode-math package, check its documentation
> > especially the "using multiple fonts section".
> 
> I tried
> 
> \setmathfont[range=\mathbfsfit/{greek,Greek}]{NameOfTheFont}
> 
> LuaLaTeX complains that the font does not contain script "Math" and
> produces a PDF without any math in it.

The warning means this is not an OpenType math font and it should be
harmless in your case.

There must be some other case for the issue you have, and without a
minimal example one can hardly tell.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From ccomren at gmail.com  Wed Oct  6 00:16:05 2010
From: ccomren at gmail.com (C. Comren)
Date: Wed, 6 Oct 2010 00:16:05 +0200
Subject: [luatex] Use Math Glyphs from Text Font
In-Reply-To: <20101005220553.GA13319@khaled-laptop>
References: <AANLkTin3gT5gSmHOrx8ZKL9hr+7mLVxRui44c2xdHv5o@mail.gmail.com>
	<20101005203756.GA12291@khaled-laptop>
	<AANLkTimwnuo_y_EOOYc_6nFswptyH-NJixnUkdPaJOx2@mail.gmail.com>
	<20101005220553.GA13319@khaled-laptop>
Message-ID: <AANLkTik4gJXLmPnjE161T8OGoXsexkwqu=Gg++7DsoRS@mail.gmail.com>

> There must be some other case for the issue you have, and without a
> minimal example one can hardly tell.

This example,

  \documentclass{article}
  \usepackage{unicode-math}
  \setmathfont[range=\mathbfsfit/{greek,Greek}]{AFontWithGreekGlyphs}
  \begin{document}
  \[
    d \beta = \omega
  \]
  \end{document}

produces a PDF without \beta and \gamma.

From khaledhosny at eglug.org  Wed Oct  6 00:25:27 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 6 Oct 2010 00:25:27 +0200
Subject: [luatex] Use Math Glyphs from Text Font
In-Reply-To: <AANLkTik4gJXLmPnjE161T8OGoXsexkwqu=Gg++7DsoRS@mail.gmail.com>
References: <AANLkTin3gT5gSmHOrx8ZKL9hr+7mLVxRui44c2xdHv5o@mail.gmail.com>
	<20101005203756.GA12291@khaled-laptop>
	<AANLkTimwnuo_y_EOOYc_6nFswptyH-NJixnUkdPaJOx2@mail.gmail.com>
	<20101005220553.GA13319@khaled-laptop>
	<AANLkTik4gJXLmPnjE161T8OGoXsexkwqu=Gg++7DsoRS@mail.gmail.com>
Message-ID: <20101005222527.GA14625@khaled-laptop>

On Wed, Oct 06, 2010 at 12:16:05AM +0200, C. Comren wrote:
> > There must be some other case for the issue you have, and without a
> > minimal example one can hardly tell.
> 
> This example,
> 
>   \documentclass{article}
>   \usepackage{unicode-math}
>   \setmathfont[range=\mathbfsfit/{greek,Greek}]{AFontWithGreekGlyphs}
>   \begin{document}
>   \[
>     d \beta = \omega
>   \]
>   \end{document}
> 
> produces a PDF without \beta and \gamma.

Because you are not using any math bold sans serif in your example
(which what \mathbfsfit is for), it should be \mathit instead.

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From ccomren at gmail.com  Wed Oct  6 10:22:02 2010
From: ccomren at gmail.com (C. Comren)
Date: Wed, 6 Oct 2010 10:22:02 +0200
Subject: [luatex] Use Math Glyphs from Text Font
In-Reply-To: <20101005222527.GA14625@khaled-laptop>
References: <AANLkTin3gT5gSmHOrx8ZKL9hr+7mLVxRui44c2xdHv5o@mail.gmail.com>
	<20101005203756.GA12291@khaled-laptop>
	<AANLkTimwnuo_y_EOOYc_6nFswptyH-NJixnUkdPaJOx2@mail.gmail.com>
	<20101005220553.GA13319@khaled-laptop>
	<AANLkTik4gJXLmPnjE161T8OGoXsexkwqu=Gg++7DsoRS@mail.gmail.com>
	<20101005222527.GA14625@khaled-laptop>
Message-ID: <AANLkTimEWdBotZDuqMpLQ10gA5XNj+nMpq43Gvxw6xd2@mail.gmail.com>

> Because you are not using any math bold sans serif in your example
> (which what \mathbfsfit is for), it should be \mathit instead.

Thanks. With \mathit the Greek letters appear. However, if I modify
the displayed math to

\[
    \int \operatorname{vol} = \lambda
\]

the integral does not appear and "vol" is not set in roman, but italic.

From lomov.vl at gmail.com  Fri Oct  8 09:10:35 2010
From: lomov.vl at gmail.com (Vladimir Lomov)
Date: Fri, 8 Oct 2010 16:10:35 +0900
Subject: [luatex] Hyphenation in plain TeX
Message-ID: <20101008071035.GE17803@smoon>

Hi.

Could someone tell how to make hyphenation work in plain LuaTeX?

I tried something like that

<code>
\input luaotfload.sty

\font\test={file:cmunrm.otf}
\input loadhyph-de-1996.tex

\input <text on German>

\bye
</code>

but that doesn't work more over compilation stops on "Duplicated
pattern" (or something like that, I could rephase correctly if this one
want).

P.S. I tried with French as well I got the same error message but for
Russian I didn't. Well no hyphenation in either case.

---
WBR, Vladimir Lomov

-- 
I have never understood this liking for war.  It panders to instincts
already catered for within the scope of any respectable domestic establishment.
		-- Alan Bennett

From taco at elvenkind.com  Fri Oct  8 09:15:54 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 08 Oct 2010 09:15:54 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008071035.GE17803@smoon>
References: <20101008071035.GE17803@smoon>
Message-ID: <4CAEC52A.2050505@elvenkind.com>

On 10/08/2010 09:10 AM, Vladimir Lomov wrote:
> Hi.
>
> Could someone tell how to make hyphenation work in plain LuaTeX?

At the lowest level, you have to switch \language before loading the
patterns. But (question for someone else) I thought luatex-plain has a
builtin facility for loading multiple patterns ?

Best wishes,
Taco

From zappathustra at free.fr  Fri Oct  8 09:31:26 2010
From: zappathustra at free.fr (Paul Isambert)
Date: Fri, 08 Oct 2010 09:31:26 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <4CAEC52A.2050505@elvenkind.com>
References: <20101008071035.GE17803@smoon> <4CAEC52A.2050505@elvenkind.com>
Message-ID: <4CAEC8CE.4060609@free.fr>

  Le 08/10/2010 09:15, Taco Hoekwater a ?crit :
> On 10/08/2010 09:10 AM, Vladimir Lomov wrote:
>> Hi.
>>
>> Could someone tell how to make hyphenation work in plain LuaTeX?
>
> At the lowest level, you have to switch \language before loading the
> patterns. But (question for someone else) I thought luatex-plain has a
> builtin facility for loading multiple patterns ?

In TeXLive at least, comparing the files \input in luatex.ini and 
pdftex.ini doesn't reveal any difference with respect to that. Actually 
LuaTeX loads etex.src and plain.tex, like pdfTeX, and differences 
elsewhere seem immaterial. I can't find any LuaTeX-specific version of 
plain.

Best,
Paul

From mojca.miklavec.lists at gmail.com  Fri Oct  8 09:33:52 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 8 Oct 2010 09:33:52 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008071035.GE17803@smoon>
References: <20101008071035.GE17803@smoon>
Message-ID: <AANLkTikq5OJiOgRuYbhxm3zet9Pdrf4O36iY5ogM4oG0@mail.gmail.com>

On Fri, Oct 8, 2010 at 09:10, Vladimir Lomov wrote:
> Hi.
>
> Could someone tell how to make hyphenation work in plain LuaTeX?
>
> I tried something like that
>
> <code>
> \input luaotfload.sty
>
> \font\test={file:cmunrm.otf}
> \input loadhyph-de-1996.tex

In theory the following is supposed to select a language in plain TeX:
    \uselanguage{ngerman}
but I don't even know how to change the default font in plain LuaTeX,
so I'm not sure how to test it.

> \input <text on German>
>
> \bye
> </code>

> P.S. I tried with French as well I got the same error message but for
> Russian I didn't. Well no hyphenation in either case.

To hyphenate Russian, one would need to fix something in
luatex/lualatex formats first.

Mojca

From luigi.scarso at gmail.com  Fri Oct  8 09:36:51 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Fri, 8 Oct 2010 09:36:51 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <4CAEC8CE.4060609@free.fr>
References: <20101008071035.GE17803@smoon> <4CAEC52A.2050505@elvenkind.com>
 <4CAEC8CE.4060609@free.fr>
Message-ID: <AANLkTimPFsH+ca6yyOixqsJLBagAEnLfRXFVGqM69z6u@mail.gmail.com>

On Fri, Oct 8, 2010 at 9:31 AM, Paul Isambert <zappathustra at free.fr> wrote:
> ?Le 08/10/2010 09:15, Taco Hoekwater a ?crit :
>>
>> On 10/08/2010 09:10 AM, Vladimir Lomov wrote:
>>>
>>> Hi.
>>>
>>> Could someone tell how to make hyphenation work in plain LuaTeX?
>>
>> At the lowest level, you have to switch \language before loading the
>> patterns. But (question for someone else) I thought luatex-plain has a
>> builtin facility for loading multiple patterns ?
>
> In TeXLive at least, comparing the files \input in luatex.ini and pdftex.ini
> doesn't reveal any difference with respect to that. Actually LuaTeX loads
> etex.src and plain.tex, like pdfTeX, and differences elsewhere seem
> immaterial. I can't find any LuaTeX-specific version of plain.
>
> Best,
> Paul
>
You can also see the minimals in
tex/texmf-context/tex/generic/context

-- 
luigi


From mojca.miklavec.lists at gmail.com  Fri Oct  8 09:47:02 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 8 Oct 2010 09:47:02 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <4CAEC8CE.4060609@free.fr>
References: <20101008071035.GE17803@smoon> <4CAEC52A.2050505@elvenkind.com>
 <4CAEC8CE.4060609@free.fr>
Message-ID: <AANLkTimbT6Tqyu+ysFxcF+yO7uv_yuiTOvqoBoqQRCaH@mail.gmail.com>

On Fri, Oct 8, 2010 at 09:31, Paul Isambert wrote:
>
> In TeXLive at least, comparing the files \input in luatex.ini and pdftex.ini
> doesn't reveal any difference with respect to that. Actually LuaTeX loads
> etex.src and plain.tex, like pdfTeX, and differences elsewhere seem
> immaterial. I can't find any LuaTeX-specific version of plain.

There is a modified version of etex.src and hyphen.cfg in
tex/luatex/hyph-utf8. (But I won't pretend that I understand it ...)

The modification has been done by ?lie Roux, Manuel P?gouri?-Gonnard
and Khaled Hosny.

Mojca


From lomov.vl at gmail.com  Fri Oct  8 09:57:14 2010
From: lomov.vl at gmail.com (Vladimir Lomov)
Date: Fri, 8 Oct 2010 16:57:14 +0900
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <AANLkTimPFsH+ca6yyOixqsJLBagAEnLfRXFVGqM69z6u@mail.gmail.com>
References: <20101008071035.GE17803@smoon> <4CAEC52A.2050505@elvenkind.com>
 <4CAEC8CE.4060609@free.fr>
 <AANLkTimPFsH+ca6yyOixqsJLBagAEnLfRXFVGqM69z6u@mail.gmail.com>
Message-ID: <20101008075714.GF17803@smoon>

Hi luigi!

** luigi scarso [2010-10-08 09:36:51 +0200]:

> On Fri, Oct 8, 2010 at 9:31 AM, Paul Isambert <zappathustra at free.fr> wrote:
>> ?Le 08/10/2010 09:15, Taco Hoekwater a ?crit :
>>>
>>> On 10/08/2010 09:10 AM, Vladimir Lomov wrote:
>>>>
>>>> Hi.
>>>>
>>>> Could someone tell how to make hyphenation work in plain LuaTeX?
[...]
> You can also see the minimals in
> tex/texmf-context/tex/generic/context
I just tried but this not helped me. I won't pretend I understand context
or plain TeX though I know much more (compare to them) about LaTeX.

-- 
#define NULL 0           /* silly thing is, we don't even use this */
             -- Larry Wall in perl.c from the perl source code

From zappathustra at free.fr  Fri Oct  8 10:00:10 2010
From: zappathustra at free.fr (Paul Isambert)
Date: Fri, 08 Oct 2010 10:00:10 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <AANLkTimbT6Tqyu+ysFxcF+yO7uv_yuiTOvqoBoqQRCaH@mail.gmail.com>
References: <20101008071035.GE17803@smoon> <4CAEC52A.2050505@elvenkind.com>
 <4CAEC8CE.4060609@free.fr>
 <AANLkTimbT6Tqyu+ysFxcF+yO7uv_yuiTOvqoBoqQRCaH@mail.gmail.com>
Message-ID: <4CAECF8A.50905@free.fr>

  Le 08/10/2010 09:47, Mojca Miklavec a ?crit :
> On Fri, Oct 8, 2010 at 09:31, Paul Isambert wrote:
>> In TeXLive at least, comparing the files \input in luatex.ini and pdftex.ini
>> doesn't reveal any difference with respect to that. Actually LuaTeX loads
>> etex.src and plain.tex, like pdfTeX, and differences elsewhere seem
>> immaterial. I can't find any LuaTeX-specific version of plain.
> There is a modified version of etex.src and hyphen.cfg in
> tex/luatex/hyph-utf8. (But I won't pretend that I understand it ...)
>
> The modification has been done by ?lie Roux, Manuel P?gouri?-Gonnard
> and Khaled Hosny.

This file is indeed loaded instead of the original etex.src when 
building a format. And there's an \addlanguage macro defined in it. So, 
I was wrong, and Taco's question must be answered positively.

Now ?lie, Manuel or Khaled, or all of them in chorus, should tell the 
world: how do you use \addlanguage?

Best,
Paul

From lomov.vl at gmail.com  Fri Oct  8 10:03:55 2010
From: lomov.vl at gmail.com (Vladimir Lomov)
Date: Fri, 8 Oct 2010 17:03:55 +0900
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <AANLkTikq5OJiOgRuYbhxm3zet9Pdrf4O36iY5ogM4oG0@mail.gmail.com>
References: <20101008071035.GE17803@smoon>
 <AANLkTikq5OJiOgRuYbhxm3zet9Pdrf4O36iY5ogM4oG0@mail.gmail.com>
Message-ID: <20101008080355.GG17803@smoon>

Hi Mojca!

** Mojca Miklavec [2010-10-08 09:33:52 +0200]:

> On Fri, Oct 8, 2010 at 09:10, Vladimir Lomov wrote:
>> Hi.
>>
>> Could someone tell how to make hyphenation work in plain LuaTeX?
>>
>> I tried something like that
>>
>> <code>
>> \input luaotfload.sty
>>
>> \font\test={file:cmunrm.otf}
>> \input loadhyph-de-1996.tex
> 
> In theory the following is supposed to select a language in plain TeX:
>     \uselanguage{ngerman}
> but I don't even know how to change the default font in plain LuaTeX,
> so I'm not sure how to test it.
Your knowledge about the theory is correct :)
Yes now I able to make luatex hyphenate the German and French text
(though my test text on German is hyphenated not perfectly but this is a
test). Below my complete example now:
<code>
\input luaotfload.sty
\font\test={file:cmunrm.otf}
\uselanguage{ngerman}
\test
\input sample_de.txt
\bye
</code>
>> \input <text on German>
>>
>> \bye
>> </code>
> 
>> P.S. I tried with French as well I got the same error message but for
>> Russian I didn't. Well no hyphenation in either case.
> 
> To hyphenate Russian, one would need to fix something in
> luatex/lualatex formats first.
Hm, could you explain a little what the problem is? With font encodings?
After all, these languages are work fine in context (actually mkiv).

P.S. Earlier I posted two question about hyphenation on lualatex-dev
list but without response, so I decide to investigate the problem from
lower level.

---
WBR, Vladimir Lomov

-- 
Good morning.  This is the telephone company.  Due to repairs, we're
giving you advance notice that your service will be cut off indefinitely
at ten o'clock.  That's two minutes from now.

From luigi.scarso at gmail.com  Fri Oct  8 10:07:26 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Fri, 8 Oct 2010 10:07:26 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008075714.GF17803@smoon>
References: <20101008071035.GE17803@smoon> <4CAEC52A.2050505@elvenkind.com>
 <4CAEC8CE.4060609@free.fr>
 <AANLkTimPFsH+ca6yyOixqsJLBagAEnLfRXFVGqM69z6u@mail.gmail.com>
 <20101008075714.GF17803@smoon>
Message-ID: <AANLkTin9fb0bksN1dVoQanDh3KKUGr0iO70uZn7WPvBn@mail.gmail.com>

On Fri, Oct 8, 2010 at 9:57 AM, Vladimir Lomov <lomov.vl at gmail.com> wrote:
> Hi luigi!
>
> ** luigi scarso [2010-10-08 09:36:51 +0200]:
>
>> On Fri, Oct 8, 2010 at 9:31 AM, Paul Isambert <zappathustra at free.fr> wrote:
>>> ?Le 08/10/2010 09:15, Taco Hoekwater a ?crit :
>>>>
>>>> On 10/08/2010 09:10 AM, Vladimir Lomov wrote:
>>>>>
>>>>> Hi.
>>>>>
>>>>> Could someone tell how to make hyphenation work in plain LuaTeX?
> [...]
>> You can also see the minimals in
>> tex/texmf-context/tex/generic/context
> I just tried but this not helped me. I won't pretend I understand context
> or plain TeX though I know much more (compare to them) about LaTeX.
Thank you for testing anyway;I have seen your example on another email.
The luatex in minimals takes files only from minimals, so  I must
check  in there.



-- 
luigi


From lomov.vl at gmail.com  Fri Oct  8 10:10:42 2010
From: lomov.vl at gmail.com (Vladimir Lomov)
Date: Fri, 8 Oct 2010 17:10:42 +0900
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <4CAECF8A.50905@free.fr>
References: <20101008071035.GE17803@smoon> <4CAEC52A.2050505@elvenkind.com>
 <4CAEC8CE.4060609@free.fr>
 <AANLkTimbT6Tqyu+ysFxcF+yO7uv_yuiTOvqoBoqQRCaH@mail.gmail.com>
 <4CAECF8A.50905@free.fr>
Message-ID: <20101008081042.GH17803@smoon>

Hi.
** Paul Isambert [2010-10-08 10:00:10 +0200]:

>  Le 08/10/2010 09:47, Mojca Miklavec a ?crit :
>>On Fri, Oct 8, 2010 at 09:31, Paul Isambert wrote:
>>>In TeXLive at least, comparing the files \input in luatex.ini and pdftex.ini
>>>doesn't reveal any difference with respect to that. Actually LuaTeX loads
>>>etex.src and plain.tex, like pdfTeX, and differences elsewhere seem
>>>immaterial. I can't find any LuaTeX-specific version of plain.
>>There is a modified version of etex.src and hyphen.cfg in
>>tex/luatex/hyph-utf8. (But I won't pretend that I understand it ...)
>>
>>The modification has been done by ?lie Roux, Manuel P?gouri?-Gonnard
>>and Khaled Hosny.
> 
> This file is indeed loaded instead of the original etex.src when
> building a format. And there's an \addlanguage macro defined in it.
> So, I was wrong, and Taco's question must be answered positively.
> 
> Now ?lie, Manuel or Khaled, or all of them in chorus, should tell
> the world: how do you use \addlanguage?
Wild guess: for pdftex/xetex this command is used only at time of format
build and used to add languages to format file. While, AFAIK, luatex
could load patterns at runtime (in contrast to pdftex/xetex) it reads
this file at runtime and do all stuff that pdftex/xetex do at format
generation time.

---
WBR, Vladimir Lomov

-- 
Is uniformity attainable?  Millions of innocent men, women, and
children, since the introduction of Christianity, have been burnt,
tortured, fined, imprisoned; yet we have not advanced one inch towards
uniformity.  What has been the effect of coercion?  To make one half
of the world fools, and the other half hypocrites.
		-- Thomas Jefferson

From khaledhosny at eglug.org  Fri Oct  8 10:13:56 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 8 Oct 2010 10:13:56 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <4CAEC8CE.4060609@free.fr>
References: <20101008071035.GE17803@smoon> <4CAEC52A.2050505@elvenkind.com>
 <4CAEC8CE.4060609@free.fr>
Message-ID: <20101008081356.GA3176@khaled-laptop>

On Fri, Oct 08, 2010 at 09:31:26AM +0200, Paul Isambert wrote:
>  Le 08/10/2010 09:15, Taco Hoekwater a ?crit :
> >On 10/08/2010 09:10 AM, Vladimir Lomov wrote:
> >>Hi.
> >>
> >>Could someone tell how to make hyphenation work in plain LuaTeX?
> >
> >At the lowest level, you have to switch \language before loading the
> >patterns. But (question for someone else) I thought luatex-plain has a
> >builtin facility for loading multiple patterns ?
> 
> In TeXLive at least, comparing the files \input in luatex.ini and
> pdftex.ini doesn't reveal any difference with respect to that.
> Actually LuaTeX loads etex.src and plain.tex, like pdfTeX, and
> differences elsewhere seem immaterial. I can't find any
> LuaTeX-specific version of plain.

The difference is in the etex.src itself, it have been adapted to load
patterns on demand, at user level there should be no difference, you
just switch the language as usual with plain TeX (which I don't know).

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From khaledhosny at eglug.org  Fri Oct  8 10:21:17 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 8 Oct 2010 10:21:17 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008080355.GG17803@smoon>
References: <20101008071035.GE17803@smoon>
 <AANLkTikq5OJiOgRuYbhxm3zet9Pdrf4O36iY5ogM4oG0@mail.gmail.com>
 <20101008080355.GG17803@smoon>
Message-ID: <20101008082117.GB3176@khaled-laptop>

On Fri, Oct 08, 2010 at 05:03:55PM +0900, Vladimir Lomov wrote:
> Hi Mojca!
> 
> ** Mojca Miklavec [2010-10-08 09:33:52 +0200]:
> 
> > On Fri, Oct 8, 2010 at 09:10, Vladimir Lomov wrote:
> >> Hi.
> >>
> >> Could someone tell how to make hyphenation work in plain LuaTeX?
> >>
> >> I tried something like that
> >>
> >> <code>
> >> \input luaotfload.sty
> >>
> >> \font\test={file:cmunrm.otf}
> >> \input loadhyph-de-1996.tex
> > 
> > In theory the following is supposed to select a language in plain TeX:
> >     \uselanguage{ngerman}
> > but I don't even know how to change the default font in plain LuaTeX,
> > so I'm not sure how to test it.
> Your knowledge about the theory is correct :)
> Yes now I able to make luatex hyphenate the German and French text
> (though my test text on German is hyphenated not perfectly but this is a
> test). Below my complete example now:
> <code>
> \input luaotfload.sty
> \font\test={file:cmunrm.otf}
> \uselanguage{ngerman}
> \test
> \input sample_de.txt
> \bye
> </code>
> >> \input <text on German>
> >>
> >> \bye
> >> </code>
> > 
> >> P.S. I tried with French as well I got the same error message but for
> >> Russian I didn't. Well no hyphenation in either case.
> > 
> > To hyphenate Russian, one would need to fix something in
> > luatex/lualatex formats first.
> Hm, could you explain a little what the problem is? With font encodings?
> After all, these languages are work fine in context (actually mkiv).

The \uccode/\lccode is not set for anything but ASCII (or whatever TeX
engine internally have), XeTeX sets it for the entire Unicode charset
in the format, but we don't yet for LuaTeX, so any hyphenation requiring
characters outside ASCII will not work out of box (or at least this is
my understanding).

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From taco at elvenkind.com  Fri Oct  8 10:24:32 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 08 Oct 2010 10:24:32 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008082117.GB3176@khaled-laptop>
References: <20101008071035.GE17803@smoon>
 <AANLkTikq5OJiOgRuYbhxm3zet9Pdrf4O36iY5ogM4oG0@mail.gmail.com>
 <20101008080355.GG17803@smoon> <20101008082117.GB3176@khaled-laptop>
Message-ID: <4CAED540.3080805@elvenkind.com>

On 10/08/2010 10:21 AM, Khaled Hosny wrote:
>
> The \uccode/\lccode is not set for anything but ASCII (or whatever TeX
> engine internally have), XeTeX sets it for the entire Unicode charset
> in the format, but we don't yet for LuaTeX,

Just so nobody gets confused about what XeTeX does that LuaTeX does
not: it is not *xetex* that sets the \lccode/\uccode values, it is
the xetex macro packages that do so. XeTeX itself does not do anything
more than LuaTeX does.

Best wishes,
Taco

From khaledhosny at eglug.org  Fri Oct  8 10:29:29 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 8 Oct 2010 10:29:29 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <AANLkTimbT6Tqyu+ysFxcF+yO7uv_yuiTOvqoBoqQRCaH@mail.gmail.com>
References: <20101008071035.GE17803@smoon> <4CAEC52A.2050505@elvenkind.com>
 <4CAEC8CE.4060609@free.fr>
 <AANLkTimbT6Tqyu+ysFxcF+yO7uv_yuiTOvqoBoqQRCaH@mail.gmail.com>
Message-ID: <20101008082929.GC3176@khaled-laptop>

On Fri, Oct 08, 2010 at 09:47:02AM +0200, Mojca Miklavec wrote:
> On Fri, Oct 8, 2010 at 09:31, Paul Isambert wrote:
> >
> > In TeXLive at least, comparing the files \input in luatex.ini and pdftex.ini
> > doesn't reveal any difference with respect to that. Actually LuaTeX loads
> > etex.src and plain.tex, like pdfTeX, and differences elsewhere seem
> > immaterial. I can't find any LuaTeX-specific version of plain.
> 
> There is a modified version of etex.src and hyphen.cfg in
> tex/luatex/hyph-utf8. (But I won't pretend that I understand it ...)
> 
> The modification has been done by ?lie Roux, Manuel P?gouri?-Gonnard
> and Khaled Hosny.

Actually ?lie and Manuel did all the work, and I think Manuel is the
best to be asked about this.

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From lomov.vl at gmail.com  Fri Oct  8 10:49:15 2010
From: lomov.vl at gmail.com (Vladimir Lomov)
Date: Fri, 8 Oct 2010 17:49:15 +0900
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008082117.GB3176@khaled-laptop>
References: <20101008071035.GE17803@smoon>
 <AANLkTikq5OJiOgRuYbhxm3zet9Pdrf4O36iY5ogM4oG0@mail.gmail.com>
 <20101008080355.GG17803@smoon>
 <20101008082117.GB3176@khaled-laptop>
Message-ID: <20101008084915.GI17803@smoon>

Hi Khaled.
** Khaled Hosny [2010-10-08 10:21:17 +0200]:

> On Fri, Oct 08, 2010 at 05:03:55PM +0900, Vladimir Lomov wrote:
[...]
>>>> P.S. I tried with French as well I got the same error message but for
>>>> Russian I didn't. Well no hyphenation in either case.
>>> 
>>> To hyphenate Russian, one would need to fix something in
>>> luatex/lualatex formats first.
>> Hm, could you explain a little what the problem is? With font encodings?
>> After all, these languages are work fine in context (actually mkiv).
> 
> The \uccode/\lccode is not set for anything but ASCII (or whatever TeX
> engine internally have), XeTeX sets it for the entire Unicode charset
> in the format, but we don't yet for LuaTeX, so any hyphenation requiring
> characters outside ASCII will not work out of box (or at least this is
> my understanding).
AFAIK, ASCII is 7-bit encoding so neither German nor French don't fir
into ASCII.

---
WBR, Vladimir Lomov

-- 
The energy produced by the breaking down of the atom is a very poor kind
of thing.  Anyone who expects a source of power from the transformation
of these atoms is talking moonshine.
		-- Ernest Rutherford, after he had split the atom for
		   the first time

From mojca.miklavec.lists at gmail.com  Fri Oct  8 10:51:02 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 8 Oct 2010 10:51:02 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008082117.GB3176@khaled-laptop>
References: <20101008071035.GE17803@smoon>
 <AANLkTikq5OJiOgRuYbhxm3zet9Pdrf4O36iY5ogM4oG0@mail.gmail.com>
 <20101008080355.GG17803@smoon>
 <20101008082117.GB3176@khaled-laptop>
Message-ID: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>

On Fri, Oct 8, 2010 at 10:21, Khaled Hosny wrote:
> On Fri, Oct 08, 2010 at 05:03:55PM +0900, Vladimir Lomov wrote:
>> Hi Mojca!
>>
>> > To hyphenate Russian, one would need to fix something in
>> > luatex/lualatex formats first.
>> Hm, could you explain a little what the problem is? With font encodings?
>> After all, these languages are work fine in context (actually mkiv).
>
> The \uccode/\lccode is not set for anything but ASCII (or whatever TeX
> engine internally have), XeTeX sets it for the entire Unicode charset
> in the format, but we don't yet for LuaTeX, so any hyphenation requiring
> characters outside ASCII will not work out of box (or at least this is
> my understanding).

Just to give an example ...

In some loaders we have (the example is taken from Sanskrit):

    % Set \lccode for ZWNJ and ZWJ.
    \lccode"200C="200C
    \lccode"200D="200D
    % Set \lccode for KANNADA SIGN JIHVAMULIYA and KANNADA SIGN UPADHMANIYA.
    \lccode"0CF1="0CF1
    \lccode"0CF2="0CF2

Alternatively you can also write characters instead of hexadecimal
numbers. For example, for German you do need:

	\lccode`?=`?
	\lccode`?=`?
	\lccode`?=`?
	\lccode`?=`?
	\lccode`?=`?
	\lccode`?=`?
	\lccode`?=`?

but it probably still hyphenates somehow without those. If you want to
hyphenate russian, you need to provide \lccode command for every
letter of Russian alphabet, both for uppercase and lowercase letters
(they need to point to lowercase).

This should be fixed in format one day though, but if you want to use
it now, this is what you need to do ...

Mojca


From mojca.miklavec.lists at gmail.com  Fri Oct  8 10:54:42 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 8 Oct 2010 10:54:42 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008084915.GI17803@smoon>
References: <20101008071035.GE17803@smoon>
 <AANLkTikq5OJiOgRuYbhxm3zet9Pdrf4O36iY5ogM4oG0@mail.gmail.com>
 <20101008080355.GG17803@smoon>
 <20101008082117.GB3176@khaled-laptop>
 <20101008084915.GI17803@smoon>
Message-ID: <AANLkTin34Nn0+v3m0O2NbJH1DtMBfO9RNUo0T7vCw5Uz@mail.gmail.com>

On Fri, Oct 8, 2010 at 10:49, Vladimir Lomov wrote:
> ** Khaled Hosny [2010-10-08 10:21:17 +0200]:
>
>> The \uccode/\lccode is not set for anything but ASCII (or whatever TeX
>> engine internally have), XeTeX sets it for the entire Unicode charset
>> in the format, but we don't yet for LuaTeX, so any hyphenation requiring
>> characters outside ASCII will not work out of box (or at least this is
>> my understanding).
> AFAIK, ASCII is 7-bit encoding so neither German nor French don't fir
> into ASCII.

Sure, but in German or French it's only "every tenth" letter that is
problematic, so TeX will still hyphenate somewhere using the remaining
nine ascii ones. It will definitely miss many allowed hyphenations,
but it will still look OK. While in Russian it is every single letter
that lacks lccode setting, so you won't get any hyphenation at all
unless you set those codes.

Mojca

From lomov.vl at gmail.com  Fri Oct  8 10:56:47 2010
From: lomov.vl at gmail.com (Vladimir Lomov)
Date: Fri, 8 Oct 2010 17:56:47 +0900
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <4CAED540.3080805@elvenkind.com>
References: <20101008071035.GE17803@smoon>
 <AANLkTikq5OJiOgRuYbhxm3zet9Pdrf4O36iY5ogM4oG0@mail.gmail.com>
 <20101008080355.GG17803@smoon>
 <20101008082117.GB3176@khaled-laptop>
 <4CAED540.3080805@elvenkind.com>
Message-ID: <20101008085647.GJ17803@smoon>

Hi Taco.
** Taco Hoekwater [2010-10-08 10:24:32 +0200]:

> On 10/08/2010 10:21 AM, Khaled Hosny wrote:
>>
>>The \uccode/\lccode is not set for anything but ASCII (or whatever TeX
>>engine internally have), XeTeX sets it for the entire Unicode charset
>>in the format, but we don't yet for LuaTeX,
> 
> Just so nobody gets confused about what XeTeX does that LuaTeX does
> not: it is not *xetex* that sets the \lccode/\uccode values, it is
> the xetex macro packages that do so. XeTeX itself does not do anything
> more than LuaTeX does.
Then I get confused! I made three example (German, French and Russian)
with the same font, small example I already shown.

Now I run them through xetex (with slight changes in files because of
luaotfload use). All works fine (with plain xetex). So I miss something:
why the same file with Russian works with xetex while with luatex
doesn't? I'm asking because want to fix that situation.

Example for xetex
<code>
%\input luaotfload.sty

%\font\test={file:cmunrm.otf} at 12 pt
\font\test=[cmunrm.otf] at 12 pt
\uselanguage{ngerman} %%% also: french and russian
\test
\input sample_de.txt %%% also: sample_fr.txt and sample_ru.txt
\bye
</code>

(As you anyone can see I don't use any packages).

P.S. Both xetex and luatex gives bad hyphenation at the same words at
the same points on my test file. I think this is good indication.

---
WBR, Vladimir Lomov

-- 
  The scene is dull. Tell him to put more life into his dying.
  -Samuel Goldwyn

From lomov.vl at gmail.com  Fri Oct  8 11:01:22 2010
From: lomov.vl at gmail.com (Vladimir Lomov)
Date: Fri, 8 Oct 2010 18:01:22 +0900
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <AANLkTin34Nn0+v3m0O2NbJH1DtMBfO9RNUo0T7vCw5Uz@mail.gmail.com>
References: <20101008071035.GE17803@smoon>
 <AANLkTikq5OJiOgRuYbhxm3zet9Pdrf4O36iY5ogM4oG0@mail.gmail.com>
 <20101008080355.GG17803@smoon>
 <20101008082117.GB3176@khaled-laptop>
 <20101008084915.GI17803@smoon>
 <AANLkTin34Nn0+v3m0O2NbJH1DtMBfO9RNUo0T7vCw5Uz@mail.gmail.com>
Message-ID: <20101008090122.GK17803@smoon>

Hi Mojca.
** Mojca Miklavec [2010-10-08 10:54:42 +0200]:

> On Fri, Oct 8, 2010 at 10:49, Vladimir Lomov wrote:
>> ** Khaled Hosny [2010-10-08 10:21:17 +0200]:
>>
>>> The \uccode/\lccode is not set for anything but ASCII (or whatever TeX
>>> engine internally have), XeTeX sets it for the entire Unicode charset
>>> in the format, but we don't yet for LuaTeX, so any hyphenation requiring
>>> characters outside ASCII will not work out of box (or at least this is
>>> my understanding).
>> AFAIK, ASCII is 7-bit encoding so neither German nor French don't fir
>> into ASCII.
> 
> Sure, but in German or French it's only "every tenth" letter that is
> problematic, so TeX will still hyphenate somewhere using the remaining
> nine ascii ones. It will definitely miss many allowed hyphenations,
> but it will still look OK. While in Russian it is every single letter
> that lacks lccode setting, so you won't get any hyphenation at all
> unless you set those codes.
Yeh, seems I get it. I'll try to check how some French or German  words
are hyphenated but I think you're right. So know I need the whole
\lccode lines (I read you other message). Ok, I'll try and report about
results.

---
WBR, Vladimir Lomov


-- 
Double Bucky, you're the one,
You make my keyboard so much fun,
Double Bucky, an additional bit or two, (Vo-vo-de-o)
Control and meta, side by side,
Augmented ASCII, 9 bits wide!
Double Bucky, a half a thousand glyphs, plus a few!

Oh, I sure wish that I,
Had a couple of bits more!
Perhaps a set of pedals to make the number of bits four.

Double Double Bucky!  Double Bucky left and right
OR'd together, outta sight!
Double Bucky, I'd like a whole word of,
Double Bucky, I'm happy I heard of,
Double Bucky, I'd like a whole word of you!
		-- to Nicholas Wirth, who suggested that an extra bit
		be added to terminal codes on 36-bit machines for use
		by screen editors.  [to the tune of "Rubber Ducky"]

From zappathustra at free.fr  Fri Oct  8 11:03:17 2010
From: zappathustra at free.fr (Paul Isambert)
Date: Fri, 08 Oct 2010 11:03:17 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008085647.GJ17803@smoon>
References: <20101008071035.GE17803@smoon>
 <AANLkTikq5OJiOgRuYbhxm3zet9Pdrf4O36iY5ogM4oG0@mail.gmail.com>
 <20101008080355.GG17803@smoon> <20101008082117.GB3176@khaled-laptop>
 <4CAED540.3080805@elvenkind.com> <20101008085647.GJ17803@smoon>
Message-ID: <4CAEDE55.4050801@free.fr>

  Le 08/10/2010 10:56, Vladimir Lomov a ?crit :
> Hi Taco.
> ** Taco Hoekwater [2010-10-08 10:24:32 +0200]:
>
>> On 10/08/2010 10:21 AM, Khaled Hosny wrote:
>>> The \uccode/\lccode is not set for anything but ASCII (or whatever TeX
>>> engine internally have), XeTeX sets it for the entire Unicode charset
>>> in the format, but we don't yet for LuaTeX,
>> Just so nobody gets confused about what XeTeX does that LuaTeX does
>> not: it is not *xetex* that sets the \lccode/\uccode values, it is
>> the xetex macro packages that do so. XeTeX itself does not do anything
>> more than LuaTeX does.
> Then I get confused! I made three example (German, French and Russian)
> with the same font, small example I already shown.
>
> Now I run them through xetex (with slight changes in files because of
> luaotfload use). All works fine (with plain xetex). So I miss something:
> why the same file with Russian works with xetex while with luatex
> doesn't? I'm asking because want to fix that situation.
>
> Example for xetex
> <code>
> %\input luaotfload.sty
>
> %\font\test={file:cmunrm.otf} at 12 pt
> \font\test=[cmunrm.otf] at 12 pt
> \uselanguage{ngerman} %%% also: french and russian
> \test
> \input sample_de.txt %%% also: sample_fr.txt and sample_ru.txt
> \bye
> </code>
>
> (As you anyone can see I don't use any packages).

Yes you are, also it's loaded when you can't see it (while dumping the 
format). Try \meaning\uselanguage and you'll see it's not a primitive 
(i.e. it has a definition).

Paul

From Robin.Fairbairns at cl.cam.ac.uk  Fri Oct  8 11:04:18 2010
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Fri, 08 Oct 2010 10:04:18 +0100
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: Your message of Fri, 08 Oct 2010 10:51:02 +0200.
 <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
Message-ID: <3569.1286528658@cl.cam.ac.uk>

Mojca Miklavec <mojca.miklavec.lists at gmail.com> wrote:

> On Fri, Oct 8, 2010 at 10:21, Khaled Hosny wrote:
> > On Fri, Oct 08, 2010 at 05:03:55PM +0900, Vladimir Lomov wrote:
> >> Hi Mojca!
> >>
> >> > To hyphenate Russian, one would need to fix something in
> >> > luatex/lualatex formats first.
> >> Hm, could you explain a little what the problem is? With font encodings?
> >> After all, these languages are work fine in context (actually mkiv).
> >
> > The \uccode/\lccode is not set for anything but ASCII (or whatever TeX
> > engine internally have), XeTeX sets it for the entire Unicode charset
> > in the format, but we don't yet for LuaTeX, so any hyphenation requiring
> > characters outside ASCII will not work out of box (or at least this is
> > my understanding).
> 
> Just to give an example ...
> 
> In some loaders we have (the example is taken from Sanskrit):
> 
>     % Set \lccode for ZWNJ and ZWJ.
>     \lccode"200C="200C
>     \lccode"200D="200D
>     % Set \lccode for KANNADA SIGN JIHVAMULIYA and KANNADA SIGN UPADHMANIYA.
>     \lccode"0CF1="0CF1
>     \lccode"0CF2="0CF2
> 
> Alternatively you can also write characters instead of hexadecimal
> numbers. For example, for German you do need:
> 
> 	\lccode`?=`?
> 	\lccode`?=`?
> 	\lccode`?=`?
> 	\lccode`?=`?
> 	\lccode`?=`?
> 	\lccode`?=`?
> 	\lccode`?=`?
> 
> but it probably still hyphenates somehow without those. If you want to
> hyphenate russian, you need to provide \lccode command for every
> letter of Russian alphabet, both for uppercase and lowercase letters
> (they need to point to lowercase).
> 
> This should be fixed in format one day though, but if you want to use
> it now, this is what you need to do ...

what should be fixed in the format?  lccode tables for all unicode
ranges covering alphabetic characters?  seems extreme: i would think it
more sensible to provide the tables in hyphenation files -- that way
there would be some chance that the tables were constributed by people
who know the language.

robin


From mojca.miklavec.lists at gmail.com  Fri Oct  8 11:21:32 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 8 Oct 2010 11:21:32 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <3569.1286528658@cl.cam.ac.uk>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
Message-ID: <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>

On Fri, Oct 8, 2010 at 11:04, Robin Fairbairns wrote:
> Mojca Miklavec wrote:
>
>> This should be fixed in format one day though, but if you want to use
>> it now, this is what you need to do ...
>
> what should be fixed in the format? ?lccode tables for all unicode
> ranges covering alphabetic characters?

Exactly.

> seems extreme:

Well, it's done by:
- plain XeTeX & XeLaTeX
  /usr/local/texlive/2010/texmf-dist/tex/generic/xetexconfig/unicode-letters.tex
- ConTeXt when using XeTeX
  /usr/local/texlive/2010/texmf-dist/tex/context/base/xetx-utf.mkii
- ConTeXt MKIV
  /usr/local/texlive/2010/texmf-dist/tex/context/base/char-def.lua

I don't know why it would be any more extreme to do it in plain LuaTeX format.

> i would think it
> more sensible to provide the tables in hyphenation files

Btw, there is
    /usr/local/texlive/2010/texmf-dist/tex/generic/hyph-utf8/patterns/txt/hyph-ru.chr.txt
but it is not used anywhere.

> that way
> there would be some chance that the tables were constributed by people
> who know the language.

Now imagine user A using both German and French patterns. When he
switches from German to French - should we switch all the German
lccodes for ??? back to undefined? If we don't, there's a chance that
the user will get different hyphenation for French (let's say that the
text contains a name with some German letters) depending on whether he
was typesetting a French-only or mixed language document.

Now imagine user B using some package that deals with Unicode and sets
all the lccodes for the whole Unicode range. If we do change the
lccodes back to undefined when switching from German to French, the
user will have all the letters for the whole Unicode range properly
defined, except for some umlauts which we modified without user's
consent.

I simply don't think that changing any codes inside hyphenation files
is the right thing to do. Yes, we can solve many users' problems
(simply hyphenation will work), but create many ugly new ones.

Mojca


From arthur.reutenauer at normalesup.org  Fri Oct  8 12:26:10 2010
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Fri, 8 Oct 2010 12:26:10 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <AANLkTin34Nn0+v3m0O2NbJH1DtMBfO9RNUo0T7vCw5Uz@mail.gmail.com>
References: <20101008071035.GE17803@smoon>
 <AANLkTikq5OJiOgRuYbhxm3zet9Pdrf4O36iY5ogM4oG0@mail.gmail.com>
 <20101008080355.GG17803@smoon> <20101008082117.GB3176@khaled-laptop>
 <20101008084915.GI17803@smoon>
 <AANLkTin34Nn0+v3m0O2NbJH1DtMBfO9RNUo0T7vCw5Uz@mail.gmail.com>
Message-ID: <20101008102610.GC17930@phare.normalesup.org>

> Sure, but in German or French it's only "every tenth" letter that is
> problematic, so TeX will still hyphenate somewhere using the remaining
> nine ascii ones. It will definitely miss many allowed hyphenations,
> but it will still look OK.

  Yes, that is the explanation.

	Arthur

From mpg at elzevir.fr  Fri Oct  8 12:54:36 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 08 Oct 2010 12:54:36 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <4CAEC52A.2050505@elvenkind.com>
References: <20101008071035.GE17803@smoon> <4CAEC52A.2050505@elvenkind.com>
Message-ID: <4CAEF86C.8080703@elzevir.fr>

Le 08/10/2010 09:15, Taco Hoekwater a ?crit :
> At the lowest level, you have to switch \language before loading the
> patterns. But (question for someone else) I thought luatex-plain has a
> builtin facility for loading multiple patterns ?
> 
Actually, (in TeX Live at least) every Plain format using any TeX engine execpt
the original TeX82 has such a builtin facility, provided by etex.src. It means
the following command:
- etex, pdfetex, pdftex,
- xetex,
- luatex, dviluatex.

>From the user point of view, everything works exactly the same way for all these
formats. There is no difference at all in the macros available at runtime, nor
in the result of executing them.

The only thing specific to luatex here is a few implementation details. The only
user-visible difference is that, since TL 2010, the loading time of the luatex
format is much shorter that it used to be in TL 2009.

To be clear, there is no user-level feature (as opposed to implementation
tweaks) specific to luatex regarding hyphenation right now, in Plain-based
format. Btw, this is also true for LaTeX-based formats.

Of course there are plans to change this in the future by providing user macros
allowing to take advantage of luatex dynamic pattern loading abilities in the
existing frameworks (etex.src for Plain-based formats, babel for LaTeX-based
formats).

Manuel.

From reinhard.kotucha at web.de  Fri Oct  8 12:59:45 2010
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Fri, 8 Oct 2010 12:59:45 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
Message-ID: <19630.63905.754482.707841@zaphod.ms25.net>

On 8 October 2010 Mojca Miklavec wrote:

 > Now imagine user A using both German and French patterns. When he
 > switches from German to French - should we switch all the German
 > lccodes for ??? back to undefined? If we don't, there's a chance that
 > the user will get different hyphenation for French (let's say that the
 > text contains a name with some German letters) depending on whether he
 > was typesetting a French-only or mixed language document.
 > 
 > Now imagine user B using some package that deals with Unicode and sets
 > all the lccodes for the whole Unicode range. If we do change the
 > lccodes back to undefined when switching from German to French, the
 > user will have all the letters for the whole Unicode range properly
 > defined, except for some umlauts which we modified without user's
 > consent.

Now imagine user C is writing in Vietnamese.  There are no patterns
for Vietnamese, but \uccode/\lccode values have to be set somewhere.

Regards,
  Reinhard
 
 > I simply don't think that changing any codes inside hyphenation files
 > is the right thing to do. Yes, we can solve many users' problems
 > (simply hyphenation will work), but create many ugly new ones.
 > 
 > Mojca

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From khaledhosny at eglug.org  Fri Oct  8 13:03:46 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 8 Oct 2010 13:03:46 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <19630.63905.754482.707841@zaphod.ms25.net>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <19630.63905.754482.707841@zaphod.ms25.net>
Message-ID: <20101008110346.GA3577@khaled-laptop>

On Fri, Oct 08, 2010 at 12:59:45PM +0200, Reinhard Kotucha wrote:
> On 8 October 2010 Mojca Miklavec wrote:
> 
>  > Now imagine user A using both German and French patterns. When he
>  > switches from German to French - should we switch all the German
>  > lccodes for ??? back to undefined? If we don't, there's a chance that
>  > the user will get different hyphenation for French (let's say that the
>  > text contains a name with some German letters) depending on whether he
>  > was typesetting a French-only or mixed language document.
>  > 
>  > Now imagine user B using some package that deals with Unicode and sets
>  > all the lccodes for the whole Unicode range. If we do change the
>  > lccodes back to undefined when switching from German to French, the
>  > user will have all the letters for the whole Unicode range properly
>  > defined, except for some umlauts which we modified without user's
>  > consent.
> 
> Now imagine user C is writing in Vietnamese.  There are no patterns
> for Vietnamese, but \uccode/\lccode values have to be set somewhere.

And how bad is that?

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From mpg at elzevir.fr  Fri Oct  8 13:04:09 2010
From: mpg at elzevir.fr (=?UTF-8?B?TWFudWVsIFDDqWdvdXJpw6ktR29ubmFyZA==?=)
Date: Fri, 08 Oct 2010 13:04:09 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <4CAECF8A.50905@free.fr>
References: <20101008071035.GE17803@smoon> <4CAEC52A.2050505@elvenkind.com>
 <4CAEC8CE.4060609@free.fr>
 <AANLkTimbT6Tqyu+ysFxcF+yO7uv_yuiTOvqoBoqQRCaH@mail.gmail.com>
 <4CAECF8A.50905@free.fr>
Message-ID: <4CAEFAA9.5040308@elzevir.fr>

Hi,

Le 08/10/2010 10:00, Paul Isambert a ?crit :
> Now ?lie, Manuel or Khaled, or all of them in chorus, should tell the 
> world: how do you use \addlanguage?
> 
Currently, you can't (except at format loading time). Actually, etex.src even
makes that CS undefined after it used it. (I assume it saves some memory.)

There is currently no support for dynamic handling of languages in Plain- and
LaTeX-based formats. What is there, however, is a re-implementation of part of
the existing frameworks (etex.src, babel) that happens to do a few things
dynamically. But the model for language definitions is still static.

Obviously, the dynamic parts in the current implementation are a good basis for
implementing future extensions to the language frameworks, but such support is
currently *not* available.

Manuel.

From reinhard.kotucha at web.de  Fri Oct  8 13:20:48 2010
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Fri, 8 Oct 2010 13:20:48 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008110346.GA3577@khaled-laptop>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <19630.63905.754482.707841@zaphod.ms25.net>
 <20101008110346.GA3577@khaled-laptop>
Message-ID: <19630.65168.815540.977189@zaphod.ms25.net>

On 8 October 2010 Khaled Hosny wrote:

 > On Fri, Oct 08, 2010 at 12:59:45PM +0200, Reinhard Kotucha wrote:
 > > On 8 October 2010 Mojca Miklavec wrote:
 > > 
 > >  > Now imagine user A using both German and French patterns. When he
 > >  > switches from German to French - should we switch all the German
 > >  > lccodes for ??? back to undefined? If we don't, there's a chance that
 > >  > the user will get different hyphenation for French (let's say that the
 > >  > text contains a name with some German letters) depending on whether he
 > >  > was typesetting a French-only or mixed language document.
 > >  > 
 > >  > Now imagine user B using some package that deals with Unicode and sets
 > >  > all the lccodes for the whole Unicode range. If we do change the
 > >  > lccodes back to undefined when switching from German to French, the
 > >  > user will have all the letters for the whole Unicode range properly
 > >  > defined, except for some umlauts which we modified without user's
 > >  > consent.
 > > 
 > > Now imagine user C is writing in Vietnamese.  There are no patterns
 > > for Vietnamese, but \uccode/\lccode values have to be set somewhere.
 > 
 > And how bad is that?

The absence of hyphenation patterns?  They are not needed because
words are very short.  And since words consist of single syllables,
there are no reasonable breakpoints.

Example:  H? tr? ti?ng Vi?t cho TeX.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From khaledhosny at eglug.org  Fri Oct  8 13:24:37 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 8 Oct 2010 13:24:37 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <19630.65168.815540.977189@zaphod.ms25.net>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <19630.63905.754482.707841@zaphod.ms25.net>
 <20101008110346.GA3577@khaled-laptop>
 <19630.65168.815540.977189@zaphod.ms25.net>
Message-ID: <20101008112437.GA3705@khaled-laptop>

On Fri, Oct 08, 2010 at 01:20:48PM +0200, Reinhard Kotucha wrote:
> On 8 October 2010 Khaled Hosny wrote:
> 
>  > On Fri, Oct 08, 2010 at 12:59:45PM +0200, Reinhard Kotucha wrote:
>  > > On 8 October 2010 Mojca Miklavec wrote:
>  > > 
>  > >  > Now imagine user A using both German and French patterns. When he
>  > >  > switches from German to French - should we switch all the German
>  > >  > lccodes for ??? back to undefined? If we don't, there's a chance that
>  > >  > the user will get different hyphenation for French (let's say that the
>  > >  > text contains a name with some German letters) depending on whether he
>  > >  > was typesetting a French-only or mixed language document.
>  > >  > 
>  > >  > Now imagine user B using some package that deals with Unicode and sets
>  > >  > all the lccodes for the whole Unicode range. If we do change the
>  > >  > lccodes back to undefined when switching from German to French, the
>  > >  > user will have all the letters for the whole Unicode range properly
>  > >  > defined, except for some umlauts which we modified without user's
>  > >  > consent.
>  > > 
>  > > Now imagine user C is writing in Vietnamese.  There are no patterns
>  > > for Vietnamese, but \uccode/\lccode values have to be set somewhere.
>  > 
>  > And how bad is that?
> 
> The absence of hyphenation patterns?

No, the \uccode/\lccode's without hyphenation patterns, should that be a
problem?

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From arthur.reutenauer at normalesup.org  Fri Oct  8 13:24:50 2010
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Fri, 8 Oct 2010 13:24:50 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <4CAEFAA9.5040308@elzevir.fr>
References: <20101008071035.GE17803@smoon> <4CAEC52A.2050505@elvenkind.com>
 <4CAEC8CE.4060609@free.fr>
 <AANLkTimbT6Tqyu+ysFxcF+yO7uv_yuiTOvqoBoqQRCaH@mail.gmail.com>
 <4CAECF8A.50905@free.fr> <4CAEFAA9.5040308@elzevir.fr>
Message-ID: <20101008112450.GA2032@phare.normalesup.org>

>                                                       Actually, etex.src even
> makes that CS undefined after it used it. (I assume it saves some memory.)

  If you mean that it saves some space in the format, I think not.  As
far as I know, every macro definition is dumped into the hash table
(even if the macro is later overwritten), and control sequence names are
dumped in the string pool (even multiple times if there are several
successive definitions).  Which means that you can have unaccessible
macro definitions in the format file, as well as several definitions for
some macro, even if of course only the last one would be accessible
(and, in the case of \undefined, none would be).

  Not that all of this *really* matters, of course :-)

	Arthur

From arthur.reutenauer at normalesup.org  Fri Oct  8 13:26:49 2010
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Fri, 8 Oct 2010 13:26:49 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <19630.65168.815540.977189@zaphod.ms25.net>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <19630.63905.754482.707841@zaphod.ms25.net>
 <20101008110346.GA3577@khaled-laptop>
 <19630.65168.815540.977189@zaphod.ms25.net>
Message-ID: <20101008112649.GB2032@phare.normalesup.org>

On Fri, Oct 08, 2010 at 01:20:48PM +0200, Reinhard Kotucha wrote:
> On 8 October 2010 Khaled Hosny wrote:
> 
>> On Fri, Oct 08, 2010 at 12:59:45PM +0200, Reinhard Kotucha wrote:
>>> Now imagine user C is writing in Vietnamese.  There are no patterns
>>> for Vietnamese, but \uccode/\lccode values have to be set somewhere.
>>
>> And how bad is that?
>
> The absence of hyphenation patterns?  They are not needed because
> words are very short.  And since words consist of single syllables,
> there are no reasonable breakpoints.

  Sure enough, but you didn't answer Khaled's question: how bad is not
having \uccode and \lccode then?

	Arthur

From mpg at elzevir.fr  Fri Oct  8 13:36:25 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 08 Oct 2010 13:36:25 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008112649.GB2032@phare.normalesup.org>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <19630.63905.754482.707841@zaphod.ms25.net>
 <20101008110346.GA3577@khaled-laptop>
 <19630.65168.815540.977189@zaphod.ms25.net>
 <20101008112649.GB2032@phare.normalesup.org>
Message-ID: <4CAF0239.9070807@elzevir.fr>

Le 08/10/2010 13:26, Arthur Reutenauer a ?crit :
> On Fri, Oct 08, 2010 at 01:20:48PM +0200, Reinhard Kotucha wrote:
>> On 8 October 2010 Khaled Hosny wrote:
>>
>>> On Fri, Oct 08, 2010 at 12:59:45PM +0200, Reinhard Kotucha wrote:
>>>> Now imagine user C is writing in Vietnamese.  There are no patterns
>>>> for Vietnamese, but \uccode/\lccode values have to be set somewhere.
>>>
>>> And how bad is that?
>>
>> The absence of hyphenation patterns?  They are not needed because
>> words are very short.  And since words consist of single syllables,
>> there are no reasonable breakpoints.
> 
>   Sure enough, but you didn't answer Khaled's question: how bad is not
> having \uccode and \lccode then?
> 
I don't know anything about Vietnamese, but people may want \uppercase to work?

Even if this is not relevant for vietnamese, the point still holds in general:
\[ul]ccode's are not used only for hyphenation, so it would be rather strange to
set them only in hyphenation files.

Manuel.

From mpg at elzevir.fr  Fri Oct  8 13:37:43 2010
From: mpg at elzevir.fr (=?UTF-8?B?TWFudWVsIFDDqWdvdXJpw6ktR29ubmFyZA==?=)
Date: Fri, 08 Oct 2010 13:37:43 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008112437.GA3705@khaled-laptop>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <19630.63905.754482.707841@zaphod.ms25.net>
 <20101008110346.GA3577@khaled-laptop>
 <19630.65168.815540.977189@zaphod.ms25.net>
 <20101008112437.GA3705@khaled-laptop>
Message-ID: <4CAF0287.5030908@elzevir.fr>

Le 08/10/2010 13:24, Khaled Hosny a ?crit :
> On Fri, Oct 08, 2010 at 01:20:48PM +0200, Reinhard Kotucha wrote:
>> On 8 October 2010 Khaled Hosny wrote:
>>  > And how bad is that?
>>
>> The absence of hyphenation patterns?
> 
> No, the \uccode/\lccode's without hyphenation patterns, should that be a
> problem?
> 
I don't want to read Reinhard's mind, but I think his point was that the
*absence* of proper \[ul]ccode would be bad.

Manuel.

From khaledhosny at eglug.org  Fri Oct  8 13:44:28 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 8 Oct 2010 13:44:28 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <4CAF0287.5030908@elzevir.fr>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <19630.63905.754482.707841@zaphod.ms25.net>
 <20101008110346.GA3577@khaled-laptop>
 <19630.65168.815540.977189@zaphod.ms25.net>
 <20101008112437.GA3705@khaled-laptop> <4CAF0287.5030908@elzevir.fr>
Message-ID: <20101008114428.GA3806@khaled-laptop>

On Fri, Oct 08, 2010 at 01:37:43PM +0200, Manuel P?gouri?-Gonnard wrote:
> Le 08/10/2010 13:24, Khaled Hosny a ?crit :
> > On Fri, Oct 08, 2010 at 01:20:48PM +0200, Reinhard Kotucha wrote:
> >> On 8 October 2010 Khaled Hosny wrote:
> >>  > And how bad is that?
> >>
> >> The absence of hyphenation patterns?
> > 
> > No, the \uccode/\lccode's without hyphenation patterns, should that be a
> > problem?
> > 
> I don't want to read Reinhard's mind, but I think his point was that the
> *absence* of proper \[ul]ccode would be bad.

I had the impression that it is used only for hyphenation (and that was
augmented by the fact I never set it for Arabic and have no problem, but
of course this does not make sense as Arabic is unicameral), now I've
looked it up, I see how naive was the question.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From mpg at elzevir.fr  Fri Oct  8 13:44:50 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 08 Oct 2010 13:44:50 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008112450.GA2032@phare.normalesup.org>
References: <20101008071035.GE17803@smoon> <4CAEC52A.2050505@elvenkind.com>
 <4CAEC8CE.4060609@free.fr>
 <AANLkTimbT6Tqyu+ysFxcF+yO7uv_yuiTOvqoBoqQRCaH@mail.gmail.com>
 <4CAECF8A.50905@free.fr> <4CAEFAA9.5040308@elzevir.fr>
 <20101008112450.GA2032@phare.normalesup.org>
Message-ID: <4CAF0432.6070809@elzevir.fr>

Le 08/10/2010 13:24, Arthur Reutenauer a ?crit :
>>                                                       Actually, etex.src even
>> makes that CS undefined after it used it. (I assume it saves some memory.)
> 
>   If you mean that it saves some space in the format, I think not.  As
> far as I know, every macro definition is dumped into the hash table
> (even if the macro is later overwritten), and control sequence names are
> dumped in the string pool (even multiple times if there are several
> successive definitions).  Which means that you can have unaccessible
> macro definitions in the format file, as well as several definitions for
> some macro, even if of course only the last one would be accessible
> (and, in the case of \undefined, none would be).
>
>   Not that all of this *really* matters, of course :-)
> 
First of all, sure, it doesn't matter at all. But for the sake of the
discussion, near the end of etex.src:

% In an attempt to reduce the overheads of e-TeX, we recycle all possible
% resources, including (as a penultimate step) the recycler itself...

and then:

        \def \r at cycle #1%
            {\ifdefined #1
                 \message {\string #1,}\let #1=\und at fined
             \else
                 \message {\string #1 (not defined),}
             \fi
            }
        {\newlinechar=`\! \message {!Recycling:}}

        \r at cycle \addlanguage
        % a lot more \r at cycle-ing going on here...

Given that the author of this file (Peter B.) has a much deeper understanding of
the innards of TeX that I'll probably ever have, I assume there is some
mechanism in e-TeX's \dump that prevents him from using space on undefined
macros. But maybe I misinterpreted his intentions here.

Maybe Taco can enlighten us on this particular point?

Manuel.

From mpg at elzevir.fr  Fri Oct  8 13:50:02 2010
From: mpg at elzevir.fr (=?UTF-8?B?TWFudWVsIFDDqWdvdXJpw6ktR29ubmFyZA==?=)
Date: Fri, 08 Oct 2010 13:50:02 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008114428.GA3806@khaled-laptop>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <19630.63905.754482.707841@zaphod.ms25.net>
 <20101008110346.GA3577@khaled-laptop>
 <19630.65168.815540.977189@zaphod.ms25.net>
 <20101008112437.GA3705@khaled-laptop> <4CAF0287.5030908@elzevir.fr>
 <20101008114428.GA3806@khaled-laptop>
Message-ID: <4CAF056A.1060607@elzevir.fr>

Le 08/10/2010 13:44, Khaled Hosny a ?crit :
> On Fri, Oct 08, 2010 at 01:37:43PM +0200, Manuel P?gouri?-Gonnard wrote:
>> I don't want to read Reinhard's mind, but I think his point was that the
>> *absence* of proper \[ul]ccode would be bad.
> 
> I had the impression that it is used only for hyphenation

\uccode and \lccode are use primarily by \uppercase and \lowercase. Unless I'm
mistaken, only \lccode is used also for hyphenation.

m

From taco at elvenkind.com  Fri Oct  8 13:56:16 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 08 Oct 2010 13:56:16 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <4CAF056A.1060607@elzevir.fr>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <19630.63905.754482.707841@zaphod.ms25.net>
 <20101008110346.GA3577@khaled-laptop>
 <19630.65168.815540.977189@zaphod.ms25.net>
 <20101008112437.GA3705@khaled-laptop> <4CAF0287.5030908@elzevir.fr>
 <20101008114428.GA3806@khaled-laptop> <4CAF056A.1060607@elzevir.fr>
Message-ID: <4CAF06E0.60101@elvenkind.com>

On 10/08/2010 01:50 PM, Manuel P?gouri?-Gonnard wrote:
> Le 08/10/2010 13:44, Khaled Hosny a ?crit :
>> On Fri, Oct 08, 2010 at 01:37:43PM +0200, Manuel P?gouri?-Gonnard wrote:
>>> I don't want to read Reinhard's mind, but I think his point was that the
>>> *absence* of proper \[ul]ccode would be bad.
>>
>> I had the impression that it is used only for hyphenation
>
> \uccode and \lccode are use primarily by \uppercase and \lowercase. Unless I'm
> mistaken, only \lccode is used also for hyphenation.

correct.

From lomov.vl at gmail.com  Fri Oct  8 15:03:36 2010
From: lomov.vl at gmail.com (Vladimir Lomov)
Date: Fri, 8 Oct 2010 22:03:36 +0900
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008102610.GC17930@phare.normalesup.org>
References: <20101008071035.GE17803@smoon>
 <AANLkTikq5OJiOgRuYbhxm3zet9Pdrf4O36iY5ogM4oG0@mail.gmail.com>
 <20101008080355.GG17803@smoon>
 <20101008082117.GB3176@khaled-laptop>
 <20101008084915.GI17803@smoon>
 <AANLkTin34Nn0+v3m0O2NbJH1DtMBfO9RNUo0T7vCw5Uz@mail.gmail.com>
 <20101008102610.GC17930@phare.normalesup.org>
Message-ID: <20101008130336.GL17803@smoon>

Hi Mojca, Arthur.

** Arthur Reutenauer [2010-10-08 12:26:10 +0200]:
  Mojca Miklavec == MM
  Arthur Reutenauer == AR

MM>> Sure, but in German or French it's only "every tenth" letter that is
MM>> problematic, so TeX will still hyphenate somewhere using the remaining
MM>> nine ascii ones. It will definitely miss many allowed hyphenations,
MM>> but it will still look OK.
AR> 
AR>   Yes, that is the explanation.
Yes, that it is the explataion (sorry for doubling you statement :)

-- 
There are probably better ways to do that, but it would make the parser
more complex.  I do, occasionally, struggle feebly against complexity...  :-)
             -- Larry Wall in <7886 at jpl-devvax.JPL.NASA.GOV>

From lomov.vl at gmail.com  Fri Oct  8 15:14:03 2010
From: lomov.vl at gmail.com (Vladimir Lomov)
Date: Fri, 8 Oct 2010 22:14:03 +0900
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
Message-ID: <20101008131403.GM17803@smoon>

** Mojca Miklavec [2010-10-08 11:21:32 +0200]:

> On Fri, Oct 8, 2010 at 11:04, Robin Fairbairns wrote:
>> Mojca Miklavec wrote:
>>
>>> This should be fixed in format one day though, but if you want to use
>>> it now, this is what you need to do ...
>>
>> what should be fixed in the format? ?lccode tables for all unicode
>> ranges covering alphabetic characters?
> 
> Exactly.
> 
Won't argue. I think how it is not big problem have all them in format.
May be 10-20 years ago this could be a problem but now I doubt.

>> seems extreme:
> 
> Well, it's done by:
> - plain XeTeX & XeLaTeX
>   /usr/local/texlive/2010/texmf-dist/tex/generic/xetexconfig/unicode-letters.tex
> - ConTeXt when using XeTeX
>   /usr/local/texlive/2010/texmf-dist/tex/context/base/xetx-utf.mkii
> - ConTeXt MKIV
>   /usr/local/texlive/2010/texmf-dist/tex/context/base/char-def.lua
> 
> I don't know why it would be any more extreme to do it in plain LuaTeX format.
Thanks. I looked at them. But could luatex use the same
unicode-letters.tex? if could then this makes luatex to work with
accented letters as well as cyrillic (and other?).

>> i would think it
>> more sensible to provide the tables in hyphenation files
> 
> Btw, there is
>     /usr/local/texlive/2010/texmf-dist/tex/generic/hyph-utf8/patterns/txt/hyph-ru.chr.txt
> but it is not used anywhere.
But are other files (like hyph-de-1996.chr.txt or hyph-fr.chr.txt) used?

>> that way
>> there would be some chance that the tables were constributed by people
>> who know the language.
> 
> Now imagine user A using both German and French patterns. When he
> switches from German to French - should we switch all the German
> lccodes for ??? back to undefined? If we don't, there's a chance that
> the user will get different hyphenation for French (let's say that the
> text contains a name with some German letters) depending on whether he
> was typesetting a French-only or mixed language document.
> 
> Now imagine user B using some package that deals with Unicode and sets
> all the lccodes for the whole Unicode range. If we do change the
> lccodes back to undefined when switching from German to French, the
> user will have all the letters for the whole Unicode range properly
> defined, except for some umlauts which we modified without user's
> consent.
> 
> I simply don't think that changing any codes inside hyphenation files
> is the right thing to do. Yes, we can solve many users' problems
> (simply hyphenation will work), but create many ugly new ones.
Don't get the idea. As ordinary user (and wokring with more ordinary
users) I think that it is best if all would work (even if format file is
big).

Consider the other reason: now latex format file in TeX Live has
patterns for many languages (latex simple.tex and see the first few
lines) but I don't see that many users try to reduce the number of
patterns enabled by default.

>From my point of view (user): the luatex is unicode aware engine
(actually I think of UTF-8) and this is benefit for me. From that point
of view having lccode's for (almost all) Unicode letters (European
languages, for example, Cyrillic, Greek, other?) may be expect Eastern
languages (because I'm not aware about they specific in compare with
European languages, this is another problem) it is natural.

---
WBR, Vladimir Lomov

-- 
<barneyfu> knghtbrd: crap, SDL sure makes DGA a helluva alot easier too
           doesn't it? :)
<knghtbrd> barneyfu: what DGA?
<barneyfu> mouse dga
<knghtbrd> barneyfu: (does that answer your question?)
<barneyfu> Hahahahaha YEAH! :)

From mpg at elzevir.fr  Fri Oct  8 15:54:09 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 08 Oct 2010 15:54:09 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008131403.GM17803@smoon>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <20101008131403.GM17803@smoon>
Message-ID: <4CAF2281.9060307@elzevir.fr>

Le 08/10/2010 15:14, Vladimir Lomov a ?crit :
> Thanks. I looked at them. But could luatex use the same
> unicode-letters.tex?

Not directly, but with minor changes, yes.

Actually, I prepared an adapted version, and baring objections or failing tests
(by others), it will be in TL tomorrow, and loaded by default in luatex-based
formats, which means (dvi)lua(la)tex.

> if could then this makes luatex to work with
> accented letters as well as cyrillic (and other?).
> 
I tested with the examples you send to lualatex-dev a while ago, and it works.
At least, some hyphenation happens, and visual inspection shows no difference
with xelatex's output.

By the way:
- sorry for not replying earlier to this message;
- thanks for providing us with usable test files.

> Don't get the idea. As ordinary user (and wokring with more ordinary
> users) I think that it is best if all would work (even if format file is
> big).
> 
The size of the format is not an issue IMO, and I agree that most things (if not
everything) should work OOTB.

The issue that delayed the solution to the lccode/hyphenation problem was that
there are larger plans about making unicode character properties available from
lua (as context does), discussion about the best way to use it, etc. The
solution I commited is suboptimal in several ways, but I think (hope) it is Good
Enough? for now.

(We have a saying in French: "Un bon tiens vaut mieux que deux tu l'auras.")

Manuel.

From arthur.reutenauer at normalesup.org  Fri Oct  8 16:04:15 2010
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Fri, 8 Oct 2010 16:04:15 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <4CAF0432.6070809@elzevir.fr>
References: <20101008071035.GE17803@smoon> <4CAEC52A.2050505@elvenkind.com>
 <4CAEC8CE.4060609@free.fr>
 <AANLkTimbT6Tqyu+ysFxcF+yO7uv_yuiTOvqoBoqQRCaH@mail.gmail.com>
 <4CAECF8A.50905@free.fr> <4CAEFAA9.5040308@elzevir.fr>
 <20101008112450.GA2032@phare.normalesup.org> <4CAF0432.6070809@elzevir.fr>
Message-ID: <20101008140415.GC2032@phare.normalesup.org>

> Given that the author of this file (Peter B.) has a much deeper understanding of
> the innards of TeX that I'll probably ever have, I assume there is some
> mechanism in e-TeX's \dump that prevents him from using space on undefined
> macros. But maybe I misinterpreted his intentions here.
> 
> Maybe Taco can enlighten us on this particular point?

  I'm curious too.  The experiments I ran in order to answer a question
(http://tex.stackexchange.com/questions/323/what-macros-are-defined-in-a-web2c-format-file)
on tex.stackexchange led me to believe that all control sequences that
were defined at some point left some remnants in the format file, but I
may be wrong, of course.

	Arthur

From lomov.vl at gmail.com  Fri Oct  8 16:12:55 2010
From: lomov.vl at gmail.com (Vladimir Lomov)
Date: Fri, 8 Oct 2010 23:12:55 +0900
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <4CAF2281.9060307@elzevir.fr>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <20101008131403.GM17803@smoon> <4CAF2281.9060307@elzevir.fr>
Message-ID: <20101008141255.GQ17803@smoon>

Hi Manuel.
** Manuel P?gouri?-Gonnard [2010-10-08 15:54:09 +0200]:

> Le 08/10/2010 15:14, Vladimir Lomov a ?crit :
>> Thanks. I looked at them. But could luatex use the same
>> unicode-letters.tex?
> 
> Not directly, but with minor changes, yes.
> 
> Actually, I prepared an adapted version, and baring objections or failing tests
> (by others), it will be in TL tomorrow, and loaded by default in luatex-based
> formats, which means (dvi)lua(la)tex.
I prepared something similar. I cat'ed the 'chr' files from
TEXMFDIST/tex/generic/hyph-utf8/patterns/txt
in one file sort it leave only uniqs then leave only latin based letters
and made a file with lccodes (as Mojca advised). Seems that all work
fine (with my example on German, French and Russian).
>> if could then this makes luatex to work with
>> accented letters as well as cyrillic (and other?).
>> 
> I tested with the examples you send to lualatex-dev a while ago, and it works.
> At least, some hyphenation happens, and visual inspection shows no difference
> with xelatex's output.
> 
> By the way:
> - sorry for not replying earlier to this message;
> - thanks for providing us with usable test files.
Sorry if this could take as impolite but could French speaking
(ideally whose for whom French is native) say me how correctly hyphenate
the word 'M?daille' (I taken example for French text from
fr.wikipedia.org from paper about Poincare, sorry I don't know how to
write his name correctly, and I use this word to check how luatex
hyphenate, \showhyphens{M?daille} gives me only one point for hyphenation).

>> Don't get the idea. As ordinary user (and wokring with more ordinary
>> users) I think that it is best if all would work (even if format file is
>> big).
>> 
> The size of the format is not an issue IMO, and I agree that most things (if not
> everything) should work OOTB.
> 
> The issue that delayed the solution to the lccode/hyphenation problem was that
> there are larger plans about making unicode character properties available from
> lua (as context does), discussion about the best way to use it, etc. The
> solution I commited is suboptimal in several ways, but I think (hope) it is Good
> Enough? for now.
> 
> (We have a saying in French: "Un bon tiens vaut mieux que deux tu l'auras.")
And could I use this sentense in my luatex tests :)?


-- 
Blessed are they who Go Around in Circles, for they Shall be Known as Wheels.

From taco at elvenkind.com  Fri Oct  8 16:17:34 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 08 Oct 2010 16:17:34 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008140415.GC2032@phare.normalesup.org>
References: <20101008071035.GE17803@smoon> <4CAEC52A.2050505@elvenkind.com>
 <4CAEC8CE.4060609@free.fr>
 <AANLkTimbT6Tqyu+ysFxcF+yO7uv_yuiTOvqoBoqQRCaH@mail.gmail.com>
 <4CAECF8A.50905@free.fr> <4CAEFAA9.5040308@elzevir.fr>
 <20101008112450.GA2032@phare.normalesup.org> <4CAF0432.6070809@elzevir.fr>
 <20101008140415.GC2032@phare.normalesup.org>
Message-ID: <4CAF27FE.1090306@elvenkind.com>

On 10/08/2010 04:04 PM, Arthur Reutenauer wrote:
>> Given that the author of this file (Peter B.) has a much deeper understanding of
>> the innards of TeX that I'll probably ever have, I assume there is some
>> mechanism in e-TeX's \dump that prevents him from using space on undefined
>> macros. But maybe I misinterpreted his intentions here.
>>
>> Maybe Taco can enlighten us on this particular point?
>
>    I'm curious too.  The experiments I ran in order to answer a question
> (http://tex.stackexchange.com/questions/323/what-macros-are-defined-in-a-web2c-format-file)
> on tex.stackexchange led me to believe that all control sequences that
> were defined at some point left some remnants in the format file, but I
> may be wrong, of course.

All csnames that have ever been defined are part of the string pool
and are thus dumped in the format, but that is not true for the actual
token lists that are their definition: these are actually thrown away
if at top-level the definition is cleared.

Best wishes,
Taco

From arthur.reutenauer at normalesup.org  Fri Oct  8 16:20:55 2010
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Fri, 8 Oct 2010 16:20:55 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008141255.GQ17803@smoon>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <20101008131403.GM17803@smoon> <4CAF2281.9060307@elzevir.fr>
 <20101008141255.GQ17803@smoon>
Message-ID: <20101008142055.GE2032@phare.normalesup.org>

> Sorry if this could take as impolite but could French speaking
> (ideally whose for whom French is native) say me how correctly hyphenate
> the word 'M?daille' (I taken example for French text from
> fr.wikipedia.org from paper about Poincare, sorry I don't know how to
> write his name correctly, and I use this word to check how luatex
> hyphenate, \showhyphens{M?daille} gives me only one point for hyphenation).

  That's probably because of hyphenmins.  The correct hyphenation points
are m?-dail-le; try setting \lefthyphenmin and \righthyphenmin to 1 and
see what it reports.

	Arthur

From arthur.reutenauer at normalesup.org  Fri Oct  8 16:22:01 2010
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Fri, 8 Oct 2010 16:22:01 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <4CAF27FE.1090306@elvenkind.com>
References: <20101008071035.GE17803@smoon> <4CAEC52A.2050505@elvenkind.com>
 <4CAEC8CE.4060609@free.fr>
 <AANLkTimbT6Tqyu+ysFxcF+yO7uv_yuiTOvqoBoqQRCaH@mail.gmail.com>
 <4CAECF8A.50905@free.fr> <4CAEFAA9.5040308@elzevir.fr>
 <20101008112450.GA2032@phare.normalesup.org> <4CAF0432.6070809@elzevir.fr>
 <20101008140415.GC2032@phare.normalesup.org> <4CAF27FE.1090306@elvenkind.com>
Message-ID: <20101008142201.GF2032@phare.normalesup.org>

> All csnames that have ever been defined are part of the string pool
> and are thus dumped in the format, but that is not true for the actual
> token lists that are their definition: these are actually thrown away
> if at top-level the definition is cleared.

  OK, I stand corrected.

	Arthur

From mpg at elzevir.fr  Fri Oct  8 16:30:42 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 08 Oct 2010 16:30:42 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <4CAF27FE.1090306@elvenkind.com>
References: <20101008071035.GE17803@smoon> <4CAEC52A.2050505@elvenkind.com>
 <4CAEC8CE.4060609@free.fr>
 <AANLkTimbT6Tqyu+ysFxcF+yO7uv_yuiTOvqoBoqQRCaH@mail.gmail.com>
 <4CAECF8A.50905@free.fr> <4CAEFAA9.5040308@elzevir.fr>
 <20101008112450.GA2032@phare.normalesup.org> <4CAF0432.6070809@elzevir.fr>
 <20101008140415.GC2032@phare.normalesup.org> <4CAF27FE.1090306@elvenkind.com>
Message-ID: <4CAF2B12.8080705@elzevir.fr>

Le 08/10/2010 16:17, Taco Hoekwater a ?crit :
> On 10/08/2010 04:04 PM, Arthur Reutenauer wrote:
>>> Given that the author of this file (Peter B.) has a much deeper understanding of
>>> the innards of TeX that I'll probably ever have, I assume there is some
>>> mechanism in e-TeX's \dump that prevents him from using space on undefined
>>> macros. But maybe I misinterpreted his intentions here.
>>>
>>> Maybe Taco can enlighten us on this particular point?
>>
>>    I'm curious too.  The experiments I ran in order to answer a question
>> (http://tex.stackexchange.com/questions/323/what-macros-are-defined-in-a-web2c-format-file)
>> on tex.stackexchange led me to believe that all control sequences that
>> were defined at some point left some remnants in the format file, but I
>> may be wrong, of course.
> 
> All csnames that have ever been defined are part of the string pool
> and are thus dumped in the format, but that is not true for the actual
> token lists that are their definition: these are actually thrown away
> if at top-level the definition is cleared.
> 
Thanks for this clear explanation.

Btw, as far as luatex is concerned, what's the status of the string pool? I
guess you'll want to get rid of it at some point, using standard C strings
instead, am I right?

m

From arthur.reutenauer at normalesup.org  Fri Oct  8 16:30:43 2010
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Fri, 8 Oct 2010 16:30:43 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <4CAF0239.9070807@elzevir.fr>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <19630.63905.754482.707841@zaphod.ms25.net>
 <20101008110346.GA3577@khaled-laptop>
 <19630.65168.815540.977189@zaphod.ms25.net>
 <20101008112649.GB2032@phare.normalesup.org> <4CAF0239.9070807@elzevir.fr>
Message-ID: <20101008143043.GG2032@phare.normalesup.org>

> Even if this is not relevant for vietnamese, the point still holds in general:
> \[ul]ccode's are not used only for hyphenation, so it would be rather strange to
> set them only in hyphenation files.

  Thanks Manuel, but I really would have liked Reinhard to answer...
Anyway, maieutics is hard!

	Arthur

From lomov.vl at gmail.com  Fri Oct  8 16:37:03 2010
From: lomov.vl at gmail.com (Vladimir Lomov)
Date: Fri, 8 Oct 2010 23:37:03 +0900
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008142055.GE2032@phare.normalesup.org>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <20101008131403.GM17803@smoon> <4CAF2281.9060307@elzevir.fr>
 <20101008141255.GQ17803@smoon>
 <20101008142055.GE2032@phare.normalesup.org>
Message-ID: <20101008143703.GR17803@smoon>

Hi Arthur.
** Arthur Reutenauer [2010-10-08 16:20:55 +0200]:

>> Sorry if this could take as impolite but could French speaking
>> (ideally whose for whom French is native) say me how correctly hyphenate
>> the word 'M?daille' (I taken example for French text from
>> fr.wikipedia.org from paper about Poincare, sorry I don't know how to
>> write his name correctly, and I use this word to check how luatex
>> hyphenate, \showhyphens{M?daille} gives me only one point for hyphenation).
> 
>   That's probably because of hyphenmins.  The correct hyphenation points
> are m?-dail-le; try setting \lefthyphenmin and \righthyphenmin to 1 and
> see what it reports.
It's Greek to me :)
I tried
\lefthyphenmin=1
\righthyphenmin=1
and also
\lefthyphenmin1
\righthyphenmin1

<code>
\input luaotfload.sty
\font\test={file:cmunrm.otf} at 10 pt

\test
\uselanguage{french}
\input ../lccodes.tex
\lefthyphenmin1
\righthyphenmin1
\input sample2_fr.tex

\bye
</code>
and get the same hyphenation. Ans thanks for possible hyphenations :)

Here: lccodes.tex contains lccodes (as Mojca suggested but for European
languages), sample2_fr.tex contains \showhyphens{M?daille}.

So I missed something (plain TeX is unknown territory for me).

---
WBR, Vladimir Lomov

-- 
Tactical?  TACTICAL!?!?  Hey, buddy, we went from kilotons to megatons
several minutes ago.  We don't need no stinkin' tactical nukes.
(By the way, do you have change for 10 million people?) --lwall

From taco at elvenkind.com  Fri Oct  8 16:39:42 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 08 Oct 2010 16:39:42 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <4CAF2B12.8080705@elzevir.fr>
References: <20101008071035.GE17803@smoon> <4CAEC52A.2050505@elvenkind.com>
 <4CAEC8CE.4060609@free.fr>
 <AANLkTimbT6Tqyu+ysFxcF+yO7uv_yuiTOvqoBoqQRCaH@mail.gmail.com>
 <4CAECF8A.50905@free.fr> <4CAEFAA9.5040308@elzevir.fr>
 <20101008112450.GA2032@phare.normalesup.org> <4CAF0432.6070809@elzevir.fr>
 <20101008140415.GC2032@phare.normalesup.org> <4CAF27FE.1090306@elvenkind.com>
 <4CAF2B12.8080705@elzevir.fr>
Message-ID: <4CAF2D2E.70209@elvenkind.com>

On 10/08/2010 04:30 PM, Manuel P?gouri?-Gonnard wrote:
>
> Btw, as far as luatex is concerned, what's the status of the string pool? I
> guess you'll want to get rid of it at some point, using standard C strings
> instead, am I right?

It already is quite different from the pascal version, check out
luatexdir/tex/stringpool.h if you are curious. LuaTeX's 'stringpool'
is actually an array of C structures with fields for size and char *.

This is already quite a bit less monolithic than TeX82. Switching to
an avl tree or using lua's hash would be more 'modern ' but that
comes with a noticeable speed penalty.

The documentation segments in stringpool.[hw] need updating, though.

Best wishes,
Taco



From arthur.reutenauer at normalesup.org  Fri Oct  8 16:44:26 2010
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Fri, 8 Oct 2010 16:44:26 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008143703.GR17803@smoon>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <20101008131403.GM17803@smoon> <4CAF2281.9060307@elzevir.fr>
 <20101008141255.GQ17803@smoon> <20101008142055.GE2032@phare.normalesup.org>
 <20101008143703.GR17803@smoon>
Message-ID: <20101008144425.GH2032@phare.normalesup.org>

> I tried
> \lefthyphenmin=1
> \righthyphenmin=1
> and also
> \lefthyphenmin1
> \righthyphenmin1

  Both versions are correct, and equivalent.

> and get the same hyphenation. Ans thanks for possible hyphenations :)

  Could you just say what this hyphenation is in your case?  It's
possible some typographers would forbid hyphenation at "ail-le" because
the 'e' is mute (in fact, I'm sure they do), so you would only get
m?-daille.  That is, provided \lefthyphenmin is at most 2, of course.

	Arthur

From lomov.vl at gmail.com  Fri Oct  8 16:52:36 2010
From: lomov.vl at gmail.com (Vladimir Lomov)
Date: Fri, 8 Oct 2010 23:52:36 +0900
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008144425.GH2032@phare.normalesup.org>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <20101008131403.GM17803@smoon> <4CAF2281.9060307@elzevir.fr>
 <20101008141255.GQ17803@smoon>
 <20101008142055.GE2032@phare.normalesup.org>
 <20101008143703.GR17803@smoon>
 <20101008144425.GH2032@phare.normalesup.org>
Message-ID: <20101008145236.GS17803@smoon>

Hi Arthur.
** Arthur Reutenauer [2010-10-08 16:44:26 +0200]:

>> I tried
>> \lefthyphenmin=1
>> \righthyphenmin=1
>> and also
>> \lefthyphenmin1
>> \righthyphenmin1
> 
>   Both versions are correct, and equivalent.
> 
>> and get the same hyphenation. Ans thanks for possible hyphenations :)
> 
>   Could you just say what this hyphenation is in your case?  It's
> possible some typographers would forbid hyphenation at "ail-le" because
> the 'e' is mute (in fact, I'm sure they do), so you would only get
> m?-daille.  That is, provided \lefthyphenmin is at most 2, of course.
The last I get. Thanks, now I understand why I see that result.

-- 
	"The release of emotion is what keeps us health.  Emotionally healthy."
	"That may be, Doctor.  However, I have noted that the healthy release
of emotion is frequently unhealthy for those closest to you."
		-- McCoy and Spock, "Plato's Stepchildren", stardate 5784.3

From mpg at elzevir.fr  Fri Oct  8 16:59:18 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 08 Oct 2010 16:59:18 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008144425.GH2032@phare.normalesup.org>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <20101008131403.GM17803@smoon> <4CAF2281.9060307@elzevir.fr>
 <20101008141255.GQ17803@smoon> <20101008142055.GE2032@phare.normalesup.org>
 <20101008143703.GR17803@smoon> <20101008144425.GH2032@phare.normalesup.org>
Message-ID: <4CAF31C6.9080407@elzevir.fr>

Le 08/10/2010 16:44, Arthur Reutenauer a ?crit :
>> I tried
>> \lefthyphenmin=1
>> \righthyphenmin=1
>> and also
>> \lefthyphenmin1
>> \righthyphenmin1
> 
>   Both versions are correct, and equivalent.
> 
>> and get the same hyphenation. Ans thanks for possible hyphenations :)
> 
>   Could you just say what this hyphenation is in your case?  It's
> possible some typographers would forbid hyphenation at "ail-le" because
> the 'e' is mute (in fact, I'm sure they do), so you would only get
> m?-daille.  That is, provided \lefthyphenmin is at most 2, of course.
> 
FWIW, pdftex gives m?-daille, even with \(left|right)hyphenmin1.

I have no personal opinion on whether m?-dail-le is correct, but as a general
rule, I think the goal of the patterns is to avoid false positives (ie, don't
find wrong hyphenation points) be it at the cost of a few false negatives (ie,
not always finding all legal hyphenation points). This could be an explanation.
(Or, as you say, picky typographers dislike ail-le.)

Manuel.

From mpg at elzevir.fr  Fri Oct  8 17:00:41 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 08 Oct 2010 17:00:41 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <4CAF2D2E.70209@elvenkind.com>
References: <20101008071035.GE17803@smoon> <4CAEC52A.2050505@elvenkind.com>
 <4CAEC8CE.4060609@free.fr>
 <AANLkTimbT6Tqyu+ysFxcF+yO7uv_yuiTOvqoBoqQRCaH@mail.gmail.com>
 <4CAECF8A.50905@free.fr> <4CAEFAA9.5040308@elzevir.fr>
 <20101008112450.GA2032@phare.normalesup.org> <4CAF0432.6070809@elzevir.fr>
 <20101008140415.GC2032@phare.normalesup.org> <4CAF27FE.1090306@elvenkind.com>
 <4CAF2B12.8080705@elzevir.fr> <4CAF2D2E.70209@elvenkind.com>
Message-ID: <4CAF3219.6000109@elzevir.fr>

Le 08/10/2010 16:39, Taco Hoekwater a ?crit :
> On 10/08/2010 04:30 PM, Manuel P?gouri?-Gonnard wrote:
>>
>> Btw, as far as luatex is concerned, what's the status of the string pool? I
>> guess you'll want to get rid of it at some point, using standard C strings
>> instead, am I right?
> 
> It already is quite different from the pascal version, check out
> luatexdir/tex/stringpool.h if you are curious. LuaTeX's 'stringpool'
> is actually an array of C structures with fields for size and char *.
> 
I see.

> This is already quite a bit less monolithic than TeX82. Switching to
> an avl tree or using lua's hash would be more 'modern ' but that
> comes with a noticeable speed penalty.
> 
Ok.

Thanks,
Manuel.

From arthur.reutenauer at normalesup.org  Fri Oct  8 17:03:44 2010
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Fri, 8 Oct 2010 17:03:44 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <4CAF31C6.9080407@elzevir.fr>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <20101008131403.GM17803@smoon> <4CAF2281.9060307@elzevir.fr>
 <20101008141255.GQ17803@smoon> <20101008142055.GE2032@phare.normalesup.org>
 <20101008143703.GR17803@smoon> <20101008144425.GH2032@phare.normalesup.org>
 <4CAF31C6.9080407@elzevir.fr>
Message-ID: <20101008150335.GI2032@phare.normalesup.org>

> FWIW, pdftex gives m?-daille, even with \(left|right)hyphenmin1.

  Well, it uses the same patterns, doesn't it?  :-)

> I have no personal opinion on whether m?-dail-le is correct, but as a general
> rule, I think the goal of the patterns is to avoid false positives

  I agree, but, that being said, I'm sure:

> (Or, as you say, picky typographers dislike ail-le.)

  ... is the right explanation for the patterns we have ;-)

	Arthur

From mpg at elzevir.fr  Fri Oct  8 17:15:07 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 08 Oct 2010 17:15:07 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008150335.GI2032@phare.normalesup.org>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <20101008131403.GM17803@smoon> <4CAF2281.9060307@elzevir.fr>
 <20101008141255.GQ17803@smoon> <20101008142055.GE2032@phare.normalesup.org>
 <20101008143703.GR17803@smoon> <20101008144425.GH2032@phare.normalesup.org>
 <4CAF31C6.9080407@elzevir.fr> <20101008150335.GI2032@phare.normalesup.org>
Message-ID: <4CAF357B.7070505@elzevir.fr>

Le 08/10/2010 17:03, Arthur Reutenauer a ?crit :
>> FWIW, pdftex gives m?-daille, even with \(left|right)hyphenmin1.
> 
>   Well, it uses the same patterns, doesn't it?  :-)
> 
Sure. But since we are on the LuaTeX list, and the beginning of the discussion
was indeed luatex-specific, I just wanted to point out that there is nothing
special about luatex here.

>> I have no personal opinion on whether m?-dail-le is correct, but as a general
>> rule, I think the goal of the patterns is to avoid false positives
> 
>   I agree, but, that being said, I'm sure:
> 
>> (Or, as you say, picky typographers dislike ail-le.)
> 
>   ... is the right explanation for the patterns we have ;-)
> 
I fully trust you.

Manuel.

From wspr81 at gmail.com  Fri Oct  8 17:24:07 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Sat, 9 Oct 2010 01:54:07 +1030
Subject: [luatex] Use Math Glyphs from Text Font
References: <AANLkTin3gT5gSmHOrx8ZKL9hr+7mLVxRui44c2xdHv5o@mail.gmail.com>
 <20101005203756.GA12291@khaled-laptop>
 <AANLkTimwnuo_y_EOOYc_6nFswptyH-NJixnUkdPaJOx2@mail.gmail.com>
 <20101005220553.GA13319@khaled-laptop>
 <AANLkTik4gJXLmPnjE161T8OGoXsexkwqu=Gg++7DsoRS@mail.gmail.com>
 <20101005222527.GA14625@khaled-laptop>
 <AANLkTimEWdBotZDuqMpLQ10gA5XNj+nMpq43Gvxw6xd2@mail.gmail.com>
Message-ID: <i8nd2m$aro$1@dough.gmane.org>

On 2010-10-06 18:52:02 +1030, "C. Comren" 
<ccomren at gmail.com> said:

> Thanks. With \mathit the Greek letters appear. However, if I modify
> the displayed math to
> 
> \[
>     \int \operatorname{vol} = \lambda
> \]
> 
> the integral does not appear and "vol" is not set in roman, but italic.

I'm afraid that unicode-math is designed primarily to replace the 
entire math system with Unicode. I'll attempt to make it play better 
with legacy TeX maths in the future, but for now you need to select a 
Unicode font for the maths you need to use. E.g., 
\setmathfont{xits-math.otf}

Sorry for the inconvenience,
Will



From dcnieho at gmail.com  Fri Oct  8 17:57:39 2010
From: dcnieho at gmail.com (Diederick C. Niehorster)
Date: Fri, 8 Oct 2010 23:57:39 +0800
Subject: [luatex] Use Math Glyphs from Text Font
In-Reply-To: <AANLkTimwnuo_y_EOOYc_6nFswptyH-NJixnUkdPaJOx2@mail.gmail.com>
References: <AANLkTin3gT5gSmHOrx8ZKL9hr+7mLVxRui44c2xdHv5o@mail.gmail.com>
 <20101005203756.GA12291@khaled-laptop>
 <AANLkTimwnuo_y_EOOYc_6nFswptyH-NJixnUkdPaJOx2@mail.gmail.com>
Message-ID: <AANLkTikb2aSFLuELPjDUxg6QOgwq+2JoK0ZmOEf8vt0j@mail.gmail.com>

On Wed, Oct 6, 2010 at 05:27, C. Comren <ccomren at gmail.com> wrote:
>> Then you can use unicode-math package, check its documentation
>> especially the "using multiple fonts section".
>
> I tried
>
> \setmathfont[range=\mathbfsfit/{greek,Greek}]{NameOfTheFont}
>
> LuaLaTeX complains that the font does not contain script "Math" and
> produces a PDF without any math in it.

You might also try using the mathspec package, although its designed
only for Xe(La)TeX for as far as I know. It does the job of switching
the latin and greek characters to a specified font, without touching
operators. I am not sure if it works on luatex at all (actually, the
fact that Khaled and Will didn't mention it probably means that it
doesn't), but give it a spin.

Best,
Dee

From reinhard.kotucha at web.de  Fri Oct  8 19:46:07 2010
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Fri, 8 Oct 2010 19:46:07 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008143043.GG2032@phare.normalesup.org>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <19630.63905.754482.707841@zaphod.ms25.net>
 <20101008110346.GA3577@khaled-laptop>
 <19630.65168.815540.977189@zaphod.ms25.net>
 <20101008112649.GB2032@phare.normalesup.org>
 <4CAF0239.9070807@elzevir.fr>
 <20101008143043.GG2032@phare.normalesup.org>
Message-ID: <19631.22751.851282.993447@zaphod.ms25.net>

On 8 October 2010 Arthur Reutenauer wrote:

 > > Even if this is not relevant for vietnamese, the point still
 > > holds in general: \[ul]ccode's are not used only for hyphenation,
 > > so it would be rather strange to set them only in hyphenation
 > > files.
 > 
 >   Thanks Manuel, but I really would have liked Reinhard to answer...

Manuel is correct, and I'm glad that he already answered the question
while I was away for lunch.  Vietnemese is not special in this
respect.  It's used by LaTeX's \MakeUppercase and AFAIR Context has
macros like \word, \Word, and \WORD. 

For Vietnamese it's sufficient to retrieve \uccode/\lccode mappings
from the file UnicodeData.txt (unicode.org), and I hope for other
languages it's sufficient too.  It's certainly best to do the mappings
for all "case-aware" characters in the format file.  Since there are
no such mappings for CJK, I don't expect that too much space is
required.

These mappings are not language specific, IMO.  Thus, it's wrong to
select subsets of them by \selectlanguage.  Otherwise we probably run
into the same trouble we already have with font encodings on 8-bit
systems.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From st_philipp at yahoo.de  Sat Oct  9 00:32:33 2010
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Sat, 9 Oct 2010 00:32:33 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
Message-ID: <29CED6A8-CEE3-417B-886B-19EB4EF05BB8@yahoo.de>

Am 08.10.2010 um 11:21 schrieb Mojca Miklavec:

> Now imagine user B using some package that deals with Unicode and sets
> all the lccodes for the whole Unicode range.

Is that possible in current TeX implementations? The case mappings aren?t length-preserving?one character might map to more than one character (canonical example: ? ? SS), and they aren?t locale independent (canonical example: i ? I in English, but i ? ? in Turkish). AFAIK both things would require extensions to the lccode/uccode mechanism.

From arthur.reutenauer at normalesup.org  Sat Oct  9 00:37:01 2010
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Sat, 9 Oct 2010 00:37:01 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <29CED6A8-CEE3-417B-886B-19EB4EF05BB8@yahoo.de>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <29CED6A8-CEE3-417B-886B-19EB4EF05BB8@yahoo.de>
Message-ID: <20101008223701.GM2032@phare.normalesup.org>

> AFAIK both things would require extensions to the lccode/uccode mechanism.

  To the Unicode case mappings as well, for that matter.  They only
prescribe default one-to-one mappings that can be reproduced exactly by
the TeX mechanisms.  They're not supposed to be linguistically relevant
in all cases.

	Arthur

From st_philipp at yahoo.de  Sat Oct  9 01:13:28 2010
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Sat, 9 Oct 2010 01:13:28 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <20101008223701.GM2032@phare.normalesup.org>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <29CED6A8-CEE3-417B-886B-19EB4EF05BB8@yahoo.de>
 <20101008223701.GM2032@phare.normalesup.org>
Message-ID: <92C01652-68B4-4E70-9EE6-48EF7C85AA27@yahoo.de>


Am 09.10.2010 um 00:37 schrieb Arthur Reutenauer:

>> AFAIK both things would require extensions to the lccode/uccode mechanism.
> 
>  To the Unicode case mappings as well, for that matter.  They only
> prescribe default one-to-one mappings that can be reproduced exactly by
> the TeX mechanisms.  They're not supposed to be linguistically relevant
> in all cases.

section 3.13 does mention SpecialCasing.txt:

"The full case mappings for Unicode characters are obtained by using the mappings from SpecialCasing.txt plus the mappings from UnicodeData.txt, excluding any of the latter mappings that would conflict."

From ccomren at gmail.com  Sun Oct 10 18:24:05 2010
From: ccomren at gmail.com (C. Comren)
Date: Sun, 10 Oct 2010 18:24:05 +0200
Subject: [luatex] Use Math Glyphs from Text Font
In-Reply-To: <AANLkTikb2aSFLuELPjDUxg6QOgwq+2JoK0ZmOEf8vt0j@mail.gmail.com>
References: <AANLkTin3gT5gSmHOrx8ZKL9hr+7mLVxRui44c2xdHv5o@mail.gmail.com>
 <20101005203756.GA12291@khaled-laptop>
 <AANLkTimwnuo_y_EOOYc_6nFswptyH-NJixnUkdPaJOx2@mail.gmail.com>
 <AANLkTikb2aSFLuELPjDUxg6QOgwq+2JoK0ZmOEf8vt0j@mail.gmail.com>
Message-ID: <AANLkTimZv=ZO3Xjfq8LBxdMnUEWr=Tv3xQbueMFsJJcD@mail.gmail.com>

Thanks for the pointer. Unfortunately, the mathspec package does not
compile with LuaLaTeX. After looking at mathspec's code, I tried

\newfontface\myfont{MyFont}
\DeclareMathSymbol{A}{\mathalpha}{myfont}{`A}

It does not work either. Is it possible to access a font that was
loaded with fontspec (similar to the above) within DeclareMathSymbol?

On 10/8/10, Diederick C. Niehorster <dcnieho at gmail.com> wrote:
> On Wed, Oct 6, 2010 at 05:27, C. Comren <ccomren at gmail.com> wrote:
>>> Then you can use unicode-math package, check its documentation
>>> especially the "using multiple fonts section".
>>
>> I tried
>>
>> \setmathfont[range=\mathbfsfit/{greek,Greek}]{NameOfTheFont}
>>
>> LuaLaTeX complains that the font does not contain script "Math" and
>> produces a PDF without any math in it.
>
> You might also try using the mathspec package, although its designed
> only for Xe(La)TeX for as far as I know. It does the job of switching
> the latin and greek characters to a specified font, without touching
> operators. I am not sure if it works on luatex at all (actually, the
> fact that Khaled and Will didn't mention it probably means that it
> doesn't), but give it a spin.
>
> Best,
> Dee
>

From wspr81 at gmail.com  Mon Oct 11 10:33:57 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Mon, 11 Oct 2010 19:03:57 +1030
Subject: [luatex] Use Math Glyphs from Text Font
References: <AANLkTin3gT5gSmHOrx8ZKL9hr+7mLVxRui44c2xdHv5o@mail.gmail.com>
 <20101005203756.GA12291@khaled-laptop>
 <AANLkTimwnuo_y_EOOYc_6nFswptyH-NJixnUkdPaJOx2@mail.gmail.com>
 <AANLkTikb2aSFLuELPjDUxg6QOgwq+2JoK0ZmOEf8vt0j@mail.gmail.com>
 <AANLkTimZv=ZO3Xjfq8LBxdMnUEWr=Tv3xQbueMFsJJcD@mail.gmail.com>
Message-ID: <i8ui5l$een$1@dough.gmane.org>

On 2010-10-11 02:54:05 +1030, "C. Comren" 
<ccomren at gmail.com> said:

> Thanks for the pointer. Unfortunately, the mathspec package does not
> compile with LuaLaTeX. After looking at mathspec's code, I tried
> 
> \newfontface\myfont{MyFont}
> \DeclareMathSymbol{A}{\mathalpha}{myfont}{`A}
> 
> It does not work either. Is it possible to access a font that was
> loaded with fontspec (similar to the above) within DeclareMathSymbol?

Yes, but \DeclareMathSymbol only works for glyphs of slot < 256.
The fontspec equivalent would be something like

\newfontface\myfont{MyFont}
\makeatletter
\DeclareMathSymbol{A}{\mathalpha}{\zf at family}{`A}
\makeatother

or (probably better)

\ExplSyntaxOn
\fontspec_set_family:Nnn \myfont {} {MyFont}
\ExplSyntaxOff
\DeclareMathSymbol{A}{\mathalpha}{\myfont}{`A}

Cheers,
Will



From fterraza at free.fr  Fri Oct 15 15:18:35 2010
From: fterraza at free.fr (=?ISO-8859-1?Q?Fr=E9d=E9ric?=)
Date: Fri, 15 Oct 2010 15:18:35 +0200
Subject: [luatex] Problem using fourier (precisions)
Message-ID: <4CB854AB.6000308@free.fr>

If I compile with --output-format=dvi, the problem arises, but 
everything works fine if I compile with --output-format=pdf.

No problem in both format if I remove the fourier package (I didn't try 
other fonts package).

Fred

From fterraza at free.fr  Fri Oct 15 15:29:18 2010
From: fterraza at free.fr (=?ISO-8859-1?Q?Fr=E9d=E9ric?=)
Date: Fri, 15 Oct 2010 15:29:18 +0200
Subject: [luatex] Problem using fourier
Message-ID: <4CB8572E.2040504@free.fr>

It seems this message never reached the luatex list thanks zappathustra) 
so here it is again, with the precision. Sorry for the mess.

Hi,

I'm currently playing with TL2010, and can't have Fourier font working. 
This simple following example doesn't work (it compiles with classical 
pdfTeX though). I use --output-format=dvi. I have no error if I use 
--output-format=pdf !

\documentclass{article}

\usepackage{luainputenc}
\usepackage{fourier}

\begin{document}

bla

\end{document}


Here's the log file :

Running `LaTeX' on `luatex-fourier' with ``lualatex 
-jobname=luatex-fourier --output-format=dvi -shell-escape 
-interaction=nonstopmode "\input" luatex-fourier.tex''
This is LuaTeX, Version beta-0.60.2-2010071217 (TeX Live 2010) (rev 3736)
  \write18 enabled.
LaTeX2e <2009/09/24>
LuaTeX adaptation of babel <v3.8l-luatex-1.4> and hyphenation patterns 
for english, dumylang, nohyphenation, loaded.
(./luatex-fourier.tex
(/usr/local/texlive/2010/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class
(/usr/local/texlive/2010/texmf-dist/tex/latex/base/size10.clo))
(/usr/local/texlive/2010/texmf-dist/tex/lualatex/luainputenc/luainputenc.sty 

(/usr/local/texlive/2010/texmf-dist/tex/generic/oberdiek/ifluatex.sty)
(/usr/local/texlive/2010/texmf-dist/tex/generic/ifxetex/ifxetex.sty)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatextra/luatextra.sty
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase-modutils.sty 

(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase-loader.sty 


(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase-compat.sty) 

(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase.loader.lua)) 

(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/modutils.lua))
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase-attr.sty 

(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/attr.lua))
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase-cctb.sty 

(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/cctb.lua))
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase-regs.sty 

(/usr/local/texlive/2010/texmf-dist/tex/latex/etex-pkg/etex.sty))
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase-mcb.sty 

(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/mcb.lua))
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-string.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-lpeg.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-boolean.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-number.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-math.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-table.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-aux.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-io.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-os.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-file.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-md5.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-dir.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-unicode.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-utils.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-dimen.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-url.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-set.lua)
(/usr/local/texlive/2010/texmf-dist/tex/latex/environ/environ.sty)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luaotfload/luaotfload.sty
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luaotfload/luaotfload.lua)(using 
cache: ./luatex-cache/generic)))
(/usr/local/texlive/2010/texmf-dist/tex/lualatex/luainputenc/luainputenc.lua)) 

(/usr/local/texlive/2010/texmf-dist/tex/latex/fourier/fourier.sty
(/usr/local/texlive/2010/texmf-dist/tex/latex/base/fontenc.sty
(/usr/local/texlive/2010/texmf-dist/tex/latex/base/t1enc.def))
(/usr/local/texlive/2010/texmf-dist/tex/latex/base/textcomp.sty
(/usr/local/texlive/2010/texmf-dist/tex/latex/base/ts1enc.def))
(/usr/local/texlive/2010/texmf-dist/tex/latex/fourier/fourier-orns.sty))
(./luatex-fourier.aux)
(/usr/local/texlive/2010/texmf-dist/tex/latex/fourier/fmlfutm.fd)
(/usr/local/texlive/2010/texmf-dist/tex/latex/fourier/fmsfutm.fd)
(/usr/local/texlive/2010/texmf-dist/tex/latex/fourier/fmxfutm.fd)
(/usr/local/texlive/2010/texmf-dist/tex/latex/base/ts1cmr.fd)
(/usr/local/texlive/2010/texmf-dist/tex/latex/fourier/t1futs.fd)
lualatex: ../../../texk/web2c/luatexdir/pdf/pdffont.w:67: 
output_one_char: Assertion `pdf->o_mode==OMODE_PDF' failed.
checksum mismatch in font futr8t.vf ignored  [1Aborted

LaTeX exited abnormally with code 134 at Thu Oct 14 23:28:47

I have absolutely no idea of the problem and its workaround.

Thanks for any help

From fterraza at free.fr  Fri Oct 15 13:08:09 2010
From: fterraza at free.fr (=?ISO-8859-1?Q?Fr=E9d=E9ric?=)
Date: Fri, 15 Oct 2010 13:08:09 +0200
Subject: [luatex] Problem using Fourier
Message-ID: <4CB83619.2050002@free.fr>

Hi,

I'm currently playing with TL2010, and can't have Fourier font working. 
This simple following example doesn't work (it compiles with classical 
pdfTeX though) :

\documentclass{article}

\usepackage{luainputenc}
\usepackage{fourier}

\begin{document}

bla

\end{document}


Here's the log file :

Running `LaTeX' on `luatex-fourier' with ``lualatex 
-jobname=luatex-fourier --output-format=dvi -shell-escape 
-interaction=nonstopmode "\input" luatex-fourier.tex''
This is LuaTeX, Version beta-0.60.2-2010071217 (TeX Live 2010) (rev 3736)
  \write18 enabled.
LaTeX2e <2009/09/24>
LuaTeX adaptation of babel <v3.8l-luatex-1.4> and hyphenation patterns 
for english, dumylang, nohyphenation, loaded.
(./luatex-fourier.tex
(/usr/local/texlive/2010/texmf-dist/tex/latex/base/article.cls
Document Class: article 2007/10/19 v1.4h Standard LaTeX document class
(/usr/local/texlive/2010/texmf-dist/tex/latex/base/size10.clo))
(/usr/local/texlive/2010/texmf-dist/tex/lualatex/luainputenc/luainputenc.sty 

(/usr/local/texlive/2010/texmf-dist/tex/generic/oberdiek/ifluatex.sty)
(/usr/local/texlive/2010/texmf-dist/tex/generic/ifxetex/ifxetex.sty)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatextra/luatextra.sty
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase-modutils.sty 

(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase-loader.sty 


(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase-compat.sty) 

(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase.loader.lua)) 

(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/modutils.lua))
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase-attr.sty 

(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/attr.lua))
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase-cctb.sty 

(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/cctb.lua))
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase-regs.sty 

(/usr/local/texlive/2010/texmf-dist/tex/latex/etex-pkg/etex.sty))
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/luatexbase-mcb.sty 

(/usr/local/texlive/2010/texmf-dist/tex/luatex/luatexbase/mcb.lua))
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-string.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-lpeg.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-boolean.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-number.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-math.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-table.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-aux.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-io.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-os.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-file.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-md5.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-dir.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-unicode.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-utils.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-dimen.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-url.lua)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/lualibs/lualibs-set.lua)
(/usr/local/texlive/2010/texmf-dist/tex/latex/environ/environ.sty)
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luaotfload/luaotfload.sty
(/usr/local/texlive/2010/texmf-dist/tex/luatex/luaotfload/luaotfload.lua)(using 
cache: ./luatex-cache/generic)))
(/usr/local/texlive/2010/texmf-dist/tex/lualatex/luainputenc/luainputenc.lua)) 

(/usr/local/texlive/2010/texmf-dist/tex/latex/fourier/fourier.sty
(/usr/local/texlive/2010/texmf-dist/tex/latex/base/fontenc.sty
(/usr/local/texlive/2010/texmf-dist/tex/latex/base/t1enc.def))
(/usr/local/texlive/2010/texmf-dist/tex/latex/base/textcomp.sty
(/usr/local/texlive/2010/texmf-dist/tex/latex/base/ts1enc.def))
(/usr/local/texlive/2010/texmf-dist/tex/latex/fourier/fourier-orns.sty))
(./luatex-fourier.aux)
(/usr/local/texlive/2010/texmf-dist/tex/latex/fourier/fmlfutm.fd)
(/usr/local/texlive/2010/texmf-dist/tex/latex/fourier/fmsfutm.fd)
(/usr/local/texlive/2010/texmf-dist/tex/latex/fourier/fmxfutm.fd)
(/usr/local/texlive/2010/texmf-dist/tex/latex/base/ts1cmr.fd)
(/usr/local/texlive/2010/texmf-dist/tex/latex/fourier/t1futs.fd)
lualatex: ../../../texk/web2c/luatexdir/pdf/pdffont.w:67: 
output_one_char: Assertion `pdf->o_mode==OMODE_PDF' failed.
checksum mismatch in font futr8t.vf ignored  [1Aborted

LaTeX exited abnormally with code 134 at Thu Oct 14 23:28:47

I have absolutely no idea of the problem and its workaround.

Thanks for any help

From luigi.scarso at gmail.com  Fri Oct 15 19:24:02 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Fri, 15 Oct 2010 19:24:02 +0200
Subject: [luatex] typo in luatexref-t.tex
Message-ID: <AANLkTimBQ8fkes8ffy0F5FP1fqb+vSFzdwf+6h5kye3Q@mail.gmail.com>

doc = epdf.open {"foo.pdf"}
should be
doc = epdf.open("foo.pdf")

-- 
luigi

From hartmut_henkel at gmx.de  Sat Oct 16 00:19:14 2010
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Sat, 16 Oct 2010 00:19:14 +0200 (CEST)
Subject: [luatex] Problem using fourier (precisions)
In-Reply-To: <4CB854AB.6000308@free.fr>
References: <4CB854AB.6000308@free.fr>
Message-ID: <alpine.DEB.2.00.1010160011440.4382@hahepc1.hahe>

On Fri, 15 Oct 2010, Fr?d?ric wrote:

> If I compile with --output-format=dvi, the problem arises, but everything
> works fine if I compile with --output-format=pdf.
>
> No problem in both format if I remove the fourier package (I didn't try other
> fonts package).

seems to be a bug: somehow luatex uses a virtual font in DVI mode (which
garbles up the PDF font machinery), but instead it should ignore any .vf
file (virtual fonts should matter only to external dvi backend drivers
like dvipdfmx).

Regards, Hartmut

From taco at elvenkind.com  Sat Oct 16 09:07:16 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 16 Oct 2010 09:07:16 +0200
Subject: [luatex] Problem using fourier (precisions)
In-Reply-To: <alpine.DEB.2.00.1010160011440.4382@hahepc1.hahe>
References: <4CB854AB.6000308@free.fr>
 <alpine.DEB.2.00.1010160011440.4382@hahepc1.hahe>
Message-ID: <4CB94F24.7060407@elvenkind.com>

On 10/16/2010 12:19 AM, Hartmut Henkel wrote:
> On Fri, 15 Oct 2010, Fr?d?ric wrote:
>
>> If I compile with --output-format=dvi, the problem arises, but everything
>> works fine if I compile with --output-format=pdf.
>>
>> No problem in both format if I remove the fourier package (I didn't try other
>> fonts package).
>
> seems to be a bug:

Yes, but not an easily fixable one, so it will be with us for some time
yet.

Best wishes,
Taco

From fterraza at free.fr  Sat Oct 16 13:40:42 2010
From: fterraza at free.fr (=?ISO-8859-1?Q?Fr=E9d=E9ric?=)
Date: Sat, 16 Oct 2010 13:40:42 +0200
Subject: [luatex] luainputenc and inputenc
Message-ID: <4CB98F3A.30204@free.fr>

Hi,

if I compile this code with pdflatex, utf8 isn't properly handled (if I 
change luainputenc to inputenc, it's ok) :

\documentclass{article}

\usepackage[utf8]{luainputenc}
\usepackage[T1]{fontenc}
\usepackage{fourier}

\begin{document}

c?p?b?

\end{document}

Is it normal ?

From st_philipp at yahoo.de  Sat Oct 16 14:37:57 2010
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Sat, 16 Oct 2010 14:37:57 +0200
Subject: [luatex] luainputenc and inputenc
In-Reply-To: <4CB98F3A.30204@free.fr>
References: <4CB98F3A.30204@free.fr>
Message-ID: <A2F0C686-2951-47A9-AE5E-5752BCDE20B5@yahoo.de>

Am 16.10.2010 um 13:40 schrieb Fr?d?ric:

> Hi,
> 
> if I compile this code with pdflatex, utf8 isn't properly handled (if I change luainputenc to inputenc, it's ok) :
> 
> \documentclass{article}
> 
> \usepackage[utf8]{luainputenc}
> \usepackage[T1]{fontenc}
> \usepackage{fourier}
> 
> \begin{document}
> 
> c?p?b?
> 
> \end{document}
> 
> Is it normal ?

luainputenc is only for lualatex. If you want to compile with pdflatex, use inputenc instead. When compiling with lualatex, however, \usepackage[utf8]{luainputenc} is unnecessary because UTF-8 is already the default. If you want to be compatible with all three major engines, use a switch like the following:

\usepackage{iftex}
\ifPDFTeX
\usepackage[utf8]{inputenc}
\fi

From Robin.Fairbairns at cl.cam.ac.uk  Sat Oct 16 14:44:09 2010
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Sat, 16 Oct 2010 13:44:09 +0100
Subject: [luatex] luainputenc and inputenc
In-Reply-To: Your message of Sat, 16 Oct 2010 13:40:42 +0200.
 <4CB98F3A.30204@free.fr>
Message-ID: <9560.1287233049@cl.cam.ac.uk>

Fr?d?ric <fterraza at free.fr> wrote:

> if I compile this code with pdflatex, utf8 isn't properly handled (if
> I change luainputenc to inputenc, it's ok) :
> 
> \documentclass{article}
> 
> \usepackage[utf8]{luainputenc}
> \usepackage[T1]{fontenc}
> \usepackage{fourier}
> 
> \begin{document}
> 
> c?p?b?
> 
> \end{document}
> 
> Is it normal ?

the "lua" in the package name tells us it's a *lua*latex package.

lualatex treats its input in a very different way; i don't find it
surprising *at all* that luainputenc doesn't work with pdflatex.

r



From ccomren at gmail.com  Sat Oct 16 14:45:44 2010
From: ccomren at gmail.com (C. Comren)
Date: Sat, 16 Oct 2010 14:45:44 +0200
Subject: [luatex] Use Math Glyphs from Text Font
In-Reply-To: <i8ui5l$een$1@dough.gmane.org>
References: <AANLkTin3gT5gSmHOrx8ZKL9hr+7mLVxRui44c2xdHv5o@mail.gmail.com>
 <20101005203756.GA12291@khaled-laptop>
 <AANLkTimwnuo_y_EOOYc_6nFswptyH-NJixnUkdPaJOx2@mail.gmail.com>
 <AANLkTikb2aSFLuELPjDUxg6QOgwq+2JoK0ZmOEf8vt0j@mail.gmail.com>
 <AANLkTimZv=ZO3Xjfq8LBxdMnUEWr=Tv3xQbueMFsJJcD@mail.gmail.com>
 <i8ui5l$een$1@dough.gmane.org>
Message-ID: <AANLkTi=r7mp7-kdWTWrXRJEzwomV9mGanrmeK82ad9sq@mail.gmail.com>

> \newfontface\myfont{MyFont}
> \makeatletter
> \DeclareMathSymbol{A}{\mathalpha}{\zf at family}{`A}
> \makeatother
>
> or (probably better)
>
> \ExplSyntaxOn
> \fontspec_set_family:Nnn \myfont {} {MyFont}
> \ExplSyntaxOff
> \DeclareMathSymbol{A}{\mathalpha}{\myfont}{`A}

Thanks for your suggestion. However, I get the error message

! LaTeX Error: Symbol font `MyFont(0)' is not defined.

Thanks,
CC

From elie.roux at telecom-bretagne.eu  Sat Oct 16 15:07:07 2010
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Sat, 16 Oct 2010 15:07:07 +0200
Subject: [luatex] luainputenc and inputenc
In-Reply-To: <9560.1287233049@cl.cam.ac.uk>
References: <9560.1287233049@cl.cam.ac.uk>
Message-ID: <4CB9A37B.7080304@telecom-bretagne.eu>

Robin Fairbairns a ?crit :
> 
> the "lua" in the package name tells us it's a *lua*latex package.
> 
> lualatex treats its input in a very different way; i don't find it
> surprising *at all* that luainputenc doesn't work with pdflatex.


Actually it was supposed to work when I first made the package, so that 
people could keep luainputenc with XeTeX and pdfTeX... There must be 
something wrong around line 383 of the dtx file.

Thank you,
-- 
Elie

From dcnieho at gmail.com  Sun Oct 17 03:22:56 2010
From: dcnieho at gmail.com (Diederick C. Niehorster)
Date: Sun, 17 Oct 2010 09:22:56 +0800
Subject: [luatex] Use Math Glyphs from Text Font
In-Reply-To: <AANLkTi=r7mp7-kdWTWrXRJEzwomV9mGanrmeK82ad9sq@mail.gmail.com>
References: <AANLkTin3gT5gSmHOrx8ZKL9hr+7mLVxRui44c2xdHv5o@mail.gmail.com>
 <20101005203756.GA12291@khaled-laptop>
 <AANLkTimwnuo_y_EOOYc_6nFswptyH-NJixnUkdPaJOx2@mail.gmail.com>
 <AANLkTikb2aSFLuELPjDUxg6QOgwq+2JoK0ZmOEf8vt0j@mail.gmail.com>
 <AANLkTimZv=ZO3Xjfq8LBxdMnUEWr=Tv3xQbueMFsJJcD@mail.gmail.com>
 <i8ui5l$een$1@dough.gmane.org>
 <AANLkTi=r7mp7-kdWTWrXRJEzwomV9mGanrmeK82ad9sq@mail.gmail.com>
Message-ID: <AANLkTi=Y+e7-cDSiO3ovtxqmuYP_qZn4zsoSREOgcD0i@mail.gmail.com>

Hi CC,

I'm just going out on a limb here, dont really know, but probably the
MyFont in "\fontspec_set_family:Nnn \myfont {} {MyFont}" needs to be
replaced with the name of the font you actually want to use.

Best,
Dee

On Sat, Oct 16, 2010 at 20:45, C. Comren <ccomren at gmail.com> wrote:
>> \newfontface\myfont{MyFont}
>> \makeatletter
>> \DeclareMathSymbol{A}{\mathalpha}{\zf at family}{`A}
>> \makeatother
>>
>> or (probably better)
>>
>> \ExplSyntaxOn
>> \fontspec_set_family:Nnn \myfont {} {MyFont}
>> \ExplSyntaxOff
>> \DeclareMathSymbol{A}{\mathalpha}{\myfont}{`A}
>
> Thanks for your suggestion. However, I get the error message
>
> ! LaTeX Error: Symbol font `MyFont(0)' is not defined.
>
> Thanks,
> CC
>

From wspr81 at gmail.com  Sun Oct 17 07:48:33 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Sun, 17 Oct 2010 16:18:33 +1030
Subject: [luatex] Use Math Glyphs from Text Font
References: <AANLkTin3gT5gSmHOrx8ZKL9hr+7mLVxRui44c2xdHv5o@mail.gmail.com>
 <20101005203756.GA12291@khaled-laptop>
 <AANLkTimwnuo_y_EOOYc_6nFswptyH-NJixnUkdPaJOx2@mail.gmail.com>
 <AANLkTikb2aSFLuELPjDUxg6QOgwq+2JoK0ZmOEf8vt0j@mail.gmail.com>
 <AANLkTimZv=ZO3Xjfq8LBxdMnUEWr=Tv3xQbueMFsJJcD@mail.gmail.com>
 <i8ui5l$een$1@dough.gmane.org>
 <AANLkTi=r7mp7-kdWTWrXRJEzwomV9mGanrmeK82ad9sq@mail.gmail.com>
Message-ID: <i9e2nh$qdc$1@dough.gmane.org>

On 2010-10-16 23:15:44 +1030, "C. Comren" 
<ccomren at gmail.com> said:

>> \newfontface\myfont{MyFont}
>> \makeatletter
>> \DeclareMathSymbol{A}{\mathalpha}{\zf at family}{`A}
>> \makeatother
>> 
>> or (probably better)
>> 
>> \ExplSyntaxOn
>> \fontspec_set_family:Nnn \myfont {} {MyFont}
>> \ExplSyntaxOff
>> \DeclareMathSymbol{A}{\mathalpha}{\myfont}{`A}
> 
> Thanks for your suggestion. However, I get the error message
> 
> ! LaTeX Error: Symbol font `MyFont(0)' is not defined.


Not sure what I was thinking, really. This should work better:

\ExplSyntaxOn
\fontspec_set_family:Nnn \myfont {} {MyFont}
\ExplSyntaxOff
\DeclareSymbolFont{EU2}{mysymfont}{\myfont}{m}{n}
\DeclareMathSymbol{A}{\mathalpha}{mysymfont}{`A}

Will



From luatex at nililand.de  Sun Oct 17 15:26:51 2010
From: luatex at nililand.de (Ulrike Fischer)
Date: Sun, 17 Oct 2010 15:26:51 +0200
Subject: [luatex] luainputenc and inputenc
References: <9560.1287233049@cl.cam.ac.uk>
 <4CB9A37B.7080304@telecom-bretagne.eu>
Message-ID: <dc9dnn68bq47.dlg@nililand.de>

Am Sat, 16 Oct 2010 15:07:07 +0200 schrieb Elie Roux:

> Robin Fairbairns a ?crit :
>> 
>> the "lua" in the package name tells us it's a *lua*latex package.
>> 
>> lualatex treats its input in a very different way; i don't find it
>> surprising *at all* that luainputenc doesn't work with pdflatex.
> 
> 
> Actually it was supposed to work when I first made the package, so that 
> people could keep luainputenc with XeTeX and pdfTeX... There must be 
> something wrong around line 383 of the dtx file.

Well it would be certainly a good idea to declare the options utf8
etc *before* actually loading inputenc (or xetex-inputenc) if you
want inputenc to acually use this options.  

\ifluatex\else
  
%\RequirePackage{inputenc} % move to the end 
\DeclareOption{unactivate}{\PassOptionsToPackage{utf8}{inputenc}}

\DeclareOption{lutf8}{\PassOptionsToPackage{utf8}{inputenc}}

\DeclareOption{lutf8x}{\PassOptionsToPackage{utf8}{inputenc}}

\DeclareOption*{\PassOptionsToPackage{\CurrentOption}{inputenc}}

\ProcessOptions*
 
\RequirePackage{inputenc}
%new place 
\expandafter\endinput
\fi


-- 
Ulrike Fischer 


From ccomren at gmail.com  Mon Oct 18 11:04:52 2010
From: ccomren at gmail.com (C. Comren)
Date: Mon, 18 Oct 2010 11:04:52 +0200
Subject: [luatex] Use Math Glyphs from Text Font
In-Reply-To: <i9e2nh$qdc$1@dough.gmane.org>
References: <AANLkTin3gT5gSmHOrx8ZKL9hr+7mLVxRui44c2xdHv5o@mail.gmail.com>
 <20101005203756.GA12291@khaled-laptop>
 <AANLkTimwnuo_y_EOOYc_6nFswptyH-NJixnUkdPaJOx2@mail.gmail.com>
 <AANLkTikb2aSFLuELPjDUxg6QOgwq+2JoK0ZmOEf8vt0j@mail.gmail.com>
 <AANLkTimZv=ZO3Xjfq8LBxdMnUEWr=Tv3xQbueMFsJJcD@mail.gmail.com>
 <i8ui5l$een$1@dough.gmane.org>
 <AANLkTi=r7mp7-kdWTWrXRJEzwomV9mGanrmeK82ad9sq@mail.gmail.com>
 <i9e2nh$qdc$1@dough.gmane.org>
Message-ID: <AANLkTineRM_3VbY95JL2omaGKr9Z570+_VbqQ=PChvDi@mail.gmail.com>

> \ExplSyntaxOn
> \fontspec_set_family:Nnn \myfont {} {MyFont}
> \ExplSyntaxOff
> \DeclareSymbolFont{EU2}{mysymfont}{\myfont}{m}{n}
> \DeclareMathSymbol{A}{\mathalpha}{mysymfont}{`A}

After getting an error, I changed it to

\DeclareSymbolFont{mysymfont}{EU2}{\myfont}{m}{n}

and it works perfectly. Thanks.

Now I just need a way to change the Greek alphabet.

Best,
CC

From wspr81 at gmail.com  Mon Oct 18 16:49:19 2010
From: wspr81 at gmail.com (Will Robertson)
Date: Tue, 19 Oct 2010 01:19:19 +1030
Subject: [luatex] Use Math Glyphs from Text Font
References: <AANLkTin3gT5gSmHOrx8ZKL9hr+7mLVxRui44c2xdHv5o@mail.gmail.com>
 <20101005203756.GA12291@khaled-laptop>
 <AANLkTimwnuo_y_EOOYc_6nFswptyH-NJixnUkdPaJOx2@mail.gmail.com>
 <AANLkTikb2aSFLuELPjDUxg6QOgwq+2JoK0ZmOEf8vt0j@mail.gmail.com>
 <AANLkTimZv=ZO3Xjfq8LBxdMnUEWr=Tv3xQbueMFsJJcD@mail.gmail.com>
 <i8ui5l$een$1@dough.gmane.org>
 <AANLkTi=r7mp7-kdWTWrXRJEzwomV9mGanrmeK82ad9sq@mail.gmail.com>
 <i9e2nh$qdc$1@dough.gmane.org>
 <AANLkTineRM_3VbY95JL2omaGKr9Z570+_VbqQ=PChvDi@mail.gmail.com>
Message-ID: <i9hmpf$39t$1@dough.gmane.org>

On 2010-10-18 19:34:52 +1030, "C. Comren" 
<ccomren at gmail.com> said:
> 
> Now I just need a way to change the Greek alphabet.

Try this:

\makeatletter
\def\DeclareUnicodeMathSymbol#1#2#3#4{
  \global\luatexUmathchardef#1=
    "\mathchar at type#2
    "\the\csname sym#3\endcsname
    #4
}
\makeatother
\DeclareUnicodeMathSymbol{\alpha}{\mathalpha}{mysymfont}{"1D6FC}

(don't use it with literal input chars; only control sequences like 
\alpha are allowed)

I guess I should provide something like this in unicode-math, really. 
This was the original idea, actually, and then it ballooned out of 
control when I was young and naive.

W



From ccomren at gmail.com  Mon Oct 18 21:03:48 2010
From: ccomren at gmail.com (C. Comren)
Date: Mon, 18 Oct 2010 21:03:48 +0200
Subject: [luatex] Use Math Glyphs from Text Font
In-Reply-To: <i9hmpf$39t$1@dough.gmane.org>
References: <AANLkTin3gT5gSmHOrx8ZKL9hr+7mLVxRui44c2xdHv5o@mail.gmail.com>
 <20101005203756.GA12291@khaled-laptop>
 <AANLkTimwnuo_y_EOOYc_6nFswptyH-NJixnUkdPaJOx2@mail.gmail.com>
 <AANLkTikb2aSFLuELPjDUxg6QOgwq+2JoK0ZmOEf8vt0j@mail.gmail.com>
 <AANLkTimZv=ZO3Xjfq8LBxdMnUEWr=Tv3xQbueMFsJJcD@mail.gmail.com>
 <i8ui5l$een$1@dough.gmane.org>
 <AANLkTi=r7mp7-kdWTWrXRJEzwomV9mGanrmeK82ad9sq@mail.gmail.com>
 <i9e2nh$qdc$1@dough.gmane.org>
 <AANLkTineRM_3VbY95JL2omaGKr9Z570+_VbqQ=PChvDi@mail.gmail.com>
 <i9hmpf$39t$1@dough.gmane.org>
Message-ID: <AANLkTi=jDo3geb8EDBRpG_6ey5tGLW3oDE6r4drUra5P@mail.gmail.com>

Thanks a lot. It works like a charm.

On 10/18/10, Will Robertson <wspr81 at gmail.com> wrote:
> On 2010-10-18 19:34:52 +1030, "C. Comren"
> <ccomren at gmail.com> said:
>>
>> Now I just need a way to change the Greek alphabet.
>
> Try this:
>
> \makeatletter
> \def\DeclareUnicodeMathSymbol#1#2#3#4{
>   \global\luatexUmathchardef#1=
>     "\mathchar at type#2
>     "\the\csname sym#3\endcsname
>     #4
> }
> \makeatother
> \DeclareUnicodeMathSymbol{\alpha}{\mathalpha}{mysymfont}{"1D6FC}
>
> (don't use it with literal input chars; only control sequences like
> \alpha are allowed)
>
> I guess I should provide something like this in unicode-math, really.
> This was the original idea, actually, and then it ballooned out of
> control when I was young and naive.
>
> W
>
>
>

From scott at pakin.org  Tue Oct 19 02:19:27 2010
From: scott at pakin.org (Scott Pakin)
Date: Mon, 18 Oct 2010 18:19:27 -0600
Subject: [luatex] Bug involving rubber lengths
Message-ID: <4CBCE40F.9070204@pakin.org>

The following document builds with latex, pdflatex, and xelatex but
not with lualatex:

    \documentclass{minimal}
    \usepackage{phonetic}
    \begin{document}
    Hello, \vod!
    \end{document}

Here's the error message I'm getting:

    ! Missing { inserted.
    <inserted text>
                    {
    l.4 Hello, \vod
                   !

\vod is defined as follows in phonetic.sty:

    \def\vod{\oalign{v\crcr\noalign{\vskip-.4ex}\hidewidth\vbox to.4ex{\hbox{\char'27}\hideheight}\hidewidth}}

The problem seems to be with the \hideheight, which is defined as

    \def\hideheight{\vskip-1000pt plus 1fill}

Enrico Gregorio observed (on comp.text.tex, thread "Problem with
rubber lengths in lualatex") that adding a space after the "1fill"
eliminates the problem:

    \def\hideheight{\vskip-1000pt plus 1fill }

Still, there seems to be a problem with the way that luatex handles
keywords like "fill" (which can contain varying numbers of l's).

Regards,
-- Scott

From taco at elvenkind.com  Tue Oct 19 10:48:02 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 19 Oct 2010 10:48:02 +0200
Subject: [luatex] Bug involving rubber lengths
In-Reply-To: <4CBCE40F.9070204@pakin.org>
References: <4CBCE40F.9070204@pakin.org>
Message-ID: <4CBD5B42.5080501@elvenkind.com>

On 10/19/2010 02:19 AM, Scott Pakin wrote:
>
> Still, there seems to be a problem with the way that luatex handles
> keywords like "fill" (which can contain varying numbers of l's).

In luatex there are four explicit keywords:

   filll
   fill
   fil
   fi (this one is from Aleph)

And it seems there is a problem with the chaining of the keyword match
test, because as another workaround this also works:

   \def\hideheight{\vskip-1000pt plus 1filll}

I'll try to fix the problem.

Best wishes,
Taco





From st_philipp at yahoo.de  Tue Oct 19 12:12:39 2010
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Tue, 19 Oct 2010 12:12:39 +0200
Subject: [luatex] Bug involving rubber lengths
In-Reply-To: <4CBD5B42.5080501@elvenkind.com>
References: <4CBCE40F.9070204@pakin.org> <4CBD5B42.5080501@elvenkind.com>
Message-ID: <E74066A5-8583-4903-B9FD-106F2E656130@yahoo.de>


Am 19.10.2010 um 10:48 schrieb Taco Hoekwater:

> On 10/19/2010 02:19 AM, Scott Pakin wrote:
>> 
>> Still, there seems to be a problem with the way that luatex handles
>> keywords like "fill" (which can contain varying numbers of l's).
> 
> In luatex there are four explicit keywords:
> 
>  filll
>  fill
>  fil

That makes luatex incompatible with tex/pdftex/xetex because "l" is a separate keyword that can be separated by spaces:

a\hskip 0pt plus 1fIl L la
\bye

This should print a left-aligned "a" and a right-aligned "a", but in LuaTeX prints a left-aligned "a" and a centered "L la".

From taco at elvenkind.com  Tue Oct 19 12:15:11 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 19 Oct 2010 12:15:11 +0200
Subject: [luatex] Bug involving rubber lengths
In-Reply-To: <E74066A5-8583-4903-B9FD-106F2E656130@yahoo.de>
References: <4CBCE40F.9070204@pakin.org> <4CBD5B42.5080501@elvenkind.com>
 <E74066A5-8583-4903-B9FD-106F2E656130@yahoo.de>
Message-ID: <F34F331B-CE71-4736-91A3-9A0BCF5E043F@elvenkind.com>


On Oct 19, 2010, at 12:12 PM, Philipp Stephani wrote:

> 
> Am 19.10.2010 um 10:48 schrieb Taco Hoekwater:
> 
>> On 10/19/2010 02:19 AM, Scott Pakin wrote:
>>> 
>>> Still, there seems to be a problem with the way that luatex handles
>>> keywords like "fill" (which can contain varying numbers of l's).
>> 
>> In luatex there are four explicit keywords:
>> 
>> filll
>> fill
>> fil
> 
> That makes luatex incompatible with tex/pdftex/xetex because 

Yes, and it is already documented as such in the manual.





From patrick at gundla.ch  Tue Oct 19 12:16:41 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Tue, 19 Oct 2010 12:16:41 +0200
Subject: [luatex] Bug involving rubber lengths
In-Reply-To: <E74066A5-8583-4903-B9FD-106F2E656130@yahoo.de>
References: <4CBCE40F.9070204@pakin.org> <4CBD5B42.5080501@elvenkind.com>
 <E74066A5-8583-4903-B9FD-106F2E656130@yahoo.de>
Message-ID: <D299613C-59ED-4736-BEC7-57FB78E838B4@gundla.ch>

Hi,

>> In luatex there are four explicit keywords:
>> 
>> filll
>> fill
>> fil
> 
> That makes luatex incompatible with tex/pdftex/xetex because "l" is a separate keyword that can be separated by spaces:
> 
> a\hskip 0pt plus 1fIl L la
> \bye

I wonder how many users depend on/use that feature. 

Patrick



From Robin.Fairbairns at cl.cam.ac.uk  Tue Oct 19 16:09:23 2010
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Tue, 19 Oct 2010 15:09:23 +0100
Subject: [luatex] Bug involving rubber lengths
In-Reply-To: Your message of Tue, 19 Oct 2010 12:16:41 +0200.
 <D299613C-59ED-4736-BEC7-57FB78E838B4@gundla.ch>
Message-ID: <6103.1287497363@cl.cam.ac.uk>

Patrick Gundlach <patrick at gundla.ch> wrote:

> >> In luatex there are four explicit keywords:
> >> 
> >> filll
> >> fill
> >> fil
> > 
> > That makes luatex incompatible with tex/pdftex/xetex because "l" is a separate keyword that can be separated by spaces:
> > 
> > a\hskip 0pt plus 1fIl L la
> > \bye
> 
> I wonder how many users depend on/use that feature. 

trip test?

i really wouldn't fault taco for failing to provide such an insane
mechanism.

robin

From heiko.oberdiek at googlemail.com  Tue Oct 19 17:23:53 2010
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Tue, 19 Oct 2010 17:23:53 +0200
Subject: [luatex] Bug involving rubber lengths
In-Reply-To: <F34F331B-CE71-4736-91A3-9A0BCF5E043F@elvenkind.com>
References: <4CBCE40F.9070204@pakin.org> <4CBD5B42.5080501@elvenkind.com>
 <E74066A5-8583-4903-B9FD-106F2E656130@yahoo.de>
 <F34F331B-CE71-4736-91A3-9A0BCF5E043F@elvenkind.com>
Message-ID: <20101019152352.GA8339@oberdiek.my-fqdn.de>

On Tue, Oct 19, 2010 at 12:15:11PM +0200, Taco Hoekwater wrote:

> On Oct 19, 2010, at 12:12 PM, Philipp Stephani wrote:
> 
> > 
> > Am 19.10.2010 um 10:48 schrieb Taco Hoekwater:
> > 
> >> On 10/19/2010 02:19 AM, Scott Pakin wrote:
> >>> 
> >>> Still, there seems to be a problem with the way that luatex handles
> >>> keywords like "fill" (which can contain varying numbers of l's).
> >> 
> >> In luatex there are four explicit keywords:
> >> 
> >> filll
> >> fill
> >> fil
> > 
> > That makes luatex incompatible with tex/pdftex/xetex because 
> 
> Yes, and it is already documented as such in the manual.

Addition for the manual for section "9.2 Changes from e-TeX 2.2":

* \gluestretchorder and \glueshrinkorder are changed because of
  the new keyword "fi" from aleph. They are using
  0 for pt, 1 for fi, 2 for fil, 3 for fill, 4 for filll.
  (e-TeX uses 0 for pt, 1 for fil, 2 for fill, 3 for filll.)

Yours sincerely
  Heiko Oberdiek

From taco at elvenkind.com  Tue Oct 19 17:24:37 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 19 Oct 2010 17:24:37 +0200
Subject: [luatex] Bug involving rubber lengths
In-Reply-To: <6103.1287497363@cl.cam.ac.uk>
References: <6103.1287497363@cl.cam.ac.uk>
Message-ID: <4CBDB835.7020407@elvenkind.com>

On 10/19/2010 04:09 PM, Robin Fairbairns wrote:
> Patrick Gundlach<patrick at gundla.ch>  wrote:
>
>>>> In luatex there are four explicit keywords:
>>>>
>>>> filll
>>>> fill
>>>> fil
>>>
>>> That makes luatex incompatible with tex/pdftex/xetex because "l" is a separate keyword that can be separated by spaces:
>>>
>>> a\hskip 0pt plus 1fIl L la
>>> \bye
>>
>> I wonder how many users depend on/use that feature.
>
> trip test?

Yes. Then again, that fails in myriad small ways, nor does it test
any of the new code, so I have not paid any attention to it so far.
The trip test failures are something to evaluate in the step from
luatex 0.9 to 1.0.

In general though, to anybody who wants all of the idiosyncrasies
of TeX82 to be retained a 100%:

   luatex is not for you.

Some of TeX82's behaviors are just too obscure to be transfered to
a program whose internals are supposed to be extensible and accessible
(and the "l" keyword is one of those).

Best wishes,
Taco

From Robin.Fairbairns at cl.cam.ac.uk  Tue Oct 19 17:42:23 2010
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Tue, 19 Oct 2010 16:42:23 +0100
Subject: [luatex] Bug involving rubber lengths
In-Reply-To: Your message of Tue, 19 Oct 2010 17:24:37 +0200.
 <4CBDB835.7020407@elvenkind.com>
Message-ID: <7587.1287502943@cl.cam.ac.uk>

Taco Hoekwater <taco at elvenkind.com> wrote:

> On 10/19/2010 04:09 PM, Robin Fairbairns wrote:
> > Patrick Gundlach<patrick at gundla.ch>  wrote:
> >
> >>>> In luatex there are four explicit keywords:
> >>>>
> >>>> filll
> >>>> fill
> >>>> fil
> >>>
> >>> That makes luatex incompatible with tex/pdftex/xetex because "l" is a separate keyword that can be separated by spaces:
> >>>
> >>> a\hskip 0pt plus 1fIl L la
> >>> \bye
> >>
> >> I wonder how many users depend on/use that feature.
> >
> > trip test?
> 
> Yes. Then again, that fails in myriad small ways, nor does it test
> any of the new code, so I have not paid any attention to it so far.
> The trip test failures are something to evaluate in the step from
> luatex 0.9 to 1.0.

well, quite.  there's quite a lot of things don't get tested by trip.

(and you omitted my suggestion that tex's fi[l*] behaviour is hardly
something to yearn after)

> In general though, to anybody who wants all of the idiosyncrasies
> of TeX82 to be retained a 100%:
> 
>   luatex is not for you.

there are no doubt such people, who're still hankering after luatex, but
it's hard to see how one might satisfy them.

From martin at oneiros.de  Tue Oct 19 22:32:15 2010
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Tue, 19 Oct 2010 22:32:15 +0200
Subject: [luatex] Bug involving rubber lengths
In-Reply-To: <4CBDB835.7020407@elvenkind.com>
References: <6103.1287497363@cl.cam.ac.uk>
	<4CBDB835.7020407@elvenkind.com>
Message-ID: <AANLkTimX1gQhAYm8oc7ax6BxMktuFE8uaWC_E8ygq2h-@mail.gmail.com>

2010/10/19 Taco Hoekwater <taco at elvenkind.com>:
> In general though, to anybody who wants all of the idiosyncrasies
> of TeX82 to be retained a 100%:
>
> ?luatex is not for you.

I know that. >99% of TeX90 would be nice, though. :-)

Best
   Martin


From list at nililand.de  Fri Oct 22 16:44:14 2010
From: list at nililand.de (Ulrike Fischer)
Date: Fri, 22 Oct 2010 16:44:14 +0200
Subject: [luatex] Hyphenation in plain TeX
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <20101008131403.GM17803@smoon> <4CAF2281.9060307@elzevir.fr>
Message-ID: <lm5xkc2jea24.dlg@nililand.de>

Am Fri, 08 Oct 2010 15:54:09 +0200 schrieb Manuel P?gouri?-Gonnard:

>> Thanks. I looked at them. But could luatex use the same
>> unicode-letters.tex?
> 
> Not directly, but with minor changes, yes.
 
> Actually, I prepared an adapted version, and baring objections or failing tests
> (by others), it will be in TL tomorrow, and loaded by default in luatex-based
> formats, which means (dvi)lua(la)tex.

I checked the .ini-files in the TeXLive svn
(http://www.tug.org/svn/texlive/trunk/Master/texmf-dist/tex/) and
saw that they now include the line
\input luatex-unicode-letters.tex

But where is the file luatex-unicode-letters.tex itself? I browse
all promising looking folders but couldn't find it. (I would have
expected it in generic/luatexconfig, but this folder doesn't exist).
I wasn't successful on CTAN either.

(I would like to make a report on the miktex site so that its luatex
use the file too).


-- 
Ulrike Fischer 


From preining at logic.at  Fri Oct 22 17:04:58 2010
From: preining at logic.at (Norbert Preining)
Date: Sat, 23 Oct 2010 00:04:58 +0900
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <lm5xkc2jea24.dlg@nililand.de>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <20101008131403.GM17803@smoon> <4CAF2281.9060307@elzevir.fr>
 <lm5xkc2jea24.dlg@nililand.de>
Message-ID: <20101022150458.GC14577@gamma.logic.tuwien.ac.at>

On Fr, 22 Okt 2010, Ulrike Fischer wrote:
> (http://www.tug.org/svn/texlive/trunk/Master/texmf-dist/tex/) and
> saw that they now include the line
> \input luatex-unicode-letters.tex
> 
> But where is the file luatex-unicode-letters.tex itself? I browse


in svn 
Master/texmf/tex/generic/config/luatex-unicode-letters.tex

Best wishes

Norbert
------------------------------------------------------------------------
Norbert Preining            preining@{jaist.ac.jp, logic.at, debian.org}
JAIST, Japan                                 TeX Live & Debian Developer
DSA: 0x09C5B094   fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
------------------------------------------------------------------------
KITMURVY (n.)
Man who owns all the latest sporting gadgetry and clothing (gold
trolley, tee cosies, ventilated shoes, Gary Player- autographed
tracksuit top, American navy cap, mirror sunglasses) but is still only
on his second gold lesson.
			--- Douglas Adams, The Meaning of Liff

From mojca.miklavec.lists at gmail.com  Fri Oct 22 17:05:31 2010
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 22 Oct 2010 17:05:31 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <lm5xkc2jea24.dlg@nililand.de>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <20101008131403.GM17803@smoon> <4CAF2281.9060307@elzevir.fr>
 <lm5xkc2jea24.dlg@nililand.de>
Message-ID: <AANLkTimQGeFAvuqOS6MzsJrR=w4_kMN6gawO3dO=T6Hy@mail.gmail.com>

On Fri, Oct 22, 2010 at 16:44, Ulrike Fischer <list at nililand.de> wrote:
> Am Fri, 08 Oct 2010 15:54:09 +0200 schrieb Manuel P?gouri?-Gonnard:
>
>>> Thanks. I looked at them. But could luatex use the same
>>> unicode-letters.tex?
>>
>> Not directly, but with minor changes, yes.
>
>> Actually, I prepared an adapted version, and baring objections or failing tests
>> (by others), it will be in TL tomorrow, and loaded by default in luatex-based
>> formats, which means (dvi)lua(la)tex.
>
> I checked the .ini-files in the TeXLive svn
> (http://www.tug.org/svn/texlive/trunk/Master/texmf-dist/tex/) and
> saw that they now include the line
> \input luatex-unicode-letters.tex
>
> But where is the file luatex-unicode-letters.tex itself? I browse
> all promising looking folders but couldn't find it. (I would have
> expected it in generic/luatexconfig, but this folder doesn't exist).
> I wasn't successful on CTAN either.
>
> (I would like to make a report on the miktex site so that its luatex
> use the file too).

It is in
    /usr/local/texlive/2010/texmf/tex/generic/config/luatex-unicode-letters.tex
on my computer. See:
    http://www.tug.org/svn/texlive?view=revision&revision=20014

It is quite possible that it doesn't exist on CTAN since it was added
ad-hoc to TeX Live's SVN as a temporary solution until something
better comes up.

Mojca


From list at nililand.de  Fri Oct 22 17:25:30 2010
From: list at nililand.de (Ulrike Fischer)
Date: Fri, 22 Oct 2010 17:25:30 +0200
Subject: [luatex] Hyphenation in plain TeX
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <20101008131403.GM17803@smoon> <4CAF2281.9060307@elzevir.fr>
 <lm5xkc2jea24.dlg@nililand.de>
 <20101022150458.GC14577@gamma.logic.tuwien.ac.at>
Message-ID: <11czchdoyxwyi.dlg@nililand.de>

Am Sat, 23 Oct 2010 00:04:58 +0900 schrieb Norbert Preining:


>> (http://www.tug.org/svn/texlive/trunk/Master/texmf-dist/tex/) and
>> saw that they now include the line
>> \input luatex-unicode-letters.tex

>> But where is the file luatex-unicode-letters.tex itself? I browse
 
> in svn 
> Master/texmf/tex/generic/config/luatex-unicode-letters.tex

Thank you. What is the difference between texmf-dist-tree (where I
looked and where e.g. the similar file for xetex resides) and the
texmf-tree? 


-- 
Ulrike Fischer 


From reinhard.kotucha at web.de  Fri Oct 22 19:03:30 2010
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Fri, 22 Oct 2010 19:03:30 +0200
Subject: [luatex] Hyphenation in plain TeX
In-Reply-To: <11czchdoyxwyi.dlg@nililand.de>
References: <AANLkTikk5HmxhbZnkEQvdXdyh67Qnkj4TeEjoHOafxzU@mail.gmail.com>
 <3569.1286528658@cl.cam.ac.uk>
 <AANLkTik-MhrYLZTAF7moBWZLwDKTMJ3xYMp+WFdY4fC8@mail.gmail.com>
 <20101008131403.GM17803@smoon> <4CAF2281.9060307@elzevir.fr>
 <lm5xkc2jea24.dlg@nililand.de>
 <20101022150458.GC14577@gamma.logic.tuwien.ac.at>
 <11czchdoyxwyi.dlg@nililand.de>
Message-ID: <19649.50146.926205.896110@zaphod.ms25.net>

On 22 October 2010 Ulrike Fischer wrote:

 > Am Sat, 23 Oct 2010 00:04:58 +0900 schrieb Norbert Preining:
 > 
 > 
 > >> (http://www.tug.org/svn/texlive/trunk/Master/texmf-dist/tex/) and
 > >> saw that they now include the line
 > >> \input luatex-unicode-letters.tex
 > 
 > >> But where is the file luatex-unicode-letters.tex itself? I browse
 >  
 > > in svn 
 > > Master/texmf/tex/generic/config/luatex-unicode-letters.tex
 > 
 > Thank you. What is the difference between texmf-dist-tree (where I
 > looked and where e.g. the similar file for xetex resides) and the
 > texmf-tree? 

The texmf tree is populated during the build process while texmf-dist
contains packages from CTAN.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From pgesang at ix.urz.uni-heidelberg.de  Sat Oct 23 15:46:46 2010
From: pgesang at ix.urz.uni-heidelberg.de (Philipp Gesang)
Date: Sat, 23 Oct 2010 15:46:46 +0200
Subject: [luatex] node.is_node() in luatexref-t
Message-ID: <20101023134646.GF1336@aides>

Hi all,

in luatexref-t.tex, lines 4377f., the description of
?node.is_node? is identical to the one given of ?node.id?:

???8<????????????????????????????????????????????????????????????
This converts a single type name to its internal numeric
representation.
???8<????????????????????????????????????????????????????????????

Error due to pasting?

The comment from ?lnodelib.c?, l. 121, seems to make more sense
(without the spelling error, of course):

???8<????????????????????????????????????????????????????????????
/* returns true is the argument is a userdata object of type node */
???8<????????????????????????????????????????????????????????????

Philipp

-- 
()  ascii ribbon campaign - against html e-mail
/\  www.asciiribbon.org   - against proprietary attachments
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 198 bytes
Desc: not available
URL: <http://tug.org/pipermail/luatex/attachments/20101023/906c5cc8/attachment.bin>

From taco at elvenkind.com  Sat Oct 23 16:23:20 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 23 Oct 2010 16:23:20 +0200
Subject: [luatex] node.is_node() in luatexref-t
In-Reply-To: <20101023134646.GF1336@aides>
References: <20101023134646.GF1336@aides>
Message-ID: <4CC2EFD8.7000803@elvenkind.com>

On 10/23/2010 03:46 PM, Philipp Gesang wrote:
> Hi all,
>
> in luatexref-t.tex, lines 4377f., the description of
> ?node.is_node? is identical to the one given of ?node.id?:

Thanks, corrected.

Best wishes,
Taco

From khaledhosny at eglug.org  Sun Oct 31 10:32:58 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sun, 31 Oct 2010 11:32:58 +0200
Subject: [luatex] Expanding text in lua
Message-ID: <20101031093258.GA5395@khaled-laptop>

(Pretending to be TeXhacker and using terminology I don't actually
understand)
I was wondering if one can take a string of TeX input and expand it at
lua end to get its basic form for further processing, say we have:

\def\sometext{some text}
\def\sometalk{I wrote\sometext\ for a talk}

Then I can pass \sometalk to lua and get the "I wrote some text for a
talk" string out of it.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From taco at elvenkind.com  Sun Oct 31 10:39:46 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 31 Oct 2010 10:39:46 +0100
Subject: [luatex] Expanding text in lua
In-Reply-To: <20101031093258.GA5395@khaled-laptop>
References: <20101031093258.GA5395@khaled-laptop>
Message-ID: <4CCD3962.6070505@elvenkind.com>

On 10/31/2010 10:32 AM, Khaled Hosny wrote:
> (Pretending to be TeXhacker and using terminology I don't actually
> understand)
> I was wondering if one can take a string of TeX input and expand it at
> lua end to get its basic form for further processing, say we have:
>
> \def\sometext{some text}
> \def\sometalk{I wrote\sometext\ for a talk}
>
> Then I can pass \sometalk to lua and get the "I wrote some text for a
> talk" string out of it.

As the body of \directlua is always expanded immediately, it is quite
trivial:

   \def\doexpand#1{\directlua{tex.sprint("#1")}}
   \edef\expandedsome{\doexpand\sometalk}

but there is very little point to that, it is just a complicated way
of writing

   \edef\expandedsome{\sometalk}

Best wishes,
Taco


From khaledhosny at eglug.org  Sun Oct 31 10:59:53 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sun, 31 Oct 2010 11:59:53 +0200
Subject: [luatex] Expanding text in lua
In-Reply-To: <4CCD3962.6070505@elvenkind.com>
References: <20101031093258.GA5395@khaled-laptop>
 <4CCD3962.6070505@elvenkind.com>
Message-ID: <20101031095953.GA5971@khaled-laptop>

On Sun, Oct 31, 2010 at 10:39:46AM +0100, Taco Hoekwater wrote:
> On 10/31/2010 10:32 AM, Khaled Hosny wrote:
> >(Pretending to be TeXhacker and using terminology I don't actually
> >understand)
> >I was wondering if one can take a string of TeX input and expand it at
> >lua end to get its basic form for further processing, say we have:
> >
> >\def\sometext{some text}
> >\def\sometalk{I wrote\sometext\ for a talk}
> >
> >Then I can pass \sometalk to lua and get the "I wrote some text for a
> >talk" string out of it.
> 
> As the body of \directlua is always expanded immediately, it is quite
> trivial:
> 
>   \def\doexpand#1{\directlua{tex.sprint("#1")}}
>   \edef\expandedsome{\doexpand\sometalk}
> 
> but there is very little point to that, it is just a complicated way
> of writing
> 
>   \edef\expandedsome{\sometalk}

Aha, I never thought it would just work that I never tried, thanks for
the tip :) (well, I've read it countless times in the manual, but I
never really understood what is meant, though pretending I do).

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

