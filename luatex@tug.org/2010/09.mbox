From ulrik.vieth at arcor.de  Sun Sep  5 15:53:36 2010
From: ulrik.vieth at arcor.de (Ulrik Vieth)
Date: Sun, 05 Sep 2010 15:53:36 +0200
Subject: [luatex] File permissions for luatex PDF output
Message-ID: <4C83A0E0.1010004@arcor.de>

I just made an interesting observation, which may have potential 
security implications.

Somehow PDF and AUX files from LuaLaTeX have file permissions 666, 
whereas LOG files have file permission 644 (according to umask 022).

In other words, PDF and AUX files generated by LuaLaTeX could become
world-writable to other users on a multi-user system.

What I find strange is that it happens when I run LuaLaTeX test files
using OpenType math fonts. It does not happen for ConTeXt test files.

It does not happen for plain LuaTeX with TFM fonts, e.g. "luatex story"
It does not happen for LuaLaTeX with TFM fonts, e.g. "lualatex sample2e"

It does however, happen, with plain LuaTeX when I load luaotfload,e.g.

luatex
\relax
\input luatofload.sty
\input story
\bye

Is there anything in luaotfload which instruments the file output
mechanism for PDF and AUX files, but fails to consider the umask?

Regards, Ulrik

From khaledhosny at eglug.org  Sun Sep  5 16:30:29 2010
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sun, 5 Sep 2010 16:30:29 +0200
Subject: [luatex] File permissions for luatex PDF output
In-Reply-To: <4C83A0E0.1010004@arcor.de>
References: <4C83A0E0.1010004@arcor.de>
Message-ID: <20100905143029.GA10668@khaled-laptop>

On Sun, Sep 05, 2010 at 03:53:36PM +0200, Ulrik Vieth wrote:
> I just made an interesting observation, which may have potential
> security implications.
> 
> Somehow PDF and AUX files from LuaLaTeX have file permissions 666,
> whereas LOG files have file permission 644 (according to umask 022).
> 
> In other words, PDF and AUX files generated by LuaLaTeX could become
> world-writable to other users on a multi-user system.
> 
> What I find strange is that it happens when I run LuaLaTeX test files
> using OpenType math fonts. It does not happen for ConTeXt test files.
> 
> It does not happen for plain LuaTeX with TFM fonts, e.g. "luatex story"
> It does not happen for LuaLaTeX with TFM fonts, e.g. "lualatex sample2e"
> 
> It does however, happen, with plain LuaTeX when I load luaotfload,e.g.
> 
> luatex
> \relax
> \input luatofload.sty
> \input story
> \bye
> 
> Is there anything in luaotfload which instruments the file output
> mechanism for PDF and AUX files, but fails to consider the umask?

I don't have the slightest idea what would be causing that.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer

From taco at elvenkind.com  Sun Sep  5 16:45:49 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 05 Sep 2010 16:45:49 +0200
Subject: [luatex] File permissions for luatex PDF output
In-Reply-To: <20100905143029.GA10668@khaled-laptop>
References: <4C83A0E0.1010004@arcor.de> <20100905143029.GA10668@khaled-laptop>
Message-ID: <4C83AD1D.3050706@elvenkind.com>

On 09/05/2010 04:30 PM, Khaled Hosny wrote:
>>
>> It does however, happen, with plain LuaTeX when I load luaotfload,e.g.
>>
>> luatex
>> \relax
>> \input luatofload.sty
>> \input story
>> \bye
>>
>> Is there anything in luaotfload which instruments the file output
>> mechanism for PDF and AUX files, but fails to consider the umask?
>
> I don't have the slightest idea what would be causing that.

Either it is architecture dependent, or it depends on the version
of luaotfload.sty, because it does not happen over here.

luaotfload.sty:  2010/05/30 v1.09 ConTeXt font loading system
luatex:          beta-0.63.0-2010090516 (rev 3856)
uname -sri:      Linux 2.6.35.4-desktop-1mnb x86_64
shell:           GNU bash, version 4.1.7(2)-release

Best wishes,
Taco

From ulrik.vieth at arcor.de  Mon Sep  6 02:01:10 2010
From: ulrik.vieth at arcor.de (Ulrik Vieth)
Date: Mon, 06 Sep 2010 02:01:10 +0200
Subject: [luatex] File permissions for luatex PDF output
In-Reply-To: <4C83AD1D.3050706@elvenkind.com>
References: <4C83A0E0.1010004@arcor.de> <20100905143029.GA10668@khaled-laptop>
	<4C83AD1D.3050706@elvenkind.com>
Message-ID: <4C842F46.8030003@arcor.de>

On 09/05/2010 04:45 PM, Taco Hoekwater wrote:

> Either it is architecture dependent, or it depends on the version
> of luaotfload.sty, because it does not happen over here.
>
> luaotfload.sty: 2010/05/30 v1.09 ConTeXt font loading system
> luatex: beta-0.63.0-2010090516 (rev 3856)
> uname -sri: Linux 2.6.35.4-desktop-1mnb x86_64
> shell: GNU bash, version 4.1.7(2)-release

Well, the latest luaotfload is v1.18, which could imply a number
of changes compared to v1.09. As for the rest, I have different versions 
here, so we end up comparing apples to oranges.

luaotfload.sty:	2010/07/15 v1.18 OpenType layout system
luatex: beta-0.62.0-2010082310
uname -srm: Linux 2.6.32-24-generic x86_64
shell: GNU bash, version 4.1.5(1)-release

Regards, Ulrik

P.S:  I noticed one additional thing, which may be of interest:
If a previous version of the PDF file exists with permissions 644,
the new version of the file seems to retain the permissions 644.
If no previous PDF exists, the new file gets the permissions 666.

From reinhard.kotucha at web.de  Mon Sep  6 03:41:31 2010
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 6 Sep 2010 03:41:31 +0200
Subject: [luatex] File permissions for luatex PDF output
In-Reply-To: <4C842F46.8030003@arcor.de>
References: <4C83A0E0.1010004@arcor.de> <20100905143029.GA10668@khaled-laptop>
	<4C83AD1D.3050706@elvenkind.com> <4C842F46.8030003@arcor.de>
Message-ID: <19588.18123.557646.168011@zaphod.ms25.net>

On 6 September 2010 Ulrik Vieth wrote:

 > P.S:  I noticed one additional thing, which may be of interest:
 > If a previous version of the PDF file exists with permissions 644,
 > the new version of the file seems to retain the permissions 644.

This makes sense.  File permissions should be retained, regardless of
umask.

Suppose you have set umask 022.
Your Mail client creates a file ~/MAILBOX with permission flags 644.

Everybody can read your mails.  Then you say

  chmod 600 ~/MAILBOX

Fine, but whenever you get a new mail and update your MAILBOX, the file
is world readable again if only umask is considered.  

What you observed is what I expect.  I remember that in the mid-90ies
everybody was able to read other peoples mails, regardless of the file
permissions of the mailbox itself, backup files had permissions
according to umask.  A big mistake.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From taco at elvenkind.com  Thu Sep  9 11:22:55 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 09 Sep 2010 11:22:55 +0200
Subject: [luatex] Luatex 0.63.0 announcement
Message-ID: <4C88A76F.1000205@elvenkind.com>

Hi,

I have just uploaded the archives for a new luatex release, 0.63.0.
This is a development release.

News:

* Drop tex.ht[], tex.wd[], tex.dp[].

* Drop OCP support (and associated primitives).

* Add tex.catcode[], tex.lccode[], tex.sfcode[], tex.uccode[],
   tex.mathcode[] and tex.delcode[] and associated functions.

* Add CIDset tables to the output pdf where appropriate.

* Added a 'string' field to late_lua nodes on the lua side. This
   field does not convert the assigned string to a tokenlist.

* The result of fontloader.open() now has some virtual accessors
   (as well as fontloader.to_table).

* There is now a `short reference' in the manual folder
   (functionref.pdf)

Bugfixes:

* Fix a crash on an empty font (bugreport #468).

* Fix a crash for extremely long pattern arguments.

* Fix a crash on bad virtual character arguments in lua.

* Fix hyphenation exceptions.

* Prevent linebreak between initial local_par paragraph whatsit
   and a following skip (bugreport #437).

* Fix placement of scripts on textstyle big operators in MATH
   fonts (bugreport #466).

* Fix a crash on the return value of MPlib's 'postscript'
   operation on images.

* Fix a crash on \leftghost & \rightghost in math mode.


The archives can be downloaded from supelec as usual:

         http://foundry.supelec.fr/gf/project/luatex/

You could also check out the sources via anonymous svn:

   svn co http://foundry.supelec.fr/svn/luatex/tags/beta-0.63.0

Bugs and feature requests can be added to the issue tracker at

        http://tracker.luatex.org

Have fun,
Taco




From st_philipp at yahoo.de  Mon Sep 13 23:23:28 2010
From: st_philipp at yahoo.de (Philipp Stephani)
Date: Mon, 13 Sep 2010 23:23:28 +0200
Subject: [luatex] LuaTeX seems to ignore \escapechar
Message-ID: <491CCD4B-3129-462C-A7C0-156EF72F2B19@yahoo.de>

Hello,

in TeX Live 2010, the line

luatex '\escapechar=-1 \immediate\write16{\meaning\box}\end'

results in

This is LuaTeX, Version beta-0.60.2-2010071217 (TeX Live 2010) (rev 3736) 
\box
No pages of output.
Transcript written on texput.log.

being output. tex, pdftex and xetex correctly print "box" without escape char. This breaks e.g. the ifpdf package (and possible many more package which rely on \escapechar and \meaning). Is this behavior intentional or a bug?

Regards,
Philipp

From heiko.oberdiek at googlemail.com  Tue Sep 14 00:03:05 2010
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Tue, 14 Sep 2010 00:03:05 +0200
Subject: [luatex] LuaTeX seems to ignore \escapechar
In-Reply-To: <491CCD4B-3129-462C-A7C0-156EF72F2B19@yahoo.de>
References: <491CCD4B-3129-462C-A7C0-156EF72F2B19@yahoo.de>
Message-ID: <20100913220304.GA15571@oberdiek.my-fqdn.de>

On Mon, Sep 13, 2010 at 11:23:28PM +0200, Philipp Stephani wrote:

> in TeX Live 2010, the line
> 
> luatex '\escapechar=-1 \immediate\write16{\meaning\box}\end'
> 
> results in
> 
> This is LuaTeX, Version beta-0.60.2-2010071217 (TeX Live 2010) (rev 3736) 
> \box
> No pages of output.
> Transcript written on texput.log.
> 
> being output. tex, pdftex and xetex correctly print "box" without escape char. This breaks e.g. the ifpdf package (and possible many more package which rely on \escapechar and \meaning). Is this behavior intentional or a bug?

IMHO a bug.
I have rewritten the affected code section in order to prevent
triggering the bug:
  http://www.informatik.uni-freiburg.de/~oberdiek/tmp/ifpdf.pdf
(Temporary location, bundle update later).

Yours sincerely
  Heiko Oberdiek

From taco at elvenkind.com  Tue Sep 14 11:36:05 2010
From: taco at elvenkind.com (taco)
Date: Tue, 14 Sep 2010 11:36:05 +0200
Subject: [luatex] LuaTeX seems to ignore \escapechar
In-Reply-To: <20100913220304.GA15571@oberdiek.my-fqdn.de>
References: <491CCD4B-3129-462C-A7C0-156EF72F2B19@yahoo.de>
	<20100913220304.GA15571@oberdiek.my-fqdn.de>
Message-ID: <4C8F4205.6060509@elvenkind.com>

Heiko Oberdiek wrote:
> 
> IMHO a bug.

Yes, I agree.

Best wishes,
Taco

From mpg at elzevir.fr  Wed Sep 15 15:36:18 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Wed, 15 Sep 2010 15:36:18 +0200
Subject: [luatex] open_read_file plays badly with -recorder
Message-ID: <4C90CBD2.1020403@elzevir.fr>

Hi,

Using luatex 0.60.1, processing the following file with the -recorder option
shows no trace of story.tex in the .fls file.

\directlua{
  assert(callback.register('open_read_file',
    function (file)
      local fh = assert(io.open(file))
      return {
        reader = function () return fh:read()  end,
        close  = function () return fh:close() end,
      }
    end))}
\input story.tex
\bye

Am I doing anything wrong? Is this behaviour intented?

Thanks,
Manuel.

From taco at elvenkind.com  Wed Sep 15 16:36:31 2010
From: taco at elvenkind.com (taco)
Date: Wed, 15 Sep 2010 16:36:31 +0200
Subject: [luatex] open_read_file plays badly with -recorder
In-Reply-To: <4C90CBD2.1020403@elzevir.fr>
References: <4C90CBD2.1020403@elzevir.fr>
Message-ID: <4C90D9EF.9060907@elvenkind.com>

Manuel P?gouri?-Gonnard wrote:
> Hi,
> 
> Using luatex 0.60.1, processing the following file with the -recorder option
> shows no trace of story.tex in the .fls file.
> 
> \directlua{
>   assert(callback.register('open_read_file',
>     function (file)
>       local fh = assert(io.open(file))
>       return {
>         reader = function () return fh:read()  end,
>         close  = function () return fh:close() end,
>       }
>     end))}
> \input story.tex
> \bye
> 
> Am I doing anything wrong? 

No.

> Is this behaviour intented?

No, but it was fixed post-0.60.1

Best wishes,
Taco

From mpg at elzevir.fr  Wed Sep 15 17:14:21 2010
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Wed, 15 Sep 2010 17:14:21 +0200
Subject: [luatex] open_read_file plays badly with -recorder
In-Reply-To: <4C90D9EF.9060907@elvenkind.com>
References: <4C90CBD2.1020403@elzevir.fr> <4C90D9EF.9060907@elvenkind.com>
Message-ID: <4C90E2CD.2090908@elzevir.fr>

Le 15/09/2010 16:36, taco a ?crit :
> Manuel P?gouri?-Gonnard wrote:
>> Is this behaviour intented?
> 
> No, but it was fixed post-0.60.1
> 
Ok, thanks.

Manuel.

From zappathustra at free.fr  Sat Sep 25 19:43:52 2010
From: zappathustra at free.fr (Paul Isambert)
Date: Sat, 25 Sep 2010 19:43:52 +0200
Subject: [luatex] Building LuaTeX.
Message-ID: <1285436632.4c9e34d82aadf@imp.free.fr>

Hello all,

I've been trying all day to build LuaTeX from the sources on my new computer
with no success.

I'm using Msys (with MinGW) under Windows 7, and the build ends with:

c:/mingw/bin/../lib/gcc/mingw32/4.5.0/../../../../mingw32/bin/ld.exe: warning:
auto-importing has been activated without --enable-auto-import specified on the
command line.
This should work unless it involves constant data structures referencing symbols
from auto-imported DLLs.
-rwxr-xr-x 1 Attila Administrateurs 4283918 Sep 25 17:17 build/texk/web2c/luatex
.exe

Then when I try to execute LuaTeX (the executable does exist), I'm told it can't
be launched because "libgcc_s_dw2.dll" is missing.

I suppose the problem comes from my Msys installation (under the same
circumstances, on another computer, the build works), but I'm so incompetent
here that I can only cry for help (MinGW and Msys are impossible to understand
for me, so I can't address the problem directly here.)

Any idea?

Best,
Paul

From luigi.scarso at gmail.com  Sat Sep 25 20:23:23 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Sat, 25 Sep 2010 20:23:23 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <1285436632.4c9e34d82aadf@imp.free.fr>
References: <1285436632.4c9e34d82aadf@imp.free.fr>
Message-ID: <AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>

On Sat, Sep 25, 2010 at 7:43 PM, Paul Isambert <zappathustra at free.fr> wrote:
> Hello all,
>
> I've been trying all day to build LuaTeX from the sources on my new computer
> with no success.
>
> I'm using Msys (with MinGW) under Windows 7, and the build ends with:
>
> c:/mingw/bin/../lib/gcc/mingw32/4.5.0/../../../../mingw32/bin/ld.exe: warning:
> auto-importing has been activated without --enable-auto-import specified on the
> command line.
> This should work unless it involves constant data structures referencing symbols
> from auto-imported DLLs.
> -rwxr-xr-x 1 Attila Administrateurs 4283918 Sep 25 17:17 build/texk/web2c/luatex
> .exe
>
> Then when I try to execute LuaTeX (the executable does exist), I'm told it can't
> be launched because "libgcc_s_dw2.dll" is missing.
>
> I suppose the problem comes from my Msys installation (under the same
> circumstances, on another computer, the build works), but I'm so incompetent
> here that I can only cry for help (MinGW and Msys are impossible to understand
> for me, so I can't address the problem directly here.)
>
> Any idea?
>
> Best,
> Paul
>

These are  actually my steps:
1) Download & install
http://sourceforge.net/projects/mingw/files/Automated%20MinGW%20Installer/mingw-get-inst/mingw-get-inst-20100831/mingw-get-inst-20100831.exe/download
2) download luatex source
http://foundry.supelec.fr/gf/download/frsrelease/382/1568/luatex-beta-0.63.0.tar.bz2
and
uncompress
3) add --without-ln-s \
just after
 --without-mf-x-toolkit --without-x \
og build.sh
4) open the MingGW Shell and do
bash build.sh
Under the MingGW
luatex  --credits gives the expected  ouput
while in cmd & powershell
luatex  --credits
gives nothing

-- 
luigi

From zappathustra at free.fr  Sun Sep 26 10:39:24 2010
From: zappathustra at free.fr (Paul Isambert)
Date: Sun, 26 Sep 2010 10:39:24 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>
References: <1285436632.4c9e34d82aadf@imp.free.fr>
	<AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>
Message-ID: <1285490364.4c9f06bc942dd@imp.free.fr>

Selon luigi scarso <luigi.scarso at gmail.com>:

> On Sat, Sep 25, 2010 at 7:43 PM, Paul Isambert <zappathustra at free.fr> wrote:
> > Hello all,
> >
> > I've been trying all day to build LuaTeX from the sources on my new
> computer
> > with no success.
> >
> > I'm using Msys (with MinGW) under Windows 7, and the build ends with:
> >
> > c:/mingw/bin/../lib/gcc/mingw32/4.5.0/../../../../mingw32/bin/ld.exe:
> warning:
> > auto-importing has been activated without --enable-auto-import specified on
> the
> > command line.
> > This should work unless it involves constant data structures referencing
> symbols
> > from auto-imported DLLs.
> > -rwxr-xr-x 1 Attila Administrateurs 4283918 Sep 25 17:17
> build/texk/web2c/luatex
> > .exe
> >
> > Then when I try to execute LuaTeX (the executable does exist), I'm told it
> can't
> > be launched because "libgcc_s_dw2.dll" is missing.
> >
> > I suppose the problem comes from my Msys installation (under the same
> > circumstances, on another computer, the build works), but I'm so
> incompetent
> > here that I can only cry for help (MinGW and Msys are impossible to
> understand
> > for me, so I can't address the problem directly here.)
> >
> > Any idea?
> >
> > Best,
> > Paul
> >
>
> These are  actually my steps:
> 1) Download & install
>
http://sourceforge.net/projects/mingw/files/Automated%20MinGW%20Installer/mingw-get-inst/mingw-get-inst-20100831/mingw-get-inst-20100831.exe/download
> 2) download luatex source
>
http://foundry.supelec.fr/gf/download/frsrelease/382/1568/luatex-beta-0.63.0.tar.bz2
> and
> uncompress
> 3) add --without-ln-s \
> just after
>  --without-mf-x-toolkit --without-x \
> og build.sh
> 4) open the MingGW Shell and do
> bash build.sh
> Under the MingGW
> luatex  --credits gives the expected  ouput
> while in cmd & powershell
> luatex  --credits
> gives nothing

Thanks Luigi for your answer. Before I'll try to do that, I have two questions:
does this means LuaTeX will work only under MinGW? And does it still enable me
to link the source to the svn version (since apparently you download a special
version of the source)? I tend to build quite often, and that's sometimes
crucial in case of bug fixes.

Best,
Paul

From luigi.scarso at gmail.com  Sun Sep 26 11:55:50 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Sun, 26 Sep 2010 11:55:50 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <1285490364.4c9f06bc942dd@imp.free.fr>
References: <1285436632.4c9e34d82aadf@imp.free.fr>
	<AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>
	<1285490364.4c9f06bc942dd@imp.free.fr>
Message-ID: <AANLkTi=fZrojJX=ErQbG=+wRQiYj0cTe29NO8MjA4C=7@mail.gmail.com>

On Sun, Sep 26, 2010 at 10:39 AM, Paul Isambert <zappathustra at free.fr> wrote:
>> These are ?actually my steps:
>> 1) Download & install
>>
> http://sourceforge.net/projects/mingw/files/Automated%20MinGW%20Installer/mingw-get-inst/mingw-get-inst-20100831/mingw-get-inst-20100831.exe/download
>> 2) download luatex source
>>
> http://foundry.supelec.fr/gf/download/frsrelease/382/1568/luatex-beta-0.63.0.tar.bz2
>> and
>> uncompress
>> 3) add --without-ln-s \
>> just after
>> ?--without-mf-x-toolkit --without-x \
>> og build.sh
>> 4) open the MingGW Shell and do
>> bash build.sh
>> Under the MingGW
>> luatex ?--credits gives the expected ?ouput
>> while in cmd & powershell
>> luatex ?--credits
>> gives nothing
>
> Thanks Luigi for your answer. Before I'll try to do that, I have two questions:
> does this means LuaTeX will work only under MinGW?
I know  that for a lua dll extension
you must  use the same compiler of the lua binary.
For example the lua binary with context minimals is built with
microsof compiler, while the lua binary from
svn is cross compiled with mingw and I expected incompatibilities with dll.
But as programs they are identical.
Also maybe the format  should be regenerated too, but I'm not sure
(for every build from source I rebuild the format anyway)

>And does it still enable me
> to link the source to the svn version (since apparently you download a special
> version of the source)? I tend to build quite often, and that's sometimes
> crucial in case of bug fixes.
No it's not a special version of the source. The only modification is
on build.sh
where I've added --without-ln-s

The only problem so far is that  the binary seems to work ok in mingw
shell but not in cmd or power shell on windows 7 32 bit.
I have not the same problem with binary cross compiled, hence I argue
that I need something more -- it's still an experimental way.

-- 
luigi


From oinos at web.de  Sun Sep 26 13:41:05 2010
From: oinos at web.de (=?ISO-8859-1?Q?Pablo_Rodr=EDguez?=)
Date: Sun, 26 Sep 2010 13:41:05 +0200
Subject: [luatex] combining files with pure LuaTeX
Message-ID: <4C9F3151.80505@web.de>

Hi there,

I have to combine PDF of two kinds in a way I describe bellow using only 
the LuaTeX win32 binary distributed at 
http://foundry.supelec.fr/gf/project/luatex (installing a complete TeX 
distribution isn't an option for me). I guess that this could be 
achieved with a LuaTeX script, but I don't know how.

I have two kind of PDF documents: A4-paged document and an image. Both 
are given to me. I don't have to modify them, only to combine them in a 
new document. The only thing is to place the image.pdf on a specific 
location on the pages of the document.pdf. document.pdf could have 
multiple pages and image.pdf must be added on all pages, but not all on 
the same position.

How could this be achieved? (The whole thing is a more complex process, 
but this is the first step.)

Many thanks in advance,


Pablo

From arthur.reutenauer at normalesup.org  Sun Sep 26 14:42:43 2010
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Sun, 26 Sep 2010 14:42:43 +0200
Subject: [luatex] combining files with pure LuaTeX
In-Reply-To: <4C9F3151.80505@web.de>
References: <4C9F3151.80505@web.de>
Message-ID: <20100926124243.GG5145@phare.normalesup.org>

	Hello Pablo,

  The answer will probably come as a disappointment to you, but this is
not one of the tasks LuaTeX is designed for.  It's not a general
PDF-editing program.  It is of course possible to do what you want using
LuaTeX, but higher-level typesetting systems like LaTeX or ConTeXt are
much better suited for that, and it's not directly related to LuaTeX,
pdfTeX is enough (LaTeX users, for example, are usually advised to use
the pdfpages package, that works well with pdfTeX).

	Arthur

From reinhard.kotucha at web.de  Sun Sep 26 16:17:06 2010
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sun, 26 Sep 2010 16:17:06 +0200
Subject: [luatex] combining files with pure LuaTeX
In-Reply-To: <4C9F3151.80505@web.de>
References: <4C9F3151.80505@web.de>
Message-ID: <19615.21986.659100.720948@zaphod.ms25.net>

On 26 September 2010 Pablo Rodr?guez wrote:

 > Hi there,
 > 
 > I have to combine PDF of two kinds in a way I describe bellow using only 
 > the LuaTeX win32 binary distributed at 
 > http://foundry.supelec.fr/gf/project/luatex (installing a complete TeX 
 > distribution isn't an option for me). I guess that this could be 
 > achieved with a LuaTeX script, but I don't know how.
 > 
 > I have two kind of PDF documents: A4-paged document and an image. Both 
 > are given to me. I don't have to modify them, only to combine them in a 
 > new document. The only thing is to place the image.pdf on a specific 
 > location on the pages of the document.pdf. document.pdf could have 
 > multiple pages and image.pdf must be added on all pages, but not all on 
 > the same position.
 > 
 > How could this be achieved? (The whole thing is a more complex process, 
 > but this is the first step.)


I did this with pdftex a week ago, but it works with luatex too.  The
first step is to place the image on a single A4 page and call this file
background.pdf


Then copy the stuff below to a file called add-background.tex:
-------------------------------------------------------------------
% add-background.tex
%
% Usage: luatex add-background <some_file>.pdf
%
% Copyright (C) 2010 Reinhard Kotucha.
% You may freely use, modify and/or distribute this file.

\newlinechar`^^J \ifdefined\documentclass\nonstopmode
\errmessage{^^J! ERROR: Use luatex, not lualatex!^^J!
                  ================================^^J}
\batchmode\fi

\pdfcompresslevel=9 \pdfmapfile{}
\pdfoutput=1 \pdfminorversion=5 \pdfobjcompresslevel=3
\pdfhorigin0pt \pdfvorigin0pt \count0=1 \catcode`\_=12
\pdfximage page 1 {background.pdf}
\newcount\background \background=\pdflastximage

\def\recurse{\pdfximage page \count0 {\file}%
   \setbox0\hbox{\rlap{\expandafter\pdfrefximage\background}%
   \pdfrefximage\pdflastximage}%
   \pdfpagewidth=\wd0 \pdfpageheight=\ht0 \shipout\box0
   \advance\count0 by 1
   \ifnum\count0>\pdflastximagepages\expandafter\end
   \else\expandafter\recurse\fi}

\def\process#1 {\def\file{#1}\recurse}\catcode32=13 \let\ \space
\everypar{\setbox2\lastbox\process}
-------------------------------------------------------------------


Then run

  luatex add-background <your-file>

on the command line, where <your-file> is the PDF file you want to put
the background image on each page.

You can set 

  \pdfminorversion=4 \pdfobjcompresslevel=0

if necessary, it depends on the software you are using in further
steps.  I had to do this because the Multivalent library I was using
didn't support object stream compression. 

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From Robin.Fairbairns at cl.cam.ac.uk  Sun Sep 26 16:32:28 2010
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Sun, 26 Sep 2010 15:32:28 +0100
Subject: [luatex] combining files with pure LuaTeX
In-Reply-To: Your message of Sun, 26 Sep 2010 14:42:43 +0200.
	<20100926124243.GG5145@phare.normalesup.org>
Message-ID: <18011.1285511548@cl.cam.ac.uk>

Arthur Reutenauer <arthur.reutenauer at normalesup.org> wrote:

>   The answer will probably come as a disappointment to you, but this is
> not one of the tasks LuaTeX is designed for.  It's not a general
> PDF-editing program.  It is of course possible to do what you want using
> LuaTeX, but higher-level typesetting systems like LaTeX or ConTeXt are
> much better suited for that, and it's not directly related to LuaTeX,
> pdfTeX is enough (LaTeX users, for example, are usually advised to use
> the pdfpages package, that works well with pdfTeX).

i imagined as much, but my toes are hardly damp, as yet, from dabbling
in luatex.

an alternative _might_ be pdftk (google for it).

i'm concerned about the assertion that there's no possibility of
anything other than luatex on the system in question.  that speaks to me
of an embedded system, and beta-release software such as luatex is _not_
something i would choose to embed, stable though it may be.

robin the luatex neophyte.

From oinos at web.de  Sun Sep 26 20:11:19 2010
From: oinos at web.de (=?ISO-8859-1?Q?Pablo_Rodr=EDguez?=)
Date: Sun, 26 Sep 2010 20:11:19 +0200
Subject: [luatex] combining files with pure LuaTeX
In-Reply-To: <20100926124243.GG5145@phare.normalesup.org>
References: <4C9F3151.80505@web.de>
	<20100926124243.GG5145@phare.normalesup.org>
Message-ID: <4C9F8CC7.5010907@web.de>

On 09/26/2010 02:42 PM, Arthur Reutenauer wrote:
> 	Hello Pablo,
>
>    The answer will probably come as a disappointment to you, but this is
> not one of the tasks LuaTeX is designed for.  It's not a general
> PDF-editing program.  It is of course possible to do what you want using
> LuaTeX, but higher-level typesetting systems like LaTeX or ConTeXt are
> much better suited for that, and it's not directly related to LuaTeX,
> pdfTeX is enough (LaTeX users, for example, are usually advised to use
> the pdfpages package, that works well with pdfTeX).

Thanks for your answer, Arthur.

I intend LuaTeX because of the embedded scripting possibilities (and I 
can have all in a single file, not having to install a TeX distribution).

Thanks again,


Pablo

From oinos at web.de  Sun Sep 26 20:23:08 2010
From: oinos at web.de (=?ISO-8859-1?Q?Pablo_Rodr=EDguez?=)
Date: Sun, 26 Sep 2010 20:23:08 +0200
Subject: [luatex] combining files with pure LuaTeX
In-Reply-To: <18011.1285511548@cl.cam.ac.uk>
References: <18011.1285511548@cl.cam.ac.uk>
Message-ID: <4C9F8F8C.4090705@web.de>

On 09/26/2010 04:32 PM, Robin Fairbairns wrote:
> Arthur Reutenauer<arthur.reutenauer at normalesup.org>  wrote:
>
>>    The answer will probably come as a disappointment to you, but this is
>> not one of the tasks LuaTeX is designed for.  It's not a general
>> PDF-editing program.  It is of course possible to do what you want using
>> LuaTeX, but higher-level typesetting systems like LaTeX or ConTeXt are
>> much better suited for that, and it's not directly related to LuaTeX,
>> pdfTeX is enough (LaTeX users, for example, are usually advised to use
>> the pdfpages package, that works well with pdfTeX).
>
> i imagined as much, but my toes are hardly damp, as yet, from dabbling
> in luatex.
>
> an alternative _might_ be pdftk (google for it).

Thanks for your reply, Robin.

AFAIK pdftk enables multipage PDF documents, but no stamping an image on 
a page.

> i'm concerned about the assertion that there's no possibility of
> anything other than luatex on the system in question.  that speaks to me
> of an embedded system, and beta-release software such as luatex is _not_
> something i would choose to embed, stable though it may be.

The reason is too simple.

The computer that I have to use isn't mine. I don't have administrator 
rights under Windows XP (and I don't want to ask for them). All files 
must be deleted after the operation. I could install a TeX distribution 
locally, but not for a operation that might happen once a week. And the 
scripting abilities are also needed.

> robin the luatex neophyte.

Thanks for your help,


Pablo

From oinos at web.de  Sun Sep 26 21:26:13 2010
From: oinos at web.de (=?ISO-8859-1?Q?Pablo_Rodr=EDguez?=)
Date: Sun, 26 Sep 2010 21:26:13 +0200
Subject: [luatex] combining files with pure LuaTeX
In-Reply-To: <19615.21986.659100.720948@zaphod.ms25.net>
References: <4C9F3151.80505@web.de> <19615.21986.659100.720948@zaphod.ms25.net>
Message-ID: <4C9F9E55.9010504@web.de>

On 09/26/2010 04:17 PM, Reinhard Kotucha wrote:
>
> I did this with pdftex a week ago, but it works with luatex too.  The
> first step is to place the image on a single A4 page and call this file
> background.pdf
>
> Then copy the stuff below to a file called add-background.tex.

Many thanks for your help, Reinhard.

It works fine with some images, but if the image is too small (as 
http://www.ousia.tk/stamp.pdf) the resulting files are wrong 
(http://www.ousia.tk/add-background.pdf).

How can I place the stamp.pdf on a different position? Actually I need 
to be able to move the stamp position in different pages.

Thanks for your help,


Pablo

From sbbrouwer at gmail.com  Mon Sep 27 00:16:02 2010
From: sbbrouwer at gmail.com (Sietse Brouwer)
Date: Mon, 27 Sep 2010 00:16:02 +0200
Subject: [luatex] Passing verbatim text to a function
Message-ID: <AANLkTimbxNXyegm-+=tN5gutnbqnRtbbt3O7Zv-JVV5M@mail.gmail.com>

Dear list,

I'm using ConTeXt Mark IV, and trying to write a function that uses
Lua to dedent a block of verbatim text before handing it off to
\starttyping. My current problem: I have not yet succeeded in passing
the block of text to Lua with newlines and spaces preserved.

I started out with the usual pattern for defining a macro that calls Lua:

%%%% ---- begin usual pattern ---- %%%%
\startluacode
    dedent = function(code)
        -- Create a logfile.
        logfile = io.open("debug.txt", "w")
        -- Prove that strings with newlines get written correctly
        logfile:write("--\n" .. "    test\n" .. "--\n")
        -- Now write to the logfile that what ConTeXt gave us.
        logfile:write(code)
        logfile:close()
        -- Actual dedenting code. Not relevant yet.
        lead = string.match(code, '^ +')
        code = string.gsub(code, '^' .. lead, '')
        code = string.gsub(code, '\n' .. lead, '\n')
        -- Placeholder. Messing with context.type()
        -- or context.starttyping() comes later.
        context(code)
    end
\stopluacode

\def\Dedent#1{ \directlua{ dedent( [[#1]] ) } }

% Try it out. If all goes well, logfile.txt should contain
%  the below with linebreaks and spaces preserved.
\starttext
\Dedent{    andra
        moi
    ennepe}
\stoptext

%%%% ---- end usual pattern ---- %%%%

That pattern, however, got me my spaces and newlines discarded. I next
tried a two-macro structure, as described in
http://tinyurl.com/mbp2ub (which leads to
http://wiki.contextgarden.net/Inside_ConTeXt#Passing_verbatim_text_as_macro_parameter,
but I'm not convinced that URL won't get broken).

%%%% ---- start two-macro pattern ---- %%%%
% Lua code remains the same

% new two-macro structure
\def\Dedent{\bgroup\obeylines\obeyspaces\doDedent}
\def\doDedent#1{\directlua{dedent([[#1]])}}

% test remains the same
%%%% ---- start two-macro pattern ---- %%%%

Alas! This preserves spaces, but not lines. I am now at the end of my
wits. Does anyone on this list know a solution?

Kind regards,

SIetse
Sietse Brouwer

From reinhard.kotucha at web.de  Mon Sep 27 01:38:43 2010
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 27 Sep 2010 01:38:43 +0200
Subject: [luatex] combining files with pure LuaTeX
In-Reply-To: <4C9F9E55.9010504@web.de>
References: <4C9F3151.80505@web.de> <19615.21986.659100.720948@zaphod.ms25.net>
	<4C9F9E55.9010504@web.de>
Message-ID: <19615.55683.882244.653227@zaphod.ms25.net>

On 26 September 2010 Pablo Rodr?guez wrote:

 > On 09/26/2010 04:17 PM, Reinhard Kotucha wrote:
 > >
 > > I did this with pdftex a week ago, but it works with luatex too.  The
 > > first step is to place the image on a single A4 page and call this file
 > > background.pdf
 > >
 > > Then copy the stuff below to a file called add-background.tex.
 > 
 > Many thanks for your help, Reinhard.
 > 
 > It works fine with some images, but if the image is too small (as 
 > http://www.ousia.tk/stamp.pdf) the resulting files are wrong 
 > (http://www.ousia.tk/add-background.pdf).

Yes, you have to create an A4 page containing the stamp at the
desired position.  Actually, it's not limited to A4 but both files
must have the same page size, otherwise you probably don't get what
you expect.

 > How can I place the stamp.pdf on a different position? Actually I
 > need to be able to move the stamp position in different pages.

I just adapted the code in order to allow the background file to have
more than one page.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: add-background.tex
Type: application/octet-stream
Size: 1366 bytes
Desc: not available
URL: <http://tug.org/pipermail/luatex/attachments/20100927/77bd20c7/attachment.obj>
-------------- next part --------------

If the background file has less pages than the other file, the last
page of the background file is used repeatedly.

When comiling the example

   http://ms25.ath.cx/add-background.pdf

I get:

(./add-background.tex) [1.1 <./background.pdf> <./joining.pdf>] [2.2
<./background.pdf> <./joining.pdf>] [3.3 <./background.pdf>
<./joining.pdf>] [4.4 <./background.pdf> <./joining.pdf>] [5.4
<./background.pdf> <./joining.pdf>] [6.4 <./background.pdf>
<./joining.pdf>]
Output written on add-background.pdf (6 pages, 270100 bytes).

Look at the page numbers.  The first number denotes the page number of
the foreground file, the second one that of the background file.  In
this case the foreground file has six pages, the background file only
four.  Page 4 of the background file is then used repeatedly.

In order to create such background files I formerly used LaTeX, but
since you don't want to install a whole TeX distribution, I created a
plain TeX file.  I must admit that I like the plain TeX solution much
more.  The macro which places the stamp on the page was derived from
an example in Appendix D of The TeXbook, but I adapted it so that you
can use all units supported by TeX.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: background.tex
Type: application/octet-stream
Size: 636 bytes
Desc: not available
URL: <http://tug.org/pipermail/luatex/attachments/20100927/77bd20c7/attachment-0001.obj>
-------------- next part --------------

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From adityam at umich.edu  Mon Sep 27 03:09:33 2010
From: adityam at umich.edu (Aditya Mahajan)
Date: Sun, 26 Sep 2010 21:09:33 -0400 (EDT)
Subject: [luatex] Passing verbatim text to a function
In-Reply-To: <AANLkTimbxNXyegm-+=tN5gutnbqnRtbbt3O7Zv-JVV5M@mail.gmail.com>
References: <AANLkTimbxNXyegm-+=tN5gutnbqnRtbbt3O7Zv-JVV5M@mail.gmail.com>
Message-ID: <alpine.LNX.2.00.1009262102310.23239@ybpnyubfg.ybpnyqbznva>




On Mon, 27 Sep 2010, Sietse Brouwer wrote:

> I'm using ConTeXt Mark IV, and trying to write a function that uses
> Lua to dedent a block of verbatim text before handing it off to
> \starttyping. My current problem: I have not yet succeeded in passing
> the block of text to Lua with newlines and spaces preserved.
>
> I started out with the usual pattern for defining a macro that calls Lua:
>
> %%%% ---- begin usual pattern ---- %%%%
> [snip]
> %%%% ---- end usual pattern ---- %%%%
>
> That pattern, however, got me my spaces and newlines discarded. I next
> tried a two-macro structure, as described in
> http://tinyurl.com/mbp2ub (which leads to
> http://wiki.contextgarden.net/Inside_ConTeXt#Passing_verbatim_text_as_macro_parameter,
> but I'm not convinced that URL won't get broken).
>
> %%%% ---- start two-macro pattern ---- %%%%
> % Lua code remains the same
>
> % new two-macro structure
> \def\Dedent{\bgroup\obeylines\obeyspaces\doDedent}
> \def\doDedent#1{\directlua{dedent([[#1]])}}
>
> % test remains the same
> %%%% ---- start two-macro pattern ---- %%%%
>
> Alas! This preserves spaces, but not lines. I am now at the end of my
> wits. Does anyone on this list know a solution?

If you do not mind a slight change in the user syntax, here is an 
alternative:

\def\startDedent
   {\dostartbuffer[dedent][startDedent][stopDedent]}

\def\stopDedent{\directlua{dedent("dedent")}}

The function dedent(...) now takes the name of the buffer rather than its 
contents. So

     dedent = function(name)
         local code = buffers.content(name)
         ....
     end
(I also had to change the line

   lead =  string.match(code, '^ +')

to

   lead =  string.match(code, '^ +') or ''
)

Then you can use

\startDedent    andra
         moi
     ennepe\stopDedent

Aditya



From adityam at umich.edu  Mon Sep 27 03:09:33 2010
From: adityam at umich.edu (Aditya Mahajan)
Date: Sun, 26 Sep 2010 21:09:33 -0400
Subject: [luatex] Passing verbatim text to a function
In-Reply-To: <AANLkTimbxNXyegm-+=tN5gutnbqnRtbbt3O7Zv-JVV5M@mail.gmail.com>
References: <AANLkTimbxNXyegm-+=tN5gutnbqnRtbbt3O7Zv-JVV5M@mail.gmail.com>
Message-ID: <alpine.LNX.2.00.1009262102310.23239@ybpnyubfg.ybpnyqbznva>

On Mon, 27 Sep 2010, Sietse Brouwer wrote:

> I'm using ConTeXt Mark IV, and trying to write a function that uses
> Lua to dedent a block of verbatim text before handing it off to
> \starttyping. My current problem: I have not yet succeeded in passing
> the block of text to Lua with newlines and spaces preserved.
>
> I started out with the usual pattern for defining a macro that calls Lua:
>
> %%%% ---- begin usual pattern ---- %%%%
> [snip]
> %%%% ---- end usual pattern ---- %%%%
>
> That pattern, however, got me my spaces and newlines discarded. I next
> tried a two-macro structure, as described in
> http://tinyurl.com/mbp2ub (which leads to
> http://wiki.contextgarden.net/Inside_ConTeXt#Passing_verbatim_text_as_macro_parameter,
> but I'm not convinced that URL won't get broken).
>
> %%%% ---- start two-macro pattern ---- %%%%
> % Lua code remains the same
>
> % new two-macro structure
> \def\Dedent{\bgroup\obeylines\obeyspaces\doDedent}
> \def\doDedent#1{\directlua{dedent([[#1]])}}
>
> % test remains the same
> %%%% ---- start two-macro pattern ---- %%%%
>
> Alas! This preserves spaces, but not lines. I am now at the end of my
> wits. Does anyone on this list know a solution?

If you do not mind a slight change in the user syntax, here is an 
alternative:

\def\startDedent
   {\dostartbuffer[dedent][startDedent][stopDedent]}

\def\stopDedent{\directlua{dedent("dedent")}}

The function dedent(...) now takes the name of the buffer rather than its 
contents. So

     dedent = function(name)
         local code = buffers.content(name)
         ....
     end
(I also had to change the line

   lead =  string.match(code, '^ +')

to

   lead =  string.match(code, '^ +') or ''
)

Then you can use

\startDedent    andra
         moi
     ennepe\stopDedent

Aditya


From luigi.scarso at gmail.com  Mon Sep 27 13:26:33 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Mon, 27 Sep 2010 13:26:33 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <1285436632.4c9e34d82aadf@imp.free.fr>
References: <1285436632.4c9e34d82aadf@imp.free.fr>
Message-ID: <AANLkTinmWEDStOsxRWoztCD6qA_zTe0JDYLtDUkgcoCm@mail.gmail.com>

On Sat, Sep 25, 2010 at 7:43 PM, Paul Isambert <zappathustra at free.fr> wrote:
> Hello all,
>
> I've been trying all day to build LuaTeX from the sources on my new computer
> with no success.
>
> I'm using Msys (with MinGW) under Windows 7, and the build ends with:
Jut for the record
http://tdm-gcc.tdragon.net/start
seems another good link to investigate

-- 
luigi

From P.Jackowski at gust.org.pl  Mon Sep 27 14:37:16 2010
From: P.Jackowski at gust.org.pl (=?UTF-8?B?UGF3ZcWCIEphY2tvd3NraQ==?=)
Date: Mon, 27 Sep 2010 14:37:16 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>
References: <1285436632.4c9e34d82aadf@imp.free.fr>
	<AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>
Message-ID: <4CA08FFC.4050806@gust.org.pl>

Hello,

 > On Sat, Sep 25, 2010 at 7:43 PM, Paul Isambert <zappathustra at free.fr> 
 > wrote:
>> I've been trying all day to build LuaTeX from the sources on my new computer
>> with no success.
>>
>> I'm using Msys (with MinGW) under Windows 7, and the build ends with:
[...]

Hmm.. You have no success, Luigi has half success (does not work on 
generic shell) and I'm the lucky one with no problems. Today I've made 
yet another test on clean machine with win7 64bit. Here is what I do:

install mingw; link to fresh installer is on
	http://www.mingw.org/wiki/Getting_Started

install msys
	http://downloads.sourceforge.net/mingw/MSYS-1.0.11.exe

I install both things into the same tree C:\Gnu and add C:\Gnu\bin to 
PATH. Then I go into luatex sources root and hit

	sh build.sh

No changes to that script, no patches to sources. The output luatex 
executable just works for me under both cmd and msys shell. What we do 
different?
-- 
Pawe/l Jackowski
P.Jackowski at gust.org.pl

From martin at oneiros.de  Mon Sep 27 14:40:47 2010
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Mon, 27 Sep 2010 14:40:47 +0200
Subject: [luatex] combining files with pure LuaTeX
In-Reply-To: <18011.1285511548@cl.cam.ac.uk>
References: <20100926124243.GG5145@phare.normalesup.org>
	<18011.1285511548@cl.cam.ac.uk>
Message-ID: <AANLkTiks6H_=K5+sqCggNv0NjAjF3EpcubBHkS6TY8w-@mail.gmail.com>

2010/9/26 Robin Fairbairns <Robin.Fairbairns at cl.cam.ac.uk>:
> an alternative _might_ be pdftk (google for it).

pdftk seems very unmaintained and doesn't handle pdf optional content (layers).

> i'm concerned about the assertion that there's no possibility of
> anything other than luatex on the system in question. ?that speaks to me
> of an embedded system, and beta-release software such as luatex is _not_
> something i would choose to embed, stable though it may be.

Indeed. I'd write an application using a PDF library of choice (e.g. podofo).

Best
   Martin


From martin at oneiros.de  Mon Sep 27 14:43:03 2010
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Mon, 27 Sep 2010 14:43:03 +0200
Subject: [luatex] combining files with pure LuaTeX
In-Reply-To: <AANLkTiks6H_=K5+sqCggNv0NjAjF3EpcubBHkS6TY8w-@mail.gmail.com>
References: <20100926124243.GG5145@phare.normalesup.org>
	<18011.1285511548@cl.cam.ac.uk>
	<AANLkTiks6H_=K5+sqCggNv0NjAjF3EpcubBHkS6TY8w-@mail.gmail.com>
Message-ID: <AANLkTi=dW-6d_wU5P+TudK-uT5qG+FROzkwSygLnJXHL@mail.gmail.com>

2010/9/27 Martin Schr?der <martin at oneiros.de>:
> Indeed. I'd write an application using a PDF library of choice (e.g. podofo).

Btw: There's an imposition program using podofo (podofoimpose)
programmable in lua. :-)

Best
   Martin


From luigi.scarso at gmail.com  Mon Sep 27 14:46:45 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Mon, 27 Sep 2010 14:46:45 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <4CA08FFC.4050806@gust.org.pl>
References: <1285436632.4c9e34d82aadf@imp.free.fr>
	<AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>
	<4CA08FFC.4050806@gust.org.pl>
Message-ID: <AANLkTimDiOpmCsVOuH5NP_b4KVTbm64QDqzpKEm0rOa4@mail.gmail.com>

On Mon, Sep 27, 2010 at 2:37 PM, Pawe? Jackowski
<P.Jackowski at gust.org.pl> wrote:
> Hello,
>
>> On Sat, Sep 25, 2010 at 7:43 PM, Paul Isambert <zappathustra at free.fr> >
>> wrote:
>>>
>>> I've been trying all day to build LuaTeX from the sources on my new
>>> computer
>>> with no success.
>>>
>>> I'm using Msys (with MinGW) under Windows 7, and the build ends with:
>
> [...]
>
> Hmm.. You have no success, Luigi has half success (does not work on generic
> shell) and I'm the lucky one with no problems. Today I've made yet another
> test on clean machine with win7 64bit. Here is what I do:
>
> install mingw; link to fresh installer is on
> ? ? ? ?http://www.mingw.org/wiki/Getting_Started
>
> install msys
> ? ? ? ?http://downloads.sourceforge.net/mingw/MSYS-1.0.11.exe
>
> I install both things into the same tree C:\Gnu and add C:\Gnu\bin to PATH.
> Then I go into luatex sources root and hit
>
> ? ? ? ?sh build.sh
>
> No changes to that script, no patches to sources. The output luatex
> executable just works for me under both cmd and msys shell. What we do
> different?
I dont' know.
But I would like to test your binary in my windows7 box (I almost sure
that it works, btw).
Can you send me via private email ?


> --
> Pawe/l Jackowski
> P.Jackowski at gust.org.pl
>



-- 
luigi


From luigi.scarso at gmail.com  Mon Sep 27 15:09:13 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Mon, 27 Sep 2010 15:09:13 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <4CA08FFC.4050806@gust.org.pl>
References: <1285436632.4c9e34d82aadf@imp.free.fr>
	<AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>
	<4CA08FFC.4050806@gust.org.pl>
Message-ID: <AANLkTi=izgkSbiyKfRoDLfczydrSqP-cJevk4N50mE8C@mail.gmail.com>

On Mon, Sep 27, 2010 at 2:37 PM, Pawe? Jackowski
<P.Jackowski at gust.org.pl> wrote:
> Hello,
>
>> On Sat, Sep 25, 2010 at 7:43 PM, Paul Isambert <zappathustra at free.fr> >
>> wrote:
>>>
>>> I've been trying all day to build LuaTeX from the sources on my new
>>> computer
>>> with no success.
>>>
>>> I'm using Msys (with MinGW) under Windows 7, and the build ends with:
>
> [...]
>
> Hmm.. You have no success, Luigi has half success (does not work on generic
> shell) and I'm the lucky one with no problems. Today I've made yet another
> test on clean machine with win7 64bit. Here is what I do:
>
> install mingw; link to fresh installer is on
> ? ? ? ?http://www.mingw.org/wiki/Getting_Started
>
> install msys
> ? ? ? ?http://downloads.sourceforge.net/mingw/MSYS-1.0.11.exe
>
> I install both things into the same tree C:\Gnu and add C:\Gnu\bin to PATH.
> Then I go into luatex sources root and hit
>
> ? ? ? ?sh build.sh
>
> No changes to that script, no patches to sources. The output luatex
> executable just works for me under both cmd and msys shell. What we do
> different?
Hm, could be that you have C:\Gnu\bin in the  PATH while I haven't it.
Once I added it works too under cmd and shell too.
I will check that my patch for build.sh is useless.







-- 
luigi


From sbbrouwer at gmail.com  Mon Sep 27 15:32:02 2010
From: sbbrouwer at gmail.com (Sietse Brouwer)
Date: Mon, 27 Sep 2010 15:32:02 +0200
Subject: [luatex] Passing verbatim text to a function
In-Reply-To: <alpine.LNX.2.00.1009262102310.23239@ybpnyubfg.ybpnyqbznva>
References: <AANLkTimbxNXyegm-+=tN5gutnbqnRtbbt3O7Zv-JVV5M@mail.gmail.com>
	<alpine.LNX.2.00.1009262102310.23239@ybpnyubfg.ybpnyqbznva>
Message-ID: <AANLkTinQjCEYoxsxt4jrLsqwQ3=XU+E5K-jiW29sSLf5@mail.gmail.com>

Dear Adityan

On Mon, Sep 27, 2010 at 03:09, Aditya Mahajan <adityam at umich.edu> wrote:
> If you do not mind a slight change in the user syntax, here is an
> alternative:
>
> \def\startDedent
> ?{\dostartbuffer[dedent][startDedent][stopDedent]}
>
> \def\stopDedent{\directlua{dedent("dedent")}}
>
> The function dedent(...) now takes the name of the buffer rather than its
> contents. So
>
> ? ?dedent = function(name)
> ? ? ? ?local code = buffers.content(name)
> ? ? ? ?....
> ? ?end

Ah, perfect! I had in fact been hoping to use that user syntax, but
had thought that I would tackle the verbatim input first. You've
solved both of my problems in one blow.

I've written up the answer and added it as a section in
http://wiki.contextgarden.net/Programming_in_LuaTex#Getting_text_into_LuaTex_verbatim
. (It might be more at home at http://luatex.bluwiki.com/, but I
couldn't find any way to create a user account or contact the
maintainer of that page.)

Thank you very much for your help,
Kind regards,

Sietse
(Sietse Brouwer)


From schuster.wolfgang at googlemail.com  Mon Sep 27 16:20:36 2010
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Mon, 27 Sep 2010 16:20:36 +0200
Subject: [luatex] Passing verbatim text to a function
In-Reply-To: <AANLkTimbxNXyegm-+=tN5gutnbqnRtbbt3O7Zv-JVV5M@mail.gmail.com>
References: <AANLkTimbxNXyegm-+=tN5gutnbqnRtbbt3O7Zv-JVV5M@mail.gmail.com>
Message-ID: <D0B564CB-F0A9-41C2-A8BB-5AEE3E515F45@gmail.com>


Am 27.09.2010 um 00:16 schrieb Sietse Brouwer:

> \def\Dedent#1{ \directlua{ dedent( [[#1]] ) } }

\def\Dedent#1{\ctxlua{dedent(\!!bs\detokenize{#1}\!!es)}}

or

\def\Dedent#1{\ctxlua{dedent(\!!bs\normalunexpanded{#1}\!!es)}}


Wolfgang


From sbbrouwer at gmail.com  Mon Sep 27 19:28:18 2010
From: sbbrouwer at gmail.com (Sietse Brouwer)
Date: Mon, 27 Sep 2010 19:28:18 +0200
Subject: [luatex] Passing verbatim text to a function
In-Reply-To: <D0B564CB-F0A9-41C2-A8BB-5AEE3E515F45@gmail.com>
References: <AANLkTimbxNXyegm-+=tN5gutnbqnRtbbt3O7Zv-JVV5M@mail.gmail.com>
	<D0B564CB-F0A9-41C2-A8BB-5AEE3E515F45@gmail.com>
Message-ID: <AANLkTikkz8Rs4gu5D5hpZcCcvH=22G7M2e7NP2up1nsM@mail.gmail.com>

Am 27.09.2010 um 00:16 schrieb Sietse Brouwer:
>> \def\Dedent#1{ \directlua{ dedent( [[#1]] ) } }

On Mon, Sep 27, 2010 at 16:20, Wolfgang Schuster
<schuster.wolfgang at googlemail.com> wrote:
> \def\Dedent#1{\ctxlua{dedent(\!!bs\detokenize{#1}\!!es)}}
>
> or
>
> \def\Dedent#1{\ctxlua{dedent(\!!bs\normalunexpanded{#1}\!!es)}}


Neither of those works for me; in both cases LuaTeX halts with an
error. (I added (quotation marks or [[]]) (around the #1 or inside the
parentheses) to ensure the dedent() function interpreted the argument
as a string, but that did not change the error.)

%%%% Start error %%%%
! LuaTeX error <main ctx instance>:1: unexpected symbol near '\'.
\Dedent ...{dump(\!!bs\detokenize {#1}\!!es)}

l.21 }
%%%% End error %%%%

The } on line 21 is the closing brace of the \Dedent{...} command, but
I don't know what that signifies. I tried reading up on \!!bs and
\!!es to see if I could fix this myself; unfortunately, they are not
very googlable, and I found nothing.

For my case, I have a working solution already in the form of Aditya's
code; on the other hand, if this can be debugged then the wiki can
have examples of passing verbatim text both via a startstop and via a
\command{}, and that might be nice.

--Sietse

From schuster.wolfgang at googlemail.com  Mon Sep 27 20:02:34 2010
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Mon, 27 Sep 2010 20:02:34 +0200
Subject: [luatex] Passing verbatim text to a function
In-Reply-To: <AANLkTikkz8Rs4gu5D5hpZcCcvH=22G7M2e7NP2up1nsM@mail.gmail.com>
References: <AANLkTimbxNXyegm-+=tN5gutnbqnRtbbt3O7Zv-JVV5M@mail.gmail.com>
	<D0B564CB-F0A9-41C2-A8BB-5AEE3E515F45@gmail.com>
	<AANLkTikkz8Rs4gu5D5hpZcCcvH=22G7M2e7NP2up1nsM@mail.gmail.com>
Message-ID: <80D12F7E-4D22-4F11-8F06-39BAEED10196@gmail.com>


Am 27.09.2010 um 19:28 schrieb Sietse Brouwer:

>> \def\Dedent#1{\ctxlua{dedent(\!!bs\detokenize{#1}\!!es)}}
>> 
>> or
>> 
>> \def\Dedent#1{\ctxlua{dedent(\!!bs\normalunexpanded{#1}\!!es)}}
> 
> 
> Neither of those works for me; in both cases LuaTeX halts with an
> error. (I added (quotation marks or [[]]) (around the #1 or inside the
> parentheses) to ensure the dedent() function interpreted the argument
> as a string, but that did not change the error.)

You need a \unprotect/\protect before and after the definition, here is a complete example:

\unprotect

\startluacode

	thirddata = thirddata or { }

	function thirddata.verbatim(str)
		print(str)
	end

\stopluacode

\def\one  #1{\ctxlua{thirddata.verbatim(\!!bs\detokenize{#1}\!!es)}}
\def\two  #1{\ctxlua{thirddata.verbatim(\!!bs\luaescapestring{\detokenize{#1}}\!!es)}}
\def\three#1{\ctxlua{thirddata.verbatim(\!!bs\normalunexpanded{#1}\!!es)}}

\protect

\starttext
\one  {\TeX in \Lua}
\two  {\TeX in \Lua}
\three{\TeX in \Lua}
\stoptext

You can also write a environment by changing the defintions to

\def\startone#1\stopone{\ctxlua{thirddata.verbatim(...)}}

Wolfgang



From adityam at umich.edu  Mon Sep 27 20:35:56 2010
From: adityam at umich.edu (Aditya Mahajan)
Date: Mon, 27 Sep 2010 14:35:56 -0400
Subject: [luatex] Passing verbatim text to a function
In-Reply-To: <D0B564CB-F0A9-41C2-A8BB-5AEE3E515F45@gmail.com>
References: <AANLkTimbxNXyegm-+=tN5gutnbqnRtbbt3O7Zv-JVV5M@mail.gmail.com>
	<D0B564CB-F0A9-41C2-A8BB-5AEE3E515F45@gmail.com>
Message-ID: <alpine.LNX.2.01.1009271434030.29774@ybpnyubfg.ybpnyqbznva>

On Mon, 27 Sep 2010, Wolfgang Schuster wrote:

>
> Am 27.09.2010 um 00:16 schrieb Sietse Brouwer:
>
>> \def\Dedent#1{ \directlua{ dedent( [[#1]] ) } }
>
> \def\Dedent#1{\ctxlua{dedent(\!!bs\detokenize{#1}\!!es)}}
>
> or
>
> \def\Dedent#1{\ctxlua{dedent(\!!bs\normalunexpanded{#1}\!!es)}}

Sorry for a dumb question, but does \detokenize do and why is it useful 
here?

Aditya


From schuster.wolfgang at googlemail.com  Mon Sep 27 20:49:58 2010
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Mon, 27 Sep 2010 20:49:58 +0200
Subject: [luatex] Passing verbatim text to a function
In-Reply-To: <alpine.LNX.2.01.1009271434030.29774@ybpnyubfg.ybpnyqbznva>
References: <AANLkTimbxNXyegm-+=tN5gutnbqnRtbbt3O7Zv-JVV5M@mail.gmail.com>
	<D0B564CB-F0A9-41C2-A8BB-5AEE3E515F45@gmail.com>
	<alpine.LNX.2.01.1009271434030.29774@ybpnyubfg.ybpnyqbznva>
Message-ID: <32C4A7C8-C153-4094-9A3C-95B077A68765@gmail.com>


Am 27.09.2010 um 20:35 schrieb Aditya Mahajan:

> Sorry for a dumb question, but does \detokenize do and why is it useful here?

http://tex.loria.fr/moteurs/etex_ref.html#detokenize

See also the output on the command line from my other example.

Wolfgang

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/luatex/attachments/20100927/a24d335d/attachment.html>

From adityam at umich.edu  Mon Sep 27 22:02:54 2010
From: adityam at umich.edu (Aditya Mahajan)
Date: Mon, 27 Sep 2010 16:02:54 -0400
Subject: [luatex] Passing verbatim text to a function
In-Reply-To: <32C4A7C8-C153-4094-9A3C-95B077A68765@gmail.com>
References: <AANLkTimbxNXyegm-+=tN5gutnbqnRtbbt3O7Zv-JVV5M@mail.gmail.com>
	<D0B564CB-F0A9-41C2-A8BB-5AEE3E515F45@gmail.com>
	<alpine.LNX.2.01.1009271434030.29774@ybpnyubfg.ybpnyqbznva>
	<32C4A7C8-C153-4094-9A3C-95B077A68765@gmail.com>
Message-ID: <alpine.LNX.2.01.1009271600310.29774@ybpnyubfg.ybpnyqbznva>

On Mon, 27 Sep 2010, Wolfgang Schuster wrote:

>
> Am 27.09.2010 um 20:35 schrieb Aditya Mahajan:
>
>> Sorry for a dumb question, but does \detokenize do and why is it useful here?
>
> http://tex.loria.fr/moteurs/etex_ref.html#detokenize
>
> See also the output on the command line from my other example.

Thanks. Page bookmarked.

Aditya




From sbbrouwer at gmail.com  Tue Sep 28 04:54:37 2010
From: sbbrouwer at gmail.com (Sietse Brouwer)
Date: Tue, 28 Sep 2010 04:54:37 +0200
Subject: [luatex] Passing verbatim text to a function
In-Reply-To: <80D12F7E-4D22-4F11-8F06-39BAEED10196@gmail.com>
References: <AANLkTimbxNXyegm-+=tN5gutnbqnRtbbt3O7Zv-JVV5M@mail.gmail.com>
	<D0B564CB-F0A9-41C2-A8BB-5AEE3E515F45@gmail.com>
	<AANLkTikkz8Rs4gu5D5hpZcCcvH=22G7M2e7NP2up1nsM@mail.gmail.com>
	<80D12F7E-4D22-4F11-8F06-39BAEED10196@gmail.com>
Message-ID: <AANLkTi=bGtJGD08wRPW=Od6d1627SpcBonEN0SC6x2gE@mail.gmail.com>

Hi hi,

On Mon, Sep 27, 2010 at 20:02, Wolfgang Schuster
<schuster.wolfgang at googlemail.com> wrote:
> You need a \unprotect/\protect before and after the definition,

Ah! Yes, no errors now.

> here is a complete example:
>
> \unprotect
>
> \startluacode
>
> ? ? ? ?thirddata = thirddata or { }
>
> ? ? ? ?function thirddata.verbatim(str)
> ? ? ? ? ? ? ? ?print(str)
> ? ? ? ?end
>
> \stopluacode
>
> \def\one ?#1{\ctxlua{thirddata.verbatim(\!!bs\detokenize{#1}\!!es)}}
> \def\two ?#1{\ctxlua{thirddata.verbatim(\!!bs\luaescapestring{\detokenize{#1}}\!!es)}}
> \def\three#1{\ctxlua{thirddata.verbatim(\!!bs\normalunexpanded{#1}\!!es)}}
>
> \protect
>
> \starttext
> \one ?{\TeX in \Lua}
> \two ?{\TeX in \Lua}
> \three{\TeX in \Lua}
> \stoptext

I tested those three with
\one{
    \TeX
        in
    Lua} ,
mutatis mutandis, but none of them preserved linebreaks or spaces,
alas. :-/ I tried inexpertly placing \obeylines and \obeyspaces, but
that did not help.

> You can also write a environment by changing the defintions to
>
> \def\startone#1\stopone{\ctxlua{thirddata.verbatim(...)}}

Where the (...) presumably was one of the above \!!bs...\!!es
stretches. Again (surrounding the definition with \unprotect and
\protect) this threw no errors, but it, too, did not preserve spaces
or newlines.

I also tried to define

\def\doDedent#1
    {\startDedent#1\stopDedent}

using Aditya's named buffer pattern, but that gave 'runaway argument'
errors, so I guess it's not the way to go.

Kind regards,

Sietse


From schuster.wolfgang at googlemail.com  Tue Sep 28 06:24:33 2010
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Tue, 28 Sep 2010 06:24:33 +0200
Subject: [luatex] Passing verbatim text to a function
In-Reply-To: <AANLkTi=bGtJGD08wRPW=Od6d1627SpcBonEN0SC6x2gE@mail.gmail.com>
References: <AANLkTimbxNXyegm-+=tN5gutnbqnRtbbt3O7Zv-JVV5M@mail.gmail.com>
	<D0B564CB-F0A9-41C2-A8BB-5AEE3E515F45@gmail.com>
	<AANLkTikkz8Rs4gu5D5hpZcCcvH=22G7M2e7NP2up1nsM@mail.gmail.com>
	<80D12F7E-4D22-4F11-8F06-39BAEED10196@gmail.com>
	<AANLkTi=bGtJGD08wRPW=Od6d1627SpcBonEN0SC6x2gE@mail.gmail.com>
Message-ID: <A07FE30C-9A31-41EB-87B2-9FC33CB9D7CC@gmail.com>


Am 28.09.2010 um 04:54 schrieb Sietse Brouwer:

> I tested those three with
> \one{
>    \TeX
>        in
>    Lua} ,
> mutatis mutandis, but none of them preserved linebreaks or spaces,
> alas. :-/ I tried inexpertly placing \obeylines and \obeyspaces, but
> that did not help.

\def\startone
  {\begingroup
   \obeylines
   \dostartone}

\def\dostartone#1\stopone
  {\ctxlua{thirddata.one(...)}%
   \endgroup}

>> You can also write a environment by changing the defintions to
>> 
>> \def\startone#1\stopone{\ctxlua{thirddata.verbatim(...)}}
> 
> Where the (...) presumably was one of the above \!!bs...\!!es
> stretches. Again (surrounding the definition with \unprotect and
> \protect) this threw no errors, but it, too, did not preserve spaces
> or newlines.
> 
> I also tried to define
> 
> \def\doDedent#1
>    {\startDedent#1\stopDedent}
> 
> using Aditya's named buffer pattern, but that gave 'runaway argument'
> errors, so I guess it's not the way to go.

You can?t use a buffer in other commands.

Wolfgang




From oinos at web.de  Tue Sep 28 21:17:31 2010
From: oinos at web.de (=?ISO-8859-1?Q?Pablo_Rodr=EDguez?=)
Date: Tue, 28 Sep 2010 21:17:31 +0200
Subject: [luatex] combining files with pure LuaTeX
In-Reply-To: <19615.55683.882244.653227@zaphod.ms25.net>
References: <4C9F3151.80505@web.de>
	<19615.21986.659100.720948@zaphod.ms25.net>	<4C9F9E55.9010504@web.de>
	<19615.55683.882244.653227@zaphod.ms25.net>
Message-ID: <4CA23F4B.3000204@web.de>

On 09/27/2010 01:38 AM, Reinhard Kotucha wrote:
> On 26 September 2010 Pablo Rodr?guez wrote:
>   >
>   >  It works fine with some images, but if the image is too small (as
>   >  http://www.ousia.tk/stamp.pdf) the resulting files are wrong
>   >  (http://www.ousia.tk/add-background.pdf).
>
> Yes, you have to create an A4 page containing the stamp at the
> desired position.  Actually, it's not limited to A4 but both files
> must have the same page size, otherwise you probably don't get what
> you expect.

Many thanks, Reinhard, for the new version of the add-background.tex file.

I'm afraid that the multi-page feature doesn't work for me (but it's 
fine for me, since my main issue is different).

I'm new to LuaTeX and because of that I wasn't able to explain what I 
needed from LuaTeX. I knew what I want to achieve, but I had no idea how 
LuaTeX works. Now I'm beginning to learn it.

What I want to achieve is to add a image to every single page in a 
document (excepting blank pages). Not every page needs the image in the 
same position (no problem, I can generate a set of images for different 
positions).

The issue is that I don't require this for a single PDF document, but 
for about 150 PDF documents with multiple pages every week. Editing that 
by hand on a document basis would be crazy. I need a script to set the 
original background document, the output file and the position of the 
image on each page of that document.

I guessed that LuaTeX could achieve this, because I thought that this 
could be achieved with only one binary in Windows (no TeX distribution, 
sorry) and in pure Lua code (sorry, now I know how tgis is called) 
because of the scripting capabilities of LuaTeX.

My questions now are the following:

-Is it possible to run the standalone LuaTeX binary so that executes 
pure Lua scripts with no need of format files or such?

-Is it possible to generate a new PDF document from am existing one with 
imposed images in LuaTeX using only Lua code?

-The foreground PDF image contains the current date. Would possible to 
generate the current date for the image within the Lua script having the 
rest of the image already generated and before being imposed to the 
background image?

Many thanks for your help,


Pablo

From patrick at gundla.ch  Tue Sep 28 21:35:42 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Tue, 28 Sep 2010 21:35:42 +0200
Subject: [luatex] combining files with pure LuaTeX
In-Reply-To: <4CA23F4B.3000204@web.de>
References: <4C9F3151.80505@web.de>
	<19615.21986.659100.720948@zaphod.ms25.net>	<4C9F9E55.9010504@web.de>
	<19615.55683.882244.653227@zaphod.ms25.net>
	<4CA23F4B.3000204@web.de>
Message-ID: <1B574EB9-58B2-4EF5-B1B1-6B5F7B0B5062@gundla.ch>


> My questions now are the following:
> 
> -Is it possible to run the standalone LuaTeX binary so that executes pure Lua scripts with no need of format files or such?

yes. both texlua and luatex can be used without any additional files from a TeX distribution. You might need to supply your own scripts, of course.

texlua is for executing Lua scripts
luatex is for executing TeX files

You can run texlua by calling luatex with --luaonly (if I remember correctly)

> -Is it possible to generate a new PDF document from am existing one with imposed images in LuaTeX using only Lua code?

Yes, but that's quite a lot of work. You need some TeX glue to start the Lua mode if you want to create a PDF.

> 
> -The foreground PDF image contains the current date. Would possible to generate the current date for the image within the Lua script having the rest of the image already generated and before being imposed to the background image?

Yes, if you know the position where the date should appear.


LuaTeX is well suited for this kind of task, but it seems that there is a lot of setup/programming necessary to achieve this. Perhaps there are better tools for that task?

Patrick



From luigi.scarso at gmail.com  Tue Sep 28 21:40:54 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Tue, 28 Sep 2010 21:40:54 +0200
Subject: [luatex] combining files with pure LuaTeX
In-Reply-To: <1B574EB9-58B2-4EF5-B1B1-6B5F7B0B5062@gundla.ch>
References: <4C9F3151.80505@web.de> <19615.21986.659100.720948@zaphod.ms25.net>
	<4C9F9E55.9010504@web.de>
	<19615.55683.882244.653227@zaphod.ms25.net>
	<4CA23F4B.3000204@web.de>
	<1B574EB9-58B2-4EF5-B1B1-6B5F7B0B5062@gundla.ch>
Message-ID: <AANLkTi=Cdf7nObWmHLxga8qBhxzxAXk0UMtAw6phYFWC@mail.gmail.com>

On Tue, Sep 28, 2010 at 9:35 PM, Patrick Gundlach <patrick at gundla.ch> wrote:
> LuaTeX is well suited for this kind of task, but it seems that there is a lot of setup/programming necessary to achieve this. Perhaps there are better tools for that task?
As far I know,  ConTeXT mkiv

-- 
luigi

From zappathustra at free.fr  Wed Sep 29 08:51:21 2010
From: zappathustra at free.fr (Paul Isambert)
Date: Wed, 29 Sep 2010 08:51:21 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <4CA08FFC.4050806@gust.org.pl>
References: <1285436632.4c9e34d82aadf@imp.free.fr>	<AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>
	<4CA08FFC.4050806@gust.org.pl>
Message-ID: <4CA2E1E9.5050606@free.fr>

  Le 27/09/2010 14:37, Pawe? Jackowski a ?crit :
> Hello,
>
> > On Sat, Sep 25, 2010 at 7:43 PM, Paul Isambert 
> <zappathustra at free.fr> > wrote:
>>> I've been trying all day to build LuaTeX from the sources on my new 
>>> computer
>>> with no success.
>>>
>>> I'm using Msys (with MinGW) under Windows 7, and the build ends with:
> [...]
>
> Hmm.. You have no success, Luigi has half success (does not work on 
> generic shell) and I'm the lucky one with no problems. Today I've made 
> yet another test on clean machine with win7 64bit. Here is what I do:
>
> install mingw; link to fresh installer is on
>     http://www.mingw.org/wiki/Getting_Started
>
> install msys
>     http://downloads.sourceforge.net/mingw/MSYS-1.0.11.exe
>
> I install both things into the same tree C:\Gnu and add C:\Gnu\bin to 
> PATH. Then I go into luatex sources root and hit
>
>     sh build.sh
>
> No changes to that script, no patches to sources. The output luatex 
> executable just works for me under both cmd and msys shell. What we do 
> different?
The interesting thing is that what you've done here I've done it on 
another computer (with Windows 7) and everything went fine; I can't see 
what I've done differently now, but I'll give it a new try (and add to 
the path...)

Best,
Paul

From luigi.scarso at gmail.com  Wed Sep 29 09:07:38 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Wed, 29 Sep 2010 09:07:38 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <4CA2E1E9.5050606@free.fr>
References: <1285436632.4c9e34d82aadf@imp.free.fr>
	<AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>
	<4CA08FFC.4050806@gust.org.pl> <4CA2E1E9.5050606@free.fr>
Message-ID: <AANLkTinJKpcs_6B+ha_DvCOZySdEk0A=Jpd1tqseuh7T@mail.gmail.com>

On Wed, Sep 29, 2010 at 8:51 AM, Paul Isambert <zappathustra at free.fr> wrote:
> ?Le 27/09/2010 14:37, Pawe? Jackowski a ?crit :
>>
>> Hello,
>>
>> > On Sat, Sep 25, 2010 at 7:43 PM, Paul Isambert <zappathustra at free.fr> >
>> > wrote:
>>>>
>>>> I've been trying all day to build LuaTeX from the sources on my new
>>>> computer
>>>> with no success.
>>>>
>>>> I'm using Msys (with MinGW) under Windows 7, and the build ends with:
>>
>> [...]
>>
>> Hmm.. You have no success, Luigi has half success (does not work on
>> generic shell) and I'm the lucky one with no problems. Today I've made yet
>> another test on clean machine with win7 64bit. Here is what I do:
>>
>> install mingw; link to fresh installer is on
>> ? ?http://www.mingw.org/wiki/Getting_Started
>>
>> install msys
>> ? ?http://downloads.sourceforge.net/mingw/MSYS-1.0.11.exe
>>
>> I install both things into the same tree C:\Gnu and add C:\Gnu\bin to
>> PATH. Then I go into luatex sources root and hit
>>
>> ? ?sh build.sh
>>
>> No changes to that script, no patches to sources. The output luatex
>> executable just works for me under both cmd and msys shell. What we do
>> different?
>
> The interesting thing is that what you've done here I've done it on another
> computer (with Windows 7) and everything went fine; I can't see what I've
> done differently now, but I'll give it a new try (and add to the path...)
Until now, I see  these differences between  me (W7) and Pawe? (WVista)
1) patch build.sh with --without-ln-s
2) add (mingw,msys)/bin to the path otherwise luatex doesn't work; it
should be no necessary and it doesn't happend with luatex.exe from svn
cross compiled
3) even with 2) my context minimal doesn't work properly (format are
rebuild at every run).

MSYS from my installer are the same of Pawe?. I think I missed some
other steps or compiler switches.

-- 
luigi


From zappathustra at free.fr  Wed Sep 29 10:26:37 2010
From: zappathustra at free.fr (Paul Isambert)
Date: Wed, 29 Sep 2010 10:26:37 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <AANLkTinJKpcs_6B+ha_DvCOZySdEk0A=Jpd1tqseuh7T@mail.gmail.com>
References: <1285436632.4c9e34d82aadf@imp.free.fr>	<AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>	<4CA08FFC.4050806@gust.org.pl>
	<4CA2E1E9.5050606@free.fr>
	<AANLkTinJKpcs_6B+ha_DvCOZySdEk0A=Jpd1tqseuh7T@mail.gmail.com>
Message-ID: <4CA2F83D.6010806@free.fr>

  Le 29/09/2010 09:07, luigi scarso a ?crit :
> Until now, I see these differences between me (W7) and Pawe? (WVista)
> 1) patch build.sh with --without-ln-s

How should I do that? (I'm totally ignorant on that matter.)

> 3) even with 2) my context minimal doesn't work properly (format are
> rebuild at every run).
I've never been able to run ConTeXt anyway, one of the reasons I didn't 
use it after I got rid of LaTeX. Someday I'll manage to have a correct 
installation, though, since I really want to give it a try, although I'm 
very unlikely to become a ConTeXt user.

Paul


From arthur.reutenauer at normalesup.org  Wed Sep 29 10:37:26 2010
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Wed, 29 Sep 2010 10:37:26 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <4CA2F83D.6010806@free.fr>
References: <1285436632.4c9e34d82aadf@imp.free.fr>
	<AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>
	<4CA08FFC.4050806@gust.org.pl> <4CA2E1E9.5050606@free.fr>
	<AANLkTinJKpcs_6B+ha_DvCOZySdEk0A=Jpd1tqseuh7T@mail.gmail.com>
	<4CA2F83D.6010806@free.fr>
Message-ID: <20100929083726.GB7131@phare.normalesup.org>

>> Until now, I see these differences between me (W7) and Pawe? (WVista)
>> 1) patch build.sh with --without-ln-s
>
> How should I do that? (I'm totally ignorant on that matter.)

  Just add --without-ln-s at the end of the (fairly long) list of
switches given to ../source/configure in build.sh at the top level of
the LuaTeX source archive.  Luigi's already told you that twice last
week-end.

	Arthur

From luigi.scarso at gmail.com  Wed Sep 29 10:48:13 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Wed, 29 Sep 2010 10:48:13 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <4CA2F83D.6010806@free.fr>
References: <1285436632.4c9e34d82aadf@imp.free.fr>
	<AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>
	<4CA08FFC.4050806@gust.org.pl> <4CA2E1E9.5050606@free.fr>
	<AANLkTinJKpcs_6B+ha_DvCOZySdEk0A=Jpd1tqseuh7T@mail.gmail.com>
	<4CA2F83D.6010806@free.fr>
Message-ID: <AANLkTinqX5PQt-__tHaVV71=U-Q6GcE1s5cyAQjgQXAy@mail.gmail.com>

On Wed, Sep 29, 2010 at 10:26 AM, Paul Isambert <zappathustra at free.fr> wrote:

> I've never been able to run ConTeXt anyway, one of the reasons I didn't use
> it after I got rid of LaTeX. Someday I'll manage to have a correct
> installation, though, since I really want to give it a try, although I'm
> very unlikely to become a ConTeXt user.

http://wiki.contextgarden.net/ConTeXt_Minimals
Installation
Command line method

Download context-setup-mswin.zip and unzip to a <directory> where you
want to install ConTeXt. It is recommended that you choose a
<directory>
 that does not have a space in its full path. Then open cmd.exe, go to
the installation <directory> and run

#> first-setup.bat

then
#>cd <directory>/tex
#>call setuptex.bat

Next, save in test.tex this line

\startext\input tufte\stoptext

and then
#>context test.tex

You should have test.pdf .

Hans develops context-mkiv in synch with luatex under windows7,
so I already know that my builds are not ok because they don't work
with minimals.

-- 
luigi

From zappathustra at free.fr  Wed Sep 29 12:11:45 2010
From: zappathustra at free.fr (Paul Isambert)
Date: Wed, 29 Sep 2010 12:11:45 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <20100929083726.GB7131@phare.normalesup.org>
References: <1285436632.4c9e34d82aadf@imp.free.fr>	<AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>	<4CA08FFC.4050806@gust.org.pl>
	<4CA2E1E9.5050606@free.fr>	<AANLkTinJKpcs_6B+ha_DvCOZySdEk0A=Jpd1tqseuh7T@mail.gmail.com>	<4CA2F83D.6010806@free.fr>
	<20100929083726.GB7131@phare.normalesup.org>
Message-ID: <4CA310E1.70308@free.fr>

  Le 29/09/2010 10:37, Arthur Reutenauer a ?crit :
>>> Until now, I see these differences between me (W7) and Pawe? (WVista)
>>> 1) patch build.sh with --without-ln-s
>> How should I do that? (I'm totally ignorant on that matter.)
>    Just add --without-ln-s at the end of the (fairly long) list of
> switches given to ../source/configure in build.sh at the top level of
> the LuaTeX source archive.
Doesn't work. Nor does --enable-auto-import, as recommended by the 
compiler. The really frustratring thing is I was able to build on 
another machine with exactly the same specifications (Windows 7 64bits + 
MinGW + Msys).

Paul

From zappathustra at free.fr  Wed Sep 29 12:12:37 2010
From: zappathustra at free.fr (Paul Isambert)
Date: Wed, 29 Sep 2010 12:12:37 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <AANLkTinqX5PQt-__tHaVV71=U-Q6GcE1s5cyAQjgQXAy@mail.gmail.com>
References: <1285436632.4c9e34d82aadf@imp.free.fr>	<AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>	<4CA08FFC.4050806@gust.org.pl>
	<4CA2E1E9.5050606@free.fr>	<AANLkTinJKpcs_6B+ha_DvCOZySdEk0A=Jpd1tqseuh7T@mail.gmail.com>	<4CA2F83D.6010806@free.fr>
	<AANLkTinqX5PQt-__tHaVV71=U-Q6GcE1s5cyAQjgQXAy@mail.gmail.com>
Message-ID: <4CA31115.1010101@free.fr>

  Thanks Luigi for the tutorial. I'll try that again (meaning I've tried 
minimals several times, to no avail), when I have time.

Paul

Le 29/09/2010 10:48, luigi scarso a ?crit :
> On Wed, Sep 29, 2010 at 10:26 AM, Paul Isambert<zappathustra at free.fr>  wrote:
>
>> I've never been able to run ConTeXt anyway, one of the reasons I didn't use
>> it after I got rid of LaTeX. Someday I'll manage to have a correct
>> installation, though, since I really want to give it a try, although I'm
>> very unlikely to become a ConTeXt user.
> http://wiki.contextgarden.net/ConTeXt_Minimals
> Installation
> Command line method
>
> Download context-setup-mswin.zip and unzip to a<directory>  where you
> want to install ConTeXt. It is recommended that you choose a
> <directory>
>   that does not have a space in its full path. Then open cmd.exe, go to
> the installation<directory>  and run
>
> #>  first-setup.bat
>
> then
> #>cd<directory>/tex
> #>call setuptex.bat
>
> Next, save in test.tex this line
>
> \startext\input tufte\stoptext
>
> and then
> #>context test.tex
>
> You should have test.pdf .
>
> Hans develops context-mkiv in synch with luatex under windows7,
> so I already know that my builds are not ok because they don't work
> with minimals.
>


From luigi.scarso at gmail.com  Wed Sep 29 12:14:27 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Wed, 29 Sep 2010 12:14:27 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <4CA310E1.70308@free.fr>
References: <1285436632.4c9e34d82aadf@imp.free.fr>
	<AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>
	<4CA08FFC.4050806@gust.org.pl> <4CA2E1E9.5050606@free.fr>
	<AANLkTinJKpcs_6B+ha_DvCOZySdEk0A=Jpd1tqseuh7T@mail.gmail.com>
	<4CA2F83D.6010806@free.fr>
	<20100929083726.GB7131@phare.normalesup.org>
	<4CA310E1.70308@free.fr>
Message-ID: <AANLkTinxUPUMmPkcfbRjCD1Mu6AUX2a=R9y_dPDBSbzm@mail.gmail.com>

On Wed, Sep 29, 2010 at 12:11 PM, Paul Isambert <zappathustra at free.fr> wrote:
> Doesn't work. Nor does --enable-auto-import, as recommended by the compiler.
> The really frustratring thing is I was able to build on another machine with
> exactly the same specifications (Windows 7 64bits + MinGW + Msys).
What are the errors ?



-- 
luigi

From luigi.scarso at gmail.com  Wed Sep 29 12:15:12 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Wed, 29 Sep 2010 12:15:12 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <4CA310E1.70308@free.fr>
References: <1285436632.4c9e34d82aadf@imp.free.fr>
	<AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>
	<4CA08FFC.4050806@gust.org.pl> <4CA2E1E9.5050606@free.fr>
	<AANLkTinJKpcs_6B+ha_DvCOZySdEk0A=Jpd1tqseuh7T@mail.gmail.com>
	<4CA2F83D.6010806@free.fr>
	<20100929083726.GB7131@phare.normalesup.org>
	<4CA310E1.70308@free.fr>
Message-ID: <AANLkTimABZuvJrGWCrqb+oACO0-D9kqOFtoBHurDTRya@mail.gmail.com>

On Wed, Sep 29, 2010 at 12:11 PM, Paul Isambert <zappathustra at free.fr> wrote:
> Doesn't work. Nor does --enable-auto-import, as recommended by the compiler.
> The really frustratring thing is I was able to build on another machine with
> exactly the same specifications (Windows 7 64bits + MinGW + Msys).
Nice, I have windows7 32 bit.
What are the errors ?



-- 
luigi

From taco at elvenkind.com  Wed Sep 29 12:17:11 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 29 Sep 2010 12:17:11 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <AANLkTinxUPUMmPkcfbRjCD1Mu6AUX2a=R9y_dPDBSbzm@mail.gmail.com>
References: <1285436632.4c9e34d82aadf@imp.free.fr>	<AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>	<4CA08FFC.4050806@gust.org.pl>
	<4CA2E1E9.5050606@free.fr>	<AANLkTinJKpcs_6B+ha_DvCOZySdEk0A=Jpd1tqseuh7T@mail.gmail.com>	<4CA2F83D.6010806@free.fr>	<20100929083726.GB7131@phare.normalesup.org>	<4CA310E1.70308@free.fr>
	<AANLkTinxUPUMmPkcfbRjCD1Mu6AUX2a=R9y_dPDBSbzm@mail.gmail.com>
Message-ID: <4CA31227.9060907@elvenkind.com>



On 09/29/10 12:14, luigi scarso wrote:
> On Wed, Sep 29, 2010 at 12:11 PM, Paul Isambert <zappathustra at free.fr> wrote:
>> Doesn't work. Nor does --enable-auto-import, as recommended by the compiler.
>> The really frustratring thing is I was able to build on another machine with
>> exactly the same specifications (Windows 7 64bits + MinGW + Msys).
> What are the errors ?

Missing libgcc_s_dw2.dll, right?

libgcc_s_dw2 is one of the gcc runtime support libraries (for the dwarf
debugging format, I assume) so it sounds like either the dll search path
is messed up, or you are missing a package in this particular msys
install.

Best wishes,
Taco

From taco at elvenkind.com  Wed Sep 29 12:19:50 2010
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 29 Sep 2010 12:19:50 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <4CA31227.9060907@elvenkind.com>
References: <1285436632.4c9e34d82aadf@imp.free.fr>	<AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>	<4CA08FFC.4050806@gust.org.pl>	<4CA2E1E9.5050606@free.fr>	<AANLkTinJKpcs_6B+ha_DvCOZySdEk0A=Jpd1tqseuh7T@mail.gmail.com>	<4CA2F83D.6010806@free.fr>	<20100929083726.GB7131@phare.normalesup.org>	<4CA310E1.70308@free.fr>	<AANLkTinxUPUMmPkcfbRjCD1Mu6AUX2a=R9y_dPDBSbzm@mail.gmail.com>
	<4CA31227.9060907@elvenkind.com>
Message-ID: <4CA312C6.3070705@elvenkind.com>



On 09/29/10 12:17, Taco Hoekwater wrote:
> 
> libgcc_s_dw2 is one of the gcc runtime support libraries (for the dwarf
> debugging format, I assume) so it sounds like either the dll search path
> is messed up, or you are missing a package in this particular msys
> install.

Side note: one of the somewhat confusing things in mingw32 is that
it does not actually need the dll files to do a successful linking
of the final executable (it uses a special preprocessed file for
that stage), but it *does* need all dlls at runtime.

Best wishes,
Taco


From zappathustra at free.fr  Wed Sep 29 12:36:21 2010
From: zappathustra at free.fr (Paul Isambert)
Date: Wed, 29 Sep 2010 12:36:21 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <4CA312C6.3070705@elvenkind.com>
References: <1285436632.4c9e34d82aadf@imp.free.fr>	<AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>	<4CA08FFC.4050806@gust.org.pl>	<4CA2E1E9.5050606@free.fr>	<AANLkTinJKpcs_6B+ha_DvCOZySdEk0A=Jpd1tqseuh7T@mail.gmail.com>	<4CA2F83D.6010806@free.fr>	<20100929083726.GB7131@phare.normalesup.org>	<4CA310E1.70308@free.fr>	<AANLkTinxUPUMmPkcfbRjCD1Mu6AUX2a=R9y_dPDBSbzm@mail.gmail.com>	<4CA31227.9060907@elvenkind.com>
	<4CA312C6.3070705@elvenkind.com>
Message-ID: <4CA316A5.60806@free.fr>

  Le 29/09/2010 12:19, Taco Hoekwater a ?crit :
>
> On 09/29/10 12:17, Taco Hoekwater wrote:
>> libgcc_s_dw2 is one of the gcc runtime support libraries (for the dwarf
>> debugging format, I assume) so it sounds like either the dll search path
>> is messed up, or you are missing a package in this particular msys
>> install.
> Side note: one of the somewhat confusing things in mingw32 is that
> it does not actually need the dll files to do a successful linking
> of the final executable (it uses a special preprocessed file for
> that stage), but it *does* need all dlls at runtime.
The problem is the dll indeed (so this also answers Luigi's question). 
The missing package seems a promising idea, since when I was on the 
other computer (where the build was successful), I made many side 
installations,  but I can't remember which...

Best,
Paul

From luigi.scarso at gmail.com  Wed Sep 29 12:42:56 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Wed, 29 Sep 2010 12:42:56 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <4CA316A5.60806@free.fr>
References: <1285436632.4c9e34d82aadf@imp.free.fr>
	<AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>
	<4CA08FFC.4050806@gust.org.pl> <4CA2E1E9.5050606@free.fr>
	<AANLkTinJKpcs_6B+ha_DvCOZySdEk0A=Jpd1tqseuh7T@mail.gmail.com>
	<4CA2F83D.6010806@free.fr>
	<20100929083726.GB7131@phare.normalesup.org>
	<4CA310E1.70308@free.fr>
	<AANLkTinxUPUMmPkcfbRjCD1Mu6AUX2a=R9y_dPDBSbzm@mail.gmail.com>
	<4CA31227.9060907@elvenkind.com> <4CA312C6.3070705@elvenkind.com>
	<4CA316A5.60806@free.fr>
Message-ID: <AANLkTinCaAYhjdBebZ2+w2WR3MunS9Xe4fRptWSkVdi+@mail.gmail.com>

On Wed, Sep 29, 2010 at 12:36 PM, Paul Isambert <zappathustra at free.fr> wrote:
> ?Le 29/09/2010 12:19, Taco Hoekwater a ?crit :
>>
>> On 09/29/10 12:17, Taco Hoekwater wrote:
>>>
>>> libgcc_s_dw2 is one of the gcc runtime support libraries (for the dwarf
>>> debugging format, I assume) so it sounds like either the dll search path
>>> is messed up, or you are missing a package in this particular msys
>>> install.
>>
>> Side note: one of the somewhat confusing things in mingw32 is that
>> it does not actually need the dll files to do a successful linking
>> of the final executable (it uses a special preprocessed file for
>> that stage), but it *does* need all dlls at runtime.
>
> The problem is the dll indeed (so this also answers Luigi's question). The
> missing package seems a promising idea, since when I was on the other
> computer (where the build was successful), I made many side installations,
> ?but I can't remember which...
>
> Best,
> Paul
>
with
http://sourceforge.net/projects/mingw/files/Automated%20MinGW%20Installer/mingw-get-inst/mingw-get-inst-20100831/mingw-get-inst-20100831.exe/download

libgcc_s_dw is in c:\MinGW\bin
which in turn is on my path

-- 
luigi


From zappathustra at free.fr  Wed Sep 29 16:13:41 2010
From: zappathustra at free.fr (Paul Isambert)
Date: Wed, 29 Sep 2010 16:13:41 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <AANLkTinCaAYhjdBebZ2+w2WR3MunS9Xe4fRptWSkVdi+@mail.gmail.com>
References: <1285436632.4c9e34d82aadf@imp.free.fr>	<AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>	<4CA08FFC.4050806@gust.org.pl>
	<4CA2E1E9.5050606@free.fr>	<AANLkTinJKpcs_6B+ha_DvCOZySdEk0A=Jpd1tqseuh7T@mail.gmail.com>	<4CA2F83D.6010806@free.fr>	<20100929083726.GB7131@phare.normalesup.org>	<4CA310E1.70308@free.fr>	<AANLkTinxUPUMmPkcfbRjCD1Mu6AUX2a=R9y_dPDBSbzm@mail.gmail.com>	<4CA31227.9060907@elvenkind.com>
	<4CA312C6.3070705@elvenkind.com>	<4CA316A5.60806@free.fr>
	<AANLkTinCaAYhjdBebZ2+w2WR3MunS9Xe4fRptWSkVdi+@mail.gmail.com>
Message-ID: <4CA34995.8020507@free.fr>

  Le 29/09/2010 12:42, luigi scarso a ?crit :
> On Wed, Sep 29, 2010 at 12:36 PM, Paul Isambert<zappathustra at free.fr>  wrote:
>>   Le 29/09/2010 12:19, Taco Hoekwater a ?crit :
>>> On 09/29/10 12:17, Taco Hoekwater wrote:
>>>> libgcc_s_dw2 is one of the gcc runtime support libraries (for the dwarf
>>>> debugging format, I assume) so it sounds like either the dll search path
>>>> is messed up, or you are missing a package in this particular msys
>>>> install.
>>> Side note: one of the somewhat confusing things in mingw32 is that
>>> it does not actually need the dll files to do a successful linking
>>> of the final executable (it uses a special preprocessed file for
>>> that stage), but it *does* need all dlls at runtime.
>> The problem is the dll indeed (so this also answers Luigi's question). The
>> missing package seems a promising idea, since when I was on the other
>> computer (where the build was successful), I made many side installations,
>>   but I can't remember which...
>>
>> Best,
>> Paul
>>
> with
> http://sourceforge.net/projects/mingw/files/Automated%20MinGW%20Installer/mingw-get-inst/mingw-get-inst-20100831/mingw-get-inst-20100831.exe/download
>
> libgcc_s_dw is in c:\MinGW\bin
> which in turn is on my path

I have it too (precisely, libgcc_s_dw2-1.dll). If I put it in LuaTeX's 
folder, along with another one which is also missing, and can be found 
in MinGW/bin too, namely libstdc++-6.dll, then LuaTeX works.

It's has if there missed a link toward those dll, which LuaTeX should 
find by itself (as I've repeated several times, I'm ignorant on such 
things, so I might be saying pure nonsense).

Best,
Paul


From luigi.scarso at gmail.com  Wed Sep 29 16:16:26 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Wed, 29 Sep 2010 16:16:26 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <4CA34995.8020507@free.fr>
References: <1285436632.4c9e34d82aadf@imp.free.fr>
	<AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>
	<4CA08FFC.4050806@gust.org.pl> <4CA2E1E9.5050606@free.fr>
	<AANLkTinJKpcs_6B+ha_DvCOZySdEk0A=Jpd1tqseuh7T@mail.gmail.com>
	<4CA2F83D.6010806@free.fr>
	<20100929083726.GB7131@phare.normalesup.org>
	<4CA310E1.70308@free.fr>
	<AANLkTinxUPUMmPkcfbRjCD1Mu6AUX2a=R9y_dPDBSbzm@mail.gmail.com>
	<4CA31227.9060907@elvenkind.com> <4CA312C6.3070705@elvenkind.com>
	<4CA316A5.60806@free.fr>
	<AANLkTinCaAYhjdBebZ2+w2WR3MunS9Xe4fRptWSkVdi+@mail.gmail.com>
	<4CA34995.8020507@free.fr>
Message-ID: <AANLkTi=dhNsLsHC8gBsxujJ-sPyZ3TUfeESO9BoyEanY@mail.gmail.com>

On Wed, Sep 29, 2010 at 4:13 PM, Paul Isambert <zappathustra at free.fr> wrote:
> ?Le 29/09/2010 12:42, luigi scarso a ?crit :
>>
>> On Wed, Sep 29, 2010 at 12:36 PM, Paul Isambert<zappathustra at free.fr>
>> ?wrote:
>>>
>>> ?Le 29/09/2010 12:19, Taco Hoekwater a ?crit :
>>>>
>>>> On 09/29/10 12:17, Taco Hoekwater wrote:
>>>>>
>>>>> libgcc_s_dw2 is one of the gcc runtime support libraries (for the dwarf
>>>>> debugging format, I assume) so it sounds like either the dll search
>>>>> path
>>>>> is messed up, or you are missing a package in this particular msys
>>>>> install.
>>>>
>>>> Side note: one of the somewhat confusing things in mingw32 is that
>>>> it does not actually need the dll files to do a successful linking
>>>> of the final executable (it uses a special preprocessed file for
>>>> that stage), but it *does* need all dlls at runtime.
>>>
>>> The problem is the dll indeed (so this also answers Luigi's question).
>>> The
>>> missing package seems a promising idea, since when I was on the other
>>> computer (where the build was successful), I made many side
>>> installations,
>>> ?but I can't remember which...
>>>
>>> Best,
>>> Paul
>>>
>> with
>>
>> http://sourceforge.net/projects/mingw/files/Automated%20MinGW%20Installer/mingw-get-inst/mingw-get-inst-20100831/mingw-get-inst-20100831.exe/download
>>
>> libgcc_s_dw is in c:\MinGW\bin
>> which in turn is on my path
>
> I have it too (precisely, libgcc_s_dw2-1.dll). If I put it in LuaTeX's
> folder, along with another one which is also missing, and can be found in
> MinGW/bin too, namely libstdc++-6.dll, then LuaTeX works.
>
> It's has if there missed a link toward those dll, which LuaTeX should find
> by itself (as I've repeated several times, I'm ignorant on such things, so I
> might be saying pure nonsense).
Do you have them in your PATH variable ?


-- 
luigi


From zappathustra at free.fr  Wed Sep 29 16:55:25 2010
From: zappathustra at free.fr (Paul Isambert)
Date: Wed, 29 Sep 2010 16:55:25 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <AANLkTi=dhNsLsHC8gBsxujJ-sPyZ3TUfeESO9BoyEanY@mail.gmail.com>
References: <1285436632.4c9e34d82aadf@imp.free.fr>	<AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>	<4CA08FFC.4050806@gust.org.pl>
	<4CA2E1E9.5050606@free.fr>	<AANLkTinJKpcs_6B+ha_DvCOZySdEk0A=Jpd1tqseuh7T@mail.gmail.com>	<4CA2F83D.6010806@free.fr>	<20100929083726.GB7131@phare.normalesup.org>	<4CA310E1.70308@free.fr>	<AANLkTinxUPUMmPkcfbRjCD1Mu6AUX2a=R9y_dPDBSbzm@mail.gmail.com>	<4CA31227.9060907@elvenkind.com>
	<4CA312C6.3070705@elvenkind.com>	<4CA316A5.60806@free.fr>	<AANLkTinCaAYhjdBebZ2+w2WR3MunS9Xe4fRptWSkVdi+@mail.gmail.com>	<4CA34995.8020507@free.fr>
	<AANLkTi=dhNsLsHC8gBsxujJ-sPyZ3TUfeESO9BoyEanY@mail.gmail.com>
Message-ID: <4CA3535D.2090108@free.fr>

  Le 29/09/2010 16:16, luigi scarso a ?crit :
> On Wed, Sep 29, 2010 at 4:13 PM, Paul Isambert<zappathustra at free.fr>  wrote:
>>   Le 29/09/2010 12:42, luigi scarso a ?crit :
>>> On Wed, Sep 29, 2010 at 12:36 PM, Paul Isambert<zappathustra at free.fr>
>>>   wrote:
>>>>   Le 29/09/2010 12:19, Taco Hoekwater a ?crit :
>>>>> On 09/29/10 12:17, Taco Hoekwater wrote:
>>>>>> libgcc_s_dw2 is one of the gcc runtime support libraries (for the dwarf
>>>>>> debugging format, I assume) so it sounds like either the dll search
>>>>>> path
>>>>>> is messed up, or you are missing a package in this particular msys
>>>>>> install.
>>>>> Side note: one of the somewhat confusing things in mingw32 is that
>>>>> it does not actually need the dll files to do a successful linking
>>>>> of the final executable (it uses a special preprocessed file for
>>>>> that stage), but it *does* need all dlls at runtime.
>>>> The problem is the dll indeed (so this also answers Luigi's question).
>>>> The
>>>> missing package seems a promising idea, since when I was on the other
>>>> computer (where the build was successful), I made many side
>>>> installations,
>>>>   but I can't remember which...
>>>>
>>>> Best,
>>>> Paul
>>>>
>>> with
>>>
>>> http://sourceforge.net/projects/mingw/files/Automated%20MinGW%20Installer/mingw-get-inst/mingw-get-inst-20100831/mingw-get-inst-20100831.exe/download
>>>
>>> libgcc_s_dw is in c:\MinGW\bin
>>> which in turn is on my path
>> I have it too (precisely, libgcc_s_dw2-1.dll). If I put it in LuaTeX's
>> folder, along with another one which is also missing, and can be found in
>> MinGW/bin too, namely libstdc++-6.dll, then LuaTeX works.
>>
>> It's has if there missed a link toward those dll, which LuaTeX should find
>> by itself (as I've repeated several times, I'm ignorant on such things, so I
>> might be saying pure nonsense).
> Do you have them in your PATH variable ?
Now I do and everything works fine. The problem came from space between 
paths in the variable. Now I know there shouldn't be any!

Thanks all for your help,
Paul

From luigi.scarso at gmail.com  Wed Sep 29 17:12:43 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Wed, 29 Sep 2010 17:12:43 +0200
Subject: [luatex] Building LuaTeX.
In-Reply-To: <4CA3535D.2090108@free.fr>
References: <1285436632.4c9e34d82aadf@imp.free.fr>
	<AANLkTi=DV+VgwCjjTrKWPbi65J-mRBeJ6jJKSm0h3R09@mail.gmail.com>
	<4CA08FFC.4050806@gust.org.pl> <4CA2E1E9.5050606@free.fr>
	<AANLkTinJKpcs_6B+ha_DvCOZySdEk0A=Jpd1tqseuh7T@mail.gmail.com>
	<4CA2F83D.6010806@free.fr>
	<20100929083726.GB7131@phare.normalesup.org>
	<4CA310E1.70308@free.fr>
	<AANLkTinxUPUMmPkcfbRjCD1Mu6AUX2a=R9y_dPDBSbzm@mail.gmail.com>
	<4CA31227.9060907@elvenkind.com> <4CA312C6.3070705@elvenkind.com>
	<4CA316A5.60806@free.fr>
	<AANLkTinCaAYhjdBebZ2+w2WR3MunS9Xe4fRptWSkVdi+@mail.gmail.com>
	<4CA34995.8020507@free.fr>
	<AANLkTi=dhNsLsHC8gBsxujJ-sPyZ3TUfeESO9BoyEanY@mail.gmail.com>
	<4CA3535D.2090108@free.fr>
Message-ID: <AANLkTinQjHSKsKW3WAqsEcJ2VdBhhs=aF8i1wNWOkeG-@mail.gmail.com>

On Wed, Sep 29, 2010 at 4:55 PM, Paul Isambert <zappathustra at free.fr> wrote:
> ?Le 29/09/2010 16:16, luigi scarso a ?crit :
>>
>> On Wed, Sep 29, 2010 at 4:13 PM, Paul Isambert<zappathustra at free.fr>
>> ?wrote:
>>>
>>> ?Le 29/09/2010 12:42, luigi scarso a ?crit :
>>>>
>>>> On Wed, Sep 29, 2010 at 12:36 PM, Paul Isambert<zappathustra at free.fr>
>>>> ?wrote:
>>>>>
>>>>> ?Le 29/09/2010 12:19, Taco Hoekwater a ?crit :
>>>>>>
>>>>>> On 09/29/10 12:17, Taco Hoekwater wrote:
>>>>>>>
>>>>>>> libgcc_s_dw2 is one of the gcc runtime support libraries (for the
>>>>>>> dwarf
>>>>>>> debugging format, I assume) so it sounds like either the dll search
>>>>>>> path
>>>>>>> is messed up, or you are missing a package in this particular msys
>>>>>>> install.
>>>>>>
>>>>>> Side note: one of the somewhat confusing things in mingw32 is that
>>>>>> it does not actually need the dll files to do a successful linking
>>>>>> of the final executable (it uses a special preprocessed file for
>>>>>> that stage), but it *does* need all dlls at runtime.
>>>>>
>>>>> The problem is the dll indeed (so this also answers Luigi's question).
>>>>> The
>>>>> missing package seems a promising idea, since when I was on the other
>>>>> computer (where the build was successful), I made many side
>>>>> installations,
>>>>> ?but I can't remember which...
>>>>>
>>>>> Best,
>>>>> Paul
>>>>>
>>>> with
>>>>
>>>>
>>>> http://sourceforge.net/projects/mingw/files/Automated%20MinGW%20Installer/mingw-get-inst/mingw-get-inst-20100831/mingw-get-inst-20100831.exe/download
>>>>
>>>> libgcc_s_dw is in c:\MinGW\bin
>>>> which in turn is on my path
>>>
>>> I have it too (precisely, libgcc_s_dw2-1.dll). If I put it in LuaTeX's
>>> folder, along with another one which is also missing, and can be found in
>>> MinGW/bin too, namely libstdc++-6.dll, then LuaTeX works.
>>>
>>> It's has if there missed a link toward those dll, which LuaTeX should
>>> find
>>> by itself (as I've repeated several times, I'm ignorant on such things,
>>> so I
>>> might be saying pure nonsense).
>>
>> Do you have them in your PATH variable ?
>
> Now I do and everything works fine. The problem came from space between
> paths in the variable. Now I know there shouldn't be any!
Yes, it' safe .
You can also use quotes as in "C:\Program Files\MinGW\bin"
but it's better to avoid spaces in paths and filenames.



-- 
luigi


From talazem at fastmail.fm  Wed Sep 29 23:14:07 2010
From: talazem at fastmail.fm (Talal Al-Azem)
Date: Wed, 29 Sep 2010 22:14:07 +0100
Subject: [luatex] critical editions and academic writing with current ConTeXt
Message-ID: <D65B06E0-5793-4A08-AC84-330FD06E75C6@fastmail.fm>

Dear all,

This is my first post on this list, and I hope you all don't mind the question. I have read Dr Idris Hamid's 2007 Tug article on Oriental TeX, watched the 2007 River TV presentation, and just seen the recent 2010 presentation on Qur'anic typography. I have also done some searches on this mailing list, and read some of the (heated?) discussions regarding bidi using luatex + context, and likewise searched through the Context Garden a bit.

My question: could anyone recommend what I should read, on any website or forum, in order to begin learning how to typeset academic papers, books, and critical editions -- all of which may use both English and Arabic in the same document -- using luatex and context, as they stand now? Through a kind email by Mojca and Taco, I have been told that critical typesetting in mixed English and Arabic is currently possible. 

I have about 4 years of on-and-off experience using XeLaTeX, the Memoir package, and ednotes in LaTeX, and have typeset a mixed Arabic and English book. But I am currently preparing a thesis in English which includes critical editing of Arabic texts. I am running into some of the limitations of XeLaTeX with the Memoir, Bidi and ednotes packages, and Mojca suggested that perhaps ConTeXt might work.

I am  slightly daunted by the fact that there doesn't seem to be much in the way of manuals (print or digital) or centralised information for *this* purpose (i.e. typesetting with all the necessary critical apparatus of academic writing and editions).  Could anyone point me in the right direction of where to begin to learn? 

Many thanks in advance.

Kind regards,
Talal Al-Azem

From sbbrouwer at gmail.com  Thu Sep 30 00:18:18 2010
From: sbbrouwer at gmail.com (Sietse Brouwer)
Date: Thu, 30 Sep 2010 00:18:18 +0200
Subject: [luatex] Passing verbatim text to a function
In-Reply-To: <A07FE30C-9A31-41EB-87B2-9FC33CB9D7CC@gmail.com>
References: <AANLkTimbxNXyegm-+=tN5gutnbqnRtbbt3O7Zv-JVV5M@mail.gmail.com>
	<D0B564CB-F0A9-41C2-A8BB-5AEE3E515F45@gmail.com>
	<AANLkTikkz8Rs4gu5D5hpZcCcvH=22G7M2e7NP2up1nsM@mail.gmail.com>
	<80D12F7E-4D22-4F11-8F06-39BAEED10196@gmail.com>
	<AANLkTi=bGtJGD08wRPW=Od6d1627SpcBonEN0SC6x2gE@mail.gmail.com>
	<A07FE30C-9A31-41EB-87B2-9FC33CB9D7CC@gmail.com>
Message-ID: <AANLkTimYr5q0ggbYJHm5xR0vpXBYvvAfHiWS91jDjkud@mail.gmail.com>

Hi Wolfgang, all,

On Tue, Sep 28, 2010 at 06:24, Wolfgang Schuster
<schuster.wolfgang at googlemail.com> wrote:
>
> \def\startone
> ?{\begingroup
> ? \obeylines
> ? \dostartone}
>
> \def\dostartone#1\stopone
> ?{\ctxlua{thirddata.one(...)}%
> ? \endgroup}

That works. Marvellous. Thank-you very much. Apologies for the delay
in replying --- I was working on writing up your advice for the wiki,
with some comments and explantions for the novice. The result is here:
http://wiki.contextgarden.net/Programming_in_LuaTeX#Getting_text_into_LuaTex_verbatim
Should anyone feel like giving it a once-over: corrections are humbly solicited.

Kind regards,

Sietse Brouwer


From dcnieho at gmail.com  Thu Sep 30 02:39:19 2010
From: dcnieho at gmail.com (Diederick C. Niehorster)
Date: Thu, 30 Sep 2010 08:39:19 +0800
Subject: [luatex] Passing verbatim text to a function
In-Reply-To: <AANLkTimYr5q0ggbYJHm5xR0vpXBYvvAfHiWS91jDjkud@mail.gmail.com>
References: <AANLkTimbxNXyegm-+=tN5gutnbqnRtbbt3O7Zv-JVV5M@mail.gmail.com>
	<D0B564CB-F0A9-41C2-A8BB-5AEE3E515F45@gmail.com>
	<AANLkTikkz8Rs4gu5D5hpZcCcvH=22G7M2e7NP2up1nsM@mail.gmail.com>
	<80D12F7E-4D22-4F11-8F06-39BAEED10196@gmail.com>
	<AANLkTi=bGtJGD08wRPW=Od6d1627SpcBonEN0SC6x2gE@mail.gmail.com>
	<A07FE30C-9A31-41EB-87B2-9FC33CB9D7CC@gmail.com>
	<AANLkTimYr5q0ggbYJHm5xR0vpXBYvvAfHiWS91jDjkud@mail.gmail.com>
Message-ID: <AANLkTinmiOhYxG1VfKVKEVRs4fZRxpBEu30vRhPMLF5=@mail.gmail.com>

Hoi Sietse,

Very readable to me, who doesn't know much about this stuff, so good work.

Some notes (hope I'm not misreading the code, dont know lua):
- in the first environment block, you're using thirddata.verbatim, not
thirddata.dedent, is that right?
- in that block and in the macro block, the lua function is called
with two input arguments, while thirddata.dedent only takes 1 (i can
only guess about thirddata.verbatim).

I just note that the wiki can really use some better syntax
highlighting btw (or would that be my IE7 on windows XP issue?).

Best,
Dee

On Thu, Sep 30, 2010 at 06:18, Sietse Brouwer <sbbrouwer at gmail.com> wrote:
> Hi Wolfgang, all,
>
> On Tue, Sep 28, 2010 at 06:24, Wolfgang Schuster
> <schuster.wolfgang at googlemail.com> wrote:
>>
>> \def\startone
>> ?{\begingroup
>> ? \obeylines
>> ? \dostartone}
>>
>> \def\dostartone#1\stopone
>> ?{\ctxlua{thirddata.one(...)}%
>> ? \endgroup}
>
> That works. Marvellous. Thank-you very much. Apologies for the delay
> in replying --- I was working on writing up your advice for the wiki,
> with some comments and explantions for the novice. The result is here:
> http://wiki.contextgarden.net/Programming_in_LuaTeX#Getting_text_into_LuaTex_verbatim
> Should anyone feel like giving it a once-over: corrections are humbly solicited.
>
> Kind regards,
>
> Sietse Brouwer
>
>


From luigi.scarso at gmail.com  Thu Sep 30 07:18:28 2010
From: luigi.scarso at gmail.com (luigi scarso)
Date: Thu, 30 Sep 2010 07:18:28 +0200
Subject: [luatex] critical editions and academic writing with current
	ConTeXt
In-Reply-To: <D65B06E0-5793-4A08-AC84-330FD06E75C6@fastmail.fm>
References: <D65B06E0-5793-4A08-AC84-330FD06E75C6@fastmail.fm>
Message-ID: <AANLkTinvmAhsqaZUyfJFDQAKJgS2_k1A6CfVdGLsKNhn@mail.gmail.com>

On Wed, Sep 29, 2010 at 11:14 PM, Talal Al-Azem <talazem at fastmail.fm> wrote:
> Dear all,
>
> This is my first post on this list, and I hope you all don't mind the question. I have read Dr Idris Hamid's 2007 Tug article on Oriental TeX, watched the 2007 River TV presentation, and just seen the recent 2010 presentation on Qur'anic typography. I have also done some searches on this mailing list, and read some of the (heated?) discussions regarding bidi using luatex + context, and likewise searched through the Context Garden a bit.
>
> My question: could anyone recommend what I should read, on any website or forum, in order to begin learning how to typeset academic papers, books, and critical editions -- all of which may use both English and Arabic in the same document -- using luatex and context, as they stand now? Through a kind email by Mojca and Taco, I have been told that critical typesetting in mixed English and Arabic is currently possible.
>
> I have about 4 years of on-and-off experience using XeLaTeX, the Memoir package, and ednotes in LaTeX, and have typeset a mixed Arabic and English book. But I am currently preparing a thesis in English which includes critical editing of Arabic texts. I am running into some of the limitations of XeLaTeX with the Memoir, Bidi and ednotes packages, and Mojca suggested that perhaps ConTeXt might work.
>
> I am ?slightly daunted by the fact that there doesn't seem to be much in the way of manuals (print or digital) or centralised information for *this* purpose (i.e. typesetting with all the necessary critical apparatus of academic writing and editions). ?Could anyone point me in the right direction of where to begin to learn?
>
> Many thanks in advance.
step-by-step with mkiv.
You already know *TeX, so it's not so difficult to learn context mkiv.
wiki.contextgarden.net is the starting point ; use google to search in the wiki.
Anyway it's better to subscribe to ntg-context at ntg.nl mailing list.


-- 
luigi


From patrick at gundla.ch  Thu Sep 30 07:44:52 2010
From: patrick at gundla.ch (Patrick Gundlach)
Date: Thu, 30 Sep 2010 07:44:52 +0200
Subject: [luatex] Passing verbatim text to a function
In-Reply-To: <AANLkTinmiOhYxG1VfKVKEVRs4fZRxpBEu30vRhPMLF5=@mail.gmail.com>
References: <AANLkTimbxNXyegm-+=tN5gutnbqnRtbbt3O7Zv-JVV5M@mail.gmail.com>
	<D0B564CB-F0A9-41C2-A8BB-5AEE3E515F45@gmail.com>
	<AANLkTikkz8Rs4gu5D5hpZcCcvH=22G7M2e7NP2up1nsM@mail.gmail.com>
	<80D12F7E-4D22-4F11-8F06-39BAEED10196@gmail.com>
	<AANLkTi=bGtJGD08wRPW=Od6d1627SpcBonEN0SC6x2gE@mail.gmail.com>
	<A07FE30C-9A31-41EB-87B2-9FC33CB9D7CC@gmail.com>
	<AANLkTimYr5q0ggbYJHm5xR0vpXBYvvAfHiWS91jDjkud@mail.gmail.com>
	<AANLkTinmiOhYxG1VfKVKEVRs4fZRxpBEu30vRhPMLF5=@mail.gmail.com>
Message-ID: <E35876A2-91F5-4312-8F7F-AC1AE655ED85@gundla.ch>

off topic, but anyway...

> 
> I just note that the wiki can really use some better syntax
> highlighting btw (or would that be my IE7 on windows XP issue?).

It's not that easy, because mainly it's TeX code, but then switches into Lua mode. So at that point, Lua syntax hightlighting rules should apply.

Patrick

From sbbrouwer at gmail.com  Thu Sep 30 21:56:44 2010
From: sbbrouwer at gmail.com (Sietse Brouwer)
Date: Thu, 30 Sep 2010 21:56:44 +0200
Subject: [luatex] Passing verbatim text to a function
In-Reply-To: <AANLkTinmiOhYxG1VfKVKEVRs4fZRxpBEu30vRhPMLF5=@mail.gmail.com>
References: <AANLkTimbxNXyegm-+=tN5gutnbqnRtbbt3O7Zv-JVV5M@mail.gmail.com>
	<D0B564CB-F0A9-41C2-A8BB-5AEE3E515F45@gmail.com>
	<AANLkTikkz8Rs4gu5D5hpZcCcvH=22G7M2e7NP2up1nsM@mail.gmail.com>
	<80D12F7E-4D22-4F11-8F06-39BAEED10196@gmail.com>
	<AANLkTi=bGtJGD08wRPW=Od6d1627SpcBonEN0SC6x2gE@mail.gmail.com>
	<A07FE30C-9A31-41EB-87B2-9FC33CB9D7CC@gmail.com>
	<AANLkTimYr5q0ggbYJHm5xR0vpXBYvvAfHiWS91jDjkud@mail.gmail.com>
	<AANLkTinmiOhYxG1VfKVKEVRs4fZRxpBEu30vRhPMLF5=@mail.gmail.com>
Message-ID: <AANLkTinyoHapsmgzADJ8C-LYqopD4Hgs0O1WpOvKN8S1@mail.gmail.com>

Ha die Diederick,

> Some notes (hope I'm not misreading the code, dont know lua):
> - in the first environment block, you're using thirddata.verbatim, not
> thirddata.dedent, is that right?

> - in that block and in the macro block, the lua function is called
> with two input arguments, while thirddata.dedent only takes 1 (i can
> only guess about thirddata.verbatim).

Ah, both good catches. Hangovers from previous versions. All fixed now, ta.

> I just note that the wiki can really use some better syntax
> highlighting btw (or would that be my IE7 on windows XP issue?).

On which note: I should probably hack up a Vim syntax file that does
interweaved ConTeXt and Lua highlighting. One of these days, perhaps.
If anyone else gets the jones first, don't hesitate --- you'll
probably beat me to it. :-)

--Sietse

--
Sietse Brouwer -- sbbrouwer at gmail.com -- +31 6 13456848
Wildekamp 32 -- 6721 JD Bennekom -- the Netherlands
MSN: sietse at gawab.com -- ICQ: 341232104



On Thu, Sep 30, 2010 at 02:39, Diederick C. Niehorster
<dcnieho at gmail.com> wrote:
> Hoi Sietse,
>
> Very readable to me, who doesn't know much about this stuff, so good work.
>
> Some notes (hope I'm not misreading the code, dont know lua):
> - in the first environment block, you're using thirddata.verbatim, not
> thirddata.dedent, is that right?
> - in that block and in the macro block, the lua function is called
> with two input arguments, while thirddata.dedent only takes 1 (i can
> only guess about thirddata.verbatim).
>
> I just note that the wiki can really use some better syntax
> highlighting btw (or would that be my IE7 on windows XP issue?).
>
> Best,
> Dee
>
> On Thu, Sep 30, 2010 at 06:18, Sietse Brouwer <sbbrouwer at gmail.com> wrote:
>> Hi Wolfgang, all,
>>
>> On Tue, Sep 28, 2010 at 06:24, Wolfgang Schuster
>> <schuster.wolfgang at googlemail.com> wrote:
>>>
>>> \def\startone
>>> ?{\begingroup
>>> ? \obeylines
>>> ? \dostartone}
>>>
>>> \def\dostartone#1\stopone
>>> ?{\ctxlua{thirddata.one(...)}%
>>> ? \endgroup}
>>
>> That works. Marvellous. Thank-you very much. Apologies for the delay
>> in replying --- I was working on writing up your advice for the wiki,
>> with some comments and explantions for the novice. The result is here:
>> http://wiki.contextgarden.net/Programming_in_LuaTeX#Getting_text_into_LuaTex_verbatim
>> Should anyone feel like giving it a once-over: corrections are humbly solicited.
>>
>> Kind regards,
>>
>> Sietse Brouwer
>>
>>
>
>


