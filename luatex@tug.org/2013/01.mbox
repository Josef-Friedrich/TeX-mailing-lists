From Herbert.Voss at FU-Berlin.DE  Wed Jan  2 18:27:52 2013
From: Herbert.Voss at FU-Berlin.DE (Herbert Voss)
Date: Wed, 2 Jan 2013 18:27:52 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <50D8630B.4070104@elvenkind.com>
References: <50D8630B.4070104@elvenkind.com>
Message-ID: <50E46E18.8080902@FU-Berlin.DE>

Am 24.12.2012 15:13, schrieb Taco Hoekwater:

> I have just uploaded the archives for a new luatex release, 0.74.0.

will it be available on metatex.org?

Herbert


From mojca.miklavec.lists at gmail.com  Wed Jan  2 18:41:40 2013
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 2 Jan 2013 18:41:40 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <50E46E18.8080902@FU-Berlin.DE>
References: <50D8630B.4070104@elvenkind.com>
	<50E46E18.8080902@FU-Berlin.DE>
Message-ID: <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>

On Wed, Jan 2, 2013 at 6:27 PM, Herbert Voss wrote:
> Am 24.12.2012 15:13, schrieb Taco Hoekwater:
>
>> I have just uploaded the archives for a new luatex release, 0.74.0.
>
> will it be available on metatex.org?

I can do it easily - all binaries apart from powerpc-linux and
sparc-solaris are ready, but I need a green light first. The version
of ConTeXt in TeX Live 2012 doesn't work with 0.74.0 without some
modifications and there might be a couple of other scripts that might
need a fix. I didn't follow the status of those scripts. For ConTeXt
we either need some testing to figure out which modifications are
needed (part of the blame for not testing that yet is on me) or Hans
needs to release a new "current/stable" version.

Mojca

From mojca.miklavec.lists at gmail.com  Wed Jan  2 18:46:37 2013
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Wed, 2 Jan 2013 18:46:37 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
Message-ID: <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>

On Wed, Jan 2, 2013 at 6:41 PM, Mojca Miklavec wrote:
> On Wed, Jan 2, 2013 at 6:27 PM, Herbert Voss wrote:
>> Am 24.12.2012 15:13, schrieb Taco Hoekwater:
>>
>>> I have just uploaded the archives for a new luatex release, 0.74.0.
>>
>> will it be available on metatex.org?
>
> I can do it easily - all binaries apart from powerpc-linux and
> sparc-solaris are ready, but I need a green light first. The version
> of ConTeXt in TeX Live 2012 doesn't work with 0.74.0 without some
> modifications and there might be a couple of other scripts that might
> need a fix. I didn't follow the status of those scripts. For ConTeXt
> we either need some testing to figure out which modifications are
> needed (part of the blame for not testing that yet is on me) or Hans
> needs to release a new "current/stable" version.

Of course I can also upgrade all the binaries to the latest version in
full awareness that this will break ConTeXt (and possibly some other
scripts) if that's what users want. But if anyone would really like to
test the binary without compiling it and before it makes it to
tlcontrib, you can get it from
http://svn.contextgarden.net/suite-bin/tex/.

Mojca

From Herbert.Voss at FU-Berlin.DE  Wed Jan  2 19:41:29 2013
From: Herbert.Voss at FU-Berlin.DE (Herbert Voss)
Date: Wed, 2 Jan 2013 19:41:29 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
Message-ID: <50E47F59.6020506@FU-Berlin.DE>

Am 02.01.2013 18:46, schrieb Mojca Miklavec:
> On Wed, Jan 2, 2013 at 6:41 PM, Mojca Miklavec wrote:
>> On Wed, Jan 2, 2013 at 6:27 PM, Herbert Voss wrote:
>>> Am 24.12.2012 15:13, schrieb Taco Hoekwater:
>>>
>>>> I have just uploaded the archives for a new luatex release, 0.74.0.
>>>
>>> will it be available on metatex.org?
>>
>> I can do it easily - all binaries apart from powerpc-linux and
>> sparc-solaris are ready, but I need a green light first. The version
>> of ConTeXt in TeX Live 2012 doesn't work with 0.74.0 without some
>> modifications and there might be a couple of other scripts that might
>> need a fix. I didn't follow the status of those scripts. For ConTeXt
>> we either need some testing to figure out which modifications are
>> needed (part of the blame for not testing that yet is on me) or Hans
>> needs to release a new "current/stable" version.
>
> Of course I can also upgrade all the binaries to the latest version in
> full awareness that this will break ConTeXt (and possibly some other
> scripts) if that's what users want. But if anyone would really like to
> test the binary without compiling it and before it makes it to
> tlcontrib, you can get it from
> http://svn.contextgarden.net/suite-bin/tex/.

there will be a problem with Heikos Package which is called
by unicode-math

...
(/usr/local/texlive/2012/texmf-dist/tex/generic/oberdiek/luatex-loader.sty
(/usr/local/texlive/2012/texmf-dist/scripts/oberdiek/oberdiek.luatex.lua)
! LuaTeX error 
...ive/2012/texmf-dist/scripts/oberdiek/oberdiek.luatex.lua:55:
bad argument #1 to 'insert' (table expected, got nil)
stack traceback:
	[C]: in function 'insert'
	...ive/2012/texmf-dist/scripts/oberdiek/oberdiek.luatex.lua:55: in main 
chunk
	[C]: in function 'dofile'
	[string "\directlua "]:6: in main chunk.
l.139   }


X86_64:
This is LuaTeX, Version beta-0.74.0-2012122510 (rev 4541)

0.72 works well

\documentclass{scrartcl}
\usepackage{unicode-math}
\begin{document}
foo
\end{document}

Herbert

From Herbert.Voss at FU-Berlin.DE  Wed Jan  2 19:53:59 2013
From: Herbert.Voss at FU-Berlin.DE (Herbert Voss)
Date: Wed, 2 Jan 2013 19:53:59 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <50E47F59.6020506@FU-Berlin.DE>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE>
Message-ID: <50E48247.9050603@FU-Berlin.DE>

Am 02.01.2013 19:41, schrieb Herbert Voss:

> there will be a problem with Heikos Package which is called
> by unicode-math

it looks like a problem with the missing require('...');
lines, as mentioned in Tacos announcement.

Herbert



>
> ...
> (/usr/local/texlive/2012/texmf-dist/tex/generic/oberdiek/luatex-loader.sty
> (/usr/local/texlive/2012/texmf-dist/scripts/oberdiek/oberdiek.luatex.lua)
> ! LuaTeX error
> ...ive/2012/texmf-dist/scripts/oberdiek/oberdiek.luatex.lua:55:
> bad argument #1 to 'insert' (table expected, got nil)
> stack traceback:
>      [C]: in function 'insert'
>      ...ive/2012/texmf-dist/scripts/oberdiek/oberdiek.luatex.lua:55: in
> main chunk
>      [C]: in function 'dofile'
>      [string "\directlua "]:6: in main chunk.
> l.139   }
>
>
> X86_64:
> This is LuaTeX, Version beta-0.74.0-2012122510 (rev 4541)
>
> 0.72 works well
>
> \documentclass{scrartcl}
> \usepackage{unicode-math}
> \begin{document}
> foo
> \end{document}
>
> Herbert
>


From Herbert.Voss at FU-Berlin.DE  Wed Jan  2 21:17:03 2013
From: Herbert.Voss at FU-Berlin.DE (Herbert Voss)
Date: Wed, 2 Jan 2013 21:17:03 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <50D8630B.4070104@elvenkind.com>
References: <50D8630B.4070104@elvenkind.com>
Message-ID: <50E495BF.9040708@FU-Berlin.DE>

Am 24.12.2012 15:13, schrieb Taco Hoekwater:

> * Two new callbacks: find_cidmap_file and load_cidmap_file
>    (used by the fontloader to discover .cidmaps)

only find_cidmap_file is listed in the documentation.

>    svn co http://foundry.supelec.fr/svn/luatex/tags/beta-0.74.0

Herbert


From taco at elvenkind.com  Thu Jan  3 09:48:04 2013
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 3 Jan 2013 09:48:04 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <50E495BF.9040708@FU-Berlin.DE>
References: <50D8630B.4070104@elvenkind.com> <50E495BF.9040708@FU-Berlin.DE>
Message-ID: <50E545C4.4090701@elvenkind.com>

On 01/02/2013 09:17 PM, Herbert Voss wrote:
> Am 24.12.2012 15:13, schrieb Taco Hoekwater:
>
>> * Two new callbacks: find_cidmap_file and load_cidmap_file
>>    (used by the fontloader to discover .cidmaps)
>
> only find_cidmap_file is listed in the documentation.

After some consideration, both of those callbacks are going
away again. The rationale for that is that we want to split
off fontloader to a .so/.dll file, and that cannot happen if
it has too many internal entry points.

Besides, it is not hard to load .cidmap files from lua code.

Best wishes,
Taco

From taco at elvenkind.com  Thu Jan  3 09:50:01 2013
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 3 Jan 2013 09:50:01 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <50E48247.9050603@FU-Berlin.DE>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
Message-ID: <50E54639.1020908@elvenkind.com>

On 01/02/2013 07:53 PM, Herbert Voss wrote:
> Am 02.01.2013 19:41, schrieb Herbert Voss:
>
>> there will be a problem with Heikos Package which is called
>> by unicode-math
>
> it looks like a problem with the missing require('...');
> lines, as mentioned in Tacos announcement.

No, the problem is this line:

	table.insert(package.loaders, kpse_module_loader)

package.loaders does not exist any more in lua52.

Best wishes,
Taco

From Herbert.Voss at FU-Berlin.DE  Thu Jan  3 10:18:15 2013
From: Herbert.Voss at FU-Berlin.DE (Herbert Voss)
Date: Thu, 3 Jan 2013 10:18:15 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <50E54639.1020908@elvenkind.com>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
 <50E54639.1020908@elvenkind.com>
Message-ID: <50E54CD7.6070705@FU-Berlin.DE>

Am 03.01.2013 09:50, schrieb Taco Hoekwater:
> On 01/02/2013 07:53 PM, Herbert Voss wrote:
>> Am 02.01.2013 19:41, schrieb Herbert Voss:
>>
>>> there will be a problem with Heikos Package which is called
>>> by unicode-math
>>
>> it looks like a problem with the missing require('...');
>> lines, as mentioned in Tacos announcement.
>
> No, the problem is this line:
>
>      table.insert(package.loaders, kpse_module_loader)
>
> package.loaders does not exist any more in lua52.

Oh, I love renaming of functions ...
Using
       table.insert(package.searchers, kpse_module_loader)

and changing package.loaders to package.searchers in the
other lua files, now leads to

! LuaTeX error 
.../2012/texmf-dist/tex/luatex/luaotfload/otfl-luat-dum.lua:65:
invalid escape sequence near '\/'
stack traceback:
	[C]: in function 'dofile'
	...ive/2012/texmf-dist/tex/luatex/luaotfload/luaotfload.lua:46: in 
function 'l
oadmodule'
	...ive/2012/texmf-dist/tex/luatex/luaotfload/luaotfload.lua:51: in main 
chunk
	[C]: in function 'require'
	...xlive/2012/texmf-dist/tex/luatex/luatexbase/modutils.lua:52: in 
function 'r
equire_module'
	[string "\directlua "]:1: in main chunk.
\lltxb at requirelua ...xluaescapestring {#2}" \fi )}

l.35 \endinput

?

Herbert

From pragma at wxs.nl  Thu Jan  3 18:48:02 2013
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 3 Jan 2013 18:48:02 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <50E54CD7.6070705@FU-Berlin.DE>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
 <50E54639.1020908@elvenkind.com> <50E54CD7.6070705@FU-Berlin.DE>
Message-ID: <50E5C452.3060800@wxs.nl>

On 1/3/2013 10:18 AM, Herbert Voss wrote:
> Am 03.01.2013 09:50, schrieb Taco Hoekwater:
>> On 01/02/2013 07:53 PM, Herbert Voss wrote:
>>> Am 02.01.2013 19:41, schrieb Herbert Voss:
>>>
>>>> there will be a problem with Heikos Package which is called
>>>> by unicode-math
>>>
>>> it looks like a problem with the missing require('...');
>>> lines, as mentioned in Tacos announcement.
>>
>> No, the problem is this line:
>>
>>      table.insert(package.loaders, kpse_module_loader)
>>
>> package.loaders does not exist any more in lua52.
>
> Oh, I love renaming of functions ...
> Using
>        table.insert(package.searchers, kpse_module_loader)
>
> and changing package.loaders to package.searchers in the
> other lua files, now leads to
>
> ! LuaTeX error
> ..../2012/texmf-dist/tex/luatex/luaotfload/otfl-luat-dum.lua:65:
> invalid escape sequence near '\/'
> stack traceback:
>      [C]: in function 'dofile'
>      ...ive/2012/texmf-dist/tex/luatex/luaotfload/luaotfload.lua:46: in
> function 'l
> oadmodule'
>      ...ive/2012/texmf-dist/tex/luatex/luaotfload/luaotfload.lua:51: in
> main chunk
>      [C]: in function 'require'
>      ...xlive/2012/texmf-dist/tex/luatex/luatexbase/modutils.lua:52: in
> function 'r
> equire_module'
>      [string "\directlua "]:1: in main chunk.
> \lltxb at requirelua ...xluaescapestring {#2}" \fi )}
>
> l.35 \endinput
>
> ?

imo one shouldn't use the latest luatex with a frozen texlive 2012 
(unless one is also willing to update all relevant tex and lua files).

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From gnurser at gmail.com  Fri Jan  4 15:41:35 2013
From: gnurser at gmail.com (George Nurser)
Date: Fri, 4 Jan 2013 14:41:35 +0000
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <50E5C452.3060800@wxs.nl>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
 <50E54639.1020908@elvenkind.com> <50E54CD7.6070705@FU-Berlin.DE>
 <50E5C452.3060800@wxs.nl>
Message-ID: <CAAyCRnT7GF7O2CqsCq7CdZdbbkGyvZBWtjzXaLbHk2Bf1urydg@mail.gmail.com>

Are there plans to allow Tex Live Utility to update luatex?
My copy of TeX Live 2012 is still using beta-0.70.2-2012062819.

Best regards, George.


On 3 January 2013 17:48, Hans Hagen <pragma at wxs.nl> wrote:

> On 1/3/2013 10:18 AM, Herbert Voss wrote:
>
>> Am 03.01.2013 09:50, schrieb Taco Hoekwater:
>>
>>> On 01/02/2013 07:53 PM, Herbert Voss wrote:
>>>
>>>> Am 02.01.2013 19:41, schrieb Herbert Voss:
>>>>
>>>>  there will be a problem with Heikos Package which is called
>>>>> by unicode-math
>>>>>
>>>>
>>>> it looks like a problem with the missing require('...');
>>>> lines, as mentioned in Tacos announcement.
>>>>
>>>
>>> No, the problem is this line:
>>>
>>>      table.insert(package.loaders, kpse_module_loader)
>>>
>>> package.loaders does not exist any more in lua52.
>>>
>>
>> Oh, I love renaming of functions ...
>> Using
>>        table.insert(package.**searchers, kpse_module_loader)
>>
>> and changing package.loaders to package.searchers in the
>> other lua files, now leads to
>>
>> ! LuaTeX error
>> ..../2012/texmf-dist/tex/**luatex/luaotfload/otfl-luat-**dum.lua:65:
>>
>> invalid escape sequence near '\/'
>> stack traceback:
>>      [C]: in function 'dofile'
>>      ...ive/2012/texmf-dist/tex/**luatex/luaotfload/luaotfload.**lua:46:
>> in
>> function 'l
>> oadmodule'
>>      ...ive/2012/texmf-dist/tex/**luatex/luaotfload/luaotfload.**lua:51:
>> in
>> main chunk
>>      [C]: in function 'require'
>>      ...xlive/2012/texmf-dist/tex/**luatex/luatexbase/modutils.**lua:52:
>> in
>> function 'r
>> equire_module'
>>      [string "\directlua "]:1: in main chunk.
>> \lltxb at requirelua ...xluaescapestring {#2}" \fi )}
>>
>> l.35 \endinput
>>
>> ?
>>
>
> imo one shouldn't use the latest luatex with a frozen texlive 2012 (unless
> one is also willing to update all relevant tex and lua files).
>
> Hans
>
> ------------------------------**------------------------------**-----
>                                           Hans Hagen | PRAGMA ADE
>               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
>     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
>                                              | www.pragma-pod.nl
> ------------------------------**------------------------------**-----
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/luatex/attachments/20130104/eca9220e/attachment.html>

From martin at oneiros.de  Fri Jan  4 15:45:20 2013
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 4 Jan 2013 15:45:20 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <CAAyCRnT7GF7O2CqsCq7CdZdbbkGyvZBWtjzXaLbHk2Bf1urydg@mail.gmail.com>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
 <50E54639.1020908@elvenkind.com> <50E54CD7.6070705@FU-Berlin.DE>
 <50E5C452.3060800@wxs.nl>
 <CAAyCRnT7GF7O2CqsCq7CdZdbbkGyvZBWtjzXaLbHk2Bf1urydg@mail.gmail.com>
Message-ID: <CAP7DCDdZ12AdxoB3zHe=CZ278hHEs32MK1PvV1TpM-_Nd2ufNg@mail.gmail.com>

2013/1/4 George Nurser <gnurser at gmail.com>:
> Are there plans to allow Tex Live Utility to update luatex?

AFAIK there are no "major" binary updates done for TeXLive.

Best
   Martin

From joseph.wright at morningstar2.co.uk  Fri Jan  4 15:53:52 2013
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Fri, 4 Jan 2013 14:53:52 +0000
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <CAP7DCDdZ12AdxoB3zHe=CZ278hHEs32MK1PvV1TpM-_Nd2ufNg@mail.gmail.com>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
 <50E54639.1020908@elvenkind.com> <50E54CD7.6070705@FU-Berlin.DE>
 <50E5C452.3060800@wxs.nl>
 <CAAyCRnT7GF7O2CqsCq7CdZdbbkGyvZBWtjzXaLbHk2Bf1urydg@mail.gmail.com>
 <CAP7DCDdZ12AdxoB3zHe=CZ278hHEs32MK1PvV1TpM-_Nd2ufNg@mail.gmail.com>
Message-ID: <50E6ED00.5060207@morningstar2.co.uk>

On 04/01/2013 14:45, Martin Schr?der wrote:
> 2013/1/4 George Nurser <gnurser at gmail.com>:
>> Are there plans to allow Tex Live Utility to update luatex?
> 
> AFAIK there are no "major" binary updates done for TeXLive.
> 
> Best
>    Martin

LuaTeX is available from TLContrib, which can be used with tlmgr to
install binary updates (at your own risk):
http://tlcontrib.metatex.org/usage.html.
-- 
Joseph Wright

From preining at logic.at  Fri Jan  4 15:45:14 2013
From: preining at logic.at (Norbert Preining)
Date: Fri, 4 Jan 2013 23:45:14 +0900
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <CAAyCRnT7GF7O2CqsCq7CdZdbbkGyvZBWtjzXaLbHk2Bf1urydg@mail.gmail.com>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
 <50E54639.1020908@elvenkind.com> <50E54CD7.6070705@FU-Berlin.DE>
 <50E5C452.3060800@wxs.nl>
 <CAAyCRnT7GF7O2CqsCq7CdZdbbkGyvZBWtjzXaLbHk2Bf1urydg@mail.gmail.com>
Message-ID: <20130104144514.GL5381@gamma.logic.tuwien.ac.at>

On Fr, 04 Jan 2013, George Nurser wrote:
> Are there plans to allow Tex Live Utility to update luatex?
> My copy of TeX Live 2012 is still using beta-0.70.2-2012062819.

tlcontrib/2012 ...

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
DSA: 0x09C5B094   fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
------------------------------------------------------------------------

From dbitouze at wanadoo.fr  Fri Jan  4 16:01:57 2013
From: dbitouze at wanadoo.fr (Denis =?ISO-8859-15?B?Qml0b3V66Q==?=)
Date: Fri, 4 Jan 2013 16:01:57 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <50E6ED00.5060207@morningstar2.co.uk>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
 <50E54639.1020908@elvenkind.com> <50E54CD7.6070705@FU-Berlin.DE>
 <50E5C452.3060800@wxs.nl>
 <CAAyCRnT7GF7O2CqsCq7CdZdbbkGyvZBWtjzXaLbHk2Bf1urydg@mail.gmail.com>
 <CAP7DCDdZ12AdxoB3zHe=CZ278hHEs32MK1PvV1TpM-_Nd2ufNg@mail.gmail.com>
 <50E6ED00.5060207@morningstar2.co.uk>
Message-ID: <20130104160157.70eeaf56@wanadoo.fr>

Le vendredi 04/01/13 ? 14h53,
Joseph Wright <joseph.wright at morningstar2.co.uk> a ?crit :

> LuaTeX is available from TLContrib, which can be used with tlmgr to
> install binary updates (at your own risk):
> http://tlcontrib.metatex.org/usage.html.

What would be the strategy to install TLContrib material, not in the
regular, but in a personal (test) TEXMF?
-- 
Denis


From Herbert.Voss at FU-Berlin.DE  Fri Jan  4 16:11:11 2013
From: Herbert.Voss at FU-Berlin.DE (Herbert Voss)
Date: Fri, 4 Jan 2013 16:11:11 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <50E6ED00.5060207@morningstar2.co.uk>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
 <50E54639.1020908@elvenkind.com> <50E54CD7.6070705@FU-Berlin.DE>
 <50E5C452.3060800@wxs.nl>
 <CAAyCRnT7GF7O2CqsCq7CdZdbbkGyvZBWtjzXaLbHk2Bf1urydg@mail.gmail.com>
 <CAP7DCDdZ12AdxoB3zHe=CZ278hHEs32MK1PvV1TpM-_Nd2ufNg@mail.gmail.com>
 <50E6ED00.5060207@morningstar2.co.uk>
Message-ID: <50E6F10F.5000206@FU-Berlin.DE>

Am 04.01.2013 15:53, schrieb Joseph Wright:
> On 04/01/2013 14:45, Martin Schr?der wrote:
>> 2013/1/4 George Nurser <gnurser at gmail.com>:
>>> Are there plans to allow Tex Live Utility to update luatex?
>>
>> AFAIK there are no "major" binary updates done for TeXLive.
>>
>> Best
>>     Martin
>
> LuaTeX is available from TLContrib, which can be used with tlmgr to
> install binary updates (at your own risk):
> http://tlcontrib.metatex.org/usage.html.

that is 0.72 on tlcontrib
For 0.74 some packages must also be updated.

Herbert

From preining at logic.at  Fri Jan  4 16:19:17 2013
From: preining at logic.at (Norbert Preining)
Date: Sat, 5 Jan 2013 00:19:17 +0900
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <20130104160157.70eeaf56@wanadoo.fr>
References: <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
 <50E54639.1020908@elvenkind.com> <50E54CD7.6070705@FU-Berlin.DE>
 <50E5C452.3060800@wxs.nl>
 <CAAyCRnT7GF7O2CqsCq7CdZdbbkGyvZBWtjzXaLbHk2Bf1urydg@mail.gmail.com>
 <CAP7DCDdZ12AdxoB3zHe=CZ278hHEs32MK1PvV1TpM-_Nd2ufNg@mail.gmail.com>
 <50E6ED00.5060207@morningstar2.co.uk> <20130104160157.70eeaf56@wanadoo.fr>
Message-ID: <20130104151917.GA8600@gamma.logic.tuwien.ac.at>

On Fr, 04 Jan 2013, Denis Bitouz? wrote:
> What would be the strategy to install TLContrib material, not in the
> regular, but in a personal (test) TEXMF?

No way. (Unless I update, include, fix, etc the usermode-patches ...
help welcome!)

Norbert

------------------------------------------------------------------------
PREINING, Norbert                               http://www.preining.info
JAIST, Japan                                 TeX Live & Debian Developer
DSA: 0x09C5B094   fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
------------------------------------------------------------------------

From mojca.miklavec.lists at gmail.com  Fri Jan  4 17:14:03 2013
From: mojca.miklavec.lists at gmail.com (Mojca Miklavec)
Date: Fri, 4 Jan 2013 17:14:03 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <50E6ED00.5060207@morningstar2.co.uk>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
 <50E54639.1020908@elvenkind.com> <50E54CD7.6070705@FU-Berlin.DE>
 <50E5C452.3060800@wxs.nl>
 <CAAyCRnT7GF7O2CqsCq7CdZdbbkGyvZBWtjzXaLbHk2Bf1urydg@mail.gmail.com>
 <CAP7DCDdZ12AdxoB3zHe=CZ278hHEs32MK1PvV1TpM-_Nd2ufNg@mail.gmail.com>
 <50E6ED00.5060207@morningstar2.co.uk>
Message-ID: <CALBOmsbzTD9a+MsFgX6WB7Z5igU3qYqWaC81mjMjQbdv7z8ANA@mail.gmail.com>

On Fri, Jan 4, 2013 at 3:53 PM, Joseph Wright wrote:
>
> LuaTeX is available from TLContrib, which can be used with tlmgr to
> install binary updates (at your own risk):
> http://tlcontrib.metatex.org/usage.html.

A few hours ago I updated MetaPost for most platforms and I'm updating
LuaTeX now (it's already at version 0.72.0, but it will be updated to
0.74.0 at 6pm CET).

I updated all platforms but win32, powerpc-linux and armel-linux. I'll
update win32 later (it needs some additional manual work), I don't
have powerpc-linux binaries [yet] (actually, Thomas asked if anyone
needs powerpc-linux at all, otherwise he would prefer to remove it). I
tried to add armel-linux, but I don't find the package on the list
(and the list is not alphabetically sorted either). I might need a bit
of Taco's help with that.

So apart from the windows users, you should be able to have up-to-date
binaries in less than one hour.

Boris also has armelhf (or however that's called), but I'm not sure
how to do platform recognition for that in any easy way (without
trying to call the compiler).

Mojca

From Herbert.Voss at FU-Berlin.DE  Fri Jan  4 17:20:55 2013
From: Herbert.Voss at FU-Berlin.DE (Herbert Voss)
Date: Fri, 4 Jan 2013 17:20:55 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <CALBOmsbzTD9a+MsFgX6WB7Z5igU3qYqWaC81mjMjQbdv7z8ANA@mail.gmail.com>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
 <50E54639.1020908@elvenkind.com> <50E54CD7.6070705@FU-Berlin.DE>
 <50E5C452.3060800@wxs.nl>
 <CAAyCRnT7GF7O2CqsCq7CdZdbbkGyvZBWtjzXaLbHk2Bf1urydg@mail.gmail.com>
 <CAP7DCDdZ12AdxoB3zHe=CZ278hHEs32MK1PvV1TpM-_Nd2ufNg@mail.gmail.com>
 <50E6ED00.5060207@morningstar2.co.uk>
 <CALBOmsbzTD9a+MsFgX6WB7Z5igU3qYqWaC81mjMjQbdv7z8ANA@mail.gmail.com>
Message-ID: <50E70167.70703@FU-Berlin.DE>

Am 04.01.2013 17:14, schrieb Mojca Miklavec:
> On Fri, Jan 4, 2013 at 3:53 PM, Joseph Wright wrote:
>>
>> LuaTeX is available from TLContrib, which can be used with tlmgr to
>> install binary updates (at your own risk):
>> http://tlcontrib.metatex.org/usage.html.
>
> A few hours ago I updated MetaPost for most platforms and I'm updating
> LuaTeX now (it's already at version 0.72.0, but it will be updated to
> 0.74.0 at 6pm CET).

that will be fine for LuaTeX or Context users, but LuaLaTeX
users will run into problems ...

Herbert


From taco at elvenkind.com  Fri Jan  4 17:23:01 2013
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 4 Jan 2013 17:23:01 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <50E70167.70703@FU-Berlin.DE>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
 <50E54639.1020908@elvenkind.com> <50E54CD7.6070705@FU-Berlin.DE>
 <50E5C452.3060800@wxs.nl>
 <CAAyCRnT7GF7O2CqsCq7CdZdbbkGyvZBWtjzXaLbHk2Bf1urydg@mail.gmail.com>
 <CAP7DCDdZ12AdxoB3zHe=CZ278hHEs32MK1PvV1TpM-_Nd2ufNg@mail.gmail.com>
 <50E6ED00.5060207@morningstar2.co.uk>
 <CALBOmsbzTD9a+MsFgX6WB7Z5igU3qYqWaC81mjMjQbdv7z8ANA@mail.gmail.com>
 <50E70167.70703@FU-Berlin.DE>
Message-ID: <50E701E5.4030805@elvenkind.com>

On 01/04/2013 05:20 PM, Herbert Voss wrote:
> Am 04.01.2013 17:14, schrieb Mojca Miklavec:
>> On Fri, Jan 4, 2013 at 3:53 PM, Joseph Wright wrote:
>>>
>>> LuaTeX is available from TLContrib, which can be used with tlmgr to
>>> install binary updates (at your own risk):
>>> http://tlcontrib.metatex.org/usage.html.
>>
>> A few hours ago I updated MetaPost for most platforms and I'm updating
>> LuaTeX now (it's already at version 0.72.0, but it will be updated to
>> 0.74.0 at 6pm CET).
>
> that will be fine for LuaTeX or Context users, but LuaLaTeX
> users will run into problems ...

Well, then someone should add the needed lualatex updates to tlcontrib ...

Best wishes,
Taco


From martin at oneiros.de  Fri Jan  4 17:28:33 2013
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Fri, 4 Jan 2013 17:28:33 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <CALBOmsbzTD9a+MsFgX6WB7Z5igU3qYqWaC81mjMjQbdv7z8ANA@mail.gmail.com>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
 <50E54639.1020908@elvenkind.com> <50E54CD7.6070705@FU-Berlin.DE>
 <50E5C452.3060800@wxs.nl>
 <CAAyCRnT7GF7O2CqsCq7CdZdbbkGyvZBWtjzXaLbHk2Bf1urydg@mail.gmail.com>
 <CAP7DCDdZ12AdxoB3zHe=CZ278hHEs32MK1PvV1TpM-_Nd2ufNg@mail.gmail.com>
 <50E6ED00.5060207@morningstar2.co.uk>
 <CALBOmsbzTD9a+MsFgX6WB7Z5igU3qYqWaC81mjMjQbdv7z8ANA@mail.gmail.com>
Message-ID: <CAP7DCDdabg85FGqUK-j6N+7bBGi3HqOaBfb50zoHuc6H=rj_Mg@mail.gmail.com>

2013/1/4 Mojca Miklavec <mojca.miklavec.lists at gmail.com>:
> A few hours ago I updated MetaPost for most platforms and I'm updating
> LuaTeX now (it's already at version 0.72.0, but it will be updated to
> 0.74.0 at 6pm CET).

Taco has just released 0.75 :-}

Many thanks for the work.

Best
   Martin

From taco at elvenkind.com  Fri Jan  4 17:30:00 2013
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 4 Jan 2013 17:30:00 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <CAP7DCDdabg85FGqUK-j6N+7bBGi3HqOaBfb50zoHuc6H=rj_Mg@mail.gmail.com>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
 <50E54639.1020908@elvenkind.com> <50E54CD7.6070705@FU-Berlin.DE>
 <50E5C452.3060800@wxs.nl>
 <CAAyCRnT7GF7O2CqsCq7CdZdbbkGyvZBWtjzXaLbHk2Bf1urydg@mail.gmail.com>
 <CAP7DCDdZ12AdxoB3zHe=CZ278hHEs32MK1PvV1TpM-_Nd2ufNg@mail.gmail.com>
 <50E6ED00.5060207@morningstar2.co.uk>
 <CALBOmsbzTD9a+MsFgX6WB7Z5igU3qYqWaC81mjMjQbdv7z8ANA@mail.gmail.com>
 <CAP7DCDdabg85FGqUK-j6N+7bBGi3HqOaBfb50zoHuc6H=rj_Mg@mail.gmail.com>
Message-ID: <50E70388.7040403@elvenkind.com>

On 01/04/2013 05:28 PM, Martin Schr?der wrote:
> 2013/1/4 Mojca Miklavec <mojca.miklavec.lists at gmail.com>:
>> A few hours ago I updated MetaPost for most platforms and I'm updating
>> LuaTeX now (it's already at version 0.72.0, but it will be updated to
>> 0.74.0 at 6pm CET).
>
> Taco has just released 0.75 :-}

No, no. that is just an internal version bump to avoid confusion
between release and devel versions. Mojca, don't panic! :)

Taco




From dbitouze at wanadoo.fr  Fri Jan  4 16:44:37 2013
From: dbitouze at wanadoo.fr (Denis =?ISO-8859-15?B?Qml0b3V66Q==?=)
Date: Fri, 4 Jan 2013 16:44:37 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <20130104153018.GC8600@gamma.logic.tuwien.ac.at>
References: <50E48247.9050603@FU-Berlin.DE> <50E54639.1020908@elvenkind.com>
 <50E54CD7.6070705@FU-Berlin.DE> <50E5C452.3060800@wxs.nl>
 <CAAyCRnT7GF7O2CqsCq7CdZdbbkGyvZBWtjzXaLbHk2Bf1urydg@mail.gmail.com>
 <CAP7DCDdZ12AdxoB3zHe=CZ278hHEs32MK1PvV1TpM-_Nd2ufNg@mail.gmail.com>
 <50E6ED00.5060207@morningstar2.co.uk>
 <20130104160157.70eeaf56@wanadoo.fr>
 <20130104151917.GA8600@gamma.logic.tuwien.ac.at>
 <20130104162803.46e5d792@wanadoo.fr>
 <20130104153018.GC8600@gamma.logic.tuwien.ac.at>
Message-ID: <20130104164437.7f5ec532@wanadoo.fr>

Le samedi 05/01/13 ? 00h30,
Norbert Preining <preining at logic.at> a ?crit :

> Not my doing, that is Taco's. I only write the tlmgr...

Oups, sorry... So:

  * thank you for tlmgr!
  * thanks to Taco for TLContrib!
-- 
Denis


From reinhard.kotucha at web.de  Fri Jan  4 20:34:09 2013
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Fri, 4 Jan 2013 20:34:09 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <50E6F10F.5000206@FU-Berlin.DE>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
 <50E54639.1020908@elvenkind.com> <50E54CD7.6070705@FU-Berlin.DE>
 <50E5C452.3060800@wxs.nl>
 <CAAyCRnT7GF7O2CqsCq7CdZdbbkGyvZBWtjzXaLbHk2Bf1urydg@mail.gmail.com>
 <CAP7DCDdZ12AdxoB3zHe=CZ278hHEs32MK1PvV1TpM-_Nd2ufNg@mail.gmail.com>
 <50E6ED00.5060207@morningstar2.co.uk>
 <50E6F10F.5000206@FU-Berlin.DE>
Message-ID: <20711.11953.897472.567373@zaphod.ms25.net>

On 2013-01-04 at 16:11:11 +0100, Herbert Voss wrote:

 > Am 04.01.2013 15:53, schrieb Joseph Wright:
 > > On 04/01/2013 14:45, Martin Schr?der wrote:
 > >> 2013/1/4 George Nurser <gnurser at gmail.com>:
 > >>> Are there plans to allow Tex Live Utility to update luatex?
 > >>
 > >> AFAIK there are no "major" binary updates done for TeXLive.
 > >>
 > >> Best
 > >>     Martin
 > >
 > > LuaTeX is available from TLContrib, which can be used with tlmgr
 > > to install binary updates (at your own risk):
 > > http://tlcontrib.metatex.org/usage.html.
 > 
 > that is 0.72 on tlcontrib
 > For 0.74 some packages must also be updated.

As far as require() statements are concerned, maybe the most important
(general purpose and TeX related) modules could be laoded by the
format file.  I suppose that a significant number of packages don't
have to be touched then.

Modules like LuaSocket are quite special and thus better loaded by
packages which need them.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From reinhard.kotucha at web.de  Sat Jan  5 03:18:51 2013
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sat, 5 Jan 2013 03:18:51 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <20130104160157.70eeaf56@wanadoo.fr>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
 <50E54639.1020908@elvenkind.com> <50E54CD7.6070705@FU-Berlin.DE>
 <50E5C452.3060800@wxs.nl>
 <CAAyCRnT7GF7O2CqsCq7CdZdbbkGyvZBWtjzXaLbHk2Bf1urydg@mail.gmail.com>
 <CAP7DCDdZ12AdxoB3zHe=CZ278hHEs32MK1PvV1TpM-_Nd2ufNg@mail.gmail.com>
 <50E6ED00.5060207@morningstar2.co.uk>
 <20130104160157.70eeaf56@wanadoo.fr>
Message-ID: <20711.36235.782877.700297@zaphod.ms25.net>

On 2013-01-04 at 16:01:57 +0100, Denis Bitouz? wrote:

 > Le vendredi 04/01/13 ? 14h53,
 > Joseph Wright <joseph.wright at morningstar2.co.uk> a ?crit :
 > 
 > > LuaTeX is available from TLContrib, which can be used with tlmgr to
 > > install binary updates (at your own risk):
 > > http://tlcontrib.metatex.org/usage.html.
 > 
 > What would be the strategy to install TLContrib material, not in the
 > regular, but in a personal (test) TEXMF?

Just replacing the binary will certainly break your TeX Live system.
In order to experiment with the new binary, it's best to create a
cloned TeX Live:

  cd /usr/local/texlive
  cp -dpR 2012 2012-test

If other users have access to your system, the following steps are
advisable too (reason explained below):

  chown -R <user>:<group> 2012-test
  chmod -R go-r

Then replace the LuaTeX binary in

  /usr/local/texlive/bin/2012-test/<platform> 

and re-create the format files.


MacTeX allows you to switch between different versions of TL.  But I
don't have a Mac and hence don't know whether the new version is
recognized automatically.

On Linux you can switch to the cloned TL temporarily using a shell
script, say TL2012-test.sh:

--------------------------------------------------
#!/bin/sh

TEXLIVEROOT=/usr/local/texlive/2012-test
PLATFORM=x86_64-linux

PATH=$TEXLIVEROOT/bin/$PLATFORM:$PATH
MANPATH=$TEXLIVEROOT/texmf/doc/man:$MANPATH
INFOPATH=$TEXLIVEROOT/texmf/doc/info:$INFOPATH

export PATH MANPATH INFOPATH

exec /bin/bash
--------------------------------------------------

On Windows it's quite similar to Unix but environment variables are
global by default.  You have to use setlocal in your batch file,
otherwise you don't get back to the official TeX Live when you type
exit in the current shell.


As Herbert already pointed out, it's necessary to modify packages in
order to make things work.  Before you do so, please study the package
licenses carefully.  LPPL allows you to distribute modified files
under certain conditions, but it's undesirably though.  Therfore the
instructions above to make the cloned TL unreadable to other users.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From dbitouze at wanadoo.fr  Sat Jan  5 10:55:01 2013
From: dbitouze at wanadoo.fr (Denis =?ISO-8859-15?B?Qml0b3V66Q==?=)
Date: Sat, 5 Jan 2013 10:55:01 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <20711.36235.782877.700297@zaphod.ms25.net>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
 <50E54639.1020908@elvenkind.com> <50E54CD7.6070705@FU-Berlin.DE>
 <50E5C452.3060800@wxs.nl>
 <CAAyCRnT7GF7O2CqsCq7CdZdbbkGyvZBWtjzXaLbHk2Bf1urydg@mail.gmail.com>
 <CAP7DCDdZ12AdxoB3zHe=CZ278hHEs32MK1PvV1TpM-_Nd2ufNg@mail.gmail.com>
 <50E6ED00.5060207@morningstar2.co.uk>
 <20130104160157.70eeaf56@wanadoo.fr>
 <20711.36235.782877.700297@zaphod.ms25.net>
Message-ID: <20130105105501.59ec2b25@wanadoo.fr>

Le samedi 05/01/13 ? 03h18,
Reinhard Kotucha <reinhard.kotucha at web.de> a ?crit :

> On 2013-01-04 at 16:01:57 +0100, Denis Bitouz? wrote:
> 
>  > What would be the strategy to install TLContrib material, not in
>  > the regular, but in a personal (test) TEXMF?
> 
> Just replacing the binary will certainly break your TeX Live system.
> In order to experiment with the new binary, it's best to create a
> cloned TeX Live:
> 
>   cd /usr/local/texlive
>   cp -dpR 2012 2012-test
> 
> [...]

Thanks a lot for these hints.
-- 
Denis


From mpg at elzevir.fr  Sat Jan  5 20:09:51 2013
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Sat, 5 Jan 2013 20:09:51 +0100
Subject: [luatex] loadfile() broken in 0.74.0 (lua 5.2)
Message-ID: <50E87A7F.6080007@elzevir.fr>

Hi,

With the change to Lua 5.2, loadfile() should accept new arguments, most notably
the third one to provide an environment for the loaded chunk. This argument is
especially useful since setfenv() is removed in Lua 5.2.

However, I'm afraid this argument is ignored by LuaTeX:

mpg at roth ~ % texlua --version
This is LuaTeX, Version beta-0.74.0-2012122510  (TeX Live 2013/dev)(rev 4541)
mpg at roth ~ % head *.lua
==> bar.lua <==
print(_ENV)

==> foo.lua <==
print(_ENV)
local t = { print = print }
print(t)
loadfile('bar.lua', 'bt', t)()
mpg at roth ~ % lua5.2 foo.lua
table: 0x21325f0
table: 0x2138910
table: 0x2138910
mpg at roth ~ % texlua foo.lua
table: 0x1fc4810
table: 0x1fc8eb0
table: 0x1fc4810

Please note that the last line should be equal to the previous one, as is the
case with the stock Lua interpreter. I didn't dig into this, but I would guess
that the additional arguments are lost when LuaTeX replaces loadfile() whith is
own version possibly using kpse.

Best,
Manuel.

From schultzk at gmx.net  Mon Jan  7 09:54:56 2013
From: schultzk at gmx.net (Keith J. Schultz)
Date: Mon, 7 Jan 2013 09:54:56 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <20711.36235.782877.700297@zaphod.ms25.net>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
 <50E54639.1020908@elvenkind.com> <50E54CD7.6070705@FU-Berlin.DE>
 <50E5C452.3060800@wxs.nl>
 <CAAyCRnT7GF7O2CqsCq7CdZdbbkGyvZBWtjzXaLbHk2Bf1urydg@mail.gmail.com>
 <CAP7DCDdZ12AdxoB3zHe=CZ278hHEs32MK1PvV1TpM-_Nd2ufNg@mail.gmail.com>
 <50E6ED00.5060207@morningstar2.co.uk> <20130104160157.70eeaf56@wanadoo.fr>
 <20711.36235.782877.700297@zaphod.ms25.net>
Message-ID: <903E4663-F388-4EA5-834A-3F6606483486@gmx.net>

Hi Reinhard,

I have a problem with your method.
On my Mac (OSX 10.8.2) my cp does not have a -d option.

My question is what does the -d option do on your system.

regards
	Keith.

Am 05.01.2013 um 03:18 schrieb Reinhard Kotucha <reinhard.kotucha at web.de>:

> 
> Just replacing the binary will certainly break your TeX Live system.
> In order to experiment with the new binary, it's best to create a
> cloned TeX Live:
> 
>  cd /usr/local/texlive
>  cp -dpR 2012 2012-test
> 
> If other users have access to your system, the following steps are
> advisable too (reason explained below):
> 
>  chown -R <user>:<group> 2012-test
>  chmod -R go-r
> 
> Then replace the LuaTeX binary in
> 
>  /usr/local/texlive/bin/2012-test/<platform> 
> 
> and re-create the format files.
> 
> 
> MacTeX allows you to switch between different versions of TL.  But I
> don't have a Mac and hence don't know whether the new version is
> recognized automatically.
> 


From taco at elvenkind.com  Mon Jan  7 11:24:59 2013
From: taco at elvenkind.com (Taco Hoekwater)
Date: Mon, 7 Jan 2013 11:24:59 +0100
Subject: [luatex] loadfile() broken in 0.74.0 (lua 5.2)
In-Reply-To: <50E87A7F.6080007@elzevir.fr>
References: <50E87A7F.6080007@elzevir.fr>
Message-ID: <50EAA27B.9050404@elvenkind.com>

On 01/05/2013 08:09 PM, Manuel P?gouri?-Gonnard wrote:
> Hi,
>
> With the change to Lua 5.2, loadfile() should accept new arguments, most notably
> the third one to provide an environment for the loaded chunk. This argument is
> especially useful since setfenv() is removed in Lua 5.2.
>
> However, I'm afraid this argument is ignored by LuaTeX:

Thanks, will be fixed in next release.

Best wishes,
Taco


From reinhard.kotucha at web.de  Mon Jan  7 20:15:03 2013
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 7 Jan 2013 20:15:03 +0100
Subject: [luatex] Luatex 0.74.0 announcement
In-Reply-To: <903E4663-F388-4EA5-834A-3F6606483486@gmx.net>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
 <50E54639.1020908@elvenkind.com> <50E54CD7.6070705@FU-Berlin.DE>
 <50E5C452.3060800@wxs.nl>
 <CAAyCRnT7GF7O2CqsCq7CdZdbbkGyvZBWtjzXaLbHk2Bf1urydg@mail.gmail.com>
 <CAP7DCDdZ12AdxoB3zHe=CZ278hHEs32MK1PvV1TpM-_Nd2ufNg@mail.gmail.com>
 <50E6ED00.5060207@morningstar2.co.uk>
 <20130104160157.70eeaf56@wanadoo.fr>
 <20711.36235.782877.700297@zaphod.ms25.net>
 <903E4663-F388-4EA5-834A-3F6606483486@gmx.net>
Message-ID: <20715.7863.806382.460533@zaphod.ms25.net>

On 2013-01-07 at 09:54:56 +0100, Keith J. Schultz wrote:

 > Hi Reinhard,
 > 
 > I have a problem with your method.
 > On my Mac (OSX 10.8.2) my cp does not have a -d option.
 > 
 > My question is what does the -d option do on your system.

Hi Keith,
from the GNU cp(1) manmage:

  -d      same as --no-dereference --preserve=links

  -P, --no-dereference
          never follow symbolic links in SOURCE

  --preserve[=ATTR_LIST]
          preserve the specified attributes (default: mode,ownership,time?
          stamps),  if  possible  additional  attributes:  context, links,
          xattr, all

  -p      same as --preserve=mode,ownership,timestamps

  -R, -r, --recursive
          copy directories recursively


As far as I understand the BSD cp(1) manpage, symlinks are preserved
iff the -R option is specified, hence the -d option shouldn't be needed.

Regards,
  Reinhard
 

-- 
----------------------------------------------------------------------------
Reinhard Kotucha                                      Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                              mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------


From mpg at elzevir.fr  Mon Jan  7 22:18:26 2013
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Mon, 7 Jan 2013 22:18:26 +0100
Subject: [luatex] loadfile() broken in 0.74.0 (lua 5.2)
In-Reply-To: <50EAA27B.9050404@elvenkind.com>
References: <50E87A7F.6080007@elzevir.fr> <50EAA27B.9050404@elvenkind.com>
Message-ID: <50EB3BA2.5050708@elzevir.fr>

On 07/01/2013 11:24, Taco Hoekwater wrote:
> On 01/05/2013 08:09 PM, Manuel P?gouri?-Gonnard wrote:
>> With the change to Lua 5.2, loadfile() should accept new arguments, most notably
>> the third one to provide an environment for the loaded chunk. This argument is
>> especially useful since setfenv() is removed in Lua 5.2.
>>
>> However, I'm afraid this argument is ignored by LuaTeX:
> 
> Thanks, will be fixed in next release.
> 
Great, thanks.

In the meantime, I worked around this by using load() which works as expected
(but one needs to locate and read the file manually).

Manuel.

From Herbert.Voss at FU-Berlin.DE  Tue Jan  8 21:07:24 2013
From: Herbert.Voss at FU-Berlin.DE (Herbert Voss)
Date: Tue, 8 Jan 2013 21:07:24 +0100
Subject: [luatex] loading hyphenation list by luatex-hyphen
Message-ID: <50EC7C7C.2080708@FU-Berlin.DE>

Hi all,

I have

\documentclass{minimal}
\usepackage[french,english,ngerman]{babel}
\begin{document}
foo
\foreignlanguage{french}{bar}
\foreignlanguage{english}{baz}
\end{document}

with a log of (important is the last line)

-----------------start --------------------
[...]
* Local config file frenchb.cfg used
*
(/usr/local/texlive/2012/texmf-dist/tex/generic/babel/frenchb.cfg)
luatex-hyphen: using data file: 
/usr/local/texlive/2012/texmf-var/tex/generic/config/language.dat.lua
luatex-hyphen: loading patterns and exceptions for: french (\language26)
luatex-hyphen: info: no hyphenation exceptions for this language) 
(/usr/local/texlive/2012/texmf-dist/tex/generic/babel/english.ldf
Language: english 2005/03/30 v3.3o English support from the babel system
\l at canadian = a dialect from \language\l at american
\l at australian = a dialect from \language\l at british
\l at newzealand = a dialect from \language\l at british
)
(/usr/local/texlive/2012/texmf-dist/tex/generic/babel/ngermanb.ldf
Language: ngermanb 2008/07/06 v2.6n new German support from the babel system
\l at naustrian = a dialect from \language\l at ngerman
Package babel Info: Making " an active character on input line 92.
luatex-hyphen: loading patterns and exceptions for: ngerman (\language30)
luatex-hyphen: info: no hyphenation exceptions for this language))
[...]
------------------end --------------------

I created a file with the hyphenations exception
hyph-de-1996.hyp.txt in
/texlive/2012/texmf-dist/tex/generic/hyph-utf8/patterns/txt
which was before already there but empty.

Why is that file not taken into account by luatex-hyphen?
In the language.dat.lua I have

	['ngerman-x-2012-05-30'] = {
		loader = 'dehyphn-x-2012-05-30.tex',
		lefthyphenmin = 2,
		righthyphenmin = 2,
		synonyms = { 'ngerman-x-latest' },
		patterns = 'hyph-de-1996.pat.txt',
		hyphenation = 'hyph-de-1996.hyp.txt',
	},


luatex 0.72 with xurrent texlive

Herbert

From taco at elvenkind.com  Wed Jan  9 10:37:23 2013
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 9 Jan 2013 10:37:23 +0100
Subject: [luatex] About lua 5.2 changes
In-Reply-To: <50E70167.70703@FU-Berlin.DE>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
 <50E54639.1020908@elvenkind.com> <50E54CD7.6070705@FU-Berlin.DE>
 <50E5C452.3060800@wxs.nl>
 <CAAyCRnT7GF7O2CqsCq7CdZdbbkGyvZBWtjzXaLbHk2Bf1urydg@mail.gmail.com>
 <CAP7DCDdZ12AdxoB3zHe=CZ278hHEs32MK1PvV1TpM-_Nd2ufNg@mail.gmail.com>
 <50E6ED00.5060207@morningstar2.co.uk>
 <CALBOmsbzTD9a+MsFgX6WB7Z5igU3qYqWaC81mjMjQbdv7z8ANA@mail.gmail.com>
 <50E70167.70703@FU-Berlin.DE>
Message-ID: <50ED3A53.3000503@elvenkind.com>


Hi,

On 01/04/2013 05:20 PM, Herbert Voss wrote:
>
> that will be fine for LuaTeX or Context users, but LuaLaTeX
> users will run into problems ...

This just came up on tlcontrib, but is important to post here
as well: there are a few language changes on Lua 5.2 compared
to 5.1. There is a list here:

    http://www.lua.org/manual/5.2/manual.html#8

But also, the string parser has changed:

Lua 5.1 understands the following backslash escapes:

     \a \b \f \n \r \t \v \\ \' \"
               (these all have their expected C meanings)
     \<LF>     (insert a line feed into the string)
     \<CR>     (internally converted to <LF>, then inserted)
     \<d[dd]>  (1-3 decimal digits, result range is 0-255)

Lua 5.2 adds:

     \z        (skips following whitespace in input)
     \x<xx>    (2 case-insensitive hex digits)

Anything else following a backslash is an error in Lua 5.2,
but was silently ignored in 5.1.

Best wishes,
Taco

From khaledhosny at eglug.org  Wed Jan  9 15:37:47 2013
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 9 Jan 2013 16:37:47 +0200
Subject: [luatex] tex.extraprimitives() and Umath primitives
Message-ID: <20130109143747.GA19289@khaled-laptop>

Hi all,

Is there a way for tex.extraprimitives() to return only Unicode math
primitives? I think not, but I thought to ask anyway.

(Next XeTeX now supports \Umath* names for the primitives to be more
compatible with LuaTeX, but it will not be much useful for LaTeX users
as they are named \luatexUmath* there, and I'm looking for a clean way
to solve it.)

Regards,
Khaled

From taco at elvenkind.com  Wed Jan  9 17:23:02 2013
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 9 Jan 2013 17:23:02 +0100
Subject: [luatex] tex.extraprimitives() and Umath primitives
In-Reply-To: <20130109143747.GA19289@khaled-laptop>
References: <20130109143747.GA19289@khaled-laptop>
Message-ID: <50ED9966.1060102@elvenkind.com>

On 01/09/2013 03:37 PM, Khaled Hosny wrote:
> Hi all,
>
> Is there a way for tex.extraprimitives() to return only Unicode math
> primitives? I think not, but I thought to ask anyway.

No, sorry.

Best wishes,
Taco

From heiko.oberdiek at googlemail.com  Fri Jan 11 01:46:52 2013
From: heiko.oberdiek at googlemail.com (Heiko Oberdiek)
Date: Fri, 11 Jan 2013 01:46:52 +0100
Subject: [luatex] Loading of lua files/modules (was: Luatex 0.74.0
	announcement)
In-Reply-To: <50E54CD7.6070705@FU-Berlin.DE>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
 <50E54639.1020908@elvenkind.com> <50E54CD7.6070705@FU-Berlin.DE>
Message-ID: <20130111004651.GA25954@oberdiek.my-fqdn.de>

Hello,

On Thu, Jan 03, 2013 at 10:18:15AM +0100, Herbert Voss wrote:

> Am 03.01.2013 09:50, schrieb Taco Hoekwater:
> >On 01/02/2013 07:53 PM, Herbert Voss wrote:
> >>Am 02.01.2013 19:41, schrieb Herbert Voss:
> >>
> >>>there will be a problem with Heikos Package which is called
> >>>by unicode-math
> >>
> >>it looks like a problem with the missing require('...');
> >>lines, as mentioned in Tacos announcement.
> >
> >No, the problem is this line:
> >
> >     table.insert(package.loaders, kpse_module_loader)
> >
> >package.loaders does not exist any more in lua52.
> 
> Oh, I love renaming of functions ...
> Using
>       table.insert(package.searchers, kpse_module_loader)

For now I would like to fix the issue in oberdiek.luatex.lua.
It is enough to replace the line by the following code?

  if package.searchers then
    table.insert(package.searchers, kpse_module_loader)
  else
    table.insert(package.loaders, kpse_module_loader)
  end

Are there better ways or something else need to be done?


For later I want to fix the loading of lua files/modules
in my packages (currently the lua files are duplicated
with different names).
  What is the recommended way to load lua files/modules
without unnecessary name clashes?
* I do not want to put the Lua code in TeX files using
  \directlua, adding an unnecessary TeX interpretation
  level.
* And I prefer having a hierarchy, for example:
    oberdiek/tree/branch/leaf.lua
  instead of a flat file/module structure with ackward
  long names
    oberdiek_tree_branch_leaf.lua
What is the state of the art?

Yours sincerely
  Heiko Oberdiek

From taco at elvenkind.com  Fri Jan 11 09:58:11 2013
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 11 Jan 2013 09:58:11 +0100
Subject: [luatex] Loading of lua files/modules
In-Reply-To: <20130111004651.GA25954@oberdiek.my-fqdn.de>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
 <50E54639.1020908@elvenkind.com> <50E54CD7.6070705@FU-Berlin.DE>
 <20130111004651.GA25954@oberdiek.my-fqdn.de>
Message-ID: <50EFD423.3060208@elvenkind.com>

Hi,

On 01/11/2013 01:46 AM, Heiko Oberdiek wrote:
>
> For now I would like to fix the issue in oberdiek.luatex.lua.
> It is enough to replace the line by the following code?
>
>    if package.searchers then
>      table.insert(package.searchers, kpse_module_loader)
>    else
>      table.insert(package.loaders, kpse_module_loader)
>    end

Sure.

> Are there better ways or something else need to be done?

Hans has:

if not package.loaders then
     package.loaders = package.searchers
end

which is a little different but works just as well.

> For later I want to fix the loading of lua files/modules
> in my packages (currently the lua files are duplicated
> with different names).
>    What is the recommended way to load lua files/modules
> without unnecessary name clashes?

kpathsea can find .lua files within TEXMF (via the LUAINPUTS
variable), so that should be fine. But I doubt kpathsea is
able to find lua files using lua sub-module notation. OTOH,
even if it does not work right now, support for that should be
fairly simple to program with some extra code in kpse_module_loader.

Best wishes,
Taco


From mpg at elzevir.fr  Fri Jan 11 11:13:00 2013
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 11 Jan 2013 11:13:00 +0100
Subject: [luatex] Loading of lua files/modules
In-Reply-To: <50EFD423.3060208@elvenkind.com>
References: <50D8630B.4070104@elvenkind.com> <50E46E18.8080902@FU-Berlin.DE>
 <CALBOmsbioP-xPsLtN5N27HyaToqRgPk3_wUX-sfHXvZ_vtd+Mg@mail.gmail.com>
 <CALBOmsZvHE+oiO_f6qUcyu+UupxudHwRJK52nY9hMEL4UFx3YA@mail.gmail.com>
 <50E47F59.6020506@FU-Berlin.DE> <50E48247.9050603@FU-Berlin.DE>
 <50E54639.1020908@elvenkind.com> <50E54CD7.6070705@FU-Berlin.DE>
 <20130111004651.GA25954@oberdiek.my-fqdn.de> <50EFD423.3060208@elvenkind.com>
Message-ID: <50EFE5AC.7060306@elzevir.fr>

On 11/01/2013 09:58, Taco Hoekwater wrote:
> kpathsea can find .lua files within TEXMF (via the LUAINPUTS
> variable), so that should be fine. But I doubt kpathsea is
> able to find lua files using lua sub-module notation.

It does work using require.

% mkdir -p ~/texmf/scripts/lua/foo/bar/
% echo 'texio.write_nl "HELLO"' > ~/texmf/scripts/lua/foo/bar/baz.lua
% echo -E '\directlua{require "foo.bar.baz"}\end' > test.tex
% luatex test.tex
This is LuaTeX, Version beta-0.70.2-2012052410 (TeX Live 2012)
 restricted \write18 enabled.
(./test.tex
HELLO )
No pages of output.
Transcript written on test.log.

This was added by revision 3558, first released with luatex 0.60, in april 2010.

> OTOH, even if it does not work right now, support for that should be fairly
> simple to program with some extra code in kpse_module_loader.
> 
IIRC, luatexbase-loader has such an implementation.

@Heiko: Unless I'm mistaken, luatex-loader.sty, as well as
luatexbase-loader.sty, should be useless with recent versions of LuaTeX.

Manuel.

From Herbert.Voss at FU-Berlin.DE  Mon Jan 14 11:31:56 2013
From: Herbert.Voss at FU-Berlin.DE (Herbert Voss)
Date: Mon, 14 Jan 2013 11:31:56 +0100
Subject: [luatex] luamplib
Message-ID: <50F3DE9C.9050008@FU-Berlin.DE>

Hi all,

I get different images when running the example with lualatex
and with mpost:

\documentclass{minimal}
\usepackage{luamplib}
\begin{document}
\begin{mplibcode}
input featpost3Dplus2D
beginfig(1);
color gammacnt;
numeric r,R,aux,i,numc,foc,lc;
path conepath, latpath;
pen thickp;
f:= (2,3,4);
viewcentr:= 1.5*(1,1,1);
Spread:=200; Shifts:=300;
R=0.3;
numc=9;
thickp=pencircle scaled .5;
pickup thickp;
tropicalglobe(numc,black,R,blue);
for i=1 upto numc:
   aux:= (i-1)*180/numc;
   gammacnt:=(cosd(aux),sind(aux),0);
   draw spatialhalfcircle
         (black,gammacnt,R,true);
endfor;
endfig;
\end{mplibcode}

\end{document}

gives the image http://perce.de/pub/mplib.png

and using

input featpost3Dplus2D
beginfig(1);
color gammacnt;
numeric r,R,aux,i,numc,foc,lc;
path conepath, latpath;
pen thickp;
f:= (2,3,4);
viewcentr:= 1.5*(1,1,1);
Spread:=200; Shifts:=300;
R=0.3;
numc=9;
thickp=pencircle scaled .5;
pickup thickp;
tropicalglobe(numc,black,R,blue);
for i=1 upto numc:
   aux:= (i-1)*180/numc;
   gammacnt:=(cosd(aux),sind(aux),0);
   draw spatialhalfcircle
         (black,gammacnt,R,true);
endfor;
endfig;

with running mpost on it gives the correct
output http://perce.de/pub/mpost.png

What's going wrong here?

Herbert

From schultzk at gmx.net  Mon Jan 14 12:50:39 2013
From: schultzk at gmx.net (Keith J. Schultz)
Date: Mon, 14 Jan 2013 12:50:39 +0100
Subject: [luatex] luamplib
In-Reply-To: <50F3DE9C.9050008@FU-Berlin.DE>
References: <50F3DE9C.9050008@FU-Berlin.DE>
Message-ID: <3E0A38A6-C08B-417F-9F81-5DA9EE8ED5E4@gmx.net>

Hi Herbert,

Using TexLive 2012 I get the result as in  http://perce.de/pub/mpost.png
in the produced pdf.

Using the latest LuaTeX 0.74 from TLContrib I get the result as in 
http://perce.de/pub/mplib.png !

So, there is probably a bug in the luamplib in LuaTeX 0.74!

What I have notice is that using LuaTeX 0.74 it takes almost I would say 
ten times as long to process the file!! 

regards
	Keith.


Am 14.01.2013 um 11:31 schrieb Herbert Voss <Herbert.Voss at FU-Berlin.DE>:

> Hi all,
> 
> I get different images when running the example with lualatex
> and with mpost:
> 
> \documentclass{minimal}
> \usepackage{luamplib}
> \begin{document}
> \begin{mplibcode}
> input featpost3Dplus2D
> beginfig(1);
> color gammacnt;
> numeric r,R,aux,i,numc,foc,lc;
> path conepath, latpath;
> pen thickp;
> f:= (2,3,4);
> viewcentr:= 1.5*(1,1,1);
> Spread:=200; Shifts:=300;
> R=0.3;
> numc=9;
> thickp=pencircle scaled .5;
> pickup thickp;
> tropicalglobe(numc,black,R,blue);
> for i=1 upto numc:
>  aux:= (i-1)*180/numc;
>  gammacnt:=(cosd(aux),sind(aux),0);
>  draw spatialhalfcircle
>        (black,gammacnt,R,true);
> endfor;
> endfig;
> \end{mplibcode}
> 
> \end{document}
> 
> gives the image http://perce.de/pub/mplib.png
> 
> and using
> 
> input featpost3Dplus2D
> beginfig(1);
> color gammacnt;
> numeric r,R,aux,i,numc,foc,lc;
> path conepath, latpath;
> pen thickp;
> f:= (2,3,4);
> viewcentr:= 1.5*(1,1,1);
> Spread:=200; Shifts:=300;
> R=0.3;
> numc=9;
> thickp=pencircle scaled .5;
> pickup thickp;
> tropicalglobe(numc,black,R,blue);
> for i=1 upto numc:
>  aux:= (i-1)*180/numc;
>  gammacnt:=(cosd(aux),sind(aux),0);
>  draw spatialhalfcircle
>        (black,gammacnt,R,true);
> endfor;
> endfig;
> 
> with running mpost on it gives the correct
> output http://perce.de/pub/mpost.png
> 
> What's going wrong here?
> 
> Herbert


From Herbert.Voss at FU-Berlin.DE  Mon Jan 14 13:27:35 2013
From: Herbert.Voss at FU-Berlin.DE (Herbert Voss)
Date: Mon, 14 Jan 2013 13:27:35 +0100
Subject: [luatex] luamplib
In-Reply-To: <3E0A38A6-C08B-417F-9F81-5DA9EE8ED5E4@gmx.net>
References: <50F3DE9C.9050008@FU-Berlin.DE>
 <3E0A38A6-C08B-417F-9F81-5DA9EE8ED5E4@gmx.net>
Message-ID: <50F3F9B7.7030605@FU-Berlin.DE>

Am 14.01.2013 12:50, schrieb Keith J. Schultz:
>
> Using TexLive 2012 I get the result as in  http://perce.de/pub/mpost.png
> in the produced pdf.

Keith, that is version 0.70 and that worked indeed.

> Using the latest LuaTeX 0.74 from TLContrib I get the result as in
> http://perce.de/pub/mplib.png !

I had LuaTeX version 0.72 and
MetaPost 1.780

> So, there is probably a bug in the luamplib in LuaTeX 0.74!

or in 0.72, which I used and which produced the wrong image.

> What I have notice is that using LuaTeX 0.74 it takes almost I would say
> ten times as long to process the file!!

yes, 0.70 was very fast.

Herbert

From khaledhosny at eglug.org  Sat Jan 19 18:04:47 2013
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sat, 19 Jan 2013 19:04:47 +0200
Subject: [luatex] incompatible change to mathcode
In-Reply-To: <4FAA7F31.5030804@wxs.nl>
References: <4FA96FF1.1040209@nag.co.uk> <4FAA27F2.6000409@elvenkind.com>
 <20120509112438.GB4976@khaled-laptop>
 <4FAA5975.1090504@elvenkind.com>
 <20120509131659.GA22042@khaled-laptop>
 <7622A253-D86F-47CF-8A45-5FDD5AA59265@elvenkind.com>
 <4FAA7F31.5030804@wxs.nl>
Message-ID: <20130119170447.GB12680@khaled-laptop>

On Wed, May 09, 2012 at 04:29:05PM +0200, Hans Hagen wrote:
> On 9-5-2012 16:02, Taco Hoekwater wrote:
> >Hi,
> >
> >On May 9, 2012, at 3:16 PM, Khaled Hosny wrote:
> >
> >>Now that you bring it, do we really need the old aleph variants? They
> >>don't seem to be used anywhere in my full TL installation, so there is
> >>no case of backward compatibility and I see no practical need for them
> >>when we have the new Unicode variants. I'd rather remove them completely
> >>and simplify the code.
> >
> >Personally, I also see little point in the aleph versions of the math char/delimiter
> >primitives. I am reluctant to remove them right away, but as far as I am concerned
> >they can be marked as deprecated. Objections are welcome, of course.
> 
> I bet no one uses those primitives. Let's just kick 'm out. The sam
> eis true for \Aleph* and \Omega* unless we get reports that someone
> really tests for those version numbers (and why).

What about removing them in SVN now? With Lua 5.2 and everything it
seems like a good time for such a change :)

If there is no objection, I'll go ahead and do it.

Regards,
Khaled

From taco at docwolves.nl  Sun Jan 20 08:41:58 2013
From: taco at docwolves.nl (Taco hoekwater)
Date: Sun, 20 Jan 2013 08:41:58 +0100
Subject: [luatex] incompatible change to mathcode
In-Reply-To: <20130119170447.GB12680@khaled-laptop>
References: <4FA96FF1.1040209@nag.co.uk> <4FAA27F2.6000409@elvenkind.com>
 <20120509112438.GB4976@khaled-laptop> <4FAA5975.1090504@elvenkind.com>
 <20120509131659.GA22042@khaled-laptop>
 <7622A253-D86F-47CF-8A45-5FDD5AA59265@elvenkind.com>
 <4FAA7F31.5030804@wxs.nl> <20130119170447.GB12680@khaled-laptop>
Message-ID: <CFEF0453-B124-4F0D-B2E5-A8C03C47D9B7@docwolves.nl>

Hi,

Op 19 jan. 2013 om 18:04 heeft Khaled Hosny <khaledhosny at eglug.org> het volgende geschreven:

>>> Personally, I also see little point in the aleph versions of the math char/delimiter
>>> primitives. I am reluctant to remove them right away, but as far as I am concerned
>>> they can be marked as deprecated. Objections are welcome, of course.
>> 
>> I bet no one uses those primitives. Let's just kick 'm out. The sam
>> eis true for \Aleph* and \Omega* unless we get reports that someone
>> really tests for those version numbers (and why).
> 
> What about removing them in SVN now? With Lua 5.2 and everything it
> seems like a good time for such a change :)
> 
> If there is no objection, I'll go ahead and do it.

Fine with me :)

Best wishes,
Taco

From khaledhosny at eglug.org  Mon Jan 21 04:40:32 2013
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Mon, 21 Jan 2013 05:40:32 +0200
Subject: [luatex] incompatible change to mathcode
In-Reply-To: <CFEF0453-B124-4F0D-B2E5-A8C03C47D9B7@docwolves.nl>
References: <4FA96FF1.1040209@nag.co.uk> <4FAA27F2.6000409@elvenkind.com>
 <20120509112438.GB4976@khaled-laptop>
 <4FAA5975.1090504@elvenkind.com>
 <20120509131659.GA22042@khaled-laptop>
 <7622A253-D86F-47CF-8A45-5FDD5AA59265@elvenkind.com>
 <4FAA7F31.5030804@wxs.nl> <20130119170447.GB12680@khaled-laptop>
 <CFEF0453-B124-4F0D-B2E5-A8C03C47D9B7@docwolves.nl>
Message-ID: <20130121034032.GA16437@khaled-laptop>

On Sun, Jan 20, 2013 at 08:41:58AM +0100, Taco hoekwater wrote:
> Hi,
> 
> Op 19 jan. 2013 om 18:04 heeft Khaled Hosny <khaledhosny at eglug.org> het volgende geschreven:
> 
> >>> Personally, I also see little point in the aleph versions of the math char/delimiter
> >>> primitives. I am reluctant to remove them right away, but as far as I am concerned
> >>> they can be marked as deprecated. Objections are welcome, of course.
> >> 
> >> I bet no one uses those primitives. Let's just kick 'm out. The sam
> >> eis true for \Aleph* and \Omega* unless we get reports that someone
> >> really tests for those version numbers (and why).
> > 
> > What about removing them in SVN now? With Lua 5.2 and everything it
> > seems like a good time for such a change :)
> > 
> > If there is no objection, I'll go ahead and do it.
> 
> Fine with me :)

Good, done :)

Regards,
Khaled

From pragma at wxs.nl  Mon Jan 21 10:17:59 2013
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 21 Jan 2013 10:17:59 +0100
Subject: [luatex] incompatible change to mathcode
In-Reply-To: <20130119170447.GB12680@khaled-laptop>
References: <4FA96FF1.1040209@nag.co.uk> <4FAA27F2.6000409@elvenkind.com>
 <20120509112438.GB4976@khaled-laptop> <4FAA5975.1090504@elvenkind.com>
 <20120509131659.GA22042@khaled-laptop>
 <7622A253-D86F-47CF-8A45-5FDD5AA59265@elvenkind.com>
 <4FAA7F31.5030804@wxs.nl> <20130119170447.GB12680@khaled-laptop>
Message-ID: <50FD07C7.4010001@wxs.nl>

On 1/19/2013 6:04 PM, Khaled Hosny wrote:
> On Wed, May 09, 2012 at 04:29:05PM +0200, Hans Hagen wrote:
>> On 9-5-2012 16:02, Taco Hoekwater wrote:
>>> Hi,
>>>
>>> On May 9, 2012, at 3:16 PM, Khaled Hosny wrote:
>>>
>>>> Now that you bring it, do we really need the old aleph variants? They
>>>> don't seem to be used anywhere in my full TL installation, so there is
>>>> no case of backward compatibility and I see no practical need for them
>>>> when we have the new Unicode variants. I'd rather remove them completely
>>>> and simplify the code.
>>>
>>> Personally, I also see little point in the aleph versions of the math char/delimiter
>>> primitives. I am reluctant to remove them right away, but as far as I am concerned
>>> they can be marked as deprecated. Objections are welcome, of course.
>>
>> I bet no one uses those primitives. Let's just kick 'm out. The sam
>> eis true for \Aleph* and \Omega* unless we get reports that someone
>> really tests for those version numbers (and why).
>
> What about removing them in SVN now? With Lua 5.2 and everything it
> seems like a good time for such a change :)
>
> If there is no objection, I'll go ahead and do it.

just go ahead ... even the few who uses them can write macros to replace 
them

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From schultzk at gmx.net  Thu Jan 24 11:03:34 2013
From: schultzk at gmx.net (Keith J. Schultz)
Date: Thu, 24 Jan 2013 11:03:34 +0100
Subject: [luatex] A Lua Programmers Guide or Reference for Context
In-Reply-To: <50FD07C7.4010001@wxs.nl>
References: <4FA96FF1.1040209@nag.co.uk> <4FAA27F2.6000409@elvenkind.com>
 <20120509112438.GB4976@khaled-laptop> <4FAA5975.1090504@elvenkind.com>
 <20120509131659.GA22042@khaled-laptop>
 <7622A253-D86F-47CF-8A45-5FDD5AA59265@elvenkind.com>
 <4FAA7F31.5030804@wxs.nl> <20130119170447.GB12680@khaled-laptop>
 <50FD07C7.4010001@wxs.nl>
Message-ID: <0A1E5685-76DE-4199-8F19-CEE12D589CD2@gmx.net>

Hi Everyone,

I am looking for a Reference on the ConTeXt commands that can be used
on the Lua side.

Take the sample code from Hans:

\definecolor[bluegreen][h=4F6F6F]
\definecolor[bluered][h=6F4F6F]
\startTEXpage
\startluacode
  local colored = {
    background = "color",
    backgroundcolor = "bluegreen",
    foregroundcolor = "white",
  }
  local basespec = {
    framecolor = "bluered",
    align= "middle",
    style = "type",
    offset=".5ex",
  }
  local bTR, eTR = context.bTR, context.eTR
  local bTD, eTD = context.bTD, context.eTD
  context.bTABLE(basespec)
    for i=1,10 do
      bTR()
      for i=1,20 do
        local r= math.random(100)
        bTD((r < 50 and colored) or nil)
        context("%#2i",r)
        eTD()
      end
      eTR()
    end
  context.eTABLE()
\stopluacode
\stopTEXpage

I can understand what happen here:
context.bTable equates to \starttable[...]
context.bTR() start a new row
context..bTD() starts a new cell
...

My question is were can I find a list of such Lua-context commands and their APIs?

regards
	Keith.



From wolfgang.schuster at gmail.com  Thu Jan 24 18:35:54 2013
From: wolfgang.schuster at gmail.com (Wolfgang Schuster)
Date: Thu, 24 Jan 2013 18:35:54 +0100
Subject: [luatex] A Lua Programmers Guide or Reference for Context
In-Reply-To: <0A1E5685-76DE-4199-8F19-CEE12D589CD2@gmx.net>
References: <4FA96FF1.1040209@nag.co.uk> <4FAA27F2.6000409@elvenkind.com>
 <20120509112438.GB4976@khaled-laptop> <4FAA5975.1090504@elvenkind.com>
 <20120509131659.GA22042@khaled-laptop>
 <7622A253-D86F-47CF-8A45-5FDD5AA59265@elvenkind.com>
 <4FAA7F31.5030804@wxs.nl> <20130119170447.GB12680@khaled-laptop>
 <50FD07C7.4010001@wxs.nl> <0A1E5685-76DE-4199-8F19-CEE12D589CD2@gmx.net>
Message-ID: <BF57092D-5E23-40AA-B002-25AB673B4301@gmail.com>


Am 24.01.2013 um 11:03 schrieb Keith J. Schultz <schultzk at gmx.net>:

> Hi Everyone,
> 
> I am looking for a Reference on the ConTeXt commands that can be used
> on the Lua side.
> 
> Take the sample code from Hans:
> 
> \definecolor[bluegreen][h=4F6F6F]
> \definecolor[bluered][h=6F4F6F]
> \startTEXpage
> \startluacode
>  local colored = {
>    background = "color",
>    backgroundcolor = "bluegreen",
>    foregroundcolor = "white",
>  }
>  local basespec = {
>    framecolor = "bluered",
>    align= "middle",
>    style = "type",
>    offset=".5ex",
>  }
>  local bTR, eTR = context.bTR, context.eTR
>  local bTD, eTD = context.bTD, context.eTD
>  context.bTABLE(basespec)
>    for i=1,10 do
>      bTR()
>      for i=1,20 do
>        local r= math.random(100)
>        bTD((r < 50 and colored) or nil)
>        context("%#2i",r)
>        eTD()
>      end
>      eTR()
>    end
>  context.eTABLE()
> \stopluacode
> \stopTEXpage
> 
> I can understand what happen here:
> context.bTable equates to \starttable[...]
> context.bTR() start a new row
> context..bTD() starts a new cell
> ...
> 
> My question is were can I find a list of such Lua-context commands and their APIs?

http://www.pragma-ade.com/show-man-44.htm

Wolfgang

From mailing_list at arcor.de  Sat Jan 26 16:20:55 2013
From: mailing_list at arcor.de (Stephan Hennig)
Date: Sat, 26 Jan 2013 16:20:55 +0100
Subject: [luatex] slow io.popen
Message-ID: <5103F457.3030700@arcor.de>

Hi,

I'm observing io.popen in texlua being slower by an order of magnitude
compared to PUC lua.  The attached code opens a zipped or gzipped text
file (given as argument) through a pipe and reads in all lines in the
file.  Large (g)zipped text files can be found at
<URL:http://storage.googleapis.com/books/ngrams/books/datasetsv2.html>.

Here are the results of my timings on an Intel T8300 (Core 2 Duo at 2.4
GHz) on Windows 7 x64 with this file,
<URL:http://storage.googleapis.com/books/ngrams/books/googlebooks-ger-all-1gram-20090715-0.csv.zip>:

  $ time lua.exe test-pipe.lua googlebooks-ger-all-1gram-20090715-0.csv.zip
  real    0m21.437s
  user    0m0.015s
  sys     0m0.015s

  $ time texlua.exe test-pipe.lua
googlebooks-ger-all-1gram-20090715-0.csv.zip
  real    4m53.810s
  user    0m0.015s
  sys     0m0.015s

texlua is more than 13 times slower than lua.  Is this a known issue?

Best regards,
Stephan Hennig
-------------- next part --------------
--- Test piped input.
--
local io = require('io')
-- get file name
local fname = arg[1]
-- get file extension
local cmd = string.match(fname, '[^.]+$')
if cmd == 'zip' then
  cmd = 'unzip -p '
elseif cmd == 'gz' then
  cmd = 'gunzip -c '
else
  io.stderr:write('unknown file extension\n')
  os.exit()
end
io.stderr:write(cmd .. fname, '\n')
-- open input file
local f = io.popen(cmd .. fname)
-- read lines
for line in f:lines() do
end

From Herbert.Voss at FU-Berlin.DE  Sat Jan 26 17:38:07 2013
From: Herbert.Voss at FU-Berlin.DE (Herbert Voss)
Date: Sat, 26 Jan 2013 17:38:07 +0100
Subject: [luatex] slow io.popen
In-Reply-To: <5103F457.3030700@arcor.de>
References: <5103F457.3030700@arcor.de>
Message-ID: <5104066F.4050207@FU-Berlin.DE>

On 26.01.2013 16:20, Stephan Hennig wrote:

>    $ time lua.exe test-pipe.lua googlebooks-ger-all-1gram-20090715-0.csv.zip
>    real    0m21.437s
>    user    0m0.015s
>    sys     0m0.015s
>
>    $ time texlua.exe test-pipe.lua
> googlebooks-ger-all-1gram-20090715-0.csv.zip
>    real    4m53.810s
>    user    0m0.015s
>    sys     0m0.015s
>
> texlua is more than 13 times slower than lua.  Is this a known issue?

voss at shania:~> time lua test-pipe.lua 
Download/googlebooks-ger-all-1gram-20090715-0.csv.zip
unzip -p Download/googlebooks-ger-all-1gram-20090715-0.csv.zip

real	0m10.488s
user	0m14.325s
sys	0m0.907s
voss at shania:~> time texlua test-pipe.lua 
Download/googlebooks-ger-all-1gram-20090715-0.csv.zip
unzip -p Download/googlebooks-ger-all-1gram-20090715-0.csv.zip

real	0m17.273s
user	0m22.695s
sys	0m0.899s


voss at shania:~> texlua -v
This is LuaTeX, Version beta-0.70.2-2012052410 (TeX Live 2012)


Herbert

From mailing_list at arcor.de  Sat Jan 26 18:08:38 2013
From: mailing_list at arcor.de (Stephan Hennig)
Date: Sat, 26 Jan 2013 18:08:38 +0100
Subject: [luatex] slow io.popen
In-Reply-To: <5104066F.4050207@FU-Berlin.DE>
References: <5103F457.3030700@arcor.de> <5104066F.4050207@FU-Berlin.DE>
Message-ID: <51040D96.4070503@arcor.de>

Am 26.01.2013 17:38, schrieb Herbert Voss:
> On 26.01.2013 16:20, Stephan Hennig wrote:
> 
> voss at shania:~> time lua test-pipe.lua 
> Download/googlebooks-ger-all-1gram-20090715-0.csv.zip
> unzip -p Download/googlebooks-ger-all-1gram-20090715-0.csv.zip
> 
> real	0m10.488s
> user	0m14.325s
> sys	0m0.907s
> voss at shania:~> time texlua test-pipe.lua 
> Download/googlebooks-ger-all-1gram-20090715-0.csv.zip
> unzip -p Download/googlebooks-ger-all-1gram-20090715-0.csv.zip
> 
> real	0m17.273s
> user	0m22.695s
> sys	0m0.899s

Thanks for cross-checking!  While texlua is somewhat slower on Linux,
too, the big slowness seems to be Windows related.


> voss at shania:~> texlua -v
> This is LuaTeX, Version beta-0.70.2-2012052410 (TeX Live 2012)

I forgot:

  >texlua -v
  This is LuaTeX, Version beta-0.70.2-2012080612 (TeX Live 2012/W32TeX)

Best regards,
Stephan Hennig


From taco at elvenkind.com  Sun Jan 27 11:37:40 2013
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 27 Jan 2013 11:37:40 +0100
Subject: [luatex] slow io.popen
In-Reply-To: <51040D96.4070503@arcor.de>
References: <5103F457.3030700@arcor.de> <5104066F.4050207@FU-Berlin.DE>
 <51040D96.4070503@arcor.de>
Message-ID: <51050374.6010105@elvenkind.com>

On 01/26/2013 06:08 PM, Stephan Hennig wrote:
> Am 26.01.2013 17:38, schrieb Herbert Voss:
>> On 26.01.2013 16:20, Stephan Hennig wrote:
>>
>> voss at shania:~> time lua test-pipe.lua
>> Download/googlebooks-ger-all-1gram-20090715-0.csv.zip
>> unzip -p Download/googlebooks-ger-all-1gram-20090715-0.csv.zip
>>
>> real	0m10.488s
>> user	0m14.325s
>> sys	0m0.907s
>> voss at shania:~> time texlua test-pipe.lua
>> Download/googlebooks-ger-all-1gram-20090715-0.csv.zip
>> unzip -p Download/googlebooks-ger-all-1gram-20090715-0.csv.zip
>>
>> real	0m17.273s
>> user	0m22.695s
>> sys	0m0.899s
>
> Thanks for cross-checking!  While texlua is somewhat slower on Linux,
> too, the big slowness seems to be Windows related.

The extra slowness on linux is as expected: texlua has some extra
code in io that is needed for 'luatex' mode, making it run a tad
slower than the standard version. The windows issue is something
that a windows person (probably Akira) should look at.

Best wishes,
Taco


From schultzk at gmx.net  Mon Jan 28 09:16:44 2013
From: schultzk at gmx.net (Keith J. Schultz)
Date: Mon, 28 Jan 2013 09:16:44 +0100
Subject: [luatex] A Lua Programmers Guide or Reference for Context
In-Reply-To: <BF57092D-5E23-40AA-B002-25AB673B4301@gmail.com>
References: <4FA96FF1.1040209@nag.co.uk> <4FAA27F2.6000409@elvenkind.com>
 <20120509112438.GB4976@khaled-laptop> <4FAA5975.1090504@elvenkind.com>
 <20120509131659.GA22042@khaled-laptop>
 <7622A253-D86F-47CF-8A45-5FDD5AA59265@elvenkind.com>
 <4FAA7F31.5030804@wxs.nl> <20130119170447.GB12680@khaled-laptop>
 <50FD07C7.4010001@wxs.nl> <0A1E5685-76DE-4199-8F19-CEE12D589CD2@gmx.net>
 <BF57092D-5E23-40AA-B002-25AB673B4301@gmail.com>
Message-ID: <8387FBAE-E6A5-443F-AD7C-E7B6B8328690@gmx.net>

Hi Wolfgang,

Thank you very much. your link below helps me alot.

regards
	Keith.


Am 24.01.2013 um 18:35 schrieb Wolfgang Schuster <wolfgang.schuster at gmail.com>:

> 
> Am 24.01.2013 um 11:03 schrieb Keith J. Schultz <schultzk at gmx.net>:
> 
>> Hi Everyone,
>> 
>> I am looking for a Reference on the ConTeXt commands that can be used
>> on the Lua side.
>> 
[snip, snip]
>> My question is were can I find a list of such Lua-context commands and their APIs?
> 
> http://www.pragma-ade.com/show-man-44.htm
> 
> Wolfgang



From mailing_list at arcor.de  Mon Jan 28 23:23:59 2013
From: mailing_list at arcor.de (Stephan Hennig)
Date: Mon, 28 Jan 2013 23:23:59 +0100
Subject: [luatex] io.popen security (was:  slow io.popen)
Message-ID: <5106FA7F.8080202@arcor.de>

Am 27.01.2013 11:37, schrieb Taco Hoekwater:

> The extra slowness on linux is as expected: texlua has some extra
> code in io that is needed for 'luatex' mode,

While reading your answer, I immediately thought that 'luatex' mode must
have something to do with sanitizing the argument to popen.  But I'm
indeed able to remove arbitrary files in the files system by saying

  io.popen('rm -f whatever')

Shouldn't popen in luatex/texlua be kept from executing arbitrary
commands similar to the \write18 feature?

Best regards,
Stephan Hennig

From taco at elvenkind.com  Tue Jan 29 10:02:02 2013
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 29 Jan 2013 10:02:02 +0100
Subject: [luatex] io.popen security (was:  slow io.popen)
In-Reply-To: <5106FA7F.8080202@arcor.de>
References: <5106FA7F.8080202@arcor.de>
Message-ID: <5107900A.7030907@elvenkind.com>

On 01/28/2013 11:23 PM, Stephan Hennig wrote:
> Am 27.01.2013 11:37, schrieb Taco Hoekwater:
>
>> The extra slowness on linux is as expected: texlua has some extra
>> code in io that is needed for 'luatex' mode,
>
> While reading your answer, I immediately thought that 'luatex' mode must
> have something to do with sanitizing the argument to popen.  But I'm
> indeed able to remove arbitrary files in the files system by saying
>
>    io.popen('rm -f whatever')
>
> Shouldn't popen in luatex/texlua be kept from executing arbitrary
> commands similar to the \write18 feature?

On my system,

   \directlua { assert(io.popen('rm -f whatever')) }

produces:

   ! LuaTeX error [string "\directlua "]:1: Command execution disabled
   via shell_escape='p'

as it should.

   This is LuaTeX, Version beta-0.75.0-2013010711 (rev 4532)  (INITEX)

Best wishes,
Taco


From mailing_list at arcor.de  Tue Jan 29 18:04:44 2013
From: mailing_list at arcor.de (Stephan Hennig)
Date: Tue, 29 Jan 2013 18:04:44 +0100
Subject: [luatex] io.popen security (was:  slow io.popen)
In-Reply-To: <5107900A.7030907@elvenkind.com>
References: <5106FA7F.8080202@arcor.de> <5107900A.7030907@elvenkind.com>
Message-ID: <5108012C.3070405@arcor.de>

Am 29.01.2013 10:02, schrieb Taco Hoekwater:

> On my system,
> 
>    \directlua { assert(io.popen('rm -f whatever')) }
> 
> produces:
> 
>    ! LuaTeX error [string "\directlua "]:1: Command execution disabled
>    via shell_escape='p'
> 
> as it should.

Same here with luatex.  It is actually texlua, which executes arbitrary
shell commands.  Is it intentional that luatex and texlua don't behave
identical wrt shell commands in popen?

Best regards,
Stephan Hennig


From mail at patrickbergner.de  Tue Jan 29 18:47:16 2013
From: mail at patrickbergner.de (Patrick Bergner)
Date: Tue, 29 Jan 2013 18:47:16 +0100
Subject: [luatex] io.popen security (was:  slow io.popen)
In-Reply-To: <5108012C.3070405@arcor.de>
References: <5106FA7F.8080202@arcor.de> <5107900A.7030907@elvenkind.com>
 <5108012C.3070405@arcor.de>
Message-ID: <51080B24.6090900@patrickbergner.de>

Am 29.01.2013 18:04, schrieb Stephan Hennig:
> It is actually texlua, which executes arbitrary
> shell commands.  Is it intentional that luatex and texlua don't behave
> identical wrt shell commands in popen?

Most certainly yes because texlua is a standard Lua interpreter + TeX
Lua libraries preloaded and luatex is, well, LuaTeX.

-- 
Patrick Bergner
http://www.patrickbergner.de/

From stephanhennig at arcor.de  Tue Jan 29 22:20:09 2013
From: stephanhennig at arcor.de (Stephan Hennig)
Date: Tue, 29 Jan 2013 22:20:09 +0100
Subject: [luatex] io.popen security (was:  slow io.popen)
In-Reply-To: <5108012C.3070405@arcor.de>
References: <5106FA7F.8080202@arcor.de> <5107900A.7030907@elvenkind.com>
 <5108012C.3070405@arcor.de>
Message-ID: <51083D09.1090409@arcor.de>

Am 29.01.2013 18:04, schrieb Stephan Hennig:

> Is it intentional that luatex and texlua don't behave identical wrt
> shell commands in popen?

Found it in sec.3.2 of the manual:

> In keeping with the other TEX-like programs in TEXLIVE, the two LUA 
> functions os.execute and io.popen (as well as the two new functions 
> os.exec and os.spawn that are explained below) take the value of 
> shell_escape and/or shell_escape_commands in account. Whenever
> LUATEX is run with the assumed intention to typeset a document (and
> by that I mean that it is called as luatex, as opposed to texlua, and
> that the commandline option --luaonly was not given), it will only
> run the four functions above if the matching texmf.cnf variable(s)
> or their texconfig (see section 4.15) counterparts allow execution
> of the requested system command. In ?script interpreter? runs of
> LUATEX, these settings have no effect, and all four functions
> function as normal.

Sorry for the noise!

Best regards,
Stephan Hennig


From listas at tex-tipografia.com  Wed Jan 30 16:47:20 2013
From: listas at tex-tipografia.com (Javier Bezos)
Date: Wed, 30 Jan 2013 16:47:20 +0100
Subject: [luatex] babel 3.9 beta
Message-ID: <51094088.4040409@tex-tipografia.com>

Hi all,

A beta version is babel 3.9 is now available. For further info see:

http://www.tex-tipografia.com/babel_news.html

Javier

