From vafakh9 at gmail.com  Wed Apr  1 02:26:27 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Wed, 1 Apr 2009 11:26:27 +1100
Subject: [luatex] Bug In RTL
Message-ID: <ba1882870903311726s1cade034u39de085c8d258db7@mail.gmail.com>

If you have a plain document as follow:

%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\pagedir TRT \bodydir TRT \pardir TRT \textdir TRT

in az rast be chap ast

{\pardir TLT \textdir TLT

This is a paragraph written from left to right.}

\end

%%%%%%%%%%%%%%%%%%%%%%%%%%%




in dvi mode there is no problem but in pdf mode the sentence "This is a
paragraph written from left to right" will not be shown in the PDF output.


This is tested with the latest version of luatex (v0.37)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090401/8b2389fe/attachment.html 

From vafakh9 at gmail.com  Wed Apr  1 10:43:03 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Wed, 1 Apr 2009 19:43:03 +1100
Subject: [luatex] luatex beta 0.37.0
In-Reply-To: <a5a1faa10903311127h3c096868ge18a1a34e1e94658@mail.gmail.com>
References: <ba1882870903310753y52003142qca6e6c2b61ac4f33@mail.gmail.com>
	<31332.1238511517@cl.cam.ac.uk>
	<ba1882870903310800o4d43140dlc3a091ef08524884@mail.gmail.com>
	<68c491a60903310819o427ceee9i4395f2d2d8864fdc@mail.gmail.com>
	<ba1882870903311014p5d1677bcra3035306cad61149@mail.gmail.com>
	<a5a1faa10903311127h3c096868ge18a1a34e1e94658@mail.gmail.com>
Message-ID: <ba1882870904010143l4dab5015jf750d09d3d4ae5ff@mail.gmail.com>

On Wed, Apr 1, 2009 at 5:27 AM, Khaled Hosny <khaledhosny at eglug.org> wrote:

> libsctdc++5


Thanks. Got it.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090401/dc6139f0/attachment.html 

From vafakh9 at gmail.com  Wed Apr  1 10:49:32 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Wed, 1 Apr 2009 19:49:32 +1100
Subject: [luatex] luatex's pause
Message-ID: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>

When you run luatex in a terminal, once you see "This is LuaTeX, Version
snapshot-0.37.0-2009033117 (Web2C 7.5.7)", then there is a pause something
between 2-3 seconds and then luatex starts to compile your document. Can
this pause be removed?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090401/1961dec8/attachment.html 

From taco at elvenkind.com  Wed Apr  1 10:52:50 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 01 Apr 2009 10:52:50 +0200
Subject: [luatex] luatex's pause
In-Reply-To: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>
Message-ID: <49D32B62.1080608@elvenkind.com>



??? ????? wrote:
> When you run luatex in a terminal, once you see "This is LuaTeX, Version
> snapshot-0.37.0-2009033117 (Web2C 7.5.7)", then there is a pause
> something between 2-3 seconds and then luatex starts to compile your
> document. Can this pause be removed?

Try any one of a faster machine, more merory, a faster hard disk, a
smaller tex format, a smaller texmf tree, a different operating
system and even a better graphics card?

Put another way: you have to explain what system you are running.
I certainly do not see any such pause on my machine.

Best wishes,
Taco


From vafakh9 at gmail.com  Wed Apr  1 11:03:03 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Wed, 1 Apr 2009 20:03:03 +1100
Subject: [luatex] luatex's pause
In-Reply-To: <49D32B62.1080608@elvenkind.com>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>
	<49D32B62.1080608@elvenkind.com>
Message-ID: <ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>

OS: Debian 5 (i386-linux)

processor: intel core 2 Duo

memory: 3GB

Harddrive storage: 500GB (only using 20GB of it)

Graphics: Nvida GeForce 8500GT 3D

and I have full TeXLive 2008 installed.

Maybe the pause is not that much but It feels like a pause at the start.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090401/ad79441b/attachment.html 

From taco at elvenkind.com  Wed Apr  1 11:26:24 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 01 Apr 2009 11:26:24 +0200
Subject: [luatex] luatex's pause
In-Reply-To: <ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>	<49D32B62.1080608@elvenkind.com>
	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>
Message-ID: <49D33340.4070507@elvenkind.com>



??? ????? wrote:
> 
> Maybe the pause is not that much but It feels like a pause at the start.

You machine specs look fine, so that can't be the problem.
Are you running the luapdflatex from texlive 2008?

Best wishes,
Taco



From vafakh9 at gmail.com  Wed Apr  1 11:27:32 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Wed, 1 Apr 2009 20:27:32 +1100
Subject: [luatex] luatex's pause
In-Reply-To: <49D33340.4070507@elvenkind.com>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>
	<49D32B62.1080608@elvenkind.com>
	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>
	<49D33340.4070507@elvenkind.com>
Message-ID: <ba1882870904010227jf36e2eeo742e8d34159b59d1@mail.gmail.com>

Yes, I run pdflualatex from TeXLive 2008.


>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090401/0433fc81/attachment.html 

From pragma at wxs.nl  Wed Apr  1 11:37:53 2009
From: pragma at wxs.nl (Hans Hagen)
Date: Wed, 01 Apr 2009 11:37:53 +0200
Subject: [luatex] luatex's pause
In-Reply-To: <ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>	<49D32B62.1080608@elvenkind.com>
	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>
Message-ID: <49D335F1.4050100@wxs.nl>

??? ????? wrote:
> OS: Debian 5 (i386-linux)
> 
> processor: intel core 2 Duo
> 
> memory: 3GB
> 
> Harddrive storage: 500GB (only using 20GB of it)
> 
> Graphics: Nvida GeForce 8500GT 3D
> 
> and I have full TeXLive 2008 installed.
> 
> Maybe the pause is not that much but It feels like a pause at the start.

maybe it cannot find the format; you could try to run in kpse debug mode 
and see what is reported

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Wed Apr  1 11:38:53 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 01 Apr 2009 11:38:53 +0200
Subject: [luatex] luatex's pause
In-Reply-To: <ba1882870904010227jf36e2eeo742e8d34159b59d1@mail.gmail.com>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>	<49D32B62.1080608@elvenkind.com>	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>	<49D33340.4070507@elvenkind.com>
	<ba1882870904010227jf36e2eeo742e8d34159b59d1@mail.gmail.com>
Message-ID: <49D3362D.3060707@elvenkind.com>



??? ????? wrote:
> Yes, I run pdflualatex from TeXLive 2008.
> 

The one thing I can come up with is that there is a problem with the
search path setup that is slowing down the kpathsea library.

You can check the output of

  pdflualatex --kpathsea-debug=-1 ...

to check whether it is spending a lot of time find files. If it does,
then I suggest you reroute your question to the texlive list (and
otherwise I have no idea how to help either, sorry)


Best wishes,
Taco



From vafakh9 at gmail.com  Wed Apr  1 11:45:26 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Wed, 1 Apr 2009 20:45:26 +1100
Subject: [luatex] luatex's pause
In-Reply-To: <49D3362D.3060707@elvenkind.com>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>
	<49D32B62.1080608@elvenkind.com>
	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>
	<49D33340.4070507@elvenkind.com>
	<ba1882870904010227jf36e2eeo742e8d34159b59d1@mail.gmail.com>
	<49D3362D.3060707@elvenkind.com>
Message-ID: <ba1882870904010245n37648194k6626a596af1c09a3@mail.gmail.com>

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090401/a9128244/attachment.html 

From hartmut_henkel at gmx.de  Thu Apr  2 00:18:32 2009
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Thu, 2 Apr 2009 00:18:32 +0200 (CEST)
Subject: [luatex] Bug In RTL
In-Reply-To: <ba1882870903311726s1cade034u39de085c8d258db7@mail.gmail.com>
References: <ba1882870903311726s1cade034u39de085c8d258db7@mail.gmail.com>
Message-ID: <alpine.DEB.1.00.0904020017390.7202@hahepc1.hahe>

On Wed, 1 Apr 2009, ??? ????? wrote:

> If you have a plain document as follow:
>
> %%%%%%%%%%%%%%%%%%%%%%%%%%%%
>
> \pagedir TRT \bodydir TRT \pardir TRT \textdir TRT
>
> in az rast be chap ast
>
> {\pardir TLT \textdir TLT
>
> This is a paragraph written from left to right.}
>
> \end
>
> %%%%%%%%%%%%%%%%%%%%%%%%%%%

> in dvi mode there is no problem but in pdf mode the sentence "This is
> a paragraph written from left to right" will not be shown in the PDF
> output.
>
> This is tested with the latest version of luatex (v0.37)

many thanks for the report. This should be fixed in SVN Rev. 2196.

Regards, Hartmut

From hartmut_henkel at gmx.de  Thu Apr  2 00:22:44 2009
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Thu, 2 Apr 2009 00:22:44 +0200 (CEST)
Subject: [luatex] bug in RTL typesetting?
In-Reply-To: <20090331144951.GA23433@khaled-laptop>
References: <ba1882870903290332h6d7998aawa4316706aa238107@mail.gmail.com>
	<alpine.DEB.1.00.0903292346370.5121@hahepc1.hahe>
	<op.urkpvdozfkrasx@your-b27fb1c401>
	<alpine.DEB.1.00.0903300000190.6043@hahepc1.hahe>
	<20090331144951.GA23433@khaled-laptop>
Message-ID: <alpine.DEB.1.00.0904020021530.7321@hahepc1.hahe>

On Tue, 31 Mar 2009, Khaled Hosny wrote:

> I can confirm it is fixed in 0.37, but display math still broken; it
> is shifted to the right and gets even more shifted when \eqn is used,
> unless \mathdir TRT is used. Here is a test:
>
> \pagedir TRT\bodydir TRT\pardir TRT
> $$1+2=3$$
> $$1+2=3\eqno(1)$$
>
> \mathdir TRT
> $$1+2=3$$
> $$1+2=3\eqno(1)$$
>
> \bye

seems the SVN rev. 2196 by the way also fixes this bug. Please test.

Regards, Hartmut

From vafakh9 at gmail.com  Thu Apr  2 00:32:10 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Thu, 2 Apr 2009 09:32:10 +1100
Subject: [luatex] Bug In RTL
In-Reply-To: <alpine.DEB.1.00.0904020017390.7202@hahepc1.hahe>
References: <ba1882870903311726s1cade034u39de085c8d258db7@mail.gmail.com>
	<alpine.DEB.1.00.0904020017390.7202@hahepc1.hahe>
Message-ID: <ba1882870904011532g38339bc6g2e578ba7577b4b05@mail.gmail.com>

Thanks.

Can you please tell me how to get the svn version and how I can compile it?
What software tools are required?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090402/13ecbc32/attachment.html 

From martin at oneiros.de  Thu Apr  2 01:59:59 2009
From: martin at oneiros.de (=?ISO-8859-1?Q?Martin_Schr=F6der?=)
Date: Thu, 2 Apr 2009 01:59:59 +0200
Subject: [luatex] Bug In RTL
In-Reply-To: <ba1882870904011532g38339bc6g2e578ba7577b4b05@mail.gmail.com>
References: <ba1882870903311726s1cade034u39de085c8d258db7@mail.gmail.com>
	<alpine.DEB.1.00.0904020017390.7202@hahepc1.hahe>
	<ba1882870904011532g38339bc6g2e578ba7577b4b05@mail.gmail.com>
Message-ID: <68c491a60904011659h4a556695mb1734bfcb235c9c4@mail.gmail.com>

2009/4/2, ??? ????? <vafakh9 at gmail.com>:
> Can you please tell me how to get the svn version and how I can compile it?

http://foundry.supelec.fr/scm/?group_id=10

Best
   Martin

From vafakh9 at gmail.com  Thu Apr  2 02:30:24 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Thu, 2 Apr 2009 10:30:24 +1000
Subject: [luatex] Bug In RTL
In-Reply-To: <68c491a60904011659h4a556695mb1734bfcb235c9c4@mail.gmail.com>
References: <ba1882870903311726s1cade034u39de085c8d258db7@mail.gmail.com>
	<alpine.DEB.1.00.0904020017390.7202@hahepc1.hahe>
	<ba1882870904011532g38339bc6g2e578ba7577b4b05@mail.gmail.com>
	<68c491a60904011659h4a556695mb1734bfcb235c9c4@mail.gmail.com>
Message-ID: <ba1882870904011730q3f9ee091m7a104fdbfcc628eb@mail.gmail.com>

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090402/c75f1fc5/attachment.html 

From khaledhosny at eglug.org  Thu Apr  2 02:33:17 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Thu, 2 Apr 2009 02:33:17 +0200
Subject: [luatex] bug in RTL typesetting?
In-Reply-To: <alpine.DEB.1.00.0904020021530.7321@hahepc1.hahe>
References: <ba1882870903290332h6d7998aawa4316706aa238107@mail.gmail.com>
	<alpine.DEB.1.00.0903292346370.5121@hahepc1.hahe>
	<op.urkpvdozfkrasx@your-b27fb1c401>
	<alpine.DEB.1.00.0903300000190.6043@hahepc1.hahe>
	<20090331144951.GA23433@khaled-laptop>
	<alpine.DEB.1.00.0904020021530.7321@hahepc1.hahe>
Message-ID: <20090402003317.GA13378@khaled-laptop>

On Thu, Apr 02, 2009 at 12:22:44AM +0200, Hartmut Henkel wrote:
> On Tue, 31 Mar 2009, Khaled Hosny wrote:
> 
> > I can confirm it is fixed in 0.37, but display math still broken; it
> > is shifted to the right and gets even more shifted when \eqn is used,
> > unless \mathdir TRT is used. Here is a test:
> >
> > \pagedir TRT\bodydir TRT\pardir TRT
> > $$1+2=3$$
> > $$1+2=3\eqno(1)$$
> >
> > \mathdir TRT
> > $$1+2=3$$
> > $$1+2=3\eqno(1)$$
> >
> > \bye
> 
> seems the SVN rev. 2196 by the way also fixes this bug. Please test.

Now, I see that both dvi and pdf output are identical, but I'm not sure
if it is correct though. Shouldn't the equation be on the middle of the
page in the 4 cases?

Regards,
 Khaled


> 
> Regards, Hartmut

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.tex
Type: text/x-tex
Size: 167 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090402/e76648ee/attachment.bin 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.pdf
Type: application/pdf
Size: 6960 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090402/e76648ee/attachment.pdf 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090402/e76648ee/attachment-0001.bin 

From reinhard.kotucha at web.de  Thu Apr  2 02:55:47 2009
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Thu, 2 Apr 2009 02:55:47 +0200
Subject: [luatex] luatex's pause
In-Reply-To: <49D3362D.3060707@elvenkind.com>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>
	<49D32B62.1080608@elvenkind.com>
	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>
	<49D33340.4070507@elvenkind.com>
	<ba1882870904010227jf36e2eeo742e8d34159b59d1@mail.gmail.com>
	<49D3362D.3060707@elvenkind.com>
Message-ID: <18900.3347.176970.975462@zaphod.ms25.net>

On 1 April 2009 Taco Hoekwater wrote:
 
 > ??? ????? wrote:
 > > Yes, I run pdflualatex from TeXLive 2008.
 > > 
 > 
 > The one thing I can come up with is that there is a problem with the
 > search path setup that is slowing down the kpathsea library.
 > 
 > You can check the output of
 > 
 >   pdflualatex --kpathsea-debug=-1 ...
 > 
 > to check whether it is spending a lot of time find files. If it does,
 > then I suggest you reroute your question to the texlive list (and
 > otherwise I have no idea how to help either, sorry)

Hi Taco,
I'm not sure that it's a TeX Live issue.

$ time pdflatex \\stop
real    0m0.098s
user    0m0.080s
sys     0m0.016s

$ time pdflualatex \\stop
real    0m2.329s
user    0m2.192s
sys     0m0.132s

I tried this repeatedly, with similar results.

Can you reproduce it with the TeX Live 2008 binaries?  I suppose that
the delay is caused by loading the format file, both format files are
quite different indeed.  I don't see any other difference.

The pause occurs after luatex writes the banner to screen and before
anything else appears on screen.  The next thing I see after the pause 
is

  LaTeX2e <2005/12/01>

which implies that the problem doesn't occur after the format file is
loaded.  If there is something wrong with search paths in texmf.cnf at
all, then it's most likely the search path for format files.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From vafakh9 at gmail.com  Thu Apr  2 05:17:06 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Thu, 2 Apr 2009 14:17:06 +1100
Subject: [luatex] bug in RTL typesetting?
In-Reply-To: <20090402003317.GA13378@khaled-laptop>
References: <ba1882870903290332h6d7998aawa4316706aa238107@mail.gmail.com>
	<alpine.DEB.1.00.0903292346370.5121@hahepc1.hahe>
	<op.urkpvdozfkrasx@your-b27fb1c401>
	<alpine.DEB.1.00.0903300000190.6043@hahepc1.hahe>
	<20090331144951.GA23433@khaled-laptop>
	<alpine.DEB.1.00.0904020021530.7321@hahepc1.hahe>
	<20090402003317.GA13378@khaled-laptop>
Message-ID: <ba1882870904012017l7aafb00eh132ba191ea4a86f2@mail.gmail.com>

Yes, the equations should appear at the center.

>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090402/3d2aa122/attachment.html 

From hartmut_henkel at gmx.de  Thu Apr  2 07:42:38 2009
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Thu, 2 Apr 2009 07:42:38 +0200 (CEST)
Subject: [luatex] bug in RTL typesetting?
In-Reply-To: <ba1882870904012017l7aafb00eh132ba191ea4a86f2@mail.gmail.com>
References: <ba1882870903290332h6d7998aawa4316706aa238107@mail.gmail.com>
	<alpine.DEB.1.00.0903292346370.5121@hahepc1.hahe>
	<op.urkpvdozfkrasx@your-b27fb1c401>
	<alpine.DEB.1.00.0903300000190.6043@hahepc1.hahe>
	<20090331144951.GA23433@khaled-laptop>
	<alpine.DEB.1.00.0904020021530.7321@hahepc1.hahe>
	<20090402003317.GA13378@khaled-laptop>
	<ba1882870904012017l7aafb00eh132ba191ea4a86f2@mail.gmail.com>
Message-ID: <alpine.DEB.1.00.0904020739040.3936@hahepc1.hahe>

On Thu, 2 Apr 2009, ??? ????? wrote:

> Yes, the equations should appear at the center.

maybe, but now the it does the same as aleph. Needs thinking how it
should be right...

Regards, Hartmut

From taco at elvenkind.com  Thu Apr  2 09:56:53 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 02 Apr 2009 09:56:53 +0200
Subject: [luatex] luatex's pause
In-Reply-To: <18900.3347.176970.975462@zaphod.ms25.net>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>	<49D32B62.1080608@elvenkind.com>	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>	<49D33340.4070507@elvenkind.com>	<ba1882870904010227jf36e2eeo742e8d34159b59d1@mail.gmail.com>	<49D3362D.3060707@elvenkind.com>
	<18900.3347.176970.975462@zaphod.ms25.net>
Message-ID: <49D46FC5.3080603@elvenkind.com>



Reinhard Kotucha wrote:

> Can you reproduce it with the TeX Live 2008 binaries?  I suppose that
> the delay is caused by loading the format file, both format files are
> quite different indeed.  I don't see any other difference.

I simply can't run those anymore. I have my system set up for
texlive2009 already.  On my system, I get consistenly get this
(snapshot-0.37.0-2009033014):

$ time luatex --fmt=pdflualatex \\stop
  0.49user
  0.02system
  0:00.52elapsed

which is quite reasonable. Can someone else try with a recent
binary please?

Best wishes,
Taco

From pragma at wxs.nl  Thu Apr  2 09:57:38 2009
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 02 Apr 2009 09:57:38 +0200
Subject: [luatex] luatex's pause
In-Reply-To: <18900.3347.176970.975462@zaphod.ms25.net>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>	<49D32B62.1080608@elvenkind.com>	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>	<49D33340.4070507@elvenkind.com>	<ba1882870904010227jf36e2eeo742e8d34159b59d1@mail.gmail.com>	<49D3362D.3060707@elvenkind.com>
	<18900.3347.176970.975462@zaphod.ms25.net>
Message-ID: <49D46FF2.5080603@wxs.nl>

Reinhard Kotucha wrote:

> I'm not sure that it's a TeX Live issue.
> 
> $ time pdflatex \\stop
> real    0m0.098s
> user    0m0.080s
> sys     0m0.016s
> 
> $ time pdflualatex \\stop
> real    0m2.329s
> user    0m2.192s
> sys     0m0.132s
> 
> I tried this repeatedly, with similar results.

and how about

luatex --ini plain \dump
move plain.fmt to web2c/luatex
luatex \end

runs pretty fast on my machine

> The pause occurs after luatex writes the banner to screen and before
> anything else appears on screen.  The next thing I see after the pause 
> is
> 
>   LaTeX2e <2005/12/01>
> 
> which implies that the problem doesn't occur after the format file is
> loaded.  If there is something wrong with search paths in texmf.cnf at
> all, then it's most likely the search path for format files.

maybe something in latex itself?

anyway, texmf.cnf *is* a tex live issue -)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From khaledhosny at eglug.org  Thu Apr  2 12:28:09 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Thu, 2 Apr 2009 12:28:09 +0200
Subject: [luatex] bug in RTL typesetting?
In-Reply-To: <alpine.DEB.1.00.0904020739040.3936@hahepc1.hahe>
References: <ba1882870903290332h6d7998aawa4316706aa238107@mail.gmail.com>
	<alpine.DEB.1.00.0903292346370.5121@hahepc1.hahe>
	<op.urkpvdozfkrasx@your-b27fb1c401>
	<alpine.DEB.1.00.0903300000190.6043@hahepc1.hahe>
	<20090331144951.GA23433@khaled-laptop>
	<alpine.DEB.1.00.0904020021530.7321@hahepc1.hahe>
	<20090402003317.GA13378@khaled-laptop>
	<ba1882870904012017l7aafb00eh132ba191ea4a86f2@mail.gmail.com>
	<alpine.DEB.1.00.0904020739040.3936@hahepc1.hahe>
Message-ID: <20090402102809.GA7497@khaled-laptop>

On Thu, Apr 02, 2009 at 07:42:38AM +0200, Hartmut Henkel wrote:
> On Thu, 2 Apr 2009, ??? ????? wrote:
> 
> > Yes, the equations should appear at the center.
> 
> maybe, but now the it does the same as aleph. Needs thinking how it
> should be right...

I noted that. I think it should be affected only by \mathdir changes,
when \mathdir is TLT, I think the user expects math to be done the way
TeX usually does it. I checked FarsiTeX[1] and RyDArab[2] typeset
samples, and both put the equation in the middle of the page (in 
FarsiTeX math is always LTR, while RyDArab can typeset RTL math as
well). I thought that equation number position should be swapped, but
FarsiTeX don't swap it, so I think it'd be better controlled at macro
level.

I think the current behaviour of TRT math is OK.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090402/bd2529a0/attachment.bin 

From taco at elvenkind.com  Thu Apr  2 12:30:29 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 02 Apr 2009 12:30:29 +0200
Subject: [luatex] bug in RTL typesetting?
In-Reply-To: <20090402102809.GA7497@khaled-laptop>
References: <ba1882870903290332h6d7998aawa4316706aa238107@mail.gmail.com>	<alpine.DEB.1.00.0903292346370.5121@hahepc1.hahe>	<op.urkpvdozfkrasx@your-b27fb1c401>	<alpine.DEB.1.00.0903300000190.6043@hahepc1.hahe>	<20090331144951.GA23433@khaled-laptop>	<alpine.DEB.1.00.0904020021530.7321@hahepc1.hahe>	<20090402003317.GA13378@khaled-laptop>	<ba1882870904012017l7aafb00eh132ba191ea4a86f2@mail.gmail.com>	<alpine.DEB.1.00.0904020739040.3936@hahepc1.hahe>
	<20090402102809.GA7497@khaled-laptop>
Message-ID: <49D493C5.3050209@elvenkind.com>



Khaled Hosny wrote:
> On Thu, Apr 02, 2009 at 07:42:38AM +0200, Hartmut Henkel wrote:
>> On Thu, 2 Apr 2009, ??? ????? wrote:
>>
>>> Yes, the equations should appear at the center.
>> maybe, but now the it does the same as aleph. Needs thinking how it
>> should be right...
> 
> I noted that. I think it should be affected only by \mathdir changes,
> when \mathdir is TLT, I think the user expects math to be done the way
> TeX usually does it. I checked FarsiTeX[1] and RyDArab[2] typeset
> samples, and both put the equation in the middle of the page (in 
> FarsiTeX math is always LTR, while RyDArab can typeset RTL math as
> well). I thought that equation number position should be swapped, but
> FarsiTeX don't swap it, so I think it'd be better controlled at macro
> level.
> 
> I think the current behaviour of TRT math is OK.

This is also what I think. Looking at it, I believe the Aleph behaviour
is simply wrong.

Best wishes,
Taco



From khaledhosny at eglug.org  Thu Apr  2 12:30:59 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Thu, 2 Apr 2009 12:30:59 +0200
Subject: [luatex] bug in RTL typesetting?
In-Reply-To: <20090402102809.GA7497@khaled-laptop>
References: <ba1882870903290332h6d7998aawa4316706aa238107@mail.gmail.com>
	<alpine.DEB.1.00.0903292346370.5121@hahepc1.hahe>
	<op.urkpvdozfkrasx@your-b27fb1c401>
	<alpine.DEB.1.00.0903300000190.6043@hahepc1.hahe>
	<20090331144951.GA23433@khaled-laptop>
	<alpine.DEB.1.00.0904020021530.7321@hahepc1.hahe>
	<20090402003317.GA13378@khaled-laptop>
	<ba1882870904012017l7aafb00eh132ba191ea4a86f2@mail.gmail.com>
	<alpine.DEB.1.00.0904020739040.3936@hahepc1.hahe>
	<20090402102809.GA7497@khaled-laptop>
Message-ID: <20090402103059.GB7497@khaled-laptop>

Sorry, I forgot the URLs!

[1]http://farsitex.org/
[2]http://www.ucam.ac.ma/fssm/rydarab/

On Thu, Apr 02, 2009 at 12:28:09PM +0200, Khaled Hosny wrote:
> On Thu, Apr 02, 2009 at 07:42:38AM +0200, Hartmut Henkel wrote:
> > On Thu, 2 Apr 2009, ??? ????? wrote:
> > 
> > > Yes, the equations should appear at the center.
> > 
> > maybe, but now the it does the same as aleph. Needs thinking how it
> > should be right...
> 
> I noted that. I think it should be affected only by \mathdir changes,
> when \mathdir is TLT, I think the user expects math to be done the way
> TeX usually does it. I checked FarsiTeX[1] and RyDArab[2] typeset
> samples, and both put the equation in the middle of the page (in 
> FarsiTeX math is always LTR, while RyDArab can typeset RTL math as
> well). I thought that equation number position should be swapped, but
> FarsiTeX don't swap it, so I think it'd be better controlled at macro
> level.
> 
> I think the current behaviour of TRT math is OK.
> 
> Regards,
>  Khaled
> 
> -- 
>  Khaled Hosny
>  Arabic localiser and member of Arabeyes.org team
>  Free font developer

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090402/c17945ff/attachment.bin 

From vafakh9 at gmail.com  Thu Apr  2 12:32:00 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Thu, 2 Apr 2009 21:32:00 +1100
Subject: [luatex] bug in RTL typesetting?
In-Reply-To: <20090402102809.GA7497@khaled-laptop>
References: <ba1882870903290332h6d7998aawa4316706aa238107@mail.gmail.com>
	<alpine.DEB.1.00.0903292346370.5121@hahepc1.hahe>
	<op.urkpvdozfkrasx@your-b27fb1c401>
	<alpine.DEB.1.00.0903300000190.6043@hahepc1.hahe>
	<20090331144951.GA23433@khaled-laptop>
	<alpine.DEB.1.00.0904020021530.7321@hahepc1.hahe>
	<20090402003317.GA13378@khaled-laptop>
	<ba1882870904012017l7aafb00eh132ba191ea4a86f2@mail.gmail.com>
	<alpine.DEB.1.00.0904020739040.3936@hahepc1.hahe>
	<20090402102809.GA7497@khaled-laptop>
Message-ID: <ba1882870904020332j7ae08daatbaf5fdfd615e1d5e@mail.gmail.com>

>
>
> I noted that. I think it should be affected only by \mathdir changes,
> when \mathdir is TLT, I think the user expects math to be done the way
> TeX usually does it. I checked FarsiTeX[1] and RyDArab[2] typeset
> samples, and both put the equation in the middle of the page (in
> FarsiTeX math is always LTR, while RyDArab can typeset RTL math as
> well). I thought that equation number position should be swapped, but
> FarsiTeX don't swap it, so I think it'd be better controlled at macro
> level.
>
>
>
What you have seen in FarsiTeX is the standard mathematics in Persian. In
Persian mathematics is the same as LTR mathematics, not a single difference
but we only have persian numbers instead latin ones. The equation numbers
also should be unchanged in Persian. You can also look at xepersian outputs
for more clue.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090402/2521eff4/attachment.html 

From pragma at wxs.nl  Thu Apr  2 12:32:55 2009
From: pragma at wxs.nl (Hans Hagen)
Date: Thu, 02 Apr 2009 12:32:55 +0200
Subject: [luatex] bug in RTL typesetting?
In-Reply-To: <20090402102809.GA7497@khaled-laptop>
References: <ba1882870903290332h6d7998aawa4316706aa238107@mail.gmail.com>	<alpine.DEB.1.00.0903292346370.5121@hahepc1.hahe>	<op.urkpvdozfkrasx@your-b27fb1c401>	<alpine.DEB.1.00.0903300000190.6043@hahepc1.hahe>	<20090331144951.GA23433@khaled-laptop>	<alpine.DEB.1.00.0904020021530.7321@hahepc1.hahe>	<20090402003317.GA13378@khaled-laptop>	<ba1882870904012017l7aafb00eh132ba191ea4a86f2@mail.gmail.com>	<alpine.DEB.1.00.0904020739040.3936@hahepc1.hahe>
	<20090402102809.GA7497@khaled-laptop>
Message-ID: <49D49457.5000306@wxs.nl>

Khaled Hosny wrote:
> On Thu, Apr 02, 2009 at 07:42:38AM +0200, Hartmut Henkel wrote:
>> On Thu, 2 Apr 2009, ??? ????? wrote:
>>
>>> Yes, the equations should appear at the center.
>> maybe, but now the it does the same as aleph. Needs thinking how it
>> should be right...
> 
> I noted that. I think it should be affected only by \mathdir changes,
> when \mathdir is TLT, I think the user expects math to be done the way
> TeX usually does it. I checked FarsiTeX[1] and RyDArab[2] typeset
> samples, and both put the equation in the middle of the page (in 
> FarsiTeX math is always LTR, while RyDArab can typeset RTL math as
> well). I thought that equation number position should be swapped, but
> FarsiTeX don't swap it, so I think it'd be better controlled at macro
> level.

fyi ... more control over the equation number positioning is on our 
agenda anyway

Hans

-- 

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From vafakh9 at gmail.com  Thu Apr  2 12:34:24 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Thu, 2 Apr 2009 21:34:24 +1100
Subject: [luatex] bug in RTL typesetting?
In-Reply-To: <20090402103059.GB7497@khaled-laptop>
References: <ba1882870903290332h6d7998aawa4316706aa238107@mail.gmail.com>
	<op.urkpvdozfkrasx@your-b27fb1c401>
	<alpine.DEB.1.00.0903300000190.6043@hahepc1.hahe>
	<20090331144951.GA23433@khaled-laptop>
	<alpine.DEB.1.00.0904020021530.7321@hahepc1.hahe>
	<20090402003317.GA13378@khaled-laptop>
	<ba1882870904012017l7aafb00eh132ba191ea4a86f2@mail.gmail.com>
	<alpine.DEB.1.00.0904020739040.3936@hahepc1.hahe>
	<20090402102809.GA7497@khaled-laptop>
	<20090402103059.GB7497@khaled-laptop>
Message-ID: <ba1882870904020334g4f243c4eo74a8b25e309a01c4@mail.gmail.com>

Also keep in mind you generally can not rely on FarsiTeX mainly because:

1- It has got plenty of bugs.

2- It is a dead project since it is basedon latex2.09 and has not been
updated for several years.



>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090402/669395eb/attachment.html 

From vafakh9 at gmail.com  Thu Apr  2 12:37:11 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Thu, 2 Apr 2009 21:37:11 +1100
Subject: [luatex] bug in RTL typesetting?
In-Reply-To: <ba1882870904020332j7ae08daatbaf5fdfd615e1d5e@mail.gmail.com>
References: <ba1882870903290332h6d7998aawa4316706aa238107@mail.gmail.com>
	<op.urkpvdozfkrasx@your-b27fb1c401>
	<alpine.DEB.1.00.0903300000190.6043@hahepc1.hahe>
	<20090331144951.GA23433@khaled-laptop>
	<alpine.DEB.1.00.0904020021530.7321@hahepc1.hahe>
	<20090402003317.GA13378@khaled-laptop>
	<ba1882870904012017l7aafb00eh132ba191ea4a86f2@mail.gmail.com>
	<alpine.DEB.1.00.0904020739040.3936@hahepc1.hahe>
	<20090402102809.GA7497@khaled-laptop>
	<ba1882870904020332j7ae08daatbaf5fdfd615e1d5e@mail.gmail.com>
Message-ID: <ba1882870904020337s638bc280qcc1c248e09f425ec@mail.gmail.com>

The other thing which would help in Persian mathematics is that we have
mathematics set to be LTR, but alignment that rquires written text should be
RTL.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090402/e96ab75b/attachment.html 

From vafakh9 at gmail.com  Thu Apr  2 12:53:01 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Thu, 2 Apr 2009 21:53:01 +1100
Subject: [luatex] bug in RTL typesetting?
In-Reply-To: <ba1882870904020348l5c7a03dam7af164d84e5ccad0@mail.gmail.com>
References: <ba1882870903290332h6d7998aawa4316706aa238107@mail.gmail.com>
	<20090331144951.GA23433@khaled-laptop>
	<alpine.DEB.1.00.0904020021530.7321@hahepc1.hahe>
	<20090402003317.GA13378@khaled-laptop>
	<ba1882870904012017l7aafb00eh132ba191ea4a86f2@mail.gmail.com>
	<alpine.DEB.1.00.0904020739040.3936@hahepc1.hahe>
	<20090402102809.GA7497@khaled-laptop>
	<ba1882870904020332j7ae08daatbaf5fdfd615e1d5e@mail.gmail.com>
	<ba1882870904020337s638bc280qcc1c248e09f425ec@mail.gmail.com>
	<ba1882870904020348l5c7a03dam7af164d84e5ccad0@mail.gmail.com>
Message-ID: <ba1882870904020353y1e8812d1wa380b2f08268db77@mail.gmail.com>

The blow page is an incomplete Persian  maths textbook. It is a book on
topology written by Mehdi Omidali. The document is typeset by xepersian.
That should gives you an idead of how persian maths should look like.

http://parsilatex.org/topology.pdf
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090402/cd6b173b/attachment.html 

From vafakh9 at gmail.com  Thu Apr  2 13:52:08 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Thu, 2 Apr 2009 22:52:08 +1100
Subject: [luatex] luabidi package
Message-ID: <ba1882870904020452i637357f2t3122d23f5b238e83@mail.gmail.com>

Hi

I have written an initial version of the package, the package is located at
http://code.google.com/p/luabidi

You can get the files by the command: svn checkout *http*://
luabidi.googlecode.com/svn/trunk/ luabidi-read-only

only test.tex is the example file. Please report issues, suggestions, ideas
at the google page.

What has been done so far:
%%%%%%%%%%%%%%%%%%%%%%%%%%%%

1- The main direction of the document is LTR, but \setRTLmain swtich the
main direction of the document to RTL.

2- Paragraph directions: CSs \setRTL and setLTR are provided that make the
directions of the paragraphs RTL and LTR. Also two environments LTR and RTL
are provided for RTL and LTR paragraphs.

Note: in addition to \setRTL and \setLTR, \unsetRTL and \unsetLTR are also
provided.

3- By default we have LTR (Persian) maths but if you would like to have RTL
maths, an option namely arabmaths is provided i.e.
\usepackage[arabmaths]{luabidi}

4- Footnotes:

a) In the default mode, where \setRTLmain is not declared there is only one
footnote and the footnote rule is in the left hand side.

b) If the main direction is RTL via \setRTLmain, then we have two footnotes,
\footnote and \Footnote for RTL and LTR footnotes respectively. The footnote
rule always appear in the right hand side.

c) there is an option "textwidthfootnoterule" which makes the footnote rule
as wide as the textwidth.

d) (Incomplete): also "autofootnoterule" exist which is for Persian.

5- by default lists are fine, no need to write macros.

What will be done next:
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
1: Lamport's tabular: RTL inside RTL paragraph and LTR otherwise, also needs
to provide a CS that makes tabular RTL and LTR globally.

2. Check other things and packages and provide extra macros if required to
take care of bidirectional matters but with LuaTeX's bidiirectional
commands, things are mostly done correctly.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090402/0d2fc56b/attachment-0001.html 

From yannis.haralambous at telecom-bretagne.eu  Thu Apr  2 14:00:38 2009
From: yannis.haralambous at telecom-bretagne.eu (Yannis Haralambous)
Date: Thu, 2 Apr 2009 14:00:38 +0200
Subject: [luatex] bug in RTL typesetting?
In-Reply-To: <ba1882870904020353y1e8812d1wa380b2f08268db77@mail.gmail.com>
References: <ba1882870903290332h6d7998aawa4316706aa238107@mail.gmail.com>
	<20090331144951.GA23433@khaled-laptop>
	<alpine.DEB.1.00.0904020021530.7321@hahepc1.hahe>
	<20090402003317.GA13378@khaled-laptop>
	<ba1882870904012017l7aafb00eh132ba191ea4a86f2@mail.gmail.com>
	<alpine.DEB.1.00.0904020739040.3936@hahepc1.hahe>
	<20090402102809.GA7497@khaled-laptop>
	<ba1882870904020332j7ae08daatbaf5fdfd615e1d5e@mail.gmail.com>
	<ba1882870904020337s638bc280qcc1c248e09f425ec@mail.gmail.com>
	<ba1882870904020348l5c7a03dam7af164d84e5ccad0@mail.gmail.com>
	<ba1882870904020353y1e8812d1wa380b2f08268db77@mail.gmail.com>
Message-ID: <37821782-8143-4E74-BCA1-4FD6147EFC78@telecom-bretagne.eu>

There are two things I find weird:

1) why do you slant Arabic script to the right??? It's like slanting  
Latin script to the left, which is quite ugly

2) why do you use a circle for the zero and not a centered lozange- 
shaped dot as it is traditional in Arabic?

You should read Azzeddine's work on typesetting Arabic mathematics, he  
did his PhD on this.

cheers


Le 2 avr. 09 ? 12:53, ??? ????? a ?crit :

> The blow page is an incomplete Persian  maths textbook. It is a book  
> on topology written by Mehdi Omidali. The document is typeset by  
> xepersian. That should gives you an idead of how persian maths  
> should look like.
>
> http://parsilatex.org/topology.pdf

--
+ 
-----------------------------------------------------------------------+
| Yannis Haralambous, Ph.D.      yannis.haralambous at telecom- 
bretagne.eu |
| Directeur d'?tudes                      http://omega.enstb.org/ 
yannis |
|                                             Tel. +33  
(0)2.29.00.14.27 |
|                                             Fax  +33  
(0)2.29.00.12.82 |
| D?partement  
Informatique                                              |
| T?l?com  
Bretagne                                                      |
| Technop?le de Brest Iroise, CS 83818, 29238 Brest Cedex 3,  
France     |
| Coordonn?es Google-Earth : 48?21'31.57"N  
4?34'16.76"W                 |
+ 
-----------------------------------------------------------------------+
                             ...pour distinguer l'ext?rieur d'un  
aquarium,
                                            mieux vaut n'?tre pas  
poisson

                            ...the ball I threw while playing in the  
park
                                           has not yet reached the  
ground

               Es gab eine Zeit, wo ich nur ungern ?ber Schubert  
sprechen,
            nur N?chtens den B?umen und Sternen von ihm vorerz?hlen  
m?gen.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090402/770d7d63/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Yannis Haralambous.vcf
Type: text/directory
Size: 508 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090402/770d7d63/attachment.bin 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090402/770d7d63/attachment-0001.html 

From vafakh9 at gmail.com  Thu Apr  2 14:06:57 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Thu, 2 Apr 2009 23:06:57 +1100
Subject: [luatex] bug in RTL typesetting?
In-Reply-To: <37821782-8143-4E74-BCA1-4FD6147EFC78@telecom-bretagne.eu>
References: <ba1882870903290332h6d7998aawa4316706aa238107@mail.gmail.com>
	<20090402003317.GA13378@khaled-laptop>
	<ba1882870904012017l7aafb00eh132ba191ea4a86f2@mail.gmail.com>
	<alpine.DEB.1.00.0904020739040.3936@hahepc1.hahe>
	<20090402102809.GA7497@khaled-laptop>
	<ba1882870904020332j7ae08daatbaf5fdfd615e1d5e@mail.gmail.com>
	<ba1882870904020337s638bc280qcc1c248e09f425ec@mail.gmail.com>
	<ba1882870904020348l5c7a03dam7af164d84e5ccad0@mail.gmail.com>
	<ba1882870904020353y1e8812d1wa380b2f08268db77@mail.gmail.com>
	<37821782-8143-4E74-BCA1-4FD6147EFC78@telecom-bretagne.eu>
Message-ID: <ba1882870904020506g85b4e44g452f53a6e21962b4@mail.gmail.com>

There are two things I find weird:
>

Sure as Arabic maths is to me.


>
> 1) why do you slant Arabic script to the right??? It's like slanting Latin
> script to the left, which is quite ugly
>

That is just the font. I had nothing to do with it. The author of the font
fortunately decided to slant Arabic script to right.


>
> 2) why do you use a circle for the zero and not a centered lozange-shaped
> dot as it is traditional in Arabic?
>

In Persian there is a difference between a dot and a zero otherwise in maths
one would mix them. It is said that zero in Persian should appear as a samll
circle.


> You should read Azzeddine's work on typesetting Arabic mathematics, he did
> his PhD on this.
>
>
>
>  I will certainly. Thanks for that.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090402/ce49bf8f/attachment.html 

From yannis.haralambous at telecom-bretagne.eu  Thu Apr  2 14:10:12 2009
From: yannis.haralambous at telecom-bretagne.eu (Yannis Haralambous)
Date: Thu, 2 Apr 2009 14:10:12 +0200
Subject: [luatex] bug in RTL typesetting?
In-Reply-To: <ba1882870904020506g85b4e44g452f53a6e21962b4@mail.gmail.com>
References: <ba1882870903290332h6d7998aawa4316706aa238107@mail.gmail.com>
	<20090402003317.GA13378@khaled-laptop>
	<ba1882870904012017l7aafb00eh132ba191ea4a86f2@mail.gmail.com>
	<alpine.DEB.1.00.0904020739040.3936@hahepc1.hahe>
	<20090402102809.GA7497@khaled-laptop>
	<ba1882870904020332j7ae08daatbaf5fdfd615e1d5e@mail.gmail.com>
	<ba1882870904020337s638bc280qcc1c248e09f425ec@mail.gmail.com>
	<ba1882870904020348l5c7a03dam7af164d84e5ccad0@mail.gmail.com>
	<ba1882870904020353y1e8812d1wa380b2f08268db77@mail.gmail.com>
	<37821782-8143-4E74-BCA1-4FD6147EFC78@telecom-bretagne.eu>
	<ba1882870904020506g85b4e44g452f53a6e21962b4@mail.gmail.com>
Message-ID: <39B901A4-1535-4264-964F-38B77C1C4019@telecom-bretagne.eu>


Le 2 avr. 09 ? 14:06, ??? ????? a ?crit :

> There are two things I find weird:
>
> Sure as Arabic maths is to me.
>
>
> 1) why do you slant Arabic script to the right??? It's like slanting  
> Latin script to the left, which is quite ugly
>
> That is just the font. I had nothing to do with it. The author of  
> the font fortunately decided to slant Arabic script to right.

If it is just the font, the we can FIX it! Do you want to fix it?

--
+ 
-----------------------------------------------------------------------+
| Yannis Haralambous, Ph.D.      yannis.haralambous at telecom- 
bretagne.eu |
| Directeur d'?tudes                      http://omega.enstb.org/ 
yannis |
|                                             Tel. +33  
(0)2.29.00.14.27 |
|                                             Fax  +33  
(0)2.29.00.12.82 |
| D?partement  
Informatique                                              |
| T?l?com  
Bretagne                                                      |
| Technop?le de Brest Iroise, CS 83818, 29238 Brest Cedex 3,  
France     |
| Coordonn?es Google-Earth : 48?21'31.57"N  
4?34'16.76"W                 |
+ 
-----------------------------------------------------------------------+
                             ...pour distinguer l'ext?rieur d'un  
aquarium,
                                            mieux vaut n'?tre pas  
poisson

                            ...the ball I threw while playing in the  
park
                                           has not yet reached the  
ground

               Es gab eine Zeit, wo ich nur ungern ?ber Schubert  
sprechen,
            nur N?chtens den B?umen und Sternen von ihm vorerz?hlen  
m?gen.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090402/309596cf/attachment-0002.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Yannis Haralambous.vcf
Type: text/directory
Size: 508 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090402/309596cf/attachment-0001.bin 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090402/309596cf/attachment-0003.html 

From vafakh9 at gmail.com  Thu Apr  2 14:14:07 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Thu, 2 Apr 2009 23:14:07 +1100
Subject: [luatex] bug in RTL typesetting?
In-Reply-To: <39B901A4-1535-4264-964F-38B77C1C4019@telecom-bretagne.eu>
References: <ba1882870903290332h6d7998aawa4316706aa238107@mail.gmail.com>
	<alpine.DEB.1.00.0904020739040.3936@hahepc1.hahe>
	<20090402102809.GA7497@khaled-laptop>
	<ba1882870904020332j7ae08daatbaf5fdfd615e1d5e@mail.gmail.com>
	<ba1882870904020337s638bc280qcc1c248e09f425ec@mail.gmail.com>
	<ba1882870904020348l5c7a03dam7af164d84e5ccad0@mail.gmail.com>
	<ba1882870904020353y1e8812d1wa380b2f08268db77@mail.gmail.com>
	<37821782-8143-4E74-BCA1-4FD6147EFC78@telecom-bretagne.eu>
	<ba1882870904020506g85b4e44g452f53a6e21962b4@mail.gmail.com>
	<39B901A4-1535-4264-964F-38B77C1C4019@telecom-bretagne.eu>
Message-ID: <ba1882870904020514r44c2eb7cy835ce3637e644770@mail.gmail.com>

>
> If it is just the font, the we can FIX it! Do you want to fix it?
>
>
>
>
>
Yes, I want to and I have contacted the author of the font and it seems it
will be fixed in the next release. This font is one of the X series by
IRMUG[1] which is considered as the most complete Persian fonts at present.

[1]  http://wiki.irmug.org/index.php/X_Series_2
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090402/160c4ecd/attachment.html 

From vafakh9 at gmail.com  Thu Apr  2 12:48:09 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Thu, 2 Apr 2009 21:48:09 +1100
Subject: [luatex] bug in RTL typesetting?
In-Reply-To: <ba1882870904020337s638bc280qcc1c248e09f425ec@mail.gmail.com>
References: <ba1882870903290332h6d7998aawa4316706aa238107@mail.gmail.com>
	<alpine.DEB.1.00.0903300000190.6043@hahepc1.hahe>
	<20090331144951.GA23433@khaled-laptop>
	<alpine.DEB.1.00.0904020021530.7321@hahepc1.hahe>
	<20090402003317.GA13378@khaled-laptop>
	<ba1882870904012017l7aafb00eh132ba191ea4a86f2@mail.gmail.com>
	<alpine.DEB.1.00.0904020739040.3936@hahepc1.hahe>
	<20090402102809.GA7497@khaled-laptop>
	<ba1882870904020332j7ae08daatbaf5fdfd615e1d5e@mail.gmail.com>
	<ba1882870904020337s638bc280qcc1c248e09f425ec@mail.gmail.com>
Message-ID: <ba1882870904020348l5c7a03dam7af164d84e5ccad0@mail.gmail.com>

I attached an incomplete Persian  maths textbook. It is a book on topology
written by Mehdi Omidali. The document is typeset by xepersian. That should
gives you an idead of how persian maths should look like.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090402/7d1c9eb2/attachment-0001.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: topology.pdf
Type: application/pdf
Size: 1129942 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090402/7d1c9eb2/attachment-0001.pdf 

From reinhard.kotucha at web.de  Sun Apr  5 22:56:40 2009
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sun, 5 Apr 2009 22:56:40 +0200
Subject: [luatex] luatex's pause
In-Reply-To: <49D46FF2.5080603@wxs.nl>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>
	<49D32B62.1080608@elvenkind.com>
	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>
	<49D33340.4070507@elvenkind.com>
	<ba1882870904010227jf36e2eeo742e8d34159b59d1@mail.gmail.com>
	<49D3362D.3060707@elvenkind.com>
	<18900.3347.176970.975462@zaphod.ms25.net>
	<49D46FF2.5080603@wxs.nl>
Message-ID: <18905.6920.903711.167292@zaphod.ms25.net>

On 2 April 2009 Hans Hagen wrote:

 > Reinhard Kotucha wrote:
 > 
 > > I'm not sure that it's a TeX Live issue.
 > > 
 > > $ time pdflatex \\stop
 > > real    0m0.098s
 > > user    0m0.080s
 > > sys     0m0.016s
 > > 
 > > $ time pdflualatex \\stop
 > > real    0m2.329s
 > > user    0m2.192s
 > > sys     0m0.132s
 > > 
 > > I tried this repeatedly, with similar results.
 > 
 > and how about
 > 
 > luatex --ini plain \dump
 > move plain.fmt to web2c/luatex
 > luatex \end
 > 
 > runs pretty fast on my machine

Yes, the plain formats are very fast here, too.  Only pdflualatex is
affected. 

 > > The pause occurs after luatex writes the banner to screen and before
 > > anything else appears on screen.  The next thing I see after the pause 
 > > is
 > > 
 > >   LaTeX2e <2005/12/01>
 > > 
 > > which implies that the problem doesn't occur after the format file is
 > > loaded.  If there is something wrong with search paths in texmf.cnf at
 > > all, then it's most likely the search path for format files.
 > 
 > maybe something in latex itself?

That would be strange.  There is only one latex.ltx which is used by
both, pdflatex and pdflualatex.
 
 > anyway, texmf.cnf *is* a tex live issue -)

Yes, but with -kpathsea-debug=-1 I get:

kdebug:search([pdflualatex.fmt]) => /home/reinhard/.texlive2008/texmf-var/web2c/luatex/pdflualatex.fmt
kdebug:fopen(/home/reinhard/.texlive2008/texmf-var/web2c/luatex/pdflualatex.fmt, rb) => 0x17e7e20

Then there is a pause.  This means that the pause occurs after
kpathsea determined the path to pdflualatex.fmt already and even after
the file had been opened.

The next thing I see on screen is "LaTeX2e <2005/12/01>".  However,
I suppose that this comes from the \everyjob token register and
evaluating this is one of the very first things which TeX does after
loading a format file.

I then ran it through strace.  It indeed takes much more time to load
the pdflualatex format file than the others.  There is actually no
pause.  After the format file is opened and LaTeX banner appears,
there are many "read" system calls.  

342  pdflatex
526  pdflualatex
312  pdfluatex
333  pdftex

This looks reasonable, the numbers don't differ very much.

When running pdflualatex, I see much more brk(2) system calls than
when loading the other formats.  Don't know how expensive they are and
why there are so many when pdflualatex.fmt is loaded.

50   pdflatex
470  pdflualatex
71   pdfluatex
50   pdftex

I'm still clueless.  Any idea?

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From pragma at wxs.nl  Sun Apr  5 23:04:16 2009
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 05 Apr 2009 23:04:16 +0200
Subject: [luatex] luatex's pause
In-Reply-To: <18905.6920.903711.167292@zaphod.ms25.net>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>	<49D32B62.1080608@elvenkind.com>	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>	<49D33340.4070507@elvenkind.com>	<ba1882870904010227jf36e2eeo742e8d34159b59d1@mail.gmail.com>	<49D3362D.3060707@elvenkind.com>	<18900.3347.176970.975462@zaphod.ms25.net>	<49D46FF2.5080603@wxs.nl>
	<18905.6920.903711.167292@zaphod.ms25.net>
Message-ID: <49D91CD0.7020407@wxs.nl>

Reinhard Kotucha wrote:

> I'm still clueless.  Any idea?

is this only on unix? (if it's also slow on windows, then you can use 
procmon to get more details)

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From pragma at wxs.nl  Sun Apr  5 23:10:20 2009
From: pragma at wxs.nl (Hans Hagen)
Date: Sun, 05 Apr 2009 23:10:20 +0200
Subject: [luatex] luatex's pause
In-Reply-To: <18905.7544.266228.497401@zaphod.ms25.net>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>	<49D32B62.1080608@elvenkind.com>	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>	<49D33340.4070507@elvenkind.com>	<ba1882870904010227jf36e2eeo742e8d34159b59d1@mail.gmail.com>	<49D3362D.3060707@elvenkind.com>	<18900.3347.176970.975462@zaphod.ms25.net>	<49D46FF2.5080603@wxs.nl>	<18905.6920.903711.167292@zaphod.ms25.net>
	<18905.7544.266228.497401@zaphod.ms25.net>
Message-ID: <49D91E3C.4040403@wxs.nl>

Reinhard Kotucha wrote:
> On 5 April 2009 Reinhard Kotucha wrote:
> 
> Sorry, I have to correct this:
> 
>  > I then ran it through strace.  It indeed takes much more time to load
>  > the pdflualatex format file than the others.  There is actually no
>  > pause.  After the format file is opened and LaTeX banner appears,
>  > there are many "read" system calls.  
> 
> I meant: After the format file is opened and *before* the LaTeX banner
> appears... 

the luatex format is gzipped so this is probably a side effect of a 
smaller buffer size

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From taco at elvenkind.com  Sun Apr  5 23:14:21 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sun, 05 Apr 2009 23:14:21 +0200
Subject: [luatex] luatex's pause
In-Reply-To: <18905.6920.903711.167292@zaphod.ms25.net>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>	<49D32B62.1080608@elvenkind.com>	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>	<49D33340.4070507@elvenkind.com>	<ba1882870904010227jf36e2eeo742e8d34159b59d1@mail.gmail.com>	<49D3362D.3060707@elvenkind.com>	<18900.3347.176970.975462@zaphod.ms25.net>	<49D46FF2.5080603@wxs.nl>
	<18905.6920.903711.167292@zaphod.ms25.net>
Message-ID: <49D91F2D.8090204@elvenkind.com>

Reinhard Kotucha wrote:
> 
> When running pdflualatex, I see much more brk(2) system calls than
> when loading the other formats.  Don't know how expensive they are and
> why there are so many when pdflualatex.fmt is loaded.
> 
> 50   pdflatex
> 470  pdflualatex
> 71   pdfluatex
> 50   pdftex
> 
> I'm still clueless.  Any idea?

Probably zlib (luatex formats are compressed). Like I wrote earlier, has
anybody tried a new executable yet?

Best wishes,
Taco


From reinhard.kotucha at web.de  Sun Apr  5 23:57:41 2009
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sun, 5 Apr 2009 23:57:41 +0200
Subject: [luatex] luatex's pause
In-Reply-To: <49D91CD0.7020407@wxs.nl>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>
	<49D32B62.1080608@elvenkind.com>
	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>
	<49D33340.4070507@elvenkind.com>
	<ba1882870904010227jf36e2eeo742e8d34159b59d1@mail.gmail.com>
	<49D3362D.3060707@elvenkind.com>
	<18900.3347.176970.975462@zaphod.ms25.net>
	<49D46FF2.5080603@wxs.nl>
	<18905.6920.903711.167292@zaphod.ms25.net>
	<49D91CD0.7020407@wxs.nl>
Message-ID: <18905.10581.261048.219030@zaphod.ms25.net>

On 5 April 2009 Hans Hagen wrote:

 > Reinhard Kotucha wrote:
 > 
 > > I'm still clueless.  Any idea?
 > 
 > is this only on unix? 

Don't know.  Can you reproduce it on Windows?

 > (if it's also slow on windows, then you can use procmon to get more
 > details)

I could try at work, I recently updated TeX Live there.  However, at
the moment I can't spend much time on it because I'm currently
involved in several projects and have to make sure that my colleagues
can proceed.

However, strace and procmon are comparable.  procmon needs some
configuration effort, otherwise it traces everything.  strace only
traces system calls invoked by a particular process.  

Since the problem is reproducible on Unix, I'd like to use strace.  It's
easier for me to do such things at home.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From reinhard.kotucha at web.de  Mon Apr  6 00:03:09 2009
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 6 Apr 2009 00:03:09 +0200
Subject: [luatex] luatex's pause
In-Reply-To: <49D91F2D.8090204@elvenkind.com>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>
	<49D32B62.1080608@elvenkind.com>
	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>
	<49D33340.4070507@elvenkind.com>
	<ba1882870904010227jf36e2eeo742e8d34159b59d1@mail.gmail.com>
	<49D3362D.3060707@elvenkind.com>
	<18900.3347.176970.975462@zaphod.ms25.net>
	<49D46FF2.5080603@wxs.nl>
	<18905.6920.903711.167292@zaphod.ms25.net>
	<49D91F2D.8090204@elvenkind.com>
Message-ID: <18905.10909.780324.530394@zaphod.ms25.net>

On 5 April 2009 Taco Hoekwater wrote:

 > Reinhard Kotucha wrote:
 > > 
 > > When running pdflualatex, I see much more brk(2) system calls than
 > > when loading the other formats.  Don't know how expensive they are and
 > > why there are so many when pdflualatex.fmt is loaded.
 > > 
 > > 50   pdflatex
 > > 470  pdflualatex
 > > 71   pdfluatex
 > > 50   pdftex
 > > 
 > > I'm still clueless.  Any idea?
 > 
 > Probably zlib (luatex formats are compressed). Like I wrote earlier, has
 > anybody tried a new executable yet?

svn up failed because...

svn: Unknown hostname 'scm.foundry.supelec.fr'

I tried with what I had:

This is LuaTeX, Version snapshot-0.37.0-2009040522 (Web2C 7.5.7)

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From reinhard.kotucha at web.de  Sun Apr  5 23:07:04 2009
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Sun, 5 Apr 2009 23:07:04 +0200
Subject: [luatex] luatex's pause
In-Reply-To: <18905.6920.903711.167292@zaphod.ms25.net>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>
	<49D32B62.1080608@elvenkind.com>
	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>
	<49D33340.4070507@elvenkind.com>
	<ba1882870904010227jf36e2eeo742e8d34159b59d1@mail.gmail.com>
	<49D3362D.3060707@elvenkind.com>
	<18900.3347.176970.975462@zaphod.ms25.net>
	<49D46FF2.5080603@wxs.nl>
	<18905.6920.903711.167292@zaphod.ms25.net>
Message-ID: <18905.7544.266228.497401@zaphod.ms25.net>

On 5 April 2009 Reinhard Kotucha wrote:

Sorry, I have to correct this:

 > I then ran it through strace.  It indeed takes much more time to load
 > the pdflualatex format file than the others.  There is actually no
 > pause.  After the format file is opened and LaTeX banner appears,
 > there are many "read" system calls.  

I meant: After the format file is opened and *before* the LaTeX banner
appears... 

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From cloos at jhcloos.com  Mon Apr  6 01:54:40 2009
From: cloos at jhcloos.com (James Cloos)
Date: Sun, 05 Apr 2009 19:54:40 -0400
Subject: [luatex] luatex's pause
In-Reply-To: <18900.3347.176970.975462@zaphod.ms25.net> (Reinhard Kotucha's
	message of "Thu, 2 Apr 2009 02:55:47 +0200")
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>
	<49D32B62.1080608@elvenkind.com>
	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>
	<49D33340.4070507@elvenkind.com>
	<ba1882870904010227jf36e2eeo742e8d34159b59d1@mail.gmail.com>
	<49D3362D.3060707@elvenkind.com>
	<18900.3347.176970.975462@zaphod.ms25.net>
Message-ID: <m363hi1wrr.fsf@lugabout.jhcloos.org>

>>>>> "Reinhard" == Reinhard Kotucha <reinhard.kotucha at web.de> writes:

Reinhard> $ time pdflatex \\stop
Reinhard> $ time pdflualatex \\stop

I tried that using GNU time(1).  I have TeXlive 2008 installed.

The time output (only) of the two commands are:

,----< gtime -v pdflatex \\stop >
| Command being timed: "pdflatex \stop"
| User time (seconds): 0.26
| System time (seconds): 0.03
| Percent of CPU this job got: 84%
| Elapsed (wall clock) time (h:mm:ss or m:ss): 0:00.34
| Average shared text size (kbytes): 0
| Average unshared data size (kbytes): 0
| Average stack size (kbytes): 0
| Average total size (kbytes): 0
| Maximum resident set size (kbytes): 0
| Average resident set size (kbytes): 0
| Major (requiring I/O) page faults: 0
| Minor (reclaiming a frame) page faults: 1835
| Voluntary context switches: 1
| Involuntary context switches: 40
| Swaps: 0
| File system inputs: 8
| File system outputs: 8
| Socket messages sent: 0
| Socket messages received: 0
| Signals delivered: 0
| Page size (bytes): 4096
| Exit status: 0
`----

,----< gtime -v pdflualatex \\stop >
| Command being timed: "pdflualatex \stop"
| User time (seconds): 0.73
| System time (seconds): 0.17
| Percent of CPU this job got: 30%
| Elapsed (wall clock) time (h:mm:ss or m:ss): 0:02.99
| Average shared text size (kbytes): 0
| Average unshared data size (kbytes): 0
| Average stack size (kbytes): 0
| Average total size (kbytes): 0
| Maximum resident set size (kbytes): 0
| Average resident set size (kbytes): 0
| Major (requiring I/O) page faults: 44
| Minor (reclaiming a frame) page faults: 9074
| Voluntary context switches: 117
| Involuntary context switches: 422
| Swaps: 0
| File system inputs: 9424
| File system outputs: 16
| Socket messages sent: 0
| Socket messages received: 0
| Signals delivered: 0
| Page size (bytes): 4096
| Exit status: 0
`----

Note the minor page fault, context switche and file system i/o numbers.

-JimC
-- 
James Cloos <cloos at jhcloos.com>         OpenPGP: 1024D/ED7DAEA6



From elie.roux at telecom-bretagne.eu  Mon Apr  6 08:29:26 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Mon, 06 Apr 2009 08:29:26 +0200
Subject: [luatex] luatex's pause
In-Reply-To: <18905.10909.780324.530394@zaphod.ms25.net>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>	<49D32B62.1080608@elvenkind.com>	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>	<49D33340.4070507@elvenkind.com>	<ba1882870904010227jf36e2eeo742e8d34159b59d1@mail.gmail.com>	<49D3362D.3060707@elvenkind.com>	<18900.3347.176970.975462@zaphod.ms25.net>	<49D46FF2.5080603@wxs.nl>	<18905.6920.903711.167292@zaphod.ms25.net>	<49D91F2D.8090204@elvenkind.com>
	<18905.10909.780324.530394@zaphod.ms25.net>
Message-ID: <49D9A146.8060000@telecom-bretagne.eu>

Reinhard Kotucha a ?crit :
>  > Probably zlib (luatex formats are compressed). Like I wrote earlier, has
>  > anybody tried a new executable yet?
>
> I tried with what I had:
>
> This is LuaTeX, Version snapshot-0.37.0-2009040522 (Web2C 7.5.7)
>   

I've never had such a pause under TL2007 (with a recent executable).

Regards,
-- 
Elie

From elie.roux at telecom-bretagne.eu  Mon Apr  6 21:04:11 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Mon, 06 Apr 2009 21:04:11 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
Message-ID: <49DA522B.8080200@telecom-bretagne.eu>

Hello,

I'm improving luaminimalotf, now (with great help from Hans) it supports 
ligatures and substitutions pretty well. I think I'll rename it 
luaotfload, as it will care about otf loading (with the XeTeX font 
syntax) and features setting. I'll also make another package to adapt 
the mechanisms to LaTeX, with the same syntax as fontec does for XeTeX. 
I don't know yet if it will be an adaptation of fontspec or if I'll 
rewrite things from scratch...

I have a few questions about otf support, and the way TeX and ConTeXt 
handle things. First is it possible to declare ligatures of three 
glyphs? for example 1/4 (I'm sure there are more pertinent examples in 
languages I don't know)? I didn't find it in the manual...

Also, how should I handle font cache? For example when I ask to load the 
same font (with same options) with different size, should I reopen the 
font (with all the fontloader.open things) entirely, or just copy the 
old one and rescale it?

I finally got an answer from Frank, he refuses to let a third-party 
package be loaded by inputenc, and he thinks things are not stable 
enough now to be integrated. We'll see next year... The problem being 
that luainputenc really needs a lot of code from luatextra and 
luamcallbacks, and I think it would be stupid to duplicate it into 
luainputenc for its integration into LaTeX... In the meantime, 
luainputenc now loads inputenc if called with pdfTeX, and xetex-inputenc 
if called with XeTeX.

Thank you,
-- 
Elie

From schuster.wolfgang at googlemail.com  Mon Apr  6 21:21:57 2009
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Mon, 6 Apr 2009 21:21:57 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DA522B.8080200@telecom-bretagne.eu>
References: <49DA522B.8080200@telecom-bretagne.eu>
Message-ID: <32BCDA4F-2B5E-4A7C-864E-3DED1A3EA4DB@gmail.com>


Am 06.04.2009 um 21:04 schrieb Elie Roux:

> I have a few questions about otf support, and the way TeX and  
> ConTeXt handle things. First is it possible to declare ligatures of  
> three glyphs? for example 1/4 (I'm sure there are more pertinent  
> examples in languages I don't know)? I didn't find it in the manual...

http://www.ntg.nl/pipermail/ntg-context/2009/038548.html

Wolfgang


From elie.roux at telecom-bretagne.eu  Mon Apr  6 21:33:27 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Mon, 06 Apr 2009 21:33:27 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <32BCDA4F-2B5E-4A7C-864E-3DED1A3EA4DB@gmail.com>
References: <49DA522B.8080200@telecom-bretagne.eu>
	<32BCDA4F-2B5E-4A7C-864E-3DED1A3EA4DB@gmail.com>
Message-ID: <49DA5907.5020306@telecom-bretagne.eu>

Wolfgang Schuster a ?crit :
> http://www.ntg.nl/pipermail/ntg-context/2009/038548.html

Actually I'd like to know how to do so at the engine level, not at the 
ConTeXt level... And experience shows that understanding how ConTeXt 
handles this kind of things just looking at the code is way too long and 
complex for me. Another way to ask it would be: is it done in ConTeXt at 
the font definition level, or at the node processing level?

Thank you,
-- 
Elie

From khaledhosny at eglug.org  Mon Apr  6 22:01:32 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Mon, 6 Apr 2009 22:01:32 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DA522B.8080200@telecom-bretagne.eu>
References: <49DA522B.8080200@telecom-bretagne.eu>
Message-ID: <20090406200132.GA6176@khaled-laptop>

On Mon, Apr 06, 2009 at 09:04:11PM +0200, Elie Roux wrote:
> I have a few questions about otf support, and the way TeX and ConTeXt  
> handle things. First is it possible to declare ligatures of three  
> glyphs? for example 1/4 (I'm sure there are more pertinent examples in  
> languages I don't know)? I didn't find it in the manual...

You can get as much of ligature components as you want, for example most
Arabic fonts implement ???? as one ligature, this is a 4-characters
ligature. However, 1/4 and a like are usually implemented as 'frac' not
'liga'.

Regards,
 Khaled


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090406/c11b1de5/attachment.bin 

From yannis.haralambous at telecom-bretagne.eu  Mon Apr  6 22:42:46 2009
From: yannis.haralambous at telecom-bretagne.eu (Yannis Haralambous)
Date: Mon, 6 Apr 2009 22:42:46 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <20090406200132.GA6176@khaled-laptop>
References: <49DA522B.8080200@telecom-bretagne.eu>
	<20090406200132.GA6176@khaled-laptop>
Message-ID: <DCE0BCC9-D531-4794-885B-B335CEFEDA97@telecom-bretagne.eu>

six characters (at least) : alif, lam, lam, shadda, vertical fatha, heh

Le 6 avr. 09 ? 22:01, Khaled Hosny a ?crit :

> You can get as much of ligature components as you want, for example  
> most
> Arabic fonts implement ???? as one ligature, this is a 4- 
> characters
> ligature.

--
+ 
-----------------------------------------------------------------------+
| Yannis Haralambous, Ph.D.      yannis.haralambous at telecom- 
bretagne.eu |
| Directeur d'?tudes                      http://omega.enstb.org/ 
yannis |
|                                             Tel. +33  
(0)2.29.00.14.27 |
|                                             Fax  +33  
(0)2.29.00.12.82 |
| D?partement  
Informatique                                              |
| T?l?com  
Bretagne                                                      |
| Technop?le de Brest Iroise, CS 83818, 29238 Brest Cedex 3,  
France     |
| Coordonn?es Google-Earth : 48?21'31.57"N  
4?34'16.76"W                 |
+ 
-----------------------------------------------------------------------+
                             ...pour distinguer l'ext?rieur d'un  
aquarium,
                                            mieux vaut n'?tre pas  
poisson

                            ...the ball I threw while playing in the  
park
                                           has not yet reached the  
ground

               Es gab eine Zeit, wo ich nur ungern ?ber Schubert  
sprechen,
            nur N?chtens den B?umen und Sternen von ihm vorerz?hlen  
m?gen.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Yannis Haralambous.vcf
Type: text/directory
Size: 508 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090406/02bd3a84/attachment.bin 
-------------- next part --------------



From reinhard.kotucha at web.de  Mon Apr  6 23:00:32 2009
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 6 Apr 2009 23:00:32 +0200
Subject: [luatex] luatex's pause
In-Reply-To: <49D91F2D.8090204@elvenkind.com>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>
	<49D32B62.1080608@elvenkind.com>
	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>
	<49D33340.4070507@elvenkind.com>
	<ba1882870904010227jf36e2eeo742e8d34159b59d1@mail.gmail.com>
	<49D3362D.3060707@elvenkind.com>
	<18900.3347.176970.975462@zaphod.ms25.net>
	<49D46FF2.5080603@wxs.nl>
	<18905.6920.903711.167292@zaphod.ms25.net>
	<49D91F2D.8090204@elvenkind.com>
Message-ID: <18906.28016.115972.755082@zaphod.ms25.net>

On 5 April 2009 Taco Hoekwater wrote:

 > Reinhard Kotucha wrote:
 > > 
 > > When running pdflualatex, I see much more brk(2) system calls than
 > > when loading the other formats.  Don't know how expensive they are and
 > > why there are so many when pdflualatex.fmt is loaded.
 > > 
 > > 50   pdflatex
 > > 470  pdflualatex
 > > 71   pdfluatex
 > > 50   pdftex
 > > 
 > > I'm still clueless.  Any idea?
 > 
 > Probably zlib (luatex formats are compressed). [...]

What confuses me is that pdfluatex and pdflualatex behave so
different.  The only difference is that the format files contain
different macros.

I have snapshot-0.37.0-2009040522 installed.  Could you send me a
format file for this version you created yourself?

$ md5sum pdflualatex.fmt
11053089e8372a41606f19678af04724  pdflualatex.fmt

Hans, I get similar behavior on Windows indeed.  pdflualatex takes 3.8
seconds while pdfluatex starts virtually immediately.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From karl at freefriends.org  Mon Apr  6 23:03:01 2009
From: karl at freefriends.org (Karl Berry)
Date: Mon, 6 Apr 2009 16:03:01 -0500
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DA522B.8080200@telecom-bretagne.eu>
Message-ID: <200904062103.n36L31l02404@f7.net>

    for example 1/4 (I'm sure there are more pertinent examples 

For example, "ffi" and "ffl" are standard ligatures in English.

    Also, how should I handle font cache? For example when I ask to load the 
    same font (with same options) with different size, 

I was curious about that particular case myself.  Does OpenType have any
concept of non-linear scaling?  Can SomeFont.otf give a
differently-designed result when loaded at 5pt than 10pt, a la cmr5
vs. cmr10?  Or does it have to be two different otf files?

From reinhard.kotucha at web.de  Mon Apr  6 23:11:41 2009
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 6 Apr 2009 23:11:41 +0200
Subject: [luatex] luatex's pause
In-Reply-To: <49D9A146.8060000@telecom-bretagne.eu>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>
	<49D32B62.1080608@elvenkind.com>
	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>
	<49D33340.4070507@elvenkind.com>
	<ba1882870904010227jf36e2eeo742e8d34159b59d1@mail.gmail.com>
	<49D3362D.3060707@elvenkind.com>
	<18900.3347.176970.975462@zaphod.ms25.net>
	<49D46FF2.5080603@wxs.nl>
	<18905.6920.903711.167292@zaphod.ms25.net>
	<49D91F2D.8090204@elvenkind.com>
	<18905.10909.780324.530394@zaphod.ms25.net>
	<49D9A146.8060000@telecom-bretagne.eu>
Message-ID: <18906.28685.148908.313966@zaphod.ms25.net>

On 6 April 2009 Elie Roux wrote:

 > Reinhard Kotucha a ?crit :
 > >  > Probably zlib (luatex formats are compressed). Like I wrote earlier, has
 > >  > anybody tried a new executable yet?
 > >
 > > I tried with what I had:
 > >
 > > This is LuaTeX, Version snapshot-0.37.0-2009040522 (Web2C 7.5.7)
 > >   
 > 
 > I've never had such a pause under TL2007 (with a recent executable).

This is a valuable hint.  Thank you very much!

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From pragma at wxs.nl  Mon Apr  6 23:14:54 2009
From: pragma at wxs.nl (Hans Hagen)
Date: Mon, 06 Apr 2009 23:14:54 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <200904062103.n36L31l02404@f7.net>
References: <200904062103.n36L31l02404@f7.net>
Message-ID: <49DA70CE.9060004@wxs.nl>

Karl Berry wrote:
>     for example 1/4 (I'm sure there are more pertinent examples 
> 
> For example, "ffi" and "ffl" are standard ligatures in English.
> 
>     Also, how should I handle font cache? For example when I ask to load the 
>     same font (with same options) with different size, 
> 
> I was curious about that particular case myself.  Does OpenType have any
> concept of non-linear scaling?  Can SomeFont.otf give a
> differently-designed result when loaded at 5pt than 10pt, a la cmr5
> vs. cmr10?  Or does it have to be two different otf files?

there can be multiple sizes in one font (which is done in for instance 
cambria math)

Hans

-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
      tel: 038 477 53 69 | fax: 038 477 53 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From reinhard.kotucha at web.de  Tue Apr  7 03:21:56 2009
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Tue, 7 Apr 2009 03:21:56 +0200
Subject: [luatex] luatex's pause
In-Reply-To: <m363hi1wrr.fsf@lugabout.jhcloos.org>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>
	<49D32B62.1080608@elvenkind.com>
	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>
	<49D33340.4070507@elvenkind.com>
	<ba1882870904010227jf36e2eeo742e8d34159b59d1@mail.gmail.com>
	<49D3362D.3060707@elvenkind.com>
	<18900.3347.176970.975462@zaphod.ms25.net>
	<m363hi1wrr.fsf@lugabout.jhcloos.org>
Message-ID: <18906.43700.830182.285035@zaphod.ms25.net>

On 5 April 2009 James Cloos wrote:

 > >>>>> "Reinhard" == Reinhard Kotucha <reinhard.kotucha at web.de> writes:
 > 
 > Reinhard> $ time pdflatex \\stop
 > Reinhard> $ time pdflualatex \\stop
 > 
 > I tried that using GNU time(1).  I have TeXlive 2008 installed.

First of all, thank you very much for pointing me to GNU time.  I had
not been aware of it, but I installed it now.  It's great.

 > The time output (only) of the two commands are:
 > [...]

 > Note the minor page fault, context switche and file system i/o numbers.

Hmmm, I can't imagine that minor page faults are so expensive.  I get
even more of them:

        Major (requiring I/O) page faults: 0
        Minor (reclaiming a frame) page faults: 27090
        Voluntary context switches: 1
        Involuntary context switches: 594

And I can't imagine that context switches are the problem.  Well, file
I/O is expensive.  But last Saturday I upgraded my RAM to 4 GB and
have the impression that nothing actually had been read from disk
since then.

Nothing reported by GNU time explains such a delay.  I doubt that the
problem is caused by system calls.  Note that I can reproduce it on
Windows, where system calls are implemented completely different than
in Unix.

What I absolutely don't understand is why pdfluatex and pdflualatex
behave so different.

Regards,
  Reinhard

-- 
----------------------------------------------------------------------------
Reinhard Kotucha			              Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover	                      mailto:reinhard.kotucha at web.de
----------------------------------------------------------------------------
Microsoft isn't the answer. Microsoft is the question, and the answer is NO.
----------------------------------------------------------------------------

From khaledhosny at eglug.org  Tue Apr  7 04:06:26 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Tue, 7 Apr 2009 04:06:26 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DA522B.8080200@telecom-bretagne.eu>
References: <49DA522B.8080200@telecom-bretagne.eu>
Message-ID: <20090407020626.GA25144@khaled-laptop>

Just out of curiosity, is this related to the new luatex-font code that
Hans released today, or a different implementation?

Regards,
 Khaled


On Mon, Apr 06, 2009 at 09:04:11PM +0200, Elie Roux wrote:
> Hello,
>
> I'm improving luaminimalotf, now (with great help from Hans) it supports  
> ligatures and substitutions pretty well. I think I'll rename it  
> luaotfload, as it will care about otf loading (with the XeTeX font  
> syntax) and features setting. I'll also make another package to adapt  
> the mechanisms to LaTeX, with the same syntax as fontec does for XeTeX.  
> I don't know yet if it will be an adaptation of fontspec or if I'll  
> rewrite things from scratch...
>
> I have a few questions about otf support, and the way TeX and ConTeXt  
> handle things. First is it possible to declare ligatures of three  
> glyphs? for example 1/4 (I'm sure there are more pertinent examples in  
> languages I don't know)? I didn't find it in the manual...
>
> Also, how should I handle font cache? For example when I ask to load the  
> same font (with same options) with different size, should I reopen the  
> font (with all the fontloader.open things) entirely, or just copy the  
> old one and rescale it?
>
> I finally got an answer from Frank, he refuses to let a third-party  
> package be loaded by inputenc, and he thinks things are not stable  
> enough now to be integrated. We'll see next year... The problem being  
> that luainputenc really needs a lot of code from luatextra and  
> luamcallbacks, and I think it would be stupid to duplicate it into  
> luainputenc for its integration into LaTeX... In the meantime,  
> luainputenc now loads inputenc if called with pdfTeX, and xetex-inputenc  
> if called with XeTeX.
>
> Thank you,
> -- 
> Elie

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090407/8b01cea7/attachment.bin 

From oberdiek at uni-freiburg.de  Tue Apr  7 05:10:19 2009
From: oberdiek at uni-freiburg.de (Heiko Oberdiek)
Date: Tue, 7 Apr 2009 05:10:19 +0200
Subject: [luatex] luatex's pause
In-Reply-To: <18906.43700.830182.285035@zaphod.ms25.net>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>
	<49D32B62.1080608@elvenkind.com>
	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>
	<49D33340.4070507@elvenkind.com>
	<ba1882870904010227jf36e2eeo742e8d34159b59d1@mail.gmail.com>
	<49D3362D.3060707@elvenkind.com>
	<18900.3347.176970.975462@zaphod.ms25.net>
	<m363hi1wrr.fsf@lugabout.jhcloos.org>
	<18906.43700.830182.285035@zaphod.ms25.net>
Message-ID: <20090407031018.GA6947@irwin.vpn.uni-freiburg.de>

On Tue, Apr 07, 2009 at 03:21:56AM +0200, Reinhard Kotucha wrote:

> What I absolutely don't understand is why pdfluatex and pdflualatex
> behave so different.

The problem are the hyphenation patterns:

Decompressed file sizes (gunzip):

  a) pdfluatex.fmt:   1857724 (hyphen.tex)             --> fast
  b) pdflualatex.fmt: 7589629 (language.dat of TL2008) --> pause
  c) pdflualatex.fmt: 1627382 (empty language.dat)     --> fast

Hyphenation patterns:
  a)  1
  b) 54
  c)  0

Also the .log file tells a big difference in memory locations:

  a)  32299 memory locations dumped; current usage is 108&5095
  b) 522086 memory locations dumped; current usage is 130&47943
  c)  48318 memory locations dumped; current usage is 130&46672

>From the manual:

| Only the string representation of \patterns and \hyphenation is stored in
| the format file. At format load time, they are simply re-evaluated. It
| follows that there is no real reason to preload languages in the format
| file. In fact, it is usually not a good idea to do so. It is much smarter
| to load patterns no sooner than the first time they are actually needed.

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>

From vafakh9 at gmail.com  Tue Apr  7 05:16:01 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Tue, 7 Apr 2009 13:16:01 +1000
Subject: [luatex] luatex's pause
In-Reply-To: <20090407031018.GA6947@irwin.vpn.uni-freiburg.de>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>
	<49D32B62.1080608@elvenkind.com>
	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>
	<49D33340.4070507@elvenkind.com>
	<ba1882870904010227jf36e2eeo742e8d34159b59d1@mail.gmail.com>
	<49D3362D.3060707@elvenkind.com>
	<18900.3347.176970.975462@zaphod.ms25.net>
	<m363hi1wrr.fsf@lugabout.jhcloos.org>
	<18906.43700.830182.285035@zaphod.ms25.net>
	<20090407031018.GA6947@irwin.vpn.uni-freiburg.de>
Message-ID: <ba1882870904062016u660b1b57yb19820559c8e7b3c@mail.gmail.com>

On Tue, Apr 7, 2009 at 1:10 PM, Heiko Oberdiek <oberdiek at uni-freiburg.de>wrote:

> On Tue, Apr 07, 2009 at 03:21:56AM +0200, Reinhard Kotucha wrote:
>
> > What I absolutely don't understand is why pdfluatex and pdflualatex
> > behave so different.
>
> The problem are the hyphenation patterns:
>
> Decompressed file sizes (gunzip):
>
>  a) pdfluatex.fmt:   1857724 (hyphen.tex)             --> fast
>  b) pdflualatex.fmt: 7589629 (language.dat of TL2008) --> pause
>  c) pdflualatex.fmt: 1627382 (empty language.dat)     --> fast
>
> Hyphenation patterns:
>  a)  1
>  b) 54
>  c)  0
>
>
xelatex.fmt is super-fast and it does not cause any pause at all.  So I
think xelatex.ftm loades the language.dat as well. Please correct me if I am
mistaken.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090407/e9ef974c/attachment.html 

From elie.roux at telecom-bretagne.eu  Tue Apr  7 08:38:09 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Tue, 07 Apr 2009 08:38:09 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <200904062103.n36L31l02404@f7.net>
References: <200904062103.n36L31l02404@f7.net>
Message-ID: <49DAF4D1.9090905@telecom-bretagne.eu>

Karl Berry a ?crit :
>     for example 1/4 (I'm sure there are more pertinent examples 
>
> For example, "ffi" and "ffl" are standard ligatures in English.
>   

In most latine languages too, but these are special, as the mechanism 
is: ffi -> f_fi -> f_f_i, and you can't have this mechanism on 1/4, 
because 1_/ does not exist, where f_f does.

So I guess this must be done at nodes processing level... Could someone 
send me a short example of an long arab ligature (in a text file), and a 
pointer to an arab font having this ligature?

Thank you!
-- 
Elie

From taco at elvenkind.com  Tue Apr  7 08:48:10 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 07 Apr 2009 08:48:10 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DAF4D1.9090905@telecom-bretagne.eu>
References: <200904062103.n36L31l02404@f7.net>
	<49DAF4D1.9090905@telecom-bretagne.eu>
Message-ID: <49DAF72A.20609@elvenkind.com>

Elie Roux wrote:
> Karl Berry a ?crit :
>>     for example 1/4 (I'm sure there are more pertinent examples
>> For example, "ffi" and "ffl" are standard ligatures in English.
>>   
> 
> In most latine languages too, but these are special, as the mechanism 
> is: ffi -> f_fi -> f_f_i, and you can't have this mechanism on 1/4, 
> because 1_/ does not exist, where f_f does.

In an opentype font, you can have things like

   f f i -> f_f_i

in a single lookup step and the font would be perfectly legal even
if it didn't have an f_f glyph at all.

TeX's ligature building can't do that, it absolutely has to go
through an "f_f i" stage. This means that if you want a fully
reliable font system, you will have to do node list processing
even for simple ligatures (and definitely for 'frac').

Best wishes,
Taco









From vafakh9 at gmail.com  Tue Apr  7 08:48:55 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Tue, 7 Apr 2009 16:48:55 +1000
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DAF4D1.9090905@telecom-bretagne.eu>
References: <200904062103.n36L31l02404@f7.net>
	<49DAF4D1.9090905@telecom-bretagne.eu>
Message-ID: <ba1882870904062348w73e5e5a8y56d3ca1ae7892aac@mail.gmail.com>

>
>
> So I guess this must be done at nodes processing level... Could someone
> send me a short example of an long arab ligature (in a text file), and a
> pointer to an arab font having this ligature?
>
> Thank you!
> --
>


I do not have an example for Arabic. Maybe either Khaled or Idris have one.
For the font you can use any of the fonts at the blow page (I recommend
using Zar)

http://wiki.irmug.org/index.php/X_Series_2
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090407/0c55a675/attachment.html 

From taco at elvenkind.com  Tue Apr  7 08:52:12 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 07 Apr 2009 08:52:12 +0200
Subject: [luatex] luatex's pause
In-Reply-To: <20090407031018.GA6947@irwin.vpn.uni-freiburg.de>
References: <ba1882870904010149m75eeb8dajbfdfe24de99adc28@mail.gmail.com>	<49D32B62.1080608@elvenkind.com>	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>	<49D33340.4070507@elvenkind.com>	<ba1882870904010227jf36e2eeo742e8d34159b59d1@mail.gmail.com>	<49D3362D.3060707@elvenkind.com>	<18900.3347.176970.975462@zaphod.ms25.net>	<m363hi1wrr.fsf@lugabout.jhcloos.org>	<18906.43700.830182.285035@zaphod.ms25.net>
	<20090407031018.GA6947@irwin.vpn.uni-freiburg.de>
Message-ID: <49DAF81C.2050508@elvenkind.com>

Heiko Oberdiek wrote:
> 
>>From the manual:
> 
> | Only the string representation of \patterns and \hyphenation is stored in
> | the format file. At format load time, they are simply re-evaluated. It
> | follows that there is no real reason to preload languages in the format
> | file. In fact, it is usually not a good idea to do so. It is much smarter
> | to load patterns no sooner than the first time they are actually needed.

Ah, I should have remembered that.

This explains why my own delay is much shorter, I still have an ancient
language.dat that loads only 8 or 10 languages.

It would be better for pdflualatex not to load language.dat at all
and just hook pattern and exception loading into \selectlanguage,
but I have no idea how one out set that up, that needs a LaTeX expert.

Best wishes,
Taco


From elie.roux at telecom-bretagne.eu  Tue Apr  7 09:12:46 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Tue, 07 Apr 2009 09:12:46 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <20090407020626.GA25144@khaled-laptop>
References: <49DA522B.8080200@telecom-bretagne.eu>
	<20090407020626.GA25144@khaled-laptop>
Message-ID: <49DAFCEE.8040609@telecom-bretagne.eu>

Khaled Hosny a ?crit :
> Just out of curiosity, is this related to the new luatex-font code that
> Hans released today, or a different implementation?
>   

I tried to take ConTeXt implementation, but now I'm taking the basis of 
Arthur's code to implement new things, it's way more interesting for me, 
as it makes me understand a lot of things.
-- 
Elie

From oberdiek at uni-freiburg.de  Tue Apr  7 10:54:40 2009
From: oberdiek at uni-freiburg.de (Heiko Oberdiek)
Date: Tue, 7 Apr 2009 10:54:40 +0200
Subject: [luatex] luatex's pause
In-Reply-To: <ba1882870904062016u660b1b57yb19820559c8e7b3c@mail.gmail.com>
References: <49D32B62.1080608@elvenkind.com>
	<ba1882870904010203tae5f2e4yf64aa06e8352279d@mail.gmail.com>
	<49D33340.4070507@elvenkind.com>
	<ba1882870904010227jf36e2eeo742e8d34159b59d1@mail.gmail.com>
	<49D3362D.3060707@elvenkind.com>
	<18900.3347.176970.975462@zaphod.ms25.net>
	<m363hi1wrr.fsf@lugabout.jhcloos.org>
	<18906.43700.830182.285035@zaphod.ms25.net>
	<20090407031018.GA6947@irwin.vpn.uni-freiburg.de>
	<ba1882870904062016u660b1b57yb19820559c8e7b3c@mail.gmail.com>
Message-ID: <20090407085439.GA9937@irwin.vpn.uni-freiburg.de>

On Tue, Apr 07, 2009 at 01:16:01PM +1000, ?????? ?????????? wrote:

> On Tue, Apr 7, 2009 at 1:10 PM, Heiko Oberdiek <oberdiek at uni-freiburg.de>wrote:
> 
> > On Tue, Apr 07, 2009 at 03:21:56AM +0200, Reinhard Kotucha wrote:
> >
> > > What I absolutely don't understand is why pdfluatex and pdflualatex
> > > behave so different.
> >
> > The problem are the hyphenation patterns:
> >
> > Decompressed file sizes (gunzip):
> >
> >  a) pdfluatex.fmt:   1857724 (hyphen.tex)             --> fast
> >  b) pdflualatex.fmt: 7589629 (language.dat of TL2008) --> pause
> >  c) pdflualatex.fmt: 1627382 (empty language.dat)     --> fast
> >
> > Hyphenation patterns:
> >  a)  1
> >  b) 54
> >  c)  0
> >
> >
> xelatex.fmt is super-fast and it does not cause any pause at all.  So I
> think xelatex.ftm loades the language.dat as well. Please correct me if I am
> mistaken.

The file 'language.dat' is a configuration file that controls
which and especially how many pattern are loaded. I doubt that
XeTeX handles pattern the same way as LuaTeX.

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>

From elie.roux at telecom-bretagne.eu  Tue Apr  7 10:54:52 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Tue, 07 Apr 2009 10:54:52 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DA522B.8080200@telecom-bretagne.eu>
References: <49DA522B.8080200@telecom-bretagne.eu>
Message-ID: <49DB14DC.1020802@telecom-bretagne.eu>

Hello,

How can I detect safely a beginning or an end of a word, for the fina, 
isol, medi and init features? Can I simply check space and punctuation 
signs? Are there some more subtle things in other languages, or a better 
way to check it?

Thank you,
-- 
Elie

From yannis.haralambous at telecom-bretagne.eu  Tue Apr  7 10:58:56 2009
From: yannis.haralambous at telecom-bretagne.eu (Yannis Haralambous)
Date: Tue, 7 Apr 2009 10:58:56 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DB14DC.1020802@telecom-bretagne.eu>
References: <49DA522B.8080200@telecom-bretagne.eu>
	<49DB14DC.1020802@telecom-bretagne.eu>
Message-ID: <63AF4895-1DE3-4E87-A784-629D9F144965@telecom-bretagne.eu>

whatever is not Arabic 2-form or 4-form character (with one exception:  
the Unicode ZWJ character which acts like an Arabic one) or combining  
character can be considered as word begin or word end

Le 7 avr. 09 ? 10:54, Elie Roux a ?crit :

> Hello,
>
> How can I detect safely a beginning or an end of a word, for the  
> fina, isol, medi and init features? Can I simply check space and  
> punctuation signs? Are there some more subtle things in other  
> languages, or a better way to check it?
>
> Thank you,
> -- 
> Elie
>

--
+ 
-----------------------------------------------------------------------+
| Yannis Haralambous, Ph.D.      yannis.haralambous at telecom- 
bretagne.eu |
| Directeur d'?tudes                      http://omega.enstb.org/ 
yannis |
|                                             Tel. +33  
(0)2.29.00.14.27 |
|                                             Fax  +33  
(0)2.29.00.12.82 |
| D?partement  
Informatique                                              |
| T?l?com  
Bretagne                                                      |
| Technop?le de Brest Iroise, CS 83818, 29238 Brest Cedex 3,  
France     |
| Coordonn?es Google-Earth : 48?21'31.57"N  
4?34'16.76"W                 |
+ 
-----------------------------------------------------------------------+
                             ...pour distinguer l'ext?rieur d'un  
aquarium,
                                            mieux vaut n'?tre pas  
poisson

                            ...the ball I threw while playing in the  
park
                                           has not yet reached the  
ground

               Es gab eine Zeit, wo ich nur ungern ?ber Schubert  
sprechen,
            nur N?chtens den B?umen und Sternen von ihm vorerz?hlen  
m?gen.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Yannis Haralambous.vcf
Type: text/directory
Size: 508 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090407/426bc8ae/attachment.bin 
-------------- next part --------------



From elie.roux at telecom-bretagne.eu  Tue Apr  7 11:31:32 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Tue, 07 Apr 2009 11:31:32 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <63AF4895-1DE3-4E87-A784-629D9F144965@telecom-bretagne.eu>
References: <49DA522B.8080200@telecom-bretagne.eu>	<49DB14DC.1020802@telecom-bretagne.eu>
	<63AF4895-1DE3-4E87-A784-629D9F144965@telecom-bretagne.eu>
Message-ID: <49DB1D74.4030003@telecom-bretagne.eu>

Yannis Haralambous a ?crit :
> whatever is not Arabic 2-form or 4-form character (with one exception: 
> the Unicode ZWJ character which acts like an Arabic one) or combining 
> character can be considered as word begin or word end

Ok for arabic... but what about the final ? in greek (which, in fact, is 
my current example)?
-- 
Elie

From elie.roux at telecom-bretagne.eu  Tue Apr  7 11:36:53 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Tue, 07 Apr 2009 11:36:53 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DB1D74.4030003@telecom-bretagne.eu>
References: <49DA522B.8080200@telecom-bretagne.eu>	<49DB14DC.1020802@telecom-bretagne.eu>	<63AF4895-1DE3-4E87-A784-629D9F144965@telecom-bretagne.eu>
	<49DB1D74.4030003@telecom-bretagne.eu>
Message-ID: <49DB1EB5.3070302@telecom-bretagne.eu>

Elie Roux a ?crit :
> Yannis Haralambous a ?crit :
>> whatever is not Arabic 2-form or 4-form character (with one 
>> exception: the Unicode ZWJ character which acts like an Arabic one) 
>> or combining character can be considered as word begin or word end
>
> Ok for arabic... but what about the final ? in greek (which, in fact, 
> is my current example)?

'everything but a greek letter' is certainly the only answer, sorry to 
ask...
-- 
Elie

From Arno.Trautmann at gmx.de  Tue Apr  7 11:36:28 2009
From: Arno.Trautmann at gmx.de (Arno Trautmann)
Date: Tue, 07 Apr 2009 11:36:28 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DB1D74.4030003@telecom-bretagne.eu>
References: <49DA522B.8080200@telecom-bretagne.eu>	<49DB14DC.1020802@telecom-bretagne.eu>	<63AF4895-1DE3-4E87-A784-629D9F144965@telecom-bretagne.eu>
	<49DB1D74.4030003@telecom-bretagne.eu>
Message-ID: <49DB1E9C.6090007@gmx.de>

Elie Roux wrote:
> Yannis Haralambous a ?crit :
>> whatever is not Arabic 2-form or 4-form character (with one exception:
>> the Unicode ZWJ character which acts like an Arabic one) or combining
>> character can be considered as word begin or word end
> 
> Ok for arabic... but what about the final ? in greek (which, in fact, is
> my current example)?

Is that really a matter of the software? Anybody able to type greek
should use ? at the end instead of ?. (Like the ? instead of s in black
letter).

Arno

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 260 bytes
Desc: OpenPGP digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090407/64d1c7a7/attachment.bin 

From elie.roux at telecom-bretagne.eu  Tue Apr  7 11:39:14 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Tue, 07 Apr 2009 11:39:14 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DB1E9C.6090007@gmx.de>
References: <49DA522B.8080200@telecom-bretagne.eu>	<49DB14DC.1020802@telecom-bretagne.eu>	<63AF4895-1DE3-4E87-A784-629D9F144965@telecom-bretagne.eu>	<49DB1D74.4030003@telecom-bretagne.eu>
	<49DB1E9C.6090007@gmx.de>
Message-ID: <49DB1F42.50608@telecom-bretagne.eu>

Arno Trautmann a ?crit :
> Is that really a matter of the software? Anybody able to type greek
> should use ? at the end instead of ?. (Like the ? instead of s in black
> letter).

As it is a font feature, I guess users can expect to get the good 
behaviour when they turn it on...
-- 
Elie

From yannis.haralambous at telecom-bretagne.eu  Tue Apr  7 15:26:03 2009
From: yannis.haralambous at telecom-bretagne.eu (Yannis Haralambous)
Date: Tue, 7 Apr 2009 15:26:03 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DB1F42.50608@telecom-bretagne.eu>
References: <49DA522B.8080200@telecom-bretagne.eu>	<49DB14DC.1020802@telecom-bretagne.eu>	<63AF4895-1DE3-4E87-A784-629D9F144965@telecom-bretagne.eu>	<49DB1D74.4030003@telecom-bretagne.eu>
	<49DB1E9C.6090007@gmx.de> <49DB1F42.50608@telecom-bretagne.eu>
Message-ID: <A1394B1B-6A72-4D8A-856C-BED8F32C8177@telecom-bretagne.eu>

?/? are legitimately distinct characters!
In front of a period you can have both: ?????. (= ?????),  
?????. (= ?????????), so it must be up to the user to  
choose, the font should not interfere
If you want glyph-level transformations, there are at least two of  
them which are very important:

1) initial beta -> medial beta inside the word or at the end of the  
word (attention: this should not happen when writing numbers)

2) at paragraph begin (not *line* begin, but *paragraph* begin or  
*verse* begin) breathings should be outside the glyph bbox for capital  
Epsilon, Upsilon and partly outside the glyph box for capital Alpha,  
Omicron, Rho, Omega. This allows alignment at the level of the letter  
so that breathings and accents are like inside an \llap (with kerning).

Le 7 avr. 09 ? 11:39, Elie Roux a ?crit :

> Arno Trautmann a ?crit :
>> Is that really a matter of the software? Anybody able to type greek
>> should use ? at the end instead of ?. (Like the ? instead of s in  
>> black
>> letter).
>
> As it is a font feature, I guess users can expect to get the good  
> behaviour when they turn it on...
> -- 
> Elie
>

--
+ 
-----------------------------------------------------------------------+
| Yannis Haralambous, Ph.D.      yannis.haralambous at telecom- 
bretagne.eu |
| Directeur d'?tudes                      http://omega.enstb.org/ 
yannis |
|                                             Tel. +33  
(0)2.29.00.14.27 |
|                                             Fax  +33  
(0)2.29.00.12.82 |
| D?partement  
Informatique                                              |
| T?l?com  
Bretagne                                                      |
| Technop?le de Brest Iroise, CS 83818, 29238 Brest Cedex 3,  
France     |
| Coordonn?es Google-Earth : 48?21'31.57"N  
4?34'16.76"W                 |
+ 
-----------------------------------------------------------------------+
                             ...pour distinguer l'ext?rieur d'un  
aquarium,
                                            mieux vaut n'?tre pas  
poisson

                            ...the ball I threw while playing in the  
park
                                           has not yet reached the  
ground

               Es gab eine Zeit, wo ich nur ungern ?ber Schubert  
sprechen,
            nur N?chtens den B?umen und Sternen von ihm vorerz?hlen  
m?gen.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Yannis Haralambous.vcf
Type: text/directory
Size: 508 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090407/30b01801/attachment.bin 
-------------- next part --------------



From yannis.haralambous at telecom-bretagne.eu  Tue Apr  7 15:27:38 2009
From: yannis.haralambous at telecom-bretagne.eu (Yannis Haralambous)
Date: Tue, 7 Apr 2009 15:27:38 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DB14DC.1020802@telecom-bretagne.eu>
References: <49DA522B.8080200@telecom-bretagne.eu>
	<49DB14DC.1020802@telecom-bretagne.eu>
Message-ID: <E503DDF6-0A65-4294-93C0-0B2A844542D7@telecom-bretagne.eu>

See also <http://www.unicode.org/reports/tr29/> (U1X 29 Unicode Text  
Segmentation)

Le 7 avr. 09 ? 10:54, Elie Roux a ?crit :

> Hello,
>
> How can I detect safely a beginning or an end of a word, for the  
> fina, isol, medi and init features? Can I simply check space and  
> punctuation signs? Are there some more subtle things in other  
> languages, or a better way to check it?
>
> Thank you,
> -- 
> Elie
>

--
+ 
-----------------------------------------------------------------------+
| Yannis Haralambous, Ph.D.      yannis.haralambous at telecom- 
bretagne.eu |
| Directeur d'?tudes                      http://omega.enstb.org/ 
yannis |
|                                             Tel. +33  
(0)2.29.00.14.27 |
|                                             Fax  +33  
(0)2.29.00.12.82 |
| D?partement  
Informatique                                              |
| T?l?com  
Bretagne                                                      |
| Technop?le de Brest Iroise, CS 83818, 29238 Brest Cedex 3,  
France     |
| Coordonn?es Google-Earth : 48?21'31.57"N  
4?34'16.76"W                 |
+ 
-----------------------------------------------------------------------+
                             ...pour distinguer l'ext?rieur d'un  
aquarium,
                                            mieux vaut n'?tre pas  
poisson

                            ...the ball I threw while playing in the  
park
                                           has not yet reached the  
ground

               Es gab eine Zeit, wo ich nur ungern ?ber Schubert  
sprechen,
            nur N?chtens den B?umen und Sternen von ihm vorerz?hlen  
m?gen.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Yannis Haralambous.vcf
Type: text/directory
Size: 508 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090407/bad3935c/attachment.bin 
-------------- next part --------------



From elie.roux at telecom-bretagne.eu  Tue Apr  7 15:28:46 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Tue, 07 Apr 2009 15:28:46 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <A1394B1B-6A72-4D8A-856C-BED8F32C8177@telecom-bretagne.eu>
References: <49DA522B.8080200@telecom-bretagne.eu>	<49DB14DC.1020802@telecom-bretagne.eu>	<63AF4895-1DE3-4E87-A784-629D9F144965@telecom-bretagne.eu>	<49DB1D74.4030003@telecom-bretagne.eu>	<49DB1E9C.6090007@gmx.de>
	<49DB1F42.50608@telecom-bretagne.eu>
	<A1394B1B-6A72-4D8A-856C-BED8F32C8177@telecom-bretagne.eu>
Message-ID: <49DB550E.8090500@telecom-bretagne.eu>

Yannis Haralambous a ?crit :
> ?/? are legitimately distinct characters!
> In front of a period you can have both: ?????. (= ?????), ?????. (= 
> ?????????), so it must be up to the user to choose, the font should 
> not interfere

Ok, thank you for your explanations!
-- 
Elie

From khaledhosny at eglug.org  Tue Apr  7 17:52:48 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Tue, 7 Apr 2009 17:52:48 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DAFCEE.8040609@telecom-bretagne.eu>
References: <49DA522B.8080200@telecom-bretagne.eu>
	<20090407020626.GA25144@khaled-laptop>
	<49DAFCEE.8040609@telecom-bretagne.eu>
Message-ID: <20090407155248.GC11380@khaled-laptop>

On Tue, Apr 07, 2009 at 09:12:46AM +0200, Elie Roux wrote:
> Khaled Hosny a ?crit :
>> Just out of curiosity, is this related to the new luatex-font code that
>> Hans released today, or a different implementation?
>>   
>
> I tried to take ConTeXt implementation, but now I'm taking the basis of  
> Arthur's code to implement new things, it's way more interesting for me,  
> as it makes me understand a lot of things.

Good luck then :)

Though, I'm not very keen to the idea of having to different OpenType
implementation. I know that OpenType is a complex ill-documented
standard, not to mention broken fonts, that it took ConTeXt team lots of
time and effort to come with a working implementation.
IMHO, it would have been better to save the effort of redoing all this
work from scratch, and better work on consolidating the code and making
sure it behaves well with LaTeX and plain, and providing a nice LaTeX
interface to it.

Just my two cents.

Regards,
 Khaled


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090407/d446e154/attachment.bin 

From elie.roux at telecom-bretagne.eu  Tue Apr  7 18:03:20 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Tue, 07 Apr 2009 18:03:20 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <20090407155248.GC11380@khaled-laptop>
References: <49DA522B.8080200@telecom-bretagne.eu>	<20090407020626.GA25144@khaled-laptop>	<49DAFCEE.8040609@telecom-bretagne.eu>
	<20090407155248.GC11380@khaled-laptop>
Message-ID: <49DB7948.5030108@telecom-bretagne.eu>

Khaled Hosny a ?crit :
> Though, I'm not very keen to the idea of having to different OpenType
> implementation. I know that OpenType is a complex ill-documented
> standard, not to mention broken fonts, that it took ConTeXt team lots of
> time and effort to come with a working implementation.
> IMHO, it would have been better to save the effort of redoing all this
> work from scratch, and better work on consolidating the code and making
> sure it behaves well with LaTeX and plain, and providing a nice LaTeX
> interface to it.
>   

Any help is welcome! If you want to try to adapt ConTeXt otf code, I 
isolated some, I can give you a link to it. It works, but I can't get no 
feature working.

For the LaTeX interface, this is an independant issue that I'll try to 
address with another package.
-- 
Elie

From khaledhosny at eglug.org  Tue Apr  7 18:18:19 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Tue, 7 Apr 2009 18:18:19 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DB7948.5030108@telecom-bretagne.eu>
References: <49DA522B.8080200@telecom-bretagne.eu>
	<20090407020626.GA25144@khaled-laptop>
	<49DAFCEE.8040609@telecom-bretagne.eu>
	<20090407155248.GC11380@khaled-laptop>
	<49DB7948.5030108@telecom-bretagne.eu>
Message-ID: <20090407161819.GB13851@khaled-laptop>

On Tue, Apr 07, 2009 at 06:03:20PM +0200, Elie Roux wrote:
> Khaled Hosny a ?crit :
>> Though, I'm not very keen to the idea of having to different OpenType
>> implementation. I know that OpenType is a complex ill-documented
>> standard, not to mention broken fonts, that it took ConTeXt team lots of
>> time and effort to come with a working implementation.
>> IMHO, it would have been better to save the effort of redoing all this
>> work from scratch, and better work on consolidating the code and making
>> sure it behaves well with LaTeX and plain, and providing a nice LaTeX
>> interface to it.
>>   
>
> Any help is welcome! If you want to try to adapt ConTeXt otf code, I  
> isolated some, I can give you a link to it. It works, but I can't get no  
> feature working.

Thanks, I isolated it too and got it to work with plain and simple LaTeX
documents, but I don't know much about LaTeX font handling to make it
usable. I'm not sure what do you mean by 'no feature' here.

> For the LaTeX interface, this is an independant issue that I'll try to  
> address with another package.

Do I assume that the package will be independent enough to work with either
implementation? That would be great.

Regards,
 Khaled


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090407/68f1d821/attachment.bin 

From vafakh9 at gmail.com  Tue Apr  7 18:20:50 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Wed, 8 Apr 2009 02:20:50 +1000
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <20090407161819.GB13851@khaled-laptop>
References: <49DA522B.8080200@telecom-bretagne.eu>
	<20090407020626.GA25144@khaled-laptop>
	<49DAFCEE.8040609@telecom-bretagne.eu>
	<20090407155248.GC11380@khaled-laptop>
	<49DB7948.5030108@telecom-bretagne.eu>
	<20090407161819.GB13851@khaled-laptop>
Message-ID: <ba1882870904070920g5088255cy2a6fb862784b6751@mail.gmail.com>

>
>
> Thanks, I isolated it too and got it to work with plain and simple LaTeX
> documents, but I don't know much about LaTeX font handling to make it
> usable. I'm not sure what do you mean by 'no feature' here.
>


Does that support Arabic? Can you please send it to me so that I can work on
it on Plain? I just need the code to work in Plain?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090408/1b478704/attachment-0001.html 

From elie.roux at telecom-bretagne.eu  Tue Apr  7 18:23:52 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Tue, 07 Apr 2009 18:23:52 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <20090407161819.GB13851@khaled-laptop>
References: <49DA522B.8080200@telecom-bretagne.eu>	<20090407020626.GA25144@khaled-laptop>	<49DAFCEE.8040609@telecom-bretagne.eu>	<20090407155248.GC11380@khaled-laptop>	<49DB7948.5030108@telecom-bretagne.eu>
	<20090407161819.GB13851@khaled-laptop>
Message-ID: <49DB7E18.305@telecom-bretagne.eu>

Khaled Hosny a ?crit :
> Thanks, I isolated it too and got it to work with plain and simple LaTeX
> documents, but I don't know much about LaTeX font handling to make it
> usable. I'm not sure what do you mean by 'no feature' here.
>   

The liga table for example. Does it work with your code?

> Do I assume that the package will be independent enough to work with either
> implementation? That would be great.

The luaotfload package will provide a way to get \font 
"MyFont.otf:+liga;+rlig" working for Plain and LaTeX, and will provide 
simple macros like \otfl at setfeature{smcp}. Another package (fontspec, or 
luafontspec) will provide the LaTeX interface that will call \font with 
the good options and the other macros, but these are two different 
things. I'm trying to get the first working now.
-- 
Elie

From elie.roux at telecom-bretagne.eu  Tue Apr  7 19:06:32 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Tue, 07 Apr 2009 19:06:32 +0200
Subject: [luatex] ligature nodes
Message-ID: <49DB8818.2030604@telecom-bretagne.eu>

Hello,

There is a question I haven't been able to answer with the manual: what 
is exactly the 'components' node in a glyph node? Is it a pointer to the 
nodes that it replaces? Is it mandatory?

It's described page 136 of the latest version of the manual.

Thank you,
-- 
Elie

From khaledhosny at eglug.org  Tue Apr  7 19:10:11 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Tue, 7 Apr 2009 19:10:11 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DB7E18.305@telecom-bretagne.eu>
References: <49DA522B.8080200@telecom-bretagne.eu>
	<20090407020626.GA25144@khaled-laptop>
	<49DAFCEE.8040609@telecom-bretagne.eu>
	<20090407155248.GC11380@khaled-laptop>
	<49DB7948.5030108@telecom-bretagne.eu>
	<20090407161819.GB13851@khaled-laptop>
	<49DB7E18.305@telecom-bretagne.eu>
Message-ID: <20090407171011.GA8344@khaled-laptop>

On Tue, Apr 07, 2009 at 06:23:52PM +0200, Elie Roux wrote:
> Khaled Hosny a ?crit :
>> Thanks, I isolated it too and got it to work with plain and simple LaTeX
>> documents, but I don't know much about LaTeX font handling to make it
>> usable. I'm not sure what do you mean by 'no feature' here.
>>   
>
> The liga table for example. Does it work with your code?

Yup, I got init, medi, fina, liga, rlig, mark and mkmk to work, at least
those are the ones I tested. I used some thing like:

\font\arab=name:myfont:mode=node;script=arab;language=ara;+init;+medi;+fina;+liga;+rlig;+mark;+mkmk

Very verbose :) but it does work, and we can make sets of defaults so
that setting language and script is enough to get default features, as in
XeTeX but even better, in XeTeX you can't disable default features.

>> Do I assume that the package will be independent enough to work with either
>> implementation? That would be great.
>
> The luaotfload package will provide a way to get \font  
> "MyFont.otf:+liga;+rlig" working for Plain and LaTeX, and will provide  
> simple macros like \otfl at setfeature{smcp}. Another package (fontspec, or  
> luafontspec) will provide the LaTeX interface that will call \font with  
> the good options and the other macros, but these are two different  
> things. 

I see.

> I'm trying to get the first working now.

That is my point, we already have code that is working now.

Regards,
 Khaled


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090407/86f8de41/attachment.bin 

From elie.roux at telecom-bretagne.eu  Tue Apr  7 19:12:34 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Tue, 07 Apr 2009 19:12:34 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <20090407171011.GA8344@khaled-laptop>
References: <49DA522B.8080200@telecom-bretagne.eu>	<20090407020626.GA25144@khaled-laptop>	<49DAFCEE.8040609@telecom-bretagne.eu>	<20090407155248.GC11380@khaled-laptop>	<49DB7948.5030108@telecom-bretagne.eu>	<20090407161819.GB13851@khaled-laptop>	<49DB7E18.305@telecom-bretagne.eu>
	<20090407171011.GA8344@khaled-laptop>
Message-ID: <49DB8982.4090806@telecom-bretagne.eu>

Khaled Hosny a ?crit :
> That is my point, we already have code that is working now.
>   

And where is this treasure hidden? ;-)
-- 
Elie

From taco at elvenkind.com  Tue Apr  7 19:35:33 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Tue, 07 Apr 2009 19:35:33 +0200
Subject: [luatex] ligature nodes
In-Reply-To: <49DB8818.2030604@telecom-bretagne.eu>
References: <49DB8818.2030604@telecom-bretagne.eu>
Message-ID: <49DB8EE5.3090605@elvenkind.com>

Elie Roux wrote:
> Hello,
> 
> There is a question I haven't been able to answer with the manual: what 
> is exactly the 'components' node in a glyph node? Is it a pointer to the 
> nodes that it replaces? 

Yes.

> Is it mandatory?

No, not at all.

Best wishes,
Taco

From khaledhosny at eglug.org  Tue Apr  7 19:58:52 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Tue, 7 Apr 2009 19:58:52 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DB8982.4090806@telecom-bretagne.eu>
References: <49DA522B.8080200@telecom-bretagne.eu>
	<20090407020626.GA25144@khaled-laptop>
	<49DAFCEE.8040609@telecom-bretagne.eu>
	<20090407155248.GC11380@khaled-laptop>
	<49DB7948.5030108@telecom-bretagne.eu>
	<20090407161819.GB13851@khaled-laptop>
	<49DB7E18.305@telecom-bretagne.eu>
	<20090407171011.GA8344@khaled-laptop>
	<49DB8982.4090806@telecom-bretagne.eu>
Message-ID: <20090407175852.GA10450@khaled-laptop>

On Tue, Apr 07, 2009 at 07:12:34PM +0200, Elie Roux wrote:
> Khaled Hosny a ?crit :
>> That is my point, we already have code that is working now.
>>   
>
> And where is this treasure hidden? ;-)

I uploaded the files I used[1], extracted from the latest ConTeXt beta.

This how I get it to work:

$ luatex --ini luatex-plain.tex
$ luatex --fmt luatex-plain luatex-test.tex

If you want to access fonts by name, not file name, then you'll need to
generate font names database:

$ mtxrun --script fonts --names

But I skipped this for the moment, and used filenames instead.

Hope this helps,

Regards,
 Khaled

[1] http://www.khaledhosny.org/files/luatex-fonts.tar.bz2


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090407/e28a64ec/attachment.bin 

From elie.roux at telecom-bretagne.eu  Tue Apr  7 21:09:30 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Tue, 07 Apr 2009 21:09:30 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <20090407175852.GA10450@khaled-laptop>
References: <49DA522B.8080200@telecom-bretagne.eu>	<20090407020626.GA25144@khaled-laptop>	<49DAFCEE.8040609@telecom-bretagne.eu>	<20090407155248.GC11380@khaled-laptop>	<49DB7948.5030108@telecom-bretagne.eu>	<20090407161819.GB13851@khaled-laptop>	<49DB7E18.305@telecom-bretagne.eu>	<20090407171011.GA8344@khaled-laptop>	<49DB8982.4090806@telecom-bretagne.eu>
	<20090407175852.GA10450@khaled-laptop>
Message-ID: <49DBA4EA.6010700@telecom-bretagne.eu>

Khaled Hosny a ?crit :
> Hope this helps,

It does, really! When I tried, I took as few ConTeXt code as possible, 
and I added some files when they were needed, but this approach was 
wrong. Now with your code I'll try the opposite: I'll try to reduce the 
code not to depend too much on ConTeXt files. But as the ConTeXt files 
will continue to evolve with LuaTeX, what I'll try to do is to let the 
ConTeXt files unchanged in the package, so that upgrades with new 
ConTeXt code are easy. When things will start to stabilize, I'll adapt 
them more.

Also, an interesting point is the cid files: they won't be in TeXLive, 
will they? Just to know if I can remove the loading of font-cid.lua.

Thank you!
-- 
Elie

From elie.roux at telecom-bretagne.eu  Tue Apr  7 22:33:40 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Tue, 07 Apr 2009 22:33:40 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <20090407175852.GA10450@khaled-laptop>
References: <49DA522B.8080200@telecom-bretagne.eu>	<20090407020626.GA25144@khaled-laptop>	<49DAFCEE.8040609@telecom-bretagne.eu>	<20090407155248.GC11380@khaled-laptop>	<49DB7948.5030108@telecom-bretagne.eu>	<20090407161819.GB13851@khaled-laptop>	<49DB7E18.305@telecom-bretagne.eu>	<20090407171011.GA8344@khaled-laptop>	<49DB8982.4090806@telecom-bretagne.eu>
	<20090407175852.GA10450@khaled-laptop>
Message-ID: <49DBB8A4.8040305@telecom-bretagne.eu>

I've made some small experiments with the code, it works well except for 
one thing: the -- and --- ligatures. Do you want to add it, or should I 
do it myself?

Thank you!
-- 
Elie

From schuster.wolfgang at googlemail.com  Tue Apr  7 22:43:47 2009
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Tue, 7 Apr 2009 22:43:47 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DBB8A4.8040305@telecom-bretagne.eu>
References: <49DA522B.8080200@telecom-bretagne.eu>	<20090407020626.GA25144@khaled-laptop>	<49DAFCEE.8040609@telecom-bretagne.eu>	<20090407155248.GC11380@khaled-laptop>	<49DB7948.5030108@telecom-bretagne.eu>	<20090407161819.GB13851@khaled-laptop>	<49DB7E18.305@telecom-bretagne.eu>	<20090407171011.GA8344@khaled-laptop>	<49DB8982.4090806@telecom-bretagne.eu>
	<20090407175852.GA10450@khaled-laptop>
	<49DBB8A4.8040305@telecom-bretagne.eu>
Message-ID: <51C42B87-1FB4-4D18-A1B0-2A890BED0238@gmail.com>


Am 07.04.2009 um 22:33 schrieb Elie Roux:

> I've made some small experiments with the code, it works well except  
> for one thing: the -- and --- ligatures. Do you want to add it, or  
> should I do it myself?

try tlig=yes

Wolfgang


From khaledhosny at eglug.org  Tue Apr  7 22:55:17 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Tue, 7 Apr 2009 22:55:17 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DBA4EA.6010700@telecom-bretagne.eu>
References: <20090407020626.GA25144@khaled-laptop>
	<49DAFCEE.8040609@telecom-bretagne.eu>
	<20090407155248.GC11380@khaled-laptop>
	<49DB7948.5030108@telecom-bretagne.eu>
	<20090407161819.GB13851@khaled-laptop>
	<49DB7E18.305@telecom-bretagne.eu>
	<20090407171011.GA8344@khaled-laptop>
	<49DB8982.4090806@telecom-bretagne.eu>
	<20090407175852.GA10450@khaled-laptop>
	<49DBA4EA.6010700@telecom-bretagne.eu>
Message-ID: <20090407205517.GA7405@khaled-laptop>

On Tue, Apr 07, 2009 at 09:09:30PM +0200, Elie Roux wrote:
> Khaled Hosny a ?crit :
>> Hope this helps,
>
> It does, really! When I tried, I took as few ConTeXt code as possible,  
> and I added some files when they were needed, but this approach was  
> wrong. Now with your code I'll try the opposite: I'll try to reduce the  
> code not to depend too much on ConTeXt files. But as the ConTeXt files  
> will continue to evolve with LuaTeX, what I'll try to do is to let the  
> ConTeXt files unchanged in the package, so that upgrades with new  
> ConTeXt code are easy. When things will start to stabilize, I'll adapt  
> them more.

I'm sorry, I think I wasn't clear and assumed that you follow ConTeXt
announcement. Yesterday, Hans announced a new beta[1] where he seperated
the font and OpenType related code so that is can be used with plain.
All what I did is:

$ for i in $(grep -o -e "'.*.\.lua'" luatex-fonts.lua | sed -e "s/'//g");
do cp /opt/context/tex/texmf-context/tex/context/base/$i .; done

and tar bzipped the files, with minor modification to the test file,
nothing to be credited for.

> Also, an interesting point is the cid files: they won't be in TeXLive,  
> will they? Just to know if I can remove the loading of font-cid.lua.

I don't know much about cid files, but I think it is important for east
asian fonts, even if it isn't part of TeXLive, users are no more bound
to special TeX fonts.

[1] http://www.ntg.nl/pipermail/ntg-context/2009/039710.html

Regards,
 Khaled


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090407/24f0ba98/attachment-0001.bin 

From khaledhosny at eglug.org  Tue Apr  7 23:35:15 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Tue, 7 Apr 2009 23:35:15 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DBB8A4.8040305@telecom-bretagne.eu>
References: <20090407020626.GA25144@khaled-laptop>
	<49DAFCEE.8040609@telecom-bretagne.eu>
	<20090407155248.GC11380@khaled-laptop>
	<49DB7948.5030108@telecom-bretagne.eu>
	<20090407161819.GB13851@khaled-laptop>
	<49DB7E18.305@telecom-bretagne.eu>
	<20090407171011.GA8344@khaled-laptop>
	<49DB8982.4090806@telecom-bretagne.eu>
	<20090407175852.GA10450@khaled-laptop>
	<49DBB8A4.8040305@telecom-bretagne.eu>
Message-ID: <20090407213515.GB7405@khaled-laptop>

On Tue, Apr 07, 2009 at 10:33:40PM +0200, Elie Roux wrote:
> I've made some small experiments with the code, it works well except for  
> one thing: the -- and --- ligatures. Do you want to add it, or should I  
> do it myself?

ConTeXt handle this by inventing a 'tlig' (TeX ligature) feature, since
every thing is actually lua tables, one can plug such tables in the
normal OpenType mechanism, even giving users control over it. Since I
didn't actually code any thing, feel free to do it yourself :)

Regards,
 Khaled
 

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090407/41beb4c8/attachment.bin 

From karl at freefriends.org  Wed Apr  8 03:05:25 2009
From: karl at freefriends.org (Karl Berry)
Date: Tue, 7 Apr 2009 20:05:25 -0500
Subject: [luatex] luatex's pause
In-Reply-To: <20090407031018.GA6947@irwin.vpn.uni-freiburg.de>
Message-ID: <200904080105.n3815PI00732@f7.net>

    The problem are the hyphenation patterns:

Glad you knew the answer, Heiko.

If you or anyone can propose a better (pdf)lualatex.ini for TL'09 (such
that existing documents still work, of course), that would be great.
This is lualatex.ini (minus comments):

\input pdftexconfig.tex
\pdfoutput=0
\scrollmode
\input latex.ltx
\endinput

pdflualatex.ini just omits the \pdfoutput=0 line.


As for plain luatex and pdfluatex, I have no clue off the top of my head
how to make it hook into the etex hyphenation stuff such that existing
documents don't change.  I left the "language.def" out of their
fmtutil.cnf entries, but did not have any clear vision about it.

lualatex        luatex  language.dat    lualatex.ini
pdflualatex     luatex  language.dat    pdflualatex.ini
luatex		luatex	-		luatex.ini
pdfluatex	luatex	-		pdfluatex.ini

karl

From mpg at elzevir.fr  Wed Apr  8 03:10:25 2009
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Wed, 08 Apr 2009 03:10:25 +0200
Subject: [luatex] luatex's pause
In-Reply-To: <200904080105.n3815PI00732@f7.net>
References: <200904080105.n3815PI00732@f7.net>
Message-ID: <49DBF981.2050603@elzevir.fr>

Karl Berry a ?crit :
> If you or anyone can propose a better (pdf)lualatex.ini for TL'09 (such
> that existing documents still work, of course), that would be great.

Hmm, if I understand correctly, babel should be changed too, if hyphenation
patterns are not to be "loaded" at format generation time.

Manuel.

From vafakh9 at gmail.com  Wed Apr  8 05:14:56 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Wed, 8 Apr 2009 13:14:56 +1000
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <20090407175852.GA10450@khaled-laptop>
References: <49DA522B.8080200@telecom-bretagne.eu>
	<20090407020626.GA25144@khaled-laptop>
	<49DAFCEE.8040609@telecom-bretagne.eu>
	<20090407155248.GC11380@khaled-laptop>
	<49DB7948.5030108@telecom-bretagne.eu>
	<20090407161819.GB13851@khaled-laptop>
	<49DB7E18.305@telecom-bretagne.eu>
	<20090407171011.GA8344@khaled-laptop>
	<49DB8982.4090806@telecom-bretagne.eu>
	<20090407175852.GA10450@khaled-laptop>
Message-ID: <ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>

Life is not empty,
There is kindness, there is apple and there is faith.


>
> I uploaded the files I used[1], extracted from the latest ConTeXt beta.
>
> This how I get it to work:
>
> $ luatex --ini luatex-plain.tex
> $ luatex --fmt luatex-plain luatex-test.tex
>
>

Or much easier without generating a format, you can have

%%%%%%%%%%%%%%%

\directlua {

dofile(kpse.find_file("luatex-fonts.lua","tex"))

}

\font\test=file:lmroman10-regular at 12pt\test

This is a test

\end


%%%%%%%%%%%%%%%%%%%%%%%%%


name it test.tex and run pdfluatex on it.


One Question: How do you define a font so that it supports arabic?


i.e. \font\test1=file:AdobeArabic-Regular.ttf:?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090408/3fe0ebb7/attachment.html 

From khaledhosny at eglug.org  Wed Apr  8 06:22:50 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 8 Apr 2009 06:22:50 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>
References: <20090407020626.GA25144@khaled-laptop>
	<49DAFCEE.8040609@telecom-bretagne.eu>
	<20090407155248.GC11380@khaled-laptop>
	<49DB7948.5030108@telecom-bretagne.eu>
	<20090407161819.GB13851@khaled-laptop>
	<49DB7E18.305@telecom-bretagne.eu>
	<20090407171011.GA8344@khaled-laptop>
	<49DB8982.4090806@telecom-bretagne.eu>
	<20090407175852.GA10450@khaled-laptop>
	<ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>
Message-ID: <20090408042250.GA27448@khaled-laptop>

On Wed, Apr 08, 2009 at 01:14:56PM +1000, ??? ????? wrote:
> One Question: How do you define a font so that it supports arabic?
> 
> 
> i.e. \font\test1=file:AdobeArabic-Regular.ttf:?

\font\test1=file:AdobeArabic-Regular.ttf:mode=node;script=arab;language=ara;+init;+medi;+fina;+liga;+rlig;+mark;+mkmk

I think those are the essential features, but you man want to turn
on/off other features according to the font, also you can replace
the value of 'language=ara' with 'far', 'urd' etc. though it is unlikely
to make any difference with 99% of Arabic fonts, you can also use
'dflt'. Generally you have to experiment a bit with the font to get the
features you want.

Regards,
 Khaled


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090408/30ceb731/attachment.bin 

From vafakh9 at gmail.com  Wed Apr  8 06:28:37 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Wed, 8 Apr 2009 14:28:37 +1000
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <20090408042250.GA27448@khaled-laptop>
References: <20090407020626.GA25144@khaled-laptop>
	<20090407155248.GC11380@khaled-laptop>
	<49DB7948.5030108@telecom-bretagne.eu>
	<20090407161819.GB13851@khaled-laptop>
	<49DB7E18.305@telecom-bretagne.eu>
	<20090407171011.GA8344@khaled-laptop>
	<49DB8982.4090806@telecom-bretagne.eu>
	<20090407175852.GA10450@khaled-laptop>
	<ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>
	<20090408042250.GA27448@khaled-laptop>
Message-ID: <ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>

On Wed, Apr 8, 2009 at 2:22 PM, Khaled Hosny <khaledhosny at eglug.org> wrote:

>
> \font\test1=file:AdobeArabic-Regular.ttf:mode=node;script=arab;language=ara;+init;+medi;+fina;+liga;+rlig;+mark;+mkmk
>

?THanks but that code gives error for me in fact LuaTeX gives error if I
just have

\font\test1=file:AdobeArabic-Regular.ttf

and the error is

 ! LuaTeX error ./font-def.lua:337: attempt to call field 'read_from_afm' (a
nil

value).

<to be read again>

\par

l.7

 ?


Does that work for you?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090408/29d359e2/attachment.html 

From khaledhosny at eglug.org  Wed Apr  8 07:03:51 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 8 Apr 2009 07:03:51 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>
References: <20090407155248.GC11380@khaled-laptop>
	<49DB7948.5030108@telecom-bretagne.eu>
	<20090407161819.GB13851@khaled-laptop>
	<49DB7E18.305@telecom-bretagne.eu>
	<20090407171011.GA8344@khaled-laptop>
	<49DB8982.4090806@telecom-bretagne.eu>
	<20090407175852.GA10450@khaled-laptop>
	<ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>
	<20090408042250.GA27448@khaled-laptop>
	<ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>
Message-ID: <20090408050351.GA30342@khaled-laptop>

On Wed, Apr 08, 2009 at 02:28:37PM +1000, ??? ????? wrote:
> 
> ! LuaTeX error ./font-def.lua:337: attempt to call field 'read_from_afm' (a nil

Are you sure you have that font somewhere kpse can find it, like the
current directory? May be your font has a .otf extension? You can omit
the extension part if not sure. Also, try:

$ kpsewhich AdobeArabic-Regular.ttf

If it can't find the font, then luatex won't find it.

Regards,
 Khaled


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090408/f380f756/attachment.bin 

From vafakh9 at gmail.com  Wed Apr  8 07:07:53 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Wed, 8 Apr 2009 15:07:53 +1000
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <20090408050351.GA30342@khaled-laptop>
References: <20090407155248.GC11380@khaled-laptop>
	<20090407161819.GB13851@khaled-laptop>
	<49DB7E18.305@telecom-bretagne.eu>
	<20090407171011.GA8344@khaled-laptop>
	<49DB8982.4090806@telecom-bretagne.eu>
	<20090407175852.GA10450@khaled-laptop>
	<ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>
	<20090408042250.GA27448@khaled-laptop>
	<ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>
	<20090408050351.GA30342@khaled-laptop>
Message-ID: <ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>

>
> Are you sure you have that font somewhere kpse can find it, like the
> current directory? May be your font has a .otf extension? You can omit
> the extension part if not sure. Also, try:



That makes sense.

The font is at
/home/vafa/.fonts/microsoft-adobearabic/AdobeArabic-Regular.ttf



But it seems  In general, XeTeX's font handling is much richer than what
this code does.

>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090408/36749dfc/attachment-0001.html 

From vafakh9 at gmail.com  Wed Apr  8 07:12:30 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Wed, 8 Apr 2009 15:12:30 +1000
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>
References: <20090407155248.GC11380@khaled-laptop>
	<49DB7E18.305@telecom-bretagne.eu>
	<20090407171011.GA8344@khaled-laptop>
	<49DB8982.4090806@telecom-bretagne.eu>
	<20090407175852.GA10450@khaled-laptop>
	<ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>
	<20090408042250.GA27448@khaled-laptop>
	<ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>
	<20090408050351.GA30342@khaled-laptop>
	<ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>
Message-ID: <ba1882870904072212t22e4bcd6ueb0f158c86d70051@mail.gmail.com>

Works, nicely. Awsome.

Thanks heaps.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090408/2c85fc4f/attachment.html 

From vafakh9 at gmail.com  Wed Apr  8 07:33:27 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Wed, 8 Apr 2009 15:33:27 +1000
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <ba1882870904072212t22e4bcd6ueb0f158c86d70051@mail.gmail.com>
References: <20090407155248.GC11380@khaled-laptop>
	<20090407171011.GA8344@khaled-laptop>
	<49DB8982.4090806@telecom-bretagne.eu>
	<20090407175852.GA10450@khaled-laptop>
	<ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>
	<20090408042250.GA27448@khaled-laptop>
	<ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>
	<20090408050351.GA30342@khaled-laptop>
	<ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>
	<ba1882870904072212t22e4bcd6ueb0f158c86d70051@mail.gmail.com>
Message-ID: <ba1882870904072233k7fd17bdfi7ee54dd7e433fb8f@mail.gmail.com>

In LaTeX, if you use the code in a document like

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass{article}

\pagedir TRT \bodydir TRT \pardir TRT \textdir TRT

\directlua {

dofile(kpse.find_file("luatex-fonts.lua","tex"))

}

 \font\body=file:XBZar.ttf:mode=node;script=arab;language=ara;+init;+medi;+fina;+liga;+rlig;+mark;+mkmk
at 14pt

\def\normalfont{\body}

\AtBeginDocument{\body}

\begin{document}

??? ?? ?????? ??? ?? ?? ??? ???? ???.

\section{?????}

\end{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


Then when you have \section in it, LuaTeX gives error and that is




! LuaTeX error /home/vafa/texmf/tex/luatex-fonts/font-def.lua:337: attempt
to c

all field 'read_from_afm' (a nil value).

<to be read again>

relax

l.16 \section{?????}

 ?



but if you write just normal texts without using any CS, then there is no
error.



I will write an interface for handling fonts in LaTeX very soon provided
these kind of issues can be fade away.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090408/a12c612c/attachment.html 

From vafakh9 at gmail.com  Wed Apr  8 07:36:54 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Wed, 8 Apr 2009 15:36:54 +1000
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <ba1882870904072233k7fd17bdfi7ee54dd7e433fb8f@mail.gmail.com>
References: <20090407155248.GC11380@khaled-laptop>
	<49DB8982.4090806@telecom-bretagne.eu>
	<20090407175852.GA10450@khaled-laptop>
	<ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>
	<20090408042250.GA27448@khaled-laptop>
	<ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>
	<20090408050351.GA30342@khaled-laptop>
	<ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>
	<ba1882870904072212t22e4bcd6ueb0f158c86d70051@mail.gmail.com>
	<ba1882870904072233k7fd17bdfi7ee54dd7e433fb8f@mail.gmail.com>
Message-ID: <ba1882870904072236o19235ea9q30e912aad0a6781e@mail.gmail.com>

Also the code can not load font that their names contains a space like `XB
Zar.ttf'
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090408/61114000/attachment.html 

From elie.roux at telecom-bretagne.eu  Wed Apr  8 09:08:34 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Wed, 08 Apr 2009 09:08:34 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>
References: <20090407155248.GC11380@khaled-laptop>	<20090407161819.GB13851@khaled-laptop>	<49DB7E18.305@telecom-bretagne.eu>	<20090407171011.GA8344@khaled-laptop>	<49DB8982.4090806@telecom-bretagne.eu>	<20090407175852.GA10450@khaled-laptop>	<ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>	<20090408042250.GA27448@khaled-laptop>	<ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>	<20090408050351.GA30342@khaled-laptop>
	<ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>
Message-ID: <49DC4D72.5060109@telecom-bretagne.eu>

??? ????? a ?crit :
> The font is at 
> /home/vafa/.fonts/microsoft-adobearabic/AdobeArabic-Regular.ttf

> But it seems  In general, XeTeX's font handling is much richer than 
> what this code does

LuaTeX has no mechanism to find the system fonts, I'm thinking about 
adding one. It would also allow to automatically find the bold and 
italic variants of a font, but I'm not sure how to do so yet... Anyway 
the space limitation is an important one I think, I'll try to get rid of it.
-- 
Elie

From elie.roux at telecom-bretagne.eu  Wed Apr  8 09:13:20 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Wed, 08 Apr 2009 09:13:20 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <20090407205517.GA7405@khaled-laptop>
References: <20090407020626.GA25144@khaled-laptop>	<49DAFCEE.8040609@telecom-bretagne.eu>	<20090407155248.GC11380@khaled-laptop>	<49DB7948.5030108@telecom-bretagne.eu>	<20090407161819.GB13851@khaled-laptop>	<49DB7E18.305@telecom-bretagne.eu>	<20090407171011.GA8344@khaled-laptop>	<49DB8982.4090806@telecom-bretagne.eu>	<20090407175852.GA10450@khaled-laptop>	<49DBA4EA.6010700@telecom-bretagne.eu>
	<20090407205517.GA7405@khaled-laptop>
Message-ID: <49DC4E90.6050300@telecom-bretagne.eu>

Khaled Hosny a ?crit :
> I'm sorry, I think I wasn't clear and assumed that you follow ConTeXt
> announcement. Yesterday, Hans announced a new beta[1] where he seperated
> the font and OpenType related code so that is can be used with plain.
>   

I don't follow ConTeXt announcements... so thank you Hans!

> I don't know much about cid files, but I think it is important for east
> asian fonts, even if it isn't part of TeXLive, users are no more bound
> to special TeX fonts.
>   

You're right, I'll let font-cid.lua in case of people adding the cid 
files by hand...
-- 
Elie

From Robin.Fairbairns at cl.cam.ac.uk  Wed Apr  8 09:17:21 2009
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Wed, 08 Apr 2009 08:17:21 +0100
Subject: [luatex] luatex's pause
In-Reply-To: Your message of Tue, 07 Apr 2009 20:05:25 -0500.
	<200904080105.n3815PI00732@f7.net>
Message-ID: <897.1239175041@cl.cam.ac.uk>

Karl Berry <karl at freefriends.org> wrote:

>     The problem are the hyphenation patterns:
> 
> Glad you knew the answer, Heiko.

i'm impressed, let alone pleased ;-)

> If you or anyone can propose a better (pdf)lualatex.ini for TL'09 (such
> that existing documents still work, of course), that would be great.
> This is lualatex.ini (minus comments):

it seems to me that we (the latex team) need to think about babel in
this world.  if we're going to re-create the environment that users have
become used to, we need to hack at \language (or perhaps just babel
\selectlanguage, etc) so that they load patterns on first call of a
language.  anyone know what context is doing for this?

i've not yet raised this on the latex internal list -- will do that
later.

robin

From vafakh9 at gmail.com  Wed Apr  8 09:19:54 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Wed, 8 Apr 2009 17:19:54 +1000
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DC4D72.5060109@telecom-bretagne.eu>
References: <20090407155248.GC11380@khaled-laptop>
	<20090407171011.GA8344@khaled-laptop>
	<49DB8982.4090806@telecom-bretagne.eu>
	<20090407175852.GA10450@khaled-laptop>
	<ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>
	<20090408042250.GA27448@khaled-laptop>
	<ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>
	<20090408050351.GA30342@khaled-laptop>
	<ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>
	<49DC4D72.5060109@telecom-bretagne.eu>
Message-ID: <ba1882870904080019w7efb0974ged71da0de6fdab82@mail.gmail.com>

> LuaTeX has no mechanism to find the system fonts,


I think in the past with ConTeXt one could use fonts in system fonts and
also space in the font name was not a problem.


>  It would also allow to automatically find the bold and italic variants of
> a font,
>

This also can be done in luafontspec, like when you say
\setmainfont[<opyions>]{font}, automatically luafontspec all that and there
is no need to declare the bold, italic and etc. I think it is noq possible
to modify fonstpec so that we can use it in LuaTeX.

I will do some work on it and post the result.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090408/f6a2b8e3/attachment.html 

From elie.roux at telecom-bretagne.eu  Wed Apr  8 09:37:28 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Wed, 08 Apr 2009 09:37:28 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <ba1882870904080019w7efb0974ged71da0de6fdab82@mail.gmail.com>
References: <20090407155248.GC11380@khaled-laptop>	<20090407171011.GA8344@khaled-laptop>	<49DB8982.4090806@telecom-bretagne.eu>	<20090407175852.GA10450@khaled-laptop>	<ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>	<20090408042250.GA27448@khaled-laptop>	<ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>	<20090408050351.GA30342@khaled-laptop>	<ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>	<49DC4D72.5060109@telecom-bretagne.eu>
	<ba1882870904080019w7efb0974ged71da0de6fdab82@mail.gmail.com>
Message-ID: <49DC5438.1000009@telecom-bretagne.eu>

??? ????? a ?crit :
> This also can be done in luafontspec, like when you say 
> \setmainfont[<opyions>]{font}, automatically luafontspec all that and 
> there is no need to declare the bold, italic and etc. I think it is 
> noq possible to modify fonstpec so that we can use it in LuaTeX.

I don't really understand... do you mean that you already have a 
luafontspec? What I meant was:

if you have LinLibertine_Re-4.4.1.otf and LinLibertine_Bd-4.1.0.otf 
(well, let's forget the version numbers...), installed somewhere, there 
must be a mechanism that says

"for the LinLibertine font, the regular variant is called 
LinLibertine_Re.otf and the bold variant is called LinLibertine_Bd.otf"

A kind of global fd file... Is this what you're working on?
-- 
Elie

From luatex at nililand.de  Wed Apr  8 10:08:38 2009
From: luatex at nililand.de (Ulrike Fischer)
Date: Wed, 8 Apr 2009 10:08:38 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
References: <20090407155248.GC11380@khaled-laptop>
	<20090407171011.GA8344@khaled-laptop>
	<49DB8982.4090806@telecom-bretagne.eu>
	<20090407175852.GA10450@khaled-laptop>
	<ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>
	<20090408042250.GA27448@khaled-laptop>
	<ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>
	<20090408050351.GA30342@khaled-laptop>
	<ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>
	<ba1882870904072212t22e4bcd6ueb0f158c86d70051@mail.gmail.com>
	<ba1882870904072233k7fd17bdfi7ee54dd7e433fb8f@mail.gmail.com>
Message-ID: <hv1wnxok8itk$.dlg@nililand.de>

Am Wed, 8 Apr 2009 15:33:27 +1000 schrieb ??? ?????:

> ! LuaTeX error /home/vafa/texmf/tex/luatex-fonts/font-def.lua:337: attempt
> to c
> 
> all field 'read_from_afm' (a nil value).

I got this error when trying to load a "normal" TeX font (through
the tfm). I mentioned it yesterday on the context list and Hans sent
me some code. But I haven't had time to test it yet. I will do it
today, and if it work Hans will probably add it to the beta. 

Is there somewhere a list or a description of the \font syntax? Or
even better a good test document?

Btw: I think it would be good if a possible LaTeX package uses the
same user command names then fontspec for xelatex. It would make
switching between the engines easier.



-- 
Ulrike Fischer 


From vafakh9 at gmail.com  Wed Apr  8 10:15:32 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Wed, 8 Apr 2009 18:15:32 +1000
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <hv1wnxok8itk$.dlg@nililand.de>
References: <20090407155248.GC11380@khaled-laptop>
	<20090407175852.GA10450@khaled-laptop>
	<ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>
	<20090408042250.GA27448@khaled-laptop>
	<ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>
	<20090408050351.GA30342@khaled-laptop>
	<ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>
	<ba1882870904072212t22e4bcd6ueb0f158c86d70051@mail.gmail.com>
	<ba1882870904072233k7fd17bdfi7ee54dd7e433fb8f@mail.gmail.com>
	<hv1wnxok8itk$.dlg@nililand.de>
Message-ID: <ba1882870904080115v60666c3ey6ac79649d2014aa8@mail.gmail.com>

>
>
> I got this error when trying to load a "normal" TeX font (through
> the tfm). I mentioned it yesterday on the context list and Hans sent
> me some code. But I haven't had time to test it yet. I will do it
> today, and if it work Hans will probably add it to the beta.


Also Hans sent me a a .lua file but still I get an error and that is

 (/home/vafa/texmf/tex/luabidi/luabidi.sty) <luatex-fonts.lua loaded in
0.021 se

conds> ) (test.aux)

! Font \OT1/cmr/m/n/17.28=cmr17 at 17.28pt not loadable: metric data not
found

or bad.

<to be read again>

relax

l.10 \section{?????}

 ?





I am also look for a guide or a test-document but I think we should find
some useful hints in MKIV reference.



>
>
> Btw: I think it would be good if a possible LaTeX package uses the
> same user command names then fontspec for xelatex. It would make
> switching between the engines easier.
>
>
>
>

Yes, Indeed.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090408/c4bf6a29/attachment.html 

From elie.roux at telecom-bretagne.eu  Wed Apr  8 10:17:39 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Wed, 08 Apr 2009 10:17:39 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <hv1wnxok8itk$.dlg@nililand.de>
References: <20090407155248.GC11380@khaled-laptop>	<20090407171011.GA8344@khaled-laptop>	<49DB8982.4090806@telecom-bretagne.eu>	<20090407175852.GA10450@khaled-laptop>	<ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>	<20090408042250.GA27448@khaled-laptop>	<ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>	<20090408050351.GA30342@khaled-laptop>	<ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>	<ba1882870904072212t22e4bcd6ueb0f158c86d70051@mail.gmail.com>	<ba1882870904072233k7fd17bdfi7ee54dd7e433fb8f@mail.gmail.com>
	<hv1wnxok8itk$.dlg@nililand.de>
Message-ID: <49DC5DA3.6010701@telecom-bretagne.eu>

Ulrike Fischer a ?crit :
> I got this error when trying to load a "normal" TeX font (through
> the tfm). I mentioned it yesterday on the context list and Hans sent
> me some code. But I haven't had time to test it yet. I will do it
> today, and if it work Hans will probably add it to the beta. 

Where is it possible to find this code?
-- 
Elie

From vafakh9 at gmail.com  Wed Apr  8 10:18:17 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Wed, 8 Apr 2009 18:18:17 +1000
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DC5438.1000009@telecom-bretagne.eu>
References: <20090407155248.GC11380@khaled-laptop>
	<20090407175852.GA10450@khaled-laptop>
	<ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>
	<20090408042250.GA27448@khaled-laptop>
	<ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>
	<20090408050351.GA30342@khaled-laptop>
	<ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>
	<49DC4D72.5060109@telecom-bretagne.eu>
	<ba1882870904080019w7efb0974ged71da0de6fdab82@mail.gmail.com>
	<49DC5438.1000009@telecom-bretagne.eu>
Message-ID: <ba1882870904080118s68ae227ep776f7f7271a080e9@mail.gmail.com>

> I don't really understand... do you mean that you already have a
> luafontspec? What I meant was:



No I meant I intend to write one.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090408/aa9f1375/attachment.html 

From vafakh9 at gmail.com  Wed Apr  8 10:21:03 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Wed, 8 Apr 2009 18:21:03 +1000
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DC5DA3.6010701@telecom-bretagne.eu>
References: <20090407155248.GC11380@khaled-laptop>
	<ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>
	<20090408042250.GA27448@khaled-laptop>
	<ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>
	<20090408050351.GA30342@khaled-laptop>
	<ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>
	<ba1882870904072212t22e4bcd6ueb0f158c86d70051@mail.gmail.com>
	<ba1882870904072233k7fd17bdfi7ee54dd7e433fb8f@mail.gmail.com>
	<hv1wnxok8itk$.dlg@nililand.de> <49DC5DA3.6010701@telecom-bretagne.eu>
Message-ID: <ba1882870904080121m77feec25wb7c93ba64f71127a@mail.gmail.com>

Khaled just posted the link:

http://www.khaledhosny.org/files/luatex-fonts.tar.bz2

Or get it from

http://www.pragma-ade.com/context/latest/cont-tmf.zip


I have attached the updated fonts-dum.lua that Hans sent.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090408/e79b5778/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: font-dum.lua
Type: application/octet-stream
Size: 2339 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090408/e79b5778/attachment.obj 

From elie.roux at telecom-bretagne.eu  Wed Apr  8 10:23:02 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Wed, 08 Apr 2009 10:23:02 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <ba1882870904080118s68ae227ep776f7f7271a080e9@mail.gmail.com>
References: <20090407155248.GC11380@khaled-laptop>	<20090407175852.GA10450@khaled-laptop>	<ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>	<20090408042250.GA27448@khaled-laptop>	<ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>	<20090408050351.GA30342@khaled-laptop>	<ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>	<49DC4D72.5060109@telecom-bretagne.eu>	<ba1882870904080019w7efb0974ged71da0de6fdab82@mail.gmail.com>	<49DC5438.1000009@telecom-bretagne.eu>
	<ba1882870904080118s68ae227ep776f7f7271a080e9@mail.gmail.com>
Message-ID: <49DC5EE6.4040501@telecom-bretagne.eu>

??? ????? a ?crit :
> No I meant I intend to write one.

Ok. Please share your code when you'll write it, I'll be interested in 
contributing!

I'll make a folder on github 
(http://github.com/eroux/lualatex/tree/master) called luaotfload that 
will contain the code from ConTeXt (a bit adapted), so that you'll be 
able to test it.

Thank you!
-- 
Elie

From vafakh9 at gmail.com  Wed Apr  8 10:31:59 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Wed, 8 Apr 2009 18:31:59 +1000
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DC5EE6.4040501@telecom-bretagne.eu>
References: <20090407155248.GC11380@khaled-laptop>
	<20090408042250.GA27448@khaled-laptop>
	<ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>
	<20090408050351.GA30342@khaled-laptop>
	<ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>
	<49DC4D72.5060109@telecom-bretagne.eu>
	<ba1882870904080019w7efb0974ged71da0de6fdab82@mail.gmail.com>
	<49DC5438.1000009@telecom-bretagne.eu>
	<ba1882870904080118s68ae227ep776f7f7271a080e9@mail.gmail.com>
	<49DC5EE6.4040501@telecom-bretagne.eu>
Message-ID: <ba1882870904080131y12d38741m87992581bfeca442@mail.gmail.com>

On Wed, Apr 8, 2009 at 6:23 PM, Elie Roux <elie.roux at telecom-bretagne.eu>wrote:

> ??? ????? a ?crit :
>
>> No I meant I intend to write one.
>>
>
> Ok. Please share your code when you'll write it, I'll be interested in
> contributing!
>
> I'll make a folder on github (http://github.com/eroux/lualatex/tree/master)
> called luaotfload that will contain the code from ConTeXt (a bit adapted),
> so that you'll be able to test it.
>
> Thank you!
> --
>

Sure. Thanks.

BTW: Have you tried luaforge? It is cool and gives you lots of freedom.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090408/bb6540ed/attachment-0001.html 

From luatex at nililand.de  Wed Apr  8 10:32:35 2009
From: luatex at nililand.de (Ulrike Fischer)
Date: Wed, 8 Apr 2009 10:32:35 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
References: <20090407155248.GC11380@khaled-laptop>	<20090407161819.GB13851@khaled-laptop>	<49DB7E18.305@telecom-bretagne.eu>	<20090407171011.GA8344@khaled-laptop>	<49DB8982.4090806@telecom-bretagne.eu>	<20090407175852.GA10450@khaled-laptop>	<ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>	<20090408042250.GA27448@khaled-laptop>	<ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>	<20090408050351.GA30342@khaled-laptop>
	<ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>
	<49DC4D72.5060109@telecom-bretagne.eu>
Message-ID: <e2p1a5xvo73j.dlg@nililand.de>

Am Wed, 08 Apr 2009 09:08:34 +0200 schrieb Elie Roux:

> LuaTeX has no mechanism to find the system fonts,

In context there is a file call mtxrun.lua which can generate a list
of fonts in the system folder. 


-- 
Ulrike Fischer 


From elie.roux at telecom-bretagne.eu  Wed Apr  8 11:04:35 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Wed, 08 Apr 2009 11:04:35 +0200
Subject: [luatex] ifluatex update
Message-ID: <49DC68A3.3000708@telecom-bretagne.eu>

Hello,

I think ifluatex needs an update, to test directlua instead of 
luatexversion isn't it? Heiko can you do it please?

Thank you,
-- 
Elie

From vafakh9 at gmail.com  Wed Apr  8 12:08:43 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Wed, 8 Apr 2009 20:08:43 +1000
Subject: [luatex] LuaTeX's Repository
Message-ID: <ba1882870904080308s7afef1a1j8aba63594a78bfae@mail.gmail.com>

Hi


It has been a while that I have issues accessing luatex's repository. I do
not know why everyone can access it but I can not?

Should I do something so that I can browse the repository or get the files
via svn?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090408/577bcf92/attachment.html 

From elie.roux at telecom-bretagne.eu  Wed Apr  8 12:15:38 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Wed, 08 Apr 2009 12:15:38 +0200
Subject: [luatex] LuaTeX's Repository
In-Reply-To: <ba1882870904080308s7afef1a1j8aba63594a78bfae@mail.gmail.com>
References: <ba1882870904080308s7afef1a1j8aba63594a78bfae@mail.gmail.com>
Message-ID: <49DC794A.7040701@telecom-bretagne.eu>

??? ????? a ?crit :
> It has been a while that I have issues accessing luatex's repository. 
> I do not know why everyone can access it but I can not?
>
> Should I do something so that I can browse the repository or get the 
> files via svn?


The best way to deal with the broken dns of foundry.supelec.fr is to add 
this to your /etc/hosts:

193.48.224.170 scm.foundry.supelec.fr

It should be working with this modification.
-- 
Elie

From vafakh9 at gmail.com  Wed Apr  8 12:22:49 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Wed, 8 Apr 2009 20:22:49 +1000
Subject: [luatex] LuaTeX's Repository
In-Reply-To: <49DC794A.7040701@telecom-bretagne.eu>
References: <ba1882870904080308s7afef1a1j8aba63594a78bfae@mail.gmail.com>
	<49DC794A.7040701@telecom-bretagne.eu>
Message-ID: <ba1882870904080322w6a28e35fud7553cfbbf885ba1@mail.gmail.com>

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090408/b11c1918/attachment.html 

From vafakh9 at gmail.com  Wed Apr  8 13:20:02 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Wed, 8 Apr 2009 21:20:02 +1000
Subject: [luatex] bug in RTL?
Message-ID: <ba1882870904080420y5219488cye21d3c27262178ab@mail.gmail.com>

I am not sure if this is luatex's bug.

please look at the files attached in the beamer sample:

1- the title is not printed in the pdf output at all.

2- the frame that should contain the title and subtitle is placed
incorrectly.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090408/fecaa3b5/attachment-0001.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.pdf
Type: application/pdf
Size: 19450 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090408/fecaa3b5/attachment-0001.pdf 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.tex
Type: application/x-tex
Size: 197 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090408/fecaa3b5/attachment-0001.tex 

From elie.roux at telecom-bretagne.eu  Wed Apr  8 13:52:07 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Wed, 08 Apr 2009 13:52:07 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DC5EE6.4040501@telecom-bretagne.eu>
References: <20090407155248.GC11380@khaled-laptop>	<20090407175852.GA10450@khaled-laptop>	<ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>	<20090408042250.GA27448@khaled-laptop>	<ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>	<20090408050351.GA30342@khaled-laptop>	<ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>	<49DC4D72.5060109@telecom-bretagne.eu>	<ba1882870904080019w7efb0974ged71da0de6fdab82@mail.gmail.com>	<49DC5438.1000009@telecom-bretagne.eu>	<ba1882870904080118s68ae227ep776f7f7271a080e9@mail.gmail.com>
	<49DC5EE6.4040501@telecom-bretagne.eu>
Message-ID: <49DC8FE7.6010609@telecom-bretagne.eu>

Elie Roux a ?crit :
> I'll make a folder on github 
> (http://github.com/eroux/lualatex/tree/master) called luaotfload that 
> will contain the code from ConTeXt (a bit adapted), so that you'll be 
> able to test it.

Done. Basically the changelog is:

 - renaming the files to otfl-oldname to prevent name clashes
 - using luaextra functions instead of ConTeXt l-*.lua libraries 
(luaextra is mostly code from these anyway)
 - using normal attributes (obtained with \newluaattribute) instead of 
attributes > 127
 - adding a Plain+LaTeX sty file
 - registering the lua file as a lua module
 - using callback.add instead of callback.register
 - adding functions to turn the font mechanism on and off (on by default)

Thank you,
-- 
Elie

From khaledhosny at eglug.org  Wed Apr  8 15:38:40 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 8 Apr 2009 15:38:40 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>
References: <20090407161819.GB13851@khaled-laptop>
	<49DB7E18.305@telecom-bretagne.eu>
	<20090407171011.GA8344@khaled-laptop>
	<49DB8982.4090806@telecom-bretagne.eu>
	<20090407175852.GA10450@khaled-laptop>
	<ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>
	<20090408042250.GA27448@khaled-laptop>
	<ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>
	<20090408050351.GA30342@khaled-laptop>
	<ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>
Message-ID: <20090408133840.GA8045@khaled-laptop>

On Wed, Apr 08, 2009 at 03:07:53PM +1000, ??? ????? wrote:
> 
> 
>     Are you sure you have that font somewhere kpse can find it, like the
>     current directory? May be your font has a .otf extension? You can omit
>     the extension part if not sure. Also, try:
> 
> 
> 
> That makes sense.
> 
> The font is at /home/vafa/.fonts/microsoft-adobearabic/AdobeArabic-Regular.ttf
>
> But it seems? In general, XeTeX's font handling is much richer than what this
> code does.

This code provides basic functionality, if you have the latest ConTeXt
distribution, you can run 'mtxrun -script fonts -names' which will
generate a font names database that will even include fonts under
/usr/share/fonts and ~/.fonts, some one have to make such tool work
independent of context, or write an equivalent to it. But, by all means,
luatex gives us more fine control on what is going on, which xetex
doesn't.

Regards,
 Khaled


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090408/d0c4bd86/attachment.bin 

From khaledhosny at eglug.org  Wed Apr  8 15:47:52 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 8 Apr 2009 15:47:52 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <ba1882870904072236o19235ea9q30e912aad0a6781e@mail.gmail.com>
References: <49DB8982.4090806@telecom-bretagne.eu>
	<20090407175852.GA10450@khaled-laptop>
	<ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>
	<20090408042250.GA27448@khaled-laptop>
	<ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>
	<20090408050351.GA30342@khaled-laptop>
	<ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>
	<ba1882870904072212t22e4bcd6ueb0f158c86d70051@mail.gmail.com>
	<ba1882870904072233k7fd17bdfi7ee54dd7e433fb8f@mail.gmail.com>
	<ba1882870904072236o19235ea9q30e912aad0a6781e@mail.gmail.com>
Message-ID: <20090408134752.GB8045@khaled-laptop>

On Wed, Apr 08, 2009 at 03:36:54PM +1000, ??? ????? wrote:
> Also the code can not load font that their names contains a space like `XB
> Zar.ttf'

Try putting filenames either between {} (the luatex way) or [] (the
emulated xetex way).

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090408/5083787e/attachment.bin 

From khaledhosny at eglug.org  Wed Apr  8 15:49:24 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 8 Apr 2009 15:49:24 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <ba1882870904072233k7fd17bdfi7ee54dd7e433fb8f@mail.gmail.com>
References: <20090407171011.GA8344@khaled-laptop>
	<49DB8982.4090806@telecom-bretagne.eu>
	<20090407175852.GA10450@khaled-laptop>
	<ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>
	<20090408042250.GA27448@khaled-laptop>
	<ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>
	<20090408050351.GA30342@khaled-laptop>
	<ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>
	<ba1882870904072212t22e4bcd6ueb0f158c86d70051@mail.gmail.com>
	<ba1882870904072233k7fd17bdfi7ee54dd7e433fb8f@mail.gmail.com>
Message-ID: <20090408134924.GC8045@khaled-laptop>

On Wed, Apr 08, 2009 at 03:33:27PM +1000, ??? ????? wrote:
> In LaTeX, if you use the code in a document like
> 
> %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
> 
> \documentclass{article}
> 
> \pagedir TRT \bodydir TRT \pardir TRT \textdir TRT
> 
> \directlua {
> 
> dofile(kpse.find_file("luatex-fonts.lua","tex"))
> 
> }
> 
> \font\body=file:XBZar.ttf:mode=node;script=arab;language=ara;+init;+medi;+fina;
> +liga;+rlig;+mark;+mkmk at 14pt
> 
> \def\normalfont{\body}
> 
> \AtBeginDocument{\body}
> 
> \begin{document}
> 
> ??? ?? ?????? ??? ?? ?? ??? ???? ???.
> 
> \section{?????}
> 
> \end{document}
> 
> %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
> 
> 
> Then when you have \section in it, LuaTeX gives error and that is
> 
> 
> 
> 
> ! LuaTeX error /home/vafa/texmf/tex/luatex-fonts/font-def.lua:337: attempt to c
> 
> all field 'read_from_afm' (a nil value).
> 
> <to be read again>
> 
> relax
> 
> l.16 \section{?????}
> 
> ?
> 
> 
> 
> but if you write just normal texts without using any CS, then there is no
> error.

This has something to do with the way LaTeX loads fonts, which I have
absolutely no idea about.

Regards,
 Khaled


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090408/18bd4304/attachment.bin 

From vafakh9 at gmail.com  Wed Apr  8 15:51:45 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Wed, 8 Apr 2009 23:51:45 +1000
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <20090408134924.GC8045@khaled-laptop>
References: <20090407171011.GA8344@khaled-laptop>
	<20090407175852.GA10450@khaled-laptop>
	<ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>
	<20090408042250.GA27448@khaled-laptop>
	<ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>
	<20090408050351.GA30342@khaled-laptop>
	<ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>
	<ba1882870904072212t22e4bcd6ueb0f158c86d70051@mail.gmail.com>
	<ba1882870904072233k7fd17bdfi7ee54dd7e433fb8f@mail.gmail.com>
	<20090408134924.GC8045@khaled-laptop>
Message-ID: <ba1882870904080651k5b385c73q61e7b9433a31451f@mail.gmail.com>

>
>
> This has something to do with the way LaTeX loads fonts, which I have
> absolutely no idea about.
>

Hans fixed that.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090408/7fe89b3a/attachment.html 

From khaledhosny at eglug.org  Wed Apr  8 15:55:14 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Wed, 8 Apr 2009 15:55:14 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <49DC5438.1000009@telecom-bretagne.eu>
References: <49DB8982.4090806@telecom-bretagne.eu>
	<20090407175852.GA10450@khaled-laptop>
	<ba1882870904072014w2fa3efb7t6208abbd3c2ead07@mail.gmail.com>
	<20090408042250.GA27448@khaled-laptop>
	<ba1882870904072128o2ebf3286n9a1694ebf9546127@mail.gmail.com>
	<20090408050351.GA30342@khaled-laptop>
	<ba1882870904072207h72c7c5fbye29f15afaa4921c6@mail.gmail.com>
	<49DC4D72.5060109@telecom-bretagne.eu>
	<ba1882870904080019w7efb0974ged71da0de6fdab82@mail.gmail.com>
	<49DC5438.1000009@telecom-bretagne.eu>
Message-ID: <20090408135514.GD8045@khaled-laptop>

On Wed, Apr 08, 2009 at 09:37:28AM +0200, Elie Roux wrote:
> ??? ????? a ?crit :
>> This also can be done in luafontspec, like when you say  
>> \setmainfont[<opyions>]{font}, automatically luafontspec all that and  
>> there is no need to declare the bold, italic and etc. I think it is  
>> noq possible to modify fonstpec so that we can use it in LuaTeX.
>
> I don't really understand... do you mean that you already have a  
> luafontspec? What I meant was:
>
> if you have LinLibertine_Re-4.4.1.otf and LinLibertine_Bd-4.1.0.otf  
> (well, let's forget the version numbers...), installed somewhere, there  
> must be a mechanism that says
>
> "for the LinLibertine font, the regular variant is called  
> LinLibertine_Re.otf and the bold variant is called LinLibertine_Bd.otf"
>
> A kind of global fd file... Is this what you're working on?

IMHO, a better way is to build a font database by scanning system font
directories and querying each font for its name and style, style names
are usually standardised; regular, medium, bold, italic, oblique etc...
As the font already contain such info, I see no reason to hardcode it.

Regards,
 Khaled


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090408/4d84843a/attachment.bin 

From taco at elvenkind.com  Wed Apr  8 20:56:52 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 08 Apr 2009 20:56:52 +0200
Subject: [luatex] luatex's pause
In-Reply-To: <897.1239175041@cl.cam.ac.uk>
References: <897.1239175041@cl.cam.ac.uk>
Message-ID: <49DCF374.8030209@elvenkind.com>

Robin Fairbairns wrote:
> Karl Berry <karl at freefriends.org> wrote:
> 
>>     The problem are the hyphenation patterns:
>>
>> Glad you knew the answer, Heiko.
> 
> i'm impressed, let alone pleased ;-)
> 
>> If you or anyone can propose a better (pdf)lualatex.ini for TL'09 (such
>> that existing documents still work, of course), that would be great.
>> This is lualatex.ini (minus comments):
> 
> it seems to me that we (the latex team) need to think about babel in
> this world.  if we're going to re-create the environment that users have
> become used to, we need to hack at \language (or perhaps just babel
> \selectlanguage, etc) so that they load patterns on first call of a
> language.  anyone know what context is doing for this?

Context does something like this:


  \def\selectlanguage#1%
    {\language=\directlua{tex.sprint(languages.enable("#1"))}}


where languages.enable is a lua function that checks a private
lua table for an entry with name "#1". If it is present, then
the associated language id number is returned straightaway.

Otherwise it allocates a language id, loads patterns, load exceptions,
sets up left- and righthyphenmin,  etc. all via the lua functions in
the "lang" table (offered by luatex), caches the language id in the
private table, and then returns it.

tex.sprint() prints the returned language id number back to the TeX
end, so that the \language primitive will be happy.

Btw, loading bare patterns via the lua function lang.patterns()
is a bit faster than via \patterns. The internal functions expect
C strings, so the tokenization has to be undone again immediately.

Best wishes,
Taco

From karl at freefriends.org  Thu Apr  9 01:01:23 2009
From: karl at freefriends.org (Karl Berry)
Date: Wed, 8 Apr 2009 18:01:23 -0500
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <e2p1a5xvo73j.dlg@nililand.de>
Message-ID: <200904082301.n38N1Nj21226@f7.net>

    In context there is a file call mtxrun.lua which can generate a list
    of fonts in the system folder. 

The ideal is to be able to specify a system font without having to
invoke anything beforehand.  That is what XeTeX supports, as I
understand it.

From khaledhosny at eglug.org  Thu Apr  9 06:03:11 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Thu, 9 Apr 2009 06:03:11 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <200904082301.n38N1Nj21226@f7.net>
References: <e2p1a5xvo73j.dlg@nililand.de> <200904082301.n38N1Nj21226@f7.net>
Message-ID: <20090409040311.GB18427@khaled-laptop>

On Wed, Apr 08, 2009 at 06:01:23PM -0500, Karl Berry wrote:
>     In context there is a file call mtxrun.lua which can generate a list
>     of fonts in the system folder. 
> 
> The ideal is to be able to specify a system font without having to
> invoke anything beforehand.  That is what XeTeX supports, as I
> understand it.

XeTeX uses fontconfig, which may not be available on all systems by
default, and needs to be linked with the binary etc. 
However, ConTeXt users don't usually invoke mxtrun scripts, they just
process the document with 'texexec' or 'context' scripts which takes
care of searching and caching fonts, we'd have some thing similar that
is invoked by otf package when loaded, may be it'd read fontconfig
configuration files for <dir> keywords, or simply hard code system font
directories (/usr/share/fonts and $HOME/.fonts on GNU/Linux).

Regards,
 Khaled


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090409/2bda8923/attachment-0001.bin 

From yuleopen at gmail.com  Thu Apr  9 06:48:32 2009
From: yuleopen at gmail.com (Yue Wang)
Date: Thu, 9 Apr 2009 12:48:32 +0800
Subject: [luatex] otf fonts (ligatures, cache, etc.)
In-Reply-To: <200904082301.n38N1Nj21226@f7.net>
References: <e2p1a5xvo73j.dlg@nililand.de> <200904082301.n38N1Nj21226@f7.net>
Message-ID: <68bfdc900904082148o4efe3cdds78bf3aaac86c4289@mail.gmail.com>

Hi, Karl:

On Thu, Apr 9, 2009 at 7:01 AM, Karl Berry <karl at freefriends.org> wrote:
> ? ?In context there is a file call mtxrun.lua which can generate a list
> ? ?of fonts in the system folder.
>
> The ideal is to be able to specify a system font without having to
> invoke anything beforehand. ?That is what XeTeX supports, as I
> understand it.
>

XeTeX treat fonts in texmf (through kpse) and system font directory
(through fontconfig) differently.
while in LuaTeX there are no such difference (all font names/file
locations/types are cached into a lua table, similar to kpse).

Yue Wang

From luatex at nililand.de  Thu Apr  9 09:48:55 2009
From: luatex at nililand.de (Ulrike Fischer)
Date: Thu, 9 Apr 2009 09:48:55 +0200
Subject: [luatex] otf fonts (ligatures, cache, etc.)
References: <e2p1a5xvo73j.dlg@nililand.de> <200904082301.n38N1Nj21226@f7.net>
Message-ID: <f9by983ik7ug$.dlg@nililand.de>

Am Wed, 8 Apr 2009 18:01:23 -0500 schrieb Karl Berry:

>     In context there is a file call mtxrun.lua which can generate a list
>     of fonts in the system folder. 
> 
> The ideal is to be able to specify a system font without having to
> invoke anything beforehand.  That is what XeTeX supports, as I
> understand it.

You should generate a font cache for XeTeX too, at least on miktex,
with fc-cache -f. It is possible that XeTeX can find some fonts
without this (it is certainly trying hard as one can see if one
makes a typo in the font name) but the cache speed up things. 

And after all there are other scripts that have to run after an
installation of something new (updmap, texhash, fc-cache). One more
isn't really a problem. 


-- 
Ulrike Fischer 


From oberdiek at uni-freiburg.de  Fri Apr 10 01:08:09 2009
From: oberdiek at uni-freiburg.de (Heiko Oberdiek)
Date: Fri, 10 Apr 2009 01:08:09 +0200
Subject: [luatex] ifluatex update
In-Reply-To: <49DC68A3.3000708@telecom-bretagne.eu>
References: <49DC68A3.3000708@telecom-bretagne.eu>
Message-ID: <20090409230809.GA10493@irwin.vpn.uni-freiburg.de>

On Wed, Apr 08, 2009 at 11:04:35AM +0200, Elie Roux wrote:

> I think ifluatex needs an update,

And others of my packages (ifpdf, ...)

> to test directlua instead of 
> luatexversion isn't it? Heiko can you do it please?

Checking the existence of \directlua is useless, because the user
don't know, how to call it, if \luatexversion isn't available.
Thus I must at least provide \luatexversion.
(tex.enableprimitives might fail, even if \luatexversion
had the meaning "undefined" before, see dev-luatex).

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>

From vafakh9 at gmail.com  Fri Apr 10 08:11:49 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Fri, 10 Apr 2009 16:11:49 +1000
Subject: [luatex] Vital RTL issues in LuaTeX
Message-ID: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>

With RTL and LuaTeX there are vital issues that is ignored currently:

- It is not true that everything that was LTR in RTL mode should be the
other way

e.g: if you have \pagedir TRT \bodydr TRT \pardir TRT \textdir TRT, then
everything will be RTL but there are issues:

1- In persian we read numbers from left to right (thirteen=13) but imagine
in the table of contents, if the direction of the document is RTL, then
instead 13 we get 31 which is read 'thirty one' in Persian.

2- There are things both in LTR and Persian (perhaps in RTL as well) that
luatex's direction change does not make any sense, for example \leftline,
\rightline, \raggedleft, \raggedright and etc. In both directions we want
for example \leftline put some text at the left and \rightline put some text
at the right hand side because that is what it should be but in LuaTeX in
RTL, \leftline stands for \rightline and \rightline stands for \leftline
which is nonesense.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090410/ea528339/attachment.html 

From taco at elvenkind.com  Fri Apr 10 08:14:21 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 10 Apr 2009 08:14:21 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
Message-ID: <49DEE3BD.2060909@elvenkind.com>

??? ?????
  wrote:
> With RTL and LuaTeX there are vital issues that is ignored currently:
> 

You really should say: With RTL and plain LuaTeX. This is a macro
package issue.

Best wishes,
Taco

From vafakh9 at gmail.com  Fri Apr 10 08:23:40 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Fri, 10 Apr 2009 16:23:40 +1000
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <49DEE3BD.2060909@elvenkind.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<49DEE3BD.2060909@elvenkind.com>
Message-ID: <ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>

>>
>>
> You really should say: With RTL and plain LuaTeX. This is a macro
> package issue.
>
>

Maybe that is true for number 2 but not true definitely for number 1.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090410/a98b7997/attachment.html 

From vafakh9 at gmail.com  Fri Apr 10 08:25:05 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Fri, 10 Apr 2009 16:25:05 +1000
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<49DEE3BD.2060909@elvenkind.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
Message-ID: <ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>

These are some fundemental things that should be done correctly. eTeX does
not have these issues.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090410/dd213f8a/attachment.html 

From taco at elvenkind.com  Fri Apr 10 08:24:08 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 10 Apr 2009 08:24:08 +0200
Subject: [luatex] ifluatex update
In-Reply-To: <20090409230809.GA10493@irwin.vpn.uni-freiburg.de>
References: <49DC68A3.3000708@telecom-bretagne.eu>
	<20090409230809.GA10493@irwin.vpn.uni-freiburg.de>
Message-ID: <49DEE608.90809@elvenkind.com>

Heiko Oberdiek wrote:
> (tex.enableprimitives might fail, even if \luatexversion
> had the meaning "undefined" before, see dev-luatex).

That was a bug. Will be fixed in the new beta, later today.

Best wishes,
Taco

From taco at elvenkind.com  Fri Apr 10 08:33:15 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 10 Apr 2009 08:33:15 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>	<49DEE3BD.2060909@elvenkind.com>	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>
Message-ID: <49DEE82B.2070902@elvenkind.com>

??? ????? wrote:
> These are some fundemental things that should be done correctly. eTeX does
> not have these issues.
> 

Can you please post an actual plain example that works in etex/pdftex
but not in aleph/luatex?

Best wishes,
Taco


From vafakh9 at gmail.com  Fri Apr 10 09:00:21 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Fri, 10 Apr 2009 17:00:21 +1000
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <49DEE82B.2070902@elvenkind.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<49DEE3BD.2060909@elvenkind.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>
	<49DEE82B.2070902@elvenkind.com>
Message-ID: <ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>

This is a test file compiled in XeTeX. Let me say that if I do not use a
font in this test file in XeTeX, the number (21=twenty one) is printed
(12=twelve), but if I use a font, then this is done correctly as attached
pdf output while in LuaTeX if you declare a font or you dont, in both cases
you get the number in the wrong direction (get 12=twelve instead 21=twenty
one)

But \rightline in xetex is in the correct side but in luatex it is in the
wrong direction.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090410/2260a852/attachment-0001.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test-xetex.pdf
Type: application/pdf
Size: 15883 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090410/2260a852/attachment-0001.pdf 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test-xetex.tex
Type: application/x-tex
Size: 274 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090410/2260a852/attachment-0001.tex 

From taco at elvenkind.com  Fri Apr 10 09:14:56 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 10 Apr 2009 09:14:56 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>	<49DEE3BD.2060909@elvenkind.com>	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>	<ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>	<49DEE82B.2070902@elvenkind.com>
	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>
Message-ID: <49DEF1F0.303@elvenkind.com>

??? ????? wrote:
> This is a test file compiled in XeTeX. Let me say that if I do not use a
> font in this test file in XeTeX, the number (21=twenty one) is printed
> (12=twelve), but if I use a font, then this is done correctly as attached
> pdf output while in LuaTeX if you declare a font or you dont, in both cases
> you get the number in the wrong direction (get 12=twelve instead 21=twenty
> one)

Sorry, but this gives me almost nothing to work with.

First, this test file is not *etex*, but *xetex* input. Maybe you meant
that earlier also, but please be more precise about these things, as
etex and xetex  are quite different from eachother.

Second, the font is not OpenType, it is an AAT font.

Third, it looks like the output relies on  font- or icu processing.
I can't explain why the latin words are LR otherwise.

Best wishes,
Taco





From vafakh9 at gmail.com  Fri Apr 10 09:33:26 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Fri, 10 Apr 2009 17:33:26 +1000
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <49DEF1F0.303@elvenkind.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<49DEE3BD.2060909@elvenkind.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>
	<49DEE82B.2070902@elvenkind.com>
	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>
	<49DEF1F0.303@elvenkind.com>
Message-ID: <ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>

> Sorry, but this gives me almost nothing to work with.


1- in xetex \rightine stands for \rightline and \leftline stands for
\leftline in RTL and LTR while in luatex \rightline stands for \leftline and
\leftline stands for \rightline in RTL.

2- In XeTex, if we declare the font, numbers are written in the correct
direction but in luatex numbers are written in the wrong direction. (see
attached file in this email.)


>
>
> First, this test file is not *etex*, but *xetex* input. Maybe you meant
> that earlier also, but please be more precise about these things, as
> etex and xetex  are quite different from eachother.


Right, but still xetex uses etex.


>
>
> Second, the font is not OpenType, it is an AAT font.


XB Zar is open type, it is not AAT.


>
>
> Third, it looks like the output relies on  font- or icu processing.
> I can't explain why the latin words are LR otherwise.
>
>

Let's look at at this way,:

1-\rightline should stand for \rightline and \leftline should stand for
\leftline

2- numbers should be printed in the correct format
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090410/c5578a46/attachment-0001.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test-luatex.pdf
Type: application/pdf
Size: 19437 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090410/c5578a46/attachment-0001.pdf 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test-luatex.tex
Type: application/x-tex
Size: 482 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090410/c5578a46/attachment-0001.tex 

From vafakh9 at gmail.com  Fri Apr 10 09:35:46 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Fri, 10 Apr 2009 17:35:46 +1000
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<49DEE3BD.2060909@elvenkind.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>
	<49DEE82B.2070902@elvenkind.com>
	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>
	<49DEF1F0.303@elvenkind.com>
	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>
Message-ID: <ba1882870904100035l1ee97be4u5a12df50b89fec29@mail.gmail.com>

With these two test files, It is very clear to see the issues.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090410/3bf58c5d/attachment.html 

From vafakh9 at gmail.com  Fri Apr 10 09:38:11 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Fri, 10 Apr 2009 17:38:11 +1000
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <ba1882870904100035l1ee97be4u5a12df50b89fec29@mail.gmail.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<49DEE3BD.2060909@elvenkind.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>
	<49DEE82B.2070902@elvenkind.com>
	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>
	<49DEF1F0.303@elvenkind.com>
	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>
	<ba1882870904100035l1ee97be4u5a12df50b89fec29@mail.gmail.com>
Message-ID: <ba1882870904100038j3acefaffk5d979c3065a781dd@mail.gmail.com>

You can simply ignore number 1 but number 2 is something that requires some
thoughts.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090410/fc2b5eab/attachment.html 

From elie.roux at telecom-bretagne.eu  Fri Apr 10 09:40:55 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Fri, 10 Apr 2009 09:40:55 +0200
Subject: [luatex] ifluatex update
In-Reply-To: <20090409230809.GA10493@irwin.vpn.uni-freiburg.de>
References: <49DC68A3.3000708@telecom-bretagne.eu>
	<20090409230809.GA10493@irwin.vpn.uni-freiburg.de>
Message-ID: <49DEF807.3060309@telecom-bretagne.eu>

Heiko Oberdiek a ?crit :
> Checking the existence of \directlua is useless, because the user
> don't know, how to call it, if \luatexversion isn't available.
> Thus I must at least provide \luatexversion.
> (tex.enableprimitives might fail, even if \luatexversion
> had the meaning "undefined" before, see dev-luatex).

Ok, thank you!
-- 
Elie

From yannis.haralambous at telecom-bretagne.eu  Fri Apr 10 09:45:27 2009
From: yannis.haralambous at telecom-bretagne.eu (Yannis Haralambous)
Date: Fri, 10 Apr 2009 09:45:27 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
Message-ID: <EB3120A7-3C84-47D0-BFB1-10AA3AC360D3@telecom-bretagne.eu>

Le 10 avr. 09 ? 08:11, ??? ????? a ?crit :

> With RTL and LuaTeX there are vital issues that is ignored currently:
>
> - It is not true that everything that was LTR in RTL mode should be  
> the other way
>
> e.g: if you have \pagedir TRT \bodydr TRT \pardir TRT \textdir TRT,  
> then everything will be RTL but there are issues:
>
> 1- In persian we read numbers from left to right (thirteen=13) but  
> imagine in the table of contents, if the direction of the document  
> is RTL, then instead 13 we get 31 which is read 'thirty one' in  
> Persian.

that's the case in all RTL languages (Arabic, Hebrew, Syriac, etc.).  
In Omega we were processing numbers using OTPs.

> 2- There are things both in LTR and Persian (perhaps in RTL as well)  
> that luatex's direction change does not make any sense, for example  
> \leftline, \rightline, \raggedleft, \raggedright and etc. In both  
> directions we want for example \leftline put some text at the left  
> and \rightline put some text at the right hand side because that is  
> what it should be but in LuaTeX in RTL, \leftline stands for  
> \rightline and \rightline stands for \leftline which is nonesense.

and there is a third issue: images. Often you will use different  
images whether you are in RTL or LTR mode (imagine an arrow or a  
pointing hand, it will have to point in the opposite direction). For  
that you may need a test \ifRTL\includegraphics{...}\else 
\includegraphics{...}\fi


--
+ 
-----------------------------------------------------------------------+
| Yannis Haralambous, Ph.D.      yannis.haralambous at telecom- 
bretagne.eu |
| Directeur d'?tudes                      http://omega.enstb.org/ 
yannis |
|                                             Tel. +33  
(0)2.29.00.14.27 |
|                                             Fax  +33  
(0)2.29.00.12.82 |
| D?partement  
Informatique                                              |
| T?l?com  
Bretagne                                                      |
| Technop?le de Brest Iroise, CS 83818, 29238 Brest Cedex 3,  
France     |
| Coordonn?es Google-Earth : 48?21'31.57"N  
4?34'16.76"W                 |
+ 
-----------------------------------------------------------------------+
                             ...pour distinguer l'ext?rieur d'un  
aquarium,
                                            mieux vaut n'?tre pas  
poisson

                            ...the ball I threw while playing in the  
park
                                           has not yet reached the  
ground

               Es gab eine Zeit, wo ich nur ungern ?ber Schubert  
sprechen,
            nur N?chtens den B?umen und Sternen von ihm vorerz?hlen  
m?gen.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090410/e92f2bf0/attachment.html 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Yannis Haralambous.vcf
Type: text/directory
Size: 508 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090410/e92f2bf0/attachment.bin 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090410/e92f2bf0/attachment-0001.html 

From vafakh9 at gmail.com  Fri Apr 10 09:52:18 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Fri, 10 Apr 2009 17:52:18 +1000
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <EB3120A7-3C84-47D0-BFB1-10AA3AC360D3@telecom-bretagne.eu>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<EB3120A7-3C84-47D0-BFB1-10AA3AC360D3@telecom-bretagne.eu>
Message-ID: <ba1882870904100052g3a484700qbf896e6f1c9a4983@mail.gmail.com>

> and there is a third issue: images. Often you will use different images
> whether you are in RTL or LTR mode (imagine an arrow or a pointing hand, it
> will have to point in the opposite direction). For that you may need a test
> \ifRTL\includegraphics{...}\else\includegraphics{...}\fi
>
>
>
I think it makes sense to do the third issue in the macro level.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090410/398067c6/attachment-0001.html 

From schuster.wolfgang at googlemail.com  Fri Apr 10 10:06:49 2009
From: schuster.wolfgang at googlemail.com (Wolfgang Schuster)
Date: Fri, 10 Apr 2009 10:06:49 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <ba1882870904100052g3a484700qbf896e6f1c9a4983@mail.gmail.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<EB3120A7-3C84-47D0-BFB1-10AA3AC360D3@telecom-bretagne.eu>
	<ba1882870904100052g3a484700qbf896e6f1c9a4983@mail.gmail.com>
Message-ID: <02652DEC-B09F-4566-9D4A-21883335A8E7@gmail.com>


Am 10.04.2009 um 09:52 schrieb ??? ?????:

>
> and there is a third issue: images. Often you will use different  
> images whether you are in RTL or LTR mode (imagine an arrow or a  
> pointing hand, it will have to point in the opposite direction). For  
> that you may need a test \ifRTL\includegraphics{...}\else 
> \includegraphics{...}\fi
>
> I think it makes sense to do the third issue in the macro level.

or make the direction part of the figure name and write (pseudocode)

\includegraphic{...-\textdir}

Wolfgang



From taco at elvenkind.com  Fri Apr 10 10:30:33 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 10 Apr 2009 10:30:33 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>	<49DEE3BD.2060909@elvenkind.com>	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>	<ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>	<49DEE82B.2070902@elvenkind.com>	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>	<49DEF1F0.303@elvenkind.com>
	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>
Message-ID: <49DF03A9.9020203@elvenkind.com>



??? ????? wrote:
> Right, but still xetex uses etex.

But all the RTL work is done by the ICU, afaik, anyway, not that
important. You clearly meant xetex, not pdfetex.

> XB Zar is open type, it is not AAT.

sorry, I see that now (but in my defense, it seems to do a bit of
aat as well).

> Let's look at at this way,:
> 
> 1-\rightline should stand for \rightline and \leftline should stand for
> \leftline

\def\leftline#1{\hbox dir TLT to \hsize{#1\hss}}
\def\rightline#1{\hbox dir TLT to \hsize{\hss#1}}

> 2- numbers should be printed in the correct format

First, somebody has to come up with a 100% correct definition of
"correct format". For example, is "3.5" section five in chapter three,
or section three in chapter five?

Second, this should be coded in a lua node processing step or as an
otp (these still work).

Best wishes,
Taco






From vafakh9 at gmail.com  Fri Apr 10 10:43:31 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Fri, 10 Apr 2009 18:43:31 +1000
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <49DF03A9.9020203@elvenkind.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<49DEE3BD.2060909@elvenkind.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>
	<49DEE82B.2070902@elvenkind.com>
	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>
	<49DEF1F0.303@elvenkind.com>
	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>
	<49DF03A9.9020203@elvenkind.com>
Message-ID: <ba1882870904100143h395c6cb7kc22809eff7ea5919@mail.gmail.com>

>
> \def\leftline#1{\hbox dir TLT to \hsize{#1\hss}}
> \def\rightline#1{\hbox dir TLT to \hsize{\hss#1}}


Yes, this is not that important as I said. Can be done in the macro level.


>
>
> > 2- numbers should be printed in the correct format
>
> First, somebody has to come up with a 100% correct definition of
> "correct format". For example, is "3.5" section five in chapter three,
> or section three in chapter five?


In RTL we read numbers from left to right (30=thirty), it is like English.
It is unfortunately a misunderstanding that in RTL numbers shoud be read or
written from right to left. Now section concept is diffrent

in Persian at least "5.3" is section five in chapter three.

I do not understand after all what you mean by the ``100% correct definition
of
"correct format"''.


>
>
> Second, this should be coded in a lua node processing step or as an
> otp (these still work).
>
>

I do not think so. But you are the developer and you have got the final say.
I am at least happy that you have accepted the issue.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090410/4e336958/attachment.html 

From yannis.haralambous at telecom-bretagne.eu  Fri Apr 10 10:49:25 2009
From: yannis.haralambous at telecom-bretagne.eu (Yannis Haralambous)
Date: Fri, 10 Apr 2009 10:49:25 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <49DF03A9.9020203@elvenkind.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>	<49DEE3BD.2060909@elvenkind.com>	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>	<ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>	<49DEE82B.2070902@elvenkind.com>	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>	<49DEF1F0.303@elvenkind.com>
	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>
	<49DF03A9.9020203@elvenkind.com>
Message-ID: <F836BF02-0EDC-4B98-BBF9-7E45C97D5593@telecom-bretagne.eu>

Le 10 avr. 09 ? 10:30, Taco Hoekwater a ?crit :

> First, somebody has to come up with a 100% correct definition of
> "correct format".

in fact this is part of the bidi algorithm (numbers are directionally  
weak characters)


--
+ 
-----------------------------------------------------------------------+
| Yannis Haralambous, Ph.D.      yannis.haralambous at telecom- 
bretagne.eu |
| Directeur d'?tudes                      http://omega.enstb.org/ 
yannis |
|                                             Tel. +33  
(0)2.29.00.14.27 |
|                                             Fax  +33  
(0)2.29.00.12.82 |
| D?partement  
Informatique                                              |
| T?l?com  
Bretagne                                                      |
| Technop?le de Brest Iroise, CS 83818, 29238 Brest Cedex 3,  
France     |
| Coordonn?es Google-Earth : 48?21'31.57"N  
4?34'16.76"W                 |
+ 
-----------------------------------------------------------------------+
                             ...pour distinguer l'ext?rieur d'un  
aquarium,
                                            mieux vaut n'?tre pas  
poisson

                            ...the ball I threw while playing in the  
park
                                           has not yet reached the  
ground

               Es gab eine Zeit, wo ich nur ungern ?ber Schubert  
sprechen,
            nur N?chtens den B?umen und Sternen von ihm vorerz?hlen  
m?gen.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Yannis Haralambous.vcf
Type: text/directory
Size: 508 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090410/f9249a13/attachment.bin 
-------------- next part --------------



From taco at elvenkind.com  Fri Apr 10 11:17:59 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 10 Apr 2009 11:17:59 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <F836BF02-0EDC-4B98-BBF9-7E45C97D5593@telecom-bretagne.eu>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>	<49DEE3BD.2060909@elvenkind.com>	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>	<ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>	<49DEE82B.2070902@elvenkind.com>	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>	<49DEF1F0.303@elvenkind.com>	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>	<49DF03A9.9020203@elvenkind.com>
	<F836BF02-0EDC-4B98-BBF9-7E45C97D5593@telecom-bretagne.eu>
Message-ID: <49DF0EC7.9050308@elvenkind.com>



Yannis Haralambous wrote:
> Le 10 avr. 09 ? 10:30, Taco Hoekwater a ?crit :
> 
>> First, somebody has to come up with a 100% correct definition of
>> "correct format".
> 
> in fact this is part of the bidi algorithm (numbers are directionally
> weak characters)

Last I know is that Arthur was working on implementing the bidi
algorithm in lua code :)

Best wishes,
Taco

From taco at elvenkind.com  Fri Apr 10 11:26:13 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 10 Apr 2009 11:26:13 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <ba1882870904100143h395c6cb7kc22809eff7ea5919@mail.gmail.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>	<49DEE3BD.2060909@elvenkind.com>	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>	<ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>	<49DEE82B.2070902@elvenkind.com>	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>	<49DEF1F0.303@elvenkind.com>	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>	<49DF03A9.9020203@elvenkind.com>
	<ba1882870904100143h395c6cb7kc22809eff7ea5919@mail.gmail.com>
Message-ID: <49DF10B5.9060208@elvenkind.com>



??? ?????>
> I do not understand after all what you mean by the ``100% correct
> definition of "correct format"''.

Even assuming the unicode bidi algorithm, someone still has to
define how the algorithm interacts with tex control sequences
and font processing. For example, how does the algorithm interact
with right braces ?

>     Second, this should be coded in a lua node processing step or as an
>     otp (these still work).
> 
> I do not think so. But you are the developer and you have got the final
> say. I am at least happy that you have accepted the issue.

I am most certainly not going to implement anything in C until there
is a fully working version implemented in pure lua or as otp(s).

Best wishes,
Taco

From vafakh9 at gmail.com  Fri Apr 10 11:50:21 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Fri, 10 Apr 2009 19:50:21 +1000
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <49DF10B5.9060208@elvenkind.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>
	<49DEE82B.2070902@elvenkind.com>
	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>
	<49DEF1F0.303@elvenkind.com>
	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>
	<49DF03A9.9020203@elvenkind.com>
	<ba1882870904100143h395c6cb7kc22809eff7ea5919@mail.gmail.com>
	<49DF10B5.9060208@elvenkind.com>
Message-ID: <ba1882870904100250r68c9e189x32972990be8f0792@mail.gmail.com>

>
>
> Even assuming the unicode bidi algorithm, someone still has to
> define how the algorithm interacts with tex control sequences
> and font processing. For example, how does the algorithm interact
> with right braces ?


That is supposed to be the developer's job not the user's job.


>
>
>
> I am most certainly not going to implement anything in C until there
> is a fully working version implemented in pure lua or as otp(s).
>
>

>From the very beginning, I knew you would say because you were pretending
like there is no issue at all. But please in future say this at the very
beginning so people do not waste their time.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090410/99c7dd23/attachment.html 

From taco at elvenkind.com  Fri Apr 10 11:58:15 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 10 Apr 2009 11:58:15 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <ba1882870904100250r68c9e189x32972990be8f0792@mail.gmail.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>	<ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>	<49DEE82B.2070902@elvenkind.com>	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>	<49DEF1F0.303@elvenkind.com>	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>	<49DF03A9.9020203@elvenkind.com>	<ba1882870904100143h395c6cb7kc22809eff7ea5919@mail.gmail.com>	<49DF10B5.9060208@elvenkind.com>
	<ba1882870904100250r68c9e189x32972990be8f0792@mail.gmail.com>
Message-ID: <49DF1837.2060709@elvenkind.com>



??? ????? wrote:
> 
> That is supposed to be the developer's job not the user's job.

Ploink.


From Robin.Fairbairns at cl.cam.ac.uk  Fri Apr 10 12:08:53 2009
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Fri, 10 Apr 2009 11:08:53 +0100
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: Your message of Fri, 10 Apr 2009 19:50:21 +1000.
	<ba1882870904100250r68c9e189x32972990be8f0792@mail.gmail.
Message-ID: <28556.1239358133@cl.cam.ac.uk>

Reply-to: luatex at tug.org
X-Mailer: MH-E 8.0.3; nmh 1.3; GNU Emacs 22.3.1
--------
??? ????? <vafakh9 at gmail.com> wrote:

>   Even assuming the unicode bidi algorithm, someone still has to
>   define how the algorithm interacts with tex control sequences
>   and font processing. For example, how does the algorithm interact
>   with right braces ?
> 
> That is supposed to be the developer's job not the user's job.

except when the developer is designing a program for a user who has far
more experience in the subject.

who (who has no experience with persian) is supposed to guess that
section numbers in persian are l-r groups of digits arrange r-l (which
is what i _think_ you said)?

without your input, or the input of some other intelligent persian
reader, how is taco supposed to get this stuff right?

who it is that provides the "algorithm" isn't really germane here: if
development is working properly, the "user" provides enough information
that the "coder" can develop the algorithm with little trouble.

robin

who had quite enough of this sort of issue when working as a commercial
sw developer (including being told on one occasion that my program was
deficient because it failed to meet a requirement the customer had never
told me about).

From luigi.scarso at gmail.com  Fri Apr 10 12:19:38 2009
From: luigi.scarso at gmail.com (luigi scarso)
Date: Fri, 10 Apr 2009 12:19:38 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <28556.1239358133@cl.cam.ac.uk>
References: <28556.1239358133@cl.cam.ac.uk>
Message-ID: <fe8d59da0904100319j432728eatdcb156ce8c8230c@mail.gmail.com>

> who had quite enough of this sort of issue when working as a commercial
> sw developer (including being told on one occasion that my program was
> deficient because it failed to meet a requirement the customer had never
> told me about).
customer will *never* tell you everything,
because
1) they don't know
or if they know
2) they prefer to control you by the last requirement
"Oh, i'm sure that I told you about that . Don't you remember ?
Anyway when do you think to give me the correct program with this
final requirement ? "
Implicitly, he is saying that you have made a wrong program, so you
are "obliged to repair for free",
-- in reality rush to code to repair his error .




-- 
luigi

From luigi.scarso at gmail.com  Fri Apr 10 12:21:49 2009
From: luigi.scarso at gmail.com (luigi scarso)
Date: Fri, 10 Apr 2009 12:21:49 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <ba1882870904100250r68c9e189x32972990be8f0792@mail.gmail.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>
	<49DEE82B.2070902@elvenkind.com>
	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>
	<49DEF1F0.303@elvenkind.com>
	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>
	<49DF03A9.9020203@elvenkind.com>
	<ba1882870904100143h395c6cb7kc22809eff7ea5919@mail.gmail.com>
	<49DF10B5.9060208@elvenkind.com>
	<ba1882870904100250r68c9e189x32972990be8f0792@mail.gmail.com>
Message-ID: <fe8d59da0904100321pfd76e4ds7cb58e70a3d8a52a@mail.gmail.com>

>>
>>
>> I am most certainly not going to implement anything in C until there
>> is a fully working version implemented in pure lua or as otp(s).
>>
>
>
> From the very beginning, I knew you would say because you were pretending
> like there is no issue at all. But please in future say this at the very
> beginning so people do not waste their time.
hmm, I disagree.
Coding in C is hard: you must ensure portability, you must ensure
correctness, you must ensure best solution , you must...

But you have speed , speed, and speed .

So a fully working version implemented in pure lua  is really a good
point to start to coding in C .


-- 
luigi

From arthur.reutenauer at normalesup.org  Fri Apr 10 12:27:16 2009
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Fri, 10 Apr 2009 12:27:16 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <49DF0EC7.9050308@elvenkind.com>
References: <49DEE3BD.2060909@elvenkind.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>
	<49DEE82B.2070902@elvenkind.com>
	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>
	<49DEF1F0.303@elvenkind.com>
	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>
	<49DF03A9.9020203@elvenkind.com>
	<F836BF02-0EDC-4B98-BBF9-7E45C97D5593@telecom-bretagne.eu>
	<49DF0EC7.9050308@elvenkind.com>
Message-ID: <20090410102716.GB8298@phare.normalesup.org>

> Last I know is that Arthur was working on implementing the bidi
> algorithm in lua code :)

  I never got very far in that part :-)  But clearly, it makes little
sense to discuss details of individual macros before we start tackling
the complete design.

	Arthur

From taco at elvenkind.com  Fri Apr 10 12:49:38 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 10 Apr 2009 12:49:38 +0200
Subject: [luatex] luatex beta 0.38.0
Message-ID: <49DF2442.306@elvenkind.com>

Hi,

I have just uploaded luatex 0.38.0.

This is a beta in the process towards 0.40.0, the version that
will be included in texlive 2009. This beta will be shortlived,
the plan is to release the next (hopefully last) intermediate
beta within a week.

What's new:

* tex.enableprimitives() had a bug were previously defined (but
  currently undefined) control sequences prevented the creation
  of the new csname.

* The special calling format callback.register('name', false)
  not only disables the callback, but also the builtin code it
  is supposed to replace.

* Empty \localleftbox and \localrightbox -es are now suppressed.

* Support for <f>.MathConstants.SubscriptShiftDownWithSuperscript
  was added, to solve the lack of "sub2" in OpenType math.

* Luatex now supports horizontal super- and subscript placement
  corrections via the OpenType MATH mathkern table. See the
  manual for details.

* node.write() no longer copies its argument node list before
  appending it.

* There are six new primitives that are verbose forms
  of one and two byte special tokens:
  \Usuperscript \Usubscript
  \Ustartmath \Ustopmath
  \Ustartdisplaymath \Ustopdisplaymath

* The attribute node leaks in math mode and alignmetns have been
  fixed.

* The 11 simple math noads are now combined into a single "noad"
  node type.

* Static linking against libstdc++ is working once again.

* There is a small fix in the keyword scanner to solve the
  problem of 'Runaway ... while scanning ???' that could happen
  for some primitives.

* Lua now also has the "architecture independent bytecode"
  patch applied.

* Lua is updated to version 5.1.4 with coco patches 1.1.5, and
  lpeg is now 0.9.

* Some TRT/TLT backend bugs are fixed.

* Various manual updates.



The archives (now including source again) can be downloaded from
supelec as usual:

        http://foundry.supelec.fr/projects/luatex/

You could also check out the sources via anonymous svn:

  svn co svn://scm.foundry.supelec.fr/svn/luatex/tags/beta-0.38.0

Bugs and feature requests can be added to the issue tracker at

       http://tracker.luatex.org

Have fun,
Taco




From khaledhosny at eglug.org  Fri Apr 10 13:12:09 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 10 Apr 2009 13:12:09 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
Message-ID: <20090410111209.GA7935@khaled-laptop>

On Fri, Apr 10, 2009 at 04:11:49PM +1000, ??? ????? wrote:
> With RTL and LuaTeX there are vital issues that is ignored currently:
> 
> - It is not true that everything that was LTR in RTL mode should be the other
> way
> 
> e.g: if you have \pagedir TRT \bodydr TRT \pardir TRT \textdir TRT, then
> everything will be RTL but there are issues:
> 
> 1- In persian we read numbers from left to right (thirteen=13) but imagine in
> the table of contents, if the direction of the document is RTL, then instead 13
> we get 31 which is read 'thirty one' in Persian.

This has to be handled at a higher level, the engine don't know about
the directionality of individual characters, so you need to put numbers
inside {\textdir TRT } or write lua code that applies bidirectional
algorithm at node level.

> 2- There are things both in LTR and Persian (perhaps in RTL as well) that
> luatex's direction change does not make any sense, for example \leftline, \
> rightline, \raggedleft, \raggedright and etc. In both directions we want for
> example \leftline put some text at the left and \rightline put some text at the
> right hand side because that is what it should be but in LuaTeX in RTL, \
> leftline stands for \rightline and \rightline stands for \leftline which is
> nonesense.

Personally, I think this is desirable, so that macros and styles written
with LTR in mind, get mirrored in RTL, otherwise we will need to patch
every single document style for Arabic, like with TeX--XeT as used in
pdfTeX and XeTeX. However, you can swap the definitions at macro level
if you want to.

Regards,
 Khaled


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090410/3cd52553/attachment.bin 

From khaledhosny at eglug.org  Fri Apr 10 13:16:16 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 10 Apr 2009 13:16:16 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <49DEF1F0.303@elvenkind.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<49DEE3BD.2060909@elvenkind.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>
	<49DEE82B.2070902@elvenkind.com>
	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>
	<49DEF1F0.303@elvenkind.com>
Message-ID: <20090410111616.GB7935@khaled-laptop>

On Fri, Apr 10, 2009 at 09:14:56AM +0200, Taco Hoekwater wrote:
> ??? ????? wrote:
>> This is a test file compiled in XeTeX. Let me say that if I do not use a
>> font in this test file in XeTeX, the number (21=twenty one) is printed
>> (12=twelve), but if I use a font, then this is done correctly as attached
>> pdf output while in LuaTeX if you declare a font or you dont, in both cases
>> you get the number in the wrong direction (get 12=twelve instead 21=twenty
>> one)
>
> Sorry, but this gives me almost nothing to work with.
>
> First, this test file is not *etex*, but *xetex* input. Maybe you meant
> that earlier also, but please be more precise about these things, as
> etex and xetex  are quite different from eachother.
>
> Second, the font is not OpenType, it is an AAT font.
>
> Third, it looks like the output relies on  font- or icu processing.
> I can't explain why the latin words are LR otherwise.

Basically, in XeTeX, individual words are processed by ICU which applies
bidi algorithm on it, but the whole line is controlled by TeX, that why
latin and numbers are always LR.

Regards,
 Khaled


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090410/0ed84db0/attachment.bin 

From vafakh9 at gmail.com  Fri Apr 10 13:19:25 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Fri, 10 Apr 2009 21:19:25 +1000
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <20090410111209.GA7935@khaled-laptop>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<20090410111209.GA7935@khaled-laptop>
Message-ID: <ba1882870904100419w5fccc757o3595dc7871c62302@mail.gmail.com>

>
>
> This has to be handled at a higher level, the engine don't know about
> the directionality of individual characters, so you need to put numbers
> inside {\textdir TRT } or write lua code that applies bidirectional
> algorithm at node level.
>
>

No, it should be treated correctly by defualt.


>
>
> Personally, I think this is desirable, so that macros and styles written
> with LTR in mind, get mirrored in RTL, otherwise we will need to patch
> every single document style for Arabic, like with TeX--XeT as used in
> pdfTeX and XeTeX. However, you can swap the definitions at macro level
> if you want to.
>
>
wrong.

with current condition I would say XeTeX>LuaTeX
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090410/38931f91/attachment.html 

From khaledhosny at eglug.org  Fri Apr 10 13:26:58 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 10 Apr 2009 13:26:58 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <fe8d59da0904100321pfd76e4ds7cb58e70a3d8a52a@mail.gmail.com>
References: <ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>
	<49DEE82B.2070902@elvenkind.com>
	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>
	<49DEF1F0.303@elvenkind.com>
	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>
	<49DF03A9.9020203@elvenkind.com>
	<ba1882870904100143h395c6cb7kc22809eff7ea5919@mail.gmail.com>
	<49DF10B5.9060208@elvenkind.com>
	<ba1882870904100250r68c9e189x32972990be8f0792@mail.gmail.com>
	<fe8d59da0904100321pfd76e4ds7cb58e70a3d8a52a@mail.gmail.com>
Message-ID: <20090410112658.GC7935@khaled-laptop>

On Fri, Apr 10, 2009 at 12:21:49PM +0200, luigi scarso wrote:
> >>
> >>
> >> I am most certainly not going to implement anything in C until there
> >> is a fully working version implemented in pure lua or as otp(s).
> >>
> >
> >
> > From the very beginning, I knew you would say because you were pretending
> > like there is no issue at all. But please in future say this at the very
> > beginning so people do not waste their time.
> hmm, I disagree.
> Coding in C is hard: you must ensure portability, you must ensure
> correctness, you must ensure best solution , you must...
> 
> But you have speed , speed, and speed .
> 
> So a fully working version implemented in pure lua  is really a good
> point to start to coding in C .

I, personally, don't think we need to code any thing at the engine
level, this just make things more complex and less flexible, lets take
the example Taco pointed out, if we applied bidi algorithm on 3.5
(chapter 3, section 5) it'll stay 3.5 regardless of text direction,
however it should be 5.3 in RTL, and some people might disagree and say
it should be 3.5 in all cases. If BiDi was hard coded in th engine, it'll
just make things more complex, and one will need to put a Unicode 'right
to left mark' before the dot. The same can be said for numbered lists
etc.

Regards,
 Khaled

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090410/fedc9db8/attachment-0001.bin 

From yannis.haralambous at telecom-bretagne.eu  Fri Apr 10 13:27:57 2009
From: yannis.haralambous at telecom-bretagne.eu (Yannis Haralambous)
Date: Fri, 10 Apr 2009 13:27:57 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <20090410111209.GA7935@khaled-laptop>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<20090410111209.GA7935@khaled-laptop>
Message-ID: <EAC3AE5B-CFD6-4507-975C-24ADCE53A333@telecom-bretagne.eu>

Le 10 avr. 09 ? 13:12, Khaled Hosny a ?crit :

> This has to be handled at a higher level, the engine don't know about
> the directionality of individual characters, so you need to put  
> numbers
> inside {\textdir TRT } or write lua code that applies bidirectional
> algorithm at node level.


The engine knows about the directionality of each character since it  
is a Unicode property on the character level, that's the whole idea of  
the bidi algorithm.


From vafakh9 at gmail.com  Fri Apr 10 13:29:40 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Fri, 10 Apr 2009 21:29:40 +1000
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <20090410112658.GC7935@khaled-laptop>
References: <ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>
	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>
	<49DEF1F0.303@elvenkind.com>
	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>
	<49DF03A9.9020203@elvenkind.com>
	<ba1882870904100143h395c6cb7kc22809eff7ea5919@mail.gmail.com>
	<49DF10B5.9060208@elvenkind.com>
	<ba1882870904100250r68c9e189x32972990be8f0792@mail.gmail.com>
	<fe8d59da0904100321pfd76e4ds7cb58e70a3d8a52a@mail.gmail.com>
	<20090410112658.GC7935@khaled-laptop>
Message-ID: <ba1882870904100429k5e622c4bo14065c7f8f383244@mail.gmail.com>

>
> I, personally, don't think we need to code any thing at the engine
> level, this just make things more complex and less flexible, lets take
> the example Taco pointed out, if we applied bidi algorithm on 3.5
> (chapter 3, section 5) it'll stay 3.5 regardless of text direction,
> however it should be 5.3 in RTL, and some people might disagree and say
> it should be 3.5 in all cases. If BiDi was hard coded in th engine, it'll
> just make things more complex, and one will need to put a Unicode 'right
> to left mark' before the dot. The same can be said for numbered lists
> etc.
>
>

You picked up the very wrong example. That is all I can say.  No, absolutely
the same can not be said about numbers and etc.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090410/d8a85cb7/attachment.html 

From khaledhosny at eglug.org  Fri Apr 10 13:33:45 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 10 Apr 2009 13:33:45 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <49DF0EC7.9050308@elvenkind.com>
References: <49DEE3BD.2060909@elvenkind.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>
	<49DEE82B.2070902@elvenkind.com>
	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>
	<49DEF1F0.303@elvenkind.com>
	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>
	<49DF03A9.9020203@elvenkind.com>
	<F836BF02-0EDC-4B98-BBF9-7E45C97D5593@telecom-bretagne.eu>
	<49DF0EC7.9050308@elvenkind.com>
Message-ID: <20090410113345.GD7935@khaled-laptop>

On Fri, Apr 10, 2009 at 11:17:59AM +0200, Taco Hoekwater wrote:
> 
> 
> Yannis Haralambous wrote:
> > Le 10 avr. 09 ? 10:30, Taco Hoekwater a ?crit :
> > 
> >> First, somebody has to come up with a 100% correct definition of
> >> "correct format".
> > 
> > in fact this is part of the bidi algorithm (numbers are directionally
> > weak characters)
> 
> Last I know is that Arthur was working on implementing the bidi
> algorithm in lua code :)

Well, Hans has some code (in typo-mir.{tex,lua}), it does work but not
complete, might want to take that code and complete it, or of course
write a different implementation.

Currently, I'm using some python code, adapted from another project, as
an external OCP, it works for simple cases but don't handle explicit
BiDi marks and so, and is slow like hell. If any one interested I can
post it some where.

Regards,
 Khaled


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090410/386eaebb/attachment.bin 

From yharalambous at me.com  Fri Apr 10 13:41:08 2009
From: yharalambous at me.com (Yannis Haralambous)
Date: Fri, 10 Apr 2009 13:41:08 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <ba1882870904100429k5e622c4bo14065c7f8f383244@mail.gmail.com>
References: <ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>
	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>
	<49DEF1F0.303@elvenkind.com>
	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>
	<49DF03A9.9020203@elvenkind.com>
	<ba1882870904100143h395c6cb7kc22809eff7ea5919@mail.gmail.com>
	<49DF10B5.9060208@elvenkind.com>
	<ba1882870904100250r68c9e189x32972990be8f0792@mail.gmail.com>
	<fe8d59da0904100321pfd76e4ds7cb58e70a3d8a52a@mail.gmail.com>
	<20090410112658.GC7935@khaled-laptop>
	<ba1882870904100429k5e622c4bo14065c7f8f383244@mail.gmail.com>
Message-ID: <06D23B73-CDF4-440A-8ED9-D0C06113BD91@me.com>

Le 10 avr. 09 ? 13:29, ??? ????? a ?crit :

>
>
> I, personally, don't think we need to code any thing at the engine
> level, this just make things more complex and less flexible, lets take
> the example Taco pointed out, if we applied bidi algorithm on 3.5
> (chapter 3, section 5) it'll stay 3.5 regardless of text direction,
> however it should be 5.3 in RTL, and some people might disagree and  
> say
> it should be 3.5 in all cases. If BiDi was hard coded in th engine,  
> it'll
> just make things more complex, and one will need to put a Unicode  
> 'right
> to left mark' before the dot. The same can be said for numbered lists
> etc.
>
>
>
> You picked up the very wrong example. That is all I can say.  No,  
> absolutely the same can not be said about numbers and etc.

Bidi algorithm is certainly not perfect but it handles most cases  
correctly and it gives you the possibility to force a given  
directional behaviour, if needed.

The BIG advantage of the bidi algorithm is that it is a standard.  
Every piece of software will represent the same Unicode string in the  
same way. For example, if you keyboard your text using a bidi- 
compatible text editor, then you will get the same output as what  
you'll see on your screen. And once you get used to the behaviour of  
text with respect to the five bidi special characters, then you can  
keyboard RTL languages in the same way everywhere. That's an  
improvement to previous input methods.

I'm convinced that it is a good thing to implement bidi, *but* it may  
not be trivial since bidi needs information coming from higher-level  
protocols about the main direction in the context of the document. For  
example, in the case of XHTML you have a dir attribute. Here is the  
correponding text:

HL1.
Override P3, and set the paragraph embedding level explicitly.

A higher-level protocol may set the paragraph level explicitly and  
ignore P3. This can be done on the basis of the context, such as on a  
table cell, paragraph, document, or system level.
HL2.	Override W2, and set EN or AN explicitly.
A higher-level process may reset characters of type EN to AN, or vice  
versa, and ignore W2. For example, style sheet or markup information  
can be used within a span of text to override the setting of EN text  
to be always be AN, or vice versa.
HL3.	Emulate directional overrides or embedding codes.
A higher-level protocol can impose a directional override or embedding  
on a segment of structured text. The behavior must always be defined  
by reference to what would happen if the equivalent explicit codes as  
defined in the algorithm were inserted into the text. For example, a  
style sheet or markup can set the embedding level on a span of text.
HL4.	Apply the Bidirectional Algorithm to segments.
The Bidirectional Algorithm can be applied independently to one or  
more segments of structured text. For example, when displaying a  
document consisting of textual data and visible markup in an editor, a  
higher-level process can handle syntactic elements in the markup  
separately from the textual data.
HL5.	Provide artificial context.
Text can be processed by the Bidirectional Algorithm as if it were  
preceded by a character of a given type and/or followed by a character  
of a given type. This allows a piece of text that is extracted from a  
longer sequence of text to behave as it did in the larger context.
HL6.	Additional mirroring.
Characters with a resolved directionality of R that do not have the  
Bidi_Mirrored property can also be depicted by a mirrored glyph in  
specialized contexts. Such contexts include, but are not limited to,  
historic scripts and associated punctuation, private-use characters,  
and characters in mathematical expressions. (See Section 6,Mirroring.)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090410/8064dab7/attachment-0001.html 

From khaledhosny at eglug.org  Fri Apr 10 13:51:32 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 10 Apr 2009 13:51:32 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <EAC3AE5B-CFD6-4507-975C-24ADCE53A333@telecom-bretagne.eu>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<20090410111209.GA7935@khaled-laptop>
	<EAC3AE5B-CFD6-4507-975C-24ADCE53A333@telecom-bretagne.eu>
Message-ID: <20090410115132.GA10406@khaled-laptop>

On Fri, Apr 10, 2009 at 01:27:57PM +0200, Yannis Haralambous wrote:
> Le 10 avr. 09 ? 13:12, Khaled Hosny a ?crit :
>
>> This has to be handled at a higher level, the engine don't know about
>> the directionality of individual characters, so you need to put  
>> numbers
>> inside {\textdir TRT } or write lua code that applies bidirectional
>> algorithm at node level.
>
>
> The engine knows about the directionality of each character since it is a 
> Unicode property on the character level, that's the whole idea of the 
> bidi algorithm.

I meant the current engine, which don't even have a Unicode character
property database. If it had to implement bidi algorithm, then it had to
implement Indic reordering, Thai line breaking, etc. I believe that the
whole point of having and embedded scripting language and opening up the
engine was to allow extending the engine using lua code, and not to hack
the engine except for the bare minimum requirement.

Regads,
 Khaled


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090410/9f04061a/attachment.bin 

From khaledhosny at eglug.org  Fri Apr 10 14:06:38 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 10 Apr 2009 14:06:38 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <06D23B73-CDF4-440A-8ED9-D0C06113BD91@me.com>
References: <49DEF1F0.303@elvenkind.com>
	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>
	<49DF03A9.9020203@elvenkind.com>
	<ba1882870904100143h395c6cb7kc22809eff7ea5919@mail.gmail.com>
	<49DF10B5.9060208@elvenkind.com>
	<ba1882870904100250r68c9e189x32972990be8f0792@mail.gmail.com>
	<fe8d59da0904100321pfd76e4ds7cb58e70a3d8a52a@mail.gmail.com>
	<20090410112658.GC7935@khaled-laptop>
	<ba1882870904100429k5e622c4bo14065c7f8f383244@mail.gmail.com>
	<06D23B73-CDF4-440A-8ED9-D0C06113BD91@me.com>
Message-ID: <20090410120638.GA11310@khaled-laptop>

On Fri, Apr 10, 2009 at 01:41:08PM +0200, Yannis Haralambous wrote:
> Le 10 avr. 09 ? 13:29, ??? ????? a ?crit :
> 
> 
> 
> 
> 
>         I, personally, don't think we need to code any thing at the engine
>         level, this just make things more complex and less flexible, lets take
>         the example Taco pointed out, if we applied bidi algorithm on 3.5
>         (chapter 3, section 5) it'll stay 3.5 regardless of text direction,
>         however it should be 5.3 in RTL, and some people might disagree and say
>         it should be 3.5 in all cases. If BiDi was hard coded in th engine,
>         it'll
>         just make things more complex, and one will need to put a Unicode
>         'right
>         to left mark' before the dot. The same can be said for numbered lists
>         etc.
> 
> 
> 
> 
>     You picked up the very wrong example. That is all I can say.  No,
>     absolutely the same can not be said about numbers and etc.
> 
> 
> Bidi algorithm is certainly not perfect but it handles most cases correctly and
> it gives you the possibility to force a given directional behaviour, if needed.
> 
> The BIG advantage of the bidi algorithm is that it is a standard. Every piece
> of software will represent the same Unicode string in the same way. For
> example, if you keyboard your text using a bidi-compatible text editor, then
> you will get the same output as what you'll see on your screen. And once you
> get used to the behaviour of text with respect to the five bidi special
> characters, then you can keyboard RTL languages in the same way everywhere.
> That's an improvement to previous input methods.

I completely agree, I never said otherwise, it is where to implement
bidi algorithm in the engine, or using lua code? I say we use lua, this
means less complexity in the engine and more flexibility for the macro
writer, and then we can consider higher level protocols in a simpler
way.

Regards,
 Khaled


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090410/6641eb31/attachment.bin 

From vafakh9 at gmail.com  Fri Apr 10 14:08:46 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Fri, 10 Apr 2009 22:08:46 +1000
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <20090410120638.GA11310@khaled-laptop>
References: <49DEF1F0.303@elvenkind.com> <49DF03A9.9020203@elvenkind.com>
	<ba1882870904100143h395c6cb7kc22809eff7ea5919@mail.gmail.com>
	<49DF10B5.9060208@elvenkind.com>
	<ba1882870904100250r68c9e189x32972990be8f0792@mail.gmail.com>
	<fe8d59da0904100321pfd76e4ds7cb58e70a3d8a52a@mail.gmail.com>
	<20090410112658.GC7935@khaled-laptop>
	<ba1882870904100429k5e622c4bo14065c7f8f383244@mail.gmail.com>
	<06D23B73-CDF4-440A-8ED9-D0C06113BD91@me.com>
	<20090410120638.GA11310@khaled-laptop>
Message-ID: <ba1882870904100508q4433ee3br53cd9c1a98f79acd@mail.gmail.com>

>
>
> I completely agree, I never said otherwise, it is where to implement
> bidi algorithm in the engine, or using lua code? I say we use lua, this
> means less complexity in the engine and more flexibility for the macro
> writer, and then we can consider higher level protocols in a simpler
> way.
>


True in general but not for a very simple and fundemental and essential
thing like numbers.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090410/b21184bc/attachment.html 

From vafakh9 at gmail.com  Fri Apr 10 14:12:42 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Fri, 10 Apr 2009 22:12:42 +1000
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <06D23B73-CDF4-440A-8ED9-D0C06113BD91@me.com>
References: <ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>
	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>
	<49DF03A9.9020203@elvenkind.com>
	<ba1882870904100143h395c6cb7kc22809eff7ea5919@mail.gmail.com>
	<49DF10B5.9060208@elvenkind.com>
	<ba1882870904100250r68c9e189x32972990be8f0792@mail.gmail.com>
	<fe8d59da0904100321pfd76e4ds7cb58e70a3d8a52a@mail.gmail.com>
	<20090410112658.GC7935@khaled-laptop>
	<ba1882870904100429k5e622c4bo14065c7f8f383244@mail.gmail.com>
	<06D23B73-CDF4-440A-8ED9-D0C06113BD91@me.com>
Message-ID: <ba1882870904100512x4036b551j36d31cc462820bea@mail.gmail.com>

> Bidi algorithm is certainly not perfect but it handles most cases correctly
> and it gives you the possibility to force a given directional behaviour, if
> needed.
>
> The BIG advantage of the bidi algorithm is that it is a standard. Every
> piece of software will represent the same Unicode string in the same way.
> For example, if you keyboard your text using a bidi-compatible text editor,
> then you will get the same output as what you'll see on your screen. And
> once you get used to the behaviour of text with respect to the five bidi
> special characters, then you can keyboard RTL languages in the same way
> everywhere. That's an improvement to previous input methods.
>
> I'm convinced that it is a good thing to implement bidi, *but* it may not
> be trivial since bidi needs information coming from higher-level protocols
> about the main direction in the context of the document. For example, in the
> case of XHTML you have a dir attribute. Here is the correponding text:
>
>
>

Thanks for the information. I agree.

BTW: Donald Knuth has told me  a lot about you and your knowledge and I feel
very lucky to have you here on this list.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090410/bff442a6/attachment.html 

From =?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?=  Fri Apr 10 15:02:35 2009
From: =?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?= (=?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?=)
Date: Fri, 10 Apr 2009 07:02:35 -0600
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<49DEE3BD.2060909@elvenkind.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
Message-ID: <op.ur586ljtfkrasx@your-b27fb1c401>

On Fri, 10 Apr 2009 00:23:40 -0600, ??? ????? <vafakh9 at gmail.com> wrote:

>>>
>>>
>> You really should say: With RTL and plain LuaTeX. This is a macro
>> package issue.
>>
>>
>
> Maybe that is true for number 2 but not true definitely for number 1.

This is definitely a macro-package issue for number 1 also.

There is a difference of philosophy here: It is not the job of the engine  
to hardwire the bidi algorithm or any other implementation. This is the  
job of the macropackage. Then one has full control without having to  
fiddle with the engine.

Best wishes
Idris

-- 
Professor Idris Samawi Hamid, Editor-in-Chief
International Journal of Shi`i Studies
Department of Philosophy
Colorado State University
Fort Collins, CO 80523

From vafakh9 at gmail.com  Fri Apr 10 15:06:31 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Fri, 10 Apr 2009 23:06:31 +1000
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <op.ur586ljtfkrasx@your-b27fb1c401>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<49DEE3BD.2060909@elvenkind.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<op.ur586ljtfkrasx@your-b27fb1c401>
Message-ID: <ba1882870904100606j189db65bkab8f21ca7e373056@mail.gmail.com>

Life is not empty,
There is kindness, there is apple and there is faith.

One day will come,
and to a mendicant I will endow a jasmine.

-- VK



2009/4/10 Idris Samawi Hamid ????? ????? ???? <ishamid at colostate.edu>

> On Fri, 10 Apr 2009 00:23:40 -0600, ??? ????? <vafakh9 at gmail.com> wrote:
>
>
>>>>
>>>>  You really should say: With RTL and plain LuaTeX. This is a macro
>>> package issue.
>>>
>>>
>>>
>> Maybe that is true for number 2 but not true definitely for number 1.
>>
>
> This is definitely a macro-package issue for number 1 also.


I am afraid that is absolutely false.


>
>
> There is a difference of philosophy here: It is not the job of the engine
> to hardwire the bidi algorithm or any other implementation. This is the job
> of the macropackage. Then one has full control without having to fiddle with
> the engine.



Can you be more specific?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090410/93d6e866/attachment.html 

From =?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?=  Fri Apr 10 15:17:35 2009
From: =?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?= (=?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?=)
Date: Fri, 10 Apr 2009 07:17:35 -0600
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <ba1882870904100143h395c6cb7kc22809eff7ea5919@mail.gmail.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<49DEE3BD.2060909@elvenkind.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>
	<49DEE82B.2070902@elvenkind.com>
	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>
	<49DEF1F0.303@elvenkind.com>
	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>
	<49DF03A9.9020203@elvenkind.com>
	<ba1882870904100143h395c6cb7kc22809eff7ea5919@mail.gmail.com>
Message-ID: <op.ur59tqdefkrasx@your-b27fb1c401>

On Fri, 10 Apr 2009 02:43:31 -0600, ??? ????? <vafakh9 at gmail.com> wrote:

>  It is unfortunately a misunderstanding that in RTL numbers shoud be  
> read or written from right to left

This is not really accurate. Different arabic-script languages -- such as  
arabic and farsi -- read numerals ltr with some differences between them.  
But in classical arabic -- and I suspect classical persian as well --,  
numbers really _were_ read rtl. Where we say

One Hundred Twenty Three

in the old days they said

Three and Twenty and One Hundred.

Obviously this is consistent with rtl reading as well.

These matters are not so clear cut. Which is why, again, we have to  
distinguish sharply between engine and macro issues. Your concerns are --  
afaict -- macro implementation issues, not engine issues. And for these it  
is up to you or other programmers to use the lua extensions to write your  
own packages. If you don't like Arthur's or Hans' or someone else's  
implementation -- in lua -- of the issues that concern you, then that's  
not really a luatex issue per se. If it's LaTeX package, then talk to its  
author; if it's a ConTeXt issue, talk to Hans (and me if it involves  
Arabic-script).

It's very important to keep this distinction in mind, because we all have  
extremely limited and stretched-thin resources. So each of us needs to  
focus where it counts. I certainly don't want to see, eg, Taco bothered  
with non-engine issues at this point, because we have lots of other things  
to do.

:-)

Best wishes
Idris

-- 
Professor Idris Samawi Hamid, Editor-in-Chief
International Journal of Shi`i Studies
Department of Philosophy
Colorado State University
Fort Collins, CO 80523

From vafakh9 at gmail.com  Fri Apr 10 15:28:01 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Fri, 10 Apr 2009 23:28:01 +1000
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <op.ur59tqdefkrasx@your-b27fb1c401>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>
	<49DEE82B.2070902@elvenkind.com>
	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>
	<49DEF1F0.303@elvenkind.com>
	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>
	<49DF03A9.9020203@elvenkind.com>
	<ba1882870904100143h395c6cb7kc22809eff7ea5919@mail.gmail.com>
	<op.ur59tqdefkrasx@your-b27fb1c401>
Message-ID: <ba1882870904100628t1a2faac8pf1518eda0532649c@mail.gmail.com>

> This is not really accurate. Different arabic-script languages -- such as
> arabic and farsi -- read numerals ltr with some differences between them.
> But in classical arabic -- and I suspect classical persian as well --,
> numbers really _were_ read rtl. Where we say


not true for classical Persian. I am not sure about others. Keep in mind
Persian is not Arabic.


>
>
> One Hundred Twenty Three
>
> in the old days they said
>
> Three and Twenty and One Hundred.



We are talking about today.



>
> These matters are not so clear cut.


what do you mean?


> Which is why, again, we have to distinguish sharply between engine and
> macro issues. Your concerns are -- afaict -- macro implementation issues,
> not engine issues.



No my concern is that something simple as the numbers should be done
correctly by deafult without further attempt. If it was TeX, I would say it
is macropackage's job to fix these.


> And for these it is up to you or other programmers to use the lua
> extensions to write your own packages. If you don't like Arthur's or Hans'
> or someone else's implementation -- in lua -- of the issues that concern
> you, then that's not really a luatex issue per se. If it's LaTeX package,
> then talk to its author; if it's a ConTeXt issue, talk to Hans (and me if it
> involves Arabic-script).



LuaTeX's claims to be the engine that supports Arabic, Right?

My concers has not got anything to do anything with plain, LaTeX, ConTeXt
macro programming.


>
>
> It's very important to keep this distinction in mind, because we all have
> extremely limited and stretched-thin resources. So each of us needs to focus
> where it counts. I certainly don't want to see, eg, Taco bothered with
> non-engine issues at this point, because we have lots of other things to do.
>
>

I do not think he cares at all.

My point eventually is something as basic and elementary as numbers should
be done correctly by default and if you guys want to ignore the issue, that
is fine. But you can not change facts.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090410/71586840/attachment.html 

From =?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?=  Fri Apr 10 15:29:49 2009
From: =?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?= (=?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?=)
Date: Fri, 10 Apr 2009 07:29:49 -0600
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <ba1882870904100606j189db65bkab8f21ca7e373056@mail.gmail.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<49DEE3BD.2060909@elvenkind.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<op.ur586ljtfkrasx@your-b27fb1c401>
	<ba1882870904100606j189db65bkab8f21ca7e373056@mail.gmail.com>
Message-ID: <op.ur6afzupfkrasx@your-b27fb1c401>

On Fri, 10 Apr 2009 07:06:31 -0600, ??? ????? <vafakh9 at gmail.com> wrote:

>> This is definitely a macro-package issue for number 1 also.
>
> I am afraid that is absolutely false.

Ok, let me make this absolutely clear:

By definition, axiom, philosophy, decree from above, or whatever you want  
to call it:

Bidi implementation and the like is not, I repeat, NOT the job of the  
luatex engine qua engine. This principle derives from the axiomatic basis  
of the luatex philosophy and motivation. That is NOT going to change.

>> There is a difference of philosophy here: It is not the job of the  
>> engine
>> to hardwire the bidi algorithm or any other implementation. This is the  
>> job
>> of the macropackage. Then one has full control without having to fiddle  
>> with
>> the engine.

> Can you be more specific?

One example: If I (or Hans or Yannis or Knuth or Arthur or...) comes up  
with an alternative bidi algorithm, we will have flexibility and control  
without messing with the engine. XeTeX has a different philosophy, one  
that is perhaps more to your liking :-)

Best wishes
Idris

-- 
Professor Idris Samawi Hamid, Editor-in-Chief
International Journal of Shi`i Studies
Department of Philosophy
Colorado State University
Fort Collins, CO 80523

From vafakh9 at gmail.com  Fri Apr 10 15:36:32 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Fri, 10 Apr 2009 23:36:32 +1000
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <op.ur6afzupfkrasx@your-b27fb1c401>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<49DEE3BD.2060909@elvenkind.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<op.ur586ljtfkrasx@your-b27fb1c401>
	<ba1882870904100606j189db65bkab8f21ca7e373056@mail.gmail.com>
	<op.ur6afzupfkrasx@your-b27fb1c401>
Message-ID: <ba1882870904100636m28d3e67eta7006868d230e43d@mail.gmail.com>

> Ok, let me make this absolutely clear:
>
> By definition, axiom, philosophy, decree from above, or whatever you want
> to call it:
>
> Bidi implementation and the like is not, I repeat, NOT the job of the
> luatex engine qua engine. This principle derives from the axiomatic basis of
> the luatex philosophy and motivation. That is NOT going to change.


I would say it is your axiom. and that is fine. But you will certainly loose
heaps of users by that axiom.


>
>
> One example: If I (or Hans or Yannis or Knuth or Arthur or...) comes up
> with an alternative bidi algorithm, we will have flexibility and control
> without messing with the engine. XeTeX has a different philosophy, one that
> is perhaps more to your liking :-)
>


Can you relate this please to your previous email? I see no connection. Why
do you include Donald Knuth anyway?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090410/2febda86/attachment.html 

From khaledhosny at eglug.org  Fri Apr 10 15:41:23 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 10 Apr 2009 15:41:23 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
Message-ID: <20090410134123.GA19214@khaled-laptop>

Attached an OTP (scrapped from Omega's uni2cuni OTP) that will take care
of numbers direction, compile it with otp2ocp. See number.tex for an
example of its usage.

On Fri, Apr 10, 2009 at 04:11:49PM +1000, ??? ????? wrote:
> With RTL and LuaTeX there are vital issues that is ignored currently:
> 
> - It is not true that everything that was LTR in RTL mode should be the other
> way
> 
> e.g: if you have \pagedir TRT \bodydr TRT \pardir TRT \textdir TRT, then
> everything will be RTL but there are issues:
> 
> 1- In persian we read numbers from left to right (thirteen=13) but imagine in
> the table of contents, if the direction of the document is RTL, then instead 13
> we get 31 which is read 'thirty one' in Persian.
> 
> 2- There are things both in LTR and Persian (perhaps in RTL as well) that
> luatex's direction change does not make any sense, for example \leftline, \
> rightline, \raggedleft, \raggedright and etc. In both directions we want for
> example \leftline put some text at the left and \rightline put some text at the
> right hand side because that is what it should be but in LuaTeX in RTL, \
> leftline stands for \rightline and \rightline stands for \leftline which is
> nonesense.

-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: number.tex
Type: text/x-tex
Size: 194 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090410/86920fe6/attachment.bin 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: number.otp
Type: application/vnd.oasis.opendocument.presentation-template
Size: 1827 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090410/86920fe6/attachment-0001.bin 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: number.ocp
Type: application/octet-stream
Size: 1212 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090410/86920fe6/attachment.obj 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090410/86920fe6/attachment-0002.bin 

From vafakh9 at gmail.com  Fri Apr 10 15:41:54 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Fri, 10 Apr 2009 23:41:54 +1000
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <ba1882870904100636m28d3e67eta7006868d230e43d@mail.gmail.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<49DEE3BD.2060909@elvenkind.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<op.ur586ljtfkrasx@your-b27fb1c401>
	<ba1882870904100606j189db65bkab8f21ca7e373056@mail.gmail.com>
	<op.ur6afzupfkrasx@your-b27fb1c401>
	<ba1882870904100636m28d3e67eta7006868d230e43d@mail.gmail.com>
Message-ID: <ba1882870904100641m70dca52yd9d9c1bc1ea3fae8@mail.gmail.com>

It is better to end this discussuion. You talked about your axioms. You use
something that you like, I use something that works in reality.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090410/45f64ce7/attachment.html 

From elie.roux at telecom-bretagne.eu  Fri Apr 10 15:48:43 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Fri, 10 Apr 2009 15:48:43 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <ba1882870904100636m28d3e67eta7006868d230e43d@mail.gmail.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>	<49DEE3BD.2060909@elvenkind.com>	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>	<op.ur586ljtfkrasx@your-b27fb1c401>	<ba1882870904100606j189db65bkab8f21ca7e373056@mail.gmail.com>	<op.ur6afzupfkrasx@your-b27fb1c401>
	<ba1882870904100636m28d3e67eta7006868d230e43d@mail.gmail.com>
Message-ID: <49DF4E3B.7020002@telecom-bretagne.eu>

??? ????? a ?crit :
> I would say it is your axiom. and that is fine. But you will certainly 
> loose heaps of users by that axiom.

I disagree... You just have to tell users "if you want to write persian 
or arabic in LuaTeX, please use bidi.sty (or whatever)", users will 
include bidi.sty in their files, and everything will work OK... I don't 
see why users would get away... They will also use luaotfload.sty for 
otf load, luamplib.sty for metapost, etc.
-- 
Elie

From elie.roux at telecom-bretagne.eu  Fri Apr 10 15:50:58 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Fri, 10 Apr 2009 15:50:58 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <ba1882870904100641m70dca52yd9d9c1bc1ea3fae8@mail.gmail.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>	<49DEE3BD.2060909@elvenkind.com>	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>	<op.ur586ljtfkrasx@your-b27fb1c401>	<ba1882870904100606j189db65bkab8f21ca7e373056@mail.gmail.com>	<op.ur6afzupfkrasx@your-b27fb1c401>	<ba1882870904100636m28d3e67eta7006868d230e43d@mail.gmail.com>
	<ba1882870904100641m70dca52yd9d9c1bc1ea3fae8@mail.gmail.com>
Message-ID: <49DF4EC2.10401@telecom-bretagne.eu>

??? ????? a ?crit :
> It is better to end this discussuion.

It makes sense...

> You talked about your axioms. You use something that you like, I use 
> something that works in reality.

"You are wrong, and I am right" is a strange way to end a discussion... 
"we disagree" would more likely end it peacefully...
-- 
Elie

From =?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?=  Fri Apr 10 15:51:42 2009
From: =?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?= (=?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?=)
Date: Fri, 10 Apr 2009 07:51:42 -0600
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <ba1882870904100628t1a2faac8pf1518eda0532649c@mail.gmail.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>
	<49DEE82B.2070902@elvenkind.com>
	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>
	<49DEF1F0.303@elvenkind.com>
	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>
	<49DF03A9.9020203@elvenkind.com>
	<ba1882870904100143h395c6cb7kc22809eff7ea5919@mail.gmail.com>
	<op.ur59tqdefkrasx@your-b27fb1c401>
	<ba1882870904100628t1a2faac8pf1518eda0532649c@mail.gmail.com>
Message-ID: <op.ur6bggkffkrasx@your-b27fb1c401>

Dear Vafa,

On Fri, 10 Apr 2009 07:28:01 -0600, ??? ????? <vafakh9 at gmail.com> wrote:

>> This is not really accurate. Different arabic-script languages -- such  
>> as
>> arabic and farsi -- read numerals ltr with some differences between  
>> them.
>> But in classical arabic -- and I suspect classical persian as well --,
>> numbers really _were_ read rtl. Where we say
>
>
> not true for classical Persian. I am not sure about others. Keep in mind
> Persian is not Arabic.

now this is getting silly.

>> One Hundred Twenty Three
>>
>> in the old days they said
>>
>> Three and Twenty and One Hundred.

> We are talking about today.

even sillier...

>> These matters are not so clear cut.
>
>
> what do you mean?
>
>
>> Which is why, again, we have to distinguish sharply between engine and
>> macro issues. Your concerns are -- afaict -- macro implementation  
>> issues,
>> not engine issues.
>
>
>
> No my concern is that something simple as the numbers should be done
> correctly by deafult without further attempt.

FALSE. Because it's NOT a simple matter. Each language has its own rules,  
as you yourself pointed out!

> LuaTeX's claims to be the engine that supports Arabic, Right?

Let me make this clear one last time:

LuaTeX implements the minimum, necessary low-level hooks needed by the  
typesetting engine to handle Arabic-script. This is a necessary but not  
sufficient condition. The engine must be augmented by a macropackage that,  
presumably, will use the lua extensionality features present in luaTeX. So

Support for Arabic-script = luaTeX + macro-extensions.

Occam's Razor for LuaTeX: Anything that can conveniently be  
handled/configured at the macro-level -- using lua extensionality --, WILL  
be handled at the macropackage level. Period.

> My concers has not got anything to do anything with plain, LaTeX, ConTeXt
> macro programming.

maybe, but you don't seem to want to understand the luaTeX philosophy :-)

>> It's very important to keep this distinction in mind, because we all  
>> have
>> extremely limited and stretched-thin resources. So each of us needs to  
>> focus
>> where it counts. I certainly don't want to see, eg, Taco bothered with
>> non-engine issues at this point, because we have lots of other things  
>> to do.
>>
>>
>
> I do not think he cares at all.

Nonsense. You have not appreciated his points, or the luaTeX approach to  
things, that's all.

> My point eventually is something as basic and elementary as numbers  
> should
> be done correctly by default

by default in the macro extensions perhaps, but not the engine. That's  
simply not how we do things here.

> and if you guys want to ignore the issue, that
> is fine. But you can not change facts.

More silliness.

Not doing it YOUR way != Ignoring the issue

Once that is understood, we can move forward.

I'm sorry for sounding exasperated, but this long, time-consuming thread  
keeps going because this point is not getting across to you. Please try to  
understand this before hitting "reply".

My best wishes
Idris

-- 
Professor Idris Samawi Hamid, Editor-in-Chief
International Journal of Shi`i Studies
Department of Philosophy
Colorado State University
Fort Collins, CO 80523

From arthur.reutenauer at normalesup.org  Fri Apr 10 15:53:07 2009
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Fri, 10 Apr 2009 15:53:07 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <op.ur59tqdefkrasx@your-b27fb1c401>
References: <49DEE3BD.2060909@elvenkind.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<ba1882870904092325y25a3e166oc71e832f90ca4d5b@mail.gmail.com>
	<49DEE82B.2070902@elvenkind.com>
	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>
	<49DEF1F0.303@elvenkind.com>
	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>
	<49DF03A9.9020203@elvenkind.com>
	<ba1882870904100143h395c6cb7kc22809eff7ea5919@mail.gmail.com>
	<op.ur59tqdefkrasx@your-b27fb1c401>
Message-ID: <20090410135307.GA19888@phare.normalesup.org>

> in the old days they said
>
> Three and Twenty and One Hundred.

  You already mentioned that, I couldn't help thinking "little-endian" :-)

	Arthur

From vafakh9 at gmail.com  Fri Apr 10 16:02:27 2009
From: vafakh9 at gmail.com (=?UTF-8?B?2YjZgdinINiu2YTbjNmC24w=?=)
Date: Sat, 11 Apr 2009 00:02:27 +1000
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <op.ur6bggkffkrasx@your-b27fb1c401>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<49DEE82B.2070902@elvenkind.com>
	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>
	<49DEF1F0.303@elvenkind.com>
	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>
	<49DF03A9.9020203@elvenkind.com>
	<ba1882870904100143h395c6cb7kc22809eff7ea5919@mail.gmail.com>
	<op.ur59tqdefkrasx@your-b27fb1c401>
	<ba1882870904100628t1a2faac8pf1518eda0532649c@mail.gmail.com>
	<op.ur6bggkffkrasx@your-b27fb1c401>
Message-ID: <ba1882870904100702s74614642pb108f82083884dfe@mail.gmail.com>

Dear Idris

It is getting sily because I said `Persian is not Arabic'. I am sorry if you
do not like it but Persians are not proud at that they have lost their
religon and were forced to have a new religon.


>
>
>
> even sillier...
>

nonsense


>
>
>
>
>
>
> Not doing it YOUR way != Ignoring the issue


what do you mean my way? numbers in RTL are written and read from left to
right.


>
>
>
> I'm sorry for sounding exasperated, but this long, time-consuming thread
> keeps going because this point is not getting across to you. Please try to
> understand this before hitting "reply".
>
>
I am sorry as well. And please try to understand what I am saying before
hiting reply. I understand what you all have been saying but you do not seem
to understand what I said in the very beginning.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://tug.org/pipermail/luatex/attachments/20090411/c4e37101/attachment.html 

From elie.roux at telecom-bretagne.eu  Fri Apr 10 16:38:35 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Fri, 10 Apr 2009 16:38:35 +0200
Subject: [luatex] Vital RTL issues in LuaTeX
In-Reply-To: <ba1882870904100702s74614642pb108f82083884dfe@mail.gmail.com>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>	<49DEE82B.2070902@elvenkind.com>	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>	<49DEF1F0.303@elvenkind.com>	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>	<49DF03A9.9020203@elvenkind.com>	<ba1882870904100143h395c6cb7kc22809eff7ea5919@mail.gmail.com>	<op.ur59tqdefkrasx@your-b27fb1c401>	<ba1882870904100628t1a2faac8pf1518eda0532649c@mail.gmail.com>	<op.ur6bggkffkrasx@your-b27fb1c401>
	<ba1882870904100702s74614642pb108f82083884dfe@mail.gmail.com>
Message-ID: <49DF59EB.2050306@telecom-bretagne.eu>

??? ????? a ?crit :
> It is getting sily because I said `Persian is not Arabic'. I am sorry 
> if you do not like it but Persians are not proud at that they have 
> lost their  religon and were forced to have a new religon.

This list is about TeX, not about persians or religion... please calm 
down and send mails about TeX, or end the discussion as you proposed 
before (which is certainly not the worse option)...
-- 
Elie

From arthur.reutenauer at normalesup.org  Fri Apr 10 16:47:50 2009
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Fri, 10 Apr 2009 16:47:50 +0200
Subject: [luatex] Moderator intervention (was: Vital RTL issues in LuaTeX)
In-Reply-To: <ba1882870904100702s74614642pb108f82083884dfe@mail.gmail.com>
References: <49DEE82B.2070902@elvenkind.com>
	<ba1882870904100000y3827f5aeh414c61f7d3367339@mail.gmail.com>
	<49DEF1F0.303@elvenkind.com>
	<ba1882870904100033i75f2e03fmfcd0c3b99e463e52@mail.gmail.com>
	<49DF03A9.9020203@elvenkind.com>
	<ba1882870904100143h395c6cb7kc22809eff7ea5919@mail.gmail.com>
	<op.ur59tqdefkrasx@your-b27fb1c401>
	<ba1882870904100628t1a2faac8pf1518eda0532649c@mail.gmail.com>
	<op.ur6bggkffkrasx@your-b27fb1c401>
	<ba1882870904100702s74614642pb108f82083884dfe@mail.gmail.com>
Message-ID: <20090410144750.GA4366@phare.normalesup.org>

	Speaking as the list moderator:

  This discussion has to stop *now*.  It is getting nowhere in spite of
dozens of messages, and now personal attacks are being made.  In
addition to being discourteous, this is completely unsuitable on a
mailing-list devoted to highly technical matters.

  Vafa, this is not the first time you cause a huge thread on this
mailing-list, as well as others.  You might think that you understand
the other contributors' points of view perfectly and that you reply
appropriately, but your behaviour indicates otherwise.  Half a dozen
people have stated their opinion in direct reply to you, and have
supported it with arguments, and yet you keep repeating your original
statements that haven't convinced them.  Please try and understand why
so many different people from different places have replied to you in
this way, and why you often create those huge threads that don't achieve
anything.

  Other people, please refrain from replying to Vafa.

	Arthur

From yannis.haralambous at telecom-bretagne.eu  Fri Apr 10 18:17:40 2009
From: yannis.haralambous at telecom-bretagne.eu (Yannis Haralambous)
Date: Fri, 10 Apr 2009 18:17:40 +0200
Subject: [luatex] About the level of bidi implementation
In-Reply-To: <op.ur586ljtfkrasx@your-b27fb1c401>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<49DEE3BD.2060909@elvenkind.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<op.ur586ljtfkrasx@your-b27fb1c401>
Message-ID: <920057EC-14F2-4207-BA27-30E6F6D6D470@telecom-bretagne.eu>

Le 10 avr. 09 ? 15:02, Idris Samawi Hamid ????? ?????  
???? a ?crit :

> There is a difference of philosophy here: It is not the job of the  
> engine to hardwire the bidi algorithm or any other implementation.  
> This is the job of the macropackage. Then one has full control  
> without having to fiddle with the engine.

I do not agree. Bidi is something fundamental, just like contextual  
analysis. It should be treated on a low level.

**But** it should be deactivetable: by default bidi should be active,  
but the user should be able to deactivate it.

This will make the difference with XeTeX. XeTeX uses Uniscribe, which  
is a black box leaving no freedom whatsoever to the user. This is  
fine, except when we want to do something different. For example, for  
a very specific application (2D barcodes) I need Arabic typeset left- 
to-right. Under Windows it is impossible. Under luaTeX it should be  
possible. Another example: contextual analysis of Urdu is quite more  
complicated than the one of regular Arabic script, it is not possible  
in the presence of Uniscribe.

For reasons of efficiency, whatever is done by Uniscribe or Pango (for  
example, Indic reordering, Korean hangul composition, etc.) should be  
hardcoded into luatex (written in C, etc.) so that it happens very  
quickly. But one should be able to deactivate it using a primitive or  
something of the kind (otherwise we may as well use XeTeX...).

To reply to Idris: if you use a macropackage to do bidi, it's like  
adopting the ArabTeX philosophy: it's like using macros to do the most  
fundamental operations, and it's a pity.

cheers

Yannis
--
+ 
-----------------------------------------------------------------------+
| Yannis Haralambous, Ph.D.      yannis.haralambous at telecom- 
bretagne.eu |
| Directeur d'?tudes                      http://omega.enstb.org/ 
yannis |
|                                             Tel. +33  
(0)2.29.00.14.27 |
|                                             Fax  +33  
(0)2.29.00.12.82 |
| D?partement  
Informatique                                              |
| T?l?com  
Bretagne                                                      |
| Technop?le de Brest Iroise, CS 83818, 29238 Brest Cedex 3,  
France     |
| Coordonn?es Google-Earth : 48?21'31.57"N  
4?34'16.76"W                 |
+ 
-----------------------------------------------------------------------+
                             ...pour distinguer l'ext?rieur d'un  
aquarium,
                                            mieux vaut n'?tre pas  
poisson

                            ...the ball I threw while playing in the  
park
                                           has not yet reached the  
ground

               Es gab eine Zeit, wo ich nur ungern ?ber Schubert  
sprechen,
            nur N?chtens den B?umen und Sternen von ihm vorerz?hlen  
m?gen.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Yannis Haralambous.vcf
Type: text/directory
Size: 508 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090410/26e56264/attachment-0001.bin 
-------------- next part --------------



From =?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?=  Fri Apr 10 18:40:11 2009
From: =?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?= (=?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?=)
Date: Fri, 10 Apr 2009 10:40:11 -0600
Subject: [luatex] About the level of bidi implementation
In-Reply-To: <920057EC-14F2-4207-BA27-30E6F6D6D470@telecom-bretagne.eu>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<49DEE3BD.2060909@elvenkind.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<op.ur586ljtfkrasx@your-b27fb1c401>
	<920057EC-14F2-4207-BA27-30E6F6D6D470@telecom-bretagne.eu>
Message-ID: <op.ur6i89apfkrasx@your-b27fb1c401>

Hi Yannis,

On Fri, 10 Apr 2009 10:17:40 -0600, Yannis Haralambous  
<yannis.haralambous at telecom-bretagne.eu> wrote:

> Le 10 avr. 09 ? 15:02, Idris Samawi Hamid ????? ?????
> ???? a ?crit :
>
>> There is a difference of philosophy here: It is not the job of the
>> engine to hardwire the bidi algorithm or any other implementation.
>> This is the job of the macropackage. Then one has full control
>> without having to fiddle with the engine.
>
> I do not agree. Bidi is something fundamental, just like contextual
> analysis. It should be treated on a low level.

> **But** it should be deactivetable: by default bidi should be active,
> but the user should be able to deactivate it.
>
> This will make the difference with XeTeX. XeTeX uses Uniscribe, which
> is a black box leaving no freedom whatsoever to the user. This is
> fine, except when we want to do something different. For example, for
> a very specific application (2D barcodes) I need Arabic typeset left-
> to-right. Under Windows it is impossible. Under luaTeX it should be
> possible. Another example: contextual analysis of Urdu is quite more
> complicated than the one of regular Arabic script, it is not possible
> in the presence of Uniscribe.

do you mean nasta`liq?

[By the way -- and this is by no means directed at you :-) -- SIL and  
others have really confused things by talking about "the Urdu script". As  
you know so well, Urdu uses Arabic script; it just happens to prefer the  
nastaliq style to the naskh style.]

But maybe I misunderstand you: I get working nastaliq under uniscribe...  
am I missing something? [I'd be happy for us to start another thread on  
this topic]

> For reasons of efficiency, whatever is done by Uniscribe or Pango (for
> example, Indic reordering, Korean hangul composition, etc.) should be
> hardcoded into luatex (written in C, etc.) so that it happens very
> quickly. But one should be able to deactivate it using a primitive or
> something of the kind (otherwise we may as well use XeTeX...).
>
> To reply to Idris: if you use a macropackage to do bidi, it's like
> adopting the ArabTeX philosophy: it's like using macros to do the most
> fundamental operations, and it's a pity.

Ok, let's distinguish two types of macropackage:

1. the traditional TeX/LaTeX etc macropackage. I agree with most of what  
you said above in that case

2. lua extensionality. what lua provides is a way of extending the  
functionality of the engine without changing the engine. So bidi, opentype  
etc can be implemented as extensions of the engine without fiddling with  
the engine itself. The macropackage writers can, well, package those  
extensions as they see fit, and even change them, without bothering the  
main engine.

Of course, there are twilight zones: Where exactly do the boundaries  
between engine, lua extensionality of the engine, and macropackage lie? In  
the case of bidi my understanding is that it fits in the  
lua-extensionality-to-the-engine component. lua-extensionality is the  
perfect balance between hardwiring certain behavior and the purgatory of  
arabtex-style macrowriting. If you and I come up with improvements to the  
bidi algorithm, or need to make changes in places -- not a far-fetched  
possibility btw -- then the lua-extensionality is there, and no need to  
break all the work Taco and Hartmut have done lately to fix rtl bugs  
etc... Of course, if there is a real logical bug in the engine, that has  
to be fixed.

:-)

Best wishes
Idris

-- 
Professor Idris Samawi Hamid, Editor-in-Chief
International Journal of Shi`i Studies
Department of Philosophy
Colorado State University
Fort Collins, CO 80523

From =?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?=  Fri Apr 10 18:43:08 2009
From: =?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?= (=?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?=)
Date: Fri, 10 Apr 2009 10:43:08 -0600
Subject: [luatex] About the level of bidi implementation
In-Reply-To: <op.ur6i89apfkrasx@your-b27fb1c401>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<49DEE3BD.2060909@elvenkind.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<op.ur586ljtfkrasx@your-b27fb1c401>
	<920057EC-14F2-4207-BA27-30E6F6D6D470@telecom-bretagne.eu>
	<op.ur6i89apfkrasx@your-b27fb1c401>
Message-ID: <op.ur6jd61jfkrasx@your-b27fb1c401>

On Fri, 10 Apr 2009 10:40:11 -0600, Idris Samawi Hamid ????? ????? ????  
<ishamid at colostate.edu> wrote:

> In the case of bidi my understanding is that it fits in the  
> lua-extensionality-to-the-engine component.

I mean the unicode bidi algorithm of course

-- 
Professor Idris Samawi Hamid, Editor-in-Chief
International Journal of Shi`i Studies
Department of Philosophy
Colorado State University
Fort Collins, CO 80523

From yannis.haralambous at telecom-bretagne.eu  Fri Apr 10 22:39:58 2009
From: yannis.haralambous at telecom-bretagne.eu (Yannis Haralambous)
Date: Fri, 10 Apr 2009 22:39:58 +0200
Subject: [luatex] About the level of bidi implementation
In-Reply-To: <op.ur6i89apfkrasx@your-b27fb1c401>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<49DEE3BD.2060909@elvenkind.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<op.ur586ljtfkrasx@your-b27fb1c401>
	<920057EC-14F2-4207-BA27-30E6F6D6D470@telecom-bretagne.eu>
	<op.ur6i89apfkrasx@your-b27fb1c401>
Message-ID: <97245E8A-8901-4BB5-B232-AD1FE92923FE@telecom-bretagne.eu>

Le 10 avr. 09 ? 18:40, Idris Samawi Hamid ????? ?????  
???? a ?crit :

> do you mean nasta`liq?
>
> [By the way -- and this is by no means directed at you :-) -- SIL  
> and others have really confused things by talking about "the Urdu  
> script". As you know so well, Urdu uses Arabic script; it just  
> happens to prefer the nastaliq style to the naskh style.]

Technically speaking you have the "Monotype Urdu font" (which is not  
really Nastaliq, but it does follow Urdu contextual analysis).

Again technically speaking you have various "Nasta`liq fonts" using  
Arabic contextual analysis, in fact they are simplified Nasta`liq fonts.

> But maybe I misunderstand you: I get working nastaliq under  
> uniscribe... am I missing something? [I'd be happy for us to start  
> another thread on this topic]

As you can see in the illustration below (taken from my book) Urdu  
contextual analysis has 7 different forms: isolated (not seen in the  
figure), initial (6), medial-odd (5), medial-even (4), pre-pre-final  
(3), pre-final (2) and final (1). If I should continue then I would  
have 1-2-3-4-5-4-5-4-5-...-6. The sample uses Nafees Nasta`liq.

Well understood this kind of contextual analysis is not covered by  
Uniscribe so it has to be specially implemented.

cheers
-------------- next part --------------
A non-text attachment was scrubbed...
Name: screenshot_01.png
Type: image/png
Size: 14232 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090410/fd6b74f9/attachment-0001.png 
-------------- next part --------------

--
+
-----------------------------------------------------------------------+
| Yannis Haralambous, Ph.D.      yannis.haralambous at telecom- 
bretagne.eu |
| Directeur d'?tudes                      http://omega.enstb.org/ 
yannis |
|                                             Tel. +33  
(0)2.29.00.14.27 |
|                                             Fax  +33  
(0)2.29.00.12.82 |
| D?partement  
Informatique                                              |
| T?l?com  
Bretagne                                                      |
| Technop?le de Brest Iroise, CS 83818, 29238 Brest Cedex 3,  
France     |
| Coordonn?es Google-Earth : 48?21'31.57"N  
4?34'16.76"W                 |
+ 
-----------------------------------------------------------------------+
                             ...pour distinguer l'ext?rieur d'un  
aquarium,
                                            mieux vaut n'?tre pas  
poisson

                            ...the ball I threw while playing in the  
park
                                           has not yet reached the  
ground

               Es gab eine Zeit, wo ich nur ungern ?ber Schubert  
sprechen,
            nur N?chtens den B?umen und Sternen von ihm vorerz?hlen  
m?gen.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: Yannis Haralambous.vcf
Type: text/directory
Size: 508 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090410/fd6b74f9/attachment-0001.bin 
-------------- next part --------------



From khaledhosny at eglug.org  Fri Apr 10 23:22:59 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 10 Apr 2009 23:22:59 +0200
Subject: [luatex] About the level of bidi implementation
In-Reply-To: <97245E8A-8901-4BB5-B232-AD1FE92923FE@telecom-bretagne.eu>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<49DEE3BD.2060909@elvenkind.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<op.ur586ljtfkrasx@your-b27fb1c401>
	<920057EC-14F2-4207-BA27-30E6F6D6D470@telecom-bretagne.eu>
	<op.ur6i89apfkrasx@your-b27fb1c401>
	<97245E8A-8901-4BB5-B232-AD1FE92923FE@telecom-bretagne.eu>
Message-ID: <20090410212259.GA746@khaled-laptop>

On Fri, Apr 10, 2009 at 10:39:58PM +0200, Yannis Haralambous wrote:
> Le 10 avr. 09 ? 18:40, Idris Samawi Hamid ????? ????? ???? a ?crit :
>
>> do you mean nasta`liq?
>>
>> [By the way -- and this is by no means directed at you :-) -- SIL and 
>> others have really confused things by talking about "the Urdu script". 
>> As you know so well, Urdu uses Arabic script; it just happens to prefer 
>> the nastaliq style to the naskh style.]
>
> Technically speaking you have the "Monotype Urdu font" (which is not  
> really Nastaliq, but it does follow Urdu contextual analysis).
>
> Again technically speaking you have various "Nasta`liq fonts" using  
> Arabic contextual analysis, in fact they are simplified Nasta`liq fonts.
>
>> But maybe I misunderstand you: I get working nastaliq under  
>> uniscribe... am I missing something? [I'd be happy for us to start  
>> another thread on this topic]
>
> As you can see in the illustration below (taken from my book) Urdu  
> contextual analysis has 7 different forms: isolated (not seen in the  
> figure), initial (6), medial-odd (5), medial-even (4), pre-pre-final  
> (3), pre-final (2) and final (1). If I should continue then I would have 
> 1-2-3-4-5-4-5-4-5-...-6. The sample uses Nafees Nasta`liq.
>
> Well understood this kind of contextual analysis is not covered by  
> Uniscribe so it has to be specially implemented.

AFAIK, 'Nafees Nastaleeq'[1] is implemented as a pure OpenType font, it
does certainly work with Uniscribe (at its authors seem to test against
it), it does even work with ConTeXt's OpenType implementation, see the
attached PDF.

[1]http://www.crulp.org/software/localization/Fonts/nafeesNastaleeq.html

Regards,
 Khaled


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: nafees.pdf
Type: application/pdf
Size: 8120 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090410/2d577eb7/attachment.pdf 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090410/2d577eb7/attachment.bin 

From =?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?=  Fri Apr 10 23:23:51 2009
From: =?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?= (=?utf-8?B?SWRyaXMgU2FtYXdpIEhhbWlkINin2K/YsdmK2LMg2LPZhdin2YjZiiDYrQ==?=)
Date: Fri, 10 Apr 2009 15:23:51 -0600
Subject: [luatex] About the level of bidi implementation
In-Reply-To: <97245E8A-8901-4BB5-B232-AD1FE92923FE@telecom-bretagne.eu>
References: <ba1882870904092311y5790dbeke5d41a19c31268f0@mail.gmail.com>
	<49DEE3BD.2060909@elvenkind.com>
	<ba1882870904092323n1fee163ia1f6ff542c83cf3e@mail.gmail.com>
	<op.ur586ljtfkrasx@your-b27fb1c401>
	<920057EC-14F2-4207-BA27-30E6F6D6D470@telecom-bretagne.eu>
	<op.ur6i89apfkrasx@your-b27fb1c401>
	<97245E8A-8901-4BB5-B232-AD1FE92923FE@telecom-bretagne.eu>
Message-ID: <op.ur6wd1nsfkrasx@your-b27fb1c401>

On Fri, 10 Apr 2009 14:39:58 -0600, Yannis Haralambous  
<yannis.haralambous at telecom-bretagne.eu> wrote:

> Technically speaking you have the "Monotype Urdu font" (which is not
> really Nastaliq, but it does follow Urdu contextual analysis).
>
> Again technically speaking you have various "Nasta`liq fonts" using
> Arabic contextual analysis, in fact they are simplified Nasta`liq fonts.

I'm not sure if the distinction between Urdu and Nastaliq here is very  
useful, but more on that further on.

>> But maybe I misunderstand you: I get working nastaliq under
>> uniscribe... am I missing something? [I'd be happy for us to start
>> another thread on this topic]
>
> As you can see in the illustration below (taken from my book) Urdu
> contextual analysis has 7 different forms: isolated (not seen in the
> figure), initial (6), medial-odd (5), medial-even (4), pre-pre-final
> (3), pre-final (2) and final (1). If I should continue then I would
> have 1-2-3-4-5-4-5-4-5-...-6. The sample uses Nafees Nasta`liq.

This kind of contextual analysis is also used in sophisticated Naskh by  
the way, something which has rarely been implemented in typography as far  
as I know. [Thomas Milo does it, and
I'm working on it as well.]

> Well understood this kind of contextual analysis is not covered by
> Uniscribe so it has to be specially implemented.

Well, with reverse chaining substitution -- which you explain in your book  
as well :-) -- we can do it in OpenType on top of the traditional  
contextual analysis. I know because I've done it successfully ;-)

Which brings me back to my earlier point: Urdu is not a script category.  
The most sophisticated Nastaliq is still an Iranian art, and the style is  
used throughout the Arabic-script world. The variety of Nastaliq used for  
Urdu just happens to be well-suited for fast handwriting and book  
publishing [as you know, nearly all books/newspapers in urdu were  
handwritten till recently].

<discursus>
Note that Muslim Pakistan and traditional Muslim India is historically  
part of the Iranian cultural plateau. There are stll people alive who  
hearken to a time where Persian was the preferred medium of communication  
among the educated (The greatest literatur of Muslim India/Pakistan is  
Iqbal, who wrote his best work in Persian). The use of Nastaliq as the  
preferred style of Arabic script is an offshoot of Persian influence in  
that region. Calling it the "Urdu script" is simply not correct in my  
view. It is the style of Nastaliq used in Muslim Indo-Pakistan.

BTW: In Arab countries they call Nastaliq the "Farsi" script, even when  
using it themselves for Arabic. I also think this usage is incorrect. The  
name of the script is 'Nasta?l?q', invented by Mir Ali Sultan Tabrizi (d.  
1416), a Persian calligrapher. It has always been known by that name  
through modern times. It is used throughout the Muslim world, and the  
vicissitudes of modern nationalism and orientalism -- calling it the  
"Farsi" or "Urdu" script -- should not obscure its universality as a style  
of Arabic-script proper.
</discursus>

Thanks for the response, and

Best wishes
Idris

-- 
Professor Idris Samawi Hamid, Editor-in-Chief
International Journal of Shi`i Studies
Department of Philosophy
Colorado State University
Fort Collins, CO 80523

From taco at elvenkind.com  Wed Apr 15 23:22:09 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 15 Apr 2009 23:22:09 +0200
Subject: [luatex] luatex beta 0.39.0
Message-ID: <49E65001.6020404@elvenkind.com>

Hi,

I have just uploaded luatex 0.39.0.

This is the last beta before 0.40.0, and we consider it to be
feature complete now. The difference between 0.39.0 and 0.40.0
will be nothing more than a newer version of MPlib, improvements
to the manual, and (probably) a few bugfixes.

What's new:

* iniluatex will from now on start up with only the TeX82 primitives
   and \directlua, everything else has to be bootstrapped via
   tex.enableprimitives(). This change was planned for 0.40.0,
   but *now* is the time to test it.

* A bugfix for \primitive in various expandable contexts,
   and \primitive now generates an error message when the
   argument is not actually a primitive's name.

* There was a bug found in the math accent handling.

* Large math operators are now treated like extensible characters
   in the sense that they can be composed of segments.

* The extra assign- and restore tracing information from eTeX
   had a massive bug because of a dangling else in the pascal web.
   As a side-effect of fixing this bugs, all such potential errors
   in the pascal web have been fixed (for now).

* The math parameters can now be set and queried from lua code
   via the new tex.setmath() and tex.getmath() functions.

* Reflection in a \hbox was broken.

* There was a leak of direction nodes in the paragraph builder.

* The font backend now does a small peek to differentiate
   truetype and postscript style opentype fonts. This fixes
   the "Can't find CFF table" bug for otf's with truetype outlines.

* Parameters and registers can now also be assinged to globally
   from lua (see the manual for details).

* It is now possible to query the current math style while a
   formula is still being constructed by using the new read-only
   value \mathstyle. Associated is the new command \Ustack that
   is to be used as a prefix for {.. \over ..} and friends.
   See the manual for more information.

* The embedded MPLib is brought up to date with the current
   metapost repository (version 1.110 and a few small patches).

* Luatex can now handle two breakpoints inside a single ligature
   (like for the functional word of-f-ice). The solution is not
   perfect yet, but the chance of missed hyphenation points in
   actual documents should now be negligible.

* Some speedups in the font loading code, and in the handling of
   pdf_literal nodes that are set from within Lua code.

* Some source code and manual cleanup, as usual.


The archives can be downloaded from supelec as usual:

         http://foundry.supelec.fr/projects/luatex/

You could also check out the sources via anonymous svn:

   svn co svn://scm.foundry.supelec.fr/svn/luatex/tags/beta-0.39.0

Bugs and feature requests can be added to the issue tracker at

        http://tracker.luatex.org


Have fun,
Taco




From elie.roux at telecom-bretagne.eu  Thu Apr 16 15:53:08 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Thu, 16 Apr 2009 15:53:08 +0200
Subject: [luatex] ini files for TL 2009
Message-ID: <49E73844.4030107@telecom-bretagne.eu>

Hello,

I've just tested the 0.39 version, and the format creation does not work 
(etex checks for eTeXVersion which does not exist by default), some 
primitives have to be enabled in the ini files before doing anything. Adding

\catcode `\{=1
\catcode `\}=2
\directlua{tex.enableprimitives('', tex.extraprimitives('etex', 'pdftex'))}
\catcode `\{=11
\catcode `\}=11

At the beginning of the ini files is enough to make it work, but some 
questions remain:

 - should the omega and aleph primitives be enabled in the format?
 - should \luatexversion be enabled?

I would answer yes to the two questions but I'm not the one who 
decides... What do you think? This is a particularly important question 
for me as it will determine a lot of things in the luatextra behaviour...

Thank you,
-- 
Elie

From taco at elvenkind.com  Thu Apr 16 15:58:58 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 16 Apr 2009 15:58:58 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E73844.4030107@telecom-bretagne.eu>
References: <49E73844.4030107@telecom-bretagne.eu>
Message-ID: <49E739A2.1010507@elvenkind.com>



Elie Roux wrote:
> Hello,
> 
> I've just tested the 0.39 version, and the format creation does not work
> (etex checks for eTeXVersion which does not exist by default), some
> primitives have to be enabled in the ini files before doing anything.
> Adding
> 
> \catcode `\{=1
> \catcode `\}=2
> \directlua{tex.enableprimitives('', tex.extraprimitives('etex', 'pdftex'))}
> \catcode `\{=11
> \catcode `\}=11

You are talking about the (pdf)lualatex.ini files, yes?

For reference, Hans' luatex.tex ('plain style' luatex) now looks
like this:

  % this will load plain and luatex-fonts
  \input plain
  \directlua {tex.enableprimitives('', tex.extraprimitives())}
  \pdfoutput = 1
  \everyjob\expandafter{\the\everyjob\input luatex-fonts\relax}
  \dump

(we prefer 'luatex' to be in pdf mode)

Best wishes,
Taco


From elie.roux at telecom-bretagne.eu  Thu Apr 16 16:14:40 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Thu, 16 Apr 2009 16:14:40 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E739A2.1010507@elvenkind.com>
References: <49E73844.4030107@telecom-bretagne.eu>
	<49E739A2.1010507@elvenkind.com>
Message-ID: <49E73D50.7030908@telecom-bretagne.eu>

Taco Hoekwater a ?crit :
> You are talking about the (pdf)lualatex.ini files, yes?
>   

Well... also about the (pdf)luatex.ini files... The ones I had before I 
changed them were:

luatex.ini:

\input etex.ini

pdfluatex.ini:

\input pdftexconfig.tex
\input plain
\dump
\endinput

I just proposed a patch for them to work... but I must say I don't 
really have a strong opinion on how they should be made, as long as they 
work...
-- 
Elie

From preining at logic.at  Thu Apr 16 18:31:11 2009
From: preining at logic.at (Norbert Preining)
Date: Thu, 16 Apr 2009 18:31:11 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E739A2.1010507@elvenkind.com>
References: <49E73844.4030107@telecom-bretagne.eu>
	<49E739A2.1010507@elvenkind.com>
Message-ID: <20090416163111.GC20643@gamma.logic.tuwien.ac.at>

Hi Taco,

On Do, 16 Apr 2009, Taco Hoekwater wrote:
> > \catcode `\{=1
> > \catcode `\}=2
> > \directlua{tex.enableprimitives('', tex.extraprimitives('etex', 'pdftex'))}
> > \catcode `\{=11
> > \catcode `\}=11
> 
> You are talking about the (pdf)lualatex.ini files, yes?
> 
> For reference, Hans' luatex.tex ('plain style' luatex) now looks
> like this:
> 
>   % this will load plain and luatex-fonts
>   \input plain
>   \directlua {tex.enableprimitives('', tex.extraprimitives())}
>   \pdfoutput = 1
>   \everyjob\expandafter{\the\everyjob\input luatex-fonts\relax}
>   \dump

Good question. For TeX Live, and as I am packaging for Debian ATM, also
for Debian, what .ini files do you suggest?

Currently we have:
	luatex.ini
	pdfluatex.ini
	lualatex.ini
	pdflualatex.ini
and the programs are named the same. 

Do you have a suggestion for those ini files which are not depending on
luatex-fonts.tex etc etc?

We could also change that to
	luatex.ini	-> pdf mode
	dviluatex.ini	-> dvi mode
etc but for lualatex I guess it should default to .dvi still, or?

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
HUMBY (n.)
An erection which won't go down when a gentleman has to go for a pee
in the middle of making love to someone.
			--- Douglas Adams, The Meaning of Liff

From elie.roux at telecom-bretagne.eu  Thu Apr 16 18:38:53 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Thu, 16 Apr 2009 18:38:53 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <20090416163111.GC20643@gamma.logic.tuwien.ac.at>
References: <49E73844.4030107@telecom-bretagne.eu>	<49E739A2.1010507@elvenkind.com>
	<20090416163111.GC20643@gamma.logic.tuwien.ac.at>
Message-ID: <49E75F1D.1050301@telecom-bretagne.eu>

Norbert Preining a ?crit :
> Do you have a suggestion for those ini files which are not depending on
> luatex-fonts.tex etc etc?
>
> We could also change that to
> 	luatex.ini	-> pdf mode
> 	dviluatex.ini	-> dvi mode
> etc but for lualatex I guess it should default to .dvi still, or?
>   


I think it's totally confusing to have

luatex and dviluatex
pdflualatex and lualatex

If LuaTeX is to replace pdfTeX in the long term, I also think it's a bad 
idea to have luatex in pdf mode by default... I don't think we have to 
change the names. Adding luatexconfig.tex to the .ini files (with 
luatexconfig being what I told in my first mail) is enough I think...
-- 
Elie

From mpg at elzevir.fr  Thu Apr 16 19:04:49 2009
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Thu, 16 Apr 2009 19:04:49 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E75F1D.1050301@telecom-bretagne.eu>
References: <49E73844.4030107@telecom-bretagne.eu>	<49E739A2.1010507@elvenkind.com>	<20090416163111.GC20643@gamma.logic.tuwien.ac.at>
	<49E75F1D.1050301@telecom-bretagne.eu>
Message-ID: <49E76531.9000005@elzevir.fr>

Elie Roux a ?crit :
> I think it's totally confusing to have
> 
> luatex and dviluatex
> pdflualatex and lualatex
> 
I agree. I see no point in doing such a change. Names are (almost) coherent now:
everything that does not start with pdf outputs dvi, except for xetex, because
there is only one mode here. It already is complicated enough.

While talking about ini files, in order to obtain faster start-up time with
LaTeX, it would be highly desirable to have a babel update in order to load
hyphenation patterns just-in-time (eg hooking into \select at language), and then
prevent them to be loaded at format generation time.

Manuel.




From Arno.Trautmann at gmx.de  Thu Apr 16 20:19:35 2009
From: Arno.Trautmann at gmx.de (Arno Trautmann)
Date: Thu, 16 Apr 2009 20:19:35 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E76531.9000005@elzevir.fr>
References: <49E73844.4030107@telecom-bretagne.eu>	<49E739A2.1010507@elvenkind.com>	<20090416163111.GC20643@gamma.logic.tuwien.ac.at>	<49E75F1D.1050301@telecom-bretagne.eu>
	<49E76531.9000005@elzevir.fr>
Message-ID: <49E776B7.1070105@gmx.de>

Manuel P?gouri?-Gonnard wrote:
> Elie Roux a ?crit :
>> I think it's totally confusing to have
>>
>> luatex and dviluatex
>> pdflualatex and lualatex
>>
> I agree. I see no point in doing such a change. Names are (almost) coherent now:
> everything that does not start with pdf outputs dvi, except for xetex, because
> there is only one mode here. It already is complicated enough.

Well, I disagree. One thing I really like about XeLaTeX is that I don?t
have to take care about output modes. I write my code and get the pdf.
It would be fine if this was possible with LuaLaTeX, too. The format
name pdfLuaLaTeX is just too complicated for the ?preferred? mode, as
Taco says.

Just a thought from a ?normal user?.

Arno

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 260 bytes
Desc: OpenPGP digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090416/c0088ce0/attachment.bin 

From mpg at elzevir.fr  Thu Apr 16 22:51:07 2009
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Thu, 16 Apr 2009 22:51:07 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E73844.4030107@telecom-bretagne.eu>
References: <49E73844.4030107@telecom-bretagne.eu>
Message-ID: <49E79A3B.9090905@elzevir.fr>

Hi ?lie,

Elie Roux a ?crit :
> \catcode `\{=1
> \catcode `\}=2
> \directlua{tex.enableprimitives('', tex.extraprimitives('etex', 'pdftex'))}
> \catcode `\{=11
> \catcode `\}=11
> 
You certainly mean 12, not 11? May I suggest the following formulation?

\begingroup \catcode`{1 \catcode`}2
\directlua{tex.enableprimitives('', tex.extraprimitives('etex', 'pdftex'))}
\endgroup

> At the beginning of the ini files is enough to make it work,

And I think it is just enough and we should add no more to the files (except if
babel changes to allow just-on-time loading of the patterns, which would allow
to skip loading them in the format).

> - should the omega and aleph primitives be enabled in the format?

I think it belongs to the macro packages: for now, your luatextra package, and
hopefully some day the LaTeX3 core.

> - should \luatexversion be enabled?
> 
I also think it belongs to the macro packages: latest version of ifluatex.sty
does it. And every Plain or LaTeX packages which does anything related to LuaTeX
should load it anyway.

Thanks,
Manuel.


From mpg at elzevir.fr  Thu Apr 16 22:58:19 2009
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Thu, 16 Apr 2009 22:58:19 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <20090416163111.GC20643@gamma.logic.tuwien.ac.at>
References: <49E73844.4030107@telecom-bretagne.eu>	<49E739A2.1010507@elvenkind.com>
	<20090416163111.GC20643@gamma.logic.tuwien.ac.at>
Message-ID: <49E79BEB.8010505@elzevir.fr>

Hi Norbert,

Norbert Preining a ?crit :
> Good question. For TeX Live, and as I am packaging for Debian ATM, also
> for Debian, what .ini files do you suggest?
> 
For Debian and TeX Live, I suggest just adding the lines suggested by ?lie at
the beginning of the current .ini files and no more.

For Debian, I suggest including the latest version of ifluatex.sty in your
luatex package from 0.39 on, since the correct way to detect luatex dramatically
change with this version. (I don't know if it is possible/easy without
conflicting with other packages.)

> Do you have a suggestion for those ini files which are not depending on
> luatex-fonts.tex etc etc?
> 
Btw, sorry if it has already been mentioned, but is luatex-fonts (and the
related files) going to be released on CTAN?

Manuel.


From mpg at elzevir.fr  Thu Apr 16 23:08:45 2009
From: mpg at elzevir.fr (=?ISO-8859-15?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Thu, 16 Apr 2009 23:08:45 +0200
Subject: [luatex] Why is --progname needed?
Message-ID: <49E79E5D.5070602@elzevir.fr>

Hi,

mpg at roth:~% luatex --ini
kpathsea mode needs a --progname or --fmt switch

Why can't the progname be taken from the invocation name in INI mode, just as
pdftex does?

Sorry if the question is stupid.

Manuel.

From taco at elvenkind.com  Thu Apr 16 23:15:13 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 16 Apr 2009 23:15:13 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E79BEB.8010505@elzevir.fr>
References: <49E73844.4030107@telecom-bretagne.eu>	<49E739A2.1010507@elvenkind.com>
	<20090416163111.GC20643@gamma.logic.tuwien.ac.at>
	<49E79BEB.8010505@elzevir.fr>
Message-ID: <49E79FE1.5000400@elvenkind.com>

Manuel P?gouri?-Gonnard wrote:
>>
> Btw, sorry if it has already been mentioned, but is luatex-fonts (and the
> related files) going to be released on CTAN?

They are part of the context distribution, so yes.

Best wishes,
Taco



From taco at elvenkind.com  Thu Apr 16 23:18:55 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Thu, 16 Apr 2009 23:18:55 +0200
Subject: [luatex] Why is --progname needed?
In-Reply-To: <49E79E5D.5070602@elzevir.fr>
References: <49E79E5D.5070602@elzevir.fr>
Message-ID: <49E7A0BF.6030004@elvenkind.com>

Manuel P?gouri?-Gonnard wrote:
> Hi,
> 
> mpg at roth:~% luatex --ini
> kpathsea mode needs a --progname or --fmt switch
> 
> Why can't the progname be taken from the invocation name in INI mode, just as
> pdftex does?

I forget. Luatex has the added complication that it is possible
to _not_ initialize kpathsea, but looking at it now it seems that
insisting on a progname was an unneeded restriction. Maybe.
I'll double-check, tomorrow.

Best wishes,
Taco

From karl at freefriends.org  Thu Apr 16 23:40:47 2009
From: karl at freefriends.org (Karl Berry)
Date: Thu, 16 Apr 2009 16:40:47 -0500
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E79A3B.9090905@elzevir.fr>
Message-ID: <200904162140.n3GLelN22594@f7.net>

    You certainly mean 12, not 11? May I suggest the following formulation?
    \begingroup \catcode`{1 \catcode`}2
    \directlua{tex.enableprimitives('', tex.extraprimitives('etex', 'pdftex'))}
    \endgroup

Fine, but someone who can actually test them (I can't, right now) --
please send me the four complete .ini files.  We can't check them in
until we stop net updates, anyway.

    Currently we have:
            luatex.ini
            pdfluatex.ini
            lualatex.ini
            pdflualatex.ini
    and the programs are named the same. 

Yes, and we should keep it that way IMNSHO.

Thanks,
karl

From mpg at elzevir.fr  Fri Apr 17 00:09:09 2009
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 17 Apr 2009 00:09:09 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <200904162140.n3GLelN22594@f7.net>
References: <200904162140.n3GLelN22594@f7.net>
Message-ID: <49E7AC85.8040202@elzevir.fr>

Karl Berry a ?crit :
>     You certainly mean 12, not 11? May I suggest the following formulation?
>     \begingroup \catcode`{1 \catcode`}2
>     \directlua{tex.enableprimitives('', tex.extraprimitives('etex', 'pdftex'))}
>     \endgroup
> 
> Fine, but someone who can actually test them (I can't, right now) --
> please send me the four complete .ini files.  We can't check them in
> until we stop net updates, anyway.
> 
I'll do, tomorrow or this week-end. (I just made the arrangements to be able to
easily test them.)

Manuel.


From taco at elvenkind.com  Fri Apr 17 00:14:06 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 17 Apr 2009 00:14:06 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E7AC85.8040202@elzevir.fr>
References: <200904162140.n3GLelN22594@f7.net> <49E7AC85.8040202@elzevir.fr>
Message-ID: <49E7ADAE.7080207@elvenkind.com>

Manuel P?gouri?-Gonnard wrote:
> Karl Berry a ?crit :
>>     You certainly mean 12, not 11? May I suggest the following formulation?
>>     \begingroup \catcode`{1 \catcode`}2
>>     \directlua{tex.enableprimitives('', tex.extraprimitives('etex', 'pdftex'))}
>>     \endgroup

Can I object, please? Why pretend that luatex is nothing more than
pdftex?

Taco



From elie.roux at telecom-bretagne.eu  Fri Apr 17 00:33:39 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Fri, 17 Apr 2009 00:33:39 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E79BEB.8010505@elzevir.fr>
References: <49E73844.4030107@telecom-bretagne.eu>	<49E739A2.1010507@elvenkind.com>	<20090416163111.GC20643@gamma.logic.tuwien.ac.at>
	<49E79BEB.8010505@elzevir.fr>
Message-ID: <49E7B243.40305@telecom-bretagne.eu>

Manuel P?gouri?-Gonnard a ?crit :
> Btw, sorry if it has already been mentioned, but is luatex-fonts (and the
> related files) going to be released on CTAN?
>   

There is also luaotfload on my github: basically the same, but with 
adjustments to luatextra (using \newattribute instead of predefined 
ones, etc.). It will be released on the CTAN too.
-- 
Elie

From elie.roux at telecom-bretagne.eu  Fri Apr 17 00:42:23 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Fri, 17 Apr 2009 00:42:23 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E7ADAE.7080207@elvenkind.com>
References: <200904162140.n3GLelN22594@f7.net> <49E7AC85.8040202@elzevir.fr>
	<49E7ADAE.7080207@elvenkind.com>
Message-ID: <49E7B44F.1070001@telecom-bretagne.eu>

Taco Hoekwater a ?crit :
> Can I object, please? Why pretend that luatex is nothing more than
> pdftex?

I think it's about backward compatibility when (in the long term) LuaTeX 
will replace pdfTeX (if it does)...

Also... should we enable pdfTeX primitives in luatex, or even eTeX ones? 
When tex is invoked (in TL) it is just TeX82, maybe we should keep this 
behaviour for luatex?
-- 
Elie

From karl at freefriends.org  Fri Apr 17 00:51:47 2009
From: karl at freefriends.org (Karl Berry)
Date: Thu, 16 Apr 2009 17:51:47 -0500
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E7B44F.1070001@telecom-bretagne.eu>
Message-ID: <200904162251.n3GMplh16417@f7.net>

    > Can I object, please? Why pretend that luatex is nothing more than
    > pdftex?

I agree.  Sorry, I didn't realize the implication.

    I think it's about backward compatibility when (in the long term) LuaTeX 
    will replace pdfTeX (if it does)...

It doesn't make sense to me for "luatex" to not provide anything extra.
It seems to me that (pdf)lua(la)tex should provide the luatex
primitives, just as pdf(la)tex provides pdftex primitives, etc.

If luatex is *invoked* as pdftex, then it should only have pdftex
primitives.  That would be done in pdftex.ini, not any *lua*.ini.  We're
years away (at least) from that, though.

Am I missing something?

    Also... should we enable pdfTeX primitives in luatex, or even eTeX ones? 

IMHO yes.  Everything.

    When tex is invoked (in TL) it is just TeX82, maybe we should keep this 
    behaviour for luatex?

Not IMHO.  luatex != tex.

From taco at elvenkind.com  Fri Apr 17 10:06:13 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 17 Apr 2009 10:06:13 +0200
Subject: [luatex] Why is --progname needed?
In-Reply-To: <49E7A0BF.6030004@elvenkind.com>
References: <49E79E5D.5070602@elzevir.fr> <49E7A0BF.6030004@elvenkind.com>
Message-ID: <49E83875.1000700@elvenkind.com>



Taco Hoekwater wrote:
> Manuel P?gouri?-Gonnard wrote:
>> Hi,
>>
>> mpg at roth:~% luatex --ini
>> kpathsea mode needs a --progname or --fmt switch
>>
>> Why can't the progname be taken from the invocation name in INI mode,
>> just as
>> pdftex does?
> 
> I forget. Luatex has the added complication that it is possible
> to _not_ initialize kpathsea, but looking at it now it seems that
> insisting on a progname was an unneeded restriction. Maybe.
> I'll double-check, tomorrow.

If you want, you can try #2310 (trunk), which removes the restriction.

Best wishes,
Taco

From elie.roux at telecom-bretagne.eu  Fri Apr 17 10:36:33 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Fri, 17 Apr 2009 10:36:33 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <200904162140.n3GLelN22594@f7.net>
References: <200904162140.n3GLelN22594@f7.net>
Message-ID: <49E83F91.3030501@telecom-bretagne.eu>

An embedded and charset-unspecified text was scrubbed...
Name: warning1.txt
Url: http://tug.org/pipermail/luatex/attachments/20090417/8aadd0f0/attachment.txt 
-------------- next part --------------
Karl Berry a ?crit :
> Fine, but someone who can actually test them (I can't, right now) --
> please send me the four complete .ini files.  We can't check them in
> until we stop net updates, anyway.

Here they are, with all primitives enabled. I also checked for the 
existence of tex.enableprimitives, so that they work for older versions. 
If someone could double-check...

Thank you!
-- 
Elie

From elie.roux at telecom-bretagne.eu  Fri Apr 17 10:39:50 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Fri, 17 Apr 2009 10:39:50 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E83F91.3030501@telecom-bretagne.eu>
References: <200904162140.n3GLelN22594@f7.net>
	<49E83F91.3030501@telecom-bretagne.eu>
Message-ID: <49E84056.30604@telecom-bretagne.eu>

> WARNING: This e-mail has been altered by MIMEDefang.

Let's try again...
-- 
Elie

-------------- next part --------------
A non-text attachment was scrubbed...
Name: inifiles.tgz
Type: application/x-gtar
Size: 493 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090417/60b6ccae/attachment-0001.gtar 

From luatex at nililand.de  Fri Apr 17 10:54:10 2009
From: luatex at nililand.de (Ulrike Fischer)
Date: Fri, 17 Apr 2009 10:54:10 +0200
Subject: [luatex] ini files for TL 2009
References: <49E73844.4030107@telecom-bretagne.eu>	<49E739A2.1010507@elvenkind.com>	<20090416163111.GC20643@gamma.logic.tuwien.ac.at>	<49E75F1D.1050301@telecom-bretagne.eu>
	<49E76531.9000005@elzevir.fr> <49E776B7.1070105@gmx.de>
Message-ID: <1qwlmkutq1ylg$.dlg@nililand.de>

Am Thu, 16 Apr 2009 20:19:35 +0200 schrieb Arno Trautmann:

>> I agree. I see no point in doing such a change. Names are (almost) coherent now:
>> everything that does not start with pdf outputs dvi, except for xetex, because
>> there is only one mode here. It already is complicated enough.
> 
> Well, I disagree. One thing I really like about XeLaTeX is that I don?t
> have to take care about output modes. I write my code and get the pdf.
> It would be fine if this was possible with LuaLaTeX, too. 

Nobody prevents you from adding \pdfoutput=1 to lualatex.ini. But as
one who had to help a lot of miktex who got a pdf instead of a dvi
due to a faulty ifpdf-test I think it wouldn't be a good idea to
force pdf as a default. 


> The format name pdfLuaLaTeX is just too complicated for the
> ?preferred? mode, as Taco says.

Well,  I'm using Ctrl+Shift+p to call pdflatex and Ctrl+Alt+p to
call pdflualatex, so I don't care much about the length. But I think
that names should reflect the behaviour. (And probably a lot of
confusion could have been avoided if the engine pdftex would have
been called pdfdvitex).


-- 
Ulrike Fischer 


From taco at elvenkind.com  Fri Apr 17 11:03:02 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 17 Apr 2009 11:03:02 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <1qwlmkutq1ylg$.dlg@nililand.de>
References: <49E73844.4030107@telecom-bretagne.eu>	<49E739A2.1010507@elvenkind.com>	<20090416163111.GC20643@gamma.logic.tuwien.ac.at>	<49E75F1D.1050301@telecom-bretagne.eu>	<49E76531.9000005@elzevir.fr>
	<49E776B7.1070105@gmx.de> <1qwlmkutq1ylg$.dlg@nililand.de>
Message-ID: <49E845C6.4060202@elvenkind.com>



Ulrike Fischer wrote:
> 
> But I think that names should reflect the behaviour. 

That would assume dviluatex and pdfluatex, and no luatex.ini
at all (and actually that would be fine by me).

I know you are concerned with backward compatibility with pdftex,
but the fact is that luatex's dvi mode is worthless whenever
fonts in opentype format are being used. And the new font support is
the most important argument for using luatex in the first place,
so insisting on dvi output seems somewhat backward to me.

Best wishes,
Taco










From elie.roux at telecom-bretagne.eu  Fri Apr 17 11:12:45 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Fri, 17 Apr 2009 11:12:45 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E845C6.4060202@elvenkind.com>
References: <49E73844.4030107@telecom-bretagne.eu>	<49E739A2.1010507@elvenkind.com>	<20090416163111.GC20643@gamma.logic.tuwien.ac.at>	<49E75F1D.1050301@telecom-bretagne.eu>	<49E76531.9000005@elzevir.fr>	<49E776B7.1070105@gmx.de>
	<1qwlmkutq1ylg$.dlg@nililand.de> <49E845C6.4060202@elvenkind.com>
Message-ID: <49E8480D.1000401@telecom-bretagne.eu>

Taco Hoekwater a ?crit :
> I know you are concerned with backward compatibility with pdftex,
> but the fact is that luatex's dvi mode is worthless whenever
> fonts in opentype format are being used. And the new font support is
> the most important argument for using luatex in the first place,
> so insisting on dvi output seems somewhat backward to me.

I agree... maybe we should simply let luatex (and lualatex) be in pdf 
mode, remove pdfluatex (and pdflualatex), and let people who really want 
dvi use \pdfoutput=0... This sounds like a good solution to me...
-- 
Elie

From Arno.Trautmann at gmx.de  Fri Apr 17 12:41:41 2009
From: Arno.Trautmann at gmx.de (Arno Trautmann)
Date: Fri, 17 Apr 2009 12:41:41 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E8480D.1000401@telecom-bretagne.eu>
References: <49E73844.4030107@telecom-bretagne.eu>	<49E739A2.1010507@elvenkind.com>	<20090416163111.GC20643@gamma.logic.tuwien.ac.at>	<49E75F1D.1050301@telecom-bretagne.eu>	<49E76531.9000005@elzevir.fr>	<49E776B7.1070105@gmx.de>	<1qwlmkutq1ylg$.dlg@nililand.de>
	<49E845C6.4060202@elvenkind.com>
	<49E8480D.1000401@telecom-bretagne.eu>
Message-ID: <49E85CE5.8090103@gmx.de>

Elie Roux wrote:
> Taco Hoekwater a ?crit :
>> I know you are concerned with backward compatibility with pdftex,
>> but the fact is that luatex's dvi mode is worthless whenever
>> fonts in opentype format are being used. And the new font support is
>> the most important argument for using luatex in the first place,
>> so insisting on dvi output seems somewhat backward to me.
> 
> I agree... maybe we should simply let luatex (and lualatex) be in pdf
> mode, remove pdfluatex (and pdflualatex),

Yes, I like that.
Ulrike, I?m talking about the normal user. Of course everybody can build
his own format, but then we wouldn?t need MikTeX or TeXlive at all.
Someone new to LaTeX doesn?t know about dvi and might be confused by the
complex way LaTeX ? dvi ? ps ? pdf. And as Taco mentioned, dvi seems to
be useless with LuaTeX ?

> and let people who really want
> dvi use \pdfoutput=0... This sounds like a good solution to me...

Well, an additional dvilualatex might be nice.

Arno

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 260 bytes
Desc: OpenPGP digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090417/88cbf81c/attachment.bin 

From luatex at nililand.de  Fri Apr 17 12:46:42 2009
From: luatex at nililand.de (Ulrike Fischer)
Date: Fri, 17 Apr 2009 12:46:42 +0200
Subject: [luatex] ini files for TL 2009
References: <49E73844.4030107@telecom-bretagne.eu>	<49E739A2.1010507@elvenkind.com>	<20090416163111.GC20643@gamma.logic.tuwien.ac.at>	<49E75F1D.1050301@telecom-bretagne.eu>	<49E76531.9000005@elzevir.fr>
	<49E776B7.1070105@gmx.de> <1qwlmkutq1ylg$.dlg@nililand.de>
	<49E845C6.4060202@elvenkind.com>
Message-ID: <1fib2i0udpeav.dlg@nililand.de>

Am Fri, 17 Apr 2009 11:03:02 +0200 schrieb Taco Hoekwater:


>> But I think that names should reflect the behaviour. 
 
> That would assume dviluatex and pdfluatex, and no luatex.ini
> at all (and actually that would be fine by me).

For me too ;-)

> 
> I know you are concerned with backward compatibility with pdftex,

No, not really. I don't believe in complete backward compatibility
anyway. My only concern is to avoid confusion. I have passed hours
to explain people that the fact that latex is using "pdftex" as the
underlying engine doesn't mean that you can't produce a dvi. And I
have seen longish discussions about the difference between the
engine "pdftex" and "pdfTeX" (meaning plain format). 


> but the fact is that luatex's dvi mode is worthless whenever
> fonts in opentype format are being used. And the new font support is
> the most important argument for using luatex in the first place,
> so insisting on dvi output seems somewhat backward to me.

I'm not generating dvi much, but in certain cases it is useful. E.g.
to test if a font problem is on the "tex" side or the driver side.
With xetex I sometimes use xetex --no-pdf and generate a (complete
useless) xdv only to shorten compilations step currently not needed.
And there is still pstricks. 

-- 
Ulrike Fischer 


From khaledhosny at eglug.org  Fri Apr 17 13:12:00 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Fri, 17 Apr 2009 13:12:00 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E8480D.1000401@telecom-bretagne.eu>
References: <49E73844.4030107@telecom-bretagne.eu>
	<49E739A2.1010507@elvenkind.com>
	<20090416163111.GC20643@gamma.logic.tuwien.ac.at>
	<49E75F1D.1050301@telecom-bretagne.eu>
	<49E76531.9000005@elzevir.fr> <49E776B7.1070105@gmx.de>
	<1qwlmkutq1ylg$.dlg@nililand.de> <49E845C6.4060202@elvenkind.com>
	<49E8480D.1000401@telecom-bretagne.eu>
Message-ID: <20090417111200.GA4180@khaled-laptop>

On Fri, Apr 17, 2009 at 11:12:45AM +0200, Elie Roux wrote:
> Taco Hoekwater a ?crit :
>> I know you are concerned with backward compatibility with pdftex,
>> but the fact is that luatex's dvi mode is worthless whenever
>> fonts in opentype format are being used. And the new font support is
>> the most important argument for using luatex in the first place,
>> so insisting on dvi output seems somewhat backward to me.
>
> I agree... maybe we should simply let luatex (and lualatex) be in pdf  
> mode, remove pdfluatex (and pdflualatex), and let people who really want  
> dvi use \pdfoutput=0... This sounds like a good solution to me...

Or even make use of command line options, '--output-format=dvi' can be
always used when dvi is desired.

Regards,
 Khaled


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090417/99d2d24d/attachment.bin 

From elie.roux at telecom-bretagne.eu  Fri Apr 17 13:21:15 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Fri, 17 Apr 2009 13:21:15 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <20090417111200.GA4180@khaled-laptop>
References: <49E73844.4030107@telecom-bretagne.eu>	<49E739A2.1010507@elvenkind.com>	<20090416163111.GC20643@gamma.logic.tuwien.ac.at>	<49E75F1D.1050301@telecom-bretagne.eu>	<49E76531.9000005@elzevir.fr>
	<49E776B7.1070105@gmx.de>	<1qwlmkutq1ylg$.dlg@nililand.de>
	<49E845C6.4060202@elvenkind.com>	<49E8480D.1000401@telecom-bretagne.eu>
	<20090417111200.GA4180@khaled-laptop>
Message-ID: <49E8662B.9040109@telecom-bretagne.eu>

Khaled Hosny a ?crit :
> Or even make use of command line options, '--output-format=dvi' can be
> always used when dvi is desired.
>   

I agree. I also think a totally stupid package luadvi.sty with only 
\pdfoutput=0 will be very useful for LaTeX users...
-- 
Elie

From preining at logic.at  Fri Apr 17 13:40:52 2009
From: preining at logic.at (Norbert Preining)
Date: Fri, 17 Apr 2009 13:40:52 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <200904162251.n3GMplh16417@f7.net>
References: <49E7B44F.1070001@telecom-bretagne.eu>
	<200904162251.n3GMplh16417@f7.net>
Message-ID: <20090417114052.GC27249@gamma.logic.tuwien.ac.at>

On Do, 16 Apr 2009, Karl Berry wrote:
> It doesn't make sense to me for "luatex" to not provide anything extra.
> It seems to me that (pdf)lua(la)tex should provide the luatex
> primitives, just as pdf(la)tex provides pdftex primitives, etc.
> 
> If luatex is *invoked* as pdftex, then it should only have pdftex
> primitives.  That would be done in pdftex.ini, not any *lua*.ini.  We're
> years away (at least) from that, though.

I do agree on that 150%!

If one invoces pdftex -> he gets pdftex primitives,
if one invoces pdfetex -> he got pdftex and etex primitives

...
if one invoces luatex -> he gets pdftex, etex, luatex, aleph, all
primitives supported by luatex.

if one invoces luatex *as* pdftex -> he should only get what pdftex
provides.

Can we have the ini files like that?

BTW; that is a different discussion from the default output format. I am
fine with luatex defaulting to pdf output, and there is even NO
dviluatex or so (but maybe cmd line, or whatever).

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
SNITTERFIELD (n.)
Office noticeboard on which snitters (q.v.), cards saying 'You don't
have to be mad to work here, but if you are it helps !!!' and slightly
smutty postcards from Ibiza get pinned up by snitterbies (q.v.)
			--- Douglas Adams, The Meaning of Liff

From elie.roux at telecom-bretagne.eu  Fri Apr 17 13:50:41 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Fri, 17 Apr 2009 13:50:41 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <20090417114052.GC27249@gamma.logic.tuwien.ac.at>
References: <49E7B44F.1070001@telecom-bretagne.eu>	<200904162251.n3GMplh16417@f7.net>
	<20090417114052.GC27249@gamma.logic.tuwien.ac.at>
Message-ID: <49E86D11.5080807@telecom-bretagne.eu>

Norbert Preining a ?crit :
> Can we have the ini files like that?
>   

The one I sent were like this.

> BTW; that is a different discussion from the default output format. I am
> fine with luatex defaulting to pdf output, and there is even NO
> dviluatex or so (but maybe cmd line, or whatever).
>   

I would just add that making luatex defaulting to pdf would (maybe) make 
people see it a a pdfTeX extention (which it is in a way), and I think 
it's good... Also, I don't think more than 0.1% of TeX users understand 
something to the difference between programs, engines, formats, etc. 
People having a luatex defaulting in pdf and a luadvi.sty package won't 
be more confused than they are now...
-- 
Elie

From preining at logic.at  Fri Apr 17 13:56:10 2009
From: preining at logic.at (Norbert Preining)
Date: Fri, 17 Apr 2009 13:56:10 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E86D11.5080807@telecom-bretagne.eu>
References: <49E7B44F.1070001@telecom-bretagne.eu>
	<200904162251.n3GMplh16417@f7.net>
	<20090417114052.GC27249@gamma.logic.tuwien.ac.at>
	<49E86D11.5080807@telecom-bretagne.eu>
Message-ID: <20090417115610.GF27249@gamma.logic.tuwien.ac.at>

On Fr, 17 Apr 2009, Elie Roux wrote:
> >Can we have the ini files like that?
> >  
> 
> The one I sent were like this.

So your ini files give:
luatex/lualatex -> dvi mode
pdfluatex/pdflualatex -> pdf mode

and enable all primitives (pdftex, etex, alpeh, whatever)

Right?

That is fine with me, but if we decide to switch luatex to pdf by
default and get rid of pdfluatex it is also fine 

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
CORRIEARKLET (n.)
The moment at which two people approaching from opposite ends of a
long passageway, recognise each other and immediately pretend they
haven't. This is to avoid the ghastly embarrassment of having to
continue recognising each other the whole length of the corridor.
			--- Douglas Adams, The Meaning of Liff

From elie.roux at telecom-bretagne.eu  Fri Apr 17 13:59:30 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Fri, 17 Apr 2009 13:59:30 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <20090417115610.GF27249@gamma.logic.tuwien.ac.at>
References: <49E7B44F.1070001@telecom-bretagne.eu>	<200904162251.n3GMplh16417@f7.net>	<20090417114052.GC27249@gamma.logic.tuwien.ac.at>	<49E86D11.5080807@telecom-bretagne.eu>
	<20090417115610.GF27249@gamma.logic.tuwien.ac.at>
Message-ID: <49E86F22.9090905@telecom-bretagne.eu>

Norbert Preining a ?crit :
> Right?
>   

Right.

> That is fine with me, but if we decide to switch luatex to pdf by
> default and get rid of pdfluatex it is also fine 
>   

Ok. Let's wait for other opinions (Karl for example)...
-- 
Elie

From Robin.Fairbairns at cl.cam.ac.uk  Fri Apr 17 14:59:58 2009
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Fri, 17 Apr 2009 13:59:58 +0100
Subject: [luatex] ini files for TL 2009
In-Reply-To: Your message of Fri, 17 Apr 2009 11:03:02 +0200.
	<49E845C6.4060202@elvenkind.com>
Message-ID: <16253.1239973198@cl.cam.ac.uk>

Taco Hoekwater <taco at elvenkind.com> wrote:

> Ulrike Fischer wrote:
> > 
> > But I think that names should reflect the behaviour. 
> 
> That would assume dviluatex and pdfluatex, and no luatex.ini
> at all (and actually that would be fine by me).
> 
> I know you are concerned with backward compatibility with pdftex,
> but the fact is that luatex's dvi mode is worthless whenever
> fonts in opentype format are being used. And the new font support is
> the most important argument for using luatex in the first place,
> so insisting on dvi output seems somewhat backward to me.

we have our eyes on the time when luatex takes its full place in the
panoply of tex systems.

just now we have tex (virgin, for don's use, and those who strive to be
like him), and pdfetex engines.

it would be nice if luatex could replace pdfetex in that, but then we
would need to cover all the dvi-output-only stuff, which is of course
written using (at best) type 1 fonts.

are you saying that type 1 and mf fonts will no longer be usable?  (i
don't remember anyone saying anything about mf fonts for luatex, but if
you have a dvi mode at all i would expect all the historic apparatus to
continue to work without any extra effort on your part.)

we *still* get ctan submissions of mf -- had an historic turkish font
only last week.

i suppose there's a place for someone to grind away converting all
remaining mf-only fonts ... and i suppose the job might be complete by
2012 and the grand release.  but until that starts happening, let's not
hold our collective breath!

robin

From taco at elvenkind.com  Fri Apr 17 15:15:33 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 17 Apr 2009 15:15:33 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <16253.1239973198@cl.cam.ac.uk>
References: <16253.1239973198@cl.cam.ac.uk>
Message-ID: <49E880F5.8080903@elvenkind.com>



Robin Fairbairns wrote:
> 
> are you saying that type 1 and mf fonts will no longer be usable?  (i
> don't remember anyone saying anything about mf fonts for luatex, but if
> you have a dvi mode at all i would expect all the historic apparatus to
> continue to work without any extra effort on your part.)

No, no, I was not saying that. It is just that to get the best out
of your luatex experience, you should be using opentype fonts instead of
type1 | mf. But both the old formats still work, and will continue to do
so.

Best wishes,
Taco

From mpg at elzevir.fr  Fri Apr 17 23:19:02 2009
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 17 Apr 2009 23:19:02 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <200904162251.n3GMplh16417@f7.net>
References: <200904162251.n3GMplh16417@f7.net>
Message-ID: <49E8F246.8010701@elzevir.fr>

Karl Berry a ?crit :
>     > Can I object, please? Why pretend that luatex is nothing more than
>     > pdftex?
> 
> I agree.  Sorry, I didn't realize the implication.
> 
Now, my turn to object. I thought the whole point of hiding primitives in INI
mode and providing tex.enableprimitive() with the ability to activate primitive
with a prefix, was to be able not to activate them and let the macro package decide.

Using a *lua*.ini file which activates only pdfetex primitives does exactly
this: avoid name conflicts (since one can assume most packages to be compatible
with pdftex, and otoh doing so allows to reuse existing .ini files). Then the
user willing to have a full luatex experience loads sdome package such as
luatextra for LaTeX.

The package tries to take care of possible conflicts, possibly applying a
coherent naming scheme (well, probably not in LaTeX2e, but we can hope for
LaTeX3), and more generally provides an additional abstraction layers between
the engine and the user.

This abstraction layer frees luatex developers of the burden of compatibility
questions, allowing them to name the new primitives as they wish, and change
their syntax when the want to, like for \directlua, since the macro package is
responsible of this questions.

So my opinion is: only pdfetex primitives ( + \directlua) in the format, and
then macro packages such as ifluatex.sty and luatextra.sty.

> It doesn't make sense to me for "luatex" to not provide anything extra.
> It seems to me that (pdf)lua(la)tex should provide the luatex
> primitives, just as pdf(la)tex provides pdftex primitives, etc.
> 
So what exactly is the point of tex.enableprimitives() and hiding primitives in
the first place?

Manuel.


From mpg at elzevir.fr  Fri Apr 17 23:23:18 2009
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Fri, 17 Apr 2009 23:23:18 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <20090417114052.GC27249@gamma.logic.tuwien.ac.at>
References: <49E7B44F.1070001@telecom-bretagne.eu>	<200904162251.n3GMplh16417@f7.net>
	<20090417114052.GC27249@gamma.logic.tuwien.ac.at>
Message-ID: <49E8F346.2040701@elzevir.fr>

Norbert Preining a ?crit :
> BTW; that is a different discussion from the default output format. I am
> fine with luatex defaulting to pdf output, and there is even NO
> dviluatex or so (but maybe cmd line, or whatever).
> 
I think that if lua(la)tex defaults to pdf output, then there should be no
command for dvi output. This is coherent, since the features of the newer *TeX
engines (XeTeX and LuaTeX) need pdf output, and and advanced user wishing to use
dvi mode can still do whatever she wants.

I only object to having lualatex + dvilualatex while there is latex + pdflatex.
But just lualatex, like there is just xelatex (and same for Plain) is fine for me.

Manuel.

From taco at elvenkind.com  Fri Apr 17 23:53:31 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Fri, 17 Apr 2009 23:53:31 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E8F246.8010701@elzevir.fr>
References: <200904162251.n3GMplh16417@f7.net> <49E8F246.8010701@elzevir.fr>
Message-ID: <49E8FA5B.60405@elvenkind.com>

Manuel P?gouri?-Gonnard wrote:
> Karl Berry a ?crit :
>>     > Can I object, please? Why pretend that luatex is nothing more than
>>     > pdftex?
>>
>> I agree.  Sorry, I didn't realize the implication.
>>
> Now, my turn to object. I thought the whole point of hiding primitives in INI
> mode and providing tex.enableprimitive() with the ability to activate primitive
> with a prefix, was to be able not to activate them and let the macro package decide.

I thought the goal was to have a configurable name prefix, but that is
not so important: it is indeed now possible to not activate primitives
at all.

Whether doing it that way is wise, I am not so sure about. It seems to
me that stating right now that all luatex primitives will start with the
prefix "LuaTeX" will be an easier thing to control than later having to
deal with the various packages each enabling the primitives they need
in the way they like. It would even be possible for two such packages
to create their own, private, prefix collision. Anyway ...

> Using a *lua*.ini file which activates only pdfetex primitives does exactly
> this: avoid name conflicts (since one can assume most packages to be compatible
> with pdftex, and otoh doing so allows to reuse existing .ini files). Then the
> user willing to have a full luatex experience loads sdome package such as
> luatextra for LaTeX.

if lualatex.ini is like that, that is fine by me. I don't often use
latex, and when I do, it is usually for a full-length article and
I have no objection at all to starting my input file with 20 lines
of core-functionality-not-actually-in-the-core in that case. :)
Ifluatex.sty etc. make perfect sense in such a setting.

But for practical debugging purposes, I want a low-level format that is
just "plain luatex", without needing an additional bunch of input files.
Minimal examples that need third-party packages are not easy to handle,
and experience has shown that I use lots of minimal example files while
tracking down bugs.

Of course I could have my own luatex.ini which is then not the same as
everybody else's luatex.fmt, but I would prefer not to have to do so,
and just have all primitives enabled without prefix in luatex.ini.

Doing so would probably not even harm existing documents, not even if
there were actual conflicts, because the issue surrounding primitive
names is almost entirely caused by the use of \(re)newcommand in latex
as opposed to \def in plain.

So my vote goes to having luatex.ini which enables all primitives
without prefix, loads plain.tex (or something in plain-style like
etex.src), and generates pdf. What is in lualatex.ini is not really
important to me, but I do believe that just these two formats,
bot creating pdf, is better than having having four formats.

Best wishes,
Taco



Best wishes,
Taco







From karl at freefriends.org  Sat Apr 18 00:04:39 2009
From: karl at freefriends.org (Karl Berry)
Date: Fri, 17 Apr 2009 17:04:39 -0500
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E8FA5B.60405@elvenkind.com>
Message-ID: <200904172204.n3HM4dC27147@f7.net>

    So my vote goes to having luatex.ini which enables all primitives
    without prefix, loads plain.tex (or something in plain-style like
    etex.src), 

As I said before, I definitely agree with this much.

On the various other issues, I'll write later.

From karl at freefriends.org  Sat Apr 18 00:31:48 2009
From: karl at freefriends.org (Karl Berry)
Date: Fri, 17 Apr 2009 17:31:48 -0500
Subject: [luatex] ini files for TL 2009
In-Reply-To: <20090417114052.GC27249@gamma.logic.tuwien.ac.at>
Message-ID: <200904172231.n3HMVmL04836@f7.net>

    If one invoces pdftex -> he gets pdftex primitives,
    if one invoces pdfetex -> he got pdftex and etex primitives

No.  pdfetex = pdftex.  This has been the case for some time.  

From karl at freefriends.org  Sat Apr 18 01:56:29 2009
From: karl at freefriends.org (Karl Berry)
Date: Fri, 17 Apr 2009 18:56:29 -0500
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E7B243.40305@telecom-bretagne.eu>
Message-ID: <200904172356.n3HNuT032175@f7.net>

    There is also luaotfload on my github: basically the same, but with 
    adjustments to luatextra (using \newattribute instead of predefined 
    ones, etc.). 

I didn't know we were creating two implementations of the same thing.

From khaledhosny at eglug.org  Sat Apr 18 02:23:26 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sat, 18 Apr 2009 02:23:26 +0200
Subject: [luatex] a LuaTeX logo (for fun)
Message-ID: <20090418002326.GA1824@khaled-laptop>

Having a boring night, I tried to follow the tradition of bizarre TeX
logos and make a LuaTeX one :) then I though I'd share it with you,
though it isn't very clear at small sizes (that would be a benefit ;)

\font\tx=cmr8
\font\txx=cmr7
\def\LuaTeX{L\kern-.33em\raise.62ex\hbox{\txx U}\kern-.35em\lower.40ex\hbox{\tx A}\kern-.37em\TeX}
\def\LuaTeXi{L\kern-.38em\raise.62ex\hbox{\txx U}\kern-.35em\lower.24ex\hbox{\tx A}\kern-.37em\TeX}% a slightly
different variant

\LuaTeX\ is a \TeX\ but not any \TeX , it is \LuaTeXi !
\bye

Regards,
 Khaled


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: llogo.pdf
Type: application/pdf
Size: 11174 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090418/183eabc0/attachment-0001.pdf 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090418/183eabc0/attachment-0001.bin 

From elie.roux at telecom-bretagne.eu  Sat Apr 18 10:04:18 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Sat, 18 Apr 2009 10:04:18 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <200904172356.n3HNuT032175@f7.net>
References: <200904172356.n3HNuT032175@f7.net>
Message-ID: <49E98982.8050309@telecom-bretagne.eu>

Karl Berry a ?crit :
> I didn't know we were creating two implementations of the same thing.

Actually both implementations are small wrappers for a set of ConTeXt 
lua files. In luaotfload I copied the lua files from ConTeXt and renamed 
them (with a prefix). This allows to be sure to have a working version, 
and allows updates of luaotfload without ConTeXt updates... Do you think 
it's a good idea or do you think it's better to use ConTeXt files 
directly? This would mean that they have to be provided with LuaTeX...

Anyway, having two implementations is necessary because ConTeXt's 
implementation is not compatible with luatextra.

Thank you,
-- 
Elie

From preining at logic.at  Sat Apr 18 10:08:29 2009
From: preining at logic.at (Norbert Preining)
Date: Sat, 18 Apr 2009 10:08:29 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <200904172231.n3HMVmL04836@f7.net>
References: <20090417114052.GC27249@gamma.logic.tuwien.ac.at>
	<200904172231.n3HMVmL04836@f7.net>
Message-ID: <20090418080829.GA12059@gamma.logic.tuwien.ac.at>

On Fr, 17 Apr 2009, Karl Berry wrote:
>     If one invoces pdftex -> he gets pdftex primitives,
>     if one invoces pdfetex -> he got pdftex and etex primitives
> 
> No.  pdfetex = pdftex.  This has been the case for some time.  

Mark the "got" vs "gets" I wrote ;-)

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
NAUGATUCK (n.)
A plastic sachet containing shampoo, polyfilla, etc., which is
impossible to open except by off the corners.
			--- Douglas Adams, The Meaning of Liff

From elie.roux at telecom-bretagne.eu  Sat Apr 18 10:20:03 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Sat, 18 Apr 2009 10:20:03 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E8F246.8010701@elzevir.fr>
References: <200904162251.n3GMplh16417@f7.net> <49E8F246.8010701@elzevir.fr>
Message-ID: <49E98D33.7010804@telecom-bretagne.eu>

Manuel P?gouri?-Gonnard a ?crit :
> So what exactly is the point of tex.enableprimitives() and hiding 
> primitives in
> the first place?

I think the point is to allow luatex to replace pdfetex as the default 
engine... In this case you cannot provide unprefixed primitives by default.

Let's take an example: someone has a package incompatible with LuaTeX 
primitives, and LuaTeX has replaced pdfTeX. Two cases:

 - if he wants to use LuaTeX, he will type 'luatex', and will get the 
extra primitives, breaking his package. Or, with your system, he will 
load luatextra.sty (or luainputenc.sty that loads luatextra.sty) that 
will load the primitives, and break his package. In both cases the 
system is broken and he'll have to change his files.

 - if he is like 90% of the users and doesn't want to change the files 
he created years ago, he'll use pdftex (which is in fact LuaTeX without 
the extra primitives), and won't load luatextra.sty, so his files won't 
be broken.

So I'm still in favor of enabling the extra primitives in the program 
luatex.

Thank you,
-- 
Elie

From mpg at elzevir.fr  Sat Apr 18 11:11:17 2009
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Sat, 18 Apr 2009 11:11:17 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E98D33.7010804@telecom-bretagne.eu>
References: <200904162251.n3GMplh16417@f7.net> <49E8F246.8010701@elzevir.fr>
	<49E98D33.7010804@telecom-bretagne.eu>
Message-ID: <49E99935.6020105@elzevir.fr>

Elie Roux a ?crit :
> I think the point is to allow luatex to replace pdfetex as the default
> engine... In this case you cannot provide unprefixed primitives by default.
> [...]
> - if he is like 90% of the users and doesn't want to change the files he
> created years ago, he'll use pdftex (which is in fact LuaTeX without the
> extra primitives), and won't load luatextra.sty, so his files won't be
> broken.
> 
Right, I overlooked that. Good point.

Manuel.

From taco at elvenkind.com  Sat Apr 18 11:29:56 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 18 Apr 2009 11:29:56 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E99935.6020105@elzevir.fr>
References: <200904162251.n3GMplh16417@f7.net>
	<49E8F246.8010701@elzevir.fr>	<49E98D33.7010804@telecom-bretagne.eu>
	<49E99935.6020105@elzevir.fr>
Message-ID: <49E99D94.3010904@elvenkind.com>

Manuel P?gouri?-Gonnard wrote:
> Elie Roux a ?crit :
>> I think the point is to allow luatex to replace pdfetex as the default
>> engine... In this case you cannot provide unprefixed primitives by default.
>> [...]
>> - if he is like 90% of the users and doesn't want to change the files he
>> created years ago, he'll use pdftex (which is in fact LuaTeX without the
>> extra primitives), and won't load luatextra.sty, so his files won't be
>> broken.
>>
> Right, I overlooked that. Good point.

This is just a small point, but let me remind you that not enabling
the new luatex/aleph primitives does not make luatex be exactly the
same as pdftex.

There are bits of pdftex missing in luatex (like Heiko's utility
functions, \TeXXeT, tcx translations, mltex, src-specials), and
there are also new bits that are not related to primitives
that cannot be turned off (like utf-8 i/o, the larger \char
and \lccode etc. ranges, scanning of attr/dir keywords for boxes).

Best wishes,
Taco


From elie.roux at telecom-bretagne.eu  Sat Apr 18 12:31:20 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Sat, 18 Apr 2009 12:31:20 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E8480D.1000401@telecom-bretagne.eu>
References: <49E73844.4030107@telecom-bretagne.eu>	<49E739A2.1010507@elvenkind.com>	<20090416163111.GC20643@gamma.logic.tuwien.ac.at>	<49E75F1D.1050301@telecom-bretagne.eu>	<49E76531.9000005@elzevir.fr>	<49E776B7.1070105@gmx.de>	<1qwlmkutq1ylg$.dlg@nililand.de>
	<49E845C6.4060202@elvenkind.com>
	<49E8480D.1000401@telecom-bretagne.eu>
Message-ID: <49E9ABF8.3060301@telecom-bretagne.eu>

Elie Roux a ?crit :
> I agree... maybe we should simply let luatex (and lualatex) be in pdf 
> mode, remove pdfluatex (and pdflualatex), and let people who really 
> want dvi use \pdfoutput=0... This sounds like a good solution to me...

As noone seem to object, here are the (two) ini files for this. I've 
tested them with latest LuaTeX svn version, if someone could check them 
too... Karl is it OK with you?

Thank you,
-- 
Elie
-------------- next part --------------
A non-text attachment was scrubbed...
Name: inifiles.tgz
Type: application/x-gtar
Size: 323 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090418/2165797a/attachment.gtar 

From mpg at elzevir.fr  Sat Apr 18 13:30:47 2009
From: mpg at elzevir.fr (=?ISO-8859-13?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Sat, 18 Apr 2009 13:30:47 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E9ABF8.3060301@telecom-bretagne.eu>
References: <49E73844.4030107@telecom-bretagne.eu>	<49E739A2.1010507@elvenkind.com>	<20090416163111.GC20643@gamma.logic.tuwien.ac.at>	<49E75F1D.1050301@telecom-bretagne.eu>	<49E76531.9000005@elzevir.fr>	<49E776B7.1070105@gmx.de>	<1qwlmkutq1ylg$.dlg@nililand.de>	<49E845C6.4060202@elvenkind.com>	<49E8480D.1000401@telecom-bretagne.eu>
	<49E9ABF8.3060301@telecom-bretagne.eu>
Message-ID: <49E9B9E7.7070908@elzevir.fr>

Elie Roux a ?crit :
> As noone seem to object, here are the (two) ini files for this. I've
> tested them with latest LuaTeX svn version, if someone could check them
> too... Karl is it OK with you?
> 
Tested with 0.36.0, 0.37.0, 0.38.0, 0.39.0 and current svn (#2324) on top of
fairly up-to-date TL'08. Tests are:
- build the formats
- compile story.tex, resp. sample2e.tex.

Not very surprisingly, everything works fine :-)

The formats cannot be generated with pre-0.36 luatex because of \direclua syntax
change. I don't think this is really a problem, but it should be fairly easy to
adapt the code in order to support earlier luatex versions if needed.

Manuel.

From mpg at elzevir.fr  Sat Apr 18 13:33:21 2009
From: mpg at elzevir.fr (=?ISO-8859-15?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Sat, 18 Apr 2009 13:33:21 +0200
Subject: [luatex] Why is --progname needed?
In-Reply-To: <49E83875.1000700@elvenkind.com>
References: <49E79E5D.5070602@elzevir.fr> <49E7A0BF.6030004@elvenkind.com>
	<49E83875.1000700@elvenkind.com>
Message-ID: <49E9BA81.9080101@elzevir.fr>

Taco Hoekwater a ?crit :
> If you want, you can try #2310 (trunk), which removes the restriction.
> 
Tried with #2324, works fine.

By the way, using #2324 I get:

mpg at roth:~% luatex --version
This is LuaTeX, Version snapshot-0.39.0-2009041812 luatex.web v2306

I find the v2306 mention quite confusing, don't you?

Thanks,
Manuel.

From hartmut_henkel at gmx.de  Sat Apr 18 13:37:54 2009
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Sat, 18 Apr 2009 13:37:54 +0200 (CEST)
Subject: [luatex] Why is --progname needed?
In-Reply-To: <49E9BA81.9080101@elzevir.fr>
References: <49E79E5D.5070602@elzevir.fr> <49E7A0BF.6030004@elvenkind.com>
	<49E83875.1000700@elvenkind.com> <49E9BA81.9080101@elzevir.fr>
Message-ID: <alpine.DEB.1.00.0904181336060.2383@hahepc1.hahe>

On Sat, 18 Apr 2009, Manuel P?gouri?-Gonnard wrote:

> Taco Hoekwater a ?crit :
> > If you want, you can try #2310 (trunk), which removes the restriction.
> >
> Tried with #2324, works fine.
>
> By the way, using #2324 I get:
>
> mpg at roth:~% luatex --version
> This is LuaTeX, Version snapshot-0.39.0-2009041812 luatex.web v2306
>
> I find the v2306 mention quite confusing, don't you?

maybe one should write something like ">= v2306" (at least it's to be
understood as that, i guess), else one has to touch luatex.web after any
luatex code change.

Regards, Hartmut

From elie.roux at telecom-bretagne.eu  Sat Apr 18 13:44:26 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Sat, 18 Apr 2009 13:44:26 +0200
Subject: [luatex] Why is --progname needed?
In-Reply-To: <49E9BA81.9080101@elzevir.fr>
References: <49E79E5D.5070602@elzevir.fr>
	<49E7A0BF.6030004@elvenkind.com>	<49E83875.1000700@elvenkind.com>
	<49E9BA81.9080101@elzevir.fr>
Message-ID: <49E9BD1A.70808@telecom-bretagne.eu>

Manuel P?gouri?-Gonnard a ?crit :
> mpg at roth:~% luatex --version
> This is LuaTeX, Version snapshot-0.39.0-2009041812 luatex.web v2306
>
> I find the v2306 mention quite confusing, don't you?
>   

I don't have this with rev 2323... Just another cosmetic question: is it 
necessary to write "restricted \write18 enabled." or "\write18 enabled" 
when shell_escape is set to p or t in texmf.cnf?
-- 
Elie

From elie.roux at telecom-bretagne.eu  Sat Apr 18 13:46:12 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Sat, 18 Apr 2009 13:46:12 +0200
Subject: [luatex] Why is --progname needed?
In-Reply-To: <49E9BD1A.70808@telecom-bretagne.eu>
References: <49E79E5D.5070602@elzevir.fr>	<49E7A0BF.6030004@elvenkind.com>	<49E83875.1000700@elvenkind.com>	<49E9BA81.9080101@elzevir.fr>
	<49E9BD1A.70808@telecom-bretagne.eu>
Message-ID: <49E9BD84.5070402@telecom-bretagne.eu>

Elie Roux a ?crit :
> I don't have this with rev 2323. 

Sorry, I didn't see the --version...
-- 
Elie

From mpg at elzevir.fr  Sat Apr 18 13:59:28 2009
From: mpg at elzevir.fr (=?ISO-8859-15?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Sat, 18 Apr 2009 13:59:28 +0200
Subject: [luatex] Why is --progname needed?
In-Reply-To: <alpine.DEB.1.00.0904181336060.2383@hahepc1.hahe>
References: <49E79E5D.5070602@elzevir.fr>
	<49E7A0BF.6030004@elvenkind.com>	<49E83875.1000700@elvenkind.com>
	<49E9BA81.9080101@elzevir.fr>
	<alpine.DEB.1.00.0904181336060.2383@hahepc1.hahe>
Message-ID: <49E9C0A0.60702@elzevir.fr>

Hartmut Henkel a ?crit :
> maybe one should write something like ">= v2306" (at least it's to be
> understood as that, i guess), else one has to touch luatex.web after any
> luatex code change.
> 
Yes, I think >= 2306 would be better.

Manuel.

From elie.roux at telecom-bretagne.eu  Sat Apr 18 14:11:33 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Sat, 18 Apr 2009 14:11:33 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E9B9E7.7070908@elzevir.fr>
References: <49E73844.4030107@telecom-bretagne.eu>	<49E739A2.1010507@elvenkind.com>	<20090416163111.GC20643@gamma.logic.tuwien.ac.at>	<49E75F1D.1050301@telecom-bretagne.eu>	<49E76531.9000005@elzevir.fr>	<49E776B7.1070105@gmx.de>	<1qwlmkutq1ylg$.dlg@nililand.de>	<49E845C6.4060202@elvenkind.com>	<49E8480D.1000401@telecom-bretagne.eu>	<49E9ABF8.3060301@telecom-bretagne.eu>
	<49E9B9E7.7070908@elzevir.fr>
Message-ID: <49E9C375.3000109@telecom-bretagne.eu>

Manuel P?gouri?-Gonnard a ?crit :
> The formats cannot be generated with pre-0.36 luatex because of \direclua syntax
> change. I don't think this is really a problem, but it should be fairly easy to
> adapt the code in order to support earlier luatex versions if needed.
>   

These ones should work with every version of LuaTeX. Can you test them 
on your TL2008?

Thank you!
-- 
Elie
-------------- next part --------------
A non-text attachment was scrubbed...
Name: inifiles.tgz
Type: application/x-gtar
Size: 362 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090418/875b731b/attachment.gtar 

From mpg at elzevir.fr  Sat Apr 18 14:36:31 2009
From: mpg at elzevir.fr (=?ISO-8859-13?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Sat, 18 Apr 2009 14:36:31 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E9C375.3000109@telecom-bretagne.eu>
References: <49E73844.4030107@telecom-bretagne.eu>	<49E739A2.1010507@elvenkind.com>	<20090416163111.GC20643@gamma.logic.tuwien.ac.at>	<49E75F1D.1050301@telecom-bretagne.eu>	<49E76531.9000005@elzevir.fr>	<49E776B7.1070105@gmx.de>	<1qwlmkutq1ylg$.dlg@nililand.de>	<49E845C6.4060202@elvenkind.com>	<49E8480D.1000401@telecom-bretagne.eu>	<49E9ABF8.3060301@telecom-bretagne.eu>	<49E9B9E7.7070908@elzevir.fr>
	<49E9C375.3000109@telecom-bretagne.eu>
Message-ID: <49E9C94F.5010207@elzevir.fr>

Elie Roux a ?crit :
> These ones should work with every version of LuaTeX. Can you test them
> on your TL2008?
> 
Works fine with luatex 0.25.4, 0.30.3, 0.35.0, 0.36.0, 0.39.0 (I dont think it
is necessary to test more versions).

I would suggest to factor out the initial code in a file luatexconfig.tex,
analogous to pdftexconfig.tex, like this:

-----BEGIN luatexconfig.tex-----
\begingroup
\catcode `\{=1
\catcode `\}=2
\expandafter\ifx\csname luatexversion\endcsname\relax
  \let\luatexversion\undefined
  \directlua{tex.enableprimitives('', tex.extraprimitives())}
\fi
\endgroup
-----END luatexconfig.tex-----

----BEGIN luatex.ini-----
\input luatexconfig.tex
\input pdftexconfig.tex
\scrollmode
\input latex.ltx
\endinput
-----END luatex.ini-----

-----BEGIN lualatex.ini-----
\input luatexconfig.tex
\input pdftexconfig.tex
\input plain
\dump
\endinput
-----END lualatex.ini-----

Manuel.

From elie.roux at telecom-bretagne.eu  Sat Apr 18 14:42:20 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Sat, 18 Apr 2009 14:42:20 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E9C94F.5010207@elzevir.fr>
References: <49E73844.4030107@telecom-bretagne.eu>	<49E739A2.1010507@elvenkind.com>	<20090416163111.GC20643@gamma.logic.tuwien.ac.at>	<49E75F1D.1050301@telecom-bretagne.eu>	<49E76531.9000005@elzevir.fr>	<49E776B7.1070105@gmx.de>	<1qwlmkutq1ylg$.dlg@nililand.de>	<49E845C6.4060202@elvenkind.com>	<49E8480D.1000401@telecom-bretagne.eu>	<49E9ABF8.3060301@telecom-bretagne.eu>	<49E9B9E7.7070908@elzevir.fr>	<49E9C375.3000109@telecom-bretagne.eu>
	<49E9C94F.5010207@elzevir.fr>
Message-ID: <49E9CAAC.7060400@telecom-bretagne.eu>

Manuel P?gouri?-Gonnard a ?crit :
> I would suggest to factor out the initial code in a file luatexconfig.tex,
> analogous to pdftexconfig.tex, like this:
>  [...]

Agreed.
-- 
Elie

From taco at elvenkind.com  Sat Apr 18 18:23:50 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Sat, 18 Apr 2009 18:23:50 +0200
Subject: [luatex] Why is --progname needed?
In-Reply-To: <alpine.DEB.1.00.0904181336060.2383@hahepc1.hahe>
References: <49E79E5D.5070602@elzevir.fr>
	<49E7A0BF.6030004@elvenkind.com>	<49E83875.1000700@elvenkind.com>
	<49E9BA81.9080101@elzevir.fr>
	<alpine.DEB.1.00.0904181336060.2383@hahepc1.hahe>
Message-ID: <49E9FE96.1010201@elvenkind.com>

Hartmut Henkel wrote:
> maybe one should write something like ">= v2306" (at least it's to be

Change committed as #2330

Best wishes,
Taco


From karl at freefriends.org  Sun Apr 19 01:20:46 2009
From: karl at freefriends.org (Karl Berry)
Date: Sat, 18 Apr 2009 18:20:46 -0500
Subject: [luatex] Why is --progname needed?
In-Reply-To: <49E9BD1A.70808@telecom-bretagne.eu>
Message-ID: <200904182320.n3INKkf10160@f7.net>

    necessary to write "restricted \write18 enabled." or "\write18 enabled" 
    when shell_escape is set to p or t in texmf.cnf?

"Necessary" doesn't enter into it, of course it is a deliberate choice.

Personally, I think \write18 is worth the extra line.

However, I think the other similar lines (about %&, etc.), can be
omitted from the terminal output and just written to the log.  I already
made that change for some programs and communicated with Thanh and Taco
about it.

From karl at freefriends.org  Sun Apr 19 01:20:46 2009
From: karl at freefriends.org (Karl Berry)
Date: Sat, 18 Apr 2009 18:20:46 -0500
Subject: [luatex] Why is --progname needed?
In-Reply-To: <49E9BD1A.70808@telecom-bretagne.eu>
Message-ID: <200904182320.n3INKkF10170@f7.net>

    > This is LuaTeX, Version snapshot-0.39.0-2009041812 luatex.web v2306

Since 2306 doesn't tell the whole story, is it useful in practice?
Taco?  It seems like the timestamp is the most useful version
identification?


From arthur.reutenauer at normalesup.org  Sun Apr 19 01:27:28 2009
From: arthur.reutenauer at normalesup.org (Arthur Reutenauer)
Date: Sun, 19 Apr 2009 01:27:28 +0200
Subject: [luatex] Why is --progname needed?
In-Reply-To: <200904182320.n3INKkF10170@f7.net>
References: <49E9BD1A.70808@telecom-bretagne.eu>
	<200904182320.n3INKkF10170@f7.net>
Message-ID: <20090418232728.GD32748@phare.normalesup.org>

>        It seems like the timestamp is the most useful version
> identification?

  The timestamp is set at compile-time, not commit-time; it has nothing
to do with the state of the source files you're compiling from (you
could be compiling now a binary from LuaTeX revision #1 from 3 years
ago, for that matter).  I'm personally quite happy to have some
information related to the SVN revision number, even if it isn't
perfect.

	Arthur

From karl at freefriends.org  Sun Apr 19 01:37:21 2009
From: karl at freefriends.org (Karl Berry)
Date: Sat, 18 Apr 2009 18:37:21 -0500
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E99D94.3010904@elvenkind.com>
Message-ID: <200904182337.n3INbL215263@f7.net>

    There are bits of pdftex missing in luatex

Fair enough.  So luatex will never be a drop-in replacement for pdftex.
Good to know :).

From karl at freefriends.org  Sun Apr 19 01:37:21 2009
From: karl at freefriends.org (Karl Berry)
Date: Sat, 18 Apr 2009 18:37:21 -0500
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E98982.8050309@telecom-bretagne.eu>
Message-ID: <200904182337.n3INbLU15269@f7.net>

Hi Elie,

    In luaotfload I copied the lua files from ConTeXt and renamed 
    them (with a prefix)

Oh yes, now I remember that discussion with you.  Sorry.

Well, the situation has changed: as I understand it, Hans is now
auto-creating a standalone luatex-fonts.tex that will not depend on the
rest of ConTeXt.  At least that is what I asked for.

    Anyway, having two implementations is necessary because ConTeXt's 
    implementation is not compatible with luatextra.

Hmm.

From karl at freefriends.org  Sun Apr 19 01:52:00 2009
From: karl at freefriends.org (Karl Berry)
Date: Sat, 18 Apr 2009 18:52:00 -0500
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49E9ABF8.3060301@telecom-bretagne.eu>
Message-ID: <200904182352.n3INq0N18936@f7.net>

    let luatex (and lualatex) be in pdf mode, remove pdfluatex (and
    pdflualatex),

Ok, I guess.

    and let people who really want dvi use \pdfoutput=0... 

I strongly think we should have dvilua(la)tex, since it basically costs
nothing and will help people who use DVI (there are lots of them, even
if they aren't on this list) try LuaTeX.  Expecting a document change to
get the desired output format seems nonsensical to me.

Unfortunately the name looks like a DVI driver instead of a TeX engine,
but I can't think of anything better.

k

From khaledhosny at eglug.org  Sun Apr 19 02:11:00 2009
From: khaledhosny at eglug.org (Khaled Hosny)
Date: Sun, 19 Apr 2009 02:11:00 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <200904182352.n3INq0N18936@f7.net>
References: <49E9ABF8.3060301@telecom-bretagne.eu>
	<200904182352.n3INq0N18936@f7.net>
Message-ID: <20090419001059.GA12875@khaled-laptop>

On Sat, Apr 18, 2009 at 06:52:00PM -0500, Karl Berry wrote:
>     let luatex (and lualatex) be in pdf mode, remove pdfluatex (and
>     pdflualatex),
> 
> Ok, I guess.
> 
>     and let people who really want dvi use \pdfoutput=0... 
> 
> I strongly think we should have dvilua(la)tex, since it basically costs
> nothing and will help people who use DVI (there are lots of them, even
> if they aren't on this list) try LuaTeX.  Expecting a document change to
> get the desired output format seems nonsensical to me.

Out of curiosity, what is wrong with "--output-format=dvi"?

Regards,
 Khaled


-- 
 Khaled Hosny
 Arabic localiser and member of Arabeyes.org team
 Free font developer
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: Digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090419/0f660fb8/attachment.bin 

From karl at freefriends.org  Sun Apr 19 02:36:25 2009
From: karl at freefriends.org (Karl Berry)
Date: Sat, 18 Apr 2009 19:36:25 -0500
Subject: [luatex] ini files for TL 2009
In-Reply-To: <20090419001059.GA12875@khaled-laptop>
Message-ID: <200904190036.n3J0aPX29752@f7.net>

    Out of curiosity, what is wrong with "--output-format=dvi"?

Users and front ends are used to changing engines, not specifying
options.

Anyone who actually wanted to use luatex in dvi mode for whatever reason
would certainly want one reasonably-named command to do it.

From elie.roux at telecom-bretagne.eu  Sun Apr 19 12:27:11 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Sun, 19 Apr 2009 12:27:11 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <200904182352.n3INq0N18936@f7.net>
References: <200904182352.n3INq0N18936@f7.net>
Message-ID: <49EAFC7F.7050104@telecom-bretagne.eu>

Karl Berry a ?crit :
> Expecting a document change to
> get the desired output format seems nonsensical to me.
>   

Good point. But they'll have to change inputenc for luainputenc anyway, 
so they'll definitely have to change their documents for LuaTeX, why not 
adding a \pdfoutput=0 or a \usepackage{dvioutput} too?
-- 
Elie

From luatex at nililand.de  Sun Apr 19 15:37:41 2009
From: luatex at nililand.de (Ulrike Fischer)
Date: Sun, 19 Apr 2009 15:37:41 +0200
Subject: [luatex] ini files for TL 2009
References: <200904182352.n3INq0N18936@f7.net>
	<49EAFC7F.7050104@telecom-bretagne.eu>
Message-ID: <hkrbckx9bun7.dlg@nililand.de>

Am Sun, 19 Apr 2009 12:27:11 +0200 schrieb Elie Roux:

> Karl Berry a ?crit :
>> Expecting a document change to
>> get the desired output format seems nonsensical to me.

> Good point. But they'll have to change inputenc for luainputenc anyway, 
> so they'll definitely have to change their documents for LuaTeX, why not 
> adding a \pdfoutput=0 or a \usepackage{dvioutput} too?

A lot of packages make a lot of efforts to detect the engine and the
output mode to allow you to process your documents with various
engines without changing them. And there are packages like ifpdf,
ifluatex, ifxetex to help to write document which can be used with
various engines. So it seems a bit nonsensical to load a restricting
package like dvioutput and I will certainly never do it. After all
there are cases e.g. when using pst-pdf where you want to process a
document in both modes.   



-- 
Ulrike Fischer 


From elie.roux at telecom-bretagne.eu  Sun Apr 19 15:53:40 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Sun, 19 Apr 2009 15:53:40 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <hkrbckx9bun7.dlg@nililand.de>
References: <200904182352.n3INq0N18936@f7.net>	<49EAFC7F.7050104@telecom-bretagne.eu>
	<hkrbckx9bun7.dlg@nililand.de>
Message-ID: <49EB2CE4.2060004@telecom-bretagne.eu>

Ulrike Fischer a ?crit :
> A lot of packages make a lot of efforts to detect the engine and the
> output mode to allow you to process your documents with various
> engines without changing them. And there are packages like ifpdf,
> ifluatex, ifxetex to help to write document which can be used with
> various engines. So it seems a bit nonsensical to load a restricting
> package like dvioutput and I will certainly never do it.

I think I don't really understand what you mean... I won't use dvioutput 
neither, as I don't use dvi output... but we're talking about people 
wanting a dvi output instead of the default pdf.

>  After all
> there are cases e.g. when using pst-pdf where you want to process a
> document in both modes.   
>   

What do you mean processing a document in both modes?

Let's make usecases:

John doesn't care at all about dvi, pdf is fine for him. He won't use 
dvioutput, luatex will default to pdf mode, and his packages will adapt 
to pdf output.

Bill wants a dvi output, he has certainly very good reasons to want it. 
He uses dvioutput, luatex will be in dvi mode, and his packages will 
adapt to dvi output.

What's wrong with it?
-- 
Elie

From luatex at nililand.de  Sun Apr 19 16:05:35 2009
From: luatex at nililand.de (Ulrike Fischer)
Date: Sun, 19 Apr 2009 16:05:35 +0200
Subject: [luatex] ini files for TL 2009
References: <200904182352.n3INq0N18936@f7.net>	<49EAFC7F.7050104@telecom-bretagne.eu>
	<hkrbckx9bun7.dlg@nililand.de>
	<49EB2CE4.2060004@telecom-bretagne.eu>
Message-ID: <4p1fsrud5y7j$.dlg@nililand.de>

Am Sun, 19 Apr 2009 15:53:40 +0200 schrieb Elie Roux:

> Ulrike Fischer a ?crit :
>> A lot of packages make a lot of efforts to detect the engine and the
>> output mode to allow you to process your documents with various
>> engines without changing them. And there are packages like ifpdf,
>> ifluatex, ifxetex to help to write document which can be used with
>> various engines. So it seems a bit nonsensical to load a restricting
>> package like dvioutput and I will certainly never do it.
> 
> I think I don't really understand what you mean... I won't use dvioutput 
> neither, as I don't use dvi output... but we're talking about people 
> wanting a dvi output instead of the default pdf.

No, we are talking about people who sometimes want dvi and sometimes
pdf. 



>> After all there are cases e.g. when using pst-pdf where you want
>> to process a document in both modes.   

 
> What do you mean processing a document in both modes?
>
> Let's make usecases:
> 
> John doesn't care at all about dvi, pdf is fine for him. He won't use 
> dvioutput, luatex will default to pdf mode, and his packages will adapt 
> to pdf output.
> 
> Bill wants a dvi output, he has certainly very good reasons to want it. 
> He uses dvioutput, luatex will be in dvi mode, and his packages will 
> adapt to dvi output.
> 
> What's wrong with it?

That there is also Harry which processes its document first in
dvi-mode to extract e.g. the pstricks images, then converts them to
pdf and then makes the final document in pdf-mode. Read the docu of
pst-pdf or auto-pst-pdf it you don't understand what I mean.

Btw: In the context mailing someone asked today how to make a dvi
because he wanted to you asymptote to make graphics. 

And there are also people who write packages and test them in both
modes. Did you never made such tests?


-- 
Ulrike Fischer 


From elie.roux at telecom-bretagne.eu  Sun Apr 19 16:25:31 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Sun, 19 Apr 2009 16:25:31 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <4p1fsrud5y7j$.dlg@nililand.de>
References: <200904182352.n3INq0N18936@f7.net>	<49EAFC7F.7050104@telecom-bretagne.eu>	<hkrbckx9bun7.dlg@nililand.de>	<49EB2CE4.2060004@telecom-bretagne.eu>
	<4p1fsrud5y7j$.dlg@nililand.de>
Message-ID: <49EB345B.4030105@telecom-bretagne.eu>

Ulrike Fischer a ?crit :
> That there is also Harry which processes its document first in
> dvi-mode to extract e.g. the pstricks images, then converts them to
> pdf and then makes the final document in pdf-mode.

Ok, now I understand!

I think dviluatex is far from good, though it may be the best solution...
-- 
Elie

From Arno.Trautmann at gmx.de  Sun Apr 19 17:11:25 2009
From: Arno.Trautmann at gmx.de (Arno Trautmann)
Date: Sun, 19 Apr 2009 17:11:25 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49EB345B.4030105@telecom-bretagne.eu>
References: <200904182352.n3INq0N18936@f7.net>	<49EAFC7F.7050104@telecom-bretagne.eu>	<hkrbckx9bun7.dlg@nililand.de>	<49EB2CE4.2060004@telecom-bretagne.eu>	<4p1fsrud5y7j$.dlg@nililand.de>
	<49EB345B.4030105@telecom-bretagne.eu>
Message-ID: <49EB3F1D.3060804@gmx.de>

Elie Roux wrote:
> Ulrike Fischer a ?crit :
>> That there is also Harry which processes its document first in
>> dvi-mode to extract e.g. the pstricks images, then converts them to
>> pdf and then makes the final document in pdf-mode.
> 
> Ok, now I understand!
> 
> I think dviluatex is far from good, though it may be the best solution...

Why not take luatex --dvi-output? You can use a shortcut in your editor
for the command line argument, too. It is easy to remember and someone
needing dvi output will surely manage to add the argument.

Arno

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 260 bytes
Desc: OpenPGP digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090419/90c57cb9/attachment.bin 

From hartmut_henkel at gmx.de  Sun Apr 19 17:25:35 2009
From: hartmut_henkel at gmx.de (Hartmut Henkel)
Date: Sun, 19 Apr 2009 17:25:35 +0200 (CEST)
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49EB3F1D.3060804@gmx.de>
References: <200904182352.n3INq0N18936@f7.net>
	<49EAFC7F.7050104@telecom-bretagne.eu>
	<hkrbckx9bun7.dlg@nililand.de>
	<49EB2CE4.2060004@telecom-bretagne.eu>
	<4p1fsrud5y7j$.dlg@nililand.de>
	<49EB345B.4030105@telecom-bretagne.eu> <49EB3F1D.3060804@gmx.de>
Message-ID: <alpine.DEB.1.00.0904191724140.29709@hahepc1.hahe>

On Sun, 19 Apr 2009, Arno Trautmann wrote:

> Elie Roux wrote:
> > Ulrike Fischer a ?crit :
> >> That there is also Harry which processes its document first in
> >> dvi-mode to extract e.g. the pstricks images, then converts them to
> >> pdf and then makes the final document in pdf-mode.
> >
> > Ok, now I understand!
> >
> > I think dviluatex is far from good, though it may be the best solution...
>
> Why not take luatex --dvi-output?

but wouldn't this mean that one can't have two different .ini files for
dvi and pdf mode? They are not identical, i guess.

Regards, Hartmut

From elie.roux at telecom-bretagne.eu  Sun Apr 19 17:37:05 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Sun, 19 Apr 2009 17:37:05 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <alpine.DEB.1.00.0904191724140.29709@hahepc1.hahe>
References: <200904182352.n3INq0N18936@f7.net>	<49EAFC7F.7050104@telecom-bretagne.eu>	<hkrbckx9bun7.dlg@nililand.de>	<49EB2CE4.2060004@telecom-bretagne.eu>	<4p1fsrud5y7j$.dlg@nililand.de>	<49EB345B.4030105@telecom-bretagne.eu>
	<49EB3F1D.3060804@gmx.de>
	<alpine.DEB.1.00.0904191724140.29709@hahepc1.hahe>
Message-ID: <49EB4521.1050106@telecom-bretagne.eu>

Hartmut Henkel a ?crit :
> but wouldn't this mean that one can't have two different .ini files for
> dvi and pdf mode? They are not identical, i guess.
>   

Maybe the main objection is technical... is it technically possible in 
the current state to have an option loading an alternate ini file?
-- 
Elie

From Arno.Trautmann at gmx.de  Sun Apr 19 17:40:07 2009
From: Arno.Trautmann at gmx.de (Arno Trautmann)
Date: Sun, 19 Apr 2009 17:40:07 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <alpine.DEB.1.00.0904191724140.29709@hahepc1.hahe>
References: <200904182352.n3INq0N18936@f7.net>	<49EAFC7F.7050104@telecom-bretagne.eu>	<hkrbckx9bun7.dlg@nililand.de>	<49EB2CE4.2060004@telecom-bretagne.eu>	<4p1fsrud5y7j$.dlg@nililand.de>	<49EB345B.4030105@telecom-bretagne.eu>
	<49EB3F1D.3060804@gmx.de>
	<alpine.DEB.1.00.0904191724140.29709@hahepc1.hahe>
Message-ID: <49EB45D7.80302@gmx.de>

Hartmut Henkel wrote:
> On Sun, 19 Apr 2009, Arno Trautmann wrote:
> 
>> Elie Roux wrote:
>>> Ulrike Fischer a ?crit :
>>>> That there is also Harry which processes its document first in
>>>> dvi-mode to extract e.g. the pstricks images, then converts them to
>>>> pdf and then makes the final document in pdf-mode.
>>> Ok, now I understand!
>>>
>>> I think dviluatex is far from good, though it may be the best solution...
>> Why not take luatex --dvi-output?
> 
> but wouldn't this mean that one can't have two different .ini files for
> dvi and pdf mode? They are not identical, i guess.

I don?t think so. The argument should just load a small file with maybe
only the one line \pdfoutput=0 and then load the normal .ini.

Arno

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 260 bytes
Desc: OpenPGP digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090419/ab32b53f/attachment-0001.bin 

From elie.roux at telecom-bretagne.eu  Sun Apr 19 17:45:46 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Sun, 19 Apr 2009 17:45:46 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49EB45D7.80302@gmx.de>
References: <200904182352.n3INq0N18936@f7.net>	<49EAFC7F.7050104@telecom-bretagne.eu>	<hkrbckx9bun7.dlg@nililand.de>	<49EB2CE4.2060004@telecom-bretagne.eu>	<4p1fsrud5y7j$.dlg@nililand.de>	<49EB345B.4030105@telecom-bretagne.eu>	<49EB3F1D.3060804@gmx.de>	<alpine.DEB.1.00.0904191724140.29709@hahepc1.hahe>
	<49EB45D7.80302@gmx.de>
Message-ID: <49EB472A.1040808@telecom-bretagne.eu>

Arno Trautmann a ?crit :
> I don?t think so. The argument should just load a small file with maybe
> only the one line \pdfoutput=0 and then load the normal .ini.
>   

Actually it should load the ini file, then the small file, to let the 
ini file define the primitive \pdfoutput
-- 
Elie

From Arno.Trautmann at gmx.de  Sun Apr 19 17:47:06 2009
From: Arno.Trautmann at gmx.de (Arno Trautmann)
Date: Sun, 19 Apr 2009 17:47:06 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49EB472A.1040808@telecom-bretagne.eu>
References: <200904182352.n3INq0N18936@f7.net>	<49EAFC7F.7050104@telecom-bretagne.eu>	<hkrbckx9bun7.dlg@nililand.de>	<49EB2CE4.2060004@telecom-bretagne.eu>	<4p1fsrud5y7j$.dlg@nililand.de>	<49EB345B.4030105@telecom-bretagne.eu>	<49EB3F1D.3060804@gmx.de>	<alpine.DEB.1.00.0904191724140.29709@hahepc1.hahe>	<49EB45D7.80302@gmx.de>
	<49EB472A.1040808@telecom-bretagne.eu>
Message-ID: <49EB477A.6020905@gmx.de>

Elie Roux wrote:
> Arno Trautmann a ?crit :
>> I don?t think so. The argument should just load a small file with maybe
>> only the one line \pdfoutput=0 and then load the normal .ini.
>>   
> 
> Actually it should load the ini file, then the small file, to let the
> ini file define the primitive \pdfoutput

Sure, I have no idea about the implementation, I?m just talking from a
user?s point of view.

Arno

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 260 bytes
Desc: OpenPGP digital signature
Url : http://tug.org/pipermail/luatex/attachments/20090419/ac71dca2/attachment.bin 

From karl at freefriends.org  Mon Apr 20 01:03:09 2009
From: karl at freefriends.org (Karl Berry)
Date: Sun, 19 Apr 2009 18:03:09 -0500
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49EAFC7F.7050104@telecom-bretagne.eu>
Message-ID: <200904192303.n3JN39328320@f7.net>

The TeX world has historically always provided different engine names
for DVI vs. PDF, and (as I said) that is what users and front ends
expect.  So far I have not seen anyone advance any arguments why
continuing to do so here, with dvilua(la)tex, is an explicitly bad
thing.  Yes, there are many alternative ways the output format could be
specified, but I don't see that any of them provides obvious benefits
over different engine names.

Providing the different names is simple to do, and so far, I continue to
want to do that.

From karl at freefriends.org  Mon Apr 20 01:03:09 2009
From: karl at freefriends.org (Karl Berry)
Date: Sun, 19 Apr 2009 18:03:09 -0500
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49EAFC7F.7050104@telecom-bretagne.eu>
Message-ID: <200904192303.n3JN39v28326@f7.net>

    But they'll have to change inputenc for luainputenc anyway, 

Now, but maybe not forever.

    so they'll definitely have to change their documents for LuaTeX, 

Not all documents.

From luatex at nililand.de  Mon Apr 20 09:39:10 2009
From: luatex at nililand.de (Ulrike Fischer)
Date: Mon, 20 Apr 2009 09:39:10 +0200
Subject: [luatex] ini files for TL 2009
References: <200904182352.n3INq0N18936@f7.net>	<49EAFC7F.7050104@telecom-bretagne.eu>	<hkrbckx9bun7.dlg@nililand.de>	<49EB2CE4.2060004@telecom-bretagne.eu>	<4p1fsrud5y7j$.dlg@nililand.de>	<49EB345B.4030105@telecom-bretagne.eu>
	<49EB3F1D.3060804@gmx.de>
	<alpine.DEB.1.00.0904191724140.29709@hahepc1.hahe>
	<49EB45D7.80302@gmx.de>
Message-ID: <8t0lucoxlk01$.dlg@nililand.de>

Am Sun, 19 Apr 2009 17:40:07 +0200 schrieb Arno Trautmann:

>>> Why not take luatex --dvi-output?

>> but wouldn't this mean that one can't have two different .ini files for
>> dvi and pdf mode? They are not identical, i guess.
 
> I don?t think so. The argument should just load a small file with maybe
> only the one line \pdfoutput=0 and then load the normal .ini.

The ini-file are used during format _generation_ but
--output-mode=dvi should set output mode in a normal compilation, so
it can't have an influence on the ini-file used by the format.

As a format in general sets \pdfoutput --output-mode must change it
_after_ the format is loaded to have an effect. As far as I can see
the current implementation of --output-mode=dvi (in miktex) does it
this way: pdflatex --output-mode=dvi first loads the format and then
(re)sets \pdfoutput to 0. 

But this also means that the format is generated with a different
value of \pdfoutput then the one later used in the document.
Currently this shouldn't be a problem, but in the future it could be
that the format contain mode-dependant code (e.g. for graphics or
otf-font support), so in general I do find it a cleaner solution if
format and document use the same \pdfoutput value. 



-- 
Ulrike Fischer 


From elie.roux at telecom-bretagne.eu  Tue Apr 21 16:50:58 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Tue, 21 Apr 2009 16:50:58 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <200904192303.n3JN39328320@f7.net>
References: <200904192303.n3JN39328320@f7.net>
Message-ID: <49EDDD52.8020606@telecom-bretagne.eu>

Karl Berry a ?crit :
> Providing the different names is simple to do, and so far, I continue to
> want to do that.

As Karl seems to have the last word, here are the corresponding ini 
files. Tested on my TeXLive 2007, if someone can test them on TL2008...

Thank you!
-- 
Elie
-------------- next part --------------
A non-text attachment was scrubbed...
Name: inifiles.tgz
Type: application/x-gtar
Size: 463 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090421/f38ff2af/attachment.gtar 

From elie.roux at telecom-bretagne.eu  Tue Apr 21 17:04:55 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Tue, 21 Apr 2009 17:04:55 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49EDDD52.8020606@telecom-bretagne.eu>
References: <200904192303.n3JN39328320@f7.net>
	<49EDDD52.8020606@telecom-bretagne.eu>
Message-ID: <49EDE097.2010702@telecom-bretagne.eu>

Elie Roux a ?crit :
> As Karl seems to have the last word, here are the corresponding ini 
> files. Tested on my TeXLive 2007, if someone can test them on TL2008...

I have forgotten the copyright notice on luatexconfig.tex. You can say 
it's "Elie Roux, 2009, Public Domain.".
-- 
Elie

From mpg at elzevir.fr  Tue Apr 21 21:59:02 2009
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Tue, 21 Apr 2009 21:59:02 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49EDDD52.8020606@telecom-bretagne.eu>
References: <200904192303.n3JN39328320@f7.net>
	<49EDDD52.8020606@telecom-bretagne.eu>
Message-ID: <49EE2586.8090208@elzevir.fr>

Elie Roux a ?crit :
> As Karl seems to have the last word, here are the corresponding ini
> files. Tested on my TeXLive 2007, if someone can test them on TL2008...
> 
Works fine.

By the way, there is a name conflict with luatexconfig.tex, which is also used
in one of your lualatex packages. At least one of the files should be renamed.

Manuel.

From elie.roux at telecom-bretagne.eu  Tue Apr 21 22:22:38 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Tue, 21 Apr 2009 22:22:38 +0200
Subject: [luatex] ini files for TL 2009
In-Reply-To: <49EE2586.8090208@elzevir.fr>
References: <200904192303.n3JN39328320@f7.net>	<49EDDD52.8020606@telecom-bretagne.eu>
	<49EE2586.8090208@elzevir.fr>
Message-ID: <49EE2B0E.5080000@telecom-bretagne.eu>

Manuel P?gouri?-Gonnard a ?crit :
> By the way, there is a name conflict with luatexconfig.tex, which is also used
> in one of your lualatex packages. At least one of the files should be renamed.

The file on github (created by Will) has no reason to be, I've just 
removed it.

Thanks for the tests!
-- 
Elie

From taco at elvenkind.com  Wed Apr 22 12:26:28 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 22 Apr 2009 12:26:28 +0200
Subject: [luatex] luatex beta 0.40.0
Message-ID: <49EEF0D4.1000606@elvenkind.com>

Hi,

I have just uploaded luatex 0.40.0 to the foundry server,
and will commit the source code to texlive later today.

What's new:

* The embedded MPlib is updated to version 1.200.

* Texlua would crash if run font.read_tfm() was used.

* Luatex would crash on empty \patterns.

* Lots of small C code cleanups.

* \textdir inside a \hbox dir *** was wrong earlier.

* 0.39.0 introduced a bug that would make luatex crash whenever
  font expansion was used.

* Font tables returned by define_font can now have a key named
  'cache' that controls the internal lua font table caching.

* There is no longer a need for an explicit --progname if there
  is no input file given.


The archives can be downloaded from supelec as usual:

        http://foundry.supelec.fr/projects/luatex/

You could also check out the sources via anonymous svn:

  svn co svn://scm.foundry.supelec.fr/svn/luatex/tags/beta-0.40.0

Bugs and feature requests can be added to the issue tracker at

       http://tracker.luatex.org


Have fun,
Taco




From taco at elvenkind.com  Wed Apr 22 14:23:12 2009
From: taco at elvenkind.com (Taco Hoekwater)
Date: Wed, 22 Apr 2009 14:23:12 +0200
Subject: [luatex] luatex beta 0.40.0
In-Reply-To: <49EEF0D4.1000606@elvenkind.com>
References: <49EEF0D4.1000606@elvenkind.com>
Message-ID: <49EF0C30.40302@elvenkind.com>


Hi again,

Taco Hoekwater wrote:
> Hi,
> 
> I have just uploaded luatex 0.40.0 to the foundry server,
> and will commit the source code to texlive later today.

As it turns out, there were two fatal flaws in the release,
so I have cheated a little and have delete the archive files.

I am now in the process of uploading new versions. I saw that
there had been two downloads of the old files already, those
people (I hope you know who you are) should fetch new the new
archives file that will be available shortly.

I am sorry for the inconvenience,

Taco



From preining at logic.at  Mon Apr 27 18:49:33 2009
From: preining at logic.at (Norbert Preining)
Date: Mon, 27 Apr 2009 18:49:33 +0200
Subject: [luatex] luatex beta 0.40.0
In-Reply-To: <49EEF0D4.1000606@elvenkind.com>
References: <49EEF0D4.1000606@elvenkind.com>
Message-ID: <20090427164933.GA22138@gamma.logic.tuwien.ac.at>

On Mi, 22 Apr 2009, Taco Hoekwater wrote:
>   svn co svn://scm.foundry.supelec.fr/svn/luatex/tags/beta-0.40.0

luatex 0.40 has been uploaded to Debian and binaries for various archs
will be available soon on the usual unstable sources.

I included already the ini files rework, and updates to texdoc.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
TRISPEN (n.) A form of intelligent grass. It grows a single, tough
stalk and makes its home on lawns. When it sees the lawnmower coming
it lies down and pops up again after it has gone by.
			--- Douglas Adams, The Meaning of Liff

From elie.roux at telecom-bretagne.eu  Mon Apr 27 19:03:15 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Mon, 27 Apr 2009 19:03:15 +0200
Subject: [luatex] [Dev-luatex]  luatex beta 0.40.0
In-Reply-To: <20090427164933.GA22138@gamma.logic.tuwien.ac.at>
References: <49EEF0D4.1000606@elvenkind.com>
	<20090427164933.GA22138@gamma.logic.tuwien.ac.at>
Message-ID: <49F5E553.8030800@telecom-bretagne.eu>

Norbert Preining a ?crit :
> luatex 0.40 has been uploaded to Debian and binaries for various archs
> will be available soon on the usual unstable sources.
>
> I included already the ini files rework, and updates to texdoc.
>   

Hello,

this is very good news!

The only thing that may miss is the luatex-plain.mem file. This file 
allows the luamplib package to work: it needs a metapost mem file 
generated for the same version of mplib LuaTeX has. The name 
luatex-plain.mem will be the name of the mem file in TeXLive 2009. Is it 
possible to add a script to generate this file when luatex is updated in 
Debian? I wrote a small lua script (to call with texlua) to generate it:

http://tug.ctan.org/get/macros/luatex/generic/luamplib/luamplib-createmem.lua 
(you can call it with no option).

I must say I don't know the policy of Debian in this field... but could 
the debian package include the packages in 
http://tug.ctan.org/tex-archive/macros/luatex/ ?

Thank you in advance,
-- 
Elie

From preining at logic.at  Mon Apr 27 19:12:08 2009
From: preining at logic.at (Norbert Preining)
Date: Mon, 27 Apr 2009 19:12:08 +0200
Subject: [luatex] [Dev-luatex]  luatex beta 0.40.0
In-Reply-To: <49F5E553.8030800@telecom-bretagne.eu>
References: <49EEF0D4.1000606@elvenkind.com>
	<20090427164933.GA22138@gamma.logic.tuwien.ac.at>
	<49F5E553.8030800@telecom-bretagne.eu>
Message-ID: <20090427171208.GA25086@gamma.logic.tuwien.ac.at>

On Mo, 27 Apr 2009, Elie Roux wrote:
> The only thing that may miss is the luatex-plain.mem file. This file 
> allows the luamplib package to work: it needs a metapost mem file 
> generated for the same version of mplib LuaTeX has. The name 
> luatex-plain.mem will be the name of the mem file in TeXLive 2009. Is it 
> possible to add a script to generate this file when luatex is updated in 
> Debian? I wrote a small lua script (to call with texlua) to generate it:
> 
> http://tug.ctan.org/get/macros/luatex/generic/luamplib/luamplib-createmem.lua 
> (you can call it with no option).

I will check that out.

> I must say I don't know the policy of Debian in this field... but could 
> the debian package include the packages in 
> http://tug.ctan.org/tex-archive/macros/luatex/ ?

Are they tightly integrated into luatex? I mean, should they only be
updated when luatex is updated, or separate packages?

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
There are of course many problems connected with life, of
which some of the most popular are `Why are people born?'
Why do they spend so much of the
intervening time wearing digital watches?'
                 --- The Book.
                 --- Douglas Adams, The Hitchhikers Guide to the Galaxy

From elie.roux at telecom-bretagne.eu  Mon Apr 27 19:48:23 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Mon, 27 Apr 2009 19:48:23 +0200
Subject: [luatex] [Dev-luatex]  luatex beta 0.40.0
In-Reply-To: <20090427171208.GA25086@gamma.logic.tuwien.ac.at>
References: <49EEF0D4.1000606@elvenkind.com>
	<20090427164933.GA22138@gamma.logic.tuwien.ac.at>
	<49F5E553.8030800@telecom-bretagne.eu>
	<20090427171208.GA25086@gamma.logic.tuwien.ac.at>
Message-ID: <49F5EFE7.3090501@telecom-bretagne.eu>

Norbert Preining a ?crit :
> Are they tightly integrated into luatex? I mean, should they only be
> updated when luatex is updated, or separate packages?
>   

I think they can be separated packages. It would be really great if they 
could be integrated into Debian, as they are really useful for a very 
large set of users (users using non-ascii characters...).
-- 
Elie

From karl at freefriends.org  Tue Apr 28 02:22:55 2009
From: karl at freefriends.org (Karl Berry)
Date: Mon, 27 Apr 2009 19:22:55 -0500
Subject: [luatex] ecrm1200 bad metric data?
Message-ID: <200904280022.n3S0Mtp25439@f7.net>

With the luatex in TL 2008,
\font\foo = ecrm1200 \foo

gets the error
! Font \foo=ecrm1200 not loadable: metric data not found or bad.

Is this fixed in the current luatex?  (Sorry that I can't easily test
it myself.)

Since the file is all of 3k, I'll attach it.

Thanks,
Karl

-------------- next part --------------
A non-text attachment was scrubbed...
Name: ecrm1200.tfm
Type: application/octet-stream
Size: 3584 bytes
Desc: not available
Url : http://tug.org/pipermail/luatex/attachments/20090427/f9edc658/attachment.obj 

From luatex at nililand.de  Tue Apr 28 10:01:36 2009
From: luatex at nililand.de (Ulrike Fischer)
Date: Tue, 28 Apr 2009 10:01:36 +0200
Subject: [luatex] ecrm1200 bad metric data?
References: <200904280022.n3S0Mtp25439@f7.net>
Message-ID: <1guugyyraaz8y$.dlg@nililand.de>

Am Mon, 27 Apr 2009 19:22:55 -0500 schrieb Karl Berry:

> With the luatex in TL 2008,
> \font\foo = ecrm1200 \foo
> 
> gets the error
> ! Font \foo=ecrm1200 not loadable: metric data not found or bad.
> 
> Is this fixed in the current luatex?  (Sorry that I can't easily test
> it myself.)

Works fine for me with 
This is LuaTeX, Version snapshot-0.39.0-2009041523 and the
ecrm1200.tfm which comes with miktex.


-- 
Ulrike Fischer 


From mpg at elzevir.fr  Tue Apr 28 10:54:49 2009
From: mpg at elzevir.fr (=?ISO-8859-1?Q?Manuel_P=E9gouri=E9-Gonnard?=)
Date: Tue, 28 Apr 2009 10:54:49 +0200
Subject: [luatex] ecrm1200 bad metric data?
In-Reply-To: <1guugyyraaz8y$.dlg@nililand.de>
References: <200904280022.n3S0Mtp25439@f7.net> <1guugyyraaz8y$.dlg@nililand.de>
Message-ID: <49F6C459.7030304@elzevir.fr>

Ulrike Fischer a ?crit :
>> Is this fixed in the current luatex?  (Sorry that I can't easily test
>> it myself.)
> 
> Works fine for me with 
> This is LuaTeX, Version snapshot-0.39.0-2009041523 and the
> ecrm1200.tfm which comes with miktex.
> 
It works here with luatex 0.40.0 on top of current TL08. Works also with 0.30.3,
but I have no previous version for testing.

Manuel.


From oberdiek at uni-freiburg.de  Tue Apr 28 10:59:05 2009
From: oberdiek at uni-freiburg.de (Heiko Oberdiek)
Date: Tue, 28 Apr 2009 10:59:05 +0200
Subject: [luatex] ecrm1200 bad metric data?
In-Reply-To: <200904280022.n3S0Mtp25439@f7.net>
References: <200904280022.n3S0Mtp25439@f7.net>
Message-ID: <20090428085903.GA6482@irwin.vpn.uni-freiburg.de>

On Mon, Apr 27, 2009 at 07:22:55PM -0500, Karl Berry wrote:

Content-Description: message body text
> With the luatex in TL 2008,
> \font\foo = ecrm1200 \foo
> 
> gets the error
> ! Font \foo=ecrm1200 not loadable: metric data not found or bad.
> 
> Is this fixed in the current luatex?  (Sorry that I can't easily test
> it myself.)

I can reproduce it with version 0.25.4.
No problem with the current version 0.40.0.

Yours sincerely
  Heiko <oberdiek at uni-freiburg.de>

From preining at logic.at  Tue Apr 28 18:59:13 2009
From: preining at logic.at (Norbert Preining)
Date: Tue, 28 Apr 2009 18:59:13 +0200
Subject: [luatex] [Dev-luatex]  luatex beta 0.40.0
In-Reply-To: <49F5EFE7.3090501@telecom-bretagne.eu>
References: <49EEF0D4.1000606@elvenkind.com>
	<20090427164933.GA22138@gamma.logic.tuwien.ac.at>
	<49F5E553.8030800@telecom-bretagne.eu>
	<20090427171208.GA25086@gamma.logic.tuwien.ac.at>
	<49F5EFE7.3090501@telecom-bretagne.eu>
Message-ID: <20090428165913.GP19781@gamma.logic.tuwien.ac.at>

Elie, another question:

Can you explain me why there is
	macros/luatex/generic/luamcallbacks/luamcallbacks.dtx
		with 2009/01/09 v0.99
and
	macros/luatex/generic/luatextra/luamcallbacks.dtx
		with 2009/03/10 v0.91
Mark that the latter has a date in march but lower version number.

Can you *please* clean up that chaos?

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
BOSCASTLE
A huge pyramid of tin cans placed just inside the entrance to a
supermarket.
			--- Douglas Adams, The Meaning of Liff

From elie.roux at telecom-bretagne.eu  Tue Apr 28 19:11:22 2009
From: elie.roux at telecom-bretagne.eu (Elie Roux)
Date: Tue, 28 Apr 2009 19:11:22 +0200
Subject: [luatex] [Dev-luatex]  luatex beta 0.40.0
In-Reply-To: <20090428165913.GP19781@gamma.logic.tuwien.ac.at>
References: <49EEF0D4.1000606@elvenkind.com>
	<20090427164933.GA22138@gamma.logic.tuwien.ac.at>
	<49F5E553.8030800@telecom-bretagne.eu>
	<20090427171208.GA25086@gamma.logic.tuwien.ac.at>
	<49F5EFE7.3090501@telecom-bretagne.eu>
	<20090428165913.GP19781@gamma.logic.tuwien.ac.at>
Message-ID: <49F738BA.7070104@telecom-bretagne.eu>

Norbert Preining a ?crit :
> Can you explain me why there is
> 	macros/luatex/generic/luamcallbacks/luamcallbacks.dtx
> 		with 2009/01/09 v0.99
>   

There used to be, but not anymore, at least on 
http://tug.ctan.org/tex-archive/macros/luatex/generic/ I can't see any 
luamcallbacks... I asked the CTAN to remove it, and (afaict) they 
removed it.

There are two problems though: the CTAN team didn't add luaotfload.sty 
in http://tug.ctan.org/tex-archive/macros/luatex/generic/luaotfload/ 
even if it was in the zip I uploaded, so you'll have to regenerate it 
from the .dtx file. And I forgot to add luainputenc.dtx in the zip I 
uploaded, I've sent them the file separatly (yesterday), but they 
haven't added it yet... You can find it there: 
http://norgz.guiling.fr/luainputenc.dtx

Thank you,
-- 
Elie

From Robin.Fairbairns at cl.cam.ac.uk  Tue Apr 28 19:30:13 2009
From: Robin.Fairbairns at cl.cam.ac.uk (Robin Fairbairns)
Date: Tue, 28 Apr 2009 18:30:13 +0100
Subject: [luatex] [Dev-luatex] luatex beta 0.40.0
In-Reply-To: Your message of Tue, 28 Apr 2009 18:59:13 +0200.
	<20090428165913.GP19781@gamma.logic.tuwien.ac.at>
Message-ID: <31957.1240939813@cl.cam.ac.uk>

Norbert Preining <preining at logic.at> wrote:

> Can you explain me why there is
> 	macros/luatex/generic/luamcallbacks/luamcallbacks.dtx
> 		with 2009/01/09 v0.99

where are you seeing that?  it's been deleted on the ctan master sites.

> and
> 	macros/luatex/generic/luatextra/luamcallbacks.dtx
> 		with 2009/03/10 v0.91
> Mark that the latter has a date in march but lower version number.
> 
> Can you *please* clean up that chaos?

i agree the version numbering sequence is "interesting".

r

From preining at logic.at  Tue Apr 28 19:54:17 2009
From: preining at logic.at (Norbert Preining)
Date: Tue, 28 Apr 2009 19:54:17 +0200
Subject: [luatex] [Dev-luatex] luatex beta 0.40.0
In-Reply-To: <31957.1240939813@cl.cam.ac.uk>
References: <20090428165913.GP19781@gamma.logic.tuwien.ac.at>
	<31957.1240939813@cl.cam.ac.uk>
Message-ID: <20090428175417.GR19781@gamma.logic.tuwien.ac.at>

On Di, 28 Apr 2009, Robin Fairbairns wrote:
> > 	macros/luatex/generic/luamcallbacks/luamcallbacks.dtx
> > 		with 2009/01/09 v0.99
> 
> where are you seeing that?  it's been deleted on the ctan master sites.

In my sync from Dante CTAN from 2 days ago ...

> i agree the version numbering sequence is "interesting".

Yes indeed, especially since in the dtx files there are other version
numbers like 0.01 floating around, too.

Best wishes

Norbert

-------------------------------------------------------------------------------
Dr. Norbert Preining <preining at logic.at>        Vienna University of Technology
Debian Developer <preining at debian.org>                         Debian TeX Group
gpg DSA: 0x09C5B094      fp: 14DF 2E6C 0307 BE6D AD76  A9C0 D2BF 4AA3 09C5 B094
-------------------------------------------------------------------------------
AIGBURTH (n.)
Any piece of readily identifiable anatomy found amongst cooked meat.
			--- Douglas Adams, The Meaning of Liff

