From loretan.mico at gmail.com  Fri Jan  9 14:30:46 2015
From: loretan.mico at gmail.com (Mico Loretan)
Date: Fri, 9 Jan 2015 14:30:46 +0100
Subject: [luatex] Will the next version of LuaTeX be based on Lua 5.3?
Message-ID: <65E4BE96-7AA3-453E-AAE9-54BC0B7C28E4@gmail.com>

Lua 5.3, currently at the "release candidate" stage, features a new 64-bit integer data type -- up until now, the one and only numeric data type was double-precision -- and basic UTF8 support, among several new features. Is there a chance that the next version of LuaTeX will be based on Lua 5.3? 

Cheers, Mico

Sent from my iPhone.

From luigi.scarso at gmail.com  Fri Jan  9 15:30:20 2015
From: luigi.scarso at gmail.com (luigi scarso)
Date: Fri, 9 Jan 2015 15:30:20 +0100
Subject: [luatex] Will the next version of LuaTeX be based on Lua 5.3?
In-Reply-To: <65E4BE96-7AA3-453E-AAE9-54BC0B7C28E4@gmail.com>
References: <65E4BE96-7AA3-453E-AAE9-54BC0B7C28E4@gmail.com>
Message-ID: <CAG5iGsB6ZE7fPoSp6TUKdaT0ktU8=Dz-3Y-USaVyfpfFkSTQ=w@mail.gmail.com>

On Fri, Jan 9, 2015 at 2:30 PM, Mico Loretan <loretan.mico at gmail.com> wrote:

> Lua 5.3, currently at the "release candidate" stage, features a new 64-bit
> integer data type -- up until now, the one and only numeric data type was
> double-precision -- and basic UTF8 support, among several new features. Is
> there a chance that the next version of LuaTeX will be based on Lua 5.3?
>
> Cheers, Mico
>
> Sent from my iPhone.
>
Testing Lua 5.3 is on agenda after integration of token lib (which is on
the top of the current todo list, but we are  currently debugging a nasty
mplib bug).
Btw, we cannot guarantee that lua 5.3 will be in the next TL 2015.

-- 
luigi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/luatex/attachments/20150109/6be86abb/attachment.html>

From dirk.laurie at gmail.com  Fri Jan  9 22:24:12 2015
From: dirk.laurie at gmail.com (Dirk Laurie)
Date: Fri, 9 Jan 2015 23:24:12 +0200
Subject: [luatex] Will the next version of LuaTeX be based on Lua 5.3?
In-Reply-To: <CAG5iGsB6ZE7fPoSp6TUKdaT0ktU8=Dz-3Y-USaVyfpfFkSTQ=w@mail.gmail.com>
References: <65E4BE96-7AA3-453E-AAE9-54BC0B7C28E4@gmail.com>
 <CAG5iGsB6ZE7fPoSp6TUKdaT0ktU8=Dz-3Y-USaVyfpfFkSTQ=w@mail.gmail.com>
Message-ID: <CABcj=tnADKLK-2GWZ5-TS4VYNorpe=5Z1gjeJxi2954rVvLOEw@mail.gmail.com>

2015-01-09 16:30 GMT+02:00 luigi scarso <luigi.scarso at gmail.com>:
> On Fri, Jan 9, 2015 at 2:30 PM, Mico Loretan <loretan.mico at gmail.com> wrote:
>>
>> Lua 5.3, currently at the "release candidate" stage, features a new 64-bit
>> integer data type -- up until now, the one and only numeric data type was
>> double-precision -- and basic UTF8 support, among several new features. Is
>> there a chance that the next version of LuaTeX will be based on Lua 5.3?
>>
>> Cheers, Mico
>>
>> Sent from my iPhone.
>
> Testing Lua 5.3 is on agenda after integration of token lib (which is on the
> top of the current todo list, but we are  currently debugging a nasty mplib
> bug).
> Btw, we cannot guarantee that lua 5.3 will be in the next TL 2015.

Lua 5.3 is Lua 5.2 with:
1. Genuine 64-bit integers with bit operators.
2. Rudimentary UTF-8 support.
3. Number-to-string based on internal representation,
not human-readable format conversion.

It has a lot to offer to LuaTeX.

From pragma at wxs.nl  Fri Jan  9 22:56:19 2015
From: pragma at wxs.nl (Hans Hagen)
Date: Fri, 9 Jan 2015 22:56:19 +0100
Subject: [luatex] Will the next version of LuaTeX be based on Lua 5.3?
In-Reply-To: <CABcj=tnADKLK-2GWZ5-TS4VYNorpe=5Z1gjeJxi2954rVvLOEw@mail.gmail.com>
References: <65E4BE96-7AA3-453E-AAE9-54BC0B7C28E4@gmail.com>
 <CAG5iGsB6ZE7fPoSp6TUKdaT0ktU8=Dz-3Y-USaVyfpfFkSTQ=w@mail.gmail.com>
 <CABcj=tnADKLK-2GWZ5-TS4VYNorpe=5Z1gjeJxi2954rVvLOEw@mail.gmail.com>
Message-ID: <54B04E83.5050708@wxs.nl>

On 1/9/2015 10:24 PM, Dirk Laurie wrote:
> 2015-01-09 16:30 GMT+02:00 luigi scarso <luigi.scarso at gmail.com>:
>> On Fri, Jan 9, 2015 at 2:30 PM, Mico Loretan <loretan.mico at gmail.com> wrote:
>>>
>>> Lua 5.3, currently at the "release candidate" stage, features a new 64-bit
>>> integer data type -- up until now, the one and only numeric data type was
>>> double-precision -- and basic UTF8 support, among several new features. Is
>>> there a chance that the next version of LuaTeX will be based on Lua 5.3?
>>>
>>> Cheers, Mico
>>>
>>> Sent from my iPhone.
>>
>> Testing Lua 5.3 is on agenda after integration of token lib (which is on the
>> top of the current todo list, but we are  currently debugging a nasty mplib
>> bug).
>> Btw, we cannot guarantee that lua 5.3 will be in the next TL 2015.
>
> Lua 5.3 is Lua 5.2 with:
> 1. Genuine 64-bit integers with bit operators.
> 2. Rudimentary UTF-8 support.
> 3. Number-to-string based on internal representation,
> not human-readable format conversion.
>
> It has a lot to offer to LuaTeX.

I'm not so sure about that ... internally TeX is mostly 32 bit and the 
extra integer/float checking/conversion might as well work against us in 
terms of speed (personally I liked the only-one-number-type approach and 
it was one of the reasons for choosing Lua as language). Only extensive 
testing will show benefits. We might even decide to stick to 5.2 (at 
least for the next release) ... who knows what 5.4 will bring. As Luajit 
is (and might never be) in sync with Lua 5.3 we can also have an issue 
with the two variants not being compatible in output so that might be 
another reason for delay. (An interesting in-between can be to have 5.2 
/ 5.3 as compile option.)

Hans


-----------------------------------------------------------------
                                           Hans Hagen | PRAGMA ADE
               Ridderstraat 27 | 8061 GH Hasselt | The Netherlands
     tel: 038 477 53 69 | voip: 087 875 68 74 | www.pragma-ade.com
                                              | www.pragma-pod.nl
-----------------------------------------------------------------

From joseph.wright at morningstar2.co.uk  Mon Jan 12 16:50:14 2015
From: joseph.wright at morningstar2.co.uk (Joseph Wright)
Date: Mon, 12 Jan 2015 15:50:14 +0000
Subject: [luatex] Incorrect setting of mu sizes with different styles?
Message-ID: <54B3ED36.2050109@morningstar2.co.uk>

Hello all,

With the example

    \setbox0=\hbox{$\mkern18mu$}\message{\the\wd0}
    \setbox0=\hbox{$\scriptstyle\mkern18mu$}\message{\the\wd0}
    \bye

pdfTeX gives

    9.99976pt 8.19443pt

whereas LuaTeX gives

    9.99976pt 9.99976pt

which suggests something is not right in terms of the interaction of the
size of the mu unit with math mode style.

Is this a documented change or a bug?
--
Joseph Wright

From phg42.2a at googlemail.com  Mon Jan 12 21:08:32 2015
From: phg42.2a at googlemail.com (Philipp Gesang)
Date: Mon, 12 Jan 2015 21:08:32 +0100
Subject: [luatex] [FWD: lua-l] [ANN] Lua 5.3.0 (final) now available
Message-ID: <20150112200756.GA2371@acheron.Speedport_W_724V_09011602_00_012>

Hi,

Lua 5.3.0 is out.

Forwarding the announcement by LHF. In case the attachment gets
scrubbed by the list:

    http://marc.info/?l=lua-l&m=142107629831407&w=2

Happy TeXing!
Philipp

-------------- next part --------------
An embedded message was scrubbed...
From: Luiz Henrique de Figueiredo <lhf at tecgraf.puc-rio.br>
Subject: [ANN] Lua 5.3.0 (final) now available
Date: Mon, 12 Jan 2015 13:24:25 -0200
Size: 6465
URL: <http://tug.org/pipermail/luatex/attachments/20150112/b5be9f5a/attachment.mht>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 819 bytes
Desc: not available
URL: <http://tug.org/pipermail/luatex/attachments/20150112/b5be9f5a/attachment.bin>

From luigi.scarso at gmail.com  Wed Jan 14 19:54:06 2015
From: luigi.scarso at gmail.com (luigi scarso)
Date: Wed, 14 Jan 2015 19:54:06 +0100
Subject: [luatex] Incorrect setting of mu sizes with different styles?
In-Reply-To: <54B3ED36.2050109@morningstar2.co.uk>
References: <54B3ED36.2050109@morningstar2.co.uk>
Message-ID: <CAG5iGsCXV8_ZsqB+s=6rxXa_uev3efrpffFhi=mE0E5cXnuggw@mail.gmail.com>

On Mon, Jan 12, 2015 at 4:50 PM, Joseph Wright <
joseph.wright at morningstar2.co.uk> wrote:

> Hello all,
>
> With the example
>
>     \setbox0=\hbox{$\mkern18mu$}\message{\the\wd0}
>     \setbox0=\hbox{$\scriptstyle\mkern18mu$}\message{\the\wd0}
>     \bye
>
> pdfTeX gives
>
>     9.99976pt 8.19443pt
>
> whereas LuaTeX gives
>
>     9.99976pt 9.99976pt
>
> which suggests something is not right in terms of the interaction of the
> size of the mu unit with math mode style.
>
> Is this a documented change or a bug?
> --
> Joseph Wright
>

Sorry for delay.
We are seeing it now.

-- 
luigi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/luatex/attachments/20150114/82dba793/attachment.html>

From luigi.scarso at gmail.com  Thu Jan 15 22:03:48 2015
From: luigi.scarso at gmail.com (luigi scarso)
Date: Thu, 15 Jan 2015 21:03:48 +0000
Subject: [luatex] Incorrect setting of mu sizes with different styles?
References: <54B3ED36.2050109@morningstar2.co.uk>
 <CAG5iGsCXV8_ZsqB+s=6rxXa_uev3efrpffFhi=mE0E5cXnuggw@mail.gmail.com>
Message-ID: <CAG5iGsCmtAjZamMoxNq-zKE4Qk_Pgcqv0gCcO3UGBWW31o5xng@mail.gmail.com>

Il giorno Wed Jan 14 2015 at 7:54:06 PM luigi scarso <luigi.scarso at gmail.com>
ha scritto:

>
> On Mon, Jan 12, 2015 at 4:50 PM, Joseph Wright <
> joseph.wright at morningstar2.co.uk> wrote:
>
>> Hello all,
>>
>> With the example
>>
>>     \setbox0=\hbox{$\mkern18mu$}\message{\the\wd0}
>>     \setbox0=\hbox{$\scriptstyle\mkern18mu$}\message{\the\wd0}
>>     \bye
>>
>> pdfTeX gives
>>
>>     9.99976pt 8.19443pt
>>
>> whereas LuaTeX gives
>>
>>     9.99976pt 9.99976pt
>>
>> which suggests something is not right in terms of the interaction of the
>> size of the mu unit with math mode style.
>>
>> Is this a documented change or a bug?
>> --
>> Joseph Wright
>>
>
> Sorry for delay.
> We are seeing it now.
>
>
> it should be fixed in trunk with rev. 5125 .
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/luatex/attachments/20150115/aa50695d/attachment.html>

From anagnost at yandex.ru  Sat Jan 17 19:39:48 2015
From: anagnost at yandex.ru (Alexey Kryukov)
Date: Sat, 17 Jan 2015 22:39:48 +0400
Subject: [luatex] fontdimen 2,3,4
Message-ID: <20150117223948.49dcf43addba3f42af43055b@yandex.ru>

Hi all,

I have recently installed Ubuntu 14.04 which includes luatex
beta-0.79.1 (TeX Live 2014/Debian) (rev 4971) and noticed that I no
longer can control interword spacing with lualatex by modifying
fontdimen 2, 3, 4. More specifically, these parameters only affect the
additional space after puctuation signs, unless \frenchspacing is
enabled (then there is no effect at all). A minimal example:

\documentclass{article}
\usepackage{lipsum}

\begin{document}
\lipsum[1]

\fontdimen2\font=5\fontdimen2\font
\lipsum[1]
\end{document}

Needless to say the same file is correctly processed with pdflatex or
xelatex.

I am wondering if anybody else has experienced this behavior and if it
is specific for my Ubuntu version.

-- 
Regards,
Alexey Kryukov <anagnost at yandex dot ru>

Moscow State University
Faculty of History

From e.ekmecic at gmail.com  Sun Jan 18 19:17:09 2015
From: e.ekmecic at gmail.com (Emil E)
Date: Sun, 18 Jan 2015 13:17:09 -0500
Subject: [luatex] Poor Spacing in the \frac Environment
Message-ID: <CAMzzrdP75HrN8SWQEm8u4itgSvY0=jAhFTXj2CsJ8R7qvGUoNg@mail.gmail.com>

Hello,
I'm typesetting some simple math problems/solutions using LuaLaTeX,
and I'm having trouble with the spacing between the numerator and
division bar in \frac environments.
I've attached a MWE below, along with an image showing the my
output of the MWE.
I apologize in advance if my image links don't follow the proper
etiquette for this mailing list.

\documentclass[11pt]{article}

\usepackage{amsmath,amsthm,amssymb,amsfonts}
\usepackage{fontspec}
\setmainfont[Ligatures=TeX]{TeX Gyre Pagella}
\usepackage{unicode-math}
\setmathfont{TeX Gyre Pagella Math}
\begin{document}
$$
\frac{xxxxxxLLLLLL}{xxxxxxTTTTTT} \frac{2(x-1)-(x^{2}-1)}{(x^{2}-1)(x-1)}
$$
\end{document}

Here is a screenshot of the PDF output on my system.
Note how the spacing between the bottom of the L and the division bar
is about 2-3x larger than the spacing between the top of the T and
division bar.
https://i.imgur.com/RWeuSVA.png

The bizarre spacing occurs regardless of font, or the packages
fontspec, unicode-math, or the AMS packages.
This seems to indicate that it's a problem with LuaLaTeX itself.
I've been able to fix the fraction spacing by defining a new \frac
environment that manually adjusts the spacing of the numerator,
but that's a "hacky" solution that I don't like using.
PDFLaTeX shows proper spacing using the same math code, however
I'd like to stay with LuaLaTeX instead of reverting to PDFLaTeX.

Is there any way to fix this spacing?

Below are some details of my set-up:
Arch Linux x64
Running TeXLive 2014, installed manually and up-to-date
LuaLaTeX version is beta-0.79.1 (TeX Live 2014) (rev 4971)
Compiling through TeXStudio 2.8.8
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/luatex/attachments/20150118/b1ea8a91/attachment.html>

From ulrik.vieth at arcor.de  Mon Jan 19 01:14:27 2015
From: ulrik.vieth at arcor.de (Ulrik VIeth)
Date: Mon, 19 Jan 2015 01:14:27 +0100
Subject: [luatex] Poor Spacing in the \frac Environment
In-Reply-To: <CAMzzrdP75HrN8SWQEm8u4itgSvY0=jAhFTXj2CsJ8R7qvGUoNg@mail.gmail.com>
References: <CAMzzrdP75HrN8SWQEm8u4itgSvY0=jAhFTXj2CsJ8R7qvGUoNg@mail.gmail.com>
Message-ID: <54BC4C63.1060700@arcor.de>

Good question.

I didn't have time to experiment, what (if anything) is wrong,
but I can try to give some explanations.
(see also https://www.tug.org/TUGboat/tb30-1/tb94vieth.pdf)

In general, there are 2 different mechanisms at play here.

There is one set of font metrics parameters which determines the default 
position of the numerator or denominator relative to the fraction bar, 
which applies as long when symbols aren't too big.
This is what applies to \frac{xxxxxxLLLLLL}{xxxxxxTTTTTT}.

There is another set of parameters which ensures a minimum clearance
above or below the fraction bar, which applies when symbols get bigger, 
e.g. when symbols have superscipts or subscripts attached.
This is what applies to \frac{2(x-1)-(x^{2}-1)}{(x^{2}-1)(x-1)}.

Presumably the parameters for the default positioned are tuned for
lowercase symbols of x-height, not necessarily for capital letters.

In your case the numerators has no descenders below the baseline,
but the denominator has ascenders above x-height, so the gap above
the rule looks big for L, but the gap below looks small for T.

If you had descenders in the numerator, e.g. J or g, or \gamma,
the gap above the rule would be smaller without shifting the position.
Likewise, if you had subscripts such asx_{0} in the numerator,
the gap above the rule would be smaller without shifting the position.

In general, there will always be some cases, where the spacing might
look a little uneven, especially if you have ascenders or descenders.
Just try all combinations of fractions involving \alpha (x-height), 
\beta (asc + desc), \gamma (only desc) and \delta (only asc).
Then try adding superscripts (^{2}) or subscripts (_{0}) as well.

The trick is finding default parameters, which are big enough to 
accommodate standard stuff x^2 or x_0 without any extra shifting,
but which do not leave too much or too little optical gaps either.

Regards,
Ulrik Vieth.

P.S: If you are really interested, I once wrote a paper, where I 
discussed the reasoning how the values for math font parameters
might be determined.
(see 
http://www.gust.org.pl/projects/e-foundry/math/math-support/vieth2008.pdf)



On 18.01.2015 19:17, Emil E wrote:
> Hello,
> I'm typesetting some simple math problems/solutions using LuaLaTeX,
> and I'm having trouble with the spacing between the numerator and
> division bar in \frac environments.
> I've attached a MWE below, along with an image showing the my
> output of the MWE.
> I apologize in advance if my image links don't follow the proper
> etiquette for this mailing list.
>
> \documentclass[11pt]{article}
>
> \usepackage{amsmath,amsthm,amssymb,amsfonts}
> \usepackage{fontspec}
> \setmainfont[Ligatures=TeX]{TeX Gyre Pagella}
> \usepackage{unicode-math}
> \setmathfont{TeX Gyre Pagella Math}
> \begin{document}
> $$
> \frac{xxxxxxLLLLLL}{xxxxxxTTTTTT} \frac{2(x-1)-(x^{2}-1)}{(x^{2}-1)(x-1)}
> $$
> \end{document}
>
> Here is a screenshot of the PDF output on my system.
> Note how the spacing between the bottom of the L and the division bar
> is about 2-3x larger than the spacing between the top of the T and
> division bar.
> https://i.imgur.com/RWeuSVA.png
>
> The bizarre spacing occurs regardless of font, or the packages
> fontspec, unicode-math, or the AMS packages.
> This seems to indicate that it's a problem with LuaLaTeX itself.
> I've been able to fix the fraction spacing by defining a new \frac
> environment that manually adjusts the spacing of the numerator,
> but that's a "hacky" solution that I don't like using.
> PDFLaTeX shows proper spacing using the same math code, however
> I'd like to stay with LuaLaTeX instead of reverting to PDFLaTeX.
>
> Is there any way to fix this spacing?
>
> Below are some details of my set-up:
> Arch Linux x64
> Running TeXLive 2014, installed manually and up-to-date
> LuaLaTeX version is beta-0.79.1 (TeX Live 2014) (rev 4971)
> Compiling through TeXStudio 2.8.8
>

From ulrik.vieth at arcor.de  Mon Jan 19 01:58:41 2015
From: ulrik.vieth at arcor.de (Ulrik Vieth)
Date: Mon, 19 Jan 2015 01:58:41 +0100
Subject: [luatex] Poor Spacing in the \frac Environment
In-Reply-To: <CAMzzrdP75HrN8SWQEm8u4itgSvY0=jAhFTXj2CsJ8R7qvGUoNg@mail.gmail.com>
References: <CAMzzrdP75HrN8SWQEm8u4itgSvY0=jAhFTXj2CsJ8R7qvGUoNg@mail.gmail.com>
Message-ID: <54BC56C1.1060905@arcor.de>

Not sure if my previous reply was clearly enough.

I am not convinced if anything is really wrong. The behaviour can be 
understood in the way the different spacing mechanisms play out.

The position of the numerator is presumably chosen in such a way,
so that descenders (e.g. g, \gamma) and subscripts (e.g. x_{0})
can be placed without causing any shift-up relative to the baseline.
As a result, there will be a significant gap below L in the numerator.

The position of the denominator, however, is chosen in such way,
so that ascenders just fit tightly below the fraction rule,
whereas superscripts (e.g. x^{2}) may cause an extra shift-down.
As a result, there will be a smaller gap above T in the denominator.

One might argue that the position of the denominator could be
shifted down, so that the gaps below L and above T should be equal.
This needs to be carefully balanced with other requirements,
e.g. that the gap below x_{0} and above x^{2} should be equal.

In any case, this requires careful testing with a lot of examples
as part of the font development, not just a few particular cases.

Since TeX Gyre math is not frozen yet, it might well be possible
to apply some improvements, if there are good reasons to do so.

It might be helpful to collect interesting examples as test cases
such as this one.

Regards,
Ulrik Vieth




On 18.01.2015 19:17, Emil E wrote:
> Hello,
> I'm typesetting some simple math problems/solutions using LuaLaTeX,
> and I'm having trouble with the spacing between the numerator and
> division bar in \frac environments.
> I've attached a MWE below, along with an image showing the my
> output of the MWE.
> I apologize in advance if my image links don't follow the proper
> etiquette for this mailing list.
>
> \documentclass[11pt]{article}
>
> \usepackage{amsmath,amsthm,amssymb,amsfonts}
> \usepackage{fontspec}
> \setmainfont[Ligatures=TeX]{TeX Gyre Pagella}
> \usepackage{unicode-math}
> \setmathfont{TeX Gyre Pagella Math}
> \begin{document}
> $$
> \frac{xxxxxxLLLLLL}{xxxxxxTTTTTT} \frac{2(x-1)-(x^{2}-1)}{(x^{2}-1)(x-1)}
> $$
> \end{document}
>
> Here is a screenshot of the PDF output on my system.
> Note how the spacing between the bottom of the L and the division bar
> is about 2-3x larger than the spacing between the top of the T and
> division bar.
> https://i.imgur.com/RWeuSVA.png
>
> The bizarre spacing occurs regardless of font, or the packages
> fontspec, unicode-math, or the AMS packages.
> This seems to indicate that it's a problem with LuaLaTeX itself.
> I've been able to fix the fraction spacing by defining a new \frac
> environment that manually adjusts the spacing of the numerator,
> but that's a "hacky" solution that I don't like using.
> PDFLaTeX shows proper spacing using the same math code, however
> I'd like to stay with LuaLaTeX instead of reverting to PDFLaTeX.
>
> Is there any way to fix this spacing?
>
> Below are some details of my set-up:
> Arch Linux x64
> Running TeXLive 2014, installed manually and up-to-date
> LuaLaTeX version is beta-0.79.1 (TeX Live 2014) (rev 4971)
> Compiling through TeXStudio 2.8.8
>

From e.ekmecic at gmail.com  Mon Jan 19 05:52:39 2015
From: e.ekmecic at gmail.com (Emil E)
Date: Sun, 18 Jan 2015 23:52:39 -0500
Subject: [luatex]  Poor Spacing in the \frac Environment
Message-ID: <CAMzzrdOQOK5VJBUxFcQRnswp0x8G+0uazYU7jWKuht6X=UXAWQ@mail.gmail.com>

[I'm having trouble replying directly to Ulrik, so I apologize for posting
this reply directly to the mailing list, or wherever it ends up.]

Thank you for the detailed post Ulrik.

Admittedly, the specifics of TeX and LuaLaTeX font metrics/configurations
are outside my knowledge. However, I did appreciate the TUGboat
article and the paper you linked. There was quite a bit of
interesting information within, even though I didn't understand it all :).

I've tested out almost every combination of font/package/TeX Engine.
Below is the link to an image I made from the PDF outputs
of each combination. I'll also post a MWE of the math parts
below for reproducibility.

Here is the image link:
https://i.imgur.com/cqWQ0uk.png

The image shows that contrary to what I said in my first post,
this spacing occurs in PDFLaTeX as well as LuaLaTeX. It really seems
quite bizarre since I never recall seeing this "issue" back when I
used PDFLaTeX.

However, it seems that TeX is rendering each numerator as if it has
a descender. This gives the irregular spacing effect, and is visible
in the simple numerical fractions like 1/2, or the fractions where
there are no descenders, such as x/x, or \alpha over \alpha.

On numerators with descenders, the increased spacing is correct and
looks fine, however when extended to "normal" numerators, it looks
poorly spaced. I haven't got a clue as to why this behaviour happens
for _all_ numerators.

I've also noted that LuaLaTeX is making the correct adjustments for
superscripted denominators (ex. a denominator of \delta^{2}), but
this _only_ occurs on the LuaLaTeX engine with OTF TeX Gyre Pagella
fonts (it does not happen on LuaLaTeX Computer Modern defaults,
or in PDFLaTeX).
This can be seen in the top right section of the linked image,
on the third and fourth fractions from the right.

If anyone has some sort of simple remedy to this, please let me know!
For now, I suppose that I will have to introduce a patched \frac
environment, or I'll just have to deal with the spacing, as ugly
as it is.
I hope that my comparison has at least helped someone.

MWE for LuaLaTeX + fontspec + unicode-math + TeX Gyre Pagella

%%%%%%%%%%%%%%%%%%
\documentclass[11pt]{article}

\usepackage{amsmath,amsthm,amssymb,amsfonts}
\usepackage{fontspec} % remove if testing PDFLaTeX
\setmainfont[Ligatures=TeX]{TeX Gyre Pagella} % remove if testing PDFLaTeX
\usepackage{unicode-math} % remove if testing PDFLaTeX
\setmathfont{TeX Gyre Pagella Math} % remove if testing PDFLaTeX, or
testing plain LuaLaTeX
%\usepackage{mathpazo} % add only if using PDFLaTeX, testing Palatino
variants
\begin{document}
Lua\LaTeX + fontspec, TeX Gyre Pagella, unicode-math.
$$
\frac{xL}{xT} \;
\frac{1}{2} \;
\frac{3}{4} \;
\frac{x}{x} \;
\frac{\alpha}{\beta} \;
\frac{\beta}{\beta} \;
\frac{\beta}{\alpha} \;
\frac{\alpha}{\alpha} \;
\frac{\gamma}{\delta} \;
\frac{\gamma_{1}}{\delta^{2}} \;
\frac{\delta}{\gamma} \;
\frac{\delta_{1}}{\gamma^{2}}
$$
\end{document}
%%%%%%%%%%%%%%%%%%
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/luatex/attachments/20150118/473a2359/attachment-0001.html>

From reinhard.kotucha at web.de  Mon Jan 19 21:59:19 2015
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 19 Jan 2015 21:59:19 +0100
Subject: [luatex] Poor Spacing in the \frac Environment
In-Reply-To: <CAMzzrdOQOK5VJBUxFcQRnswp0x8G+0uazYU7jWKuht6X=UXAWQ@mail.gmail.com>
References: <CAMzzrdOQOK5VJBUxFcQRnswp0x8G+0uazYU7jWKuht6X=UXAWQ@mail.gmail.com>
Message-ID: <21693.28711.996005.78705@zaphod.ms25.net>

On 2015-01-18 at 23:52:39 -0500, Emil E wrote:

 > I've also noted that LuaLaTeX is making the correct adjustments for
 > superscripted denominators (ex. a denominator of \delta^{2}), but
 > this _only_ occurs on the LuaLaTeX engine with OTF TeX Gyre Pagella
 > fonts (it does not happen on LuaLaTeX Computer Modern defaults, or
 > in PDFLaTeX).
 > This can be seen in the top right section of the linked image,
 > on the third and fourth fractions from the right.

I don't think that LuaLaTeX does any correction here.  I suppose that
the position of the superscript is a little bit too heigh in TG
Pagella so that TeX has to lower the complete denominator accordingly.

The same happens if you insert the line

  \frac{\Big|\delta}{\Big|\gamma} \;

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------

From reinhard.kotucha at web.de  Mon Jan 19 22:16:55 2015
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Mon, 19 Jan 2015 22:16:55 +0100
Subject: [luatex] Poor Spacing in the \frac Environment
In-Reply-To: <21693.28711.996005.78705@zaphod.ms25.net>
References: <CAMzzrdOQOK5VJBUxFcQRnswp0x8G+0uazYU7jWKuht6X=UXAWQ@mail.gmail.com>
 <21693.28711.996005.78705@zaphod.ms25.net>
Message-ID: <21693.29767.308725.834173@zaphod.ms25.net>

On 2015-01-19 at 21:59:19 +0100, Reinhard Kotucha wrote:

 > [...]

Just for the record, your test file contains very long lines which
were broken during email transfer.  The ifluatex package allows you to
avoid the comments completely:

  \usepackage{ifluatex}

  \ifluatex
     LuaTEX is running
  \else
     Without LuaTEX
  \fi

This also saves you a lot of time while comparing different engines.

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------

From dluecking at sbcglobal.net  Mon Jan 19 22:51:15 2015
From: dluecking at sbcglobal.net (Dan Luecking)
Date: Mon, 19 Jan 2015 15:51:15 -0600
Subject: [luatex] Poor Spacing in the \frac Environment
Message-ID: <380824.35010.bm@smtp113.sbc.mail.ne1.yahoo.com>

On 2013-01-18 at 21:59:19 CET, Reinhard Kotucha wrote

>On 2015-01-18 at 23:52:39 -0500, Emil E wrote:
>
>  > I've also noted that LuaLaTeX is making the correct adjustments for
>  > superscripted denominators (ex. a denominator of \delta^{2}), but
>  > this _only_ occurs on the LuaLaTeX engine with OTF TeX Gyre Pagella
>  > fonts (it does not happen on LuaLaTeX Computer Modern defaults, or
>  > in PDFLaTeX).
>  > This can be seen in the top right section of the linked image,
>  > on the third and fourth fractions from the right.
>
>I don't think that LuaLaTeX does any correction here.  I suppose that
>the position of the superscript is a little bit too heigh in TG
>Pagella so that TeX has to lower the complete denominator accordingly.
>
>The same happens if you insert the line
>
>   \frac{\Big|\delta}{\Big|\gamma} \;
>

I agree. In fact, I think this is, in fact, a problem with the
combination of LuaLaTeX with OTF TeX Gyre Pagella and unicode-math.

The various font parameters in cmr, it seems to me, are designed so
that when "normal" symbols are used with "normal" 'scripts there is no
shift in the numerators or denominators. This allows the baselines
and math-axes of numerators and denominators of adjacent fractions
to be aligned most of the time. That is, the \gamma's in
   $$\frac{\gamma}{\delta} \frac{\gamma_1}{\delta^2}$$
line up and the \delta's should also. That is, I think, the ideal
that Knuth was trying for.

Dan


Daniel H. Luecking
Department of Mathematical Sciences
Fayetteville, Arkansas
http://www-cs-faculty.stanford.edu/~knuth/iaq.html 


From reinhard.kotucha at web.de  Tue Jan 20 00:23:34 2015
From: reinhard.kotucha at web.de (Reinhard Kotucha)
Date: Tue, 20 Jan 2015 00:23:34 +0100
Subject: [luatex] Poor Spacing in the \frac Environment
In-Reply-To: <380824.35010.bm@smtp113.sbc.mail.ne1.yahoo.com>
References: <380824.35010.bm@smtp113.sbc.mail.ne1.yahoo.com>
Message-ID: <21693.37366.769125.342877@zaphod.ms25.net>

On 2015-01-19 at 15:51:15 -0600, Dan Luecking wrote:

 > On 2013-01-18 at 21:59:19 CET, Reinhard Kotucha wrote
 > 
 > >On 2015-01-18 at 23:52:39 -0500, Emil E wrote:
 > >
 > >  > I've also noted that LuaLaTeX is making the correct adjustments for
 > >  > superscripted denominators (ex. a denominator of \delta^{2}), but
 > >  > this _only_ occurs on the LuaLaTeX engine with OTF TeX Gyre Pagella
 > >  > fonts (it does not happen on LuaLaTeX Computer Modern defaults, or
 > >  > in PDFLaTeX).
 > >  > This can be seen in the top right section of the linked image,
 > >  > on the third and fourth fractions from the right.
 > >
 > >I don't think that LuaLaTeX does any correction here.  I suppose that
 > >the position of the superscript is a little bit too heigh in TG
 > >Pagella so that TeX has to lower the complete denominator accordingly.
 > >
 > >The same happens if you insert the line
 > >
 > >   \frac{\Big|\delta}{\Big|\gamma} \;
 > >
 > 
 > I agree. In fact, I think this is, in fact, a problem with the
 > combination of LuaLaTeX with OTF TeX Gyre Pagella and unicode-math.
 > 
 > The various font parameters in cmr, it seems to me, are designed so
 > that when "normal" symbols are used with "normal" 'scripts there is
 > no shift in the numerators or denominators. This allows the
 > baselines and math-axes of numerators and denominators of adjacent
 > fractions to be aligned most of the time. That is, the \gamma's in
 >    $$\frac{\gamma}{\delta} \frac{\gamma_1}{\delta^2}$$
 > line up and the \delta's should also. That is, I think, the ideal
 > that Knuth was trying for.

I doubt that Lua[La]TeX and unicode-math are involved at all.  As far
as I can see the font itself is the culprit.  But I'm pretty sure that
Ulrik comes up with a definite answer soon.

Regards,
  Reinhard

-- 
------------------------------------------------------------------
Reinhard Kotucha                            Phone: +49-511-3373112
Marschnerstr. 25
D-30167 Hannover                    mailto:reinhard.kotucha at web.de
------------------------------------------------------------------

From luigi.scarso at gmail.com  Wed Jan 21 17:09:00 2015
From: luigi.scarso at gmail.com (luigi scarso)
Date: Wed, 21 Jan 2015 17:09:00 +0100
Subject: [luatex] Luatex 0.79.3 announcement
Message-ID: <CAG5iGsD-tVNH4pPJLGDXU7Coo6DRQH4KmqvKmCdWng-tfL5pkQ@mail.gmail.com>

==============================================================
Luatex beta-0.79.3 was released 20150121 (5130)
==============================================================


* It's now possible with the MinGW compilers to build luatex and luajittex
as DLL
  for Windows 32bit/64bit.  The files are:
  libkpathsea-6.dll  luajittex.exe  luatex.exe  texlua52.dll  texluajit.dll
  In the next release the build.sh script be updated; for the moment just
add
  "--enable-shared -disable-native-texlive-build " after --disable-all-pkgs
  in TL_MAKE.
  Building as DLL was tested only for Windows.

* When possibile  symbols in the exe are now hidden:
  this should avoid conflicts with the loading of dynamic shared object.

* several bugfixes and improvements. The patches for MetaPost
  fix seg. faults occourred with wrong inputs.
  The functions:
   mp_get_numeric_value, mp_get_string_value, mp_get_boolean_value
  works if the value is a variable (i.e. not an internal variable,
  a loop variable and a macro argument);
  only mp_get_numeric_value now has support for loop variable
  and internal variable (but still  not for macro arguments).



We plan 0.80 for TL, with
integration of the tokenlib branch,
cleanup and  bugs fix.
We will also test lua 5.3, but we are not sure that it will part
of the next TL .


The archives can be downloaded from supelec as usual:

        https://foundry.supelec.fr/projects/luatex/

You could also check out the sources via anonymous svn:

  svn co --username anonsvn --password anonsvn              \
      https://foundry.supelec.fr/svn/luatex/tags/beta-0.79.3

Bugs and feature requests can be added to the issue tracker at

       http://tracker.luatex.org



Have fun,
Hans, Taco, Luigi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/luatex/attachments/20150121/af896223/attachment.html>

From herbs at wideopenwest.com  Sun Jan 25 16:28:10 2015
From: herbs at wideopenwest.com (Herbert Schulz)
Date: Sun, 25 Jan 2015 09:28:10 -0600
Subject: [luatex] luamplib problem (?)
Message-ID: <551D092C-5617-402B-B844-33919D085143@wideopenwest.com>

Howdy,

I'm using a fully updated TeX Live 2014 on Mac OS X 10.10.1. I just tried to compile

\documentclass{article}
\usepackage{luamplib}
\begin{document}
A%
\begin{mplibcode}
beginfig(1);
fill fullcircle scaled 20; 
endfig;
\end{mplibcode}
B\par
\end{document}

with lualatex and got an error. It used to compile fine. The console error message is

...
/LuaMpost.tex:11: LuaTeX error ...texlive/2014/texmf-dist/tex/luatex/luamplib/l
uamplib.lua:393: attempt to concatenate field 'numbersystem' (a nil value)
stack traceback:
	...texlive/2014/texmf-dist/tex/luatex/luamplib/luamplib.lua:393: in function 'p
rocess'
	...texlive/2014/texmf-dist/tex/luatex/luamplib/luamplib.lua:707: in function 'm
akeTEXboxes'
	[\directlua]:1: in main chunk.
\ltxdomplibcodeindeed ...s([===[\mplibtemp ]===])}
                                                  \directlua {luamplib.proce...
l.11 \end{mplibcode}
                  
Note: I've got lua 5.2.3 installed but I thought it should be using texlua which is at beta-0.79.1 (TeX Live 2014) (rev 4971).

Please reply directly to me since I don't subscribe to this list.

Good Luck,

Herb Schulz
(herbs at wideopenwest dot com)





From nomosnomos at gmail.com  Sun Jan 25 18:51:55 2015
From: nomosnomos at gmail.com (Dohyun Kim)
Date: Mon, 26 Jan 2015 02:51:55 +0900
Subject: [luatex] luamplib problem (?)
In-Reply-To: <551D092C-5617-402B-B844-33919D085143@wideopenwest.com>
References: <551D092C-5617-402B-B844-33919D085143@wideopenwest.com>
Message-ID: <CAFzmAm1SztRc8uFPmP4gt1JZFEUO-a=jQudTDU3-T2u4bOdsRg@mail.gmail.com>

Hi,

2015-01-26 0:28 GMT+09:00 Herbert Schulz <herbs at wideopenwest.com>:
> Howdy,
>
> I'm using a fully updated TeX Live 2014 on Mac OS X 10.10.1. I just tried to compile
>
> \documentclass{article}
> \usepackage{luamplib}
> \begin{document}
> A%
> \begin{mplibcode}
> beginfig(1);
> fill fullcircle scaled 20;
> endfig;
> \end{mplibcode}
> B\par
> \end{document}
>
> with lualatex and got an error. It used to compile fine. The console error message is
>
> ...
> /LuaMpost.tex:11: LuaTeX error ...texlive/2014/texmf-dist/tex/luatex/luamplib/l
> uamplib.lua:393: attempt to concatenate field 'numbersystem' (a nil value)

Last release of luamplib has introduced a silly bug you discovered and reported.
I will upload a patch to CTAN in a few hours, but it will take a few
days for the new package to reach you. Until then, please apply the
following patch to
...texlive/2014/texmf-dist/tex/luatex/luamplib/luamplib.lua

--- ../src/luamplib/luamplib.lua    2015-01-05 22:00:04.000000000 +0900
+++ /usr/local/texlive/2014/texmf-dist/tex/luatex/luamplib/luamplib.lua
   2015-01-26 02:30:07.000000000 +0900
@@ -390,7 +390,7 @@
 local mplibinstances = {}
 local process = function (data,indeed)
   local standalone, firstpass = not luamplib.codeinherit, not indeed
-  local currfmt = currentformat .. luamplib.numbersystem
+  local currfmt = currentformat .. (luamplib.numbersystem or "scaled")
   currfmt = firstpass and currfmt or (currfmt.."2")
   local mpx = mplibinstances[currfmt]
   if standalone or not mpx then

Sorry for the inconvenience, and thanks for the report.

Regards,
-- 
Dohyun Kim
Seoul, Republic of Korea

From luigi.scarso at gmail.com  Mon Jan 26 13:55:41 2015
From: luigi.scarso at gmail.com (luigi scarso)
Date: Mon, 26 Jan 2015 13:55:41 +0100
Subject: [luatex] Luatex 0.79.3.1 announcement
Message-ID: <CAG5iGsAhD-xWXmPRFZO51+W8HLtp6A9=HcxBVcPqF_h_LUFO1A@mail.gmail.com>

A quick updated due a bug found by Hans while testing
mplib with wrong input.
The difference is  only in rev: current is
This is LuaTeX, Version beta-0.79.3 (TeX Live 2015/dev) (rev 5140)
while previously was
This is LuaTeX, Version beta-0.79.3 (TeX Live 2015/dev) (rev 5130)
(in the future we will try to avoid  a <minor>.<minor> number ).


-- 
luigi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/luatex/attachments/20150126/4c843b43/attachment.html>

From patrick at gundla.ch  Mon Jan 26 14:15:48 2015
From: patrick at gundla.ch (Patrick Gundlach)
Date: Mon, 26 Jan 2015 14:15:48 +0100
Subject: [luatex] [Dev-luatex] Luatex 0.79.3.1 announcement
In-Reply-To: <CAG5iGsAhD-xWXmPRFZO51+W8HLtp6A9=HcxBVcPqF_h_LUFO1A@mail.gmail.com>
References: <CAG5iGsAhD-xWXmPRFZO51+W8HLtp6A9=HcxBVcPqF_h_LUFO1A@mail.gmail.com>
Message-ID: <B7609332-3241-4420-B741-88ED96909DEF@gundla.ch>

Thank you Luigi and all others for the development!

A quick note: if you like a git(hub) style interface, I try to keep


https://github.com/pgundlach/LuaTeX


up to date

Patrick



From luigi.scarso at gmail.com  Mon Jan 26 14:18:58 2015
From: luigi.scarso at gmail.com (luigi scarso)
Date: Mon, 26 Jan 2015 14:18:58 +0100
Subject: [luatex] [Dev-luatex] Luatex 0.79.3.1 announcement
In-Reply-To: <B7609332-3241-4420-B741-88ED96909DEF@gundla.ch>
References: <CAG5iGsAhD-xWXmPRFZO51+W8HLtp6A9=HcxBVcPqF_h_LUFO1A@mail.gmail.com>
 <B7609332-3241-4420-B741-88ED96909DEF@gundla.ch>
Message-ID: <CAG5iGsC4e9mnAE8B0D0j+iR5R0_Wpk9gMSx32byC+m+hCDb3wg@mail.gmail.com>

On Mon, Jan 26, 2015 at 2:15 PM, Patrick Gundlach <patrick at gundla.ch> wrote:

> Thank you Luigi and all others for the development!
>
> A quick note: if you like a git(hub) style interface, I try to keep
>
>
> https://github.com/pgundlach/LuaTeX
>
>
> up to date
>
No problem for me.

-- 
luigi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/luatex/attachments/20150126/8af82e33/attachment.html>

From elie.roux at telecom-bretagne.eu  Mon Jan 26 18:29:03 2015
From: elie.roux at telecom-bretagne.eu (=?UTF-8?B?w4lsaWUgUm91eA==?=)
Date: Mon, 26 Jan 2015 18:29:03 +0100
Subject: [luatex] Strange bug with attribute unsetting and output writing...
Message-ID: <54C6795F.5090602@telecom-bretagne.eu>

Hello,

I'm not sure it's useful to report it here, but just in case:

Following (plain TeX) example

\attribute0=-"7FFFFFFF\relax
\immediate\write-1{Anything}
\immediate\write-1{Anything}
\skip0=1pt plus 100pt\relax
\showthe\skip0
\bye

outputs

1.0pt plus 100.0pt minus 0.00002pt.

while

\skip0=1pt plus 100pt\relax
\showthe\skip0
\bye

outputs

1.0pt plus 100.0pt.

(reported here: http://tracker.luatex.org/view.php?id=923 , found
here:
https://github.com/lualatex/luatexbase/issues/20#issuecomment-71494238 ).

Thank you,
-- 
Elie

From herbs at wideopenwest.com  Mon Jan 26 22:11:11 2015
From: herbs at wideopenwest.com (Herbert Schulz)
Date: Mon, 26 Jan 2015 15:11:11 -0600
Subject: [luatex] luamplib problem (?)
Message-ID: <91B7C026-100C-4EC7-B758-E02A9BC5A176@wideopenwest.com>

Howdy,

Thanks for the incredibly quick fix to luamplib. I arrived in this morning's TL update. All is well now.

Good Luck,

Herb Schulz
(herbs at wideopenwest dot com)





From henrimenke at gmail.com  Wed Jan 28 14:25:38 2015
From: henrimenke at gmail.com (Henri Menke)
Date: Wed, 28 Jan 2015 14:25:38 +0100
Subject: [luatex] Bug: Wrong behaviour of \limits
Message-ID: <54C8E352.1060601@gmail.com>

Dear luatex devs,

if I place \limits after a math atom, i.e. {}, no error is thrown. 
luatex should throw "! Limit controls must follow a math operator." as 
the pdftex and xetex engines do.

Minimal example:

${}\limits$
\bye

It will typeset using luatex but will throw an error when processed 
using pdftex or xetex.

Kind regards,
Henri

From Herbert.Voss at FU-Berlin.DE  Wed Jan 28 15:37:01 2015
From: Herbert.Voss at FU-Berlin.DE (Herbert Voss)
Date: Wed, 28 Jan 2015 15:37:01 +0100
Subject: [luatex] Bug: Wrong behaviour of \limits
In-Reply-To: <54C8E352.1060601@gmail.com>
References: <54C8E352.1060601@gmail.com>
Message-ID: <54C8F40D.501@FU-Berlin.DE>

Am 28.01.2015 um 14:25 schrieb Henri Menke:

> if I place \limits after a math atom, i.e. {}, no error is thrown.
> luatex should throw "! Limit controls must follow a math operator." as
> the pdftex and xetex engines do.
>
> Minimal example:
>
> ${}\limits$
> \bye
>
> It will typeset using luatex but will throw an error when processed
> using pdftex or xetex.

voss at shania:~/tmp> luatex demo
This is LuaTeX, Version beta-0.79.2 (TeX Live 2015/dev) (rev 5084)
  restricted \write18 enabled.
(./demo.tex
! Limit controls must follow a math operator.
l.1 ${}\limits
             $


Herbert


From luigi.scarso at gmail.com  Wed Jan 28 15:56:10 2015
From: luigi.scarso at gmail.com (luigi scarso)
Date: Wed, 28 Jan 2015 15:56:10 +0100
Subject: [luatex] Bug: Wrong behaviour of \limits
In-Reply-To: <54C8E352.1060601@gmail.com>
References: <54C8E352.1060601@gmail.com>
Message-ID: <CAG5iGsD1s=gNA3MC8_RGuNrfbPa8LxTZ-PBv6DqgnPSL92yztg@mail.gmail.com>

On Wed, Jan 28, 2015 at 2:25 PM, Henri Menke <henrimenke at gmail.com> wrote:

> Dear luatex devs,
>
> if I place \limits after a math atom, i.e. {}, no error is thrown. luatex
> should throw "! Limit controls must follow a math operator." as the pdftex
> and xetex engines do.
>
> Minimal example:
>
> ${}\limits$
> \bye
>
> It will typeset using luatex but will throw an error when processed using
> pdftex or xetex.
>
> Kind regards,
> Henri
>

This is LuaTeX, Version beta-0.79.3
 \write18 enabled.


! Limit controls must follow a math operator.
l.1 ${}\limits
            $


-- 
luigi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://tug.org/pipermail/luatex/attachments/20150128/14301101/attachment.html>

From dluecking at sbcglobal.net  Wed Jan 28 21:14:08 2015
From: dluecking at sbcglobal.net (Dan Luecking)
Date: Wed, 28 Jan 2015 14:14:08 -0600
Subject: [luatex] Bug: Wrong behaviour of \limits
Message-ID: <118685.21348.bm@smtp120.sbc.mail.ne1.yahoo.com>

On 2015-28-01 at 14:25:38 CET, Henri Menke wrote:

>${}\limits$
>\bye
>
>It will typeset using luatex but will throw an error when processed
>using pdftex or xetex.

That happens for version beta-0.79.1, but later versions have
correct behavior.

Interestingly (in beta-0.79.1), the X in
     $Y X\limits_{n=1}^\infty Z$
is treated just like it is in the correct code
     $Y \mathop{X}\limits_{n=1}^\infty Z$,
even to the point of shifting it vertically to center it on the
math axis and putting the same amount of space between it and the
surrounding symbols!

It almost seems like it was planned...;)

Dan


Daniel H. Luecking
Department of Mathematical Sciences
Fayetteville, Arkansas
http://www-cs-faculty.stanford.edu/~knuth/iaq.html 


